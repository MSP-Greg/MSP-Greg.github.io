<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: FAQ &mdash; RubyInstaller2 master</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "FAQ",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>RubyInstaller2 master</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: FAQ&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h2>FAQs</h2>

<ul>
<li><a href="#user-content-install-mode">Which install mode should I use?</a></li>
<li><a href="#user-content-ridk-install">What do the RubyInstaller-2.4+ install components do?</a></li>
<li><a href="#user-content-shared-devkit">Can I share one Devkit for multiple Ruby versions?</a></li>
<li><a href="#user-content-rails">Are there recommendations for working with rails?</a></li>
<li><a href="#user-content-jit">How can I use the ruby JIT?</a></li>
<li><a href="#user-content-silent-install">How do I perform a silent install with the RubyInstaller?</a></li>
<li><a href="#user-content-choco-install">Can I automate the Ruby and MSYS2 installation?</a></li>
<li><a href="#user-content-update-install">What is recommended way to update a Ruby installation?</a></li>
<li><a href="#user-content-move-ruby-directory">How to move Ruby to another directory?</a></li>
<li><a href="#user-content-portable-install">Can RubyInstaller2 be used without installation (e.g. from a USB stick)?</a></li>
<li><a href="#user-content-ssl-ca-certs">How does RubyInstaller-2.4+ handle SSL certificate authorities?</a></li>
<li><a href="#user-content-verify-signatures">How to verify PGP signature of download files?</a></li>
</ul>

<hr>

<h4><a name="install-mode">Q:</a> Which install mode should I use?</h4>

<p><em>A:</em> Recent RubyInstaller&#39;s show an selection dialog at the very first stage:</p>

<p><img src="https://user-images.githubusercontent.com/176234/210003492-80d2ef31-b370-49b2-8498-07a207b4fdf2.png" alt="installer_all_users"></p>

<p>This allows the selection of the following two installation modes:</p>

<ul>
<li><strong>Single user install into <code>C:/Ruby32-x64</code> or similar.</strong>

<ul>
<li>This is the default and the recommended way to install Ruby on Windows.</li>
<li>The installing user (and administrators) has write access to the ruby directory.
Other users have read access only.
It is the best option for the common use case of only one user on the computer.</li>
</ul></li>
<li><strong>All-users install into <code>C:/Ruby32-x64</code> or similar.</strong>

<ul>
<li>This allows a single ruby installation to be used by multiple users.</li>
<li>Ordinary users can use a common ruby installation, but don&#39;t have write permissions to the ruby directory.
Gems can either be installed centrally by an administrator or are automatically redirected to a private per-user folder, if the user has no write access to the central directory. However it is not possible for an ordinary user to install new <code>pacman</code> packages.</li>
<li>It&#39;s also possible to manually grant write access to a particular group of users, so that they can install gems and <code>pacman</code> packages in the common location (in addition to administrators).</li>
</ul></li>
</ul>

<p>There is also a third possible option:</p>

<ul>
<li><strong>Single user install into <code>C:/Users/<Username>/Ruby32-x64</code> or similar.</strong>

<ul>
<li>This is the same installation procedure as the first one, but the base directory in the following installer steps can be changed to be inside the private user folder.</li>
<li>In this case the ruby installation is completely private and not visible to other users.</li>
<li>Downside is that the path is longer and it often leads to incompatibilities with compilers and build scripts, if the username contains spaces or non-ASCII characters.</li>
</ul></li>
</ul>

<p>See also below, how the install mode can be set in a <a href="https://github.com/oneclick/rubyinstaller2/wiki/FAQ#user-content-silent-install">silent installation</a>.</p>

<h4><a name="ridk-install">Q:</a> What do the RubyInstaller-2.4+ install components do?</h4>

<p><em>A:</em> See the corresponding <a href="https://stackoverflow.com/questions/44229081/what-do-these-rubyinstaller-2-4-components-do">stackoverflow question</a>.</p>

<h4><a name="shared-devkit">Q:</a> Can I share one Devkit for multiple Ruby versions?</h4>

<p>Yes, it&#39;s possible to use one MSYS2-Devkit for multiple Rubies. This can save a lot of disk space and makes updating MSYS2 easier. The downside is that updating MSYS2 sometimes delivers incompatible changes that can break older <a href="RubyInstaller.html" title="RubyInstaller (module)"><code>RubyInstaller</code></a> releases.</p>

<p>You can use the Ruby+Devkit installer and move the <code>msys64</code> or <code>msys32</code> directory from within the Ruby path to one level higher, so that it&#39;s stored alongside of multiple ruby directories. The storage location within the Ruby directory is preferred, so that it&#39;s necessary to delete all these <code>msys64</code> or <code>msys32</code> directories in order to use the shared Devkit. For instance:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_move'>move</span> <span class='label'>c:</span><span class='CHAR'>\</span><span class='const'>Ruby27</span><span class='op'>-</span><span class='id identifier rubyid_x64'>x64</span><span class='CHAR'>\</span><span class='id identifier rubyid_msys64'>msys64</span> <span class='label'>c:</span>\
<span class='id identifier rubyid_rmdir'>rmdir</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>s </span><span class='regexp_end'>/q</span></span> <span class='id identifier rubyid_c'>c</span><span class='symbeg'>:</span><span class='CHAR'>\</span><span class='const'>Ruby26</span><span class='op'>-</span><span class='id identifier rubyid_x64'>x64</span><span class='CHAR'>\</span><span class='id identifier rubyid_msys64'>msys64</span>
<span class='id identifier rubyid_rmdir'>rmdir</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>s </span><span class='regexp_end'>/q</span></span> <span class='id identifier rubyid_c'>c</span><span class='symbeg'>:</span><span class='CHAR'>\</span><span class='const'>Ruby25</span><span class='op'>-</span><span class='id identifier rubyid_x64'>x64</span><span class='CHAR'>\</span><span class='id identifier rubyid_msys64'>msys64</span></code></pre>

<p>Now all three Ruby versions share the same MSYS2-Devkit at <code>c:\msys64</code>. The command <code>ridk version</code> can be used to verify that the intended MSYS2-Devkit location is in use:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$ </span><span class='id identifier rubyid_c'>c</span><span class='symbeg'>:</span><span class='CHAR'>\</span><span class='const'>Ruby26</span><span class='op'>-</span><span class='id identifier rubyid_x64'>x64</span><span class='CHAR'>\</span><span class='id identifier rubyid_bin'>bin</span><span class='CHAR'>\</span><span class='id identifier rubyid_ridk'>ridk</span> <span class='id identifier rubyid_version'>version</span>
[<span class='op'>...</span>]
<span class='id identifier rubyid_msys2'>msys2</span><span class='op'>:</span>
  <span class='id identifier rubyid_path'>path</span><span class='op'>:</span> <span class='const'>C</span><span class='symbeg'>:</span><span class='CHAR'>\</span><span class='id identifier rubyid_msys64'>msys64</span></code></pre>

<h4><a name="rails">Q:</a> Are there recommendations for working with rails?</h4>

<p><em>A:</em> First of all you should install <a href="https://rubyinstaller.org/downloads">RubyInstaller with Devkit</a> and <a href="https://git-scm.com/download/win">Git</a>. Both should be added to the PATH (which is the default).</p>

<p>Rails needs a Javascript environment with Yarn to work. The easiest option is to install nodejs and yarn provided by MSYS2 like so:</p>

<pre class="code sh"><code class="sh">ridk exec pacman -S %MINGW_PACKAGE_PREFIX%-yarn
</code></pre>

<p>Rails will use it automatically.
Alternaively official <a href="https://nodejs.org/en/download/">Node.js</a> and <a href="https://classic.yarnpkg.com/en/docs/install/#windows-stable">Yarn</a> installers for Windows can be used. The installers can add them to the PATH, which is necessary for rails.</p>

<p>Then you should be able to successfully run rails-8.0 kind of:</p>

<pre class="code sh"><code class="sh">gem install rails
rails new myapp
cd myapp
rails g scaffold cats name:string
rails db:migrate
rails s
</code></pre>

<p>and connect to <a href="http://localhost:3000/cats">http://localhost:3000/cats</a> . Have fun!</p>

<p>Most of the binary gems are updated for Ruby-3.3, but not necessary for Ruby-3.4. If you get errors kind of <code>LoadError: cannot load such file -- 3.4/&lt;mygem&gt;</code> or <code>gem requires Ruby version &gt;= 2.7, &lt; 3.4.dev</code>, try to update the gem and if this doesn&#39;t work, downgrade Ruby or open an issue in the related project to update the binary gem.</p>

<p>Alternatively it is often possible to use <code>gem install &lt;mygem&gt; --platform ruby</code> to force installation of the source gem. Unfortunately bundler provides an &quot;one for all&quot; switch only, which disables all binary gems and requires to manually install dependent pacman packages. So only if you want to build all packages from source use: <code>bundle config force_ruby_platform true</code></p>

<h4><a name="jit">Q:</a> How can I use the ruby JIT?</h4>

<p><em>A:</em> Ruby-2.6 introduced the MJIT compiler as an experimental feature.
Later versions moved to YJIT and RJIT.</p>

<p>Only the MJIT compiler was usable on Windows, but did not provide any performance advantage.
Neither RJIT not YJIT work on Windows, so far.</p>

<h4><a name="silent-install">Q:</a> How do I perform a silent/unattended install with the RubyInstaller?</h4>

<p><em>A:</em> The RubyInstaller currently uses <a href="http://www.jrsoftware.org/isinfo.php">Inno Setup</a> which allows two levels of silent installation (<strong>silent</strong> with just an install progress window, or <strong>very silent</strong> without even an install progress window) to be selected using either the <code>/silent</code> or <code>/verysilent</code> command line options.</p>

<p>The options <code>/currentuser</code> or <code>/allusers</code> must be used to suppress the selection dialog of per-user or machine wide scope. It controls whether the start menu entries, <code>/tasks</code> modifications and addition to &quot;Add/Remove Programs&quot; is done per current user or machine wide. Write permissions on the install directory for the current user are only enabled with <code>/currentuser</code> option. All other ordinary users have read-only permissions.</p>

<p>When performing silent installations, you often want to specify where to install the Ruby environment and which operations should be done. The <a href="http://www.jrsoftware.org/ishelp/index.php?topic=setupcmdline">Inno Setup Help</a> provides the details of the possible command line options. The <code>/tasks</code> parameter can control additional actions of the installer:</p>

<ul>
<li><code>modpath</code> : Update your PATH environment variable to use the newly installed ruby. [default]</li>
<li><code>nomodpath</code> : Don&#39;t update the PATH environment variable.</li>
<li><code>assocfiles</code> : Associate .RB/.RBW files to the newly installed ruby. [default]</li>
<li><code>noassocfiles</code> : Don&#39;t associate .RB/.RBW files.</li>
<li><code>ridkinstall</code> : Run <code>ridk install</code> for MSYS2 installation subsequent to the installer. [default]</li>
<li><code>noridkinstall</code> : Don&#39;t run <code>ridk install</code>. [default if started with <code>/silent</code> or <code>/verysilent</code>]</li>
<li><code>defaultutf8</code> : Set environment variable <code>RUBYOPT=-Eutf-8</code>.</li>
<li><code>nodefaultutf8</code> : Don&#39;t set the <code>RUBYOPT</code> environment variable [default].</li>
</ul>

<p>An example shows how easy it is:</p>

<pre class="code sh"><code class="sh"># silent install to custom dir with default options, showing up a per-user/machine-wide selection dialog and a progress bar afterwards
c:\&gt;rubyinstaller.exe /silent /dir=&quot;e:/my_test_ruby&quot;

# very silent machine wide install to default dir with file associations but no PATH update
c:\&gt;rubyinstaller.exe /verysilent /allusers /tasks=assocfiles,nomodpath

# very silent install to custom dir without file associations, PATH update and ridk install and only for the current user
c:\&gt;rubyinstaller.exe /verysilent /currentuser /dir=&quot;d:/rubyABC&quot; /tasks=&quot;noassocfiles,nomodpath,noridkinstall&quot;
</code></pre>

<p><a href="https://rubyinstaller.org/2018/03/29/rubyinstaller-2.5.1-1-and-2.4.4-1-released.html">Ruby+Devkit</a> installs Ruby and MSYS2 with development packages within the destination path.
However please note, that an unattended MSYS2 installation must be completed by executing <code>&lt;dest-path&gt;/bin/ridk install 1</code> after the installer has finished.
This for instance properly sets trusted GPG keys up, so that <code>pacman</code> can work.</p>

<p>The <code>/components</code> parameter can control whether MSYS2 Devkit shall be installed for the Ruby+Devkit installer version.
The default is <code>/components=ruby,rdoc,msys2</code>.</p>

<p>Uninstallation can be done with the executable <code>&lt;ruby&gt;\unins???.exe</code> in the ruby install dir like <code>c:\Ruby\unins000.exe</code>.
This executable has the following parameters:</p>

<ul>
<li><code>/SILENT</code>, <code>/VERYSILENT</code>  - same as the installer executable</li>
<li><code>/allfiles=yes</code> Remove ruby install files, MSYS2 and all installed gems (this is the default).</li>
<li><code>/allfiles=no</code> Remove only ruby install files, but keep MSYS2 and installed gems.</li>
</ul>

<h4><a name="choco-install">Q:</a> Can I automate the Ruby and MSYS2 installation?</h4>

<p><em>A:</em> There are two easy possibilities: Either use Ruby+Devkit installer <a href="#user-content-silent-install">above</a> or Chocolatey.</p>

<p>The people at <a href="https://chocolatey.org/">Chocolatey.org</a> provide packages for easy unattended installation of both <a href="https://chocolatey.org/packages/ruby">Ruby</a> and <a href="https://chocolatey.org/packages/msys2">MSYS2</a>.
You can install the MSYS2 development tools afterwards per <code>ridk install 2 3</code> as described on the <a href="https://chocolatey.org/packages/msys2">MSYS2 package page</a>.
Install directory is <code>c:/tools/RubyXY-x64</code> and <code>c:/tools/msys64</code> by default.</p>

<h4><a name="update-install">Q:</a> What is recommended way to update a Ruby installation?</h4>

<p>You can usually update your Ruby installation by installing into the same directory, as long as the major and minor part of the Ruby version keeps the same. If the major and minor part of the Ruby version is different (2.4 vs. 2.5), then ruby needs to be installed into a separate directory and all gems needs to be reinstalled.</p>

<p>First of all install <code>bundler</code> into a new ruby version, unless you&#39;re running Ruby-2.6 or newer, since they have bundler builtin.
Then it&#39;s best practice to install required gems per <code>bundle install</code> like so:</p>

<pre class="code sh"><code class="sh">gem install bundler
cd your-application
bundle install
</code></pre>

<p>You can use <a href="https://bitbucket.org/jonforums/uru">uru</a> or the bundled <a href="https://github.com/oneclick/rubyinstaller2/wiki/The-ridk-tool#ridk-use">ridk use tool</a> to switch between different ruby versions.</p>

<h4><a name="move-ruby-directory">Q:</a> How to move Ruby to another directory?</h4>

<p>This is easy (change <code>c:\Ruby\</code> to your own source path):</p>

<ol>
<li>Run the uninstaller <code>c:\Ruby\unins000.exe</code> with option <code>/allfiles=no</code> in the directory you installed Ruby.
This is safe, since it deletes only files, that have been created by the installer.
Installed gems or MSYS2 packages are kept untouched.</li>
<li>Move the remaining Ruby directory <code>c:\Ruby\</code> to your destination path by some file manager.</li>
<li>Optionally: Download the latest patch level of the installed RubyInstaller version, while being over it.</li>
<li>Reinstall Ruby per RubyInstaller.exe and choose the new directory as target path.
A message windows pops up, which asks if it&#39;s OK to install into an existing directory - answer with &quot;Yes&quot;!</li>
<li>Now everything (start menu, file associations, etc.) should work as if Ruby has been installed to the new directory from the beginning.</li>
</ol>

<h4><a name="portable-install">Q:</a> Can RubyInstaller2 be used without installation (e.g. from a USB stick)?</h4>

<p>Yes, both Ruby and MSYS2 can be used without installation. It doesn&#39;t matter which RubyInstaller2 download variant is being used - both <a href="https://rubyinstaller.org/downloads/">exe installer and 7z archive files</a> are suitable as base installation for a portable ruby. Obviously no start menu items are generated nor file associations or additions to the PATH on the target system. However ruby programs can be started, simply by running the binstub <code>*.bat</code> or <code>*.cmd</code> file in <code>&lt;ruby-path&gt;/bin/</code>. For instance double click on <code>f:/portable/ruby/bin/irb.cmd</code> to open a interactive ruby session. Alternatively add the ruby <code>bin</code> path to the <code>PATH</code> environment variable like so:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>SET</span> <span class='const'>PATH</span><span class='op'>=</span><span class='id identifier rubyid_f'>f</span><span class='symbeg'>:</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>portable</span><span class='regexp_end'>/ruby</span></span><span class='op'>/</span><span class='id identifier rubyid_bin'>bin</span><span class='semicolon'>;</span><span class='const'>%PATH</span><span class='op'>%</span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>-</span><span class='id identifier rubyid_v'>v</span></code></pre>

<p>MSYS2-Devkit can be used in a portable ruby installation as well. You can either use the Ruby+Devkit installer or place the <code>msys64</code> or <code>msys32</code> directory within the ruby path or alongside to this directory. Both <code>f:/portable/ruby/msys64/</code> and <code>f:/portable/msys64/</code> would work. Spaces in the path will cause issues when installing gems, so its better to avoid them. To enable MSYS2 and MINGW tools in cmd or powershell simply run:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ridk'>ridk</span> <span class='id identifier rubyid_enable'>enable</span></code></pre>

<p>One pitfall of older versions of rubygems was that they generated gem binstubs (like <code>bundle</code> or <code>rails</code> commands) with an absolute path. This is fixed in rubygems-3.0.0, so make sure to update rubygems per <code>gem update --system</code> before installing gems. See the <a href="https://github.com/rubygems/rubygems/pull/2119">issue here</a>.</p>

<h4><a name="ssl-ca-certs">Q:</a> How does RubyInstaller-2.4+ handle SSL certificate authorities?</h4>

<p>We bundle a list of certificate authorities to every RubyInstaller release since version 2.4.1-1.
It is updated with every new release to the latest CA list <a href="https://wiki.mozilla.org/CA/Included_Certificates">distributed by the Mozilla foundation</a>.
See [the README-SSL]) for further details.
RubyInstaller releases before 2.4 don&#39;t bundle any certificates other than the internal certificates of rubygems.</p>

<h4><a name="verify-signatures">Q:</a> How to verify PGP signature of download files?</h4>

<p><a href="https://rubyinstaller.org/downloads/">Download installer file</a> (e.g. <code>rubyinstaller-3.0.0-1-x64.exe</code>) and signature file (e.g. <code>rubyinstaller-3.0.0-1-x64.exe.asc</code>) into the users download directory.
The download link of the signature file gets visible after a click on the hamburger menu right hand of the installer link.
Then go into a MSYS2 shell (or some other GPG installation) and run the following commands:</p>

<pre class="code sh"><code class="sh">$ ridk exec sh -l
$ cd c:/Users/$USER/Downloads
$ curl https://rubyinstaller.org/ci.ri2-package-signing-key.asc | gpg --import
$ gpg --verify rubyinstaller-3.0.0-1-x64.exe.asc 
</code></pre>

<p>If successful it should print a message like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gpg'>gpg</span><span class='op'>:</span> <span class='const'>Signature</span> <span class='id identifier rubyid_made'>made</span> <span class='const'>Sun</span> <span class='const'>Dec</span> <span class='int'>27</span> <span class='int'>21</span><span class='symbeg'>:</span><span class='int'>45</span><span class='symbeg'>:</span><span class='int'>05</span> <span class='int'>2020</span> <span class='const'>CET</span>
<span class='id identifier rubyid_gpg'>gpg</span><span class='op'>:</span>                <span class='id identifier rubyid_using'>using</span> <span class='const'>RSA</span> <span class='id identifier rubyid_key'>key</span> <span class='const'>A2A9BAD21B8D41522FE07214E11AE6CF30B77F3A</span>
<span class='id identifier rubyid_gpg'>gpg</span><span class='op'>:</span> <span class='const'>Good</span> <span class='id identifier rubyid_signature'>signature</span> <span class='id identifier rubyid_from'>from</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ci.ri2 package signing key</span><span class='tstring_end'>&quot;</span></span> [<span class='id identifier rubyid_full'>full</span>]</code></pre>

<p>or like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gpg'>gpg</span><span class='op'>:</span>                <span class='id identifier rubyid_using'>using</span> <span class='const'>RSA</span> <span class='id identifier rubyid_key'>key</span> <span class='const'>B5FF9149F95A59BFBCFDAF0543B526B8AAE32BA7</span>
<span class='id identifier rubyid_gpg'>gpg</span><span class='op'>:</span> <span class='const'>Good</span> <span class='id identifier rubyid_signature'>signature</span> <span class='id identifier rubyid_from'>from</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lars Kanis &lt;lars@greiz-reinsdorf.de&gt;</span><span class='tstring_end'>&quot;</span></span> [<span class='id identifier rubyid_unknown'>unknown</span>]</code></pre>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>