<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: YARD::RegistryResolver
  
    &mdash; YARD
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "YARD::RegistryResolver";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../YARD.html" title="YARD (module)">YARD</a></span></span>
     &raquo; 
    <span class="title">RegistryResolver</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../class_list.html"></iframe>

      <div id="content"><h1>Class: YARD::RegistryResolver
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">YARD::RegistryResolver</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="CodeObjects/NamespaceMapper.html" title="YARD::CodeObjects::NamespaceMapper (module)">CodeObjects::NamespaceMapper</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/yard/registry_resolver.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Handles all logic for complex lexical and inherited object resolution. Used
by <span class='object_link'><a href="Registry.html#resolve-class_method" title="YARD::Registry.resolve (method)">YARD::Registry.resolve</a></span>, so there is no need to use this class directly.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Registry.html#resolve-class_method" title="YARD::Registry.resolve (method)">YARD::Registry.resolve</a></span></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.9.1</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#collect_namespaces-instance_method" title="#collect_namespaces (instance method)">#<strong>collect_namespaces</strong>(object)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Collects and returns all inherited namespaces for a given object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(registry = Registry)  &#x21d2; RegistryResolver </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new resolver object for a registry.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_by_path-instance_method" title="#lookup_by_path (instance method)">#<strong>lookup_by_path</strong>(path, opts = {})  &#x21d2; CodeObjects::Base, ... </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Performs a lookup on a given path in the registry.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#lookup_path_direct-instance_method" title="#lookup_path_direct (instance method)">#<strong>lookup_path_direct</strong>(namespace, path, type)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Performs a lexical lookup from a namespace for a path and a type hint.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#lookup_path_inherited-instance_method" title="#lookup_path_inherited (instance method)">#<strong>lookup_path_inherited</strong>(namespace, path, type)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Performs a lookup through the inheritance chain on a path with a type hint.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#validate-instance_method" title="#validate (instance method)">#<strong>validate</strong>(obj, type)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return [Boolean] if the obj&#39;s type matches the provided type.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="CodeObjects/NamespaceMapper.html" title="YARD::CodeObjects::NamespaceMapper (module)">CodeObjects::NamespaceMapper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="CodeObjects/NamespaceMapper.html#clear_separators-instance_method" title="YARD::CodeObjects::NamespaceMapper#clear_separators (method)">#clear_separators</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#default_separator-instance_method" title="YARD::CodeObjects::NamespaceMapper#default_separator (method)">#default_separator</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#invalidate-class_method" title="YARD::CodeObjects::NamespaceMapper.invalidate (method)">invalidate</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#map-class_method" title="YARD::CodeObjects::NamespaceMapper.map (method)">map</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#map_match-class_method" title="YARD::CodeObjects::NamespaceMapper.map_match (method)">map_match</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#register_separator-instance_method" title="YARD::CodeObjects::NamespaceMapper#register_separator (method)">#register_separator</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#rev_map-class_method" title="YARD::CodeObjects::NamespaceMapper.rev_map (method)">rev_map</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#separators-instance_method" title="YARD::CodeObjects::NamespaceMapper#separators (method)">#separators</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#separators_for_type-instance_method" title="YARD::CodeObjects::NamespaceMapper#separators_for_type (method)">#separators_for_type</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#separators_match-instance_method" title="YARD::CodeObjects::NamespaceMapper#separators_match (method)">#separators_match</a></span>, <span class='object_link'><a href="CodeObjects/NamespaceMapper.html#types_for_separator-instance_method" title="YARD::CodeObjects::NamespaceMapper#types_for_separator (method)">#types_for_separator</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(registry = Registry)  &#x21d2; <tt><span class='object_link'><a href="" title="YARD::RegistryResolver (class)">RegistryResolver</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new resolver object for a registry.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>registry</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Registry.html" title="YARD::Registry (module)">Registry</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Registry</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>only set this if customizing the registry object</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.9.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/registry_resolver.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_registry'>registry</span> <span class='op'>=</span> <span class='const'>Registry</span><span class='rparen'>)</span>
  <span class='ivar'>@registry</span> <span class='op'>=</span> <span class='const'>Registry</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="collect_namespaces-instance_method">
  
    #<strong>collect_namespaces</strong>(object)  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Collects and returns all inherited namespaces for a given object</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.9.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/registry_resolver.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_collect_namespaces'>collect_namespaces</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:inheritance_tree</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_nss'>nss</span> <span class='op'>=</span> <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_inheritance_tree'>inheritance_tree</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:superclass</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_superclass'>superclass</span> <span class='op'>!=</span> <span class='const'>P</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BasicObject</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_nss'>nss</span> <span class='op'>|=</span> <span class='lbracket'>[</span><span class='const'>P</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Object</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_nss'>nss</span> <span class='op'>|=</span> <span class='lbracket'>[</span><span class='const'>P</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BasicObject</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_nss'>nss</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_by_path-instance_method">
  
    #<strong>lookup_by_path</strong>(path, opts = {})  &#x21d2; <tt><span class='object_link'><a href="CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span></tt>, ... 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Performs a lookup on a given path in the registry. Resolution will occur in
a similar way to standard Ruby identifier resolution, doing lexical lookup,
as well as (optionally) through the inheritance chain. A proxy object can
be returned if the lookup fails for future resolution. The proxy will be
type hinted with the <code>type</code> used in the original lookup.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>A lookup from root</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_resolver'>resolver</span><span class='period'>.</span><span class='id identifier rubyid_lookup_by_path'>lookup_by_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A::B::C</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>A lookup from the A::B namespace</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_resolver'>resolver</span><span class='period'>.</span><span class='id identifier rubyid_lookup_by_path'>lookup_by_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>namespace:</span> <span class='const'>P</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A::B</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>A lookup on a method through the inheritance tree</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_resolver'>resolver</span><span class='period'>.</span><span class='id identifier rubyid_lookup_by_math'>lookup_by_math</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A::B#foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>inheritance:</span> <span class='kw'>true</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">namespace</span>
          <span class="type">(<tt><span class='object_link'><a href="CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span></tt>, <tt>:root</tt>, <tt>nil</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>the namespace object to start searching from. If root or nil is provided,
<span class='object_link'><a href="Registry.html#root-class_method" title="YARD::Registry.root (method)">YARD::Registry.root</a></span> is assumed.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">inheritance</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>whether to perform lookups through the inheritance chain (includes mixins)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">proxy_fallback</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>when true, a proxy is returned if no match is found</p>
</div>
          
        </li>
      
        <li>
          <span class="name">type</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>an optional type hint for the resolver to consider when performing a
lookup. If a type is provided and the resolved object&#39;s type does not
match the hint, the object is discarded.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span></tt>, <tt><span class='object_link'><a href="CodeObjects/Proxy.html" title="YARD::CodeObjects::Proxy (class)">CodeObjects::Proxy</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the first object that matches the path lookup. If proxy_fallback is
provided, a proxy object will be returned in the event of no match,
otherwise nil will be returned.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.9.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/registry_resolver.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lookup_by_path'>lookup_by_path</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:namespace</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_inheritance'>inheritance</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:inheritance</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_proxy_fallback'>proxy_fallback</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:proxy_fallback</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>CodeObjects</span><span class='op'>::</span><span class='const'>Proxy</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_proxy_fallback'>proxy_fallback</span> <span class='op'>?</span> <span class='const'>CodeObjects</span><span class='op'>::</span><span class='const'>Proxy</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>==</span> <span class='symbol'>:root</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_namespace'>namespace</span>
    <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='kw'>until</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>CodeObjects</span><span class='op'>::</span><span class='const'>NamespaceObject</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_orignamespace'>orignamespace</span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_default_separator'>default_separator</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='backref'>$&#39;</span><span class='comma'>,</span> <span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_resolved'>resolved</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_resolved'>resolved</span>
    <span class='id identifier rubyid_resolved'>resolved</span> <span class='op'>=</span> <span class='id identifier rubyid_lookup_path_direct'>lookup_path_direct</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_resolved'>resolved</span> <span class='op'>||=</span> <span class='id identifier rubyid_lookup_path_inherited'>lookup_path_inherited</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_inheritance'>inheritance</span>
    <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_proxy_fallback'>proxy_fallback</span>
    <span class='id identifier rubyid_resolved'>resolved</span> <span class='op'>||=</span> <span class='const'>CodeObjects</span><span class='op'>::</span><span class='const'>Proxy</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_orignamespace'>orignamespace</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_resolved'>resolved</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_path_direct-instance_method">
  
    #<strong>lookup_path_direct</strong>(namespace, path, type)  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Performs a lexical lookup from a namespace for a path and a type hint.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.9.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/registry_resolver.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lookup_path_direct'>lookup_path_direct</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_root?'>root?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_separators_match'>separators_match</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='regexp_end'>/</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>+</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_separators'>separators</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>+</span> <span class='id identifier rubyid_sep'>sep</span> <span class='op'>+</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_path_inherited-instance_method">
  
    #<strong>lookup_path_inherited</strong>(namespace, path, type)  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Performs a lookup through the inheritance chain on a path with a type hint.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.9.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/registry_resolver.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lookup_path_inherited'>lookup_path_inherited</span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resolved'>resolved</span><span class='comma'>,</span> <span class='id identifier rubyid_last_obj'>last_obj</span><span class='comma'>,</span> <span class='id identifier rubyid_scopes'>scopes</span><span class='comma'>,</span> <span class='id identifier rubyid_last_sep'>last_sep</span><span class='comma'>,</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='int'>0</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_separators_match'>separators_match</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_last_sep'>last_sep</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.+?)(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_separators_match'>separators_match</span><span class='embexpr_end'>}</span><span class='tstring_content'>|$)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_part'>part</span><span class='comma'>,</span> <span class='id identifier rubyid_sep'>sep</span><span class='op'>|</span>
    <span class='id identifier rubyid_cur_obj'>cur_obj</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_part'>part</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sep'>sep</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='id identifier rubyid_parsed_end'>parsed_end</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>==</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_last_obj'>last_obj</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_parsed_end'>parsed_end</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_last_obj'>last_obj</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>CodeObjects</span><span class='op'>::</span><span class='const'>NamespaceObject</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>break</span> <span class='comment'># can&#39;t continue
</span>    <span class='kw'>end</span>

    <span class='id identifier rubyid_collect_namespaces'>collect_namespaces</span><span class='lparen'>(</span><span class='id identifier rubyid_last_obj'>last_obj</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ns'>ns</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_ns'>ns</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>CodeObjects</span><span class='op'>::</span><span class='const'>Proxy</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_found'>found</span><span class='comma'>,</span> <span class='id identifier rubyid_search_seps'>search_seps</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_scopes'>scopes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_scope'>scope</span><span class='op'>|</span>
        <span class='id identifier rubyid_search_seps'>search_seps</span> <span class='op'>+=</span> <span class='id identifier rubyid_separators_for_type'>separators_for_type</span><span class='lparen'>(</span><span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_search_seps'>search_seps</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_ns'>ns</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbol'>:root</span>
          <span class='id identifier rubyid_search_seps'>search_seps</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_last_sep'>last_sep</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
          <span class='id identifier rubyid_search_seps'>search_seps</span> <span class='op'>=</span> <span class='id identifier rubyid_separators'>separators</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_search_seps'>search_seps</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@default_sep</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_last_sep'>last_sep</span><span class='rbracket'>]</span> <span class='op'>|</span> <span class='id identifier rubyid_search_seps'>search_seps</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_search_sep'>search_sep</span><span class='op'>|</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_found'>found</span> <span class='op'>=</span> <span class='ivar'>@registry</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_ns'>ns</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>+</span> <span class='id identifier rubyid_search_sep'>search_sep</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='id identifier rubyid_part'>part</span><span class='rparen'>)</span> 
      <span class='kw'>end</span>

      <span class='kw'>break</span> <span class='id identifier rubyid_cur_obj'>cur_obj</span> <span class='op'>=</span> <span class='id identifier rubyid_found'>found</span> <span class='kw'>if</span> <span class='id identifier rubyid_found'>found</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_last_sep'>last_sep</span> <span class='op'>=</span> <span class='id identifier rubyid_sep'>sep</span>
    <span class='id identifier rubyid_scopes'>scopes</span> <span class='op'>=</span> <span class='id identifier rubyid_types_for_separator'>types_for_separator</span><span class='lparen'>(</span><span class='id identifier rubyid_sep'>sep</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_last_obj'>last_obj</span> <span class='op'>=</span> <span class='id identifier rubyid_cur_obj'>cur_obj</span>
    <span class='id identifier rubyid_resolved'>resolved</span> <span class='op'>=</span> <span class='id identifier rubyid_cur_obj'>cur_obj</span> <span class='kw'>if</span> <span class='id identifier rubyid_parsed_end'>parsed_end</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_cur_obj'>cur_obj</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='id identifier rubyid_cur_obj'>cur_obj</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_resolved'>resolved</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate-instance_method">
  
    #<strong>validate</strong>(obj, type)  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return [Boolean] if the obj&#39;s type matches the provided type.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.9.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/registry_resolver.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='op'>!</span><span class='id identifier rubyid_type'>type</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_obj'>obj</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jul 24 09:33:19 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.2).
</div>

    </div>
  </body>
</html>