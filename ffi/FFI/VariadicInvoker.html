<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: FFI::VariadicInvoker &mdash; FFI master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "FFI::VariadicInvoker",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>FFI master</a> &raquo; 
      <a href='../_index.html#alpha_V'>Index (V)</a> &raquo; 
        <a href="../FFI.html" title="FFI (module)">FFI</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>VariadicInvoker&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: FFI::VariadicInvoker</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/Variadic.c#L339'>ext/ffi_c/Variadic.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/variadic.rb#L34'>lib/ffi/variadic.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(rbFunction, rbParameterTypes, rbReturnType, options)  </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#attach-instance_method" title="#attach (instance method)">#<strong>attach</strong>(mod, mname)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Attach the invoker to module <code>mod</code> as <code>mname</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(*args, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#invoke-instance_method" title="#invoke (instance method)">#<strong>invoke</strong>(parameterTypes, parameterValues)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#param_types-instance_method" title="#param_types (instance method)">#<strong>param_types</strong>  &#x21d2; Array&lt;FFI::Type&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Retrieve Array of parameter types.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#return_type-instance_method" title="#return_type (instance method)">#<strong>return_type</strong>  </a>
    </span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(rbFunction, rbParameterTypes, rbReturnType, options)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/Variadic.c#L129-L190'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='129' data-end='190'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/ffi_c/Variadic.c', line 129</span></pre>
<pre class='code cpp'>

static VALUE
variadic_initialize(VALUE self, VALUE rbFunction, VALUE rbParameterTypes, VALUE rbReturnType, VALUE options)
{
    VariadicInvoker* invoker = NULL;
    VALUE retval = Qnil;
    VALUE convention = Qnil;
    VALUE fixed = Qnil;
#if defined(X86_WIN32)
    VALUE rbConventionStr;
#endif
    int i;

    Check_Type(options, T_HASH);
    convention = rb_hash_aref(options, ID2SYM(rb_intern(&quot;convention&quot;)));

    TypedData_Get_Struct(self, VariadicInvoker, &amp;variadic_data_type, invoker);
    RB_OBJ_WRITE(self, &amp;invoker-&gt;rbEnums, rb_hash_aref(options, ID2SYM(rb_intern(&quot;enums&quot;))));
    RB_OBJ_WRITE(self, &amp;invoker-&gt;rbAddress, rbFunction);
    invoker-&gt;function = rbffi_AbstractMemory_Cast(rbFunction, &amp;rbffi_pointer_data_type)-&gt;address;
    invoker-&gt;blocking = RTEST(rb_hash_aref(options, ID2SYM(rb_intern(&quot;blocking&quot;))));

#if defined(X86_WIN32)
    rbConventionStr = rb_funcall2(convention, rb_intern(&quot;to_s&quot;), 0, NULL);
    invoker-&gt;abi = (RTEST(convention) &amp;&amp; strcmp(StringValueCStr(rbConventionStr), &quot;stdcall&quot;) == 0)
            ? FFI_STDCALL : FFI_DEFAULT_ABI;
#else
    invoker-&gt;abi = FFI_DEFAULT_ABI;
#endif

    RB_OBJ_WRITE(self, &amp;invoker-&gt;rbReturnType, rbffi_Type_Lookup(rbReturnType));
    if (!RTEST(invoker-&gt;rbReturnType)) {
        VALUE typeName = rb_funcall2(rbReturnType, rb_intern(&quot;inspect&quot;), 0, NULL);
        rb_raise(rb_eTypeError, &quot;Invalid return type (%s)&quot;, RSTRING_PTR(typeName));
    }

    TypedData_Get_Struct(rbReturnType, Type, &amp;rbffi_type_data_type, invoker-&gt;returnType);

    invoker-&gt;paramCount = -1;

    fixed = rb_ary_new2(RARRAY_LEN(rbParameterTypes) - 1);
    for (i = 0; i &lt; RARRAY_LEN(rbParameterTypes); ++i) {
        VALUE entry = rb_ary_entry(rbParameterTypes, i);
        VALUE rbType = rbffi_Type_Lookup(entry);
        Type* type;

        if (!RTEST(rbType)) {
            VALUE typeName = rb_funcall2(entry, rb_intern(&quot;inspect&quot;), 0, NULL);
            rb_raise(rb_eTypeError, &quot;Invalid parameter type (%s)&quot;, RSTRING_PTR(typeName));
        }
        TypedData_Get_Struct(rbType, Type, &amp;rbffi_type_data_type, type);
        if (type-&gt;nativeType != NATIVE_VARARGS) {
            rb_ary_push(fixed, entry);
        }
    }
    /*
     * @fixed and @type_map are used by the parameter mangling ruby code
     */
    rb_iv_set(self, &quot;@fixed&quot;, rb_obj_freeze(fixed));
    rb_iv_set(self, &quot;@type_map&quot;, rb_hash_aref(options, ID2SYM(rb_intern(&quot;type_map&quot;))));

    return retval;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="attach-instance_method">
  <h3 class='signature  first'>
    #<strong>attach</strong>(mod, mname)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Attach the invoker to module <code>mod</code> as <code>mname</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/variadic.rb#L53-L69'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='53' data-end='69'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/variadic.rb', line 53</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attach'>attach</span>(<span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_mname'>mname</span>)
  <span class='id identifier rubyid_invoker'>invoker</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*args</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_call'><a href="#call-instance_method" title="FFI::VariadicInvoker#call (method)">call</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>call</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_mname'>mname</span> <span class='op'>=</span> <span class='id identifier rubyid_mname'>mname</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_mod'>mod</span>.<span class='id identifier rubyid_module_eval'>module_eval</span> <span class='heredoc_beg'>&lt;&lt;-code</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span>
<span class='tstring_content'>    @ffi_functions = {} unless defined?(@ffi_functions)
    @ffi_functions[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mname'>mname</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>] = invoker

    def self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mname'>mname</span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_params'>params</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
      @ffi_functions[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mname'>mname</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>].</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_call'><a href="#call-instance_method" title="FFI::VariadicInvoker#call (method)">call</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_params'>params</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
    end

    define_method(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mname'>mname</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, &amp;method(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mname'>mname</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>))
</span><span class='heredoc_end'>  code
</span>  <span class='id identifier rubyid_invoker'>invoker</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="call-instance_method">
  <h3 class='signature '>
    #<strong>call</strong>(*args, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/variadic.rb#L35-L48'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='35' data-end='48'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/variadic.rb', line 35</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_param_types'><a href="#param_types-instance_method" title="FFI::VariadicInvoker#param_types (method)">param_types</a></span> <span class='op'>=</span> <span class='const'>Array</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="FFI::VariadicInvoker.new (method)">new</a></span>(<span class='ivar'>@fixed</span>)
  <span class='id identifier rubyid_param_values'>param_values</span> <span class='op'>=</span> <span class='const'>Array</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="FFI::VariadicInvoker.new (method)">new</a></span>
  <span class='ivar'>@fixed</span>.<span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_param_values'>param_values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_args'>args</span>[<span class='id identifier rubyid_i'>i</span>]
  <span class='kw'>end</span>
  <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='ivar'>@fixed</span>.<span class='id identifier rubyid_length'>length</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_length'>length</span>
    <span class='id identifier rubyid_param_types'><a href="#param_types-instance_method" title="FFI::VariadicInvoker#param_types (method)">param_types</a></span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="../FFI.html" title="FFI (module)">FFI</a></span>.<span class='id identifier rubyid_find_type'><a href="../FFI.html#find_type-class_method" title="FFI.find_type (method)">find_type</a></span>(<span class='id identifier rubyid_args'>args</span>[<span class='id identifier rubyid_i'>i</span>]<span class='comma'>,</span> <span class='ivar'>@type_map</span>)
    <span class='id identifier rubyid_param_values'>param_values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_args'>args</span>[<span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span>]
    <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='int'>2</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_invoke'><a href="#invoke-instance_method" title="FFI::VariadicInvoker#invoke (method)">invoke</a></span>(<span class='id identifier rubyid_param_types'><a href="#param_types-instance_method" title="FFI::VariadicInvoker#param_types (method)">param_types</a></span><span class='comma'>,</span> <span class='id identifier rubyid_param_values'>param_values</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="invoke-instance_method">
  <h3 class='signature '>
    #<strong>invoke</strong>(parameterTypes, parameterValues)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/Variadic.c#L192-L325'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='192' data-end='325'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/ffi_c/Variadic.c', line 192</span></pre>
<pre class='code cpp'>

static VALUE
variadic_invoke(VALUE self, VALUE parameterTypes, VALUE parameterValues)
{
    VariadicInvoker* invoker;
    FFIStorage* params;
    void* retval;
    ffi_cif cif;
    void** ffiValues;
    ffi_type** ffiParamTypes;
    ffi_type* ffiReturnType;
    Type** paramTypes;
    VALUE* argv;
    VALUE* callbackParameters;
    VALUE callbackProc;
    int paramCount = 0, fixedCount = 0, callbackCount = 0, i;
    ffi_status ffiStatus;
    rbffi_frame_t frame = { 0 };

    Check_Type(parameterTypes, T_ARRAY);
    Check_Type(parameterValues, T_ARRAY);

    TypedData_Get_Struct(self, VariadicInvoker, &amp;variadic_data_type, invoker);
    paramCount = RARRAY_LENINT(parameterTypes);
    paramTypes = ALLOCA_N(Type *, paramCount);
    ffiParamTypes = ALLOCA_N(ffi_type *, paramCount);
    params = ALLOCA_N(FFIStorage, paramCount);
    ffiValues = ALLOCA_N(void*, paramCount);
    argv = ALLOCA_N(VALUE, paramCount);
    callbackParameters = ALLOCA_N(VALUE, paramCount);
    retval = alloca(MAX(invoker-&gt;returnType-&gt;ffiType-&gt;size, FFI_SIZEOF_ARG));

    for (i = 0; i &lt; paramCount; ++i) {
        VALUE rbType = rb_ary_entry(parameterTypes, i);

        if (!rb_obj_is_kind_of(rbType, rbffi_TypeClass)) {
            rb_raise(rb_eTypeError, &quot;wrong type.  Expected (FFI::Type)&quot;);
        }
        TypedData_Get_Struct(rbType, Type, &amp;rbffi_type_data_type, paramTypes[i]);

        switch (paramTypes[i]-&gt;nativeType) {
            case NATIVE_INT8:
            case NATIVE_INT16:
            case NATIVE_INT32:
                rbType = rb_const_get(rbffi_TypeClass, rb_intern(&quot;INT32&quot;));
                TypedData_Get_Struct(rbType, Type, &amp;rbffi_type_data_type, paramTypes[i]);
                break;
            case NATIVE_UINT8:
            case NATIVE_UINT16:
            case NATIVE_UINT32:
                rbType = rb_const_get(rbffi_TypeClass, rb_intern(&quot;UINT32&quot;));
                TypedData_Get_Struct(rbType, Type, &amp;rbffi_type_data_type, paramTypes[i]);
                break;

            case NATIVE_FLOAT32:
                rbType = rb_const_get(rbffi_TypeClass, rb_intern(&quot;DOUBLE&quot;));
                TypedData_Get_Struct(rbType, Type, &amp;rbffi_type_data_type, paramTypes[i]);
                break;

            case NATIVE_FUNCTION:
                if (!rb_obj_is_kind_of(rbType, rbffi_FunctionTypeClass)) {
                    VALUE typeName = rb_funcall2(rbType, rb_intern(&quot;inspect&quot;), 0, NULL);
                    rb_raise(rb_eTypeError, &quot;Incorrect parameter type (%s)&quot;, RSTRING_PTR(typeName));
                }
                callbackParameters[callbackCount++] = rbType;
                break;

            default:
                break;
        }


        ffiParamTypes[i] = paramTypes[i]-&gt;ffiType;
        if (ffiParamTypes[i] == NULL) {
            rb_raise(rb_eArgError, &quot;Invalid parameter type #%x&quot;, paramTypes[i]-&gt;nativeType);
        }
        argv[i] = rb_ary_entry(parameterValues, i);
    }

    ffiReturnType = invoker-&gt;returnType-&gt;ffiType;
    if (ffiReturnType == NULL) {
        rb_raise(rb_eArgError, &quot;Invalid return type&quot;);
    }

    /*Get the number of fixed args from @fixed array*/
    fixedCount = RARRAY_LEN(rb_iv_get(self, &quot;@fixed&quot;));

#ifdef HAVE_FFI_PREP_CIF_VAR
    ffiStatus = ffi_prep_cif_var(&amp;cif, invoker-&gt;abi, fixedCount, paramCount, ffiReturnType, ffiParamTypes);
#else
    ffiStatus = ffi_prep_cif(&amp;cif, invoker-&gt;abi, paramCount, ffiReturnType, ffiParamTypes);
#endif
    switch (ffiStatus) {
        case FFI_BAD_ABI:
            rb_raise(rb_eArgError, &quot;Invalid ABI specified&quot;);
        case FFI_BAD_TYPEDEF:
            rb_raise(rb_eArgError, &quot;Invalid argument type specified&quot;);
        case FFI_OK:
            break;
        default:
            rb_raise(rb_eArgError, &quot;Unknown FFI error&quot;);
    }

    callbackProc = rbffi_SetupCallParams(paramCount, argv, -1, paramTypes, params,
        ffiValues, callbackParameters, callbackCount,
        invoker-&gt;rbEnums);

    rbffi_frame_push(&amp;frame);

    if(unlikely(invoker-&gt;blocking)) {
        rbffi_blocking_call_t* bc;
        bc = ALLOCA_N(rbffi_blocking_call_t, 1);
        bc-&gt;retval = retval;
        bc-&gt;function = invoker-&gt;function;
        bc-&gt;ffiValues = ffiValues;
        bc-&gt;params = params;
        bc-&gt;frame = &amp;frame;
        bc-&gt;cif = cif;

        rb_rescue2(rbffi_do_blocking_call, (VALUE) bc, rbffi_save_frame_exception, (VALUE) &amp;frame, rb_eException, (VALUE) 0);
    } else {
        ffi_call(&amp;cif, FFI_FN(invoker-&gt;function), retval, ffiValues);
    }
    RB_GC_GUARD(callbackProc);

    rbffi_frame_pop(&amp;frame);

    rbffi_save_errno();

    if (RTEST(frame.exc) &amp;&amp; frame.exc != Qnil) {
        rb_exc_raise(frame.exc);
    }

    return rbffi_NativeValue_ToRuby(invoker-&gt;returnType, invoker-&gt;rbReturnType, retval);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="param_types-instance_method">
  <h3 class='signature '>
    #<strong>param_types</strong>  &#x21d2; <code>Array</code>&lt;<a href="Type.html" title="FFI::Type (class)">FFI::Type</a>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Retrieve Array of parameter types</p>

<p>This method returns an Array of <a href="../FFI.html" title="FFI (module)"><code>::FFI</code></a> types accepted as function parameters.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/variadic.rb#L76-L78'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='76' data-end='78'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/variadic.rb', line 76</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_param_types'>param_types</span>
  [<span class='op'>*</span><span class='ivar'>@fixed</span><span class='comma'>,</span> <span class='const'><a href="Type.html" title="FFI::Type (class)">Type</a></span><span class='op'>::</span><span class='const'><a href="Type/Builtin.html" title="FFI::Type::Builtin (class)">Builtin</a></span><span class='op'>::</span><span class='const'>VARARGS</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="return_type-instance_method">
  <h3 class='signature '>
    #<strong>return_type</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/Variadic.c#L327-L334'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='327' data-end='334'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/ffi_c/Variadic.c', line 327</span></pre>
<pre class='code cpp'>

static VALUE
variadic_return_type(VALUE self)
{
    VariadicInvoker* invoker;

    TypedData_Get_Struct(self, VariadicInvoker, &amp;variadic_data_type, invoker);
    return invoker-&gt;rbReturnType;
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>