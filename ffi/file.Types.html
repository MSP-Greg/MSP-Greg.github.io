<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Types &mdash; FFI master</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Types",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>FFI master</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Types&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<p>This page contains a canonical list of type symbols recognized by <tt>attach_function</tt> and <code>Struct#layout</code></p>
<h2>Types</h2>
<p>The following types can be used as arguments and return types:</p>
<table>
	<tr>
		<th>Symbol</th>
		<th>Description</th>
		<th>Expected/returned type from <span class="caps">FFI</span></th>
		<th>Notes</th>
	</tr>
	<tr>
		<td><code>:char</code></td>
		<td>8-bit character</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:uchar</code></td>
		<td>8-bit unsigned character</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:int8</code></td>
		<td>8-bit signed integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:uint8</code></td>
		<td>8-bit unsigned integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:short</code></td>
		<td>16-bit signed integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:ushort</code></td>
		<td>16-bit unsigned integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:int16</code></td>
		<td>16-bit signed integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:uint16</code></td>
		<td>16-bit unsigned integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:int</code></td>
		<td>signed integer </td>
		<td>Integer</td>
		<td>platform specific size</td>
	</tr>
	<tr>
		<td><code>:uint</code></td>
		<td>unsigned integer </td>
		<td>Integer</td>
		<td>platform specific size</td>
	</tr>
	<tr>
		<td><code>:int32</code></td>
		<td>32-bit signed integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:uint32</code></td>
		<td>32-bit unsigned integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:long</code></td>
		<td><tt>long int</tt></td>
		<td>Integer</td>
		<td>platform-specific size</td>
	</tr>
	<tr>
		<td><code>:ulong</code></td>
		<td><tt>unsigned long int</tt></td>
		<td>Integer</td>
		<td>platform-specific size</td>
	</tr>
	<tr>
		<td><code>:int64</code></td>
		<td>64-bit signed integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:uint64</code></td>
		<td>64-bit unsigned integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:long_long</code></td>
		<td>64-bit signed integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:ulong_long</code></td>
		<td>64-bit unsigned integer</td>
		<td>Integer</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:float</code></td>
		<td>32-bit floating point</td>
		<td>Float</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:double</code></td>
		<td>64-bit floating point (double-precision)</td>
		<td>Float</td>
		<td></td>
	</tr>
	<tr>
		<td><code>:pointer</code></td>
		<td>pointer with platform-specific size</td>
		<td>out: <a href="https://www.rubydoc.info/github/ffi/ffi/FFI/Pointer"><span class="caps">FFI</span>::Pointer</a> <br/> in: <a href="https://www.rubydoc.info/github/ffi/ffi/FFI/Pointer"><span class="caps">FFI</span>::Pointer</a>, String, Integer</td>
		<td>Data may contain zero bytes and may not be zero-terminated. Strings can be passed directly to C, but should be considered read only on both Ruby and C side.</td>
	</tr>
	<tr>
		<td><code>:string</code></td>
		<td> C-style (<span class="caps">NULL</span>-terminated) character string.</td>
		<td>String</td>
		<td><code>:string</code> should be considered to be <code>const char *</code> and the Ruby string must not be changed as long as it&#8217;s accessed by the library. If the string buffer shall be modified from C or Ruby side, use <code>:pointer</code> and <a href="https://www.rubydoc.info/github/ffi/ffi/FFI/MemoryPointer"><span class="caps">FFI</span>::MemoryPointer</a> instead.</td>
	</tr>
	<tr>
		<td><code>:bool</code></td>
		<td>boolean</td>
		<td><code>true</code>/<code>false</code></td>
		<td></td>
	</tr>
	<tr>
		<td>[[Enums]]</td>
		<td>your own custom enum group (or its symbol) as a type</td>
		<td>Symbol/Integer</td>
		<td></td>
	</tr>
</table>
<p>For function return type only:</p>
<table>
	<tr>
		<th>Symbol</th>
		<th>Description</th>
		<th>Returned type from <span class="caps">FFI</span></th>
		<th>Notes</th>
	</tr>
	<tr>
		<td><code>:void</code></td>
		<td>return type <code>void</code></td>
		<td>Pointer</td>
		<td>for functions that return nothing</td>
	</tr>
	<tr>
		<td><code>:strptr</code></td>
		<td>Ruby String and a Pointer to C memory</td>
		<td>Array (e.g. <code>["foo", ptr]</code>)</td>
		<td>useful to free the memory from within Ruby</td>
	</tr>
</table>
<p>For function argument type only:</p>
<table>
	<tr>
		<th>Symbol</th>
		<th>Description</th>
		<th>Expected by <span class="caps">FFI</span></th>
		<th>Notes</th>
	</tr>
	<tr>
		<td><code>:buffer_in</code></td>
		<td>Similar to <code>:pointer</code>, but optimized for Buffers that the function can only read (not write).</td>
		<td><a href="https://www.rubydoc.info/github/ffi/ffi/FFI/Pointer"><span class="caps">FFI</span>::Pointer</a></td>
		<td></td>
	</tr>
	<tr>
		<td><code>:buffer_out</code></td>
		<td>Similar to <code>:pointer</code>, but optimized for Buffers that the function can only write (not read).</td>
		<td><a href="https://www.rubydoc.info/github/ffi/ffi/FFI/Pointer"><span class="caps">FFI</span>::Pointer</a></td>
		<td></td>
	</tr>
	<tr>
		<td><code>:buffer_inout</code></td>
		<td>Similar to <code>:pointer</code>, but may be optimized for Buffers.</td>
		<td><a href="https://www.rubydoc.info/github/ffi/ffi/FFI/Pointer"><span class="caps">FFI</span>::Pointer</a></td>
		<td></td>
	</tr>
	<tr>
		<td><code>:varargs</code></td>
		<td>variadic arguments</td>
		<td>anything</td>
		<td>see [[examples]]</td>
	</tr>
</table>
<p>See also [[Core-Concepts]] for details about the memory management of :pointer, :string and :buffer types.</p>
<h3>More Types</h3>
<p>Most common C types like <code>:size_t</code> , <code>:uint32_t</code> and <code>:in_addr_t</code> are predefined. For a full list see <code>lib/ffi/platform/&lt;your platform&gt;/types.conf</code> in the git repository.</p>
<p>Furthermore it&#8217;s possible to define your own types. This is particular useful to distinguish between different <code>:pointer</code> types like so:
```ruby
  typedef :pointer, :libusb_device_handle
  attach_function &#8216;libusb_reset_device&#8217;, [:libusb_device_handle], :int  
</code></pre></p>
<p>There are even more nice possibilities to map values:</p>
<ul>
	<li>Mapping of structs with optional type safety</li>
	<li>Definition of your own data converters</li>
</ul>
<p>See <a href="https://www.varvet.com/blog/advanced-topics-in-ruby-ffi/">this blog post</a> for more information.</p>
<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>