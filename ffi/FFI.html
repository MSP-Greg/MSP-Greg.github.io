<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: FFI &mdash; FFI master</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "FFI",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>FFI master</a> &raquo; 
      <a href='_index.html#alpha_F'>Index (F)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>FFI&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: FFI</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="FFI/DataConverter.html" title="FFI::DataConverter (module)"><code>DataConverter</code></a>,
        <a href="FFI/IO.html" title="FFI::IO (module)"><code>IO</code></a>,
        <a href="FFI/LastError.html" title="FFI::LastError (module)"><code>LastError</code></a>,
        <a href="FFI/Library.html" title="FFI::Library (module)"><code>Library</code></a>,
        <a href="FFI/NativeType.html" title="FFI::NativeType (module)"><code>NativeType</code></a>,
        <a href="FFI/Platform.html" title="FFI::Platform (module)"><code>Platform</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="FFI/AbstractMemory.html" title="FFI::AbstractMemory (class)"><code>AbstractMemory</code></a>,
        <a href="FFI/ArrayType.html" title="FFI::ArrayType (class)"><code>ArrayType</code></a>,
        <a href="FFI/AutoPointer.html" title="FFI::AutoPointer (class)"><code>AutoPointer</code></a>,
        <a href="FFI/Bitmask.html" title="FFI::Bitmask (class)"><code>Bitmask</code></a>,
        <a href="FFI/Buffer.html" title="FFI::Buffer (class)"><code>Buffer</code></a>,
        <a href="FFI/ConstGenerator.html" title="FFI::ConstGenerator (class)"><code>ConstGenerator</code></a>,
        <a href="FFI/DynamicLibrary.html" title="FFI::DynamicLibrary (class)"><code>DynamicLibrary</code></a>,
        <a href="FFI/Enum.html" title="FFI::Enum (class)"><code>Enum</code></a>,
        <a href="FFI/Enums.html" title="FFI::Enums (class)"><code>Enums</code></a>,
        <a href="FFI/Function.html" title="FFI::Function (class)"><code>Function</code></a>,
        <a href="FFI/FunctionType.html" title="FFI::FunctionType (class)"><code>FunctionType</code></a>,
        <a href="FFI/Generator.html" title="FFI::Generator (class)"><code>Generator</code></a>,
        <a href="FFI/LibraryPath.html" title="FFI::LibraryPath (class)"><code>LibraryPath</code></a>,
        <a href="FFI/ManagedStruct.html" title="FFI::ManagedStruct (class)"><code>ManagedStruct</code></a>,
        <a href="FFI/MemoryPointer.html" title="FFI::MemoryPointer (class)"><code>MemoryPointer</code></a>,
        <a href="FFI/Pointer.html" title="FFI::Pointer (class)"><code>Pointer</code></a>,
        <a href="FFI/StrPtrConverter.html" title="FFI::StrPtrConverter (class)"><code>StrPtrConverter</code></a>,
        <a href="FFI/Struct.html" title="FFI::Struct (class)"><code>Struct</code></a>,
        <a href="FFI/StructByReference.html" title="FFI::StructByReference (class)"><code>StructByReference</code></a>,
        <a href="FFI/StructByValue.html" title="FFI::StructByValue (class)"><code>StructByValue</code></a>,
        <a href="FFI/StructGenerator.html" title="FFI::StructGenerator (class)"><code>StructGenerator</code></a>,
        <a href="FFI/StructLayout.html" title="FFI::StructLayout (class)"><code>StructLayout</code></a>,
        <a href="FFI/StructLayoutBuilder.html" title="FFI::StructLayoutBuilder (class)"><code>StructLayoutBuilder</code></a>,
        <a href="FFI/Type.html" title="FFI::Type (class)"><code>Type</code></a>,
        <a class='nodoc' href="FFI/TypesGenerator.html" title="FFI::TypesGenerator (class)"><code>TypesGenerator</code></a>,
        <a href="FFI/Union.html" title="FFI::Union (class)"><code>Union</code></a>,
        <a href="FFI/VariadicInvoker.html" title="FFI::VariadicInvoker (class)"><code>VariadicInvoker</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="FFI/NotFoundError.html" title="FFI::NotFoundError (class)"><code>NotFoundError</code></a>,
        <a href="FFI/NullPointerError.html" title="FFI::NullPointerError (class)"><code>NullPointerError</code></a>,
        <a href="FFI/PlatformError.html" title="FFI::PlatformError (class)"><code>PlatformError</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/io.rb#L31'>lib/ffi/io.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/DynamicLibrary.c#L348'>ext/ffi_c/DynamicLibrary.c</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/FunctionInfo.c#L306'>ext/ffi_c/FunctionInfo.c</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/Type.c#L319'>ext/ffi_c/Type.c</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/ffi.c#L72'>ext/ffi_c/ffi.c</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/abstract_memory.rb#L32'>lib/ffi/abstract_memory.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/autopointer.rb#L32'>lib/ffi/autopointer.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/compat.rb#L32'>lib/ffi/compat.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/data_converter.rb#L31'>lib/ffi/data_converter.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/dynamic_library.rb#L31'>lib/ffi/dynamic_library.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/enum.rb#L33'>lib/ffi/enum.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/errno.rb#L31'>lib/ffi/errno.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/function.rb#L31'>lib/ffi/function.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/library.rb#L33'>lib/ffi/library.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/library_path.rb#L31'>lib/ffi/library_path.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/managedstruct.rb#L30'>lib/ffi/managedstruct.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/platform.rb#L34'>lib/ffi/platform.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/pointer.rb#L41'>lib/ffi/pointer.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/struct.rb#L39'>lib/ffi/struct.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/struct_by_reference.rb#L31'>lib/ffi/struct_by_reference.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/struct_layout.rb#L34'>lib/ffi/struct_layout.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/struct_layout_builder.rb#L32'>lib/ffi/struct_layout_builder.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/types.rb#L34'>lib/ffi/types.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/union.rb#L34'>lib/ffi/union.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/variadic.rb#L33'>lib/ffi/variadic.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/version.rb#L1'>lib/ffi/version.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/tools/const_generator.rb#L4'>lib/ffi/tools/const_generator.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/tools/generator.rb#L4'>lib/ffi/tools/generator.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/tools/struct_generator.rb#L3'>lib/ffi/tools/struct_generator.rb</a>,<br/> <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/tools/types_generator.rb#L3'>lib/ffi/tools/types_generator.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Copyright © 2008-2010 Wayne Meissner Copyright © 2008, 2009 Andrea Fazzi Copyright © 2008, 2009 Luc Heinrich</p>

<p>This file is part of ruby-ffi.</p>

<p>All rights reserved.</p>

<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
<ul><li>
<p>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</p>
</li><li>
<p>Redistributions in binary form must reproduce the above copyright notice this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</p>
</li><li>
<p>Neither the name of the Ruby FFI project nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</p>
</li></ul>

<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='CURRENT_PROCESS-constant' class='summary_signature'>CURRENT_PROCESS =</span>
    <br/>
    <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/library.rb#L34-L34'># File 'lib/ffi/library.rb', line 34</a>    <pre class='code ruby'><span class='const'>USE_THIS_PROCESS_AS_LIBRARY</span> <span class='op'>=</span> <span class='const'>FFI</span>.<span class='id identifier rubyid_make_shareable'><a href="#make_shareable-class_method" title="FFI.make_shareable (method)">make_shareable</a></span>(<span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'>new</span>)</pre>
  </li>
  <li>
    <span id='CallbackInfo-constant' class='summary_signature'>CallbackInfo =</span>
    <br/>
    <a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/FunctionInfo.c#L306'># File 'ext/ffi_c/FunctionInfo.c', line 306</a>    <pre class='code c'><span class='id identifier rubyid_rbffi_FunctionTypeClass'>rbffi_FunctionTypeClass</span></pre>
  </li>
  <li>
    <span id='FunctionInfo-constant' class='summary_signature'>FunctionInfo =</span>
    <br/>
    <a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/FunctionInfo.c#L310'># File 'ext/ffi_c/FunctionInfo.c', line 310</a>    <pre class='code c'><span class='id identifier rubyid_rbffi_FunctionTypeClass'>rbffi_FunctionTypeClass</span></pre>
  </li>
  <li>
    <span id='NativeLibrary-constant' class='summary_signature'>NativeLibrary =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Backward compatibility for <a href="FFI/DynamicLibrary.html" title="FFI::DynamicLibrary (class)"><code>::FFI::DynamicLibrary</code></a></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/DynamicLibrary.c#L344'># File 'ext/ffi_c/DynamicLibrary.c', line 344</a>    <pre class='code c'></pre>
  </li>
  <li>
    <span id='TypeDefs-constant' class='summary_signature'>TypeDefs =</span>
    <br/>
    <a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/Type.c#L319'># File 'ext/ffi_c/Type.c', line 319</a>    <pre class='code c'><span class='const'>Document</span><span class='op'>-</span><span class='id identifier rubyid_constant'>constant</span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <br/>
    <a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/version.rb#L2-L2'># File 'lib/ffi/version.rb', line 2</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.17.0.rc2</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#errno-class_method" title=".errno (class method)">.<strong>errno</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#errno=-class_method" title=".errno= (class method)">.<strong>errno=</strong>(error)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#__typedef-class_method" title=".__typedef (class method)">.<strong>__typedef</strong>(old, add)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#add_typedef-class_method" title=".add_typedef (class method)">.<strong>add_typedef</strong>(old, add)  &#x21d2; Type </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add a definition type to type definitions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#find_type-class_method" title=".find_type (class method)">.<strong>find_type</strong>(name, type_map = nil)  &#x21d2; Type </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Find a type in <code>type_map</code> (<a href="#TypeDefs-constant" title="FFI::TypeDefs (constant)">TypeDefs</a>, by default) from a type objet, a type name (symbol).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#make_shareable-class_method" title=".make_shareable (class method)">.<strong>make_shareable</strong>(obj)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>This is for <code>FFI</code> internal use only.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#map_library_name-class_method" title=".map_library_name (class method)">.<strong>map_library_name</strong>(lib)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Transform a generic library name to a platform library name.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#type_size-class_method" title=".type_size (class method)">.<strong>type_size</strong>(type)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get <code>type</code> size, in bytes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#typedef-class_method" title=".typedef (class method)">.<strong>typedef</strong>(old, add)  &#x21d2; Type </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add a definition type to type definitions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#custom_typedefs-class_method" title=".custom_typedefs (class method)">.<strong>custom_typedefs</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Truffleruby and JRuby don’t support Ractor so far.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="errno-class_method">
  <h3 class='signature rw first'>
    .<strong>errno</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/errno.rb#L34-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='34' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/errno.rb', line 34</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_errno'>errno</span>
  <span class='const'>FFI</span><span class='op'>::</span><span class='const'><a href="FFI/LastError.html" title="FFI::LastError (module)">LastError</a></span>.<span class='id identifier rubyid_error'><a href="FFI/LastError.html#error-class_method" title="FFI::LastError.error (method)">error</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="errno=-class_method">
  <h3 class='signature rw'>
    .<strong>errno=</strong>(error)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="FFI/LastError.html#error=-class_method" title="FFI::LastError.error= (method)">LastError.error=</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/errno.rb#L40-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='40' data-end='42'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/errno.rb', line 40</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_errno='>errno=</span>(<span class='id identifier rubyid_error'>error</span>)
  <span class='const'>FFI</span><span class='op'>::</span><span class='const'><a href="FFI/LastError.html" title="FFI::LastError (module)">LastError</a></span>.<span class='id identifier rubyid_error'><a href="FFI/LastError.html#error-class_method" title="FFI::LastError.error (method)">error</a></span> <span class='op'>=</span> <span class='id identifier rubyid_error'>error</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="__typedef-class_method">
  <h3 class='signature  first'>
    .<strong>__typedef</strong>(old, add)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/types.rb#L66-L68'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='66' data-end='68'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/types.rb', line 66</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_private'>private</span> <span class='kw'>def</span> <span class='id identifier rubyid___typedef'>__typedef</span>(<span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='id identifier rubyid_add'>add</span>)
  <span class='const'><a href="#TypeDefs-constant" title="FFI::TypeDefs (constant)">TypeDefs</a></span>[<span class='id identifier rubyid_add'>add</span>] <span class='op'>=</span> <span class='id identifier rubyid_find_type'><a href="#find_type-class_method" title="FFI.find_type (method)">find_type</a></span>(<span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='const'><a href="#TypeDefs-constant" title="FFI::TypeDefs (constant)">TypeDefs</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_typedef-class_method">
  <h3 class='signature '>
    .<strong>add_typedef</strong>(old, add)  &#x21d2; <a href="FFI/Type.html" title="FFI::Type (class)">Type</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add a definition type to type definitions.</p>

<p>The type definition is local per Ractor.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>old</span>
    <span class='type'>(<a href="FFI/Type.html" title="FFI::Type (class)">Type</a>, <a href="FFI/DataConverter.html" title="FFI::DataConverter (module)">DataConverter</a>, <code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>type definition used by <a href="#find_type-class_method" title="FFI.find_type (method)">.find_type</a></p>
</div>
  </li>
  <li>
    <span class='name'>add</span>
    <span class='type'>(<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>new type definition’s name to add</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/types.rb#L62-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='62' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/types.rb', line 62</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_typedef'>add_typedef</span>(<span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='id identifier rubyid_add'>add</span>)
  <span class='id identifier rubyid_typedef'><a href="#typedef-class_method" title="FFI.typedef (method)">typedef</a></span> <span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='id identifier rubyid_add'>add</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="custom_typedefs-class_method">
  <h3 class='signature private'>
    .<strong>custom_typedefs</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Truffleruby and JRuby don’t support Ractor so far. So they don’t need separation between builtin and custom types.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/ext/ffi_c/Type.c#L258-L275'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='258' data-end='275'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/ffi_c/Type.c', line 258</span></pre>
<pre class='code cpp'>

static VALUE
custom_typedefs(VALUE self)
{
#if HAVE_RB_EXT_RACTOR_SAFE
    VALUE hash = rb_ractor_local_storage_value(custom_typedefs_key);
    if (hash == Qnil) {
        hash = rb_hash_new();
        rb_ractor_local_storage_value_set(custom_typedefs_key, hash);
    }
#else
    static VALUE hash = Qundef;
    if (hash == Qundef) {
        rb_global_variable(&amp;hash);
        hash = rb_hash_new();
    }
#endif
    return hash;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="find_type-class_method">
  <h3 class='signature '>
    .<strong>find_type</strong>(name, type_map = nil)  &#x21d2; <a href="FFI/Type.html" title="FFI::Type (class)">Type</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Find a type in <code>type_map</code> (<a href="#TypeDefs-constant" title="FFI::TypeDefs (constant)">TypeDefs</a>, by default) from a type objet, a type name (symbol). If <code>name</code> is a <a href="FFI/DataConverter.html" title="FFI::DataConverter (module)"><code>::FFI::DataConverter</code></a>, a new <a href="FFI/Type/Mapped.html" title="FFI::Type::Mapped (class)"><code>::FFI::Type::Mapped</code></a> is created.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="FFI/Type.html" title="FFI::Type (class)">Type</a>, <a href="FFI/DataConverter.html" title="FFI::DataConverter (module)">DataConverter</a>, <code>Symbol</code>)</span>
  </li>
  <li>
    <span class='name'>type_map</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>if nil, <a href="#TypeDefs-constant" title="FFI::TypeDefs (constant)">TypeDefs</a> is used</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/types.rb#L76-L96'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='76' data-end='96'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/types.rb', line 76</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_find_type'>find_type</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_type_map'>type_map</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="FFI/Type.html" title="FFI::Type (class)">Type</a></span>)
    <span class='id identifier rubyid_name'>name</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_type_map'>type_map</span><span class='op'>&amp;.</span><span class='id identifier rubyid_has_key?'>has_key?</span>(<span class='id identifier rubyid_name'>name</span>)
    <span class='id identifier rubyid_type_map'>type_map</span>[<span class='id identifier rubyid_name'>name</span>]

  <span class='kw'>elsif</span> (<span class='id identifier rubyid_tm'>tm</span><span class='op'>=</span><span class='id identifier rubyid_custom_typedefs'><a href="#custom_typedefs-class_method" title="FFI.custom_typedefs (method)">custom_typedefs</a></span>).<span class='id identifier rubyid_has_key?'>has_key?</span>(<span class='id identifier rubyid_name'>name</span>)
    <span class='id identifier rubyid_tm'>tm</span>[<span class='id identifier rubyid_name'>name</span>]

  <span class='kw'>elsif</span> <span class='const'><a href="#TypeDefs-constant" title="FFI::TypeDefs (constant)">TypeDefs</a></span>.<span class='id identifier rubyid_has_key?'>has_key?</span>(<span class='id identifier rubyid_name'>name</span>)
    <span class='const'><a href="#TypeDefs-constant" title="FFI::TypeDefs (constant)">TypeDefs</a></span>[<span class='id identifier rubyid_name'>name</span>]

  <span class='kw'>elsif</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="FFI/DataConverter.html" title="FFI::DataConverter (module)">DataConverter</a></span>)
    <span class='comment'># Add a typedef so next time the converter is used, it hits the cache
</span>    <span class='id identifier rubyid_tm'>tm</span> <span class='op'>=</span> (<span class='id identifier rubyid_type_map'>type_map</span> <span class='op'>||</span> <span class='id identifier rubyid_custom_typedefs'><a href="#custom_typedefs-class_method" title="FFI.custom_typedefs (method)">custom_typedefs</a></span>)
    <span class='id identifier rubyid_tm'>tm</span>[<span class='id identifier rubyid_name'>name</span>] <span class='op'>=</span> <span class='const'><a href="FFI/Type.html" title="FFI::Type (class)">Type</a></span><span class='op'>::</span><span class='const'><a href="FFI/Type/Mapped.html" title="FFI::Type::Mapped (class)">Mapped</a></span>.<span class='id identifier rubyid_new'><a href="FFI/Type/Mapped.html#new-class_method" title="FFI::Type::Mapped.new (method)">new</a></span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unable to resolve type &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="make_shareable-class_method">
  <h3 class='signature '>
    .<strong>make_shareable</strong>(obj)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This is for <code>FFI</code> internal use only.</p>

<p>See additional method definition at line 35.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/compat.rb#L39-L41'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='39' data-end='41'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/compat.rb', line 39</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_make_shareable'>make_shareable</span>(<span class='id identifier rubyid_obj'>obj</span>)
  <span class='const'>Ractor</span>.<span class='id identifier rubyid_make_shareable'>make_shareable</span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="map_library_name-class_method">
  <h3 class='signature '>
    .<strong>map_library_name</strong>(lib)  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Transform a generic library name to a platform library name</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='comment'># Linux
</span><span class='const'>FFI</span>.<span class='id identifier rubyid_map_library_name'>map_library_name</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span>     <span class='comment'># -&gt; &quot;libc.so.6&quot;
</span><span class='const'>FFI</span>.<span class='id identifier rubyid_map_library_name'>map_library_name</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jpeg</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># -&gt; &quot;libjpeg.so&quot;
</span><span class='comment'># Windows
</span><span class='const'>FFI</span>.<span class='id identifier rubyid_map_library_name'>map_library_name</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span>     <span class='comment'># -&gt; &quot;msvcrt.dll&quot;
</span><span class='const'>FFI</span>.<span class='id identifier rubyid_map_library_name'>map_library_name</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jpeg</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># -&gt; &quot;jpeg.dll&quot;</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>lib</span>
    <span class='type'>(<code>String</code>, <a href="FFI/LibraryPath.html" title="FFI::LibraryPath (class)">FFI::LibraryPath</a>)</span>
&mdash;    <div class='inline'>
<p>library name or <a href="FFI/LibraryPath.html" title="FFI::LibraryPath (class)"><code>::FFI::LibraryPath</code></a> object</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>library name formatted for current platform</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/library.rb#L46-L49'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='46' data-end='49'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/library.rb', line 46</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_map_library_name'>map_library_name</span>(<span class='id identifier rubyid_lib'>lib</span>)
  <span class='comment'># Mangle the library name to reflect the native library naming conventions
</span>  <span class='const'><a href="FFI/LibraryPath.html" title="FFI::LibraryPath (class)">LibraryPath</a></span>.<span class='id identifier rubyid_wrap'><a href="FFI/LibraryPath.html#wrap-class_method" title="FFI::LibraryPath.wrap (method)">wrap</a></span>(<span class='id identifier rubyid_lib'>lib</span>).<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="type_size-class_method">
  <h3 class='signature '>
    .<strong>type_size</strong>(type)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get <code>type</code> size, in bytes.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>type</span>
    <span class='type'>(<code>type</code>)</span>
&mdash;    <div class='inline'>
<p>is an instance of class accepted by <a href="#find_type-class_method" title="FFI.find_type (method)">.find_type</a></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/types.rb#L101-L103'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='101' data-end='103'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/types.rb', line 101</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_type_size'>type_size</span>(<span class='id identifier rubyid_type'>type</span>)
  <span class='id identifier rubyid_find_type'><a href="#find_type-class_method" title="FFI.find_type (method)">find_type</a></span>(<span class='id identifier rubyid_type'>type</span>).<span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="typedef-class_method">
  <h3 class='signature '>
    .<strong>typedef</strong>(old, add)  &#x21d2; <a href="FFI/Type.html" title="FFI::Type (class)">Type</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add a definition type to type definitions.</p>

<p>The type definition is local per Ractor.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>old</span>
    <span class='type'>(<a href="FFI/Type.html" title="FFI::Type (class)">Type</a>, <a href="FFI/DataConverter.html" title="FFI::DataConverter (module)">DataConverter</a>, <code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>type definition used by <a href="#find_type-class_method" title="FFI.find_type (method)">.find_type</a></p>
</div>
  </li>
  <li>
    <span class='name'>add</span>
    <span class='type'>(<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>new type definition’s name to add</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ffi/ffi/blob/master/lib/ffi/types.rb#L56-L59'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='59'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/ffi/types.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_typedef'>typedef</span>(<span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='id identifier rubyid_add'>add</span>)
  <span class='id identifier rubyid_tm'>tm</span> <span class='op'>=</span> <span class='id identifier rubyid_custom_typedefs'><a href="#custom_typedefs-class_method" title="FFI.custom_typedefs (method)">custom_typedefs</a></span>
  <span class='id identifier rubyid_tm'>tm</span>[<span class='id identifier rubyid_add'>add</span>] <span class='op'>=</span> <span class='id identifier rubyid_find_type'><a href="#find_type-class_method" title="FFI.find_type (method)">find_type</a></span>(<span class='id identifier rubyid_old'>old</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>