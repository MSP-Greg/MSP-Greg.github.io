<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Loading-Libraries &mdash; FFI master</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Loading-Libraries",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>FFI master</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Loading-Libraries&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h2>Alternate Names</h2>

<p>When loading a library with alternate file names:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ffi_lib'>ffi_lib</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo-1.2</span><span class='tstring_end'>&#39;</span></span>]</code></pre>

<h2>Linux Packages</h2>

<p>When you install <code>libfoo</code> on a Debian or RedHat based Linux system, it will install <code>libfoo.so.1</code> but will not install <code>libfoo.so</code>. Linux package maintainers will put the <code>libfoo.so</code> file into a development package (<code>libfoo-dev</code> on Debian or <code>libfoo-devel</code> on RedHat). To prevent users from having to install both the library package <em>and</em> the development package:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ffi_lib'>ffi_lib</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>libfoo.so.1</span><span class='tstring_end'>&#39;</span></span>]</code></pre>

<h2>In-memory Libraries</h2>

<p>When the library you need to bind against has already been loaded into memory, use <a href="FFI.html#CURRENT_PROCESS-constant" title="FFI::CURRENT_PROCESS (constant)">FFI::CURRENT_PROCESS</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ffi_lib'>ffi_lib</span> [<span class='const'><a href="FFI.html" title="FFI (module)">FFI</a></span><span class='op'>::</span><span class='const'><a href="FFI.html#CURRENT_PROCESS-constant" title="FFI::CURRENT_PROCESS (constant)">CURRENT_PROCESS</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span>]</code></pre>

<h2>Function Visibility</h2>

<p>Some libraries are compiled such that they depend on functions existing in the global namespace. This makes things problematic for FFI when attaching the functions. However, you can instruct FFI to load the library and make all symbols visible globally within the process.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ffi_lib_flags'>ffi_lib_flags</span> <span class='symbeg'>:</span><span class='id identifier rubyid_now'>now</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_global'>global</span>
<span class='id identifier rubyid_ffi_lib'>ffi_lib</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span></code></pre>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>