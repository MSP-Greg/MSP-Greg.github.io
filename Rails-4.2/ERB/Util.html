<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ERB::Util &mdash; Rails-4.2.7</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ERB::Util",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Rails-4.2.7</a> &raquo; 
          <a href='../_index.html'>Index (U)</a> &raquo; 
        #  <a href="../ERB.html" title="ERB (class)">ERB</a> &raquo; 
          <span class='title'>Util</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: ERB::Util</h1>

<div class="box_info">


  <dl>
    <dt>Included in:</dt>
    <dd><a href="../ActionView/Base.html" title="ActionView::Base (class)">ActionView::Base</a></dd>
  </dl>

  <dl>
    <dt>Defined in:</dt>
    <dd>activesupport/lib/active_support/core_ext/string/output_safety.rb</dd>
  </dl>
</div>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='HTML_ESCAPE-constant'>
      HTML_ESCAPE =
    </dt>
    <dd>
            <pre class='code'><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;lt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;#39;</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span></pre>
    </dd>
    <dt id='HTML_ESCAPE_ONCE_REGEXP-constant'>
      HTML_ESCAPE_ONCE_REGEXP =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&quot;&gt;&lt;&#39;]|&amp;(?!([a-zA-Z]|(#\d)|(#[xX][\dA-Fa-f]+));)</span><span class='regexp_end'>/</span></span></pre>
    </dd>
    <dt id='HTML_ESCAPE_REGEXP-constant'>
      HTML_ESCAPE_REGEXP =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&amp;&quot;&#39;&gt;&lt;]</span><span class='regexp_end'>/</span></span></pre>
    </dd>
    <dt id='JSON_ESCAPE-constant'>
      JSON_ESCAPE =
    </dt>
    <dd>
            <pre class='code'><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\u0026</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\u003e</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\u003c</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u2028</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\u2028</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u2029</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\u2029</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span></pre>
    </dd>
    <dt id='JSON_ESCAPE_REGEXP-constant'>
      JSON_ESCAPE_REGEXP =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\u2028\u2029&amp;&gt;&lt;]</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
  </dl>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#h-class_method" title=".h (class method)">.<strong>h</strong>  </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>A utility method for escaping HTML tag characters.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#html_escape-class_method" title=".html_escape (class method)">.<strong>html_escape</strong>(s)  </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>A utility method for escaping HTML tag characters.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#html_escape_once-class_method" title=".html_escape_once (class method)">.<strong>html_escape_once</strong>(s)  </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>A utility method for escaping HTML without affecting existing escaped
entities.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#json_escape-class_method" title=".json_escape (class method)">.<strong>json_escape</strong>(s)  </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>A utility method for escaping HTML entities in JSON strings.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unwrapped_html_escape-class_method" title=".unwrapped_html_escape (class method)">.<strong>unwrapped_html_escape</strong>(s)  </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>HTML escapes strings but doesn&#39;t wrap them with an
<a href="../ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">ActiveSupport::SafeBuffer</a>.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#h-instance_method" title="#h (instance method)">#<strong>h</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>A utility method for escaping HTML tag characters.</p>
</div>
      </span>
    </li>
  </ul>

<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="h-class_method">
  <h3 class='signature first'>
  .<strong>h</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>A utility method for escaping HTML tag characters. This method is also
aliased as <code>h</code>.</p>

<p>In your ERB templates, use this method to escape any unsafe content. For
example:</p>

<pre class="code ruby"><code class="ruby">&lt;%=h @person.name %&gt;

puts html_escape(&#39;is a &gt; 0 &amp; a &lt; 10?&#39;)
# =&gt; is a &amp;gt; 0 &amp;amp; a &amp;lt; 10?</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


27
28
29</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'activesupport/lib/active_support/core_ext/string/output_safety.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_html_escape'>html_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_unwrapped_html_escape'>unwrapped_html_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="html_escape-class_method">
  <h3 class='signature'>
  .<strong>html_escape</strong>(s)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>A utility method for escaping HTML tag characters. This method is also
aliased as <code>h</code>.</p>

<p>In your ERB templates, use this method to escape any unsafe content. For
example:</p>

<pre class="code ruby"><code class="ruby">&lt;%=h @person.name %&gt;

puts html_escape(&#39;is a &gt; 0 &amp; a &lt; 10?&#39;)
# =&gt; is a &amp;gt; 0 &amp;amp; a &amp;lt; 10?</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


21
22
23</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'activesupport/lib/active_support/core_ext/string/output_safety.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_html_escape'>html_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_unwrapped_html_escape'>unwrapped_html_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="html_escape_once-class_method">
  <h3 class='signature'>
  .<strong>html_escape_once</strong>(s)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>A utility method for escaping HTML without affecting existing escaped
entities.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_html_escape_once'>html_escape_once</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1 &lt; 2 &amp;amp; 3</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'># =&gt; &quot;1 &amp;lt; 2 &amp;amp; 3&quot;
</span>
<span class='id identifier rubyid_html_escape_once'>html_escape_once</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;lt;&amp;lt; Accept &amp; Checkout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'># =&gt; &quot;&amp;lt;&amp;lt; Accept &amp;amp; Checkout&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


53
54
55
56</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'activesupport/lib/active_support/core_ext/string/output_safety.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_html_escape_once'>html_escape_once</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='const'>HTML_ESCAPE_ONCE_REGEXP</span><span class='comma'>,</span> <span class='const'>HTML_ESCAPE</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_html_safe?'>html_safe?</span> <span class='op'>?</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_html_safe'>html_safe</span> <span class='op'>:</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="json_escape-class_method">
  <h3 class='signature'>
  .<strong>json_escape</strong>(s)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>A utility method for escaping HTML entities in JSON strings. Specifically,
the &amp;, &gt; and &lt; characters are replaced with their equivalent
unicode escaped form - u0026, u003e, and u003c. The Unicode sequences u2028
and u2029 are also escaped as they are treated as newline characters in
some JavaScript engines. These sequences have identical meaning as the
original characters inside the context of a JSON string, so assuming the
input is a valid and well-formed JSON value, the output will have
equivalent meaning when parsed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/script&gt;&lt;script&gt;alert(&#39;PWNED!!!&#39;)&lt;/script&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='comment'># =&gt; &quot;{\&quot;name\&quot;:\&quot;&lt;/script&gt;&lt;script&gt;alert(&#39;PWNED!!!&#39;)&lt;/script&gt;\&quot;}&quot;
</span>
<span class='id identifier rubyid_json_escape'>json_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_json'>json</span><span class='rparen'>)</span>
<span class='comment'># =&gt; &quot;{\&quot;name\&quot;:\&quot;\\u003C/script\\u003E\\u003Cscript\\u003Ealert(&#39;PWNED!!!&#39;)\\u003C/script\\u003E\&quot;}&quot;
</span>
<span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_json'>json</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_json_escape'>json_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_json'>json</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='comment'># =&gt; true
</span></code></pre>

<p>The intended use case for this method is to escape JSON strings before
including them inside a script tag to avoid XSS vulnerability:</p>

<pre class="code ruby"><code class="ruby">&lt;script&gt;
  var currentUser = &lt;%= raw json_escape(current_user.to_json) %&gt;;
&lt;/script&gt;</code></pre>

<p>It is necessary to <code>raw</code> the result of <code>json_escape</code>,
so that quotation marks don&#39;t get converted to <code>&amp;quot;</code>
entities. <code>json_escape</code> doesn&#39;t automatically flag the
result as HTML safe, since the raw value is unsafe to use inside HTML
attributes.</p>

<p>If you need to output JSON elsewhere in your HTML, you can just do
something like this, as any unsafe characters (including quotation marks)
will be automatically escaped for you:</p>

<pre class="code ruby"><code class="ruby">&lt;div data-user-info=&quot;&lt;%= current_user.to_json %&gt;&quot;&gt;...&lt;/div&gt;</code></pre>

<p>WARNING: this helper only works with valid JSON. Using this on non-JSON
values will open up serious XSS vulnerabilities. For example, if you
replace the <code>current_user.to_json</code> in the example above with
user input instead, the browser will happily eval() that string as
JavaScript.</p>

<p>The escaping performed in this method is identical to those performed in
the Active Support JSON encoder when
<code>ActiveSupport.escape_html_entities_in_json</code> is set to true. Because this
transformation is idempotent, this helper can be applied even if
<code>ActiveSupport.escape_html_entities_in_json</code> is already true.</p>

<p>Therefore, when you are unsure if
<code>ActiveSupport.escape_html_entities_in_json</code> is enabled, or if you are
unsure where your JSON string originated from, it is recommended that you
always apply this helper (other libraries, such as the JSON gem, do not
provide this kind of protection by default; also some gems might override
<code>to_json</code> to bypass Active Support&#39;s encoder).</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


110
111
112
113</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'activesupport/lib/active_support/core_ext/string/output_safety.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_json_escape'>json_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='const'>JSON_ESCAPE_REGEXP</span><span class='comma'>,</span> <span class='const'>JSON_ESCAPE</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_html_safe?'>html_safe?</span> <span class='op'>?</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_html_safe'>html_safe</span> <span class='op'>:</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="unwrapped_html_escape-class_method">
  <h3 class='signature'>
  .<strong>unwrapped_html_escape</strong>(s)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>HTML escapes strings but doesn&#39;t wrap them with an
<a href="../ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">ActiveSupport::SafeBuffer</a>. This method is not for public consumption!
Seriously!</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


36
37
38
39
40
41
42
43</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'activesupport/lib/active_support/core_ext/string/output_safety.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unwrapped_html_escape'>unwrapped_html_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_html_safe?'>html_safe?</span>
    <span class='id identifier rubyid_s'>s</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='const'>HTML_ESCAPE_REGEXP</span><span class='comma'>,</span> <span class='const'>HTML_ESCAPE</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="h-instance_method">
  <h3 class='signature first'>
  #<strong>h</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>A utility method for escaping HTML tag characters. This method is also
aliased as <code>h</code>.</p>

<p>In your ERB templates, use this method to escape any unsafe content. For
example:</p>

<pre class="code ruby"><code class="ruby">&lt;%=h @person.name %&gt;

puts html_escape(&#39;is a &gt; 0 &amp; a &lt; 10?&#39;)
# =&gt; is a &amp;gt; 0 &amp;amp; a &amp;lt; 10?</code></pre>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


27
28
29</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'activesupport/lib/active_support/core_ext/string/output_safety.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_html_escape'>html_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_unwrapped_html_escape'>unwrapped_html_escape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>