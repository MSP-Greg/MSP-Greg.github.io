<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveSupport::Multibyte::Unicode &mdash; Rails-4.2.7</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveSupport::Multibyte::Unicode",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Rails-4.2.7</a> &raquo; 
          <a href='../../_index.html'>Index (U)</a> &raquo; 
          <a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a> &raquo; 
          <a href="../Multibyte.html" title="ActiveSupport::Multibyte (module)">Multibyte</a> &raquo; 
          <span class='title'>Unicode</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: ActiveSupport::Multibyte::Unicode</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>

  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <a href="Unicode/Codepoint.html" title="ActiveSupport::Multibyte::Unicode::Codepoint (class)">Codepoint</a>,
    <a href="Unicode/UnicodeDatabase.html" title="ActiveSupport::Multibyte::Unicode::UnicodeDatabase (class)">UnicodeDatabase</a>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Extended by:</td>
    <td><a href="" title="ActiveSupport::Multibyte::Unicode (module)">Unicode</a>
    </td>
  </tr>


  <tr>
    <td class='box_1'>Included in:</td>
    <td><a href="" title="ActiveSupport::Multibyte::Unicode (module)">Unicode</a>
    </td>
  </tr>

  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L4'>activesupport/lib/active_support/multibyte/unicode.rb</a></div>  </td>
  </tr>
</table>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='HANGUL_JAMO_FIRST-constant'>
      HANGUL_JAMO_FIRST =
    </dt>
    <dd>
            <pre class='code'><span class='int'>0x1100</span></pre>
    </dd>
    <dt id='HANGUL_JAMO_LAST-constant'>
      HANGUL_JAMO_LAST =
    </dt>
    <dd>
            <pre class='code'><span class='int'>0x11FF</span></pre>
    </dd>
    <dt id='HANGUL_LBASE-constant'>
      HANGUL_LBASE =
    </dt>
    <dd>
            <pre class='code'><span class='int'>0x1100</span></pre>
    </dd>
    <dt id='HANGUL_LCOUNT-constant'>
      HANGUL_LCOUNT =
    </dt>
    <dd>
            <pre class='code'><span class='int'>19</span></pre>
    </dd>
    <dt id='HANGUL_NCOUNT-constant'>
      HANGUL_NCOUNT =
    </dt>
    <dd>
            <pre class='code'><span class='const'><a href="#HANGUL_VCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VCOUNT (constant)">HANGUL_VCOUNT</a></span> <span class='op'>*</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span></pre>
    </dd>
    <dt id='HANGUL_SBASE-constant'>
      HANGUL_SBASE =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Hangul character boundaries and properties</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='int'>0xAC00</span></pre>
    </dd>
    <dt id='HANGUL_SCOUNT-constant'>
      HANGUL_SCOUNT =
    </dt>
    <dd>
            <pre class='code'><span class='int'>11172</span></pre>
    </dd>
    <dt id='HANGUL_SLAST-constant'>
      HANGUL_SLAST =
    </dt>
    <dd>
            <pre class='code'><span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span> <span class='op'>+</span> <span class='const'><a href="#HANGUL_SCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SCOUNT (constant)">HANGUL_SCOUNT</a></span></pre>
    </dd>
    <dt id='HANGUL_TBASE-constant'>
      HANGUL_TBASE =
    </dt>
    <dd>
            <pre class='code'><span class='int'>0x11A7</span></pre>
    </dd>
    <dt id='HANGUL_TCOUNT-constant'>
      HANGUL_TCOUNT =
    </dt>
    <dd>
            <pre class='code'><span class='int'>28</span></pre>
    </dd>
    <dt id='HANGUL_VBASE-constant'>
      HANGUL_VBASE =
    </dt>
    <dd>
            <pre class='code'><span class='int'>0x1161</span></pre>
    </dd>
    <dt id='HANGUL_VCOUNT-constant'>
      HANGUL_VCOUNT =
    </dt>
    <dd>
            <pre class='code'><span class='int'>21</span></pre>
    </dd>
    <dt id='LEADERS_AND_TRAILERS-constant'>
      LEADERS_AND_TRAILERS =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>BOM (byte order mark) can also be seen as whitespace, it&#39;s a
non-rendering character used to distinguish between little and big endian.
This is not an issue in utf-8, so it must be ignored.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='const'><a href="#WHITESPACE-constant" title="ActiveSupport::Multibyte::Unicode::WHITESPACE (constant)">WHITESPACE</a></span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='int'>65279</span><span class='rbracket'>]</span></pre>
    </dd>
    <dt id='LEADERS_PAT-constant'>
      LEADERS_PAT =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_codepoints_to_pattern'>codepoints_to_pattern</span><span class='lparen'>(</span><span class='const'><a href="#LEADERS_AND_TRAILERS-constant" title="ActiveSupport::Multibyte::Unicode::LEADERS_AND_TRAILERS (constant)">LEADERS_AND_TRAILERS</a></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)+</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
    <dt id='NORMALIZATION_FORMS-constant'>
      NORMALIZATION_FORMS =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>A list of all available normalization forms. See <a
href="http://www.unicode.org/reports/tr15/tr15-29.html">www.unicode.org/reports/tr15/tr15-29.html</a>
for more information about normalization.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='lbracket'>[</span><span class='symbol'>:c</span><span class='comma'>,</span> <span class='symbol'>:kc</span><span class='comma'>,</span> <span class='symbol'>:d</span><span class='comma'>,</span> <span class='symbol'>:kd</span><span class='rbracket'>]</span></pre>
    </dd>
    <dt id='TRAILERS_PAT-constant'>
      TRAILERS_PAT =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_codepoints_to_pattern'>codepoints_to_pattern</span><span class='lparen'>(</span><span class='const'><a href="#LEADERS_AND_TRAILERS-constant" title="ActiveSupport::Multibyte::Unicode::LEADERS_AND_TRAILERS (constant)">LEADERS_AND_TRAILERS</a></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)+\Z</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
    <dt id='UNICODE_VERSION-constant'>
      UNICODE_VERSION =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>The Unicode version that is supported by the implementation</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7.0.0</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
    <dt id='WHITESPACE-constant'>
      WHITESPACE =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>All the unicode whitespace</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='lbracket'>[</span>
  <span class='lparen'>(</span><span class='int'>0x0009</span><span class='op'>..</span><span class='int'>0x000D</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='comma'>,</span> <span class='comment'># White_Space # Cc   [5] &lt;control-0009&gt;..&lt;control-000D&gt;
</span>  <span class='int'>0x0020</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zs       SPACE
</span>  <span class='int'>0x0085</span><span class='comma'>,</span>                <span class='comment'># White_Space # Cc       &lt;control-0085&gt;
</span>  <span class='int'>0x00A0</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zs       NO-BREAK SPACE
</span>  <span class='int'>0x1680</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zs       OGHAM SPACE MARK
</span>  <span class='lparen'>(</span><span class='int'>0x2000</span><span class='op'>..</span><span class='int'>0x200A</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='comma'>,</span> <span class='comment'># White_Space # Zs  [11] EN QUAD..HAIR SPACE
</span>  <span class='int'>0x2028</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zl       LINE SEPARATOR
</span>  <span class='int'>0x2029</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zp       PARAGRAPH SEPARATOR
</span>  <span class='int'>0x202F</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zs       NARROW NO-BREAK SPACE
</span>  <span class='int'>0x205F</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zs       MEDIUM MATHEMATICAL SPACE
</span>  <span class='int'>0x3000</span><span class='comma'>,</span>                <span class='comment'># White_Space # Zs       IDEOGRAPHIC SPACE
</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre>
    </dd>
  </dl>



<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#default_normalization_form-instance_method" title="#default_normalization_form (instance method)">#<strong>default_normalization_form</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The default normalization used for operations that require normalization.</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#codepoints_to_pattern-class_method" title=".codepoints_to_pattern (class method)">.<strong>codepoints_to_pattern</strong>(array_of_codepoints)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a regular expression pattern that matches the passed Unicode
codepoints.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#compose-instance_method" title="#compose (instance method)">#<strong>compose</strong>(codepoints)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Compose decomposed characters to the composed form.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#decompose-instance_method" title="#decompose (instance method)">#<strong>decompose</strong>(type, codepoints)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Decompose composed characters to the decomposed form.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#downcase-instance_method" title="#downcase (instance method)">#<strong>downcase</strong>(string)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#in_char_class%3F-instance_method" title="#in_char_class? (instance method)">#<strong>in_char_class?</strong>(codepoint, classes)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Detect whether the codepoint is in a certain character class.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#normalize-instance_method" title="#normalize (instance method)">#<strong>normalize</strong>(string, form = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the KC normalization of the string by default.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pack_graphemes-instance_method" title="#pack_graphemes (instance method)">#<strong>pack_graphemes</strong>(unpacked)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Reverse operation of unpack_graphemes.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reorder_characters-instance_method" title="#reorder_characters (instance method)">#<strong>reorder_characters</strong>(codepoints)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Re-order codepoints so the string becomes canonical.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#swapcase-instance_method" title="#swapcase (instance method)">#<strong>swapcase</strong>(string)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tidy_bytes-instance_method" title="#tidy_bytes (instance method)">#<strong>tidy_bytes</strong>(string, force = false)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unpack_graphemes-instance_method" title="#unpack_graphemes (instance method)">#<strong>unpack_graphemes</strong>(string)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Unpack the string at grapheme boundaries.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#upcase-instance_method" title="#upcase (instance method)">#<strong>upcase</strong>(string)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>


<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="default_normalization_form-instance_method">
  <h3 class='signature first'>
  #<strong>default_normalization_form</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The default normalization used for operations that require normalization.
It can be set to any of the normalizations in NORMALIZATION_FORMS.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Multibyte.html" title="ActiveSupport::Multibyte (module)">Multibyte</a></span><span class='op'>::</span><span class='const'><a href="" title="ActiveSupport::Multibyte::Unicode (module)">Unicode</a></span><span class='period'>.</span><span class='id identifier rubyid_default_normalization_form'>default_normalization_form</span> <span class='op'>=</span> <span class='symbol'>:c</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L21'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


21</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 21</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:default_normalization_form</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="codepoints_to_pattern-class_method">
  <h3 class='signature first'>
  .<strong>codepoints_to_pattern</strong>(array_of_codepoints)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a regular expression pattern that matches the passed Unicode
codepoints.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L60'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


60
61
62</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 60</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_codepoints_to_pattern'>codepoints_to_pattern</span><span class='lparen'>(</span><span class='id identifier rubyid_array_of_codepoints'>array_of_codepoints</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_array_of_codepoints'>array_of_codepoints</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_e'>e</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>|</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="compose-instance_method">
  <h3 class='signature first'>
  #<strong>compose</strong>(codepoints)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Compose decomposed characters to the composed form.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L156'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 156</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compose'>compose</span><span class='lparen'>(</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span>
  <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_eoa'>eoa</span>
    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_lindex'>lindex</span> <span class='op'>=</span> <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_LBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_LBASE (constant)">HANGUL_LBASE</a></span>
    <span class='comment'># -- Hangul
</span>    <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_lindex'>lindex</span> <span class='kw'>and</span> <span class='id identifier rubyid_lindex'>lindex</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_LCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_LCOUNT (constant)">HANGUL_LCOUNT</a></span>
      <span class='id identifier rubyid_vindex'>vindex</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='op'>+</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_VBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VBASE (constant)">HANGUL_VBASE</a></span> <span class='kw'>rescue</span> <span class='id identifier rubyid_vindex'>vindex</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
      <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_vindex'>vindex</span> <span class='kw'>and</span> <span class='id identifier rubyid_vindex'>vindex</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_VCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VCOUNT (constant)">HANGUL_VCOUNT</a></span>
        <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='op'>+</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_TBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TBASE (constant)">HANGUL_TBASE</a></span> <span class='kw'>rescue</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='kw'>and</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span>
          <span class='id identifier rubyid_j'>j</span> <span class='op'>=</span> <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+</span> <span class='int'>2</span>
          <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>-=</span> <span class='int'>2</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_j'>j</span> <span class='op'>=</span> <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+</span> <span class='int'>1</span>
          <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>-=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='op'>..</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_lindex'>lindex</span> <span class='op'>*</span> <span class='const'><a href="#HANGUL_VCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VCOUNT (constant)">HANGUL_VCOUNT</a></span> <span class='op'>+</span> <span class='id identifier rubyid_vindex'>vindex</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span> <span class='op'>+</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>+</span> <span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='rbracket'>]</span>
    <span class='comment'># -- Other characters
</span>    <span class='kw'>else</span>
      <span class='id identifier rubyid_current_char'>current_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_char'>current_char</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_ref'>ref</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_composition_map'>composition_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_char'>starter_char</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_composition'>composition</span> <span class='op'>=</span> <span class='id identifier rubyid_ref'>ref</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_char'>current_char</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_composition'>composition</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_composition'>composition</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
          <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_composition'>composition</span>
          <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_composition'>composition</span>
          <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span> <span class='id identifier rubyid_pos'>pos</span>
          <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>-=</span> <span class='int'>1</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>-=</span> <span class='int'>1</span>
          <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span>
        <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="decompose-instance_method">
  <h3 class='signature'>
  #<strong>decompose</strong>(type, codepoints)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Decompose composed characters to the decomposed form.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L135'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_decomposed'>decomposed</span><span class='comma'>,</span> <span class='id identifier rubyid_cp'>cp</span><span class='op'>|</span>
    <span class='comment'># if it&#39;s a hangul syllable starter character
</span>    <span class='kw'>if</span> <span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_cp'>cp</span> <span class='kw'>and</span> <span class='id identifier rubyid_cp'>cp</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_SLAST-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SLAST (constant)">HANGUL_SLAST</a></span>
      <span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>=</span> <span class='id identifier rubyid_cp'>cp</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span>
      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># new codepoints
</span>      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="#HANGUL_LBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_LBASE (constant)">HANGUL_LBASE</a></span> <span class='op'>+</span> <span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>/</span> <span class='const'><a href="#HANGUL_NCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_NCOUNT (constant)">HANGUL_NCOUNT</a></span>
      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="#HANGUL_VBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VBASE (constant)">HANGUL_VBASE</a></span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>%</span> <span class='const'><a href="#HANGUL_NCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_NCOUNT (constant)">HANGUL_NCOUNT</a></span><span class='rparen'>)</span> <span class='op'>/</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span>
      <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>%</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span>
      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='const'><a href="#HANGUL_TBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TBASE (constant)">HANGUL_TBASE</a></span> <span class='op'>+</span> <span class='id identifier rubyid_tindex'>tindex</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='id identifier rubyid_decomposed'>decomposed</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='id identifier rubyid_ncp'>ncp</span>
    <span class='comment'># if the codepoint is decomposable in with the current decomposition type
</span>    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_cp'>cp</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_decomp_mapping'>decomp_mapping</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_cp'>cp</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_decomp_type'>decomp_type</span> <span class='op'>||</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbol'>:compatibility</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_decomposed'>decomposed</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_ncp'>ncp</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_decomposed'>decomposed</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_cp'>cp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="downcase-instance_method">
  <h3 class='signature'>
  #<strong>downcase</strong>(string)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L280'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


280
281
282</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 280</span>

<span class='kw'>def</span> <span class='id identifier rubyid_downcase'>downcase</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_apply_mapping'>apply_mapping</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbol'>:lowercase_mapping</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="in_char_class?-instance_method">
  <h3 class='signature'>
  #<strong>in_char_class?</strong>(codepoint, classes)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Detect whether the codepoint is in a certain character class. Returns
<code>true</code> when it&#39;s in the specified character class and
<code>false</code> otherwise. Valid character classes are:
<code>:cr</code>, <code>:lf</code>, <code>:l</code>, <code>:v</code>,
<code>:lv</code>, <code>:lvt</code> and <code>:t</code>.</p>

<p>Primarily used by the grapheme cluster support.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L72'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


72
73
74</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_codepoint'>codepoint</span><span class='comma'>,</span> <span class='id identifier rubyid_classes'>classes</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_classes'>classes</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='id identifier rubyid_c'>c</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_codepoint'>codepoint</span> <span class='rbrace'>}</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="normalize-instance_method">
  <h3 class='signature'>
  #<strong>normalize</strong>(string, form = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the KC normalization of the string by default. NFKC is considered
the best normalization form for passing strings to databases and
validations.</p>
<ul><li>
<p><code>string</code> - The string to perform normalization on.</p>
</li><li>
<p><code>form</code> - The form you want to normalize in. Should be one of the
following: <code>:c</code>, <code>:kc</code>, <code>:d</code>, or
<code>:kd</code>. Default is
ActiveSupport::Multibyte.default_normalization_form.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L262'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize'>normalize</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_form'>form</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_form'>form</span> <span class='op'>||=</span> <span class='ivar'>@default_normalization_form</span>
  <span class='comment'># See http://www.unicode.org/reports/tr15, Table 1
</span>  <span class='id identifier rubyid_codepoints'>codepoints</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_form'>form</span>
    <span class='kw'>when</span> <span class='symbol'>:d</span>
      <span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbol'>:canonical</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='symbol'>:c</span>
      <span class='id identifier rubyid_compose'>compose</span><span class='lparen'>(</span><span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbol'>:canonical</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='symbol'>:kd</span>
      <span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbol'>:compatibility</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='symbol'>:kc</span>
      <span class='id identifier rubyid_compose'>compose</span><span class='lparen'>(</span><span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbol'>:compatibility</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_form'>form</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a valid normalization variant</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_caller'>caller</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="pack_graphemes-instance_method">
  <h3 class='signature'>
  #<strong>pack_graphemes</strong>(unpacked)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Reverse operation of unpack_graphemes.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="" title="ActiveSupport::Multibyte::Unicode (module)">Unicode</a></span><span class='period'>.</span><span class='id identifier rubyid_pack_graphemes'>pack_graphemes</span><span class='lparen'>(</span><span class='const'><a href="" title="ActiveSupport::Multibyte::Unicode (module)">Unicode</a></span><span class='period'>.</span><span class='id identifier rubyid_unpack_graphemes'><a href="#unpack_graphemes-instance_method" title="ActiveSupport::Multibyte::Unicode#unpack_graphemes (method)">unpack_graphemes</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'></span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='comment'># =&gt; &#39;&#39;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L114'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


114
115
116</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pack_graphemes'>pack_graphemes</span><span class='lparen'>(</span><span class='id identifier rubyid_unpacked'>unpacked</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_unpacked'>unpacked</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="reorder_characters-instance_method">
  <h3 class='signature'>
  #<strong>reorder_characters</strong>(codepoints)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Re-order codepoints so the string becomes canonical.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L119'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_length'>length</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='op'>-</span> <span class='int'>1</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_length'>length</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_cp1'>cp1</span><span class='comma'>,</span> <span class='id identifier rubyid_cp2'>cp2</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>+</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_cp1'>cp1</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_cp2'>cp2</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_cp2'>cp2</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>..</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>+</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_cp2'>cp2</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_cp1'>cp1</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span>
      <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='op'>-</span><span class='int'>1</span> <span class='op'>:</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="swapcase-instance_method">
  <h3 class='signature'>
  #<strong>swapcase</strong>(string)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L288'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


288
289
290</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 288</span>

<span class='kw'>def</span> <span class='id identifier rubyid_swapcase'>swapcase</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_apply_mapping'>apply_mapping</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbol'>:swapcase_mapping</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="tidy_bytes-instance_method">
  <h3 class='signature'>
  #<strong>tidy_bytes</strong>(string, force = false)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L222'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


222
223
224
225
226</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 222</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tidy_bytes'>tidy_bytes</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_string'>string</span> <span class='kw'>if</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_recode_windows1252_chars'>recode_windows1252_chars</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_force'>force</span>
  <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_scrub'>scrub</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_bad'>bad</span><span class='op'>|</span> <span class='id identifier rubyid_recode_windows1252_chars'>recode_windows1252_chars</span><span class='lparen'>(</span><span class='id identifier rubyid_bad'>bad</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="unpack_graphemes-instance_method">
  <h3 class='signature'>
  #<strong>unpack_graphemes</strong>(string)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Unpack the string at grapheme boundaries. Returns a list of character
lists.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="" title="ActiveSupport::Multibyte::Unicode (module)">Unicode</a></span><span class='period'>.</span><span class='id identifier rubyid_unpack_graphemes'>unpack_graphemes</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'></span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; [[2325, 2381], [2359], [2367]]
</span><span class='const'><a href="" title="ActiveSupport::Multibyte::Unicode (module)">Unicode</a></span><span class='period'>.</span><span class='id identifier rubyid_unpack_graphemes'>unpack_graphemes</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Caf</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; [[67], [97], [102], [233]]
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L81'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unpack_graphemes'>unpack_graphemes</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='id identifier rubyid_unpacked'>unpacked</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_marker'>marker</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_eoc'>eoc</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
  <span class='kw'>while</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_eoc'>eoc</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_previous'>previous</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='lparen'>(</span>
        <span class='comment'># CR X LF
</span>        <span class='lparen'>(</span> <span class='id identifier rubyid_previous'>previous</span> <span class='op'>==</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbol'>:cr</span><span class='rbracket'>]</span> <span class='kw'>and</span> <span class='id identifier rubyid_current'>current</span> <span class='op'>==</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbol'>:lf</span><span class='rbracket'>]</span> <span class='rparen'>)</span> <span class='kw'>or</span>
        <span class='comment'># L X (L|V|LV|LVT)
</span>        <span class='lparen'>(</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbol'>:l</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_previous'>previous</span> <span class='kw'>and</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:l</span><span class='comma'>,</span><span class='symbol'>:v</span><span class='comma'>,</span><span class='symbol'>:lv</span><span class='comma'>,</span><span class='symbol'>:lvt</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rparen'>)</span> <span class='kw'>or</span>
        <span class='comment'># (LV|V) X (V|T)
</span>        <span class='lparen'>(</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_previous'>previous</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:lv</span><span class='comma'>,</span><span class='symbol'>:v</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:v</span><span class='comma'>,</span><span class='symbol'>:t</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rparen'>)</span> <span class='kw'>or</span>
        <span class='comment'># (LVT|T) X (T)
</span>        <span class='lparen'>(</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_previous'>previous</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:lvt</span><span class='comma'>,</span><span class='symbol'>:t</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbol'>:t</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_current'>current</span> <span class='rparen'>)</span> <span class='kw'>or</span>
        <span class='comment'># X Extend
</span>        <span class='lparen'>(</span><span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbol'>:extend</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
      <span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_unpacked'>unpacked</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_marker'>marker</span><span class='op'>..</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_marker'>marker</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_unpacked'>unpacked</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="upcase-instance_method">
  <h3 class='signature'>
  #<strong>upcase</strong>(string)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/multibyte/unicode.rb#L284'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


284
285
286</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_upcase'>upcase</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_apply_mapping'>apply_mapping</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbol'>:uppercase_mapping</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>