<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveRecord::Associations::JoinDependency &mdash; Rails-4.2.7</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::Associations::JoinDependency",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Rails-4.2.7</a> &raquo; 
          <a href='../../_index.html'>Index (J)</a> &raquo; 
          <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
          <a href="../Associations.html" title="ActiveRecord::Associations (module)">Associations</a> &raquo; 
          <span class='title'>JoinDependency</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: ActiveRecord::Associations::JoinDependency</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      <ul class='fullTree'>
        <li><a href="../../Object.html" title="Object (class)">Object</a></li>
        <li class='next'>ActiveRecord::Associations::JoinDependency</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <a href="JoinDependency/Aliases.html" title="ActiveRecord::Associations::JoinDependency::Aliases (class)">Aliases</a>,
    <a href="JoinDependency/JoinAssociation.html" title="ActiveRecord::Associations::JoinDependency::JoinAssociation (class)">JoinAssociation</a>,
    <a href="JoinDependency/JoinBase.html" title="ActiveRecord::Associations::JoinDependency::JoinBase (class)">JoinBase</a>,
    <a href="JoinDependency/JoinPart.html" title="ActiveRecord::Associations::JoinDependency::JoinPart (class)">JoinPart</a>
    </td>
  </tr>




  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
activerecord/lib/active_record/associations/join_dependency.rb<span class='defines'>,<br />activerecord/lib/active_record/associations/join_dependency/join_association.rb,<br /> activerecord/lib/active_record/associations/join_dependency/join_base.rb,<br /> activerecord/lib/active_record/associations/join_dependency/join_part.rb</span>
</div>  </td>
  </tr>
</table>



<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#alias_tracker-instance_method" title="#alias_tracker (instance method)">#<strong>alias_tracker</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#base_klass-instance_method" title="#base_klass (instance method)">#<strong>base_klass</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#join_root-instance_method" title="#join_root (instance method)">#<strong>join_root</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#make_tree-class_method" title=".make_tree (class method)">.<strong>make_tree</strong>(associations)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(base, associations, joins)  &#x21d2; JoinDependency </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>base is the base class on which operation is taking place.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#walk_tree-class_method" title=".walk_tree (class method)">.<strong>walk_tree</strong>(associations, hash)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#aliases-instance_method" title="#aliases (instance method)">#<strong>aliases</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#instantiate-instance_method" title="#instantiate (instance method)">#<strong>instantiate</strong>(result_set, aliases)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#join_constraints-instance_method" title="#join_constraints (instance method)">#<strong>join_constraints</strong>(outer_joins)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reflections-instance_method" title="#reflections (instance method)">#<strong>reflections</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(base, associations, joins)  &#x21d2; <tt><a href="" title="ActiveRecord::Associations::JoinDependency (class)">JoinDependency</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>base is the base class on which operation is taking place. associations is
the list of associations which are joined using hash, symbol or array.
joins is the list of all string join commands and arel nodes.</p>

<pre class="code ruby"><code class="ruby">Example :

class Physician &lt; {ActiveRecord::Base}
  has_many :appointments
  has_many :patients, through: :appointments
end

If I execute &lt;code&gt;@physician.patients.to_a&lt;/code&gt; then
  base # =&gt; Physician
  associations # =&gt; []
  joins # =&gt;  [#&lt;Arel::Nodes::InnerJoin: ...]

However if I execute &lt;code&gt;Physician.joins(:appointments).to_a&lt;/code&gt; then
  base # =&gt; Physician
  associations # =&gt; [:appointments]
  joins # =&gt;  []</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


95
96
97
98
99
100
101</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_associations'>associations</span><span class='comma'>,</span> <span class='id identifier rubyid_joins'>joins</span><span class='rparen'>)</span>
  <span class='ivar'>@alias_tracker</span> <span class='op'>=</span> <span class='const'>AliasTracker</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='comma'>,</span> <span class='id identifier rubyid_joins'>joins</span><span class='rparen'>)</span>
  <span class='ivar'>@alias_tracker</span><span class='period'>.</span><span class='id identifier rubyid_aliased_table_for'>aliased_table_for</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='comma'>,</span> <span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span> <span class='comment'># Updates the count for base.table_name to 1
</span>  <span class='id identifier rubyid_tree'>tree</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_make_tree'>make_tree</span> <span class='id identifier rubyid_associations'>associations</span>
  <span class='ivar'>@join_root</span> <span class='op'>=</span> <span class='const'>JoinBase</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='id identifier rubyid_tree'>tree</span><span class='comma'>,</span> <span class='id identifier rubyid_base'>base</span><span class='rparen'>)</span>
  <span class='ivar'>@join_root</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span> <span class='id identifier rubyid_construct_tables!'>construct_tables!</span> <span class='ivar'>@join_root</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span> <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="alias_tracker-instance_method">
  <h3 class='signature first'>
  #<strong>alias_tracker</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


48</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 48</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:alias_tracker</span><span class='comma'>,</span> <span class='symbol'>:base_klass</span><span class='comma'>,</span> <span class='symbol'>:join_root</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="base_klass-instance_method">
  <h3 class='signature'>
  #<strong>base_klass</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


48</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 48</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:alias_tracker</span><span class='comma'>,</span> <span class='symbol'>:base_klass</span><span class='comma'>,</span> <span class='symbol'>:join_root</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="join_root-instance_method">
  <h3 class='signature'>
  #<strong>join_root</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


48</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 48</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:alias_tracker</span><span class='comma'>,</span> <span class='symbol'>:base_klass</span><span class='comma'>,</span> <span class='symbol'>:join_root</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="make_tree-class_method">
  <h3 class='signature first'>
  .<strong>make_tree</strong>(associations)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


50
51
52
53
54</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 50</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_make_tree'>make_tree</span><span class='lparen'>(</span><span class='id identifier rubyid_associations'>associations</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hash'>hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_walk_tree'>walk_tree</span> <span class='id identifier rubyid_associations'>associations</span><span class='comma'>,</span> <span class='id identifier rubyid_hash'>hash</span>
  <span class='id identifier rubyid_hash'>hash</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="walk_tree-class_method">
  <h3 class='signature'>
  .<strong>walk_tree</strong>(associations, hash)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 56</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_walk_tree'>walk_tree</span><span class='lparen'>(</span><span class='id identifier rubyid_associations'>associations</span><span class='comma'>,</span> <span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_associations'>associations</span>
  <span class='kw'>when</span> <span class='const'>Symbol</span><span class='comma'>,</span> <span class='const'>String</span>
    <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_associations'>associations</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_associations'>associations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_assoc'>assoc</span><span class='op'>|</span>
      <span class='id identifier rubyid_walk_tree'>walk_tree</span> <span class='id identifier rubyid_assoc'>assoc</span><span class='comma'>,</span> <span class='id identifier rubyid_hash'>hash</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='id identifier rubyid_associations'>associations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_walk_tree'>walk_tree</span> <span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='id identifier rubyid_cache'>cache</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ConfigurationError</span><span class='comma'>,</span> <span class='id identifier rubyid_associations'>associations</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="aliases-instance_method">
  <h3 class='signature first'>
  #<strong>aliases</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


123
124
125
126
127
128
129
130</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_aliases'>aliases</span>
  <span class='const'>Aliases</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_join_part'>join_part</span><span class='comma'>,</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_columns'>columns</span> <span class='op'>=</span> <span class='id identifier rubyid_join_part'>join_part</span><span class='period'>.</span><span class='id identifier rubyid_column_names'>column_names</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_column_name'>column_name</span><span class='comma'>,</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
      <span class='const'>Aliases</span><span class='op'>::</span><span class='const'>Column</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_column_name'>column_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>_r</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_j'>j</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span>
    <span class='const'>Aliases</span><span class='op'>::</span><span class='const'>Table</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_join_part'>join_part</span><span class='comma'>,</span> <span class='id identifier rubyid_columns'>columns</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="instantiate-instance_method">
  <h3 class='signature'>
  #<strong>instantiate</strong>(result_set, aliases)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instantiate'>instantiate</span><span class='lparen'>(</span><span class='id identifier rubyid_result_set'>result_set</span><span class='comma'>,</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_primary_key'>primary_key</span> <span class='op'>=</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_column_alias'>column_alias</span><span class='lparen'>(</span><span class='id identifier rubyid_join_root'>join_root</span><span class='comma'>,</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_primary_key'>primary_key</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_seen'>seen</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span><span class='id identifier rubyid_parent_klass'>parent_klass</span><span class='op'>|</span>
    <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_parent_klass'>parent_klass</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='comma'>,</span><span class='id identifier rubyid_parent_id'>parent_id</span><span class='op'>|</span>
      <span class='id identifier rubyid_i'>i</span><span class='lbracket'>[</span><span class='id identifier rubyid_parent_id'>parent_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='comma'>,</span><span class='id identifier rubyid_child_klass'>child_klass</span><span class='op'>|</span> <span class='id identifier rubyid_j'>j</span><span class='lbracket'>[</span><span class='id identifier rubyid_child_klass'>child_klass</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_model_cache'>model_cache</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span><span class='id identifier rubyid_klass'>klass</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_klass'>klass</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_parents'>parents</span> <span class='op'>=</span> <span class='id identifier rubyid_model_cache'>model_cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_join_root'>join_root</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_column_aliases'>column_aliases</span> <span class='op'>=</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_column_aliases'>column_aliases</span> <span class='id identifier rubyid_join_root'>join_root</span>

  <span class='id identifier rubyid_message_bus'>message_bus</span> <span class='op'>=</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Notifications</span><span class='period'>.</span><span class='id identifier rubyid_instrumenter'>instrumenter</span>

  <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>record_count:</span> <span class='id identifier rubyid_result_set'>result_set</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='comma'>,</span>
    <span class='label'>class_name:</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_base_klass'>base_klass</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_message_bus'>message_bus</span><span class='period'>.</span><span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>instantiation.active_record</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_payload'>payload</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_result_set'>result_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_row_hash'>row_hash</span><span class='op'>|</span>
      <span class='id identifier rubyid_parent_key'>parent_key</span> <span class='op'>=</span> <span class='id identifier rubyid_primary_key'>primary_key</span> <span class='op'>?</span> <span class='id identifier rubyid_row_hash'>row_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_primary_key'>primary_key</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_row_hash'>row_hash</span>
      <span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='id identifier rubyid_parents'>parents</span><span class='lbracket'>[</span><span class='id identifier rubyid_parent_key'>parent_key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_instantiate'>instantiate</span><span class='lparen'>(</span><span class='id identifier rubyid_row_hash'>row_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_column_aliases'>column_aliases</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_construct'>construct</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='comma'>,</span> <span class='id identifier rubyid_row_hash'>row_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_result_set'>result_set</span><span class='comma'>,</span> <span class='id identifier rubyid_seen'>seen</span><span class='comma'>,</span> <span class='id identifier rubyid_model_cache'>model_cache</span><span class='comma'>,</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_parents'>parents</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="join_constraints-instance_method">
  <h3 class='signature'>
  #<strong>join_constraints</strong>(outer_joins)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


107
108
109
110
111
112
113
114
115
116
117
118
119
120
121</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_join_constraints'>join_constraints</span><span class='lparen'>(</span><span class='id identifier rubyid_outer_joins'>outer_joins</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_joins'>joins</span> <span class='op'>=</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
    <span class='id identifier rubyid_make_inner_joins'>make_inner_joins</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_joins'>joins</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='id identifier rubyid_outer_joins'>outer_joins</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_oj'>oj</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span> <span class='id identifier rubyid_oj'>oj</span><span class='period'>.</span><span class='id identifier rubyid_join_root'>join_root</span>
      <span class='id identifier rubyid_walk'>walk</span> <span class='id identifier rubyid_join_root'>join_root</span><span class='comma'>,</span> <span class='id identifier rubyid_oj'>oj</span><span class='period'>.</span><span class='id identifier rubyid_join_root'>join_root</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_oj'>oj</span><span class='period'>.</span><span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
        <span class='id identifier rubyid_make_outer_joins'>make_outer_joins</span> <span class='id identifier rubyid_oj'>oj</span><span class='period'>.</span><span class='id identifier rubyid_join_root'>join_root</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span>
      <span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="reflections-instance_method">
  <h3 class='signature'>
  #<strong>reflections</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


103
104
105</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/associations/join_dependency.rb', line 103</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reflections'>reflections</span>
  <span class='id identifier rubyid_join_root'>join_root</span><span class='period'>.</span><span class='id identifier rubyid_drop'>drop</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:reflection</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.0 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>