<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements &mdash; Rails-4.2.7</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Rails-4.2.7</a> &raquo; 
          <a href='../../../_index.html'>Index (D)</a> &raquo; 
          <a href="../../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
          <a href="../../ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a> &raquo; 
          <a href="../PostgreSQL.html" title="ActiveRecord::ConnectionAdapters::PostgreSQL (module)">PostgreSQL</a> &raquo; 
          <span class='title'>DatabaseStatements</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>

  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <a href="DatabaseStatements/ExplainPrettyPrinter.html" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements::ExplainPrettyPrinter (class)">ExplainPrettyPrinter</a>
    </td>
  </tr>



  <tr>
    <td class='box_1'>Included in:</td>
    <td><a href="../PostgreSQLAdapter.html" title="ActiveRecord::ConnectionAdapters::PostgreSQLAdapter (class)">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter</a>
    </td>
  </tr>

  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L4'>activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb</a></div>  </td>
  </tr>
</table>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='BYTEA_COLUMN_TYPE_OID-constant'>
      BYTEA_COLUMN_TYPE_OID =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>The internal PostgreSQL identifier of the BYTEA data type.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='int'>17</span></pre>
    </dd>
    <dt id='MONEY_COLUMN_TYPE_OID-constant'>
      MONEY_COLUMN_TYPE_OID =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>The internal PostgreSQL identifier of the money data type.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='int'>790</span></pre>
    </dd>
  </dl>





<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#begin_db_transaction-instance_method" title="#begin_db_transaction (instance method)">#<strong>begin_db_transaction</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Begins a transaction.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#begin_isolated_db_transaction-instance_method" title="#begin_isolated_db_transaction (instance method)">#<strong>begin_isolated_db_transaction</strong>(isolation)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#commit_db_transaction-instance_method" title="#commit_db_transaction (instance method)">#<strong>commit_db_transaction</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Commits a transaction.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#create-instance_method" title="#create (instance method)">#<strong>create</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exec_delete-instance_method" title="#exec_delete (instance method)">#<strong>exec_delete</strong>(sql, name = &#39;SQL&#39;, binds = [])  </a>
        (also: #exec_update)
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exec_insert-instance_method" title="#exec_insert (instance method)">#<strong>exec_insert</strong>(sql, name, binds, pk = nil, sequence_name = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exec_query-instance_method" title="#exec_query (instance method)">#<strong>exec_query</strong>(sql, name = &#39;SQL&#39;, binds = [])  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exec_rollback_db_transaction-instance_method" title="#exec_rollback_db_transaction (instance method)">#<strong>exec_rollback_db_transaction</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Aborts a transaction.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exec_update-instance_method" title="#exec_update (instance method)">#<strong>exec_update</strong>(sql, name = &#39;SQL&#39;, binds = [])  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#exec_delete-instance_method" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements#exec_delete (method)">#exec_delete</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#execute-instance_method" title="#execute (instance method)">#<strong>execute</strong>(sql, name = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Executes an SQL statement, returning a PGresult object on success or
raising a PGError exception otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#explain-instance_method" title="#explain (instance method)">#<strong>explain</strong>(arel, binds = [])  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#insert_sql-instance_method" title="#insert_sql (instance method)">#<strong>insert_sql</strong>(sql, name = nil, pk = nil, id_value = nil, sequence_name = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Executes an INSERT query and returns the new record&#39;s ID</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#query-instance_method" title="#query (instance method)">#<strong>query</strong>(sql, name = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Queries the database and returns the results in an Array-like object</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#result_as_array-instance_method" title="#result_as_array (instance method)">#<strong>result_as_array</strong>(res)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>create a 2D array representing the result set</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#select_rows-instance_method" title="#select_rows (instance method)">#<strong>select_rows</strong>(sql, name = nil, binds = [])  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Executes a SELECT query and returns an array of rows.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#select_value-instance_method" title="#select_value (instance method)">#<strong>select_value</strong>(arel, name = nil, binds = [])  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#select_values-instance_method" title="#select_values (instance method)">#<strong>select_values</strong>(arel, name = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sql_for_insert-instance_method" title="#sql_for_insert (instance method)">#<strong>sql_for_insert</strong>(sql, pk, id_value, sequence_name, binds)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#update_sql-instance_method" title="#update_sql (instance method)">#<strong>update_sql</strong>(sql, name = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Executes an UPDATE query and returns the number of affected tuples.</p>
</div>
      </span>
    </li>
  </ul>


<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="begin_db_transaction-instance_method">
  <h3 class='signature first'>
  #<strong>begin_db_transaction</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Begins a transaction.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L211'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


211
212
213</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 211</span>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_db_transaction'>begin_db_transaction</span>
  <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BEGIN</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="begin_isolated_db_transaction-instance_method">
  <h3 class='signature'>
  #<strong>begin_isolated_db_transaction</strong>(isolation)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L215'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


215
216
217
218</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_isolated_db_transaction'>begin_isolated_db_transaction</span><span class='lparen'>(</span><span class='id identifier rubyid_isolation'>isolation</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_begin_db_transaction'>begin_db_transaction</span>
  <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SET TRANSACTION ISOLATION LEVEL </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_transaction_isolation_levels'>transaction_isolation_levels</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_isolation'>isolation</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="commit_db_transaction-instance_method">
  <h3 class='signature'>
  #<strong>commit_db_transaction</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Commits a transaction.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L221'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


221
222
223</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 221</span>

<span class='kw'>def</span> <span class='id identifier rubyid_commit_db_transaction'>commit_db_transaction</span>
  <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>COMMIT</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="create-instance_method">
  <h3 class='signature'>
  #<strong>create</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L93'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


93
94
95</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create'>create</span>
  <span class='kw'>super</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="exec_delete-instance_method">
  <h3 class='signature'>
  #<strong>exec_delete</strong>(sql, name = &#39;SQL&#39;, binds = [])  
  <span class='aliases'>Also known as: <span class='names'><span>exec_update</span></span>
  </span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L172'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


172
173
174</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exec_delete'>exec_delete</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQL</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_execute_and_clear'>execute_and_clear</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_cmd_tuples'>cmd_tuples</span> <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="exec_insert-instance_method">
  <h3 class='signature'>
  #<strong>exec_insert</strong>(sql, name, binds, pk = nil, sequence_name = nil)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L191'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


191
192
193
194
195
196
197
198
199
200
201
202
203</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exec_insert'>exec_insert</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='comma'>,</span> <span class='id identifier rubyid_pk'>pk</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence_name'>sequence_name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_exec_query'>exec_query</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_use_insert_returning?'>use_insert_returning?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pk'>pk</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_sequence_name'>sequence_name</span>
      <span class='id identifier rubyid_table_ref'>table_ref</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_table_ref_from_insert_sql'>extract_table_ref_from_insert_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_sequence_name'>sequence_name</span> <span class='op'>=</span> <span class='id identifier rubyid_default_sequence_name'>default_sequence_name</span><span class='lparen'>(</span><span class='id identifier rubyid_table_ref'>table_ref</span><span class='comma'>,</span> <span class='id identifier rubyid_pk'>pk</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_val'>val</span> <span class='kw'>unless</span> <span class='id identifier rubyid_sequence_name'>sequence_name</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_last_insert_id_result'>last_insert_id_result</span><span class='lparen'>(</span><span class='id identifier rubyid_sequence_name'>sequence_name</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_val'>val</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="exec_query-instance_method">
  <h3 class='signature'>
  #<strong>exec_query</strong>(sql, name = &#39;SQL&#39;, binds = [])  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L159'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


159
160
161
162
163
164
165
166
167
168
169
170</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exec_query'>exec_query</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQL</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_execute_and_clear'>execute_and_clear</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span>
    <span class='id identifier rubyid_types'>types</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_fields'>fields</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span>
    <span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fname'>fname</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='id identifier rubyid_ftype'>ftype</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_ftype'>ftype</span> <span class='id identifier rubyid_i'>i</span>
      <span class='id identifier rubyid_fmod'>fmod</span>  <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_fmod'>fmod</span> <span class='id identifier rubyid_i'>i</span>
      <span class='id identifier rubyid_types'>types</span><span class='lbracket'>[</span><span class='id identifier rubyid_fname'>fname</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_get_oid_type'>get_oid_type</span><span class='lparen'>(</span><span class='id identifier rubyid_ftype'>ftype</span><span class='comma'>,</span> <span class='id identifier rubyid_fmod'>fmod</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='const'><a href="../../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../../Result.html" title="ActiveRecord::Result (class)">Result</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../../Result.html#new-class_method" title="ActiveRecord::Result.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_fields'>fields</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='comma'>,</span> <span class='id identifier rubyid_types'>types</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="exec_rollback_db_transaction-instance_method">
  <h3 class='signature'>
  #<strong>exec_rollback_db_transaction</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Aborts a transaction.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L226'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


226
227
228</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 226</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exec_rollback_db_transaction'>exec_rollback_db_transaction</span>
  <span class='id identifier rubyid_execute'>execute</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ROLLBACK</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="exec_update-instance_method">
  <h3 class='signature'>
  #<strong>exec_update</strong>(sql, name = &#39;SQL&#39;, binds = [])  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#exec_delete-instance_method" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements#exec_delete (method)">#exec_delete</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="execute-instance_method">
  <h3 class='signature'>
  #<strong>execute</strong>(sql, name = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes an SQL statement, returning a PGresult object on success or
raising a PGError exception otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L153'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


153
154
155
156
157</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 153</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='ivar'>@connection</span><span class='period'>.</span><span class='id identifier rubyid_async_exec'>async_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="explain-instance_method">
  <h3 class='signature'>
  #<strong>explain</strong>(arel, binds = [])  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L5'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


5
6
7
8</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_explain'>explain</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXPLAIN </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_sql'>to_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'><a href="DatabaseStatements/ExplainPrettyPrinter.html" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements::ExplainPrettyPrinter (class)">ExplainPrettyPrinter</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_pp'><a href="DatabaseStatements/ExplainPrettyPrinter.html#pp-instance_method" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements::ExplainPrettyPrinter#pp (method)">pp</a></span><span class='lparen'>(</span><span class='id identifier rubyid_exec_query'>exec_query</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EXPLAIN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="insert_sql-instance_method">
  <h3 class='signature'>
  #<strong>insert_sql</strong>(sql, name = nil, pk = nil, id_value = nil, sequence_name = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes an INSERT query and returns the new record&#39;s ID</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L76'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_insert_sql'>insert_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_pk'>pk</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_id_value'>id_value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence_name'>sequence_name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_pk'>pk</span>
    <span class='comment'># Extract the table from the insert sql. Yuck.
</span>    <span class='id identifier rubyid_table_ref'>table_ref</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_table_ref_from_insert_sql'>extract_table_ref_from_insert_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pk'>pk</span> <span class='op'>=</span> <span class='id identifier rubyid_primary_key'>primary_key</span><span class='lparen'>(</span><span class='id identifier rubyid_table_ref'>table_ref</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_table_ref'>table_ref</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_pk'>pk</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_use_insert_returning?'>use_insert_returning?</span>
    <span class='id identifier rubyid_select_value'>select_value</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sql'>sql</span><span class='embexpr_end'>}</span><span class='tstring_content'> RETURNING </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_quote_column_name'>quote_column_name</span><span class='lparen'>(</span><span class='id identifier rubyid_pk'>pk</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_pk'>pk</span>
    <span class='kw'>super</span>
    <span class='id identifier rubyid_last_insert_id_value'>last_insert_id_value</span><span class='lparen'>(</span><span class='id identifier rubyid_sequence_name'>sequence_name</span> <span class='op'>||</span> <span class='id identifier rubyid_default_sequence_name'>default_sequence_name</span><span class='lparen'>(</span><span class='id identifier rubyid_table_ref'>table_ref</span><span class='comma'>,</span> <span class='id identifier rubyid_pk'>pk</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="query-instance_method">
  <h3 class='signature'>
  #<strong>query</strong>(sql, name = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Queries the database and returns the results in an Array-like object</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L145'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


145
146
147
148
149</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_result_as_array'>result_as_array</span> <span class='ivar'>@connection</span><span class='period'>.</span><span class='id identifier rubyid_async_exec'>async_exec</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="result_as_array-instance_method">
  <h3 class='signature'>
  #<strong>result_as_array</strong>(res)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>create a 2D array representing the result set</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L103'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 103</span>

<span class='kw'>def</span> <span class='id identifier rubyid_result_as_array'>result_as_array</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='comment'># check if we have any binary column and if they need escaping
</span>  <span class='id identifier rubyid_ftypes'>ftypes</span> <span class='op'>=</span> <span class='const'><a href="../../../Array.html" title="Array (class)">Array</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_nfields'>nfields</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_ftype'>ftype</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_rows'>rows</span> <span class='kw'>unless</span> <span class='id identifier rubyid_ftypes'>ftypes</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
    <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='const'><a href="#BYTEA_COLUMN_TYPE_OID-constant" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements::BYTEA_COLUMN_TYPE_OID (constant)">BYTEA_COLUMN_TYPE_OID</a></span> <span class='op'>||</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='const'><a href="#MONEY_COLUMN_TYPE_OID-constant" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements::MONEY_COLUMN_TYPE_OID (constant)">MONEY_COLUMN_TYPE_OID</a></span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_typehash'>typehash</span> <span class='op'>=</span> <span class='id identifier rubyid_ftypes'>ftypes</span><span class='period'>.</span><span class='id identifier rubyid_group_by'>group_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='op'>|</span> <span class='id identifier rubyid_type'>type</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_binaries'>binaries</span> <span class='op'>=</span> <span class='id identifier rubyid_typehash'>typehash</span><span class='lbracket'>[</span><span class='const'><a href="#BYTEA_COLUMN_TYPE_OID-constant" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements::BYTEA_COLUMN_TYPE_OID (constant)">BYTEA_COLUMN_TYPE_OID</a></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_monies'>monies</span>   <span class='op'>=</span> <span class='id identifier rubyid_typehash'>typehash</span><span class='lbracket'>[</span><span class='const'><a href="#MONEY_COLUMN_TYPE_OID-constant" title="ActiveRecord::ConnectionAdapters::PostgreSQL::DatabaseStatements::MONEY_COLUMN_TYPE_OID (constant)">MONEY_COLUMN_TYPE_OID</a></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='comment'># unescape string passed BYTEA field (OID == 17)
</span>    <span class='id identifier rubyid_binaries'>binaries</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
      <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_unescape_bytea'>unescape_bytea</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># If this is a money type column and there are any currency symbols,
</span>    <span class='comment'># then strip them off. Indeed it would be prettier to do this in
</span>    <span class='comment'># PostgreSQLColumn.string_to_decimal but would break form input
</span>    <span class='comment'># fields that call value_before_type_cast.
</span>    <span class='id identifier rubyid_monies'>monies</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
      <span class='comment'># Because money output is formatted according to the locale, there are two
</span>      <span class='comment'># cases to consider (note the decimal separators):
</span>      <span class='comment'>#  (1) $12,345,678.12
</span>      <span class='comment'>#  (2) $12.345.678,12
</span>      <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^-?\D[\d,]\.\d{2}$</span><span class='regexp_end'>/</span></span>  <span class='comment'># (1)
</span>        <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^-\d.]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^-?\D[\d.],\d{2}$</span><span class='regexp_end'>/</span></span>  <span class='comment'># (2)
</span>        <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^-\d,]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>,</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="select_rows-instance_method">
  <h3 class='signature'>
  #<strong>select_rows</strong>(sql, name = nil, binds = [])  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes a SELECT query and returns an array of rows. Each row is an array
of field values.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L69'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


69
70
71
72
73</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select_rows'>select_rows</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_execute_and_clear'>execute_and_clear</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="select_value-instance_method">
  <h3 class='signature'>
  #<strong>select_value</strong>(arel, name = nil, binds = [])  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L47'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


47
48
49
50
51
52
53</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select_value'>select_value</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='id identifier rubyid_binds_from_relation'>binds_from_relation</span> <span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span>
  <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='id identifier rubyid_to_sql'>to_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_execute_and_clear'>execute_and_clear</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_getvalue'>getvalue</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_ntuples'>ntuples</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_nfields'>nfields</span> <span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="select_values-instance_method">
  <h3 class='signature'>
  #<strong>select_values</strong>(arel, name = nil)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L55'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


55
56
57
58
59
60
61
62
63
64
65</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select_values'>select_values</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span> <span class='op'>=</span> <span class='id identifier rubyid_binds_from_relation'>binds_from_relation</span> <span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='id identifier rubyid_to_sql'>to_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_arel'>arel</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_execute_and_clear'>execute_and_clear</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_nfields'>nfields</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_column_values'>column_values</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="sql_for_insert-instance_method">
  <h3 class='signature'>
  #<strong>sql_for_insert</strong>(sql, pk, id_value, sequence_name, binds)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L177'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


177
178
179
180
181
182
183
184
185
186
187
188
189</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sql_for_insert'>sql_for_insert</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_pk'>pk</span><span class='comma'>,</span> <span class='id identifier rubyid_id_value'>id_value</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence_name'>sequence_name</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_pk'>pk</span>
    <span class='comment'># Extract the table from the insert sql. Yuck.
</span>    <span class='id identifier rubyid_table_ref'>table_ref</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_table_ref_from_insert_sql'>extract_table_ref_from_insert_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pk'>pk</span> <span class='op'>=</span> <span class='id identifier rubyid_primary_key'>primary_key</span><span class='lparen'>(</span><span class='id identifier rubyid_table_ref'>table_ref</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_table_ref'>table_ref</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_pk'>pk</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_use_insert_returning?'>use_insert_returning?</span>
    <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sql'>sql</span><span class='embexpr_end'>}</span><span class='tstring_content'> RETURNING </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_quote_column_name'>quote_column_name</span><span class='lparen'>(</span><span class='id identifier rubyid_pk'>pk</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='lbracket'>[</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_binds'>binds</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="update_sql-instance_method">
  <h3 class='signature'>
  #<strong>update_sql</strong>(sql, name = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes an UPDATE query and returns the number of affected tuples.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L206'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


206
207
208</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb', line 206</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_sql'>update_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='period'>.</span><span class='id identifier rubyid_cmd_tuples'>cmd_tuples</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>