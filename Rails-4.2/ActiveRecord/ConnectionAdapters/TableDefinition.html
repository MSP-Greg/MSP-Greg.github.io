<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveRecord::ConnectionAdapters::TableDefinition &mdash; Rails-4.2.7</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::ConnectionAdapters::TableDefinition",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Rails-4.2.7</a> &raquo; 
          <a href='../../_index.html'>Index (T)</a> &raquo; 
          <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
          <a href="../ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a> &raquo; 
          <span class='title'>TableDefinition</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: ActiveRecord::ConnectionAdapters::TableDefinition</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      <ul class='fullTree'>
        <li><a href="../../Object.html" title="Object (class)">Object</a></li>
        <li class='next'>ActiveRecord::ConnectionAdapters::TableDefinition</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>


  <tr>
    <td class='box_1'>Includes:</td>
    <td><a href="TimestampDefaultDeprecation.html" title="ActiveRecord::ConnectionAdapters::TimestampDefaultDeprecation (module)">TimestampDefaultDeprecation</a>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Direct Subclasses:</td>
    <td>
      <a href="PostgreSQL/TableDefinition.html" title="ActiveRecord::ConnectionAdapters::PostgreSQL::TableDefinition (class)">PostgreSQL::TableDefinition</a>
    </td>
  </tr>


  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Represents the schema of an SQL table in an abstract way. This class
provides methods for manipulating the schema representation.</p>

<p>Inside migration files, the <code>t</code> object in
<code>create_table</code> is actually of this type:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>SomeMigration</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Migration</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_up'>up</span>
    <span class='id identifier rubyid_create_table'>create_table</span> <span class='symbol'>:foo</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span>  <span class='comment'># =&gt; &quot;ActiveRecord::ConnectionAdapters::TableDefinition&quot;
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_down'>down</span>
    <span class='comment'>#...
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The table definitions The Columns are stored as a ColumnDefinition in the
<code>columns</code> attribute.</p>


  </div>
</div>
<div class="tags">
  
</div>


<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#as-instance_method" title="#as (instance method)">#<strong>as</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#foreign_keys-instance_method" title="#foreign_keys (instance method)">#<strong>foreign_keys</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#indexes-instance_method" title="#indexes (instance method)">#<strong>indexes</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>An array of ColumnDefinition objects, representing the column changes that
have been defined.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#temporary-instance_method" title="#temporary (instance method)">#<strong>temporary</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(types, name, temporary, options, as = nil)  &#x21d2; TableDefinition </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>a new instance of TableDefinition</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a ColumnDefinition for the column with name <code>name</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#belongs_to-instance_method" title="#belongs_to (instance method)">#<strong>belongs_to</strong>(*args)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#references-instance_method" title="ActiveRecord::ConnectionAdapters::TableDefinition#references (method)">#references</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#column-instance_method" title="#column (instance method)">#<strong>column</strong>(name, type, options = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Instantiates a new column for the table.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#columns-instance_method" title="#columns (instance method)">#<strong>columns</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#index-instance_method" title="#index (instance method)">#<strong>index</strong>(column_name, options = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds index options to the indexes hash, keyed by column name This is
primarily used to track indexes that need to be created after the table</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#primary_key-instance_method" title="#primary_key (instance method)">#<strong>primary_key</strong>(name, type = :primary_key, options = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Appends a primary key definition to the table definition.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#references-instance_method" title="#references (instance method)">#<strong>references</strong>(*args)  </a>
        (also: #belongs_to)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds a reference.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#remove_column-instance_method" title="#remove_column (instance method)">#<strong>remove_column</strong>(name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#timestamps-instance_method" title="#timestamps (instance method)">#<strong>timestamps</strong>(*args)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Appends <code>:datetime</code> columns <code>:created_at</code> and
<code>:updated_at</code> to the table.</p>
</div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="TimestampDefaultDeprecation.html" title="ActiveRecord::ConnectionAdapters::TimestampDefaultDeprecation (module)">TimestampDefaultDeprecation</a></h3>
  <p class="inherited"><a href="TimestampDefaultDeprecation.html#emit_warning_if_null_unspecified-instance_method" title="ActiveRecord::ConnectionAdapters::TimestampDefaultDeprecation#emit_warning_if_null_unspecified (method)">#emit_warning_if_null_unspecified</a></p>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(types, name, temporary, options, as = nil)  &#x21d2; <tt><a href="" title="ActiveRecord::ConnectionAdapters::TableDefinition (class)">TableDefinition</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>a new instance of TableDefinition</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


99
100
101
102
103
104
105
106
107
108</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_types'>types</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_temporary'>temporary</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_as'>as</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@columns_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@indexes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@foreign_keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@native</span> <span class='op'>=</span> <span class='id identifier rubyid_types'>types</span>
  <span class='ivar'>@temporary</span> <span class='op'>=</span> <span class='id identifier rubyid_temporary'>temporary</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
  <span class='ivar'>@as</span> <span class='op'>=</span> <span class='id identifier rubyid_as'>as</span>
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="as-instance_method">
  <h3 class='signature first'>
  #<strong>as</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


97</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 97</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:temporary</span><span class='comma'>,</span> <span class='symbol'>:options</span><span class='comma'>,</span> <span class='symbol'>:as</span><span class='comma'>,</span> <span class='symbol'>:foreign_keys</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="foreign_keys-instance_method">
  <h3 class='signature'>
  #<strong>foreign_keys</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


97</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 97</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:temporary</span><span class='comma'>,</span> <span class='symbol'>:options</span><span class='comma'>,</span> <span class='symbol'>:as</span><span class='comma'>,</span> <span class='symbol'>:foreign_keys</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="indexes-instance_method">
  <h3 class='signature'>
  #<strong>indexes</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>An array of ColumnDefinition objects, representing the column changes that
have been defined.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


96</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 96</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:indexes</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="name-instance_method">
  <h3 class='signature'>
  #<strong>name</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


97</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 97</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:temporary</span><span class='comma'>,</span> <span class='symbol'>:options</span><span class='comma'>,</span> <span class='symbol'>:as</span><span class='comma'>,</span> <span class='symbol'>:foreign_keys</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="options-instance_method">
  <h3 class='signature'>
  #<strong>options</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


97</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 97</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:temporary</span><span class='comma'>,</span> <span class='symbol'>:options</span><span class='comma'>,</span> <span class='symbol'>:as</span><span class='comma'>,</span> <span class='symbol'>:foreign_keys</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="temporary-instance_method">
  <h3 class='signature'>
  #<strong>temporary</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


97</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 97</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:temporary</span><span class='comma'>,</span> <span class='symbol'>:options</span><span class='comma'>,</span> <span class='symbol'>:as</span><span class='comma'>,</span> <span class='symbol'>:foreign_keys</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="[]-instance_method">
  <h3 class='signature first'>
  #<strong>[]</strong>(name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a ColumnDefinition for the column with name <code>name</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


119
120
121</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 119</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='ivar'>@columns_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="belongs_to-instance_method">
  <h3 class='signature'>
  #<strong>belongs_to</strong>(*args)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#references-instance_method" title="ActiveRecord::ConnectionAdapters::TableDefinition#references (method)">#references</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="column-instance_method">
  <h3 class='signature'>
  #<strong>column</strong>(name, type, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Instantiates a new column for the table. The <code>type</code> parameter is
normally one of the migrations native types, which is one of the following:
<code>:primary_key</code>, <code>:string</code>, <code>:text</code>,
<code>:integer</code>, <code>:float</code>, <code>:decimal</code>,
<code>:datetime</code>, <code>:time</code>, <code>:date</code>,
<code>:binary</code>, <code>:boolean</code>.</p>

<p>You may use a type not in this list as long as it is supported by your
database (for example, “polygon” in MySQL), but this will not be database
agnostic and should usually be avoided.</p>

<p>Available options are (none of these exists by default):</p>
<ul><li>
<p><code>:limit</code> - Requests a maximum column length. This is number of
characters for <code>:string</code> and <code>:text</code> columns and
number of bytes for <code>:binary</code> and <code>:integer</code> columns.</p>
</li><li>
<p><code>:default</code> - The column&#39;s default value. Use nil for NULL.</p>
</li><li>
<p><code>:null</code> - Allows or disallows <code>NULL</code> values in the
column. This option could have been named <code>:null_allowed</code>.</p>
</li><li>
<p><code>:precision</code> - Specifies the precision for a
<code>:decimal</code> column.</p>
</li><li>
<p><code>:scale</code> - Specifies the scale for a <code>:decimal</code>
column.</p>
</li><li>
<p><code>:index</code> - Create an index for the column. Can be either
<code>true</code> or an options hash.</p>
</li></ul>

<p>Note: The precision is the total number of significant digits and the scale
is the number of digits that can be stored following the decimal point. For
example, the number 123.45 has a precision of 5 and a scale of 2. A decimal
with a precision of 5 and a scale of 2 can range from -999.99 to 999.99.</p>

<p>Please be aware of different RDBMS implementations behavior with
<code>:decimal</code> columns:</p>
<ul><li>
<p>The SQL standard says the default scale should be 0, <code>:scale</code>
&lt;= <code>:precision</code>, and makes no comments about the requirements
of <code>:precision</code>.</p>
</li><li>
<p>MySQL: <code>:precision</code> [1..63], <code>:scale</code> [0..30].
Default is (10,0).</p>
</li><li>
<p>PostgreSQL: <code>:precision</code> [1..infinity], <code>:scale</code>
[0..infinity]. No default.</p>
</li><li>
<p>SQLite2: Any <code>:precision</code> and <code>:scale</code> may be used.
Internal storage as strings. No default.</p>
</li><li>
<p>SQLite3: No restrictions on <code>:precision</code> and
<code>:scale</code>, but the maximum supported <code>:precision</code> is
16. No default.</p>
</li><li>
<p>Oracle: <code>:precision</code> [1..38], <code>:scale</code> [-84..127].
Default is (38,0).</p>
</li><li>
<p>DB2: <code>:precision</code> [1..63], <code>:scale</code> [0..62]. Default
unknown.</p>
</li><li>
<p>SqlServer?: <code>:precision</code> [1..38], <code>:scale</code> [0..38].
Default (38,0).</p>
</li></ul>

<p>This method returns <code>self</code>.</p>

<h2 id="label-Examples">Examples</h2>

<pre class="code ruby"><code class="ruby"><span class='comment'># Assuming &lt;code&gt;td&lt;/code&gt; is an instance of TableDefinition
</span><span class='id identifier rubyid_td'>td</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:granted</span><span class='comma'>,</span> <span class='symbol'>:boolean</span><span class='rparen'>)</span>
<span class='comment'># granted BOOLEAN
</span>
<span class='id identifier rubyid_td'>td</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:picture</span><span class='comma'>,</span> <span class='symbol'>:binary</span><span class='comma'>,</span> <span class='label'>limit:</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_megabytes'>megabytes</span><span class='rparen'>)</span>
<span class='comment'># =&gt; picture BLOB(2097152)
</span>
<span class='id identifier rubyid_td'>td</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:sales_stage</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='label'>limit:</span> <span class='int'>20</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>new</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>null:</span> <span class='kw'>false</span><span class='rparen'>)</span>
<span class='comment'># =&gt; sales_stage VARCHAR(20) DEFAULT &#39;new&#39; NOT NULL
</span>
<span class='id identifier rubyid_td'>td</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:bill_gates_money</span><span class='comma'>,</span> <span class='symbol'>:decimal</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>15</span><span class='comma'>,</span> <span class='label'>scale:</span> <span class='int'>2</span><span class='rparen'>)</span>
<span class='comment'># =&gt; bill_gates_money DECIMAL(15,2)
</span>
<span class='id identifier rubyid_td'>td</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:sensor_reading</span><span class='comma'>,</span> <span class='symbol'>:decimal</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>30</span><span class='comma'>,</span> <span class='label'>scale:</span> <span class='int'>20</span><span class='rparen'>)</span>
<span class='comment'># =&gt; sensor_reading DECIMAL(30,20)
</span>
<span class='comment'># While &lt;tt&gt;:scale&lt;/tt&gt; defaults to zero on most databases, it
</span><span class='comment'># probably wouldn&#39;t hurt to include it.
</span><span class='id identifier rubyid_td'>td</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:huge_integer</span><span class='comma'>,</span> <span class='symbol'>:decimal</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>30</span><span class='rparen'>)</span>
<span class='comment'># =&gt; huge_integer DECIMAL(30)
</span>
<span class='comment'># Defines a column with a database-specific type.
</span><span class='id identifier rubyid_td'>td</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:foo</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>polygon</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'># =&gt; foo polygon
</span></code></pre>

<h2 id="label-Short-hand+examples">Short-hand examples</h2>

<p>Instead of calling <code>column</code> directly, you can also work with the
short-hand definitions for the default types. They use the type as the
method name instead of as a parameter and allow for multiple columns to be
defined in a single statement.</p>

<p>What can be written like this with the regular calls to column:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_table'>create_table</span> <span class='symbol'>:products</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:shop_id</span><span class='comma'>,</span>     <span class='symbol'>:integer</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:creator_id</span><span class='comma'>,</span>  <span class='symbol'>:integer</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:item_number</span><span class='comma'>,</span> <span class='symbol'>:string</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:name</span><span class='comma'>,</span>        <span class='symbol'>:string</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Untitled</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:value</span><span class='comma'>,</span>       <span class='symbol'>:string</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Untitled</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:created_at</span><span class='comma'>,</span>  <span class='symbol'>:datetime</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:updated_at</span><span class='comma'>,</span>  <span class='symbol'>:datetime</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_add_index'>add_index</span> <span class='symbol'>:products</span><span class='comma'>,</span> <span class='symbol'>:item_number</span>
</code></pre>

<p>can also be written as follows using the short-hand:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_table'>create_table</span> <span class='symbol'>:products</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_integer'>integer</span> <span class='symbol'>:shop_id</span><span class='comma'>,</span> <span class='symbol'>:creator_id</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>  <span class='symbol'>:item_number</span><span class='comma'>,</span> <span class='label'>index:</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>  <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:value</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Untitled</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_timestamps'>timestamps</span> <span class='label'>null:</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</code></pre>

<p>There&#39;s a short-hand method for each of the type values declared at the
top. And then there&#39;s <a href="#timestamps-instance_method" title="ActiveRecord::ConnectionAdapters::TableDefinition#timestamps (method)">#timestamps</a> that&#39;ll add
<code>created_at</code> and <code>updated_at</code> as datetimes.</p>

<p><a href="#references-instance_method" title="ActiveRecord::ConnectionAdapters::TableDefinition#references (method)">#references</a> will add an appropriately-named _id column,
plus a corresponding _type column if the <code>:polymorphic</code> option
is supplied. If <code>:polymorphic</code> is a hash of options, these will
be used when creating the <code>_type</code> column. The
<code>:index</code> option will also create an index, similar to calling
<code>add_index</code>. So what can be written like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_table'>create_table</span> <span class='symbol'>:taggings</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_integer'>integer</span> <span class='symbol'>:tag_id</span><span class='comma'>,</span> <span class='symbol'>:tagger_id</span><span class='comma'>,</span> <span class='symbol'>:taggable_id</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>  <span class='symbol'>:tagger_type</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>  <span class='symbol'>:taggable_type</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Photo</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_add_index'>add_index</span> <span class='symbol'>:taggings</span><span class='comma'>,</span> <span class='symbol'>:tag_id</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index_taggings_on_tag_id</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_add_index'>add_index</span> <span class='symbol'>:taggings</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:tagger_id</span><span class='comma'>,</span> <span class='symbol'>:tagger_type</span><span class='rbracket'>]</span>
</code></pre>

<p>Can also be written as follows using references:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_create_table'>create_table</span> <span class='symbol'>:taggings</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_references'>references</span> <span class='symbol'>:tag</span><span class='comma'>,</span> <span class='label'>index:</span> <span class='lbrace'>{</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index_taggings_on_tag_id</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_references'>references</span> <span class='symbol'>:tagger</span><span class='comma'>,</span> <span class='label'>polymorphic:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>index:</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_references'>references</span> <span class='symbol'>:taggable</span><span class='comma'>,</span> <span class='label'>polymorphic:</span> <span class='lbrace'>{</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Photo</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


256
257
258
259
260
261
262
263
264
265
266
267
268
269</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 256</span>

<span class='kw'>def</span> <span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='kw'>if</span> <span class='ivar'>@columns_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@columns_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_primary_key?'>primary_key?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>you can&#39;t redefine the primary key column &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;. To define a custom primary key, pass { id: false } to create_table.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_index_options'>index_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:index</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_index_options'>index_options</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_index_options'>index_options</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_index_options'>index_options</span>
  <span class='ivar'>@columns_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_new_column_definition'>new_column_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="columns-instance_method">
  <h3 class='signature'>
  #<strong>columns</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


110</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_columns'>columns</span><span class='semicolon'>;</span> <span class='ivar'>@columns_hash</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="index-instance_method">
  <h3 class='signature'>
  #<strong>index</strong>(column_name, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds index options to the indexes hash, keyed by column name This is
primarily used to track indexes that need to be created after the table</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='symbol'>:account_id</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index_projects_on_account_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


287
288
289</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 287</span>

<span class='kw'>def</span> <span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_column_name'>column_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_indexes'>indexes</span><span class='lbracket'>[</span><span class='id identifier rubyid_column_name'>column_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="primary_key-instance_method">
  <h3 class='signature'>
  #<strong>primary_key</strong>(name, type = :primary_key, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Appends a primary key definition to the table definition. Can be called
multiple times, but this is probably not a good idea.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


114
115
116</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_primary_key'>primary_key</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='symbol'>:primary_key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:primary_key</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="references-instance_method">
  <h3 class='signature'>
  #<strong>references</strong>(*args)  
  <span class='aliases'>Also known as: <span class='names'><span>belongs_to</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds a reference.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_references'>references</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span>
<span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_belongs_to'>belongs_to</span><span class='lparen'>(</span><span class='symbol'>:supplier</span><span class='comma'>,</span> <span class='label'>foreign_key:</span> <span class='kw'>true</span><span class='rparen'>)</span>
</code></pre>

<p>See <a href="SchemaStatements.html#add_reference-instance_method" title="ActiveRecord::ConnectionAdapters::SchemaStatements#add_reference (method)">SchemaStatements#add_reference</a> for details of the options you can
use.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 312</span>

<span class='kw'>def</span> <span class='id identifier rubyid_references'>references</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_extract_options!'>extract_options!</span>
  <span class='id identifier rubyid_polymorphic'>polymorphic</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:polymorphic</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_index_options'>index_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:index</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_foreign_key_options'>foreign_key_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:foreign_key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:type</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='symbol'>:integer</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_polymorphic'>polymorphic</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_foreign_key_options'>foreign_key_options</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot add a foreign key on a polymorphic relation</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_col'>col</span><span class='op'>|</span>
    <span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_col'>col</span><span class='embexpr_end'>}</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_col'>col</span><span class='embexpr_end'>}</span><span class='tstring_content'>_type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='id identifier rubyid_polymorphic'>polymorphic</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_polymorphic'>polymorphic</span> <span class='op'>:</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_polymorphic'>polymorphic</span>
    <span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_polymorphic'>polymorphic</span> <span class='op'>?</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>type</span><span class='words_sep'> </span><span class='tstring_content'>id</span><span class='words_sep'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_col'>col</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_col'>col</span><span class='embexpr_end'>}</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_index_options'>index_options</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_index_options'>index_options</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_index_options'>index_options</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_foreign_key_options'>foreign_key_options</span>
      <span class='id identifier rubyid_to_table'>to_table</span> <span class='op'>=</span> <span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_pluralize_table_names'>pluralize_table_names</span> <span class='op'>?</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_pluralize'>pluralize</span> <span class='op'>:</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='id identifier rubyid_foreign_key'>foreign_key</span><span class='lparen'>(</span><span class='id identifier rubyid_to_table'>to_table</span><span class='comma'>,</span> <span class='id identifier rubyid_foreign_key_options'>foreign_key_options</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_foreign_key_options'>foreign_key_options</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="remove_column-instance_method">
  <h3 class='signature'>
  #<strong>remove_column</strong>(name)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


271
272
273</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_column'>remove_column</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='ivar'>@columns_hash</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="timestamps-instance_method">
  <h3 class='signature'>
  #<strong>timestamps</strong>(*args)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Appends <code>:datetime</code> columns <code>:created_at</code> and
<code>:updated_at</code> to the table. See
<a href="SchemaStatements.html#add_timestamps-instance_method" title="ActiveRecord::ConnectionAdapters::SchemaStatements#add_timestamps (method)">SchemaStatements#add_timestamps</a></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_timestamps'>timestamps</span> <span class='label'>null:</span> <span class='kw'>false</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


299
300
301
302
303
304</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timestamps'>timestamps</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_extract_options!'>extract_options!</span>
  <span class='id identifier rubyid_emit_warning_if_null_unspecified'>emit_warning_if_null_unspecified</span><span class='lparen'>(</span><span class='symbol'>:timestamps</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:created_at</span><span class='comma'>,</span> <span class='symbol'>:datetime</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_column'>column</span><span class='lparen'>(</span><span class='symbol'>:updated_at</span><span class='comma'>,</span> <span class='symbol'>:datetime</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.0 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>