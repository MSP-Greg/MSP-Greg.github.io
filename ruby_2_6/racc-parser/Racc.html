<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Racc &mdash; racc/parser  Ruby-2.6.10 p210</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Racc",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-2.6.10</a> &raquo; 
      <a href='.'>racc/parser</a> &raquo; 
      <a href='_index.html#alpha_R'>Index (R)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Racc&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Racc</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Racc/Parser.html" title="Racc::Parser (class)"><code>Parser</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="Racc/ParseError.html" title="Racc::ParseError (class)"><code>ParseError</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v2_6_10/lib/racc/parser.rb#L15'>lib/racc/parser.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v2_6_10/lib/racc/parser.rb#L176'>lib/racc/parser.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>Racc</code> is a LALR(1) parser generator. It is written in Ruby itself, and generates Ruby programs.</p>

<h3 id="label-Command-line+Reference">Command-line Reference</h3>

<pre class="code ruby"><code class="ruby">racc [-o&lt;var&gt;filename&lt;/var&gt;] [--output-file=&lt;var&gt;filename&lt;/var&gt;]
     [-e&lt;var&gt;rubypath&lt;/var&gt;] [--embedded=&lt;var&gt;rubypath&lt;/var&gt;]
     [-v] [--verbose]
     [-O&lt;var&gt;filename&lt;/var&gt;] [--log-file=&lt;var&gt;filename&lt;/var&gt;]
     [-g] [--debug]
     [-E] [--embedded]
     [-l] [--no-line-convert]
     [-c] [--line-convert-all]
     [-a] [--no-omit-actions]
     [-C] [--check-only]
     [-S] [--output-status]
     [--version] [--copyright] [--help] &lt;var&gt;grammarfile&lt;/var&gt;</code></pre>
<dl class="rdoc-list label-list"><dt><code>filename</code>
<dd>
<p>Racc grammar file. Any extension is permitted.</p>
</dd><dt>-o+outfile+, –output-file=<code>outfile</code>
<dd>
<p>A filename for output. default is &lt;<code>filename</code>&gt;.tab.rb</p>
</dd><dt>-O+filename+, –log-file=<code>filename</code>
<dd>
<p>Place logging output in file <code>filename</code>. Default log file name is &lt;<code>filename</code>&gt;.output.</p>
</dd><dt>-e+rubypath+, –executable=<code>rubypath</code>
<dd>
<p>output executable file(mode 755). where <code>path</code> is the Ruby interpreter.</p>
</dd><dt>-v, –verbose
<dd>
<p>verbose mode. create <code>filename</code>.output file, like yacc’s y.output file.</p>
</dd><dt>-g, –debug
<dd>
<p>add debug code to parser class. To display debugging information, use this ‘-g’ option and set @yydebug true in parser class.</p>
</dd><dt>-E, –embedded
<dd>
<p>Output parser which doesn’t need runtime files (racc/parser.rb).</p>
</dd><dt>-C, –check-only
<dd>
<p>Check syntax of racc grammar file and quit.</p>
</dd><dt>-S, –output-status
<dd>
<p>Print messages time to time while compiling.</p>
</dd><dt>-l, –no-line-convert
<dd>
<p>turns off line number converting.</p>
</dd><dt>-c, –line-convert-all
<dd>
<p>Convert line number of actions, inner, header and footer.</p>
</dd><dt>-a, –no-omit-actions
<dd>
<p>Call all actions, even if an action is empty.</p>
</dd><dt>–version
<dd>
<p>print Racc version and quit.</p>
</dd><dt>–copyright
<dd>
<p>Print copyright and quit.</p>
</dd><dt>–help
<dd>
<p>Print usage and quit.</p>
</dd></dl>

<h3 id="label-Generating+Parser+Using+Racc">Generating Parser Using Racc</h3>

<p>To compile <code>Racc</code> grammar file, simply type:</p>

<pre class="code ruby"><code class="ruby">$ racc parse.y</code></pre>

<p>This creates Ruby script file “parse.tab.y”. The -o option can change the output filename.</p>

<h3 id="label-Writing+A+Racc+Grammar+File">Writing A Racc Grammar File</h3>

<p>If you want your own parser, you have to write a grammar file. A grammar file contains the name of your parser class, grammar for the parser, user code, and anything else. When writing a grammar file, yacc’s knowledge is helpful. If you have not used yacc before, <code>Racc</code> is not too difficult.</p>

<p>Here’s an example <code>Racc</code> grammar file.</p>

<pre class="code ruby"><code class="ruby">class Calcparser
rule
  target: exp { print val[0] }

  exp: exp &#39;+&#39; exp
     | exp &#39;*&#39; exp
     | &#39;(&#39; exp &#39;)&#39;
     | NUMBER
end</code></pre>

<p><code>Racc</code> grammar files resemble yacc files. But (of course), this is Ruby code. yacc’s $$ is the ‘result’, $0, $1… is an array called ‘val’, and $-1, $-2… is an array called ‘_values’.</p>

<p>See the <code>Grammar File Reference</code> for more information on grammar files.</p>

<h3 id="label-Parser">Parser</h3>

<p>Then you must prepare the parse entry method. There are two types of parse methods in <code>Racc</code>, <a href="Racc/Parser.html#do_parse-instance_method" title="Racc::Parser#do_parse (method)">Parser#do_parse</a> and <a href="Racc/Parser.html#yyparse-instance_method" title="Racc::Parser#yyparse (method)">Parser#yyparse</a></p>

<p><a href="Racc/Parser.html#do_parse-instance_method" title="Racc::Parser#do_parse (method)">Parser#do_parse</a> is simple.</p>

<p>It’s yyparse() of yacc, and <a href="Racc/Parser.html#next_token-instance_method" title="Racc::Parser#next_token (method)">Parser#next_token</a> is yylex(). This method must returns an array like [TOKENSYMBOL, ITS_VALUE]. EOF is [false, false]. (TOKENSYMBOL is a Ruby symbol (taken from <code>String#intern</code>) by default. If you want to change this, see the grammar reference.</p>

<p><a href="Racc/Parser.html#yyparse-instance_method" title="Racc::Parser#yyparse (method)">Parser#yyparse</a> is little complicated, but useful. It does not use <a href="Racc/Parser.html#next_token-instance_method" title="Racc::Parser#next_token (method)">Parser#next_token</a>, instead it gets tokens from any iterator.</p>

<p>For example, <code>yyparse(obj, :scan)</code> causes calling <tt>obj#scan</tt>, and you can return tokens by yielding them from <tt>obj#scan</tt>.</p>

<h3 id="label-Debugging">Debugging</h3>

<p>When debugging, “-v” or/and the “-g” option is helpful.</p>

<p>“-v” creates verbose log file (.output). “-g” creates a “Verbose Parser”. Verbose Parser prints the internal status when parsing. But it’s <em>not</em> automatic. You must use -g option and set <tt>@yydebug</tt> to <code>true</code> in order to get output. -g option only creates the verbose parser.</p>

<h4 id="label-Racc+reported+syntax+error.">Racc reported syntax error.</h4>

<p>Isn’t there too many “end”? grammar of racc file is changed in v0.10.</p>

<p><code>Racc</code> does not use ‘%’ mark, while yacc uses huge number of ‘%’ marks..</p>

<h4 id="label-Racc+reported+-22XXXX+conflicts-22.">Racc reported “XXXX conflicts”.</h4>

<p>Try “racc -v xxxx.y”. It causes producing racc’s internal log file, xxxx.output.</p>

<h4 id="label-Generated+parsers+does+not+work+correctly">Generated parsers does not work correctly</h4>

<p>Try “racc -g xxxx.y”. This command let racc generate “debugging parser”. Then set @yydebug=true in your parser. It produces a working log of your parser.</p>

<h3 id="label-Re-distributing+Racc+runtime">Re-distributing Racc runtime</h3>

<p>A parser, which is created by <code>Racc</code>, requires the <code>Racc</code> runtime module; racc/parser.rb.</p>

<p>Ruby 1.8.x comes with <code>Racc</code> runtime module, you need NOT distribute <code>Racc</code> runtime files.</p>

<p>If you want to include the <code>Racc</code> runtime module with your parser. This can be done by using ‘-E’ option:</p>

<pre class="code ruby"><code class="ruby">$ racc -E -omyparser.rb myparser.y</code></pre>

<p>This command creates myparser.rb which ‘includes’ <code>Racc</code> runtime. Only you must do is to distribute your parser file (myparser.rb).</p>

<p>Note: parser.rb is LGPL, but your parser is not. Your own parser is completely yours.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='Racc_No_Extensions-constant' class='summary_signature nodoc'>Racc_No_Extensions =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_6_10/lib/racc/parser.rb#L179-L179'># File 'lib/racc/parser.rb', line 179</a>    <pre class='code ruby'><span class='kw'>false</span></pre>
  </li>
</ul>
</div>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>