<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Sinatra::Reloader::ExtensionMethods &mdash; Sinatra main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Sinatra::Reloader::ExtensionMethods",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Sinatra main</a> &raquo; 
      <a href='../../_index.html#alpha_E'>Index (E)</a> &raquo; 
        <a href="../../Sinatra.html" title="Sinatra (module)">Sinatra</a> &raquo; 
        <a href="../Reloader.html" title="Sinatra::Reloader (module)">Reloader</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ExtensionMethods&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Sinatra::Reloader::ExtensionMethods</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L360'>sinatra-contrib/lib/sinatra/reloader.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    <p>Contains the methods that the extension adds to the <a href="../../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> application.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#registering_extension%3F-instance_method" title="#registering_extension? (instance method)">#<strong>registering_extension?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates whether or not an extension is being registered.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#also_reload-instance_method" title="#also_reload (instance method)">#<strong>also_reload</strong>(*glob)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates with a <code>glob</code> which files should be reloaded if they have been modified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#deactivate-instance_method" title="#deactivate (instance method)">#<strong>deactivate</strong>(element)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the <code>element</code> from the <a href="../../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> application.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dont_reload-instance_method" title="#dont_reload (instance method)">#<strong>dont_reload</strong>(*glob)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates with a <code>glob</code> which files should not be reloaded even if they have been modified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#register_path-instance_method" title="#register_path (instance method)">#<strong>register_path</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>attr_reader <code>:register_path</code> warn on -w (private attribute).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#start_registering_extension-instance_method" title="#start_registering_extension (instance method)">#<strong>start_registering_extension</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates an extension is being registered.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#stop_registering_extension-instance_method" title="#stop_registering_extension (instance method)">#<strong>stop_registering_extension</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates the extension has already been registered.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#watch_element-instance_method" title="#watch_element (instance method)">#<strong>watch_element</strong>(path, type, representation = nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Builds a <a href="Watcher/Element.html" title="Sinatra::Reloader::Watcher::Element (class)"><code>Watcher::Element</code></a> from <code>type</code> and <code>representation</code> and tells the <a href="Watcher/List.html" title="Sinatra::Reloader::Watcher::List (class)"><code>Watcher::List</code></a> for the current application to watch it in the file located at <code>path</code>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="registering_extension?-instance_method">
  <h3 class='signature ro priv first'>
    #<strong>registering_extension?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Indicates whether or not an extension is being registered.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L409-L411'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='409' data-end='411'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 409</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_registering_extension?'>registering_extension?</span>
  <span class='op'>!</span><span class='id identifier rubyid_register_path'><a href="#register_path-instance_method" title="Sinatra::Reloader::ExtensionMethods#register_path (method)">register_path</a></span>.<span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="also_reload-instance_method">
  <h3 class='signature  first'>
    #<strong>also_reload</strong>(*glob)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Indicates with a <code>glob</code> which files should be reloaded if they
have been modified.  It can be called several times.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L383-L385'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='383' data-end='385'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 383</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_also_reload'>also_reload</span>(<span class='op'>*</span><span class='id identifier rubyid_glob'>glob</span>)
  <span class='const'>Dir</span>[<span class='op'>*</span><span class='id identifier rubyid_glob'>glob</span>].<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span> <span class='const'><a href="Watcher.html" title="Sinatra::Reloader::Watcher (class)">Watcher</a></span><span class='op'>::</span><span class='const'><a href="Watcher/List.html" title="Sinatra::Reloader::Watcher::List (class)">List</a></span>.<span class='id identifier rubyid_for'><a href="Watcher/List.html#for-class_method" title="Sinatra::Reloader::Watcher::List.for (method)">for</a></span>(<span class='kw'>self</span>).<span class='id identifier rubyid_watch_file'>watch_file</span>(<span class='id identifier rubyid_path'>path</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deactivate-instance_method">
  <h3 class='signature '>
    #<strong>deactivate</strong>(element)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Removes the <code>element</code> from the <a href="../../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> application.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L362-L379'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='362' data-end='379'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 362</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deactivate'>deactivate</span>(<span class='id identifier rubyid_element'>element</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_type'>type</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_route'>route</span>
    <span class='id identifier rubyid_verb'>verb</span>      <span class='op'>=</span> <span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_representation'>representation</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_verb'>verb</span>]
    <span class='id identifier rubyid_signature'>signature</span> <span class='op'>=</span> <span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_representation'>representation</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_signature'>signature</span>]
    (<span class='id identifier rubyid_routes'>routes</span>[<span class='id identifier rubyid_verb'>verb</span>] <span class='op'>||=</span> []).<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_signature'>signature</span>)
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_middleware'>middleware</span>
    <span class='ivar'>@middleware</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_representation'>representation</span>)
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_before_filter'>before_filter</span>
    <span class='id identifier rubyid_filters'>filters</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_before'>before</span>].<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_representation'>representation</span>)
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_after_filter'>after_filter</span>
    <span class='id identifier rubyid_filters'>filters</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_after'>after</span>].<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_representation'>representation</span>)
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span>
    <span class='id identifier rubyid_code'>code</span>    <span class='op'>=</span> <span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_representation'>representation</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_code'>code</span>]
    <span class='id identifier rubyid_handler'>handler</span> <span class='op'>=</span> <span class='id identifier rubyid_element'>element</span>.<span class='id identifier rubyid_representation'>representation</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_handler'>handler</span>]
    <span class='ivar'>@errors</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_code'>code</span>) <span class='kw'>if</span> <span class='ivar'>@errors</span>[<span class='id identifier rubyid_code'>code</span>] <span class='op'>==</span> <span class='id identifier rubyid_handler'>handler</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dont_reload-instance_method">
  <h3 class='signature '>
    #<strong>dont_reload</strong>(*glob)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Indicates with a <code>glob</code> which files should not be reloaded even if
they have been modified.  It can be called several times.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L389-L391'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='389' data-end='391'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 389</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dont_reload'>dont_reload</span>(<span class='op'>*</span><span class='id identifier rubyid_glob'>glob</span>)
  <span class='const'>Dir</span>[<span class='op'>*</span><span class='id identifier rubyid_glob'>glob</span>].<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span> <span class='const'><a href="Watcher.html" title="Sinatra::Reloader::Watcher (class)">Watcher</a></span><span class='op'>::</span><span class='const'><a href="Watcher/List.html" title="Sinatra::Reloader::Watcher::List (class)">List</a></span>.<span class='id identifier rubyid_for'><a href="Watcher/List.html#for-class_method" title="Sinatra::Reloader::Watcher::List.for (method)">for</a></span>(<span class='kw'>self</span>).<span class='id identifier rubyid_ignore'>ignore</span>(<span class='id identifier rubyid_path'>path</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="register_path-instance_method">
  <h3 class='signature priv'>
    #<strong>register_path</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>attr_reader <code>:register_path</code> warn on -w (private attribute)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L396-L396'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='396' data-end='396'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 396</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_register_path'>register_path</span><span class='semicolon'>;</span> <span class='ivar'>@register_path</span> <span class='op'>||=</span> <span class='kw'>nil</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start_registering_extension-instance_method">
  <h3 class='signature priv'>
    #<strong>start_registering_extension</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Indicates an extension is being registered.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L399-L401'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='399' data-end='401'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 399</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_registering_extension'>start_registering_extension</span>
  <span class='ivar'>@register_path</span> <span class='op'>=</span> <span class='id identifier rubyid_caller_files'>caller_files</span>[<span class='int'>2</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stop_registering_extension-instance_method">
  <h3 class='signature priv'>
    #<strong>stop_registering_extension</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Indicates the extension has already been registered.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L404-L406'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='404' data-end='406'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 404</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stop_registering_extension'>stop_registering_extension</span>
  <span class='ivar'>@register_path</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="watch_element-instance_method">
  <h3 class='signature priv'>
    #<strong>watch_element</strong>(path, type, representation = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Builds a <a href="Watcher/Element.html" title="Sinatra::Reloader::Watcher::Element (class)"><code>Watcher::Element</code></a> from <code>type</code> and <code>representation</code> and
tells the <a href="Watcher/List.html" title="Sinatra::Reloader::Watcher::List (class)"><code>Watcher::List</code></a> for the current application to watch it
in the file located at <code>path</code>.</p>

<p>If an extension is being registered, it also tells the list to
watch it in the file where the extension has been registered.
This prevents the duplication of the elements added by the
extension in its <a href="../Reloader.html#registered-class_method" title="Sinatra::Reloader.registered (method)">Sinatra::Reloader.registered</a> method with every reload.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/reloader.rb#L421-L426'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='421' data-end='426'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/reloader.rb', line 421</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_watch_element'>watch_element</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_representation'>representation</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_list'>list</span> <span class='op'>=</span> <span class='const'><a href="Watcher.html" title="Sinatra::Reloader::Watcher (class)">Watcher</a></span><span class='op'>::</span><span class='const'><a href="Watcher/List.html" title="Sinatra::Reloader::Watcher::List (class)">List</a></span>.<span class='id identifier rubyid_for'><a href="Watcher/List.html#for-class_method" title="Sinatra::Reloader::Watcher::List.for (method)">for</a></span>(<span class='kw'>self</span>)
  <span class='id identifier rubyid_element'>element</span> <span class='op'>=</span> <span class='const'><a href="Watcher.html" title="Sinatra::Reloader::Watcher (class)">Watcher</a></span><span class='op'>::</span><span class='const'><a href="Watcher/Element.html" title="Sinatra::Reloader::Watcher::Element (class)">Element</a></span>.<span class='id identifier rubyid_new'><a href="Watcher.html#new-class_method" title="Sinatra::Reloader::Watcher.new (method)">new</a></span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_representation'>representation</span>)
  <span class='id identifier rubyid_list'>list</span>.<span class='id identifier rubyid_watch'>watch</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_element'>element</span>)
  <span class='id identifier rubyid_list'>list</span>.<span class='id identifier rubyid_watch'>watch</span>(<span class='id identifier rubyid_register_path'><a href="#register_path-instance_method" title="Sinatra::Reloader::ExtensionMethods#register_path (method)">register_path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_element'>element</span>) <span class='kw'>if</span> <span class='id identifier rubyid_registering_extension?'><a href="#registering_extension%3F-instance_method" title="Sinatra::Reloader::ExtensionMethods#registering_extension? (method)">registering_extension?</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>