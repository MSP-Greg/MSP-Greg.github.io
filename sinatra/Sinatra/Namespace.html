<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Sinatra::Namespace &mdash; Sinatra main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Sinatra::Namespace",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Sinatra main</a> &raquo; 
      <a href='../_index.html#alpha_N'>Index (N)</a> &raquo; 
        <a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Namespace&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Sinatra::Namespace</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="Namespace/BaseMethods.html" title="Sinatra::Namespace::BaseMethods (module)"><code>BaseMethods</code></a>,
        <a href="Namespace/InstanceMethods.html" title="Sinatra::Namespace::InstanceMethods (module)"><code>InstanceMethods</code></a>,
        <a href="Namespace/NamespacedMethods.html" title="Sinatra::Namespace::NamespacedMethods (module)"><code>NamespacedMethods</code></a>,
        <a href="Namespace/SharedMethods.html" title="Sinatra::Namespace::SharedMethods (module)"><code>SharedMethods</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/namespace.rb#L188'>sinatra-contrib/lib/sinatra/namespace.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    <p><tt>Sinatra::Namespace</tt> is an extension that adds namespaces to an
application.  This namespaces will allow you to share a path prefix for the
routes within the namespace, and define filters, conditions and error
handlers exclusively for them.  Besides that, you can also register helpers
and extensions that will be used only within the namespace.</p>

<h3>Usage</h3>

<p>Once you have loaded the extension (see below), you can use the <code>namespace</code>
method to define namespaces in your application.</p>

<p>You can define a namespace by a path prefix:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/blog</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> { <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blog'>blog</span> }
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/:entry_permalink</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
    <span class='ivar'>@entry</span> <span class='op'>=</span> <span class='const'>Entry</span>.<span class='id identifier rubyid_find_by_permalink!'>find_by_permalink!</span>(<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_entry_permalink'>entry_permalink</span>])
    <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_entry'>entry</span>
  <span class='kw'>end</span>

  <span class='comment'># More blog routes...
</span><span class='kw'>end</span></code></pre>

<p>by a condition:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='symbeg'>:</span><span class='id identifier rubyid_host_name'>host_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin/dashboard</span><span class='tstring_end'>&#39;</span></span>) { <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dashboard'>dashboard</span> }
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin/login</span><span class='tstring_end'>&#39;</span></span>)     { <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_login'>login</span> }

  <span class='comment'># More admin routes...
</span><span class='kw'>end</span></code></pre>

<p>or both:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_host_name'>host_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/dashboard</span><span class='tstring_end'>&#39;</span></span>)  { <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dashboard'>dashboard</span> }
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>)      { <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_login'>login</span> }
  <span class='id identifier rubyid_post'><a href="Delegator.html#post-instance_method" title="Sinatra::Delegator#post (method)">post</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>)     { <span class='id identifier rubyid_login_user'>login_user</span> }

  <span class='comment'># More admin routes...
</span><span class='kw'>end</span></code></pre>

<p>Regex is also accepted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/posts\/([^\/&amp;?]+)\/</span><span class='regexp_end'>/</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> { <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blog'>blog</span> }

  <span class='comment'># More blog routes...
</span><span class='kw'>end</span></code></pre>

<p>When you define a filter or an error handler, or register an extension or a
set of helpers within a namespace, they only affect the routes defined in
it.  For instance, lets define a before filter to prevent the access of
unauthorized users to the admin section of the application:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_helpers'><a href="Delegator.html#helpers-instance_method" title="Sinatra::Delegator#helpers (method)">helpers</a></span> <span class='const'>AdminHelpers</span>
  <span class='id identifier rubyid_before'><a href="Delegator.html#before-instance_method" title="Sinatra::Delegator#before (method)">before</a></span>  { <span class='id identifier rubyid_authenticate'>authenticate</span> <span class='kw'>unless</span> <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_path_info'>path_info</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin/login</span><span class='tstring_end'>&#39;</span></span> }

  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/dashboard</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
    <span class='comment'># Only authenticated users can access here...
</span>    <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dashboard'>dashboard</span>
  <span class='kw'>end</span>

  <span class='comment'># More admin routes...
</span><span class='kw'>end</span>

<span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='comment'># Any user can access here...
</span>  <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_index'>index</span>
<span class='kw'>end</span></code></pre>

<p>Well, they actually also affect the nested namespaces:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_helpers'><a href="Delegator.html#helpers-instance_method" title="Sinatra::Delegator#helpers (method)">helpers</a></span> <span class='const'>AdminHelpers</span>
  <span class='id identifier rubyid_before'><a href="Delegator.html#before-instance_method" title="Sinatra::Delegator#before (method)">before</a></span>  { <span class='id identifier rubyid_authenticate'>authenticate</span> <span class='kw'>unless</span> <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_path_info'>path_info</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin/login</span><span class='tstring_end'>&#39;</span></span> }

  <span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='kw'>do</span>
      <span class='comment'># Only authenticated users can access here...
</span>      <span class='ivar'>@users</span> <span class='op'>=</span> <span class='const'>User</span>.<span class='id identifier rubyid_all'>all</span>
      <span class='id identifier rubyid_haml'>haml</span> <span class='symbeg'>:</span><span class='id identifier rubyid_users'>users</span>
    <span class='kw'>end</span>

    <span class='comment'># More user admin routes...
</span>  <span class='kw'>end</span>

  <span class='comment'># More admin routes...
</span><span class='kw'>end</span></code></pre>

<p>Redirecting within the namespace can be done using redirect_to:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/foo</span><span class='tstring_end'>&#39;</span></span>  <span class='kw'>do</span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/bar</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Redirects to /admin/bar
</span>  <span class='kw'>end</span>

  <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/foo</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/bar</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Redirects to /bar
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<h4>Classic Application Setup</h4>

<p>To be able to use namespaces in a classic application all you need to do is
require the extension:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sinatra</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sinatra/namespace</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
<span class='kw'>end</span></code></pre>

<h4>Modular Application Setup</h4>

<p>To be able to use namespaces in a modular application all you need to do is
require the extension, and then, register it:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sinatra/base</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sinatra/namespace</span><span class='tstring_end'>&quot;</span></span>

<span class='kw'>class</span> <span class='const'>MyApp</span> <span class='op'>&lt;</span> <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="Sinatra::Base (class)">Base</a></span>
  <span class='id identifier rubyid_register'><a href="Delegator.html#register-instance_method" title="Sinatra::Delegator#register (method)">register</a></span> <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'>Namespace</span>

  <span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<h4>Within an extension</h4>

<p>To be able to use namespaces within an extension, you need to first create
an extension. This includes defining the <code>registered(app)</code> method in the
module.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra/base</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># For creating Sinatra extensions
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra/namespace</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># To create namespaces
</span>
<span class='kw'>module</span> <span class='const'>Zomg</span> <span class='comment'># Keep everything under &quot;Zomg&quot; namespace for sanity
</span>  <span class='kw'>module</span> <span class='const'>Routes</span> <span class='comment'># Define a new &quot;Routes&quot; module
</span>
    <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_registered'>registered</span>(<span class='id identifier rubyid_app'>app</span>)
      <span class='comment'># First, register the Namespace extension
</span>      <span class='id identifier rubyid_app'>app</span>.<span class='id identifier rubyid_register'><a href="../Sinatra.html#register-class_method" title="Sinatra.register (method)">register</a></span> <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'>Namespace</span>

      <span class='comment'># This defines an {/api} namespace on the application
</span>      <span class='id identifier rubyid_app'>app</span>.<span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/api</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
        <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
          <span class='comment'># do something with `GET &quot;/api/users&quot;`
</span>        <span class='kw'>end</span>
      <span class='kw'>end</span>

    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Lastly, register the extension to use in our app
</span>  <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span>.<span class='id identifier rubyid_register'><a href="../Sinatra.html#register-class_method" title="Sinatra.register (method)">register</a></span> <span class='const'>Routes</span>
<span class='kw'>end</span></code></pre>

<p>In order to use this extension, is the same as any other <a href="../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> extension:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>Zomg</span>
  <span class='comment'># Define our app class, we use modular app for this example
</span>  <span class='kw'>class</span> <span class='const'>App</span> <span class='op'>&lt;</span> <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="Sinatra::Base (class)">Base</a></span>
    <span class='comment'># this gives us all the namespaces we defined earlier
</span>    <span class='id identifier rubyid_register'><a href="Delegator.html#register-instance_method" title="Sinatra::Delegator#register (method)">register</a></span> <span class='const'>Routes</span>

    <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Welcome to my application!</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'>Zomg</span><span class='op'>::</span><span class='const'>App</span>.<span class='id identifier rubyid_run!'>run!</span> <span class='comment'># Don&#39;t forget to start your app ;)</span></code></pre>

<p>Phew! That was a mouthful.</p>

<p>I hope that helps you use <code>Namespace</code> in every way imaginable!</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#extended-class_method" title=".extended (class method)">.<strong>extended</strong>(base)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(base, pattern, conditions = {}, &amp;block)  </a>
    </span>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="extended-class_method">
  <h3 class='signature  first'>
    .<strong>extended</strong>(base)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/namespace.rb#L368-L370'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='368' data-end='370'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/namespace.rb', line 368</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_extended'>extended</span>(<span class='id identifier rubyid_base'>base</span>)
  <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_extend'>extend</span> <span class='const'><a href="Namespace/BaseMethods.html" title="Sinatra::Namespace::BaseMethods (module)">BaseMethods</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new-class_method">
  <h3 class='signature '>
    .<strong>new</strong>(base, pattern, conditions = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/sinatra-contrib/lib/sinatra/namespace.rb#L189-L205'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='189' data-end='205'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'sinatra-contrib/lib/sinatra/namespace.rb', line 189</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_conditions'>conditions</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='const'>Module</span>.<span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
    <span class='comment'># quelch uninitialized variable warnings, since these get used by compile method.
</span>    <span class='ivar'>@pattern</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@conditions</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_extend'>extend</span> <span class='const'><a href="Namespace/NamespacedMethods.html" title="Sinatra::Namespace::NamespacedMethods (module)">NamespacedMethods</a></span>
    <span class='id identifier rubyid_include'>include</span> <span class='const'><a href="Namespace/InstanceMethods.html" title="Sinatra::Namespace::InstanceMethods (module)">InstanceMethods</a></span>
    <span class='ivar'>@base</span> <span class='op'>=</span> <span class='id identifier rubyid_base'>base</span>
    <span class='ivar'>@extensions</span> <span class='op'>=</span> []
    <span class='ivar'>@errors</span> <span class='op'>=</span> {}
    <span class='ivar'>@pattern</span><span class='comma'>,</span> <span class='ivar'>@conditions</span> <span class='op'>=</span> <span class='id identifier rubyid_compile'>compile</span>(<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_conditions'>conditions</span>)
    <span class='ivar'>@templates</span>            <span class='op'>=</span> <span class='const'>Hash</span>.<span class='id identifier rubyid_new'>new</span> { <span class='op'>|</span><span class='id identifier rubyid__h'>_h</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='ivar'>@base</span>.<span class='id identifier rubyid_templates'>templates</span>[<span class='id identifier rubyid_k'>k</span>] }
    <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_before'><a href="Delegator.html#before-instance_method" title="Sinatra::Delegator#before (method)">before</a></span> { <span class='id identifier rubyid_extend'>extend</span>(<span class='ivar'>@namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span>) }
    <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>