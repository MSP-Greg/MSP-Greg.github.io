<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Sinatra::ShowExceptions &mdash; Sinatra main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Sinatra::ShowExceptions",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Sinatra main</a> &raquo; 
      <a href='../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ShowExceptions&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Sinatra::ShowExceptions</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Rack::ShowExceptions
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Rack::ShowExceptions
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Rack::ShowExceptions</span>
        <ul class='fullTree'>
          <li>Object</li>
          <li class='next'>Rack::ShowExceptions</li>
          <li class='next'>Sinatra::ShowExceptions</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L12'>lib/sinatra/show_exceptions.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    <p><code>ShowExceptions</code> catches all exceptions raised from the app it
wraps. It shows a useful backtrace with the sourcefile and clickable
context, the whole <a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> environment and the request data.</p>

<p>Be careful when you use this on public-facing sites as it could reveal
information helpful to attackers.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='TEMPLATE-constant' class='summary_signature nodoc'>TEMPLATE =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L74-L361'># File 'lib/sinatra/show_exceptions.rb', line 74</a>    <pre class='code ruby'><span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::ShowExceptions.new (method)">new</a></span> <span class='heredoc_beg'>&lt;&lt;-HTML</span> <span class='comment'># :nodoc:
</span><span class='tstring_content'>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;
  &lt;title&gt;&lt;%=h exception.class %&gt; at &lt;%=h path %&gt;&lt;/title&gt;

  &lt;script type=&quot;text/javascript&quot;&gt;
  //&lt;!--
  function toggle(id) {
    var pre  = document.getElementById(&quot;pre-&quot; + id);
    var post = document.getElementById(&quot;post-&quot; + id);
    var context = document.getElementById(&quot;context-&quot; + id);

    if (pre.style.display == &#39;block&#39;) {
      pre.style.display = &#39;none&#39;;
      post.style.display = &#39;none&#39;;
      context.style.background = &quot;none&quot;;
    } else {
      pre.style.display = &#39;block&#39;;
      post.style.display = &#39;block&#39;;
      context.style.background = &quot;#fffed9&quot;;
    }
  }

  function toggleBacktrace(){
    var bt = document.getElementById(&quot;backtrace&quot;);
    var toggler = document.getElementById(&quot;expando&quot;);

    if (bt.className == &#39;condensed&#39;) {
      bt.className = &#39;expanded&#39;;
      toggler.innerHTML = &quot;(condense)&quot;;
    } else {
      bt.className = &#39;condensed&#39;;
      toggler.innerHTML = &quot;(expand)&quot;;
    }
  }
  //--&gt;
  &lt;/script&gt;

&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
  *                   {margin: 0; padding: 0; border: 0; outline: 0;}
  div.clear           {clear: both;}
  body                {background: #EEEEEE; margin: 0; padding: 0;
                       font-family: &#39;Lucida Grande&#39;, &#39;Lucida Sans Unicode&#39;,
                       &#39;Garuda&#39;;}
  code                {font-family: &#39;Lucida Console&#39;, monospace;
                       font-size: 12px;}
  li                  {height: 18px;}
  ul                  {list-style: none; margin: 0; padding: 0;}
  ol:hover            {cursor: pointer;}
  ol li               {white-space: pre;}
  #explanation        {font-size: 12px; color: #666666;
                       margin: 20px 0 0 100px;}
/* WRAP */
  #wrap               {width: 1000px; background: #FFFFFF; margin: 0 auto;
                       padding: 30px 50px 20px 50px;
                       border-left: 1px solid #DDDDDD;
                       border-right: 1px solid #DDDDDD;}
/* HEADER */
  #header             {margin: 0 auto 25px auto;}
  #header img         {float: left;}
  #header #summary    {float: left; margin: 12px 0 0 20px; width:660px;
                       font-family: &#39;Lucida Grande&#39;, &#39;Lucida Sans Unicode&#39;;}
  h1                  {margin: 0; font-size: 36px; color: #981919;}
  h2                  {margin: 0; font-size: 22px; color: #333333;}
  #header ul          {margin: 0; font-size: 12px; color: #666666;}
  #header ul li strong{color: #444444;}
  #header ul li       {display: inline; padding: 0 10px;}
  #header ul li.first {padding-left: 0;}
  #header ul li.last  {border: 0; padding-right: 0;}
/* BODY */
  #backtrace,
  #get,
  #post,
  #cookies,
  #rack               {width: 980px; margin: 0 auto 10px auto;}
  p#nav               {float: right; font-size: 14px;}
/* BACKTRACE */
  a#expando           {float: left; padding-left: 5px; color: #666666;
                      font-size: 14px; text-decoration: none; cursor: pointer;}
  a#expando:hover     {text-decoration: underline;}
  h3                  {float: left; width: 100px; margin-bottom: 10px;
                       color: #981919; font-size: 14px; font-weight: bold;}
  #nav a              {color: #666666; text-decoration: none; padding: 0 5px;}
  #backtrace li.frame-info {background: #f7f7f7; padding-left: 10px;
                           font-size: 12px; color: #333333;}
  #backtrace ul       {list-style-position: outside; border: 1px solid #E9E9E9;
                       border-bottom: 0;}
  #backtrace ol       {width: 920px; margin-left: 50px;
                       font: 10px &#39;Lucida Console&#39;, monospace; color: #666666;}
  #backtrace ol li    {border: 0; border-left: 1px solid #E9E9E9;
                       padding: 2px 0;}
  #backtrace ol code  {font-size: 10px; color: #555555; padding-left: 5px;}
  #backtrace-ul li    {border-bottom: 1px solid #E9E9E9; height: auto;
                       padding: 3px 0;}
  #backtrace-ul .code {padding: 6px 0 4px 0;}
  #backtrace.condensed .system,
  #backtrace.condensed .framework {display:none;}
/* REQUEST DATA */
  p.no-data           {padding-top: 2px; font-size: 12px; color: #666666;}
  table.req           {width: 980px; text-align: left; font-size: 12px;
                       color: #666666; padding: 0; border-spacing: 0;
                       border: 1px solid #EEEEEE; border-bottom: 0;
                       border-left: 0;
                       clear:both}
  table.req tr th     {padding: 2px 10px; font-weight: bold;
                       background: #F7F7F7; border-bottom: 1px solid #EEEEEE;
                       border-left: 1px solid #EEEEEE;}
  table.req tr td     {padding: 2px 20px 2px 10px;
                       border-bottom: 1px solid #EEEEEE;
                       border-left: 1px solid #EEEEEE;}
/* HIDE PRE/POST CODE AT START */
  .pre-context,
  .post-context       {display: none;}

  table td.code       {width:750px}
  table td.code div   {width:750px;overflow:hidden}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;wrap&quot;&gt;
    &lt;div id=&quot;header&quot;&gt;
      &lt;img src=&quot;&lt;%= env[&#39;SCRIPT_NAME&#39;] %&gt;/__sinatra__/500.png&quot; alt=&quot;application error&quot; height=&quot;161&quot; width=&quot;313&quot; /&gt;
      &lt;div id=&quot;summary&quot;&gt;
        &lt;h1&gt;&lt;strong&gt;&lt;%=h exception.class %&gt;&lt;/strong&gt; at &lt;strong&gt;&lt;%=h path %&gt;
          &lt;/strong&gt;&lt;/h1&gt;
        &lt;h2&gt;&lt;%=h exception.message %&gt;&lt;/h2&gt;
        &lt;ul&gt;
          &lt;li class=&quot;first&quot;&gt;&lt;strong&gt;file:&lt;/strong&gt; &lt;code&gt;
            &lt;%=h frames.first.filename.split(&quot;/&quot;).last %&gt;&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;&lt;strong&gt;location:&lt;/strong&gt; &lt;code&gt;&lt;%=h frames.first.function %&gt;
            &lt;/code&gt;&lt;/li&gt;
          &lt;li class=&quot;last&quot;&gt;&lt;strong&gt;line:
            &lt;/strong&gt; &lt;%=h frames.first.lineno %&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
      &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;div id=&quot;backtrace&quot; class=&#39;condensed&#39;&gt;
      &lt;h3&gt;BACKTRACE&lt;/h3&gt;
      &lt;p&gt;&lt;a href=&quot;#&quot; id=&quot;expando&quot;
            onclick=&quot;toggleBacktrace(); return false&quot;&gt;(expand)&lt;/a&gt;&lt;/p&gt;
      &lt;p id=&quot;nav&quot;&gt;&lt;strong&gt;JUMP TO:&lt;/strong&gt;
         &lt;% unless bad_request?(exception) %&gt;
            &lt;a href=&quot;#get-info&quot;&gt;GET&lt;/a&gt;
            &lt;a href=&quot;#post-info&quot;&gt;POST&lt;/a&gt;
         &lt;% end %&gt;
         &lt;a href=&quot;#cookie-info&quot;&gt;COOKIES&lt;/a&gt;
         &lt;a href=&quot;#env-info&quot;&gt;ENV&lt;/a&gt;
      &lt;/p&gt;
      &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;

      &lt;ul id=&quot;backtrace-ul&quot;&gt;

      &lt;% id = 1 %&gt;
      &lt;% frames.each do |frame| %&gt;
          &lt;% if frame.context_line &amp;&amp; frame.context_line != &quot;#&quot; %&gt;

            &lt;li class=&quot;frame-info &lt;%= frame_class(frame) %&gt;&quot;&gt;
              &lt;code&gt;&lt;%=h frame.filename %&gt;&lt;/code&gt; in
                &lt;code&gt;&lt;strong&gt;&lt;%=h frame.function %&gt;&lt;/strong&gt;&lt;/code&gt;
            &lt;/li&gt;

            &lt;li class=&quot;code &lt;%= frame_class(frame) %&gt;&quot;&gt;
              &lt;% if frame.pre_context %&gt;
              &lt;ol start=&quot;&lt;%=h frame.pre_context_lineno + 1 %&gt;&quot;
                  class=&quot;pre-context&quot; id=&quot;pre-&lt;%= id %&gt;&quot;
                  onclick=&quot;toggle(&lt;%= id %&gt;);&quot;&gt;
                &lt;% frame.pre_context.each do |line| %&gt;
                &lt;li class=&quot;pre-context-line&quot;&gt;&lt;code&gt;&lt;%=h line %&gt;&lt;/code&gt;&lt;/li&gt;
                &lt;% end %&gt;
              &lt;/ol&gt;
              &lt;% end %&gt;

              &lt;ol start=&quot;&lt;%= frame.lineno %&gt;&quot; class=&quot;context&quot; id=&quot;&lt;%= id %&gt;&quot;
                  onclick=&quot;toggle(&lt;%= id %&gt;);&quot;&gt;
                &lt;li class=&quot;context-line&quot; id=&quot;context-&lt;%= id %&gt;&quot;&gt;&lt;code&gt;&lt;%=
                  h frame.context_line %&gt;&lt;/code&gt;&lt;/li&gt;
              &lt;/ol&gt;

              &lt;% if frame.post_context %&gt;
              &lt;ol start=&quot;&lt;%=h frame.lineno + 1 %&gt;&quot; class=&quot;post-context&quot;
                  id=&quot;post-&lt;%= id %&gt;&quot; onclick=&quot;toggle(&lt;%= id %&gt;);&quot;&gt;
                &lt;% frame.post_context.each do |line| %&gt;
                &lt;li class=&quot;post-context-line&quot;&gt;&lt;code&gt;&lt;%=h line %&gt;&lt;/code&gt;&lt;/li&gt;
                &lt;% end %&gt;
              &lt;/ol&gt;
              &lt;% end %&gt;
              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
            &lt;/li&gt;

          &lt;% end %&gt;

        &lt;% id += 1 %&gt;
      &lt;% end %&gt;

      &lt;/ul&gt;
    &lt;/div&gt; &lt;!-- /BACKTRACE --&gt;

    &lt;% unless bad_request?(exception) %&gt;
      &lt;div id=&quot;get&quot;&gt;
        &lt;h3 id=&quot;get-info&quot;&gt;GET&lt;/h3&gt;
        &lt;% if req.GET and not req.GET.empty? %&gt;
          &lt;table class=&quot;req&quot;&gt;
            &lt;tr&gt;
              &lt;th&gt;Variable&lt;/th&gt;
              &lt;th&gt;Value&lt;/th&gt;
            &lt;/tr&gt;
             &lt;% req.GET.sort_by { |k, v| k.to_s }.each { |key, val| %&gt;
            &lt;tr&gt;
              &lt;td&gt;&lt;%=h key %&gt;&lt;/td&gt;
              &lt;td class=&quot;code&quot;&gt;&lt;div&gt;&lt;%=h val.inspect %&gt;&lt;/div&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;% } %&gt;
          &lt;/table&gt;
        &lt;% else %&gt;
          &lt;p class=&quot;no-data&quot;&gt;No GET data.&lt;/p&gt;
        &lt;% end %&gt;
        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
      &lt;/div&gt; &lt;!-- /GET --&gt;

      &lt;div id=&quot;post&quot;&gt;
        &lt;h3 id=&quot;post-info&quot;&gt;POST&lt;/h3&gt;
        &lt;% if req.POST and not req.POST.empty? %&gt;
          &lt;table class=&quot;req&quot;&gt;
            &lt;tr&gt;
              &lt;th&gt;Variable&lt;/th&gt;
              &lt;th&gt;Value&lt;/th&gt;
            &lt;/tr&gt;
            &lt;% req.POST.sort_by { |k, v| k.to_s }.each { |key, val| %&gt;
            &lt;tr&gt;
              &lt;td&gt;&lt;%=h key %&gt;&lt;/td&gt;
              &lt;td class=&quot;code&quot;&gt;&lt;div&gt;&lt;%=h val.inspect %&gt;&lt;/div&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;% } %&gt;
          &lt;/table&gt;
        &lt;% else %&gt;
          &lt;p class=&quot;no-data&quot;&gt;No POST data.&lt;/p&gt;
        &lt;% end %&gt;
        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
      &lt;/div&gt; &lt;!-- /POST --&gt;
    &lt;% end %&gt;

    &lt;div id=&quot;cookies&quot;&gt;
      &lt;h3 id=&quot;cookie-info&quot;&gt;COOKIES&lt;/h3&gt;
      &lt;% unless req.cookies.empty? %&gt;
        &lt;table class=&quot;req&quot;&gt;
          &lt;tr&gt;
            &lt;th&gt;Variable&lt;/th&gt;
            &lt;th&gt;Value&lt;/th&gt;
          &lt;/tr&gt;
          &lt;% req.cookies.each { |key, val| %&gt;
            &lt;tr&gt;
              &lt;td&gt;&lt;%=h key %&gt;&lt;/td&gt;
              &lt;td class=&quot;code&quot;&gt;&lt;div&gt;&lt;%=h val.inspect %&gt;&lt;/div&gt;&lt;/td&gt;
            &lt;/tr&gt;
          &lt;% } %&gt;
        &lt;/table&gt;
      &lt;% else %&gt;
        &lt;p class=&quot;no-data&quot;&gt;No cookie data.&lt;/p&gt;
      &lt;% end %&gt;
      &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
    &lt;/div&gt; &lt;!-- /COOKIES --&gt;

    &lt;div id=&quot;rack&quot;&gt;
      &lt;h3 id=&quot;env-info&quot;&gt;Rack ENV&lt;/h3&gt;
      &lt;table class=&quot;req&quot;&gt;
        &lt;tr&gt;
          &lt;th&gt;Variable&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
         &lt;% env.sort_by { |k, v| k.to_s }.each { |key, val| %&gt;
         &lt;tr&gt;
           &lt;td&gt;&lt;%=h key %&gt;&lt;/td&gt;
           &lt;td class=&quot;code&quot;&gt;&lt;div&gt;&lt;%=h val %&gt;&lt;/div&gt;&lt;/td&gt;
         &lt;/tr&gt;
         &lt;% } %&gt;
      &lt;/table&gt;
      &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
    &lt;/div&gt; &lt;!-- /RACK ENV --&gt;

    &lt;p id=&quot;explanation&quot;&gt;You&#39;re seeing this error because you have
enabled the &lt;code&gt;show_exceptions&lt;/code&gt; setting.&lt;/p&gt;
  &lt;/div&gt; &lt;!-- /WRAP --&gt;
  &lt;/body&gt;
&lt;/html</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#flush-class_method" title=".flush (class method)">.<strong>flush</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(app)  &#x21d2; ShowExceptions </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#puts-class_method" title=".puts (class method)">.<strong>puts</strong>  </a>
    </span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(env)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#template-instance_method" title="#template (instance method)">#<strong>template</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#bad_request%3F-instance_method" title="#bad_request? (instance method)">#<strong>bad_request?</strong>(exception)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#frame_class-instance_method" title="#frame_class (instance method)">#<strong>frame_class</strong>(frame)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#prefers_plain_text%3F-instance_method" title="#prefers_plain_text? (instance method)">#<strong>prefers_plain_text?</strong>(env)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(app)  &#x21d2; <code>ShowExceptions</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L18-L20'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='18' data-end='20'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 18</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_app'>app</span>)
  <span class='ivar'>@app</span> <span class='op'>=</span> <span class='id identifier rubyid_app'>app</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="flush-class_method">
  <h3 class='signature  first'>
    .<strong>flush</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L14-L14'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='14' data-end='14'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 14</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='cvar'>@@eats_errors</span>.<span class='id identifier rubyid_flush'>flush</span>(<span class='op'>*</span>) <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="puts-class_method">
  <h3 class='signature '>
    .<strong>puts</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L16-L16'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='16' data-end='16'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 16</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='cvar'>@@eats_errors</span>.<span class='id identifier rubyid_puts'>puts</span>(<span class='op'>*</span>) <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="bad_request?-instance_method">
  <h3 class='signature priv first'>
    #<strong>bad_request?</strong>(exception)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L54-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='54' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 54</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_bad_request?'>bad_request?</span>(<span class='id identifier rubyid_exception'>exception</span>)
  <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'><a href="BadRequest.html" title="Sinatra::BadRequest (class)">BadRequest</a></span> <span class='op'>===</span> <span class='id identifier rubyid_exception'>exception</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="call-instance_method">
  <h3 class='signature '>
    #<strong>call</strong>(env)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L22-L46'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='22' data-end='46'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 22</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_env'>env</span>)
  <span class='ivar'>@app</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_env'>env</span>)
<span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rack.errors</span><span class='tstring_end'>&#39;</span></span>]
  <span class='id identifier rubyid_env'>env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rack.errors</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='cvar'>@@eats_errors</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_prefers_plain_text?'><a href="#prefers_plain_text%3F-instance_method" title="Sinatra::ShowExceptions#prefers_plain_text? (method)">prefers_plain_text?</a></span>(<span class='id identifier rubyid_env'>env</span>)
    <span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_dump_exception'>dump_exception</span>(<span class='id identifier rubyid_e'>e</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty'>pretty</span>(<span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_env'>env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rack.errors</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_errors'>errors</span>

  [
    <span class='int'>500</span><span class='comma'>,</span>
    {
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_content_type'>content_type</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_body'>body</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>.<span class='id identifier rubyid_to_s'>to_s</span>
    }<span class='comma'>,</span>
    [<span class='id identifier rubyid_body'>body</span>]
  ]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="frame_class-instance_method">
  <h3 class='signature priv'>
    #<strong>frame_class</strong>(frame)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L63-L72'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='63' data-end='72'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 63</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_frame_class'>frame_class</span>(<span class='id identifier rubyid_frame'>frame</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_frame'>frame</span>.<span class='id identifier rubyid_filename'>filename</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>lib/sinatra.*\.rb</span><span class='regexp_end'>}</span></span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>framework</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> (<span class='kw'>defined?</span>(<span class='const'>Gem</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_frame'>frame</span>.<span class='id identifier rubyid_filename'>filename</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='const'>Gem</span>.<span class='id identifier rubyid_dir'>dir</span>)) <span class='op'>||</span>
        <span class='id identifier rubyid_frame'>frame</span>.<span class='id identifier rubyid_filename'>filename</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>/bin/(\w+)\z</span><span class='regexp_end'>}</span></span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>system</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>app</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prefers_plain_text?-instance_method">
  <h3 class='signature priv'>
    #<strong>prefers_plain_text?</strong>(env)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L58-L61'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='58' data-end='61'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 58</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prefers_plain_text?'>prefers_plain_text?</span>(<span class='id identifier rubyid_env'>env</span>)
  <span class='const'><a href="Request.html" title="Sinatra::Request (class)">Request</a></span>.<span class='id identifier rubyid_new'><a href="../Sinatra.html#new-class_method" title="Sinatra.new (method)">new</a></span>(<span class='id identifier rubyid_env'>env</span>).<span class='id identifier rubyid_preferred_type'>preferred_type</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span>
    [<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>curl</span><span class='regexp_end'>/</span></span>].<span class='id identifier rubyid_index'>index</span> { <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='id identifier rubyid_item'>item</span> <span class='op'>=~</span> <span class='id identifier rubyid_env'>env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HTTP_USER_AGENT</span><span class='tstring_end'>&#39;</span></span>] }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="template-instance_method">
  <h3 class='signature '>
    #<strong>template</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/show_exceptions.rb#L48-L50'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='48' data-end='50'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/show_exceptions.rb', line 48</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span>
  <span class='const'><a href="#TEMPLATE-constant" title="Sinatra::ShowExceptions::TEMPLATE (constant)">TEMPLATE</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>