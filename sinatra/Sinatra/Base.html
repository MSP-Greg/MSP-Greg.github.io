<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Sinatra::Base &mdash; Sinatra main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Sinatra::Base",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Sinatra main</a> &raquo; 
      <a href='../_index.html#alpha_B'>Index (B)</a> &raquo; 
        <a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Base&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Sinatra::Base</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="Application.html" title="Sinatra::Application (class)">Application</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Templates.html" title="Sinatra::Templates (module)"><code>Templates</code></a>,
          <a href="Helpers.html" title="Sinatra::Helpers (module)"><code>Helpers</code></a>,
          Rack::Utils
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L970'>lib/sinatra/base.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    <p><code>Base</code> class for all <a href="../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> applications and middleware.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='CALLERS_TO_IGNORE-constant' class='summary_signature nodoc'>CALLERS_TO_IGNORE =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1286-L1296'># File 'lib/sinatra/base.rb', line 1286</a>    <pre class='code ruby'>[ <span class='comment'># :nodoc:
</span>  <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>/sinatra(/(base|main|show_exceptions))?\.rb$</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>   <span class='comment'># all sinatra code
</span>  <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>lib/tilt.*\.rb$</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>                                <span class='comment'># all tilt code
</span>  <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\(.*\)$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>                                         <span class='comment'># generated code
</span>  <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/bundled_gems.rb$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>                               <span class='comment'># ruby &gt;= 3.3 with bundler &gt;= 2.5
</span>  <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>rubygems/(custom|core_ext/kernel)_require\.rb$</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='comment'># rubygems require hacks
</span>  <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>active_support</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>                                   <span class='comment'># active_support require hacks
</span>  <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>bundler(/(?:runtime|inline))?\.rb</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>              <span class='comment'># bundler require hacks
</span>  <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;internal:</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>                                       <span class='comment'># internal in ruby &gt;= 1.9.2
</span>  <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>zeitwerk/kernel\.rb</span><span class='regexp_end'>}</span></span>                             <span class='comment'># Zeitwerk kernel#require decorator
</span>].<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='URI_INSTANCE-constant' class='summary_signature'>URI_INSTANCE =</span>
    <br/>
    <a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L975-L975'># File 'lib/sinatra/base.rb', line 975</a>    <pre class='code ruby'><span class='const'>URI</span><span class='op'>::</span><span class='const'>Parser</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span></pre>
  </li>
</ul>
  <h3 class='inherited'><a href="Helpers.html" title="Sinatra::Helpers (module)"><code>Helpers</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="Helpers.html#ETAG_KINDS-constant" title="Sinatra::Helpers::ETAG_KINDS (constant)">ETAG_KINDS</a>, 
    <a href="Helpers.html#MULTIPART_FORM_DATA_REPLACEMENT_TABLE-constant" title="Sinatra::Helpers::MULTIPART_FORM_DATA_REPLACEMENT_TABLE (constant)">MULTIPART_FORM_DATA_REPLACEMENT_TABLE</a>
  </p>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#development%3F-class_method" title=".development? (class method)">.<strong>development?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#errors-class_method" title=".errors (class method)">.<strong>errors</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#filters-class_method" title=".filters (class method)">.<strong>filters</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#on_start_callback-class_method" title=".on_start_callback (class method)">.<strong>on_start_callback</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#on_stop_callback-class_method" title=".on_stop_callback (class method)">.<strong>on_stop_callback</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#production%3F-class_method" title=".production? (class method)">.<strong>production?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#public=-class_method" title=".public= (class method)">.<strong>public=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#public_dir-class_method" title=".public_dir (class method)">.<strong>public_dir</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#public_dir=-class_method" title=".public_dir= (class method)">.<strong>public_dir=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#routes-class_method" title=".routes (class method)">.<strong>routes</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#running%3F-class_method" title=".running? (class method)">.<strong>running?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Check whether the self-hosted server is running or not.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#templates-class_method" title=".templates (class method)">.<strong>templates</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#test%3F-class_method" title=".test? (class method)">.<strong>test?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#suppress_messages%3F-class_method" title=".suppress_messages? (class method)">.<strong>suppress_messages?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#add_filter-class_method" title=".add_filter (class method)">.<strong>add_filter</strong>(type, path = /.*/, **options, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>add a filter.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#after-class_method" title=".after (class method)">.<strong>after</strong>(path = /.*/, **options, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define an after filter; runs after all requests within the same context as route handlers and may access/modify the request and response.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#before-class_method" title=".before (class method)">.<strong>before</strong>(path = /.*/, **options, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define a before filter; runs before all requests within the same context as route handlers and may access/modify the request and response.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#build-class_method" title=".build (class method)">.<strong>build</strong>(app)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <a href="../Rack/Builder.html" title="Rack::Builder (class)"><code>::Rack::Builder</code></a> instance with all the middleware set up and the given <a href="#app-instance_method" title="Sinatra::Base#app (method)">#app</a> as end point.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#call-class_method" title=".call (class method)">.<strong>call</strong>(env)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#caller_files-class_method" title=".caller_files (class method)">.<strong>caller_files</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like Kernel#caller but excluding certain magic entries and without line / method information; the resulting array contains filenames only.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#callers_to_ignore-class_method" title=".callers_to_ignore (class method)">.<strong>callers_to_ignore</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#condition-class_method" title=".condition (class method)">.<strong>condition</strong>(name = &quot;#{caller.first[/`.*&#39;/]} condition&quot;, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add a route condition.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#configure-class_method" title=".configure (class method)">.<strong>configure</strong>(*envs) {|_self| ... } </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Set configuration options for <a href="../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> and/or the app.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete-class_method" title=".delete (class method)">.<strong>delete</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disable-class_method" title=".disable (class method)">.<strong>disable</strong>(*opts)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as calling <code>set &lt;code&gt;:option&lt;/code&gt;, false</code> for each of the given options.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#enable-class_method" title=".enable (class method)">.<strong>enable</strong>(*opts)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as calling <code>set &lt;code&gt;:option&lt;/code&gt;, true</code> for each of the given options.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#error-class_method" title=".error (class method)">.<strong>error</strong>(*codes, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define a custom error handler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#extensions-class_method" title=".extensions (class method)">.<strong>extensions</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="Extension.html" title="Sinatra::Extension (module)"><code>Extension</code></a> modules registered on this class and all superclasses.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get-class_method" title=".get (class method)">.<strong>get</strong>(path, opts = {}, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Defining a <code>GET</code> handler also automatically defines a <code>HEAD</code> handler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#head-class_method" title=".head (class method)">.<strong>head</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#helpers-class_method" title=".helpers (class method)">.<strong>helpers</strong>(*extensions, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Makes the methods defined in the block and in the Modules given in <code>extensions</code> available to the handlers and templates.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inline_templates=-class_method" title=".inline_templates= (class method)">.<strong>inline_templates=</strong>(file = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load embedded templates from the file; uses the caller&#39;s <strong>FILE</strong> when no file is specified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#layout-class_method" title=".layout (class method)">.<strong>layout</strong>(name = :layout, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define the layout template.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#link-class_method" title=".link (class method)">.<strong>link</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#methodoverride=-class_method" title=".methodoverride= (class method)">.<strong>methodoverride=</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#methodoverride%3F-class_method" title=".methodoverride? (class method)">.<strong>methodoverride?</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#middleware-class_method" title=".middleware (class method)">.<strong>middleware</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Middleware used in this class and all superclasses.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mime_type-class_method" title=".mime_type (class method)">.<strong>mime_type</strong>(type, value = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Lookup or register a mime type in Rack&#39;s mime registry.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mime_types-class_method" title=".mime_types (class method)">.<strong>mime_types</strong>(type)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>provides all mime types matching type, including deprecated types:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(*args, &amp;block)  &#x21d2; Base </a>
      (also: .new!, .new!)
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new instance of the class fronted by its middleware pipeline.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new!-class_method" title=".new! (class method)">.<strong>new!</strong>(app = nil, **_kwargs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#new-class_method" title="Sinatra::Base.new (method)">.new</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#not_found-class_method" title=".not_found (class method)">.<strong>not_found</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sugar for `error(404) { ...</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_start-class_method" title=".on_start (class method)">.<strong>on_start</strong>(&amp;on_start_callback)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_stop-class_method" title=".on_stop (class method)">.<strong>on_stop</strong>(&amp;on_stop_callback)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#options-class_method" title=".options (class method)">.<strong>options</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#patch-class_method" title=".patch (class method)">.<strong>patch</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#post-class_method" title=".post (class method)">.<strong>post</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prototype-class_method" title=".prototype (class method)">.<strong>prototype</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The prototype instance used to process requests.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#put-class_method" title=".put (class method)">.<strong>put</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#quit!-class_method" title=".quit! (class method)">.<strong>quit!</strong>  </a>
      (also: .stop!)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Stop the self-hosted server if running.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#register-class_method" title=".register (class method)">.<strong>register</strong>(*extensions, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Register an extension.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset!-class_method" title=".reset! (class method)">.<strong>reset!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes all routes, filters, middleware and extension hooks from the current class (not routes/filters/...</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#run!-class_method" title=".run! (class method)">.<strong>run!</strong>(options = {}, &amp;block)  </a>
      (also: .start!)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Run the <a href="../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> app as a self-hosted server using Puma, Falcon, or WEBrick (in that order).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set-class_method" title=".set (class method)">.<strong>set</strong>(option, value = (not_set = true), ignore_setter = false, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets an option to the given value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#settings-class_method" title=".settings (class method)">.<strong>settings</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Access settings defined with <code>Base</code>.set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#start!-class_method" title=".start! (class method)">.<strong>start!</strong>(options = {}, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#run!-class_method" title="Sinatra::Base.run! (method)">.run!</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stop!-class_method" title=".stop! (class method)">.<strong>stop!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#quit!-class_method" title="Sinatra::Base.quit! (method)">.quit!</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#template-class_method" title=".template (class method)">.<strong>template</strong>(name, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define a named template.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unlink-class_method" title=".unlink (class method)">.<strong>unlink</strong>(path, opts = {}, &amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#use-class_method" title=".use (class method)">.<strong>use</strong>(middleware, *args, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Use the specified <a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> middleware.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#agent-class_method" title=".agent (class method)">.<strong>agent</strong>(pattern)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#user_agent-class_method" title="Sinatra::Base.user_agent (method)">.user_agent</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#cleaned_caller-class_method" title=".cleaned_caller (class method)">.<strong>cleaned_caller</strong>(keep = 3)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Like Kernel#caller but excluding certain magic entries.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#compile-class_method" title=".compile (class method)">.<strong>compile</strong>(path, route_mustermann_opts = {})  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#compile!-class_method" title=".compile! (class method)">.<strong>compile!</strong>(verb, path, block, **options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#define_singleton-class_method" title=".define_singleton (class method)">.<strong>define_singleton</strong>(name, content = Proc.new)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Dynamically defines a method on settings.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#force_encoding-class_method" title=".force_encoding (class method)">.<strong>force_encoding</strong>(data, encoding = default_encoding)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Force data to specified encoding.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#generate_method-class_method" title=".generate_method (class method)">.<strong>generate_method</strong>(method_name, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#host_name-class_method" title=".host_name (class method)">.<strong>host_name</strong>(pattern)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Condition for matching host name.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#inherited-class_method" title=".inherited (class method)">.<strong>inherited</strong>(subclass)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#invoke_hook-class_method" title=".invoke_hook (class method)">.<strong>invoke_hook</strong>(name, *args)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#provides-class_method" title=".provides (class method)">.<strong>provides</strong>(*types)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Condition for matching mimetypes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#route-class_method" title=".route (class method)">.<strong>route</strong>(verb, path, options = {}, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_common_logger-class_method" title=".setup_common_logger (class method)">.<strong>setup_common_logger</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_custom_logger-class_method" title=".setup_custom_logger (class method)">.<strong>setup_custom_logger</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_default_middleware-class_method" title=".setup_default_middleware (class method)">.<strong>setup_default_middleware</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_logging-class_method" title=".setup_logging (class method)">.<strong>setup_logging</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_middleware-class_method" title=".setup_middleware (class method)">.<strong>setup_middleware</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_null_logger-class_method" title=".setup_null_logger (class method)">.<strong>setup_null_logger</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_protection-class_method" title=".setup_protection (class method)">.<strong>setup_protection</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_sessions-class_method" title=".setup_sessions (class method)">.<strong>setup_sessions</strong>(builder)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#setup_traps-class_method" title=".setup_traps (class method)">.<strong>setup_traps</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#start_server-class_method" title=".start_server (class method)">.<strong>start_server</strong>(handler, server_settings, handler_name)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Starts the server by running the <a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> Handler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#synchronize-class_method" title=".synchronize (class method)">.<strong>synchronize</strong>(&amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#user_agent-class_method" title=".user_agent (class method)">.<strong>user_agent</strong>(pattern)  </a>
      (also: .agent)
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Condition for matching user agent.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#warn_for_deprecation-class_method" title=".warn_for_deprecation (class method)">.<strong>warn_for_deprecation</strong>(message)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>used for deprecation warnings.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#app-instance_method" title="#app (instance method)">#<strong>app</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#env-instance_method" title="#env (instance method)">#<strong>env</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#params-instance_method" title="#params (instance method)">#<strong>params</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#request-instance_method" title="#request (instance method)">#<strong>request</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#response-instance_method" title="#response (instance method)">#<strong>response</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#template_cache-instance_method" title="#template_cache (instance method)">#<strong>template_cache</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
</ul>

<h3 class='inherited'><a href="Helpers.html" title="Sinatra::Helpers (module)"><code>Helpers</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#bad_request%3F-instance_method" title="Sinatra::Helpers#bad_request? (method)">#bad_request?</a></td>
      <td><div class='inline'><p>whether or not the status is set to 400.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#client_error%3F-instance_method" title="Sinatra::Helpers#client_error? (method)">#client_error?</a></td>
      <td><div class='inline'><p>whether or not the status is set to 4xx.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#informational%3F-instance_method" title="Sinatra::Helpers#informational? (method)">#informational?</a></td>
      <td><div class='inline'><p>whether or not the status is set to 1xx.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#not_found%3F-instance_method" title="Sinatra::Helpers#not_found? (method)">#not_found?</a></td>
      <td><div class='inline'><p>whether or not the status is set to 404.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#redirect%3F-instance_method" title="Sinatra::Helpers#redirect? (method)">#redirect?</a></td>
      <td><div class='inline'><p>whether or not the status is set to 3xx.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#server_error%3F-instance_method" title="Sinatra::Helpers#server_error? (method)">#server_error?</a></td>
      <td><div class='inline'><p>whether or not the status is set to 5xx.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#success%3F-instance_method" title="Sinatra::Helpers#success? (method)">#success?</a></td>
      <td><div class='inline'><p>whether or not the status is set to 2xx.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(env)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> call interface.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#call!-instance_method" title="#call! (instance method)">#<strong>call!</strong>(env)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#forward-instance_method" title="#forward (instance method)">#<strong>forward</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Forward the request to the downstream app -- middleware only.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#halt-instance_method" title="#halt (instance method)">#<strong>halt</strong>(*response)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Exit the current block, halts any further processing of the request, and returns the specified response.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pass-instance_method" title="#pass (instance method)">#<strong>pass</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Pass control to the next matching route.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#settings-instance_method" title="#settings (instance method)">#<strong>settings</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Access settings defined with <code>Base</code>.set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#dispatch!-instance_method" title="#dispatch! (instance method)">#<strong>dispatch!</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Dispatch a request with error handling.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#dump_errors!-instance_method" title="#dump_errors! (instance method)">#<strong>dump_errors!</strong>(boom)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#error_block!-instance_method" title="#error_block! (instance method)">#<strong>error_block!</strong>(key, *block_params)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Find an custom error block for the key(s) specified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#filter!-instance_method" title="#filter! (instance method)">#<strong>filter!</strong>(type, base = settings, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Run filters defined on the class and all superclasses.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#force_encoding-instance_method" title="#force_encoding (instance method)">#<strong>force_encoding</strong>(*args)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#handle_exception!-instance_method" title="#handle_exception! (instance method)">#<strong>handle_exception!</strong>(boom)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="Error.html" title="Sinatra::Error (class)"><code>Error</code></a> handling during requests.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#invoke-instance_method" title="#invoke (instance method)">#<strong>invoke</strong>(&amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Run the block with &#39;throw :halt&#39; support and apply result to the response.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#process_route-instance_method" title="#process_route (instance method)">#<strong>process_route</strong>(pattern, conditions, block = nil, values = [])  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>If the current request matches pattern and conditions, fill params with keys and call the given block.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#route!-instance_method" title="#route! (instance method)">#<strong>route!</strong>(base = settings, pass_block = nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Run routes defined on the class and all superclasses.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#route_eval-instance_method" title="#route_eval (instance method)">#<strong>route_eval</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Run a route block and throw <code>:halt</code> with the result.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#route_missing-instance_method" title="#route_missing (instance method)">#<strong>route_missing</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>No matching route was found or all routes passed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#static!-instance_method" title="#static! (instance method)">#<strong>static!</strong>(options = {})  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Attempt to serve static files from public directory.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Templates.html" title="Sinatra::Templates (module)"><code>Templates</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Templates.html#asciidoc-instance_method" title="Sinatra::Templates#asciidoc (method)">#asciidoc</a>,
        <a class='i_m ' href="Templates.html#builder-instance_method" title="Sinatra::Templates#builder (method)">#builder</a>,
        <a class='i_m ' href="Templates.html#erb-instance_method" title="Sinatra::Templates#erb (method)">#erb</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Templates.html#find_template-instance_method" title="Sinatra::Templates#find_template (method)">#find_template</a></td>
      <td><div class='inline'><p>Calls the given block for every possible template file in views, named name.ext, where ext is registered on engine.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Templates.html#haml-instance_method" title="Sinatra::Templates#haml (method)">#haml</a>,
        <a class='i_m ' href="Templates.html#initialize-instance_method" title="Sinatra::Templates#initialize (method)">#initialize</a>,
        <a class='i_m ' href="Templates.html#liquid-instance_method" title="Sinatra::Templates#liquid (method)">#liquid</a>,
        <a class='i_m ' href="Templates.html#markaby-instance_method" title="Sinatra::Templates#markaby (method)">#markaby</a>,
        <a class='i_m ' href="Templates.html#markdown-instance_method" title="Sinatra::Templates#markdown (method)">#markdown</a>,
        <a class='i_m ' href="Templates.html#nokogiri-instance_method" title="Sinatra::Templates#nokogiri (method)">#nokogiri</a>,
        <a class='i_m ' href="Templates.html#rabl-instance_method" title="Sinatra::Templates#rabl (method)">#rabl</a>,
        <a class='i_m ' href="Templates.html#rdoc-instance_method" title="Sinatra::Templates#rdoc (method)">#rdoc</a>,
        <a class='i_m ' href="Templates.html#sass-instance_method" title="Sinatra::Templates#sass (method)">#sass</a>,
        <a class='i_m ' href="Templates.html#scss-instance_method" title="Sinatra::Templates#scss (method)">#scss</a>,
        <a class='i_m ' href="Templates.html#slim-instance_method" title="Sinatra::Templates#slim (method)">#slim</a>,
        <a class='i_m ' href="Templates.html#yajl-instance_method" title="Sinatra::Templates#yajl (method)">#yajl</a>,
        <a class='i_m priv' href="Templates.html#compile_block_template-instance_method" title="Sinatra::Templates#compile_block_template (method)">#compile_block_template</a>,
        <a class='i_m priv' href="Templates.html#compile_template-instance_method" title="Sinatra::Templates#compile_template (method)">#compile_template</a>,
        <a class='i_m priv' href="Templates.html#render-instance_method" title="Sinatra::Templates#render (method)">#render</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Templates.html#render_ruby-instance_method" title="Sinatra::Templates#render_ruby (method)">#render_ruby</a></td>
      <td><div class='inline'><p>logic shared between builder and nokogiri.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Helpers.html" title="Sinatra::Helpers (module)"><code>Helpers</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#attachment-instance_method" title="Sinatra::Helpers#attachment (method)">#attachment</a></td>
      <td><div class='inline'><p>Set the Content-Disposition to &quot;attachment&quot; with the specified filename, instructing the user agents to prompt to save.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#back-instance_method" title="Sinatra::Helpers#back (method)">#back</a></td>
      <td><div class='inline'><p>Sugar for redirect (example:  redirect back).</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#body-instance_method" title="Sinatra::Helpers#body (method)">#body</a></td>
      <td><div class='inline'><p>Set or retrieve the response body.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#cache_control-instance_method" title="Sinatra::Helpers#cache_control (method)">#cache_control</a></td>
      <td><div class='inline'><p>Specify response freshness policy for HTTP caches (Cache-Control header).</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#content_type-instance_method" title="Sinatra::Helpers#content_type (method)">#content_type</a></td>
      <td><div class='inline'><p>Set the content-type of the response body given a media type or file extension.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#error-instance_method" title="Sinatra::Helpers#error (method)">#error</a></td>
      <td><div class='inline'><p>Halt processing and return the error status provided.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#etag-instance_method" title="Sinatra::Helpers#etag (method)">#etag</a></td>
      <td><div class='inline'><p>Set the response entity tag (HTTP &#39;ETag&#39; header) and halt if conditional GET matches.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#expires-instance_method" title="Sinatra::Helpers#expires (method)">#expires</a></td>
      <td><div class='inline'><p>Set the Expires header and Cache-Control/max-age directive.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#headers-instance_method" title="Sinatra::Helpers#headers (method)">#headers</a></td>
      <td><div class='inline'><p>Set multiple response headers with Hash.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#last_modified-instance_method" title="Sinatra::Helpers#last_modified (method)">#last_modified</a></td>
      <td><div class='inline'><p>Set the last modified time of the resource (HTTP &#39;Last-Modified&#39; header) and halt if conditional GET matches.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#logger-instance_method" title="Sinatra::Helpers#logger (method)">#logger</a></td>
      <td><div class='inline'><p>Access shared logger object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#mime_type-instance_method" title="Sinatra::Helpers#mime_type (method)">#mime_type</a></td>
      <td><div class='inline'><p>Look up a media type by file extension in Rack&#39;s mime registry.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#not_found-instance_method" title="Sinatra::Helpers#not_found (method)">#not_found</a></td>
      <td><div class='inline'><p>Halt processing and return a 404 Not Found.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Helpers.html#redirect-instance_method" title="Sinatra::Helpers#redirect (method)">#redirect</a></td>
      <td><div class='inline'><p>Halt processing and redirect to the URI provided.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#send_file-instance_method" title="Sinatra::Helpers#send_file (method)">#send_file</a></td>
      <td><div class='inline'><p>Use the contents of the file at <code>path</code> as the response body.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#session-instance_method" title="Sinatra::Helpers#session (method)">#session</a></td>
      <td><div class='inline'><p>Access the underlying <a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> session.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#status-instance_method" title="Sinatra::Helpers#status (method)">#status</a></td>
      <td><div class='inline'><p>Set or retrieve the response status code.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#stream-instance_method" title="Sinatra::Helpers#stream (method)">#stream</a></td>
      <td><div class='inline'><p>Allows to start sending data to the client even though later parts of the response body have not yet been generated.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#time_for-instance_method" title="Sinatra::Helpers#time_for (method)">#time_for</a></td>
      <td><div class='inline'><p>Generates a Time object from the given value.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#to-instance_method" title="Sinatra::Helpers#to (method)">#to</a></td>
      <td><div class='inline'><p>Alias for <a href="Helpers.html#uri-instance_method" title="Sinatra::Helpers#uri (method)">Helpers#uri</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#uri-instance_method" title="Sinatra::Helpers#uri (method)">#uri</a></td>
      <td><div class='inline'><p>Generates the absolute URI for a given path in the app.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Helpers.html#url-instance_method" title="Sinatra::Helpers#url (method)">#url</a></td>
      <td><div class='inline'><p>Alias for <a href="Helpers.html#uri-instance_method" title="Sinatra::Helpers#uri (method)">Helpers#uri</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Helpers.html#etag_matches%3F-instance_method" title="Sinatra::Helpers#etag_matches? (method)">#etag_matches?</a></td>
      <td><div class='inline'><p>Helper method checking if a ETag value list includes the current ETag.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Helpers.html#with_params-instance_method" title="Sinatra::Helpers#with_params (method)">#with_params</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(*args, &amp;block)  &#x21d2; <code>Base</code> 
    <span class='aliases'>Also known as: <span class='names'>.new!, .new!</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Create a new instance of the class fronted by its middleware
pipeline. The object is guaranteed to respond to #call but may not be
an instance of the class new was called on.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1657-L1663'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1657' data-end='1663'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1657</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid__kwargs'>_kwargs</span>)
  <span class='kw'>super</span>()
  <span class='ivar'>@app</span> <span class='op'>=</span> <span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span>
  <span class='ivar'>@template_cache</span> <span class='op'>=</span> <span class='const'><a href="TemplateCache.html" title="Sinatra::TemplateCache (class)">TemplateCache</a></span>.<span class='id identifier rubyid_new'><a href="TemplateCache.html#new-class_method" title="Sinatra::TemplateCache.new (method)">new</a></span>
  <span class='ivar'>@pinned_response</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'># whether a before! filter pinned the content-type
</span>  <span class='kw'>yield</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="development?-class_method">
  <h3 class='signature ro first'>
    .<strong>development?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1568-L1568'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1568' data-end='1568'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1568</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_development?'><a href="Delegator.html#development%3F-instance_method" title="Sinatra::Delegator#development? (method)">development?</a></span><span class='semicolon'>;</span> <span class='id identifier rubyid_environment'>environment</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="errors-class_method">
  <h3 class='signature ro'>
    .<strong>errors</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1298-L1298'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1298' data-end='1298'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1298</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_errors'>errors</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filters-class_method">
  <h3 class='signature ro'>
    .<strong>filters</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1298-L1298'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1298' data-end='1298'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1298</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filters'>filters</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_errors'><a href="#errors-class_method" title="Sinatra::Base.errors (method)">errors</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_start_callback-class_method">
  <h3 class='signature ro'>
    .<strong>on_start_callback</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1298-L1298'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1298' data-end='1298'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1298</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_errors'><a href="#errors-class_method" title="Sinatra::Base.errors (method)">errors</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_start_callback'>on_start_callback</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_stop_callback-class_method">
  <h3 class='signature ro'>
    .<strong>on_stop_callback</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1298-L1298'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1298' data-end='1298'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1298</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_errors'><a href="#errors-class_method" title="Sinatra::Base.errors (method)">errors</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_stop_callback'>on_stop_callback</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="production?-class_method">
  <h3 class='signature ro'>
    .<strong>production?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1569-L1569'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1569' data-end='1569'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1569</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_production?'><a href="Delegator.html#production%3F-instance_method" title="Sinatra::Delegator#production? (method)">production?</a></span><span class='semicolon'>;</span>  <span class='id identifier rubyid_environment'>environment</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_production'>production</span>  <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="public=-class_method">
  <h3 class='signature wo'>
    .<strong>public=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1511-L1514'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1511' data-end='1514'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1511</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_public='>public=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='id identifier rubyid_warn_for_deprecation'><a href="#warn_for_deprecation-class_method" title="Sinatra::Base.warn_for_deprecation (method)">warn_for_deprecation</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:public is no longer used to avoid overloading Module#public, use :public_folder or :public_dir instead</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_public_folder'>public_folder</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="public_dir-class_method">
  <h3 class='signature rw'>
    .<strong>public_dir</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1520-L1522'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1520' data-end='1522'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1520</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_public_dir'>public_dir</span>
  <span class='id identifier rubyid_public_folder'>public_folder</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="public_dir=-class_method">
  <h3 class='signature rw'>
    .<strong>public_dir=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1516-L1518'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1516' data-end='1518'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1516</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_public_dir='>public_dir=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>self</span>.<span class='id identifier rubyid_public_folder'>public_folder</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="routes-class_method">
  <h3 class='signature ro'>
    .<strong>routes</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1298-L1298'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1298' data-end='1298'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1298</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_routes'>routes</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_errors'><a href="#errors-class_method" title="Sinatra::Base.errors (method)">errors</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="running?-class_method">
  <h3 class='signature ro'>
    .<strong>running?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Check whether the self-hosted server is running or not.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1642-L1644'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1642' data-end='1644'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1642</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_running?'>running?</span>
  <span class='id identifier rubyid_running_server?'>running_server?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="suppress_messages?-class_method">
  <h3 class='signature ro priv'>
    .<strong>suppress_messages?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1705-L1707'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1705' data-end='1707'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1705</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_suppress_messages?'>suppress_messages?</span>
  <span class='id identifier rubyid_handler_name'>handler_name</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>cgi</span><span class='regexp_end'>/i</span></span> <span class='op'>||</span> <span class='id identifier rubyid_quiet'>quiet</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="templates-class_method">
  <h3 class='signature ro'>
    .<strong>templates</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1298-L1298'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1298' data-end='1298'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1298</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_templates'>templates</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_errors'><a href="#errors-class_method" title="Sinatra::Base.errors (method)">errors</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="test?-class_method">
  <h3 class='signature ro'>
    .<strong>test?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1570-L1570'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1570' data-end='1570'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1570</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_test?'><a href="Delegator.html#test%3F-instance_method" title="Sinatra::Delegator#test? (method)">test?</a></span><span class='semicolon'>;</span>        <span class='id identifier rubyid_environment'>environment</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_test'>test</span>        <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="add_filter-class_method">
  <h3 class='signature  first'>
    .<strong>add_filter</strong>(type, path = /.*/, **options, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>add a filter</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1493-L1495'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1493' data-end='1495'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1493</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_filter'>add_filter</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span>[<span class='id identifier rubyid_type'>type</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_compile!'><a href="#compile!-class_method" title="Sinatra::Base.compile! (method)">compile!</a></span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="after-class_method">
  <h3 class='signature '>
    .<strong>after</strong>(path = /.*/, **options, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Define an after filter; runs after all requests within the same
context as route handlers and may access/modify the request and
response.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1488-L1490'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1488' data-end='1490'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1488</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after'><a href="Delegator.html#after-instance_method" title="Sinatra::Delegator#after (method)">after</a></span>(<span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_add_filter'><a href="#add_filter-class_method" title="Sinatra::Base.add_filter (method)">add_filter</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_after'><a href="Delegator.html#after-instance_method" title="Sinatra::Delegator#after (method)">after</a></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="agent-class_method">
  <h3 class='signature priv'>
    .<strong>agent</strong>(pattern)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Alias for <a href="#user_agent-class_method" title="Sinatra::Base.user_agent (method)">.user_agent</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1749-L1749'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1749' data-end='1749'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1749</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_agent'>agent</span> <span class='id identifier rubyid_user_agent'><a href="#user_agent-class_method" title="Sinatra::Base.user_agent (method)">user_agent</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="before-class_method">
  <h3 class='signature '>
    .<strong>before</strong>(path = /.*/, **options, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Define a before filter; runs before all requests within the same
context as route handlers and may access/modify the request and
response.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1481-L1483'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1481' data-end='1483'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1481</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_before'><a href="Delegator.html#before-instance_method" title="Sinatra::Delegator#before (method)">before</a></span>(<span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_add_filter'><a href="#add_filter-class_method" title="Sinatra::Base.add_filter (method)">add_filter</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_before'><a href="Delegator.html#before-instance_method" title="Sinatra::Delegator#before (method)">before</a></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build-class_method">
  <h3 class='signature '>
    .<strong>build</strong>(app)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Creates a <a href="../Rack/Builder.html" title="Rack::Builder (class)"><code>::Rack::Builder</code></a> instance with all the middleware set up and
the given <a href="#app-instance_method" title="Sinatra::Base#app (method)">#app</a> as end point.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1665-L1671'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1665' data-end='1671'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1665</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build'>build</span>(<span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span>)
  <span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'><a href="../Rack/Builder.html" title="Rack::Builder (class)">Builder</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span>
  <span class='id identifier rubyid_setup_default_middleware'><a href="#setup_default_middleware-class_method" title="Sinatra::Base.setup_default_middleware (method)">setup_default_middleware</a></span> <span class='id identifier rubyid_builder'>builder</span>
  <span class='id identifier rubyid_setup_middleware'><a href="#setup_middleware-class_method" title="Sinatra::Base.setup_middleware (method)">setup_middleware</a></span> <span class='id identifier rubyid_builder'>builder</span>
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_run'>run</span> <span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span>
  <span class='id identifier rubyid_builder'>builder</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="call-class_method">
  <h3 class='signature '>
    .<strong>call</strong>(env)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1673-L1675'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1673' data-end='1675'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1673</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>)
  <span class='id identifier rubyid_synchronize'><a href="#synchronize-class_method" title="Sinatra::Base.synchronize (method)">synchronize</a></span> { <span class='id identifier rubyid_prototype'><a href="#prototype-class_method" title="Sinatra::Base.prototype (method)">prototype</a></span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="caller_files-class_method">
  <h3 class='signature '>
    .<strong>caller_files</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Like Kernel#caller but excluding certain magic entries and without
line / method information; the resulting array contains filenames only.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1679-L1681'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1679' data-end='1681'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1679</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_caller_files'>caller_files</span>
  <span class='id identifier rubyid_cleaned_caller'><a href="#cleaned_caller-class_method" title="Sinatra::Base.cleaned_caller (method)">cleaned_caller</a></span>(<span class='int'>1</span>).<span class='id identifier rubyid_flatten'>flatten</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="callers_to_ignore-class_method">
  <h3 class='signature '>
    .<strong>callers_to_ignore</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1300-L1302'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1300' data-end='1302'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1300</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_callers_to_ignore'>callers_to_ignore</span>
  <span class='const'><a href="#CALLERS_TO_IGNORE-constant" title="Sinatra::Base::CALLERS_TO_IGNORE (constant)">CALLERS_TO_IGNORE</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cleaned_caller-class_method">
  <h3 class='signature priv'>
    .<strong>cleaned_caller</strong>(keep = 3)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Like Kernel#caller but excluding certain magic entries</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1900-L1904'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1900' data-end='1904'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1900</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cleaned_caller'>cleaned_caller</span>(<span class='id identifier rubyid_keep'>keep</span> <span class='op'>=</span> <span class='int'>3</span>)
  <span class='id identifier rubyid_caller'>caller</span>(<span class='int'>1</span>)
    .<span class='id identifier rubyid_map!'>map!</span> { <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>:(?=\d|in )</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>3</span>)[<span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_keep'>keep</span>] }
    .<span class='id identifier rubyid_reject'>reject</span> { <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid__'>_</span><span class='op'>|</span> <span class='id identifier rubyid_callers_to_ignore'><a href="#callers_to_ignore-class_method" title="Sinatra::Base.callers_to_ignore (method)">callers_to_ignore</a></span>.<span class='id identifier rubyid_any?'>any?</span> { <span class='op'>|</span><span class='id identifier rubyid_pattern'>pattern</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>=~</span> <span class='id identifier rubyid_pattern'>pattern</span> } }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compile-class_method">
  <h3 class='signature priv'>
    .<strong>compile</strong>(path, route_mustermann_opts = {})   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1810-L1812'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1810' data-end='1812'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1810</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_compile'>compile</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_route_mustermann_opts'>route_mustermann_opts</span> <span class='op'>=</span> {})
  <span class='const'>Mustermann</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_mustermann_opts'>mustermann_opts</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_route_mustermann_opts'>route_mustermann_opts</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compile!-class_method">
  <h3 class='signature priv'>
    .<strong>compile!</strong>(verb, path, block, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1790-L1808'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1790' data-end='1808'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1790</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_compile!'>compile!</span>(<span class='id identifier rubyid_verb'>verb</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>)
  <span class='comment'># Because of self.options.host
</span>  <span class='id identifier rubyid_host_name'><a href="#host_name-class_method" title="Sinatra::Base.host_name (method)">host_name</a></span>(<span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_delete'><a href="#delete-class_method" title="Sinatra::Base.delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_host'>host</span>)) <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_host'>host</span>)
  <span class='comment'># Pass Mustermann opts to compile()
</span>  <span class='id identifier rubyid_route_mustermann_opts'>route_mustermann_opts</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_mustermann_opts'>mustermann_opts</span>) <span class='op'>?</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_delete'><a href="#delete-class_method" title="Sinatra::Base.delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_mustermann_opts'>mustermann_opts</span>) <span class='op'>:</span> {}.<span class='id identifier rubyid_freeze'>freeze</span>

  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_each_pair'>each_pair</span> { <span class='op'>|</span><span class='id identifier rubyid_option'>option</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='op'>|</span> <span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_option'>option</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>) }

  <span class='id identifier rubyid_pattern'>pattern</span>                 <span class='op'>=</span> <span class='id identifier rubyid_compile'><a href="#compile-class_method" title="Sinatra::Base.compile (method)">compile</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_route_mustermann_opts'>route_mustermann_opts</span>)
  <span class='id identifier rubyid_method_name'>method_name</span>             <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_verb'>verb</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_unbound_method'>unbound_method</span>          <span class='op'>=</span> <span class='id identifier rubyid_generate_method'><a href="#generate_method-class_method" title="Sinatra::Base.generate_method (method)">generate_method</a></span>(<span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_conditions'>conditions</span> <span class='op'>=</span> <span class='ivar'>@conditions</span>
  <span class='ivar'>@conditions</span> <span class='op'>=</span> []
  <span class='id identifier rubyid_wrapper'>wrapper</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>.<span class='id identifier rubyid_arity'>arity</span>.<span class='id identifier rubyid_zero?'>zero?</span> <span class='op'>?</span>
    <span class='id identifier rubyid_proc'>proc</span> { <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid__p'>_p</span><span class='op'>|</span> <span class='id identifier rubyid_unbound_method'>unbound_method</span>.<span class='id identifier rubyid_bind'>bind</span>(<span class='id identifier rubyid_a'>a</span>).<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span> } <span class='op'>:</span>
    <span class='id identifier rubyid_proc'>proc</span> { <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_unbound_method'>unbound_method</span>.<span class='id identifier rubyid_bind'>bind</span>(<span class='id identifier rubyid_a'>a</span>).<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span>(<span class='op'>*</span><span class='id identifier rubyid_p'>p</span>) }

  [<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_conditions'>conditions</span><span class='comma'>,</span> <span class='id identifier rubyid_wrapper'>wrapper</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="condition-class_method">
  <h3 class='signature '>
    .<strong>condition</strong>(name = &quot;#{caller.first[/`.*&#39;/]} condition&quot;, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Add a route condition. The route is considered non-matching when the
block returns false.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1507-L1509'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1507' data-end='1509'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1507</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_condition'>condition</span>(<span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_caller'>caller</span>.<span class='id identifier rubyid_first'>first</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>`.*&#39;</span><span class='regexp_end'>/</span></span>]<span class='embexpr_end'>}</span><span class='tstring_content'> condition</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@conditions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_generate_method'><a href="#generate_method-class_method" title="Sinatra::Base.generate_method (method)">generate_method</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="configure-class_method">
  <h3 class='signature '>
    .<strong>configure</strong>(*envs) {|_self| ... } 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Set configuration options for <a href="../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> and/or the app.
Allows scoping of settings for certain environments.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<code>_self</code>)</span>
  </li>
</ul>
<p class='tag_title'>Yield Parameters:</p>
<ul class='yieldparam'>
  <li>
    <span class='name'>_self</span>
    <span class='type'>(<code>Base</code>)</span>
&mdash;    <div class='inline'><p>the object that the method was called on</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1574-L1576'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1574' data-end='1576'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1574</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_configure'><a href="Delegator.html#configure-instance_method" title="Sinatra::Delegator#configure (method)">configure</a></span>(<span class='op'>*</span><span class='id identifier rubyid_envs'>envs</span>)
  <span class='kw'>yield</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_envs'>envs</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='id identifier rubyid_envs'>envs</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_environment'>environment</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="define_singleton-class_method">
  <h3 class='signature priv'>
    .<strong>define_singleton</strong>(name, content = Proc.new)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Dynamically defines a method on settings.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1725-L1730'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1725' data-end='1730'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1725</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_define_singleton'>define_singleton</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='const'>Proc</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span>)
  <span class='id identifier rubyid_singleton_class'>singleton_class</span>.<span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_undef_method'>undef_method</span>(<span class='id identifier rubyid_name'>name</span>) <span class='kw'>if</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span> <span class='id identifier rubyid_name'>name</span>
    <span class='const'>String</span> <span class='op'>===</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>?</span> <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>() </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_content'>content</span><span class='embexpr_end'>}</span><span class='tstring_content'>; end</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>:</span> <span class='id identifier rubyid_define_method'>define_method</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_content'>content</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete-class_method">
  <h3 class='signature '>
    .<strong>delete</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1538-L1538'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1538' data-end='1538'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1538</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'><a href="Delegator.html#delete-instance_method" title="Sinatra::Delegator#delete (method)">delete</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)  <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DELETE</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disable-class_method">
  <h3 class='signature '>
    .<strong>disable</strong>(*opts)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Same as calling <code>set &lt;code&gt;:option&lt;/code&gt;, false</code> for each of the given options.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1388-L1390'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1388' data-end='1390'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1388</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_disable'><a href="Delegator.html#disable-instance_method" title="Sinatra::Delegator#disable (method)">disable</a></span>(<span class='op'>*</span><span class='id identifier rubyid_opts'>opts</span>)
  <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='kw'>false</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enable-class_method">
  <h3 class='signature '>
    .<strong>enable</strong>(*opts)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Same as calling <code>set &lt;code&gt;:option&lt;/code&gt;, true</code> for each of the given options.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1383-L1385'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1383' data-end='1385'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1383</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_enable'><a href="Delegator.html#enable-instance_method" title="Sinatra::Delegator#enable (method)">enable</a></span>(<span class='op'>*</span><span class='id identifier rubyid_opts'>opts</span>)
  <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='kw'>true</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="error-class_method">
  <h3 class='signature '>
    .<strong>error</strong>(*codes, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Define a custom error handler. Optionally takes either an Exception
class, or an HTTP status code to specify which errors should be
handled.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1395-L1401'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1395' data-end='1401'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1395</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_error'><a href="Delegator.html#error-instance_method" title="Sinatra::Delegator#error (method)">error</a></span>(<span class='op'>*</span><span class='id identifier rubyid_codes'>codes</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_args'>args</span>  <span class='op'>=</span> <span class='id identifier rubyid_compile!'><a href="#compile!-class_method" title="Sinatra::Base.compile! (method)">compile!</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ERROR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_codes'>codes</span> <span class='op'>=</span> <span class='id identifier rubyid_codes'>codes</span>.<span class='id identifier rubyid_flat_map'>flat_map</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='const'>Array</span>))
  <span class='id identifier rubyid_codes'>codes</span> <span class='op'>&lt;&lt;</span> <span class='const'>Exception</span> <span class='kw'>if</span> <span class='id identifier rubyid_codes'>codes</span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_codes'>codes</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'><a href="NotFound.html" title="Sinatra::NotFound (class)">NotFound</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_codes'>codes</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='int'>404</span>)
  <span class='id identifier rubyid_codes'>codes</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> (<span class='ivar'>@errors</span>[<span class='id identifier rubyid_c'>c</span>] <span class='op'>||=</span> []) <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_args'>args</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="extensions-class_method">
  <h3 class='signature '>
    .<strong>extensions</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p><a href="Extension.html" title="Sinatra::Extension (module)"><code>Extension</code></a> modules registered on this class and all superclasses.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1323-L1329'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1323' data-end='1329'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1323</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extensions'>extensions</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_extensions'>extensions</span>)
    (<span class='ivar'>@extensions</span> <span class='op'>+</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_extensions'>extensions</span>).<span class='id identifier rubyid_uniq'>uniq</span>
  <span class='kw'>else</span>
    <span class='ivar'>@extensions</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="force_encoding-class_method">
  <h3 class='signature priv'>
    .<strong>force_encoding</strong>(data, encoding = default_encoding)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Force data to specified encoding. It defaults to settings.default_encoding
which is UTF-8 by default</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1909-L1920'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1909' data-end='1920'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1909</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_default_encoding'>default_encoding</span>)
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>==</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span> <span class='op'>||</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Tempfile</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_force_encoding'>force_encoding</span>
    <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_encoding'>encoding</span>).<span class='id identifier rubyid_encode!'>encode!</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_each_value'>each_value</span>
    <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_each_value'>each_value</span> { <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span>) }
  <span class='kw'>elsif</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_each'>each</span>
    <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span>) }
  <span class='kw'>end</span>
  <span class='id identifier rubyid_data'>data</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_method-class_method">
  <h3 class='signature priv'>
    .<strong>generate_method</strong>(method_name, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1783-L1788'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1783' data-end='1788'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1783</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_method'>generate_method</span>(<span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_define_method'>define_method</span>(<span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_method'>method</span> <span class='op'>=</span> <span class='id identifier rubyid_instance_method'>instance_method</span> <span class='id identifier rubyid_method_name'>method_name</span>
  <span class='id identifier rubyid_remove_method'>remove_method</span> <span class='id identifier rubyid_method_name'>method_name</span>
  <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get-class_method">
  <h3 class='signature '>
    .<strong>get</strong>(path, opts = {}, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Defining a <code>GET</code> handler also automatically defines
a <code>HEAD</code> handler.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1526-L1532'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1526' data-end='1532'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1526</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get'><a href="Delegator.html#get-instance_method" title="Sinatra::Delegator#get (method)">get</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_conditions'>conditions</span> <span class='op'>=</span> <span class='ivar'>@conditions</span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GET</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)

  <span class='ivar'>@conditions</span> <span class='op'>=</span> <span class='id identifier rubyid_conditions'>conditions</span>
  <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="head-class_method">
  <h3 class='signature '>
    .<strong>head</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1540-L1540'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1540' data-end='1540'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1540</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_head'><a href="Delegator.html#head-instance_method" title="Sinatra::Delegator#head (method)">head</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)    <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>    <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="helpers-class_method">
  <h3 class='signature '>
    .<strong>helpers</strong>(*extensions, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Makes the methods defined in the block and in the Modules given
in <code>extensions</code> available to the handlers and templates</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1552-L1555'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1552' data-end='1555'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1552</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_helpers'><a href="Delegator.html#helpers-instance_method" title="Sinatra::Delegator#helpers (method)">helpers</a></span>(<span class='op'>*</span><span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)   <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_include'>include</span>(<span class='op'>*</span><span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span>) <span class='kw'>if</span> <span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span>.<span class='id identifier rubyid_any?'>any?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="host_name-class_method">
  <h3 class='signature priv'>
    .<strong>host_name</strong>(pattern)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Condition for matching host name. Parameter might be String or Regexp.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1733-L1735'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1733' data-end='1735'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1733</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_host_name'>host_name</span>(<span class='id identifier rubyid_pattern'>pattern</span>)
  <span class='id identifier rubyid_condition'><a href="#condition-class_method" title="Sinatra::Base.condition (method)">condition</a></span> { <span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>===</span> <span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span>.<span class='id identifier rubyid_host'>host</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inherited-class_method">
  <h3 class='signature priv'>
    .<strong>inherited</strong>(subclass)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1879-L1883'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1879' data-end='1883'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1879</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inherited'>inherited</span>(<span class='id identifier rubyid_subclass'>subclass</span>)
  <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_reset!'><a href="#reset!-class_method" title="Sinatra::Base.reset! (method)">reset!</a></span>
  <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_set'><a href="#set-class_method" title="Sinatra::Base.set (method)">set</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_app_file'>app_file</span><span class='comma'>,</span> <span class='id identifier rubyid_caller_files'><a href="#caller_files-class_method" title="Sinatra::Base.caller_files (method)">caller_files</a></span>.<span class='id identifier rubyid_first'>first</span> <span class='kw'>unless</span> <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_app_file?'>app_file?</span>
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inline_templates=-class_method">
  <h3 class='signature '>
    .<strong>inline_templates=</strong>(file = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Load embedded templates from the file; uses the caller&#39;s <strong>FILE</strong>
when no file is specified.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1421-L1451'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1421' data-end='1451'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1421</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inline_templates='>inline_templates=</span>(<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> (<span class='id identifier rubyid_caller_files'><a href="#caller_files-class_method" title="Sinatra::Base.caller_files (method)">caller_files</a></span>.<span class='id identifier rubyid_first'>first</span> <span class='op'>||</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='gvar'>$0</span>)) <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>==</span> <span class='kw'>true</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>IO</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_binread'>binread</span>) <span class='op'>?</span> <span class='op'>::</span><span class='const'>IO</span>.<span class='id identifier rubyid_binread'>binread</span>(<span class='id identifier rubyid_file'>file</span>) <span class='op'>:</span> <span class='op'>::</span><span class='const'>IO</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_file'>file</span>)
    <span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^__END__$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>2</span>)
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
    <span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_data'>data</span>

  <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([^\n]*\n)?#[^\n]*coding: *(\S+)</span><span class='regexp_end'>/m</span></span>
               <span class='backref'>$2</span>
             <span class='kw'>else</span>
               <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_default_encoding'>default_encoding</span>
             <span class='kw'>end</span>

  <span class='id identifier rubyid_lines'>lines</span> <span class='op'>=</span> <span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>+</span> <span class='int'>1</span>
  <span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_force_encoding'><a href="#force_encoding-class_method" title="Sinatra::Base.force_encoding (method)">force_encoding</a></span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span>
  <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_each_line'>each_line</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
    <span class='id identifier rubyid_lines'>lines</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^@@\s*(.*\S)\s*$</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span> <span class='op'>=</span> <span class='id identifier rubyid_force_encoding'><a href="#force_encoding-class_method" title="Sinatra::Base.force_encoding (method)">force_encoding</a></span>(<span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span>)
      <span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span>[<span class='backref'>$1</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>] <span class='op'>=</span> [<span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_lines'>lines</span>]
    <span class='kw'>elsif</span> <span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span>
      <span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_line'>line</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="invoke_hook-class_method">
  <h3 class='signature priv'>
    .<strong>invoke_hook</strong>(name, *args)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1779-L1781'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1779' data-end='1781'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1779</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_invoke_hook'>invoke_hook</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>) <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='id identifier rubyid_name'>name</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="layout-class_method">
  <h3 class='signature '>
    .<strong>layout</strong>(name = :layout, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Define the layout template. The block must return the template source.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1415-L1417'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1415' data-end='1417'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1415</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_layout'><a href="Delegator.html#layout-instance_method" title="Sinatra::Delegator#layout (method)">layout</a></span>(<span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_layout'><a href="Delegator.html#layout-instance_method" title="Sinatra::Delegator#layout (method)">layout</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="link-class_method">
  <h3 class='signature '>
    .<strong>link</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1546-L1546'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1546' data-end='1546'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1546</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_link'><a href="Delegator.html#link-instance_method" title="Sinatra::Delegator#link (method)">link</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)    <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>LINK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>    <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="methodoverride=-class_method">
  <h3 class='signature '>
    .<strong>methodoverride=</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1957-L1957'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1957' data-end='1957'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1957</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_methodoverride='>methodoverride=</span> <span class='id identifier rubyid_method_override='>method_override=</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="methodoverride?-class_method">
  <h3 class='signature '>
    .<strong>methodoverride?</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1956-L1956'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1956' data-end='1956'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1956</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_methodoverride?'>methodoverride?</span> <span class='id identifier rubyid_method_override?'>method_override?</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="middleware-class_method">
  <h3 class='signature '>
    .<strong>middleware</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Middleware used in this class and all superclasses.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1332-L1338'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1332' data-end='1338'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1332</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_middleware'>middleware</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_middleware'>middleware</span>)
    <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_middleware'>middleware</span> <span class='op'>+</span> <span class='ivar'>@middleware</span>
  <span class='kw'>else</span>
    <span class='ivar'>@middleware</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mime_type-class_method">
  <h3 class='signature '>
    .<strong>mime_type</strong>(type, value = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Lookup or register a mime type in Rack&#39;s mime registry.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1454-L1462'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1454' data-end='1462'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1454</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mime_type'><a href="Delegator.html#mime_type-instance_method" title="Sinatra::Delegator#mime_type (method)">mime_type</a></span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_type'>type</span>      <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span>)

  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_to_s'>to_s</span>[<span class='int'>0</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>return</span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>Mime</span>.<span class='id identifier rubyid_mime_type'>mime_type</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='kw'>nil</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span>

  <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>Mime</span><span class='op'>::</span><span class='const'>MIME_TYPES</span>[<span class='id identifier rubyid_type'>type</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mime_types-class_method">
  <h3 class='signature '>
    .<strong>mime_types</strong>(type)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>provides all mime types matching type, including deprecated types:
  mime_types :html # =&gt; [&#39;text/html&#39;]
  mime_types :js   # =&gt; [&#39;application/javascript&#39;, &#39;text/javascript&#39;]</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1467-L1476'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1467' data-end='1476'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1467</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mime_types'>mime_types</span>(<span class='id identifier rubyid_type'>type</span>)
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_mime_type'><a href="Delegator.html#mime_type-instance_method" title="Sinatra::Delegator#mime_type (method)">mime_type</a></span> <span class='id identifier rubyid_type'>type</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^application/(xml|javascript)$</span><span class='regexp_end'>}</span></span>
    [<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>]
  <span class='kw'>elsif</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^text/(xml|javascript)$</span><span class='regexp_end'>}</span></span>
    [<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>]
  <span class='kw'>else</span>
    [<span class='id identifier rubyid_type'>type</span>]
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new!-class_method">
  <h3 class='signature '>
    .<strong>new!</strong>(app = nil, **_kwargs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Alias for <a href="#new-class_method" title="Sinatra::Base.new (method)">.new</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1652-L1652'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1652' data-end='1652'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1652</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_new!'>new!</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_new!'>new!</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="not_found-class_method">
  <h3 class='signature '>
    .<strong>not_found</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Sugar for <code>error(404) { ... }</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1404-L1406'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1404' data-end='1406'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1404</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_not_found'><a href="Delegator.html#not_found-instance_method" title="Sinatra::Delegator#not_found (method)">not_found</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_error'><a href="Delegator.html#error-instance_method" title="Sinatra::Delegator#error (method)">error</a></span>(<span class='int'>404</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_start-class_method">
  <h3 class='signature '>
    .<strong>on_start</strong>(&amp;on_start_callback)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1497-L1499'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1497' data-end='1499'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1497</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_start'><a href="Delegator.html#on_start-instance_method" title="Sinatra::Delegator#on_start (method)">on_start</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span>)
  <span class='ivar'>@on_start_callback</span> <span class='op'>=</span> <span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_stop-class_method">
  <h3 class='signature '>
    .<strong>on_stop</strong>(&amp;on_stop_callback)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1501-L1503'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1501' data-end='1503'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1501</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_stop'><a href="Delegator.html#on_stop-instance_method" title="Sinatra::Delegator#on_stop (method)">on_stop</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>)
  <span class='ivar'>@on_stop_callback</span> <span class='op'>=</span> <span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="options-class_method">
  <h3 class='signature '>
    .<strong>options</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1542-L1542'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1542' data-end='1542'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1542</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPTIONS</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="patch-class_method">
  <h3 class='signature '>
    .<strong>patch</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1544-L1544'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1544' data-end='1544'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1544</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_patch'><a href="Delegator.html#patch-instance_method" title="Sinatra::Delegator#patch (method)">patch</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)   <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PATCH</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="post-class_method">
  <h3 class='signature '>
    .<strong>post</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1536-L1536'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1536' data-end='1536'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1536</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_post'><a href="Delegator.html#post-instance_method" title="Sinatra::Delegator#post (method)">post</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)    <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>POST</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>    <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prototype-class_method">
  <h3 class='signature '>
    .<strong>prototype</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>The prototype instance used to process requests.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1647-L1649'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1647' data-end='1649'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1647</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prototype'>prototype</span>
  <span class='ivar'>@prototype</span> <span class='op'>||=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="provides-class_method">
  <h3 class='signature priv'>
    .<strong>provides</strong>(*types)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Condition for matching mimetypes. Accepts file extensions.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1752-L1769'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1752' data-end='1769'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1752</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_provides'>provides</span>(<span class='op'>*</span><span class='id identifier rubyid_types'>types</span>)
  <span class='id identifier rubyid_types'>types</span>.<span class='id identifier rubyid_map!'>map!</span> { <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_mime_types'><a href="#mime_types-class_method" title="Sinatra::Base.mime_types (method)">mime_types</a></span>(<span class='id identifier rubyid_t'>t</span>) }
  <span class='id identifier rubyid_types'>types</span>.<span class='id identifier rubyid_flatten!'>flatten!</span>
  <span class='id identifier rubyid_condition'><a href="#condition-class_method" title="Sinatra::Base.condition (method)">condition</a></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_response_content_type'>response_content_type</span> <span class='op'>=</span> <span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span>]
    <span class='id identifier rubyid_preferred_type'>preferred_type</span> <span class='op'>=</span> <span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span>.<span class='id identifier rubyid_preferred_type'>preferred_type</span>(<span class='id identifier rubyid_types'>types</span>)

    <span class='kw'>if</span> <span class='id identifier rubyid_response_content_type'>response_content_type</span>
      <span class='id identifier rubyid_types'>types</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_response_content_type'>response_content_type</span>) <span class='op'>||</span> <span class='id identifier rubyid_types'>types</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_response_content_type'>response_content_type</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[^;]+</span><span class='regexp_end'>/</span></span>])
    <span class='kw'>elsif</span> <span class='id identifier rubyid_preferred_type'>preferred_type</span>
      <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span> <span class='op'>=</span> (<span class='id identifier rubyid_preferred_type'>preferred_type</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>) <span class='op'>?</span> <span class='id identifier rubyid_preferred_type'>preferred_type</span>.<span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span> <span class='op'>:</span> {})
      <span class='id identifier rubyid_content_type'>content_type</span>(<span class='id identifier rubyid_preferred_type'>preferred_type</span><span class='comma'>,</span> <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>)
      <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="put-class_method">
  <h3 class='signature '>
    .<strong>put</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1534-L1534'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1534' data-end='1534'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1534</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_put'><a href="Delegator.html#put-instance_method" title="Sinatra::Delegator#put (method)">put</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)     <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PUT</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>     <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quit!-class_method">
  <h3 class='signature '>
    .<strong>quit!</strong>  
    <span class='aliases'>Also known as: <span class='names'>.stop!</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Stop the self-hosted server if running.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1586-L1596'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1586' data-end='1596'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1586</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quit!'>quit!</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_running?'><a href="#running%3F-class_method" title="Sinatra::Base.running? (method)">running?</a></span>

  <span class='comment'># Use Thin&#39;s hard #stop! if available, otherwise just #stop.
</span>  <span class='id identifier rubyid_running_server'>running_server</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_stop!'><a href="#stop!-class_method" title="Sinatra::Base.stop! (method)">stop!</a></span>) <span class='op'>?</span> <span class='id identifier rubyid_running_server'>running_server</span>.<span class='id identifier rubyid_stop!'><a href="#stop!-class_method" title="Sinatra::Base.stop! (method)">stop!</a></span> <span class='op'>:</span> <span class='id identifier rubyid_running_server'>running_server</span>.<span class='id identifier rubyid_stop'>stop</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>== Sinatra has ended his set (crowd applauds)</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_suppress_messages?'><a href="#suppress_messages%3F-class_method" title="Sinatra::Base.suppress_messages? (method)">suppress_messages?</a></span>
  <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_running_server'>running_server</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_handler_name'>handler_name</span><span class='comma'>,</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>.<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_on_stop_callback'><a href="#on_stop_callback-class_method" title="Sinatra::Base.on_stop_callback (method)">on_stop_callback</a></span>.<span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="register-class_method">
  <h3 class='signature '>
    .<strong>register</strong>(*extensions, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Register an extension. Alternatively take a block from which an
extension will be created and registered on the fly.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1559-L1566'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1559' data-end='1566'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1559</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_register'><a href="Delegator.html#register-instance_method" title="Sinatra::Delegator#register (method)">register</a></span>(<span class='op'>*</span><span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span> <span class='op'>&lt;&lt;</span> <span class='const'>Module</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='ivar'>@extensions</span> <span class='op'>+=</span> <span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span>
  <span class='id identifier rubyid_extensions'><a href="#extensions-class_method" title="Sinatra::Base.extensions (method)">extensions</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_extension'>extension</span><span class='op'>|</span>
    <span class='id identifier rubyid_extend'>extend</span> <span class='id identifier rubyid_extension'>extension</span>
    <span class='id identifier rubyid_extension'>extension</span>.<span class='id identifier rubyid_registered'>registered</span>(<span class='kw'>self</span>) <span class='kw'>if</span> <span class='id identifier rubyid_extension'>extension</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_registered'>registered</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset!-class_method">
  <h3 class='signature '>
    .<strong>reset!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Removes all routes, filters, middleware and extension hooks from the
current class (not routes/filters/... defined by its superclass).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1306-L1320'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1306' data-end='1320'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1306</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset!'>reset!</span>
  <span class='ivar'>@conditions</span>     <span class='op'>=</span> []
  <span class='ivar'>@routes</span>         <span class='op'>=</span> {}
  <span class='ivar'>@filters</span>        <span class='op'>=</span> { <span class='label'>before:</span> []<span class='comma'>,</span> <span class='label'>after:</span> [] }
  <span class='ivar'>@errors</span>         <span class='op'>=</span> {}
  <span class='ivar'>@middleware</span>     <span class='op'>=</span> []
  <span class='ivar'>@prototype</span>      <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@extensions</span>     <span class='op'>=</span> []

  <span class='ivar'>@templates</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span>)
                 <span class='const'>Hash</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Sinatra::Base.new (method)">new</a></span> { <span class='op'>|</span><span class='id identifier rubyid__hash'>_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span>[<span class='id identifier rubyid_key'>key</span>] }
               <span class='kw'>else</span>
                 {}
               <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="route-class_method">
  <h3 class='signature priv'>
    .<strong>route</strong>(verb, path, options = {}, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1771-L1777'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1771' data-end='1777'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1771</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_route'>route</span>(<span class='id identifier rubyid_verb'>verb</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_enable'><a href="Delegator.html#enable-instance_method" title="Sinatra::Delegator#enable (method)">enable</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_empty_path_info'>empty_path_info</span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_empty_path_info'>empty_path_info</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_signature'>signature</span> <span class='op'>=</span> <span class='id identifier rubyid_compile!'><a href="#compile!-class_method" title="Sinatra::Base.compile! (method)">compile!</a></span>(<span class='id identifier rubyid_verb'>verb</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>)
  (<span class='ivar'>@routes</span>[<span class='id identifier rubyid_verb'>verb</span>] <span class='op'>||=</span> []) <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_signature'>signature</span>
  <span class='id identifier rubyid_invoke_hook'><a href="#invoke_hook-class_method" title="Sinatra::Base.invoke_hook (method)">invoke_hook</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_route_added'>route_added</span><span class='comma'>,</span> <span class='id identifier rubyid_verb'>verb</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_signature'>signature</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run!-class_method">
  <h3 class='signature '>
    .<strong>run!</strong>(options = {}, &amp;block)  
    <span class='aliases'>Also known as: <span class='names'>.start!</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Run the <a href="../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> app as a self-hosted server using
Puma, Falcon, or WEBrick (in that order). If given a block, will call
with the constructed handler once we have taken the stage.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1603-L1637'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1603' data-end='1637'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1603</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run!'>run!</span>(<span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>unless</span> <span class='kw'>defined?</span>(<span class='const'>Rackup</span><span class='op'>::</span><span class='const'>Handler</span>)
    <span class='id identifier rubyid_rackup_warning'>rackup_warning</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;~MISSING_RACKUP</span>
<span class='ignored_sp'>      </span><span class='tstring_content'>Sinatra could not start, the &quot;rackup&quot; gem was not found!
</span><span class='tstring_content'>
</span><span class='ignored_sp'>      </span><span class='tstring_content'>Add it to your bundle with:
</span><span class='tstring_content'>
</span><span class='ignored_sp'>      </span><span class='tstring_content'>    bundle add rackup
</span><span class='tstring_content'>
</span><span class='ignored_sp'>      </span><span class='tstring_content'>or install it with:
</span><span class='tstring_content'>
</span><span class='ignored_sp'>      </span><span class='tstring_content'>    gem install rackup
</span><span class='tstring_content'>
</span><span class='heredoc_end'>    MISSING_RACKUP
</span>    <span class='id identifier rubyid_warn'>warn</span> <span class='id identifier rubyid_rackup_warning'>rackup_warning</span>
    <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_running?'><a href="#running%3F-class_method" title="Sinatra::Base.running? (method)">running?</a></span>

  <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>
  <span class='id identifier rubyid_handler'>handler</span>         <span class='op'>=</span> <span class='const'>Rackup</span><span class='op'>::</span><span class='const'>Handler</span>.<span class='id identifier rubyid_pick'>pick</span>(<span class='id identifier rubyid_server'>server</span>)
  <span class='id identifier rubyid_handler_name'>handler_name</span>    <span class='op'>=</span> <span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*::</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_server_settings'>server_settings</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_server_settings'>server_settings</span>) <span class='op'>?</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_server_settings'>server_settings</span> <span class='op'>:</span> {}
  <span class='id identifier rubyid_server_settings'>server_settings</span>.<span class='id identifier rubyid_merge!'>merge!</span>(<span class='label'>Port:</span> <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='label'>Host:</span> <span class='id identifier rubyid_bind'>bind</span>)

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_start_server'><a href="#start_server-class_method" title="Sinatra::Base.start_server (method)">start_server</a></span>(<span class='id identifier rubyid_handler'>handler</span><span class='comma'>,</span> <span class='id identifier rubyid_server_settings'>server_settings</span><span class='comma'>,</span> <span class='id identifier rubyid_handler_name'>handler_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EADDRINUSE</span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>== Someone is already performing on port </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_quit!'><a href="#quit!-class_method" title="Sinatra::Base.quit! (method)">quit!</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set-class_method">
  <h3 class='signature '>
    .<strong>set</strong>(option, value = (not_set = true), ignore_setter = false, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Sets an option to the given value.  If the value is a proc,
the proc will be called every time the option is accessed.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1342-L1380'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1342' data-end='1380'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1342</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span>(<span class='id identifier rubyid_option'>option</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> (<span class='id identifier rubyid_not_set'>not_set</span> <span class='op'>=</span> <span class='kw'>true</span>)<span class='comma'>,</span> <span class='id identifier rubyid_ignore_setter'>ignore_setter</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_not_set'>not_set</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_not_set'>not_set</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_not_set'>not_set</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span> <span class='kw'>unless</span> <span class='id identifier rubyid_option'>option</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_each'>each</span>)

    <span class='id identifier rubyid_option'>option</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span>(<span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>) }
    <span class='kw'>return</span> <span class='kw'>self</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option'>option</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_ignore_setter'>ignore_setter</span>
    <span class='kw'>return</span> <span class='id identifier rubyid___send__'>__send__</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option'>option</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_setter'>setter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='op'>|</span><span class='id identifier rubyid_val'>val</span><span class='op'>|</span> <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='id identifier rubyid_option'>option</span><span class='comma'>,</span> <span class='id identifier rubyid_val'>val</span><span class='comma'>,</span> <span class='kw'>true</span> }
  <span class='id identifier rubyid_getter'>getter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='id identifier rubyid_value'>value</span> }

  <span class='kw'>case</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>when</span> <span class='const'>Proc</span>
    <span class='id identifier rubyid_getter'>getter</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>when</span> <span class='const'>Symbol</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='const'>FalseClass</span><span class='comma'>,</span> <span class='const'>TrueClass</span><span class='comma'>,</span> <span class='const'>NilClass</span>
    <span class='id identifier rubyid_getter'>getter</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_inspect'>inspect</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='id identifier rubyid_setter'>setter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_val'>val</span><span class='op'>|</span>
      <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_merge'>merge</span> <span class='id identifier rubyid_val'>val</span> <span class='kw'>if</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id identifier rubyid_val'>val</span>
      <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='id identifier rubyid_option'>option</span><span class='comma'>,</span> <span class='id identifier rubyid_val'>val</span><span class='comma'>,</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_define_singleton'><a href="#define_singleton-class_method" title="Sinatra::Base.define_singleton (method)">define_singleton</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option'>option</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_setter'>setter</span>)
  <span class='id identifier rubyid_define_singleton'><a href="#define_singleton-class_method" title="Sinatra::Base.define_singleton (method)">define_singleton</a></span>(<span class='id identifier rubyid_option'>option</span><span class='comma'>,</span> <span class='id identifier rubyid_getter'>getter</span>)
  <span class='id identifier rubyid_define_singleton'><a href="#define_singleton-class_method" title="Sinatra::Base.define_singleton (method)">define_singleton</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option'>option</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!!</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option'>option</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>unless</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option'>option</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="settings-class_method">
  <h3 class='signature '>
    .<strong>settings</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Access settings defined with <code>Base</code>.set.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1016-L1018'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1016' data-end='1018'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1016</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_common_logger-class_method">
  <h3 class='signature priv'>
    .<strong>setup_common_logger</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1841-L1843'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1841' data-end='1843'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1841</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_common_logger'>setup_common_logger</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'><a href="CommonLogger.html" title="Sinatra::CommonLogger (class)">CommonLogger</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_custom_logger-class_method">
  <h3 class='signature priv'>
    .<strong>setup_custom_logger</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1845-L1851'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1845' data-end='1851'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1845</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_custom_logger'>setup_custom_logger</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_logging'>logging</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_int'>to_int</span>
    <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>Logger</span><span class='comma'>,</span> <span class='id identifier rubyid_logging'>logging</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>Logger</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_default_middleware-class_method">
  <h3 class='signature priv'>
    .<strong>setup_default_middleware</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1814-L1822'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1814' data-end='1822'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1814</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_default_middleware'>setup_default_middleware</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="ExtendedRack.html" title="Sinatra::ExtendedRack (class)">ExtendedRack</a></span>
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="ShowExceptions.html" title="Sinatra::ShowExceptions (class)">ShowExceptions</a></span>       <span class='kw'>if</span> <span class='id identifier rubyid_show_exceptions?'>show_exceptions?</span>
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>MethodOverride</span> <span class='kw'>if</span> <span class='id identifier rubyid_method_override?'>method_override?</span>
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>Head</span>
  <span class='id identifier rubyid_setup_logging'><a href="#setup_logging-class_method" title="Sinatra::Base.setup_logging (method)">setup_logging</a></span>    <span class='id identifier rubyid_builder'>builder</span>
  <span class='id identifier rubyid_setup_sessions'><a href="#setup_sessions-class_method" title="Sinatra::Base.setup_sessions (method)">setup_sessions</a></span>   <span class='id identifier rubyid_builder'>builder</span>
  <span class='id identifier rubyid_setup_protection'><a href="#setup_protection-class_method" title="Sinatra::Base.setup_protection (method)">setup_protection</a></span> <span class='id identifier rubyid_builder'>builder</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_logging-class_method">
  <h3 class='signature priv'>
    .<strong>setup_logging</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1828-L1835'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1828' data-end='1835'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1828</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_logging'>setup_logging</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_logging?'>logging?</span>
    <span class='id identifier rubyid_setup_common_logger'><a href="#setup_common_logger-class_method" title="Sinatra::Base.setup_common_logger (method)">setup_common_logger</a></span>(<span class='id identifier rubyid_builder'>builder</span>)
    <span class='id identifier rubyid_setup_custom_logger'><a href="#setup_custom_logger-class_method" title="Sinatra::Base.setup_custom_logger (method)">setup_custom_logger</a></span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='kw'>elsif</span> <span class='id identifier rubyid_logging'>logging</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_setup_null_logger'><a href="#setup_null_logger-class_method" title="Sinatra::Base.setup_null_logger (method)">setup_null_logger</a></span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_middleware-class_method">
  <h3 class='signature priv'>
    .<strong>setup_middleware</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1824-L1826'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1824' data-end='1826'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1824</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_middleware'>setup_middleware</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='id identifier rubyid_middleware'><a href="#middleware-class_method" title="Sinatra::Base.middleware (method)">middleware</a></span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span>(<span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_b'>b</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_null_logger-class_method">
  <h3 class='signature priv'>
    .<strong>setup_null_logger</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1837-L1839'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1837' data-end='1839'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1837</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_null_logger'>setup_null_logger</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>NullLogger</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_protection-class_method">
  <h3 class='signature priv'>
    .<strong>setup_protection</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1853-L1868'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1853' data-end='1868'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1853</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_protection'>setup_protection</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_protection?'>protection?</span>

  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span> <span class='op'>=</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id identifier rubyid_protection'>protection</span> <span class='op'>?</span> <span class='id identifier rubyid_protection'>protection</span>.<span class='id identifier rubyid_dup'>dup</span> <span class='op'>:</span> {}
  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span> <span class='op'>=</span> {
    <span class='label'>img_src:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;self&#39; data:</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>font_src:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;self&#39;</span><span class='tstring_end'>&quot;</span></span>
  }.<span class='id identifier rubyid_merge'>merge</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>

  <span class='id identifier rubyid_protect_session'>protect_session</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_session'>session</span>) { <span class='id identifier rubyid_sessions?'>sessions?</span> }
  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_without_session'>without_session</span>] <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_protect_session'>protect_session</span>

  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_reaction'>reaction</span>] <span class='op'>||=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_drop_session'>drop_session</span>

  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'><a href="../Rack/Protection.html" title="Rack::Protection (module)">Protection</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_sessions-class_method">
  <h3 class='signature priv'>
    .<strong>setup_sessions</strong>(builder)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1870-L1877'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1870' data-end='1877'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1870</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_sessions'>setup_sessions</span>(<span class='id identifier rubyid_builder'>builder</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_sessions?'>sessions?</span>

  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span> <span class='op'>=</span> {}
  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_secret'>secret</span>] <span class='op'>=</span> <span class='id identifier rubyid_session_secret'>session_secret</span> <span class='kw'>if</span> <span class='id identifier rubyid_session_secret?'>session_secret?</span>
  <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_merge!'>merge!</span> <span class='id identifier rubyid_sessions'>sessions</span>.<span class='id identifier rubyid_to_hash'>to_hash</span> <span class='kw'>if</span> <span class='id identifier rubyid_sessions'>sessions</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_hash'>to_hash</span>
  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_use'><a href="#use-class_method" title="Sinatra::Base.use (method)">use</a></span> <span class='id identifier rubyid_session_store'>session_store</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_traps-class_method">
  <h3 class='signature priv'>
    .<strong>setup_traps</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1709-L1722'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1709' data-end='1722'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1709</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_traps'>setup_traps</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_traps?'>traps?</span>

  <span class='id identifier rubyid_at_exit'>at_exit</span> { <span class='id identifier rubyid_quit!'><a href="#quit!-class_method" title="Sinatra::Base.quit! (method)">quit!</a></span> }

  <span class='qsymbols'><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>INT</span><span class='words_sep'> </span><span class='tstring_content'>TERM</span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_signal'>signal</span><span class='op'>|</span>
    <span class='id identifier rubyid_old_handler'>old_handler</span> <span class='op'>=</span> <span class='id identifier rubyid_trap'>trap</span>(<span class='id identifier rubyid_signal'>signal</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_quit!'><a href="#quit!-class_method" title="Sinatra::Base.quit! (method)">quit!</a></span>
      <span class='id identifier rubyid_old_handler'>old_handler</span>.<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_old_handler'>old_handler</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_traps'>traps</span><span class='comma'>,</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start!-class_method">
  <h3 class='signature '>
    .<strong>start!</strong>(options = {}, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Alias for <a href="#run!-class_method" title="Sinatra::Base.run! (method)">.run!</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1639-L1639'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1639' data-end='1639'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1639</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_start!'>start!</span> <span class='id identifier rubyid_run!'><a href="#run!-class_method" title="Sinatra::Base.run! (method)">run!</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start_server-class_method">
  <h3 class='signature priv'>
    .<strong>start_server</strong>(handler, server_settings, handler_name)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Starts the server by running the <a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> Handler.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1686-L1703'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1686' data-end='1703'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1686</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_server'>start_server</span>(<span class='id identifier rubyid_handler'>handler</span><span class='comma'>,</span> <span class='id identifier rubyid_server_settings'>server_settings</span><span class='comma'>,</span> <span class='id identifier rubyid_handler_name'>handler_name</span>)
  <span class='comment'># Ensure we initialize middleware before startup, to match standard Rack
</span>  <span class='comment'># behavior, by ensuring an instance exists:
</span>  <span class='id identifier rubyid_prototype'><a href="#prototype-class_method" title="Sinatra::Base.prototype (method)">prototype</a></span>
  <span class='comment'># Run the instance we created:
</span>  <span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_run'>run</span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_server_settings'>server_settings</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_server'>server</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_suppress_messages?'><a href="#suppress_messages%3F-class_method" title="Sinatra::Base.suppress_messages? (method)">suppress_messages?</a></span>
      <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>== Sinatra (v</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'><a href="../Sinatra.html#VERSION-constant" title="Sinatra::VERSION (constant)">VERSION</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>) has taken the stage on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_environment'>environment</span><span class='embexpr_end'>}</span><span class='tstring_content'> with backup from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_handler_name'>handler_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_setup_traps'><a href="#setup_traps-class_method" title="Sinatra::Base.setup_traps (method)">setup_traps</a></span>
    <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_running_server'>running_server</span><span class='comma'>,</span> <span class='id identifier rubyid_server'>server</span>
    <span class='id identifier rubyid_set'><a href="Delegator.html#set-instance_method" title="Sinatra::Delegator#set (method)">set</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_handler_name'>handler_name</span><span class='comma'>,</span>   <span class='id identifier rubyid_handler_name'>handler_name</span>
    <span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_threaded'>threaded</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_threaded'>threaded</span> <span class='kw'>if</span> <span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_threaded='>threaded=</span>
    <span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span>.<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_on_start_callback'><a href="#on_start_callback-class_method" title="Sinatra::Base.on_start_callback (method)">on_start_callback</a></span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_server'>server</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stop!-class_method">
  <h3 class='signature '>
    .<strong>stop!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Alias for <a href="#quit!-class_method" title="Sinatra::Base.quit! (method)">.quit!</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1598-L1598'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1598' data-end='1598'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1598</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_stop!'>stop!</span> <span class='id identifier rubyid_quit!'><a href="#quit!-class_method" title="Sinatra::Base.quit! (method)">quit!</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="synchronize-class_method">
  <h3 class='signature priv'>
    .<strong>synchronize</strong>(&amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1886-L1892'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1886' data-end='1892'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1886</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_synchronize'>synchronize</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_lock?'>lock?</span>
    <span class='cvar'>@@mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>else</span>
    <span class='kw'>yield</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="template-class_method">
  <h3 class='signature '>
    .<strong>template</strong>(name, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Define a named template. The block must return the template source.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1409-L1412'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1409' data-end='1412'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1409</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_template'><a href="Delegator.html#template-instance_method" title="Sinatra::Delegator#template (method)">template</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>.<span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_templates'><a href="#templates-class_method" title="Sinatra::Base.templates (method)">templates</a></span>[<span class='id identifier rubyid_name'>name</span>] <span class='op'>=</span> [<span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_to_i'>to_i</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unlink-class_method">
  <h3 class='signature '>
    .<strong>unlink</strong>(path, opts = {}, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1548-L1548'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1548' data-end='1548'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1548</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unlink'><a href="Delegator.html#unlink-instance_method" title="Sinatra::Delegator#unlink (method)">unlink</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)  <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UNLINK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="use-class_method">
  <h3 class='signature '>
    .<strong>use</strong>(middleware, *args, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Use the specified <a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> middleware</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1579-L1582'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1579' data-end='1582'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1579</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_use'><a href="Delegator.html#use-instance_method" title="Sinatra::Delegator#use (method)">use</a></span>(<span class='id identifier rubyid_middleware'><a href="#middleware-class_method" title="Sinatra::Base.middleware (method)">middleware</a></span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='ivar'>@prototype</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@middleware</span> <span class='op'>&lt;&lt;</span> [<span class='id identifier rubyid_middleware'><a href="#middleware-class_method" title="Sinatra::Base.middleware (method)">middleware</a></span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="user_agent-class_method">
  <h3 class='signature priv'>
    .<strong>user_agent</strong>(pattern)   <span class="extras">(<span class='priv'>private</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>.agent</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Condition for matching user agent. Parameter should be Regexp.
Will set params[:agent].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1739-L1748'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1739' data-end='1748'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1739</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_user_agent'>user_agent</span>(<span class='id identifier rubyid_pattern'>pattern</span>)
  <span class='id identifier rubyid_condition'><a href="#condition-class_method" title="Sinatra::Base.condition (method)">condition</a></span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span>.<span class='id identifier rubyid_user_agent'>user_agent</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>=~</span> <span class='id identifier rubyid_pattern'>pattern</span>
      <span class='ivar'>@params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_agent'><a href="#agent-class_method" title="Sinatra::Base.agent (method)">agent</a></span>] <span class='op'>=</span> <span class='gvar'>$~</span>[<span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>]
      <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="warn_for_deprecation-class_method">
  <h3 class='signature priv'>
    .<strong>warn_for_deprecation</strong>(message)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>used for deprecation warnings</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1895-L1897'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1895' data-end='1897'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1895</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_warn_for_deprecation'>warn_for_deprecation</span>(<span class='id identifier rubyid_message'>message</span>)
  <span class='id identifier rubyid_warn'>warn</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\tfrom </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cleaned_caller'><a href="#cleaned_caller-class_method" title="Sinatra::Base.cleaned_caller (method)">cleaned_caller</a></span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="app-instance_method">
  <h3 class='signature rw first'>
    #<strong>app</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L977-L977'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='977' data-end='977'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 977</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_app'>app</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="env-instance_method">
  <h3 class='signature rw'>
    #<strong>env</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L977-L977'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='977' data-end='977'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 977</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="params-instance_method">
  <h3 class='signature rw'>
    #<strong>params</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L977-L977'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='977' data-end='977'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 977</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_params'>params</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="request-instance_method">
  <h3 class='signature rw'>
    #<strong>request</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L977-L977'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='977' data-end='977'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 977</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="response-instance_method">
  <h3 class='signature rw'>
    #<strong>response</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L977-L977'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='977' data-end='977'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 977</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_app'><a href="#app-instance_method" title="Sinatra::Base#app (method)">app</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_response'>response</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="template_cache-instance_method">
  <h3 class='signature ro'>
    #<strong>template_cache</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L978-L978'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='978' data-end='978'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 978</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span>   <span class='symbeg'>:</span><span class='id identifier rubyid_template_cache'>template_cache</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="call-instance_method">
  <h3 class='signature  first'>
    #<strong>call</strong>(env)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p><a href="../Rack.html" title="Rack (module)"><code>::Rack</code></a> call interface.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L989-L991'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='989' data-end='991'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 989</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>)
  <span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_call!'><a href="#call!-instance_method" title="Sinatra::Base#call! (method)">call!</a></span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="call!-instance_method">
  <h3 class='signature nodoc'>
    #<strong>call!</strong>(env)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L993-L1013'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='993' data-end='1013'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 993</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_call!'>call!</span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>) <span class='comment'># :nodoc:
</span>  <span class='ivar'>@env</span>      <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>
  <span class='ivar'>@params</span>   <span class='op'>=</span> <span class='const'><a href="IndifferentHash.html" title="Sinatra::IndifferentHash (class)">IndifferentHash</a></span>.<span class='id identifier rubyid_new'><a href="../Sinatra.html#new-class_method" title="Sinatra.new (method)">new</a></span>
  <span class='ivar'>@request</span>  <span class='op'>=</span> <span class='const'><a href="Request.html" title="Sinatra::Request (class)">Request</a></span>.<span class='id identifier rubyid_new'><a href="../Sinatra.html#new-class_method" title="Sinatra.new (method)">new</a></span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>)
  <span class='ivar'>@response</span> <span class='op'>=</span> <span class='const'><a href="Response.html" title="Sinatra::Response (class)">Response</a></span>.<span class='id identifier rubyid_new'><a href="../Sinatra.html#new-class_method" title="Sinatra.new (method)">new</a></span>
  <span class='ivar'>@pinned_response</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_template_cache'><a href="#template_cache-instance_method" title="Sinatra::Base#template_cache (method)">template_cache</a></span>.<span class='id identifier rubyid_clear'>clear</span> <span class='kw'>if</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_reload_templates'>reload_templates</span>

  <span class='id identifier rubyid_invoke'><a href="#invoke-instance_method" title="Sinatra::Base#invoke (method)">invoke</a></span> { <span class='id identifier rubyid_dispatch!'><a href="#dispatch!-instance_method" title="Sinatra::Base#dispatch! (method)">dispatch!</a></span> }
  <span class='id identifier rubyid_invoke'><a href="#invoke-instance_method" title="Sinatra::Base#invoke (method)">invoke</a></span> { <span class='id identifier rubyid_error_block!'><a href="#error_block!-instance_method" title="Sinatra::Base#error_block! (method)">error_block!</a></span>(<span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>.<span class='id identifier rubyid_status'>status</span>) } <span class='kw'>unless</span> <span class='ivar'>@env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.error</span><span class='tstring_end'>&#39;</span></span>]

  <span class='kw'>unless</span> <span class='ivar'>@response</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span>]
    <span class='kw'>if</span> <span class='const'>Array</span> <span class='op'>===</span> <span class='id identifier rubyid_body'>body</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_body'>body</span>[<span class='int'>0</span>].<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_content_type'>content_type</span>)
      <span class='id identifier rubyid_content_type'>content_type</span> <span class='id identifier rubyid_body'>body</span>[<span class='int'>0</span>].<span class='id identifier rubyid_content_type'>content_type</span>
    <span class='kw'>elsif</span> (<span class='id identifier rubyid_default'>default</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_default_content_type'>default_content_type</span>)
      <span class='id identifier rubyid_content_type'>content_type</span> <span class='id identifier rubyid_default'>default</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@response</span>.<span class='id identifier rubyid_finish'>finish</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dispatch!-instance_method">
  <h3 class='signature priv'>
    #<strong>dispatch!</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Dispatch a request with error handling.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1176-L1200'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1176' data-end='1200'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1176</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dispatch!'>dispatch!</span>
  <span class='comment'># Avoid passing frozen string in force_encoding
</span>  <span class='ivar'>@params</span>.<span class='id identifier rubyid_merge!'>merge!</span>(<span class='ivar'>@request</span>.<span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_val'>val</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_val'>val</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_force_encoding'><a href="#force_encoding-class_method" title="Sinatra::Base.force_encoding (method)">force_encoding</a></span>)

    <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>.<span class='id identifier rubyid_dup'>dup</span> <span class='kw'>if</span> <span class='id identifier rubyid_val'>val</span>.<span class='id identifier rubyid_frozen?'>frozen?</span>
    <span class='ivar'>@params</span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> <span class='id identifier rubyid_force_encoding'><a href="#force_encoding-class_method" title="Sinatra::Base.force_encoding (method)">force_encoding</a></span>(<span class='id identifier rubyid_val'>val</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_invoke'><a href="#invoke-instance_method" title="Sinatra::Base#invoke (method)">invoke</a></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_static!'><a href="#static!-instance_method" title="Sinatra::Base#static! (method)">static!</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_static?'>static?</span> <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span>.<span class='id identifier rubyid_get?'>get?</span> <span class='op'>||</span> <span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span>.<span class='id identifier rubyid_head?'>head?</span>)
    <span class='id identifier rubyid_filter!'><a href="#filter!-instance_method" title="Sinatra::Base#filter! (method)">filter!</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_before'><a href="Delegator.html#before-instance_method" title="Sinatra::Delegator#before (method)">before</a></span> <span class='kw'>do</span>
      <span class='ivar'>@pinned_response</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_route!'><a href="#route!-instance_method" title="Sinatra::Base#route! (method)">route!</a></span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='op'>::</span><span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_invoke'><a href="#invoke-instance_method" title="Sinatra::Base#invoke (method)">invoke</a></span> { <span class='id identifier rubyid_handle_exception!'><a href="#handle_exception!-instance_method" title="Sinatra::Base#handle_exception! (method)">handle_exception!</a></span>(<span class='id identifier rubyid_e'>e</span>) }
<span class='kw'>ensure</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_filter!'><a href="#filter!-instance_method" title="Sinatra::Base#filter! (method)">filter!</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_after'><a href="Delegator.html#after-instance_method" title="Sinatra::Delegator#after (method)">after</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.static_file</span><span class='tstring_end'>&#39;</span></span>]
  <span class='kw'>rescue</span> <span class='op'>::</span><span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_invoke'><a href="#invoke-instance_method" title="Sinatra::Base#invoke (method)">invoke</a></span> { <span class='id identifier rubyid_handle_exception!'><a href="#handle_exception!-instance_method" title="Sinatra::Base#handle_exception! (method)">handle_exception!</a></span>(<span class='id identifier rubyid_e'>e</span>) } <span class='kw'>unless</span> <span class='ivar'>@env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.error</span><span class='tstring_end'>&#39;</span></span>]
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_errors!-instance_method">
  <h3 class='signature priv'>
    #<strong>dump_errors!</strong>(boom)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1268-L1283'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1268' data-end='1283'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1268</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_errors!'>dump_errors!</span>(<span class='id identifier rubyid_boom'>boom</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_detailed_message'>detailed_message</span>)
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_detailed_message'>detailed_message</span>(<span class='label'>highlight:</span> <span class='kw'>false</span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(.*?)(?: \(</span><span class='embexpr_beg'>#{</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_quote'>quote</span>(<span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_to_s'>to_s</span>) <span class='embexpr_end'>}</span><span class='tstring_content'>\))?\n</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='id identifier rubyid_additional_msg'>additional_msg</span> <span class='op'>=</span> <span class='backref'>$&#39;</span>.<span class='id identifier rubyid_lines'>lines</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_additional_msg'>additional_msg</span> <span class='op'>=</span> []
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_message'>message</span>
    <span class='id identifier rubyid_additional_msg'>additional_msg</span> <span class='op'>=</span> []
  <span class='kw'>end</span>
  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_strftime'>strftime</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d %H:%M:%S</span><span class='tstring_end'>&#39;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msg'>msg</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_additional_msg'>additional_msg</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_backtrace'>backtrace</span>].<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span>)
  <span class='ivar'>@env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rack.errors</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_puts'>puts</span>(<span class='id identifier rubyid_msg'>msg</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="error_block!-instance_method">
  <h3 class='signature priv'>
    #<strong>error_block!</strong>(key, *block_params)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Find an custom error block for the key(s) specified.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1249-L1266'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1249' data-end='1266'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1249</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_error_block!'>error_block!</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_block_params'>block_params</span>)
  <span class='id identifier rubyid_base'>base</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>
  <span class='kw'>while</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_errors'><a href="#errors-class_method" title="Sinatra::Base.errors (method)">errors</a></span>)
    <span class='id identifier rubyid_args_array'>args_array</span> <span class='op'>=</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_errors'><a href="#errors-class_method" title="Sinatra::Base.errors (method)">errors</a></span>[<span class='id identifier rubyid_key'>key</span>]

    <span class='kw'>next</span> <span class='id identifier rubyid_base'>base</span> <span class='op'>=</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_superclass'>superclass</span> <span class='kw'>unless</span> <span class='id identifier rubyid_args_array'>args_array</span>

    <span class='id identifier rubyid_args_array'>args_array</span>.<span class='id identifier rubyid_reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_args'>args</span><span class='op'>|</span>
      <span class='id identifier rubyid_first'>first</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span> <span class='op'>==</span> <span class='id identifier rubyid_args_array'>args_array</span>.<span class='id identifier rubyid_first'>first</span>
      <span class='id identifier rubyid_args'>args</span> <span class='op'>+=</span> [<span class='id identifier rubyid_block_params'>block_params</span>]
      <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_process_route'><a href="#process_route-instance_method" title="Sinatra::Base#process_route (method)">process_route</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
      <span class='kw'>return</span> <span class='id identifier rubyid_resp'>resp</span> <span class='kw'>unless</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_superclass'>superclass</span>) <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_superclass'>superclass</span> <span class='op'>&lt;</span> <span class='const'>Exception</span>)

  <span class='id identifier rubyid_error_block!'>error_block!</span>(<span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_superclass'>superclass</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_block_params'>block_params</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filter!-instance_method">
  <h3 class='signature priv'>
    #<strong>filter!</strong>(type, base = settings, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Run filters defined on the class and all superclasses.
Accepts an optional block to call after each filter is applied.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1054-L1060'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1054' data-end='1060'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1054</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_filter!'>filter!</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_base'>base</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_filter!'>filter!</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_superclass'>superclass</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='kw'>if</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span>)
  <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_filters'><a href="#filters-class_method" title="Sinatra::Base.filters (method)">filters</a></span>[<span class='id identifier rubyid_type'>type</span>].<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_args'>args</span><span class='op'>|</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_process_route'><a href="#process_route-instance_method" title="Sinatra::Base#process_route (method)">process_route</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
    <span class='id identifier rubyid_block'>block</span>.<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span>(<span class='id identifier rubyid_result'>result</span>) <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="force_encoding-instance_method">
  <h3 class='signature priv'>
    #<strong>force_encoding</strong>(*args)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1922-L1924'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1922' data-end='1924'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1922</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="forward-instance_method">
  <h3 class='signature '>
    #<strong>forward</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Forward the request to the downstream app -- middleware only.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1040-L1048'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1040' data-end='1048'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1040</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_forward'>forward</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>downstream app not set</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='ivar'>@app</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span>

  <span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='ivar'>@app</span>.<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>
  <span class='ivar'>@response</span>.<span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='id identifier rubyid_status'>status</span>
  <span class='ivar'>@response</span>.<span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_body'>body</span>
  <span class='ivar'>@response</span>.<span class='id identifier rubyid_headers'>headers</span>.<span class='id identifier rubyid_merge!'>merge!</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="halt-instance_method">
  <h3 class='signature '>
    #<strong>halt</strong>(*response)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Exit the current block, halts any further processing
of the request, and returns the specified response.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1027-L1030'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1027' data-end='1030'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1027</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_halt'>halt</span>(<span class='op'>*</span><span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>)
  <span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span> <span class='op'>=</span> <span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>.<span class='id identifier rubyid_first'>first</span> <span class='kw'>if</span> <span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>1</span>
  <span class='id identifier rubyid_throw'>throw</span> <span class='symbeg'>:</span><span class='id identifier rubyid_halt'>halt</span><span class='comma'>,</span> <span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="handle_exception!-instance_method">
  <h3 class='signature priv'>
    #<strong>handle_exception!</strong>(boom)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p><a href="Error.html" title="Sinatra::Error (class)"><code>Error</code></a> handling during requests.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1203-L1246'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1203' data-end='1246'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1203</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_handle_exception!'>handle_exception!</span>(<span class='id identifier rubyid_boom'>boom</span>)
  <span class='id identifier rubyid_error_params'>error_params</span> <span class='op'>=</span> <span class='ivar'>@env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.error.params</span><span class='tstring_end'>&#39;</span></span>]

  <span class='ivar'>@params</span> <span class='op'>=</span> <span class='ivar'>@params</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_error_params'>error_params</span>) <span class='kw'>if</span> <span class='id identifier rubyid_error_params'>error_params</span>

  <span class='ivar'>@env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.error</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_boom'>boom</span>

  <span class='id identifier rubyid_http_status'>http_status</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><a href="../Sinatra.html" title="Sinatra (module)">Sinatra</a></span><span class='op'>::</span><span class='const'><a href="Error.html" title="Sinatra::Error (class)">Error</a></span>
                  <span class='kw'>if</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_http_status'>http_status</span>
                    <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_http_status'>http_status</span>
                  <span class='kw'>elsif</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_use_code?'>use_code?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_code'>code</span>)
                    <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_code'>code</span>
                  <span class='kw'>end</span>
                <span class='kw'>end</span>

  <span class='id identifier rubyid_http_status'>http_status</span> <span class='op'>=</span> <span class='int'>500</span> <span class='kw'>unless</span> <span class='id identifier rubyid_http_status'>http_status</span><span class='op'>&amp;.</span><span class='id identifier rubyid_between?'>between?</span>(<span class='int'>400</span><span class='comma'>,</span> <span class='int'>599</span>)
  <span class='id identifier rubyid_status'>status</span>(<span class='id identifier rubyid_http_status'>http_status</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_server_error?'>server_error?</span>
    <span class='id identifier rubyid_dump_errors!'><a href="#dump_errors!-instance_method" title="Sinatra::Base#dump_errors! (method)">dump_errors!</a></span> <span class='id identifier rubyid_boom'>boom</span> <span class='kw'>if</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_dump_errors?'>dump_errors?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_boom'>boom</span> <span class='kw'>if</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_show_exceptions?'>show_exceptions?</span> <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_show_exceptions'>show_exceptions</span> <span class='op'>!=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_after_handler'>after_handler</span>)
  <span class='kw'>elsif</span> <span class='id identifier rubyid_not_found?'>not_found?</span>
    <span class='id identifier rubyid_headers'>headers</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-Cascade</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pass</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_x_cascade?'>x_cascade?</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> (<span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_error_block!'><a href="#error_block!-instance_method" title="Sinatra::Base#error_block! (method)">error_block!</a></span>(<span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_class'>class</span><span class='comma'>,</span> <span class='id identifier rubyid_boom'>boom</span>) <span class='op'>||</span> <span class='id identifier rubyid_error_block!'><a href="#error_block!-instance_method" title="Sinatra::Base#error_block! (method)">error_block!</a></span>(<span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_boom'>boom</span>))
    <span class='kw'>return</span> <span class='id identifier rubyid_res'>res</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_not_found?'>not_found?</span> <span class='op'>||</span> <span class='id identifier rubyid_bad_request?'>bad_request?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_message'>message</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_message'>message</span> <span class='op'>!=</span> <span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span>
      <span class='id identifier rubyid_body'>body</span> <span class='const'><a href="../Rack.html" title="Rack (module)">Rack</a></span><span class='op'>::</span><span class='const'>Utils</span>.<span class='id identifier rubyid_escape_html'>escape_html</span>(<span class='id identifier rubyid_boom'>boom</span>.<span class='id identifier rubyid_message'>message</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_content_type'>content_type</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_body'>body</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h1&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_not_found?'>not_found?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Not Found</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bad Request</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h1&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_server_error?'>server_error?</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_boom'>boom</span> <span class='kw'>if</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_raise_errors?'>raise_errors?</span> <span class='op'>||</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_show_exceptions?'>show_exceptions?</span>

  <span class='id identifier rubyid_error_block!'><a href="#error_block!-instance_method" title="Sinatra::Base#error_block! (method)">error_block!</a></span> <span class='const'>Exception</span><span class='comma'>,</span> <span class='id identifier rubyid_boom'>boom</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="invoke-instance_method">
  <h3 class='signature priv'>
    #<strong>invoke</strong>(&amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Run the block with &#39;throw :halt&#39; support and apply result to the response.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1160-L1173'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1160' data-end='1173'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1160</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_invoke'>invoke</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_catch'>catch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_halt'><a href="#halt-instance_method" title="Sinatra::Base#halt (method)">halt</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)

  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> [<span class='id identifier rubyid_res'>res</span>] <span class='kw'>if</span> (<span class='const'>Integer</span> <span class='op'>===</span> <span class='id identifier rubyid_res'>res</span>) <span class='op'>||</span> (<span class='const'>String</span> <span class='op'>===</span> <span class='id identifier rubyid_res'>res</span>)
  <span class='kw'>if</span> (<span class='const'>Array</span> <span class='op'>===</span> <span class='id identifier rubyid_res'>res</span>) <span class='op'>&amp;&amp;</span> (<span class='const'>Integer</span> <span class='op'>===</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_first'>first</span>)
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_status'>status</span>(<span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_shift'>shift</span>)
    <span class='id identifier rubyid_body'>body</span>(<span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_pop'>pop</span>)
    <span class='id identifier rubyid_headers'>headers</span>(<span class='op'>*</span><span class='id identifier rubyid_res'>res</span>)
  <span class='kw'>elsif</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_each'>each</span>
    <span class='id identifier rubyid_body'>body</span> <span class='id identifier rubyid_res'>res</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span> <span class='comment'># avoid double setting the same response tuple twice
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pass-instance_method">
  <h3 class='signature '>
    #<strong>pass</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Pass control to the next matching route.
If there are no more matching routes, <a href="../Sinatra.html" title="Sinatra (module)"><code>::Sinatra</code></a> will
return a 404 response.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1035-L1037'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1035' data-end='1037'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1035</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pass'>pass</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_throw'>throw</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pass'>pass</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process_route-instance_method">
  <h3 class='signature priv'>
    #<strong>process_route</strong>(pattern, conditions, block = nil, values = [])   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>If the current request matches pattern and conditions, fill params
with keys and call the given block.
Revert params afterwards.</p>

<p>Returns pass block.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1097-L1128'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1097' data-end='1128'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1097</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process_route'>process_route</span>(<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_conditions'>conditions</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> [])
  <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='op'>=</span> <span class='ivar'>@request</span>.<span class='id identifier rubyid_path_info'>path_info</span>
  <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_empty_path_info?'>empty_path_info?</span>
  <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='op'>=</span> <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span>[<span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span>] <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_strict_paths?'>strict_paths?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span>)

  <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span> <span class='op'>=</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>(<span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>

  <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>.<span class='id identifier rubyid_delete'><a href="#delete-class_method" title="Sinatra::Base.delete (method)">delete</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ignore</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># TODO: better params handling, maybe turn it into &quot;smart&quot; object or detect changes
</span>  <span class='id identifier rubyid_force_encoding'><a href="#force_encoding-class_method" title="Sinatra::Base.force_encoding (method)">force_encoding</a></span>(<span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>)
  <span class='ivar'>@params</span> <span class='op'>=</span> <span class='ivar'>@params</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>) { <span class='op'>|</span><span class='id identifier rubyid__k'>_k</span><span class='comma'>,</span> <span class='id identifier rubyid_v1'>v1</span><span class='comma'>,</span> <span class='id identifier rubyid_v2'>v2</span><span class='op'>|</span> <span class='id identifier rubyid_v2'>v2</span> <span class='op'>||</span> <span class='id identifier rubyid_v1'>v1</span> } <span class='kw'>if</span> <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>.<span class='id identifier rubyid_any?'>any?</span>

  <span class='id identifier rubyid_regexp_exists'>regexp_exists</span> <span class='op'>=</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Mustermann</span><span class='op'>::</span><span class='const'>Regular</span>) <span class='op'>||</span> (<span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_patterns'>patterns</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_patterns'>patterns</span>.<span class='id identifier rubyid_any?'>any?</span> { <span class='op'>|</span><span class='id identifier rubyid_subpattern'>subpattern</span><span class='op'>|</span> <span class='id identifier rubyid_subpattern'>subpattern</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Mustermann</span><span class='op'>::</span><span class='const'>Regular</span>) })
  <span class='kw'>if</span> <span class='id identifier rubyid_regexp_exists'>regexp_exists</span>
    <span class='id identifier rubyid_captures'>captures</span>           <span class='op'>=</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_match'>match</span>(<span class='id identifier rubyid_route'><a href="#route-class_method" title="Sinatra::Base.route (method)">route</a></span>).<span class='id identifier rubyid_captures'>captures</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='const'><a href="#URI_INSTANCE-constant" title="Sinatra::Base::URI_INSTANCE (constant)">URI_INSTANCE</a></span>.<span class='id identifier rubyid_unescape'>unescape</span>(<span class='id identifier rubyid_c'>c</span>) <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> }
    <span class='id identifier rubyid_values'>values</span>            <span class='op'>+=</span> <span class='id identifier rubyid_captures'>captures</span>
    <span class='ivar'>@params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_captures'>captures</span>] <span class='op'>=</span> <span class='id identifier rubyid_force_encoding'><a href="#force_encoding-class_method" title="Sinatra::Base.force_encoding (method)">force_encoding</a></span>(<span class='id identifier rubyid_captures'>captures</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_captures'>captures</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_captures'>captures</span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_values'>values</span> <span class='op'>+=</span> <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>.<span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_flatten'>flatten</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_catch'>catch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pass'><a href="#pass-instance_method" title="Sinatra::Base#pass (method)">pass</a></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_conditions'>conditions</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_throw'>throw</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pass'><a href="#pass-instance_method" title="Sinatra::Base#pass (method)">pass</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_bind'>bind</span>(<span class='kw'>self</span>).<span class='id identifier rubyid_call'><a href="#call-class_method" title="Sinatra::Base.call (method)">call</a></span> <span class='op'>==</span> <span class='kw'>false</span> }
    <span class='id identifier rubyid_block'>block</span> <span class='op'>?</span> <span class='id identifier rubyid_block'>block</span>[<span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span>] <span class='op'>:</span> <span class='kw'>yield</span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span>)
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'>StandardError</span>
  <span class='ivar'>@env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.error.params</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@params</span>
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span> <span class='op'>||=</span> {}
  <span class='id identifier rubyid_params'><a href="#params-instance_method" title="Sinatra::Base#params (method)">params</a></span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span> <span class='ivar'>@params</span>.<span class='id identifier rubyid_delete'><a href="Delegator.html#delete-instance_method" title="Sinatra::Delegator#delete (method)">delete</a></span>(<span class='id identifier rubyid_k'>k</span>) } <span class='kw'>unless</span> <span class='ivar'>@env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.error.params</span><span class='tstring_end'>&#39;</span></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="route!-instance_method">
  <h3 class='signature priv'>
    #<strong>route!</strong>(base = settings, pass_block = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Run routes defined on the class and all superclasses.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1063-L1085'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1063' data-end='1085'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1063</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_route!'>route!</span>(<span class='id identifier rubyid_base'>base</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span><span class='comma'>,</span> <span class='id identifier rubyid_pass_block'>pass_block</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span> <span class='op'>=</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span>[<span class='ivar'>@request</span>.<span class='id identifier rubyid_request_method'>request_method</span>]

  <span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_conditions'>conditions</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
    <span class='id identifier rubyid_response'><a href="#response-instance_method" title="Sinatra::Base#response (method)">response</a></span>.<span class='id identifier rubyid_delete_header'>delete_header</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>unless</span> <span class='ivar'>@pinned_response</span>

    <span class='id identifier rubyid_returned_pass_block'>returned_pass_block</span> <span class='op'>=</span> <span class='id identifier rubyid_process_route'><a href="#process_route-instance_method" title="Sinatra::Base#process_route (method)">process_route</a></span>(<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_conditions'>conditions</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='op'>|</span>
      <span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.route</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@request</span>.<span class='id identifier rubyid_request_method'>request_method</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_route_eval'><a href="#route_eval-instance_method" title="Sinatra::Base#route_eval (method)">route_eval</a></span> { <span class='id identifier rubyid_block'>block</span>[<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>] }
    <span class='kw'>end</span>

    <span class='comment'># don&#39;t wipe out pass_block in superclass
</span>    <span class='id identifier rubyid_pass_block'>pass_block</span> <span class='op'>=</span> <span class='id identifier rubyid_returned_pass_block'>returned_pass_block</span> <span class='kw'>if</span> <span class='id identifier rubyid_returned_pass_block'>returned_pass_block</span>
  <span class='kw'>end</span>

  <span class='comment'># Run routes defined in superclass.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_routes'><a href="#routes-class_method" title="Sinatra::Base.routes (method)">routes</a></span>)
    <span class='kw'>return</span> <span class='id identifier rubyid_route!'>route!</span>(<span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_superclass'>superclass</span><span class='comma'>,</span> <span class='id identifier rubyid_pass_block'>pass_block</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_route_eval'><a href="#route_eval-instance_method" title="Sinatra::Base#route_eval (method)">route_eval</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_pass_block'>pass_block</span>) <span class='kw'>if</span> <span class='id identifier rubyid_pass_block'>pass_block</span>
  <span class='id identifier rubyid_route_missing'><a href="#route_missing-instance_method" title="Sinatra::Base#route_missing (method)">route_missing</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="route_eval-instance_method">
  <h3 class='signature priv'>
    #<strong>route_eval</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Run a route block and throw <code>:halt</code> with the result.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1088-L1090'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1088' data-end='1090'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1088</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_route_eval'>route_eval</span>
  <span class='id identifier rubyid_throw'>throw</span> <span class='symbeg'>:</span><span class='id identifier rubyid_halt'><a href="#halt-instance_method" title="Sinatra::Base#halt (method)">halt</a></span><span class='comma'>,</span> <span class='kw'>yield</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="route_missing-instance_method">
  <h3 class='signature priv'>
    #<strong>route_missing</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>No matching route was found or all routes passed. The default
implementation is to forward the request downstream when running
as middleware (@app is non-nil); when no downstream app is set, raise
a <a href="NotFound.html" title="Sinatra::NotFound (class)"><code>NotFound</code></a> exception. Subclasses can override this method to perform
custom route miss logic.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="NotFound.html" title="Sinatra::NotFound (class)">NotFound</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1135-L1139'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1135' data-end='1139'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1135</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_route_missing'>route_missing</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="NotFound.html" title="Sinatra::NotFound (class)">NotFound</a></span> <span class='kw'>unless</span> <span class='ivar'>@app</span>

  <span class='id identifier rubyid_forward'><a href="#forward-instance_method" title="Sinatra::Base#forward (method)">forward</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="settings-instance_method">
  <h3 class='signature '>
    #<strong>settings</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Access settings defined with <code>Base</code>.set.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1021-L1023'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1021' data-end='1023'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1021</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_settings'>settings</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="static!-instance_method">
  <h3 class='signature priv'>
    #<strong>static!</strong>(options = {})   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempt to serve static files from public directory. Throws <code>:halt</code> when
a matching file is found, returns nil otherwise.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sinatra/sinatra/blob/main/lib/sinatra/base.rb#L1143-L1157'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1143' data-end='1157'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sinatra/base.rb', line 1143</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_static!'>static!</span>(<span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span> <span class='op'>=</span> {})
  <span class='kw'>return</span> <span class='kw'>if</span> (<span class='id identifier rubyid_public_dir'><a href="#public_dir-class_method" title="Sinatra::Base.public_dir (method)">public_dir</a></span> <span class='op'>=</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_public_folder'>public_folder</span>).<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_dir'><a href="#public_dir-class_method" title="Sinatra::Base.public_dir (method)">public_dir</a></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#URI_INSTANCE-constant" title="Sinatra::Base::URI_INSTANCE (constant)">URI_INSTANCE</a></span>.<span class='id identifier rubyid_unescape'>unescape</span>(<span class='id identifier rubyid_request'><a href="#request-instance_method" title="Sinatra::Base#request (method)">request</a></span>.<span class='id identifier rubyid_path_info'>path_info</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_path?'>valid_path?</span>(<span class='id identifier rubyid_path'>path</span>)

  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_path'>path</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='id identifier rubyid_public_dir'><a href="#public_dir-class_method" title="Sinatra::Base.public_dir (method)">public_dir</a></span>)<span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>)

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_file?'>file?</span>(<span class='id identifier rubyid_path'>path</span>)

  <span class='id identifier rubyid_env'><a href="#env-instance_method" title="Sinatra::Base#env (method)">env</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sinatra.static_file</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_cache_control'>cache_control</span>(<span class='op'>*</span><span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_static_cache_control'>static_cache_control</span>) <span class='kw'>if</span> <span class='id identifier rubyid_settings'><a href="Delegator.html#settings-instance_method" title="Sinatra::Delegator#settings (method)">settings</a></span>.<span class='id identifier rubyid_static_cache_control?'>static_cache_control?</span>
  <span class='id identifier rubyid_send_file'>send_file</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="Delegator.html#options-instance_method" title="Sinatra::Delegator#options (method)">options</a></span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>disposition:</span> <span class='kw'>nil</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>