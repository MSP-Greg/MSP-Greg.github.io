<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: CHANGELOG &mdash; Sinatra main</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Sinatra main</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h2>Unreleased</h2>

<h2>4.2.0 / 2025-10-08</h2>

<ul>
<li>New: Add <code>:static_headers</code> setting for custom headers in static file responses (<a href="https://github.com/sinatra/sinatra/pull/2089">#2089</a>)</li>
<li>Fix: Fix regex in <code>etag_matches?</code> to prevent ReDoS (<a href="https://github.com/sinatra/sinatra/pull/2121">#2121</a>))</li>
<li>Fix: <code>PATH_INFO</code> can never be empty (<a href="https://github.com/sinatra/sinatra/pull/2114">#2114</a>)</li>
<li>Fix: Fix malformed Content-Type headers (<a href="https://github.com/sinatra/sinatra/pull/2081">#2081</a>)</li>
<li>Fix: Avoid crash for integer values in <code>content_type</code> parameters (<a href="https://github.com/sinatra/sinatra/pull/2078">#2078</a>)</li>
</ul>

<h2>4.1.1 / 2024-11-20</h2>

<ul>
<li>Fix: Restore WEBrick support (<a href="https://github.com/sinatra/sinatra/pull/2067">#2067</a>)</li>
</ul>

<h2>4.1.0 / 2024-11-18</h2>

<ul>
<li>New: Add <code>host_authorization</code> setting (<a href="https://github.com/sinatra/sinatra/pull/2053">#2053</a>)

<ul>
<li>Defaults to <code>.localhost</code>, <code>.test</code> and any IP address in development mode.</li>
<li>Security: addresses <a href="https://github.com/advisories/GHSA-hxx2-7vcw-mqr3">CVE-2024-21510</a>.</li>
</ul></li>
<li>Fix: Return an instance of <a href="Sinatra/IndifferentHash.html" title="Sinatra::IndifferentHash (class)"><code>::Sinatra::IndifferentHash</code></a> when calling <code>#except</code> (<a href="https://github.com/sinatra/sinatra/pull/2044">#2044</a>)</li>
<li>Fix: Address warning from <code>URI</code> for Ruby 3.4 (<a href="https://github.com/sinatra/sinatra/pull/2060">#2060</a>)</li>
<li>Fix: <code>rackup</code> no longer depends on WEBrick, recommend Puma instead (<a href="https://github.com/sinatra/sinatra/commit/4a558503a0ee41f26d4ebc07b478340e8a8a5ed6"><code>4a558503</code></a>)</li>
<li>Fix: Zeitwerk 2.7.0+ compatibility (<a href="https://github.com/sinatra/sinatra/pull/2050">#2050</a>)</li>
<li>Fix: Address warning about Hash construction for Ruby 3.4 (<a href="https://github.com/sinatra/sinatra/pull/2028">#2028</a>)</li>
<li>Fix: Declare missing dependencies for Ruby 3.5 (<a href="https://github.com/sinatra/sinatra/pull/2032">#2032</a>)</li>
<li>Fix: Compatibility with <code>--enable-frozen-string-literal</code> (<a href="https://github.com/sinatra/sinatra/pull/2033">#2033</a>)</li>
<li>Fix: <a href="Rack.html" title="Rack (module)"><code>Rack</code></a> 3.1 compatibility (<a href="https://github.com/sinatra/sinatra/pull/2035">#2035</a>)

<ul>
<li>Don&#39;t depend on <code>Rack::Logger</code></li>
<li>Don&#39;t delete <code>content-length</code> header when <code>Rack::Files</code> is used</li>
</ul></li>
</ul>

<h2>4.0.1 / 2025-05-24</h2>

<ul>
<li><p><a href="Rack.html" title="Rack (module)"><code>Rack</code></a> 3.1 compatibility (<a href="https://github.com/sinatra/sinatra/pull/2035">#2035</a>)</p></li>
<li><p>Fix malformed Content-Type headers (<a href="https://github.com/sinatra/sinatra/pull/2081">#2081</a>)</p></li>
<li><p>Avoid crash for integer values in <code>content_type</code> parameters (<a href="https://github.com/sinatra/sinatra/pull/2078">#2078</a>)</p></li>
<li><p>Fix compatibility with --enable-frozen-string-literal (<a href="https://github.com/sinatra/sinatra/pull/2033">#2033</a>)</p></li>
<li><p>Declare missing dependencies for Ruby 3.5 (<a href="https://github.com/sinatra/sinatra/pull/2032">#2032</a>)</p></li>
<li><p>Fix warning about Hash construction. (<a href="https://github.com/sinatra/sinatra/pull/2028">#2028</a>)</p></li>
<li><p>Support Zeitwerk 2.7.0+ (<a href="https://github.com/sinatra/sinatra/pull/2050">#2050</a>)</p></li>
<li><p>Address URI depreciation (<a href="https://github.com/sinatra/sinatra/pull/2060">#2060</a>)</p></li>
</ul>

<h2>4.0.0. / 2024-01-19</h2>

<ul>
<li><p>New: Add support for <a href="Rack.html" title="Rack (module)"><code>Rack</code></a> 3 (<a href="https://github.com/sinatra/sinatra/pull/1857">#1857</a>)</p>

<ul>
<li>Note: you may want to read the <a href="https://github.com/rack/rack/blob/main/UPGRADE-GUIDE.md">Rack 3 Upgrade Guide</a></li>
</ul></li>
<li><p>Require Ruby 2.7.8 as minimum Ruby version (<a href="https://github.com/sinatra/sinatra/pull/1993">#1993</a>)</p></li>
<li><p>Breaking change: Drop support for <a href="Rack.html" title="Rack (module)"><code>Rack</code></a> 2 (<a href="https://github.com/sinatra/sinatra/pull/1857">#1857</a>)</p>

<ul>
<li>Note: when using Sinatra to start the web server, you now need the <code>rackup</code> gem installed</li>
</ul></li>
<li><p>Breaking change: Remove the <code>IndifferentHash</code> initializer (<a href="https://github.com/sinatra/sinatra/pull/1982">#1982</a>)</p></li>
<li><p>Breaking change: Disable <code>session_hijacking</code> protection by default (<a href="https://github.com/sinatra/sinatra/pull/1984">#1984</a>)</p></li>
<li><p>Breaking change: Remove <code>Rack::Protection::EncryptedCookie</code> (<a href="https://github.com/sinatra/sinatra/pull/1989">#1989</a>)</p>

<ul>
<li>Note: cookies are still encrypted (by <a href="https://github.com/rack/rack-session"><code>Rack::Session::Cookie</code></a>)</li>
</ul></li>
</ul>

<h2>3.2.0 / 2023-12-29</h2>

<ul>
<li><p>New: Add <code>#except</code> method to <a href="Sinatra/IndifferentHash.html" title="Sinatra::IndifferentHash (class)"><code>::Sinatra::IndifferentHash</code></a> (<a href="https://github.com/sinatra/sinatra/pull/1940">#1940</a>)</p></li>
<li><p>New: Use <code>Exception#detailed_message</code> to show backtrace (<a href="https://github.com/sinatra/sinatra/pull/1952">#1952</a>)</p></li>
<li><p>New: Add <a href="Sinatra/HamlHelpers.html" title="Sinatra::HamlHelpers (module)"><code>::Sinatra::HamlHelpers</code></a> to sinatra-contrib (<a href="https://github.com/sinatra/sinatra/pull/1960">#1960</a>)</p></li>
<li><p>Fix: Add <code>base64</code> to rack-protection runtime dependencies (<a href="https://github.com/sinatra/sinatra/pull/1946">#1946</a>)</p></li>
<li><p>Fix: Avoid open-ended dependencies for sinatra-contrib and rack-protection (<a href="https://github.com/sinatra/sinatra/pull/1949">#1949</a>)</p></li>
<li><p>Fix: Helpful message when <a href="Sinatra/Runner.html" title="Sinatra::Runner (class)"><code>::Sinatra::Runner</code></a> times out (<a href="https://github.com/sinatra/sinatra/pull/1975">#1975</a>)</p></li>
<li><p>Fix: Ruby 3.3 + Bundler 2.5 compatibility (<a href="https://github.com/sinatra/sinatra/pull/1975">#1975</a>)</p></li>
</ul>

<h2>3.1.0 / 2023-08-07</h2>

<ul>
<li><p>New: Add sass support via sass-embedded <a href="https://github.com/sinatra/sinatra/pull/1911">#1911</a> by なつき</p></li>
<li><p>New: Add start and stop callbacks <a href="https://github.com/sinatra/sinatra/pull/1913">#1913</a> by Jevin Sew</p></li>
<li><p>New: Warn on dropping sessions <a href="https://github.com/sinatra/sinatra/pull/1900">#1900</a> by Jonathan del Strother</p></li>
<li><p>New: Make Puma the default server <a href="https://github.com/sinatra/sinatra/pull/1924">#1924</a> by Patrik Ragnarsson</p></li>
<li><p>Fix: Remove use of Tilt::Cache <a href="https://github.com/sinatra/sinatra/pull/1922">#1922</a> by Jeremy Evans (allows use of Tilt 2.2.0 without deprecation warning)</p></li>
<li><p>Fix: rack-protection: specify rack version requirement <a href="https://github.com/sinatra/sinatra/pull/1932">#1932</a> by Patrik Ragnarsson</p></li>
</ul>

<h2>3.0.6 / 2023-04-11</h2>

<ul>
<li><p>Fix: Add support to keep open streaming connections with Puma <a href="https://github.com/sinatra/sinatra/pull/1858">#1858</a> by Jordan Owens</p></li>
<li><p>Fix: Avoid crash in <code>uri</code> helper on Integer input <a href="https://github.com/sinatra/sinatra/pull/1890">#1890</a> by Patrik Ragnarsson</p></li>
<li><p>Fix: Rescue <code>RuntimeError</code> when trying to use <code>SecureRandom</code> <a href="https://github.com/sinatra/sinatra/pull/1888">#1888</a> by Stefan Sundin</p></li>
</ul>

<h2>3.0.5 / 2022-12-16</h2>

<ul>
<li><p>Fix: Add Zeitwerk compatibility. <a href="https://github.com/sinatra/sinatra/pull/1831">#1831</a> by Dawid Janczak</p></li>
<li><p>Fix: Allow CALLERS_TO_IGNORE to be overridden</p></li>
</ul>

<h2>3.0.4 / 2022-11-25</h2>

<ul>
<li>Fix: Escape filename in the Content-Disposition header. <a href="https://github.com/sinatra/sinatra/pull/1841">#1841</a> by Kunpei Sakai</li>
</ul>

<h2>3.0.3 / 2022-11-11</h2>

<ul>
<li>Fix: fixed ReDoS for Rack::Protection::IPSpoofing. <a href="https://github.com/sinatra/sinatra/pull/1823">#1823</a> by @ooooooo-q</li>
</ul>

<h2>3.0.2 / 2022-10-01</h2>

<ul>
<li>New: Add Haml 6 support. <a href="https://github.com/sinatra/sinatra/pull/1820">#1820</a> by Jordan Owens</li>
</ul>

<h2>3.0.1 / 2022-09-26</h2>

<ul>
<li><p>Fix: Revert removal of rack-protection.rb. <a href="https://github.com/sinatra/sinatra/pull/1814">#1814</a> by Olle Jonsson</p></li>
<li><p>Fix: Revert change to server start and stop messaging by using Kernel#warn. Renamed internal warn method warn_for_deprecation. <a href="https://github.com/sinatra/sinatra/pull/1818">#1818</a> by Jordan Owens</p></li>
</ul>

<h2>3.0.0 / 2022-09-26</h2>

<ul>
<li><p>New: Add Falcon support. <a href="https://github.com/sinatra/sinatra/pull/1794">#1794</a> by Samuel Williams and @horaciob</p></li>
<li><p>New: Add AES GCM encryption support for session cookies. <a href="https://github.com/sinatra/sinatra/pull/1324">#1324</a> by Michael Coyne</p></li>
<li><p>Deprecated: <a href="Sinatra.html" title="Sinatra (module)"><code>Sinatra</code></a> Reloader will be removed in the next major release.</p></li>
<li><p>Fix: Internal Sinatra errors now extend <a href="Sinatra/Error.html" title="Sinatra::Error (class)"><code>::Sinatra::Error</code></a>. This fixes <a href="https://github.com/sinatra/sinatra/issues/1204">#1204</a> and <a href="https://github.com/sinatra/sinatra/issues/1518">#1518</a>. <a href="https://github.com/sinatra/sinatra/commit/bda8c29d70619d53f5b1c181140638d340695514">bda8c29d</a> by Jordan Owens</p></li>
<li><p>Fix: Preserve query param value if named route param nil. <a href="https://github.com/sinatra/sinatra/pull/1676">#1676</a> by Jordan Owens</p></li>
<li><p>Require Ruby 2.6 as minimum Ruby version. <a href="https://github.com/sinatra/sinatra/pull/1699">#1699</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for the Stylus template engine. <a href="https://github.com/sinatra/sinatra/pull/1697">#1697</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for the erubis template engine. <a href="https://github.com/sinatra/sinatra/pull/1761">#1761</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for the textile template engine. <a href="https://github.com/sinatra/sinatra/pull/1766">#1766</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for SASS as a template engine. <a href="https://github.com/sinatra/sinatra/pull/1768">#1768</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for Wlang as a template engine. <a href="https://github.com/sinatra/sinatra/pull/1780">#1780</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for CoffeeScript as a template engine. <a href="https://github.com/sinatra/sinatra/pull/1790">#1790</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for Mediawiki as a template engine. <a href="https://github.com/sinatra/sinatra/pull/1791">#1791</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for Creole as a template engine. <a href="https://github.com/sinatra/sinatra/pull/1792">#1792</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for Radius as a template engine. <a href="https://github.com/sinatra/sinatra/pull/1793">#1793</a> by Eloy Pérez</p></li>
<li><p>Breaking change: Remove support for the defunct Less templating library. See <a href="https://github.com/sinatra/sinatra/issues/1716">#1716</a>, <a href="https://github.com/sinatra/sinatra/issues/1715">#1715</a> for more discussion and background. <a href="https://github.com/sinatra/sinatra/commit/d1af2f1e6c8710419dfe3102a660f7a32f0e67e3">d1af2f1e</a> by Olle Jonsson</p></li>
<li><p>Breaking change: Remove Reel integration. <a href="https://github.com/sinatra/sinatra/commit/545975025927a27a1daca790598620038979f1c5">54597502</a> by Olle Jonsson</p></li>
<li><p>CI: Start testing on Ruby 3.1. <a href="https://github.com/sinatra/sinatra/commit/60e2219407e6ae067bf3e53eb060ee4860c60c8d">60e221940</a> and <a href="https://github.com/sinatra/sinatra/commit/b0fa4beffaa3b10bf02947d0a35e137403296c6b">b0fa4bef</a> by Johannes Würbach</p></li>
<li><p>Use <code>Kernel#caller_locations</code>. <a href="https://github.com/sinatra/sinatra/pull/1491">#1491</a> by Julik Tarkhanov</p></li>
<li><p>Docs: Japanese documentation: Add notes about the <code>default_content_type</code> setting. <a href="https://github.com/sinatra/sinatra/pull/1650">#1650</a>  by Akifumi Tominaga</p></li>
<li><p>Docs: Polish documentation: Add section about Multithreaded modes and Routes. <a href="https://github.com/sinatra/sinatra/pull/1708">#1708</a> by Patrick Gramatowski</p></li>
<li><p>Docs: Japanese documentation: Make Session section reflect changes done to README.md. <a href="https://github.com/sinatra/sinatra/pull/1731">#1731</a> by @shu-i-chi</p></li>
</ul>

<h2>2.2.3 / 2022-11-25</h2>

<ul>
<li><p>Fix: Escape filename in the Content-Disposition header. <a href="https://github.com/sinatra/sinatra/pull/1841">#1841</a> by Kunpei Sakai</p></li>
<li><p>Fix: fixed ReDoS for Rack::Protection::IPSpoofing. <a href="https://github.com/sinatra/sinatra/pull/1823">#1823</a> by @ooooooo-q</p></li>
</ul>

<h2>2.2.2 / 2022-07-23</h2>

<ul>
<li>Update mustermann dependency to version 2.</li>
</ul>

<h2>2.2.1 / 2022-07-15</h2>

<ul>
<li><p>Fix JRuby regression by using ruby2_keywords for delegation. #1750 by Patrik Ragnarsson</p></li>
<li><p>Add JRuby to CI. #1755 by Karol Bucek</p></li>
</ul>

<h2>2.2.0 / 2022-02-15</h2>

<ul>
<li><p>Breaking change: Add <code>#select</code>, <code>#reject</code> and <code>#compact</code> methods to <a href="Sinatra/IndifferentHash.html" title="Sinatra::IndifferentHash (class)"><code>::Sinatra::IndifferentHash</code></a>. If hash keys need to be converted to symbols, call <code>#to_h</code> to get a <code>Hash</code> instance first. <a href="https://github.com/sinatra/sinatra/pull/1711">#1711</a> by Olivier Bellone</p></li>
<li><p>Handle EOFError raised by <a href="Rack.html" title="Rack (module)"><code>Rack</code></a> and return Bad Request 400 status. <a href="https://github.com/sinatra/sinatra/pull/1743">#1743</a> by tamazon</p></li>
<li><p>Minor refactors in <code>base.rb</code>. <a href="https://github.com/sinatra/sinatra/pull/1640">#1640</a> by ceclinux</p></li>
<li><p>Add escaping to the static 404 page. <a href="https://github.com/sinatra/sinatra/pull/1645">#1645</a> by Chris Gavin</p></li>
<li><p>Remove <code>detect_rack_handler</code> method. <a href="https://github.com/sinatra/sinatra/pull/1652">#1652</a> by ceclinux</p></li>
<li><p>Respect content type set in superclass before filter. Fixes <a href="https://github.com/sinatra/sinatra/issues/1647">#1647</a> <a href="https://github.com/sinatra/sinatra/pull/1649">#1649</a> by Jordan Owens</p></li>
<li><p><em>Revert &quot;Use prepend instead of include for helpers.</em> <a href="https://github.com/sinatra/sinatra/pull/1662">#1662</a> by namusyaka</p></li>
<li><p>Fix usage of inherited <a href="Sinatra/Base.html" title="Sinatra::Base (class)"><code>::Sinatra::Base</code></a> classes keyword arguments. Fixes <a href="https://github.com/sinatra/sinatra/issues/1669">#1669</a> <a href="https://github.com/sinatra/sinatra/pull/1670">#1670</a> by Cadu Ribeiro</p></li>
<li><p>Reduce RDoc generation time by not including every README. Fixes <a href="https://github.com/sinatra/sinatra/issues/1578">#1578</a> <a href="https://github.com/sinatra/sinatra/pull/1671">#1671</a> by Eloy Pérez</p></li>
<li><p>Add support for per form csrf tokens. Fixes <a href="https://github.com/sinatra/sinatra/issues/1616">#1616</a> <a href="https://github.com/sinatra/sinatra/pull/1653">#1653</a> by Jordan Owens</p></li>
<li><p>Update MAINTENANCE.md with the <code>stable</code> branch status. <a href="https://github.com/sinatra/sinatra/pull/1681">#1681</a> by Fredrik Rubensson</p></li>
<li><p>Validate expanded path matches <code>public_dir</code> when serving static files. <a href="https://github.com/sinatra/sinatra/pull/1683">#1683</a> by cji-stripe</p></li>
<li><p>Fix Delegator to pass keyword arguments for Ruby 3.0. <a href="https://github.com/sinatra/sinatra/pull/1684">#1684</a> by andrewtblake</p></li>
<li><p>Fix use with keyword arguments for Ruby 3.0. <a href="https://github.com/sinatra/sinatra/pull/1701">#1701</a> by Robin Wallin</p></li>
<li><p>Fix memory leaks for proc template. Fixes <a href="https://github.com/sinatra/sinatra/issues/1714">#1704</a> <a href="https://github.com/sinatra/sinatra/pull/1719">#1719</a> by Slevin</p></li>
<li><p>Remove unnecessary <code>test_files</code> from the gemspec. <a href="https://github.com/sinatra/sinatra/pull/1712">#1712</a> by Masataka Pocke Kuwabara</p></li>
<li><p>Docs: Spanish documentation: Update README.es.md with removal of Thin. <a href="https://github.com/sinatra/sinatra/pull/1630">#1630</a> by Espartaco Palma</p></li>
<li><p>Docs: German documentation: Fixed typos in German README.md. <a href="https://github.com/sinatra/sinatra/pull/1648">#1648</a> by Juri</p></li>
<li><p>Docs: Japanese documentation: Update README.ja.md with removal of Thin. <a href="https://github.com/sinatra/sinatra/pull/1629">#1629</a> by Ryuichi KAWAMATA</p></li>
<li><p>Docs: English documentation: Various minor fixes to README.md. <a href="https://github.com/sinatra/sinatra/pull/1663">#1663</a> by Yanis Zafirópulos</p></li>
<li><p>Docs: English documentation: Document when <code>dump_errors</code> is enabled. Fixes <a href="https://github.com/sinatra/sinatra/issues/1664">#1664</a> <a href="https://github.com/sinatra/sinatra/pull/1665">#1665</a> by Patrik Ragnarsson</p></li>
<li><p>Docs: Brazilian Portuguese documentation: Update README.pt-br.md with translation fixes. <a href="https://github.com/sinatra/sinatra/pull/1668">#1668</a> by Vitor Oliveira</p></li>
</ul>

<h3>CI</h3>

<ul>
<li><p>Use latest JRuby 9.2.16.0 on CI. <a href="https://github.com/sinatra/sinatra/pull/1682">#1682</a> by Olle Jonsson</p></li>
<li><p>Switch CI from travis to GitHub Actions. <a href="https://github.com/sinatra/sinatra/pull/1691">#1691</a> by namusyaka</p></li>
<li><p>Skip the Slack action if <code>secrets.SLACK_WEBHOOK</code> is not set. <a href="https://github.com/sinatra/sinatra/pull/1705">#1705</a> by Robin Wallin</p></li>
<li><p>Small CI improvements. <a href="https://github.com/sinatra/sinatra/pull/1703">#1703</a> by Robin Wallin</p></li>
<li><p>Drop auto-generated boilerplate comments from CI configuration file. <a href="https://github.com/sinatra/sinatra/pull/1728">#1728</a> by Olle Jonsson</p></li>
</ul>

<h3>sinatra-contrib</h3>

<ul>
<li>Do not raise when key is an enumerable. <a href="https://github.com/sinatra/sinatra/pull/1619">#1619</a> by Ulysse Buonomo</li>
</ul>

<h3>Rack protection</h3>

<ul>
<li>Fix broken <code>origin_whitelist</code> option. Fixes <a href="https://github.com/sinatra/sinatra/issues/1641">#1641</a> <a href="https://github.com/sinatra/sinatra/pull/1642">#1642</a> by Takeshi YASHIRO</li>
</ul>

<h2>2.1.0 / 2020-09-05</h2>

<ul>
<li><p>Fix additional Ruby 2.7 keyword warnings <a href="https://github.com/sinatra/sinatra/pull/1586">#1586</a> by Stefan Sundin</p></li>
<li><p>Drop Ruby 2.2 support <a href="https://github.com/sinatra/sinatra/pull/1455">#1455</a> by Eloy Pérez</p></li>
<li><p>Add Rack::Protection::ReferrerPolicy <a href="https://github.com/sinatra/sinatra/pull/1291">#1291</a> by Stefan Sundin</p></li>
<li><p>Add <code>default_content_type</code> setting. Fixes <a href="https://github.com/sinatra/sinatra/pull/1238">#1238</a> <a href="https://github.com/sinatra/sinatra/pull/1239">#1239</a> by Mike Pastore</p></li>
<li><p>Allow <code>set :&lt;engine&gt;</code> in sinatra-namespace <a href="https://github.com/sinatra/sinatra/pull/1255">#1255</a> by Christian Höppner</p></li>
<li><p>Use prepend instead of include for helpers. Fixes <a href="https://github.com/sinatra/sinatra/pull/1213">#1213</a> <a href="https://github.com/sinatra/sinatra/pull/1214">#1214</a> by Mike Pastore</p></li>
<li><p>Fix issue with passed routes and provides Fixes <a href="https://github.com/sinatra/sinatra/pull/1095">#1095</a> <a href="https://github.com/sinatra/sinatra/pull/1606">#1606</a> by Mike Pastore, Jordan Owens</p></li>
<li><p>Add QuietLogger that excludes paths from Rack::CommonLogger <a href="https://github.com/sinatra/sinatra/pull/1250">1250</a> by Christoph Wagner</p></li>
<li><p><a href="Sinatra/Contrib.html" title="Sinatra::Contrib (module)"><code>::Sinatra::Contrib</code></a> dependency updates. Fixes <a href="https://github.com/sinatra/sinatra/pull/1207">#1207</a> <a href="https://github.com/sinatra/sinatra/pull/1411">#1411</a> by Mike Pastore</p></li>
<li><p>Allow CSP to fallback to default-src. Fixes <a href="https://github.com/sinatra/sinatra/pull/1484">#1484</a> <a href="https://github.com/sinatra/sinatra/pull/1490">#1490</a> by Jordan Owens</p></li>
<li><p>Replace <code>origin_whitelist</code> with <code>permitted_origins</code>. Closes <a href="https://github.com/sinatra/sinatra/issues/1620">#1620</a> <a href="https://github.com/sinatra/sinatra/pull/1625">#1625</a> by rhymes</p></li>
<li><p>Use Rainbows instead of thin for async/stream features. Closes <a href="https://github.com/sinatra/sinatra/issues/1624">#1624</a> <a href="https://github.com/sinatra/sinatra/pull/1627">#1627</a> by Ryuichi KAWAMATA</p></li>
<li><p>Enable EscapedParams if passed via settings. Closes <a href="https://github.com/sinatra/sinatra/issues/1615">#1615</a> <a href="https://github.com/sinatra/sinatra/issues/1632">#1632</a> by Anders Bälter</p></li>
<li><p>Support for parameters in mime types. Fixes <a href="https://github.com/sinatra/sinatra/issues/1141">#1141</a> by John Hope</p></li>
<li><p>Handle null byte when serving static files <a href="https://github.com/sinatra/sinatra/issues/1574">#1574</a> by Kush Fanikiso</p></li>
<li><p>Improve development support and documentation and source code by Olle Jonsson, Pierre-Adrien Buisson, Shota Iguchi</p></li>
</ul>

<h2>2.0.8.1 / 2020-01-02</h2>

<ul>
<li>Allow multiple hashes to be passed in <code>merge</code> and <code>merge!</code> for <a href="Sinatra/IndifferentHash.html" title="Sinatra::IndifferentHash (class)"><code>::Sinatra::IndifferentHash</code></a> <a href="https://github.com/sinatra/sinatra/pull/1572">#1572</a> by Shota Iguchi</li>
</ul>

<h2>2.0.8 / 2020-01-01</h2>

<ul>
<li><p>Lookup Tilt class for template engine without loading files <a href="https://github.com/sinatra/sinatra/pull/1558">#1558</a>. Fixes <a href="https://github.com/sinatra/sinatra/issues/1172">#1172</a> by Jordan Owens</p></li>
<li><p>Add request info in NotFound exception <a href="https://github.com/sinatra/sinatra/pull/1566">#1566</a> by Stefan Sundin</p></li>
<li><p>Add <code>.yaml</code> support in <code>Sinatra::Contrib::ConfigFile</code> <a href="https://github.com/sinatra/sinatra/issues/1564">#1564</a>. Fixes <a href="https://github.com/sinatra/sinatra/issues/1563">#1563</a> by Emerson Manabu Araki</p></li>
<li><p>Remove only routing parameters from @params hash <a href="https://github.com/sinatra/sinatra/pull/1569">#1569</a>. Fixes <a href="https://github.com/sinatra/sinatra/issues/1567">#1567</a> by Jordan Owens, Horacio</p></li>
<li><p>Support <code>capture</code> and <code>content_for</code> with Hamlit <a href="https://github.com/sinatra/sinatra/pull/1580">#1580</a> by Takashi Kokubun</p></li>
<li><p>Eliminate warnings of keyword parameter for Ruby 2.7.0 <a href="https://github.com/sinatra/sinatra/pull/1581">#1581</a> by Osamtimizer</p></li>
</ul>

<h2>2.0.7 / 2019-08-22</h2>

<ul>
<li>Fix a regression <a href="https://github.com/sinatra/sinatra/pull/1560">#1560</a> by Kunpei Sakai</li>
</ul>

<h2>2.0.6 / 2019-08-21</h2>

<ul>
<li><p>Fix an issue setting environment from command line option <a href="https://github.com/sinatra/sinatra/pull/1547">#1547</a>, <a href="https://github.com/sinatra/sinatra/pull/1554">#1554</a> by Jordan Owens, Kunpei Sakai</p></li>
<li><p>Support pandoc as a new markdown renderer <a href="https://github.com/sinatra/sinatra/pull/1533">#1533</a> by Vasiliy</p></li>
<li><p>Remove outdated code for tilt 1.x <a href="https://github.com/sinatra/sinatra/pull/1532">#1532</a> by Vasiliy</p></li>
<li><p>Remove an extra logic for <code>force_encoding</code> <a href="https://github.com/sinatra/sinatra/pull/1527">#1527</a> by Jordan Owens</p></li>
<li><p>Avoid multiple errors even if <code>params</code> contains special values <a href="https://github.com/sinatra/sinatra/pull/1527">#1526</a> by Kunpei Sakai</p></li>
<li><p>Support <code>bundler/inline</code> with <code>require &#39;sinatra&#39;</code> integration <a href="https://github.com/sinatra/sinatra/pull/1520">#1520</a> by Kunpei Sakai</p></li>
<li><p>Avoid <code>TypeError</code> when params contain a key without a value on Ruby &lt; 2.4 <a href="https://github.com/sinatra/sinatra/pull/1516">#1516</a> by Samuel Giddins</p></li>
<li><p>Improve development support and documentation and source code by  Olle Jonsson, Basavanagowda Kanur, Yuki MINAMIYA</p></li>
</ul>

<h2>2.0.5 / 2018-12-22</h2>

<ul>
<li><p>Avoid FrozenError when params contains frozen value <a href="https://github.com/sinatra/sinatra/pull/1506">#1506</a> by Kunpei Sakai</p></li>
<li><p>Add support for Erubi <a href="https://github.com/sinatra/sinatra/pull/1494">#1494</a> by @tkmru</p></li>
<li><p><code>IndifferentHash</code> monkeypatch warning improvements <a href="https://github.com/sinatra/sinatra/pull/1477">#1477</a> by Mike Pastore</p></li>
<li><p>Improve development support and documentation and source code by Anusree Prakash, Jordan Owens, @ceclinux and @krororo.</p></li>
</ul>

<h3>sinatra-contrib</h3>

<ul>
<li><p>Add <code>flush</code> option to <code>content_for</code> <a href="https://github.com/sinatra/sinatra/pull/1225">#1225</a> by Shota Iguchi</p></li>
<li><p>Drop activesupport dependency from sinatra-contrib <a href="https://github.com/sinatra/sinatra/pull/1448">#1448</a></p></li>
<li><p>Update <code>yield_content</code> to append default to ERB template buffer <a href="https://github.com/sinatra/sinatra/pull/1500">#1500</a> by Jordan Owens</p></li>
</ul>

<h3>rack-protection</h3>

<ul>
<li>Don&#39;t track the Accept-Language header by default <a href="https://github.com/sinatra/sinatra/pull/1504">#1504</a> by Artem Chistyakov</li>
</ul>

<h2>2.0.4 / 2018-09-15</h2>

<ul>
<li><p>Don&#39;t blow up when passing frozen string to <code>send_file</code> disposition <a href="https://github.com/sinatra/sinatra/pull/1137">#1137</a> by Andrew Selder</p></li>
<li><p>Fix ubygems LoadError <a href="https://github.com/sinatra/sinatra/pull/1436">#1436</a> by Pavel Rosický</p></li>
<li><p>Unescape regex captures <a href="https://github.com/sinatra/sinatra/pull/1446">#1446</a> by Jordan Owens</p></li>
<li><p>Slight performance improvements for IndifferentHash <a href="https://github.com/sinatra/sinatra/pull/1427">#1427</a> by Mike Pastore</p></li>
<li><p>Improve development support and documentation and source code by Will Yang, Jake Craige, Grey Baker and Guilherme Goettems Schneider</p></li>
</ul>

<h2>2.0.3 / 2018-06-09</h2>

<ul>
<li>Fix the backports gem regression <a href="https://github.com/sinatra/sinatra/issues/1442">#1442</a> by Marc-André Lafortune</li>
</ul>

<h2>2.0.2 / 2018-06-05</h2>

<ul>
<li><p>Escape invalid query parameters <a href="https://github.com/sinatra/sinatra/issues/1432">#1432</a> by Kunpei Sakai</p>

<ul>
<li>The patch fixes <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-11627">CVE-2018-11627</a>.</li>
</ul></li>
<li><p>Fix undefined method error for <a href="Sinatra/RequiredParams.html" title="Sinatra::RequiredParams (module)"><code>::Sinatra::RequiredParams</code></a> with hash key <a href="https://github.com/sinatra/sinatra/issues/1431">#1431</a> by Arpit Chauhan</p></li>
<li><p>Add xml content-types to valid html_types for <a href="Rack/Protection.html" title="Rack::Protection (module)"><code>::Rack::Protection</code></a> <a href="https://github.com/sinatra/sinatra/issues/1413">#1413</a> by Reenan Arbitrario</p></li>
<li><p>Encode route parameters using <code>:default_encoding</code> setting <a href="https://github.com/sinatra/sinatra/issues/1412">#1412</a> by Brian m. Carlson</p></li>
<li><p>Fix unpredictable behaviour from <a href="Sinatra/ConfigFile.html" title="Sinatra::ConfigFile (module)"><code>::Sinatra::ConfigFile</code></a> <a href="https://github.com/sinatra/sinatra/issues/1244">#1244</a> by John Hope</p></li>
<li><p>Add Sinatra::IndifferentHash#slice <a href="https://github.com/sinatra/sinatra/issues/1405">#1405</a> by Shota Iguchi</p></li>
<li><p>Remove status code 205 from drop body response <a href="https://github.com/sinatra/sinatra/issues/1398">#1398</a> by Shota Iguchi</p></li>
<li><p>Ignore empty captures from params <a href="https://github.com/sinatra/sinatra/issues/1390">#1390</a> by Shota Iguchi</p></li>
<li><p>Improve development support and documentation and source code by Zp Yuan, Andreas Finger, Olle Jonsson, Shota Iguchi, Nikita Bulai and Joshua O&#39;Brien</p></li>
</ul>

<h2>2.0.1 / 2018-02-17</h2>

<ul>
<li><p>Repair nested namespaces, by avoiding prefix duplication <a href="https://github.com/sinatra/sinatra/issues/1322">#1322</a>. Fixes <a href="https://github.com/sinatra/sinatra/issues/1310">#1310</a> by Kunpei Sakai</p></li>
<li><p>Add pattern matches to values for Mustermann::Concat <a href="https://github.com/sinatra/sinatra/issues/1333">#1333</a>. Fixes <a href="https://github.com/sinatra/sinatra/issues/1332">#1332</a> by Dawa Ometto</p></li>
<li><p>Ship the VERSION file with the gem, to allow local unpacking <a href="https://github.com/sinatra/sinatra/issues/1338">#1338</a> by Olle Jonsson</p></li>
<li><p>Fix issue with custom error handler on bad request <a href="https://github.com/sinatra/sinatra/issues/1351">#1351</a>. Fixes <a href="https://github.com/sinatra/sinatra/issues/1350">#1350</a> by Jordan Owens</p></li>
<li><p>Override Rack::ShowExceptions#pretty to set custom template <a href="https://github.com/sinatra/sinatra/issues/1377">#1377</a>. Fixes <a href="https://github.com/sinatra/sinatra/issues/1376">#1376</a> by Jordan Owens</p></li>
<li><p>Enhanced path validation in Windows <a href="https://github.com/sinatra/sinatra/issues/1379">#1379</a> by Orange Tsai from DEVCORE</p>

<ul>
<li>The patch fixes <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-7212">CVE-2018-7212</a></li>
</ul></li>
<li><p>Improve development support and documentation by Faheel Ahmad, Shota Iguchi, Olle Jonsson, Manabu Niseki, John Hope, Horacio, Ice-Storm, GraniteRock, Raman Skaskevich, Carlos Azuaje, 284km, Dan Rice and Zachary Scott</p></li>
</ul>

<h2>2.0.0 / 2017-04-10</h2>

<ul>
<li><p>Use Mustermann for patterns <a href="https://github.com/sinatra/sinatra/issues/1086">#1086</a> by Konstantin Haase</p></li>
<li><p>Server now provides <code>-q</code> flag for quiet mode, which disables start/stop messages <a href="https://github.com/sinatra/sinatra/issues/1153">#1153</a> by Vasiliy.</p></li>
<li><p>Session middleware can now be specified with <code>:session_store</code> setting <a href="https://github.com/sinatra/sinatra/issues/1161">#1161</a> by Jordan Owens.</p></li>
<li><p><code>APP_ENV</code> is now preferred and recommended over <code>RACK_ENV</code> for setting environment <a href="https://github.com/sinatra/sinatra/issues/984">#984</a> by Damien Mathieu.</p></li>
<li><p>Add Reel support <a href="https://github.com/sinatra/sinatra/issues/793">#793</a> by Patricio Mac Adden.</p></li>
<li><p>Make route params available during error handling <a href="https://github.com/sinatra/sinatra/issues/895">#895</a> by Jeremy Evans.</p></li>
<li><p>Unify <code>not_found</code> and <code>error</code> 404 behavior <a href="https://github.com/sinatra/sinatra/issues/896">#896</a> by Jeremy Evans.</p></li>
<li><p>Enable Ruby 2.3 <code>frozen_string_literal</code> feature <a href="https://github.com/sinatra/sinatra/issues/1076">#1076</a> by Vladimir Kochnev.</p></li>
<li><p>Add Sinatra::ShowExceptions::TEMPLATE and patched Rack::ShowExceptions to prefer Sinatra template by Zachary Scott.</p></li>
<li><p>Sinatra::Runner is used internally for integration tests <a href="https://github.com/sinatra/sinatra/issues/840">#840</a> by Nick Sutterer.</p></li>
<li><p>Fix case-sensitivity issue in <code>uri</code> method <a href="https://github.com/sinatra/sinatra/issues/889">#889</a> by rennex.</p></li>
<li><p>Use <code>Rack::Utils.status_code</code> to allow <code>status</code> helper to use symbol as well as numeric codes <a href="https://github.com/sinatra/sinatra/issues/968">#968</a> by Tobias H. Michaelsen.</p></li>
<li><p>Improved error handling for invalid params through Rack <a href="https://github.com/sinatra/sinatra/issues/1070">#1070</a> by Jordan Owens.</p></li>
<li><p>Ensure template is cached only once <a href="https://github.com/sinatra/sinatra/issues/1021">#1021</a> by Patrik Rak.</p></li>
<li><p>Rack middleware is initialized at server runtime rather than after receiving first request <a href="https://github.com/sinatra/sinatra/issues/1205">#1205</a> by Itamar Turner-Trauring.</p></li>
<li><p>Improve Session Secret documentation to encourage better security practices <a href="https://github.com/sinatra/sinatra/issues/1218">#1218</a> by Glenn Rempe</p></li>
<li><p>Exposed global and per-route options for Mustermann route parsing <a href="https://github.com/sinatra/sinatra/issues/1233">#1233</a> by Mike Pastore</p></li>
<li><p>Use same <code>session_secret</code> for classic and modular apps in development <a href="https://github.com/sinatra/sinatra/issues/1245">#1245</a> by Marcus Stollsteimer</p></li>
<li><p>Make authenticity token length a fixed value of 32 <a href="https://github.com/sinatra/sinatra/issues/1181">#1181</a> by Jordan Owens</p></li>
<li><p>Modernize Rack::Protection::ContentSecurityPolicy with CSP Level 2 and 3 Directives <a href="https://github.com/sinatra/sinatra/issues/1202">#1202</a> by Glenn Rempe</p></li>
<li><p>Adds preload option to Rack:Protection:StrictTransport <a href="https://github.com/sinatra/sinatra/issues/1209">#1209</a> by Ed Robinson</p></li>
<li><p>Improve BadRequest logic. Raise and handle exceptions if status is 400 <a href="https://github.com/sinatra/sinatra/issues/1212">#1212</a> by Mike Pastore</p></li>
<li><p>Make Rack::Test a development dependency <a href="https://github.com/sinatra/sinatra/issues/1232">#1232</a> by Mike Pastore</p></li>
<li><p>Capture exception messages of raised NotFound and BadRequest <a href="https://github.com/sinatra/sinatra/issues/1210">#1210</a> by Mike Pastore</p></li>
<li><p>Add explicit set method to contrib/cookies to override cookie settings <a href="https://github.com/sinatra/sinatra/issues/1240">#1240</a> by Andrew Allen</p></li>
<li><p>Avoid executing filters even if prefix matches with other namespace <a href="https://github.com/sinatra/sinatra/issues/1253">#1253</a> by namusyaka</p></li>
<li><p>Make <code>#has_key?</code> also indifferent in access, can accept String or Symbol <a href="https://github.com/sinatra/sinatra/issues/1262">#1262</a> by Stephen Paul Weber</p></li>
<li><p>Add <code>allow_if</code> option to bypass json csrf protection <a href="https://github.com/sinatra/sinatra/issues/1265">#1265</a> by Jordan Owens</p></li>
<li><p>rack-protection: Bundle StrictTransport, CookieTossing, and CSP <a href="https://github.com/sinatra/sinatra/issues/1267">#1267</a> by Mike Pastore</p></li>
<li><p>Add <code>:strict_paths</code> option for managing trailing slashes <a href="https://github.com/sinatra/sinatra/issues/1273">#1273</a> by namusyaka</p></li>
<li><p>Add full IndifferentHash implementation to params <a href="https://github.com/sinatra/sinatra/issues/1279">#1279</a> by Mike Pastore</p></li>
</ul>

<h2>1.4.8 / 2017-01-30</h2>

<ul>
<li>Fix the deprecation warning from Ruby about Fixnum. <a href="https://github.com/sinatra/sinatra/issues/1235">#1235</a> by Akira Matsuda</li>
</ul>

<h2>1.4.7 / 2016-01-24</h2>

<ul>
<li><p>Add Ashley Williams, Trevor Bramble, and Kashyap Kondamudi to team Sinatra.</p></li>
<li><p>Correctly handle encoded colons in routes. (Jeremy Evans)</p></li>
<li><p>Rename CHANGES to CHANGELOG.md and update Rakefile. <a href="https://github.com/sinatra/sinatra/issues/1043">#1043</a> (Eliza Sorensen)</p></li>
<li><p>Improve documentation. <a href="https://github.com/sinatra/sinatra/issues/941">#941</a>, <a href="https://github.com/sinatra/sinatra/issues/1069">#1069</a>, <a href="https://github.com/sinatra/sinatra/issues/1075">#1075</a>, <a href="https://github.com/sinatra/sinatra/issues/1025">#1025</a>, <a href="https://github.com/sinatra/sinatra/issues/1052">#1052</a> (Many great folks)</p></li>
<li><p>Introduce <code>Sinatra::Ext</code> to workaround Rack 1.6 bug to fix Ruby 1.8.7
support. <a href="https://github.com/sinatra/sinatra/issues/1080">#1080</a> (Zachary Scott)</p></li>
<li><p>Add CONTRIBUTING guide. <a href="https://github.com/sinatra/sinatra/issues/987">#987</a> (Katrina Owen)</p></li>
</ul>

<h2>1.4.6 / 2015-03-23</h2>

<ul>
<li><p>Improve tests and documentation. (Darío Hereñú, Seiichi Yonezawa, kyoendo,
John Voloski, Ferenc-, Renaud Martinet, Christian Haase, marocchino,
huoxito, Damir Svrtan, Amaury Medeiros, Jeremy Evans, Kashyap, shenqihui,
Ausmarton Fernandes, kami, Vipul A M, Lei Wu, 7stud, Taylor Shuler,
namusyaka, burningTyger, Cornelius Bock, detomastah, hakeda, John Hope,
Ruben Gonzalez, Andrey Deryabin, attilaolah, Anton Davydov, Nikita Penzin,
Dyego Costa)</p></li>
<li><p>Remove duplicate require of sinatra/base. (Alexey Muranov)</p></li>
<li><p>Escape HTML in 404 error page. (Andy Brody)</p></li>
<li><p>Refactor to method call in <code>Stream#close</code> and <code>#callback</code>. (Damir Svrtan)</p></li>
<li><p>Depend on latest version of Slim. (Damir Svrtan)</p></li>
<li><p>Fix compatibility with Tilt version 2. (Yegor Timoschenko)</p></li>
<li><p>Fix compatibility issue with Rack <code>pretty</code> method from ShowExceptions.
(Kashyap)</p></li>
<li><p>Show date in local time in exception messages. (tayler1)</p></li>
<li><p>Fix logo on error pages when using Ruby 1.8. (Jeremy Evans)</p></li>
<li><p>Upgrade test suite to Minitest version 5 and fix Ruby 2.2 compatibility.
(Vipul A M)</p></li>
</ul>

<h2>1.4.5 / 2014-04-08</h2>

<ul>
<li><p>Improve tests and documentation. (Seiichi Yonezawa, Mike Gehard, Andrew
Deitrick, Matthew Nicholas Bradley, GoGo tanaka, Carlos Lazo, Shim Tw,
kyoendo, Roman Kuznietsov, Stanislav Chistenko, Ryunosuke SATO, Ben Lewis,
wuleicanada, Patricio Mac Adden, Thais Camilo)</p></li>
<li><p>Fix Ruby warnings. (Vipul A M, Piotr Szotkowski)</p></li>
<li><p>Fix template cache memory leak. (Scott Holden)</p></li>
<li><p>Work around UTF-8 bug in JRuby. (namusyaka)</p></li>
<li><p>Don&#39;t set charset for JSON mime-type (Sebastian Borrazas)</p></li>
<li><p>Fix bug in request.accept? that might trigger a NoMethodError. (sbonami)</p></li>
</ul>

<h2>1.4.4 / 2013-10-21</h2>

<ul>
<li><p>Allow setting layout to false specifically for a single rendering engine.
(Matt Wildig)</p></li>
<li><p>Allow using wildcard in argument passed to <code>request.accept?</code>. (wilkie)</p></li>
<li><p>Treat missing Accept header like wild card. (Patricio Mac Adden)</p></li>
<li><p>Improve tests and documentation. (Darío Javier Cravero, Armen P., michelc,
Patricio Mac Adden, Matt Wildig, Vipul A M, utenmiki, George Timoschenko,
Diogo Scudelletti)</p></li>
<li><p>Fix Ruby warnings. (Vipul A M, Patricio Mac Adden)</p></li>
<li><p>Improve self-hosted server started by <code>run!</code> method or in classic mode.
(Tobias Bühlmann)</p></li>
<li><p>Reduce objects allocated per request. (Vipul A M)</p></li>
<li><p>Drop unused, undocumented options hash from Sinatra.new. (George Timoschenko)</p></li>
<li><p>Keep Content-Length header when response is a <code>Rack::File</code> or when streaming.
(Patricio Mac Adden, George Timoschenko)</p></li>
<li><p>Use reel if it&#39;s the only server available besides webrick. (Tobias Bühlmann)</p></li>
<li><p>Add <code>disable :traps</code> so setting up signal traps for self hosted server can be
skipped. (George Timoschenko)</p></li>
<li><p>The <code>status</code> option passed to <code>send_file</code> may now be a string. (George
Timoschenko)</p></li>
<li><p>Reduce file size of dev mode images for 404 and 500 pages. (Francis Go)</p></li>
</ul>

<h2>1.4.3 / 2013-06-07</h2>

<ul>
<li><p>Running a Sinatra file directly or via <code>run!</code> it will now ignore an
empty $PORT env variable. (noxqsgit)</p></li>
<li><p>Improve documentation. (burningTyger, Patricio Mac Adden,
Konstantin Haase, Diogo Scudelletti, Dominic Imhof)</p></li>
<li><p>Expose matched pattern as env[&quot;sinatra.route&quot;]. (Aman Gupta)</p></li>
<li><p>Fix warning on Ruby 2.0. (Craig Little)</p></li>
<li><p>Improve running subset of tests in isolation. (Viliam Pucik)</p></li>
<li><p>Reorder private/public methods. (Patricio Mac Adden)</p></li>
<li><p>Loosen version dependency for rack, so it runs with Rails 3.2.
(Konstantin Haase)</p></li>
<li><p>Request#accept? now returns true instead of a truthy value. (Alan Harris)</p></li>
</ul>

<h2>1.4.2 / 2013-03-21</h2>

<ul>
<li><p>Fix parsing error for case where both the pattern and the captured part
contain a dot. (Florian Hanke, Konstantin Haase)</p></li>
<li><p>Missing Accept header is treated like <em>/</em>. (Greg Denton)</p></li>
<li><p>Improve documentation. (Patricio Mac Adden, Joe Bottigliero)</p></li>
</ul>

<h2>1.4.1 / 2013-03-15</h2>

<ul>
<li>Make delegated methods available in config.ru (Konstantin Haase)</li>
</ul>

<h2>1.4.0 / 2013-03-15</h2>

<ul>
<li><p>Add support for LINK and UNLINK requests. (Konstantin Haase)</p></li>
<li><p>Add support for Yajl templates. (Jamie Hodge)</p></li>
<li><p>Add support for Rabl templates. (Jesse Cooke)</p></li>
<li><p>Add support for Wlang templates. (Bernard Lambeau)</p></li>
<li><p>Add support for Stylus templates. (Juan David Pastas, Konstantin Haase)</p></li>
<li><p>You can now pass a block to ERb, Haml, Slim, Liquid and Wlang templates,
which will be used when calling <code>yield</code> in the template. (Alexey Muranov)</p></li>
<li><p>When running in classic mode, no longer include Sinatra::Delegator in Object,
instead extend the main object only. (Konstantin Haase)</p></li>
<li><p>Improved route parsing: &quot;/:name.?:format?&quot; with &quot;/foo.png&quot; now matches to
<code>&quot;foo&quot;, format: &quot;png&quot;</code> instead of <code>&quot;foo.png&quot;</code>. (Florian Hanke)</p></li>
<li><p>Add :status option support to send_file. (Konstantin Haase)</p></li>
<li><p>The <code>provides</code> condition now respects an earlier set content type.
(Konstantin Haase)</p></li>
<li><p>Exception#code is only used when :use_code is enabled. Moreover, it will
be ignored if the value is not between 400 and 599. You should use
Exception#http_status instead. (Konstantin Haase)</p></li>
<li><p>Status, headers and body will be set correctly in an after filter when using
halt in a before filter or route. (Konstantin Haase)</p></li>
<li><p>Sinatra::Base.new now returns a Sinatra::Wrapper instance, exposing
<code>#settings</code> and <code>#helpers</code>, yet going through the middleware stack on
<code>#call</code>.  It also implements a nice <code>#inspect</code>, so it plays nice with
Rails&#39; <code>rake routes</code>. (Konstantin Haase)</p></li>
<li><p>In addition to WebRick, Thin and Mongrel, Sinatra will now automatically pick
up Puma, Trinidad, ControlTower or Net::HTTP::Server when installed. The
logic for picking the server has been improved and now depends on the Ruby
implementation used. (Mark Rada, Konstantin Haase, Patricio Mac Adden)</p></li>
<li><p>&quot;Sinatra doesn&#39;t know this ditty&quot; pages now show the app class when running
a modular application. This helps detecting where the response came from when
combining multiple modular apps. (Konstantin Haase)</p></li>
<li><p>When port is not set explicitly, use $PORT env variable if set and only
default to 4567 if not. Plays nice with foreman. (Konstantin Haase)</p></li>
<li><p>Allow setting layout on a per engine basis. (Zachary Scott, Konstantin Haase)</p></li>
<li><p>You can now use <code>register</code> directly in a classic app. (Konstantin Haase)</p></li>
<li><p><code>redirect</code> now accepts URI or Addressable::URI instances. (Nicolas
Sanguinetti)</p></li>
<li><p>Have Content-Disposition header also include file name for <code>inline</code>, not
just for <code>attachment</code>. (Konstantin Haase)</p></li>
<li><p>Better compatibility to Rack 1.5. (James Tucker, Konstantin Haase)</p></li>
<li><p>Make route parsing regex more robust. (Zoltan Dezso, Konstantin Haase)</p></li>
<li><p>Improve Accept header parsing, expose parameters. (Pieter van de Bruggen,
Konstantin Haase)</p></li>
<li><p>Add <code>layout_options</code> render option. Allows you, amongst other things, to
render a layout from a different folder. (Konstantin Haase)</p></li>
<li><p>Explicitly setting <code>layout</code> to <code>nil</code> is treated like setting it to <code>false</code>.
(richo)</p></li>
<li><p>Properly escape attributes in Content-Type header. (Pieter van de Bruggen)</p></li>
<li><p>Default to only serving localhost in development mode. (Postmodern)</p></li>
<li><p>Setting status code to 404 in error handler no longer triggers not_found
handler. (Konstantin Haase)</p></li>
<li><p>The <code>protection</code> option now takes a <code>session</code> key for force
disabling/enabling session based protections. (Konstantin Haase)</p></li>
<li><p>Add <code>x_cascade</code> option to disable <code>X-Cascade</code> header on missing route.
(Konstantin Haase)</p></li>
<li><p>Improve documentation. (Kashyap, Stanislav Chistenko, Zachary Scott,
Anthony Accomazzo, Peter Suschlik, Rachel Mehl, ymmtmsys, Anurag Priyam,
burningTyger, Tony Miller, akicho8, Vasily Polovnyov, Markus Prinz,
Alexey Muranov, Erik Johnson, Vipul A M, Konstantin Haase)</p></li>
<li><p>Convert documentation to Markdown. (Kashyap, Robin Dupret, burningTyger,
Vasily Polovnyov, Iain Barnett, Giuseppe Capizzi, Neil West)</p></li>
<li><p>Don&#39;t set not_found content type to HTML in development mode with custom
not_found handler. (Konstantin Haase)</p></li>
<li><p>Fix mixed indentation for private methods. (Robin Dupret)</p></li>
<li><p>Recalculate Content-Length even if hard coded if body is reset. Relevant
mostly for error handlers. (Nathan Esquenazi, Konstantin Haase)</p></li>
<li><p>Plus sign is once again kept as such when used for URL matches. (Konstantin
Haase)</p></li>
<li><p>Take views option into account for template caching. (Konstantin Haase)</p></li>
<li><p>Consistent use of <code>headers</code> instead of <code>header</code> internally. (Patricio Mac Adden)</p></li>
<li><p>Fix compatibility to RDoc 4. (Bohuslav Kabrda)</p></li>
<li><p>Make chat example work with latest jQuery. (loveky, Tony Miller)</p></li>
<li><p>Make tests run without warnings. (Patricio Mac Adden)</p></li>
<li><p>Make sure value returned by <code>mime_type</code> is a String or nil, even when a
different object is passed in, like an AcceptEntry. (Konstantin Haase)</p></li>
<li><p>Exceptions in <code>after</code> filter are now handled like any other exception.
(Nathan Esquenazi)</p></li>
</ul>

<h2>1.3.6 (backport release) / 2013-03-15</h2>

<p>Backported from 1.4.0:</p>

<ul>
<li><p>Take views option into account for template caching. (Konstantin Haase)</p></li>
<li><p>Improve documentation (Konstantin Haase)</p></li>
<li><p>No longer override <code>define_singleton_method</code>. (Konstantin Haase)</p></li>
</ul>

<h2>1.3.5 / 2013-02-25</h2>

<ul>
<li><p>Fix for RubyGems 2.0 (Uchio KONDO)</p></li>
<li><p>Improve documentation (Konstantin Haase)</p></li>
<li><p>No longer override <code>define_singleton_method</code>. (Konstantin Haase)</p></li>
</ul>

<h2>1.3.4 / 2013-01-26</h2>

<ul>
<li><p>Improve documentation. (Kashyap, Stanislav Chistenko, Konstantin Haase,
ymmtmsys, Anurag Priyam)</p></li>
<li><p>Adjustments to template system to work with Tilt edge. (Konstantin Haase)</p></li>
<li><p>Fix streaming with latest Rack release. (Konstantin Haase)</p></li>
<li><p>Fix default content type for Sinatra::Response with latest Rack release.
(Konstantin Haase)</p></li>
<li><p>Fix regression where + was no longer treated like space. (Ross Boucher)</p></li>
<li><p>Status, headers and body will be set correctly in an after filter when using
halt in a before filter or route. (Konstantin Haase)</p></li>
</ul>

<h2>1.3.3 / 2012-08-19</h2>

<ul>
<li><p>Improved documentation. (burningTyger, Konstantin Haase, Gabriel Andretta,
Anurag Priyam, michelc)</p></li>
<li><p>No longer modify the load path. (Konstantin Haase)</p></li>
<li><p>When keeping a stream open, set up callback/errback correctly to deal with
clients closing the connection. (Konstantin Haase)</p></li>
<li><p>Fix bug where having a query param and a URL param by the same name would
concatenate the two values. (Konstantin Haase)</p></li>
<li><p>Prevent duplicated log output when application is already wrapped in a
<code>Rack::CommonLogger</code>. (Konstantin Haase)</p></li>
<li><p>Fix issue where <code>Rack::Link</code> and Rails were preventing indefinite streaming.
(Konstantin Haase)</p></li>
<li><p>No longer cause warnings when running Ruby with <code>-w</code>. (Konstantin Haase)</p></li>
<li><p>HEAD requests on static files no longer report a Content-Length of 0, but
instead the proper length. (Konstantin Haase)</p></li>
<li><p>When protecting against CSRF attacks, drop the session instead of refusing
the request. (Konstantin Haase)</p></li>
</ul>

<h2>1.3.2 / 2011-12-30</h2>

<ul>
<li><p>Don&#39;t automatically add <code>Rack::CommonLogger</code> if <code>Rack::Server</code> is adding it,
too. (Konstantin Haase)</p></li>
<li><p>Setting <code>logging</code> to <code>nil</code> will avoid setting up <code>Rack::NullLogger</code>.
(Konstantin Haase)</p></li>
<li><p>Route specific params are now available in the block passed to #stream.
(Konstantin Haase)</p></li>
<li><p>Fix bug where rendering a second template in the same request, after the
first one raised an exception, skipped the default layout. (Nathan Baum)</p></li>
<li><p>Fix bug where parameter escaping got enabled when disabling a different
protection. (Konstantin Haase)</p></li>
<li><p>Fix regression: Filters without a pattern may now again manipulate the params
hash. (Konstantin Haase)</p></li>
<li><p>Added examples directory. (Konstantin Haase)</p></li>
<li><p>Improved documentation. (Gabriel Andretta, Markus Prinz, Erick Zetta, Just
Lest, Adam Vaughan, Aleksander Dąbrowski)</p></li>
<li><p>Improved MagLev support. (Tim Felgentreff)</p></li>
</ul>

<h2>1.3.1 / 2011-10-05</h2>

<ul>
<li><p>Support adding more than one callback to the stream object. (Konstantin
Haase)</p></li>
<li><p>Fix for infinite loop when streaming on 1.9.2 with Thin from a modular
application (Konstantin Haase)</p></li>
</ul>

<h2>1.3.0 / 2011-09-30</h2>

<ul>
<li><p>Added <code>stream</code> helper method for easily creating streaming APIs, Server
Sent Events or even WebSockets. See README for more on that topic.
(Konstantin Haase)</p></li>
<li><p>If a HTTP 1.1 client is redirected from a different verb than GET, use 303
instead of 302 by default. You may still pass 302 explicitly. Fixes AJAX
redirects in Internet Explorer 9 (to be fair, everyone else is doing it
wrong and IE is behaving correct). (Konstantin Haase)</p></li>
<li><p>Added support for HTTP PATCH requests. (Konstantin Haase)</p></li>
<li><p>Use rack-protection to defend against common opportunistic attacks.
(Josh Lane, Jacob Burkhart, Konstantin Haase)</p></li>
<li><p>Support for Creole templates, Creole is a standardized wiki markup,
supported by many wiki implementations. (Konstanin Haase)</p></li>
<li><p>The <code>erubis</code> method has been deprecated. If Erubis is available, Sinatra
will automatically use it for rendering ERB templates. <code>require &#39;erb&#39;</code>
explicitly to prevent that behavior. (Magnus Holm, Ryan Tomayko, Konstantin
Haase)</p></li>
<li><p>Patterns now match against the escaped URLs rather than the unescaped
version. This makes Sinatra confirm with RFC 2396 section 2.2 and RFC 2616
section 3.2.3 (escaped reserved characters should not be treated like the
unescaped version), meaning that &quot;/:name&quot; will also match <code>/foo%2Fbar</code>, but
not <code>/foo/bar</code>. To avoid incompatibility, pattern matching has been
adjusted. Moreover, since we do no longer need to keep an unescaped version
of path_info around, we handle all changes to <code>env[&#39;PATH_INFO&#39;]</code> correctly.
(Konstantin Haase)</p></li>
<li><p><code>settings.app_file</code> now defaults to the file subclassing <a href="Sinatra/Base.html" title="Sinatra::Base (class)"><code>::Sinatra::Base</code></a> in
modular applications. (Konstantin Haase)</p></li>
<li><p>Set up <code>Rack::Logger</code> or <code>Rack::NullLogger</code> depending on whether logging
was enabled or not. Also, expose that logger with the <code>logger</code> helper
method. (Konstantin Haase)</p></li>
<li><p>The sessions setting may be an options hash now. (Konstantin Haase)</p></li>
<li><p>Important: Ruby 1.8.6 support has been dropped. This version also depends
on at least Rack 1.3.0. This means that it is incompatible with Rails prior
to 3.1.0. Please use 1.2.x if you require an earlier version of Ruby or
Rack, which we will continue to supply with bug fixes. (Konstantin Haase)</p></li>
<li><p>Renamed <code>:public</code> to <code>:public_folder</code> to avoid overriding Ruby&#39;s built-in
<code>public</code> method/keyword. <code>set(:public, ...)</code> is still possible but shows a
warning. (Konstantin Haase)</p></li>
<li><p>It is now possible to use a different target class for the top level DSL
(aka classic style) than <a href="Sinatra/Application.html" title="Sinatra::Application (class)"><code>::Sinatra::Application</code></a> by setting
<code>Delegator.target</code>. This was mainly introduced to ease testing. (Konstantin
Haase)</p></li>
<li><p>Error handlers defined for an error class will now also handle subclasses
of that class, unless more specific error handlers exist. (Konstantin
Haase)</p></li>
<li><p>Error handling respects Exception#code, again. (Konstantin Haase)</p></li>
<li><p>Changing a setting will merge hashes: <code>set(:x, :a =&gt; 1); set(:x :b =&gt; 2)</code>
will result in <code>{:a =&gt; 1, :b =&gt; 2}</code>. Use <code>set(:x, {:a =&gt; 1}, true)</code> to
avoid this behavior. (Konstantin Haase)</p></li>
<li><p>Added <code>request.accept?</code> and <code>request.preferred_type</code> to ease dealing with
<code>Accept</code> headers. (Konstantin Haase)</p></li>
<li><p>Added <code>:static_cache_control</code> setting to automatically set cache control
headers to static files. (Kenichi Nakamura)</p></li>
<li><p>Added <code>informal?</code>, <code>success?</code>, <code>redirect?</code>, <code>client_error?</code>,
<code>server_error?</code> and <code>not_found?</code> helper methods to ease dealing with status
codes. (Konstantin Haase)</p></li>
<li><p>Uses SecureRandom to generate default session secret. (Konstantin Haase)</p></li>
<li><p>The <code>attachment</code> helper will set Content-Type (if it hasn&#39;t been set yet)
depending on the supplied file name. (Vasiliy Ermolovich)</p></li>
<li><p>Conditional requests on <code>etag</code> helper now work properly for unsafe HTTP
methods. (Matthew Schinckel, Konstantin Haase)</p></li>
<li><p>The <code>last_modified</code> helper does not stop execution and change the status code
if the status code is something different than 200. (Konstantin Haase)</p></li>
<li><p>Added support for If-Unmodified-Since header. (Konstantin Haase)</p></li>
<li><p><a href="Sinatra/Base.html#run!-class_method" title="Sinatra::Base.run! (method)">Sinatra::Base.run!</a> now prints to stderr rather than stdout. (Andrew
Armenia)</p></li>
<li><p><a href="Sinatra/Base.html#run!-class_method" title="Sinatra::Base.run! (method)">Sinatra::Base.run!</a> takes a block allowing access to the Rack handler.
(David Waite)</p></li>
<li><p>Automatic <code>app_file</code> detection now works in directories containing brackets
(Konstantin Haase)</p></li>
<li><p>Exception objects are now passed to error handlers. (Konstantin Haase)</p></li>
<li><p>Improved documentation. (Emanuele Vicentini, Peter Higgins, Takanori
Ishikawa, Konstantin Haase)</p></li>
<li><p>Also specify charset in Content-Type header for JSON. (Konstantin Haase)</p></li>
<li><p>Rack handler names will not be converted to lower case internally, this
allows you to run Sinatra with custom Rack handlers, like Kirk or Mongrel2.
Example: <code>ruby app.rb -s Mongrel2</code> (Konstantin Haase)</p></li>
<li><p>Ignore <code>to_ary</code> on response bodies. Fixes compatibility to Rails 3.1.
(Konstantin Haase)</p></li>
<li><p>Middleware setup is now distributed across multiple methods, allowing
Sinatra extensions to easily hook into the setup process. (Konstantin
Haase)</p></li>
<li><p>Internal refactoring and minor performance improvements. (Konstantin Haase)</p></li>
<li><p>Move Sinatra::VERSION to separate file, so it can be checked without
loading Sinatra. (Konstantin Haase)</p></li>
<li><p>Command line options now complain if value passed to <code>-p</code> is not a valid
integer. (Konstantin Haase)</p></li>
<li><p>Fix handling of broken query params when displaying exceptions. (Luke
Jahnke)</p></li>
</ul>

<h2>1.2.9 (backports release) / 2013-03-15</h2>

<p>IMPORTANT: THIS IS THE LAST 1.2.x RELEASE, PLEASE UPGRADE.</p>

<ul>
<li><p>Display EOL warning when loading Sinatra. (Konstantin Haase)</p></li>
<li><p>Improve documentation. (Anurag Priyam, Konstantin Haase)</p></li>
<li><p>Do not modify the load path. (Konstantin Haase)</p></li>
<li><p>Display deprecation warning if RUBY_IGNORE_CALLERS is used. (Konstantin Haase)</p></li>
<li><p>Add backports library so we can still run on Ruby 1.8.6. (Konstantin Haase)</p></li>
</ul>

<h2>1.2.8 (backports release) / 2011-12-30</h2>

<p>Backported from 1.3.2:</p>

<ul>
<li>Fix bug where rendering a second template in the same request after the
first one raised an exception skipped the default layout (Nathan Baum)</li>
</ul>

<h2>1.2.7 (backports release) / 2011-09-30</h2>

<p>Custom changes:</p>

<ul>
<li>Fix Ruby 1.8.6 issue with Accept header parsing. (Konstantin Haase)</li>
</ul>

<p>Backported from 1.3.0:</p>

<ul>
<li><p>Ignore <code>to_ary</code> on response bodies. Fixes compatibility to Rails 3.1.
(Konstantin Haase)</p></li>
<li><p><code>Sinatra.run!</code> now prints to stderr rather than stdout. (Andrew Armenia)</p></li>
<li><p>Automatic <code>app_file</code> detection now works in directories containing brackets
(Konstantin Haase)</p></li>
<li><p>Improved documentation. (Emanuele Vicentini, Peter Higgins, Takanori
Ishikawa, Konstantin Haase)</p></li>
<li><p>Also specify charset in Content-Type header for JSON. (Konstantin Haase)</p></li>
<li><p>Rack handler names will not be converted to lower case internally, this
allows you to run Sinatra with custom Rack handlers, like Kirk or Mongrel2.
Example: <code>ruby app.rb -s Mongrel2</code> (Konstantin Haase)</p></li>
<li><p>Fix uninitialized instance variable warning. (David Kellum)</p></li>
<li><p>Command line options now complain if value passed to <code>-p</code> is not a valid
integer. (Konstantin Haase)</p></li>
<li><p>Fix handling of broken query params when displaying exceptions. (Luke
Jahnke)</p></li>
</ul>

<h2>1.2.6 / 2011-05-01</h2>

<ul>
<li>Fix broken delegation, backport delegation tests from Sinatra 1.3.
(Konstantin Haase)</li>
</ul>

<h2>1.2.5 / 2011-04-30</h2>

<ul>
<li>Restore compatibility with Ruby 1.8.6. (Konstantin Haase)</li>
</ul>

<h2>1.2.4 / 2011-04-30</h2>

<ul>
<li><p>Sinatra::Application (classic style) does not use a session secret in
development mode, so sessions are not invalidated after every request when
using Shotgun. (Konstantin Haase)</p></li>
<li><p>The request object was shared between multiple Sinatra instances in the
same middleware chain. This caused issues if any non-sinatra routing
happened in-between two of those instances, or running a request twice
against an application (described in the README). The caching was reverted.
See GH<a href="https://github.com/sinatra/sinatra/issues/239">#239</a> and GH<a href="https://github.com/sinatra/sinatra/issues/256">#256</a> for more infos. (Konstantin Haase)</p></li>
<li><p>Fixes issues where the top level DSL was interfering with method_missing
proxies. This issue surfaced when Rails 3 was used with older Sass versions
and Sinatra &gt;= 1.2.0. (Konstantin Haase)</p></li>
<li><p>Sinatra::Delegator.delegate is now able to delegate any method names, even
those containing special characters. This allows better integration into
other programming languages on Rubinius (probably on the JVM, too), like
Fancy. (Konstantin Haase)</p></li>
<li><p>Remove HEAD request logic and let Rack::Head handle it instead. (Paolo
&quot;Nusco&quot; Perrotta)</p></li>
</ul>

<h2>1.2.3 / 2011-04-13</h2>

<ul>
<li><p>This release is compatible with Tilt 1.3, it will still work with Tilt 1.2.2,
however, if you want to use a newer Tilt version, you have to upgrade to at
least this version of Sinatra. (Konstantin Haase)</p></li>
<li><p>Helpers dealing with time, like <code>expires</code>, handle objects that pretend to be
numbers, like <code>ActiveSupport::Duration</code>, better. (Konstantin Haase)</p></li>
</ul>

<h2>1.2.2 / 2011-04-08</h2>

<ul>
<li><p>The <code>:provides =&gt; :js</code> condition now matches both <code>application/javascript</code>
and <code>text/javascript</code>. The <code>:provides =&gt; :xml</code> condition now matches both
<code>application/xml</code> and <code>text/xml</code>. The <code>Content-Type</code> header is set
accordingly. If the client accepts both, the <code>application/*</code> version is
preferred, since the <code>text/*</code> versions are deprecated. (Konstantin Haase)</p></li>
<li><p>The <code>provides</code> condition now handles wildcards in <code>Accept</code> headers correctly.
Thus <code>:provides =&gt; :html</code> matches <code>text/html</code>, <code>text/*</code> and <code>*/*</code>.
(Konstantin Haase)</p></li>
<li><p>When parsing <code>Accept</code> headers, <code>Content-Type</code> preferences are honored
according to RFC 2616 section 14.1. (Konstantin Haase)</p></li>
<li><p>URIs passed to the <code>url</code> helper or <code>redirect</code> may now use any schema to be
identified as absolute URIs, not only <code>http</code> or <code>https</code>. (Konstantin Haase)</p></li>
<li><p>Handles <code>Content-Type</code> strings that already contain parameters correctly in
<code>content_type</code> (example: <code>content_type &quot;text/plain; charset=utf-16&quot;</code>).
(Konstantin Haase)</p></li>
<li><p>If a route with an empty pattern is defined (<code>get(&quot;&quot;) { ... }</code>) requests with
an empty path info match this route instead of &quot;/&quot;. (Konstantin Haase)</p></li>
<li><p>In development environment, when running under a nested path, the image URIs
on the error pages are set properly. (Konstantin Haase)</p></li>
</ul>

<h2>1.2.1 / 2011-03-17</h2>

<ul>
<li><p>Use a generated session secret when using <code>enable :sessions</code>. (Konstantin
Haase)</p></li>
<li><p>Fixed a bug where the wrong content type was used if no content type was set
and a template engine was used with a different engine for the layout with
different default content types, say Less embedded in Slim. (Konstantin
Haase)</p></li>
<li><p>README translations improved (Gabriel Andretta, burningTyger, Sylvain Desvé,
Gregor Schmidt)</p></li>
</ul>

<h2>1.2.0 / 2011-03-03</h2>

<ul>
<li><p>Added <code>slim</code> rendering method for rendering Slim templates. (Steve
Hodgkiss)</p></li>
<li><p>The <code>markaby</code> rendering method now allows passing a block, making inline
usage possible. Requires Tilt 1.2 or newer. (Konstantin Haase)</p></li>
<li><p>All render methods now take a <code>:layout_engine</code> option, allowing to use a
layout in a different template language. Even more useful than using this
directly (<code>erb :index, :layout_engine =&gt; :haml</code>) is setting this globally for
a template engine that otherwise does not support layouts, like Markdown or
Textile (<code>set :markdown, :layout_engine =&gt; :erb</code>). (Konstantin Haase)</p></li>
<li><p>Before and after filters now support conditions, both with and without
patterns (<code>before &#39;/api/*&#39;, :agent =&gt; /Songbird/</code>). (Konstantin Haase)</p></li>
<li><p>Added a <code>url</code> helper method which constructs absolute URLs. Copes with
reverse proxies and Rack handlers correctly. Aliased to <code>to</code>, so you can
write <code>redirect to(&#39;/foo&#39;)</code>. (Konstantin Haase)</p></li>
<li><p>If running on 1.9, patterns for routes and filters now support named
captures: <code>get(%r{/hi/(?&lt;name&gt;[^/?#]+)}) { &quot;Hi #{params[&#39;name&#39;]}&quot; }</code>.
(Steve Price)</p></li>
<li><p>All rendering methods now take a <code>:scope</code> option, which renders them in
another context. Note that helpers and instance variables will be
unavailable if you use this feature. (Paul Walker)</p></li>
<li><p>The behavior of <code>redirect</code> can now be configured with <code>absolute_redirects</code>
and <code>prefixed_redirects</code>. (Konstantin Haase)</p></li>
<li><p><code>send_file</code> now allows overriding the Last-Modified header, which defaults
to the file&#39;s mtime, by passing a <code>:last_modified</code> option. (Konstantin Haase)</p></li>
<li><p>You can use your own template lookup method by defining <code>find_template</code>.
This allows, among other things, using more than one views folder.
(Konstantin Haase)</p></li>
<li><p>Largely improved documentation. (burningTyger, Vasily Polovnyov, Gabriel
Andretta, Konstantin Haase)</p></li>
<li><p>Improved error handling. (cactus, Konstantin Haase)</p></li>
<li><p>Skip missing template engines in tests correctly. (cactus)</p></li>
<li><p>Sinatra now ships with a Gemfile for development dependencies, since it eases
supporting different platforms, like JRuby. (Konstantin Haase)</p></li>
</ul>

<h2>1.1.4 (backports release) / 2011-04-13</h2>

<ul>
<li>Compatible with Tilt 1.3. (Konstantin Haase)</li>
</ul>

<h2>1.1.3 / 2011-02-20</h2>

<ul>
<li><p>Fixed issues with <code>user_agent</code> condition if the user agent header is missing.
(Konstantin Haase)</p></li>
<li><p>Fix some routing tests that have been skipped by accident (Ross A. Baker)</p></li>
<li><p>Fix rendering issues with Builder and Nokogiri (Konstantin Haase)</p></li>
<li><p>Replace last_modified helper with better implementation. (cactus,
Konstantin Haase)</p></li>
<li><p>Fix issue with charset not being set when using <code>provides</code> condition.
(Konstantin Haase)</p></li>
<li><p>Fix issue with <code>render</code> not picking up all alternative file extensions for
a rendering engine - it was not possible to register &quot;.html.erb&quot; without
tricks. (Konstantin Haase)</p></li>
</ul>

<h2>1.1.2 / 2010-10-25</h2>

<p>Like 1.1.1, but with proper CHANGES file.</p>

<h2>1.1.1 / 2010-10-25</h2>

<ul>
<li><p>README has been translated to Russian (Nickolay Schwarz, Vasily Polovnyov)
and Portuguese (Luciano Sousa).</p></li>
<li><p>Nested templates without a <code>:layout</code> option can now be used from the layout
template without causing an infinite loop. (Konstantin Haase)</p></li>
<li><p>Inline templates are now encoding aware and can therefore be used with
unicode characters on Ruby 1.9. Magic comments at the beginning of the file
will be honored. (Konstantin Haase)</p></li>
<li><p>Default <code>app_file</code> is set correctly when running with bundler. Using
bundler caused Sinatra not to find the <code>app_file</code> and therefore not to find
the <code>views</code> folder on it&#39;s own. (Konstantin Haase)</p></li>
<li><p>Better handling of Content-Type when using <code>send_file</code>: If file extension
is unknown, fall back to <code>application/octet-stream</code> and do not override
content type if it has already been set, except if <code>:type</code> is passed
explicitly (Konstantin Haase)</p></li>
<li><p>Path is no longer cached if changed between handlers that do pattern
matching. This means you can change <code>request.path_info</code> in a pattern
matching before filter. (Konstantin Haase)</p></li>
<li><p>Headers set by cache_control now always set max_age as an Integer, making
sure it is compatible with RFC2616. (Konstantin Haase)</p></li>
<li><p>Further improved handling of string encodings on Ruby 1.9, templates now
honor default_encoding and URLs support unicode characters. (Konstantin
Haase)</p></li>
</ul>

<h2>1.1.0 / 2010-10-24</h2>

<ul>
<li><p>Before and after filters now support pattern matching, including the
ability to use captures: &quot;before(&#39;/user/:name&#39;) { |name| ... }&quot;. This
avoids manual path checking. No performance loss if patterns are avoided.
(Konstantin Haase)</p></li>
<li><p>It is now possible to render SCSS files with the <code>scss</code> method, which
behaves exactly like <code>sass</code> except for the different file extension and
assuming the SCSS syntax. (Pedro Menezes, Konstantin Haase)</p></li>
<li><p>Added <code>liquid</code>, <code>markdown</code>, <code>nokogiri</code>, <code>textile</code>, <code>rdoc</code>, <code>radius</code>,
<code>markaby</code>, and <code>coffee</code> rendering methods for rendering Liquid, Markdown,
Nokogiri, Textile, RDoc, Radius, Markaby and CoffeeScript templates.
(Konstantin Haase)</p></li>
<li><p>Now supports byte-range requests (the HTTP_RANGE header) for static files.
Multi-range requests are not supported, however. (Jens Alfke)</p></li>
<li><p>You can now use #settings method from class and top level for convenience.
(Konstantin Haase)</p></li>
<li><p>Setting multiple values now no longer relies on #to_hash and therefore
accepts any Enumerable as parameter. (Simon Rozet)</p></li>
<li><p>Nested templates default the <code>layout</code> option to <code>false</code> rather than <code>true</code>.
This eases the use of partials. If you wanted to render one haml template
embedded in another, you had to call <code>haml :partial, {}, :layout =&gt; false</code>.
As you almost never want the partial to be wrapped in the standard layout
in this situation, you now only have to call <code>haml :partial</code>. Passing in
<code>layout</code> explicitly is still possible. (Konstantin Haase)</p></li>
<li><p>If a the return value of one of the render functions is used as a response
body and the content type has not been set explicitly, Sinatra chooses a
content type corresponding to the rendering engine rather than just using
&quot;text/html&quot;. (Konstantin Haase)</p></li>
<li><p>README is now available in Chinese (Wu Jiang), French (Mickael Riga),
German (Bernhard Essl, Konstantin Haase, burningTyger), Hungarian (Janos
Hardi) and Spanish (Gabriel Andretta). The extremely outdated Japanese
README has been updated (Kouhei Yanagita).</p></li>
<li><p>It is now possible to access Sinatra&#39;s template_cache from the outside.
(Nick Sutterer)</p></li>
<li><p>The <code>last_modified</code> method now also accepts DateTime instances and makes
sure the header will always be set to a string. (Konstantin Haase)</p></li>
<li><p>599 now is a legal status code. (Steve Shreeve)</p></li>
<li><p>This release is compatible with Ruby 1.9.2. Sinatra was trying to read
non existent files Ruby added to the call stack. (Shota Fukumori,
Konstantin Haase)</p></li>
<li><p>Prevents a memory leak on 1.8.6 in production mode. Note, however, that
this is due to a bug in 1.8.6 and request will have the additional overhead
of parsing templates again on that version. It is recommended to use at
least Ruby 1.8.7. (Konstantin Haase)</p></li>
<li><p>Compares last modified date correctly. <code>last_modified</code> was halting only
when the &#39;If-Modified-Since&#39; header date was equal to the time specified.
Now, it halts when is equal or later than the time specified (Gabriel
Andretta).</p></li>
<li><p>Sinatra is now usable in combination with Rails 3. When mounting a Sinatra
application under a subpath in Rails 3, the PATH_INFO is not prefixed with
a slash and no routes did match. (José Valim)</p></li>
<li><p>Better handling of encodings in 1.9, defaults params encoding to UTF-8.
(Konstantin Haase)</p></li>
<li><p><code>show_exceptions</code> handling is now triggered after custom error handlers, if
it is set to <code>:after_handlers</code>, thus not disabling those handler in
development mode. (pangel, Konstantin Haase)</p></li>
<li><p>Added ability to handle weighted HTTP_ACCEPT headers. (Davide D&#39;Agostino)</p></li>
<li><p><code>send_file</code> now always respects the <code>:type</code> option if set. Previously it
was discarded if no matching mime type was found, which made it impossible
to directly pass a mime type. (Konstantin Haase)</p></li>
<li><p><code>redirect</code> always redirects to an absolute URI, even if a relative URI was
passed. Ensures compatibility with RFC 2616 section 14.30. (Jean-Philippe
Garcia Ballester, Anthony Williams)</p></li>
<li><p>Broken examples for using Erubis, Haml and Test::Unit in README have been
fixed. (Nick Sutterer, Doug Ireton, Jason Stewart, Eric Marden)</p></li>
<li><p>Sinatra now handles SIGTERM correctly. (Patrick Collison)</p></li>
<li><p>Fixes an issue with inline templates in modular applications that manually
call <code>run!</code>. (Konstantin Haase)</p></li>
<li><p>Spaces after inline template names are now ignored (Konstantin Haase)</p></li>
<li><p>It&#39;s now possible to use Sinatra with different package management
systems defining a custom require. (Konstantin Haase)</p></li>
<li><p>Lighthouse has been dropped in favor of GitHub issues.</p></li>
<li><p>Tilt is now a dependency and therefore no longer ships bundled with
Sinatra. (Ryan Tomayko, Konstantin Haase)</p></li>
<li><p>Sinatra now depends on Rack 1.1 or higher. Rack 1.0 is no longer supported.
(Konstantin Haase)</p></li>
</ul>

<h2>1.0 / 2010-03-23</h2>

<ul>
<li><p>It&#39;s now possible to register blocks to run after each request using
after filters. After filters run at the end of each request, after
routes and error handlers. (Jimmy Schementi)</p></li>
<li><p>Sinatra now uses Tilt <a href="http://github.com/rtomayko/tilt">http://github.com/rtomayko/tilt</a> for rendering
templates. This adds support for template caching, consistent
template backtraces, and support for new template engines, like
mustache and liquid. (Ryan Tomayko)</p></li>
<li><p>ERB, Erubis, and Haml templates are now compiled the first time
they&#39;re rendered instead of being string eval&#39;d on each invocation.
Benchmarks show a 5x-10x improvement in render time. This also
reduces the number of objects created, decreasing pressure on Ruby&#39;s
GC. (Ryan Tomayko)</p></li>
<li><p>New &#39;settings&#39; method gives access to options in both class and request
scopes. This replaces the &#39;options&#39; method. (Chris Wanstrath)</p></li>
<li><p>New boolean &#39;reload_templates&#39; setting controls whether template files
are reread from disk and recompiled on each request. Template read/compile
is cached by default in all environments except development. (Ryan Tomayko)</p></li>
<li><p>New &#39;erubis&#39; helper method for rendering ERB template with Erubis. The
erubis gem is required. (Dylan Egan)</p></li>
<li><p>New &#39;cache_control&#39; helper method provides a convenient way of
setting the Cache-Control response header. Takes a variable number
of boolean directives followed by a hash of value directives, like
this: cache_control :public, :must_revalidate, :max_age =&gt; 60
(Ryan Tomayko)</p></li>
<li><p>New &#39;expires&#39; helper method is like cache_control but takes an
integer number of seconds or Time object:
expires 300, :public, :must_revalidate
(Ryan Tomayko)</p></li>
<li><p>New request.secure? method for checking for an SSL connection.
(Adam Wiggins)</p></li>
<li><p>Sinatra apps can now be run with a <code>-o &lt;addr&gt;</code> argument to specify
the address to bind to. (Ryan Tomayko)</p></li>
<li><p>Rack::Session::Cookie is now added to the middleware pipeline when
running in test environments if the :sessions option is set.
(Simon Rozet)</p></li>
<li><p>Route handlers, before filters, templates, error mappings, and
middleware are now resolved dynamically up the inheritance hierarchy
when needed instead of duplicating the superclass&#39;s version when
a new Sinatra::Base subclass is created. This should fix a variety
of issues with extensions that need to add any of these things
to the base class. (Ryan Tomayko)</p></li>
<li><p>Exception error handlers always override the raise_errors option now.
Previously, all exceptions would be raised outside of the application
when the raise_errors option was enabled, even if an error handler was
defined for that exception. The raise_errors option now controls
whether unhandled exceptions are raised (enabled) or if a generic 500
error is returned (disabled). (Ryan Tomayko)</p></li>
<li><p>The X-Cascade response header is set to &#39;pass&#39; when no matching route
is found or all routes pass. (Josh Peek)</p></li>
<li><p>Filters do not run when serving static files anymore. (Ryan Tomayko)</p></li>
<li><p>pass takes an optional block to be used as the route handler if no
subsequent route matches the request. (Blake Mizerany)</p></li>
</ul>

<p>The following <a href="Sinatra.html" title="Sinatra (module)"><code>Sinatra</code></a> features have been obsoleted (removed entirely) in
the 1.0 release:</p>

<ul>
<li><p>The <code>sinatra/test</code> library is obsolete. This includes the <code>Sinatra::Test</code>
module, the <code>Sinatra::TestHarness</code> class, and the <code>get_it</code>, <code>post_it</code>,
<code>put_it</code>, <code>delete_it</code>, and <code>head_it</code> helper methods. The
<a href="http://gitrdoc.com/brynary/rack-test"><code>Rack::Test</code> library</a> should
be used instead.</p></li>
<li><p>Test framework specific libraries (<code>sinatra/test/spec</code>,
<code>sinatra/test/bacon</code>,<code>sinatra/test/rspec</code>, etc.) are obsolete. See
<a href="http://www.sinatrarb.com/testing.html">http://www.sinatrarb.com/testing.html</a> for instructions on setting up a
testing environment under each of these frameworks.</p></li>
<li><p><code>Sinatra::Default</code> is obsolete; use <a href="Sinatra/Base.html" title="Sinatra::Base (class)"><code>::Sinatra::Base</code></a> instead.
<a href="Sinatra/Base.html" title="Sinatra::Base (class)"><code>::Sinatra::Base</code></a> acts more like <code>Sinatra::Default</code> in development mode.
For example, static file serving and sexy development error pages are
enabled by default.</p></li>
<li><p>Auto-requiring template libraries in the <code>erb</code>, <code>builder</code>, <code>haml</code>,
and <code>sass</code> methods is obsolete due to thread-safety issues. You must
require the template libraries explicitly in your app.</p></li>
<li><p>The <code>:views_directory</code> option to rendering methods is obsolete; use
<code>:views</code> instead.</p></li>
<li><p>The <code>:haml</code> and <code>:sass</code> options to rendering methods are obsolete.
Template engine options should be passed in the second Hash argument
instead.</p></li>
<li><p>The <code>use_in_file_templates</code> method is obsolete. Use
<code>enable :inline_templates</code> or <code>set :inline_templates, &#39;path/to/file&#39;</code></p></li>
<li><p>The &#39;media_type&#39; helper method is obsolete. Use &#39;mime_type&#39; instead.</p></li>
<li><p>The &#39;mime&#39; main and class method is obsolete. Use &#39;mime_type&#39; instead.</p></li>
<li><p>The request-level <code>send_data</code> method is no longer supported.</p></li>
<li><p>The <code>Sinatra::Event</code> and <code>Sinatra::EventContext</code> classes are no longer
supported. This may effect extensions written for versions prior to 0.9.2.
See <a href="http://www.sinatrarb.com/extensions.html">Writing Sinatra Extensions</a>
for the officially supported extensions API.</p></li>
<li><p>The <code>set_option</code> and <code>set_options</code> methods are obsolete; use <code>set</code>
instead.</p></li>
<li><p>The <code>:env</code> setting (<code>settings.env</code>) is obsolete; use <code>:environment</code>
instead.</p></li>
<li><p>The request level <code>stop</code> method is obsolete; use <code>halt</code> instead.</p></li>
<li><p>The request level <code>entity_tag</code> method is obsolete; use <code>etag</code>
instead.</p></li>
<li><p>The request level <code>headers</code> method (HTTP response headers) is obsolete;
use <code>response[&#39;Header-Name&#39;]</code> instead.</p></li>
<li><p><code>Sinatra.application</code> is obsolete; use <a href="Sinatra/Application.html" title="Sinatra::Application (class)"><code>::Sinatra::Application</code></a> instead.</p></li>
<li><p>Using <code>Sinatra.application = nil</code> to reset an application is obsolete.
This should no longer be necessary.</p></li>
<li><p>Using <code>Sinatra.default_options</code> to set base configuration items is
obsolete; use <code>Sinatra::Base.set(key, value)</code> instead.</p></li>
<li><p>The <code>Sinatra::ServerError</code> exception is obsolete. All exceptions raised
within a request are now treated as internal server errors and result in
a 500 response status.</p></li>
<li><p>The <code>:methodoverride&#39; option to enable/disable the POST _method hack is
obsolete; use</code>:method_override` instead.</p></li>
</ul>

<h2>0.9.2 / 2009-05-18</h2>

<ul>
<li><p>This version is compatible with Rack 1.0. [Rein Henrichs]</p></li>
<li><p>The development-mode unhandled exception / error page has been
greatly enhanced, functionally and aesthetically. The error
page is used when the :show_exceptions option is enabled and an
exception propagates outside of a route handler or before filter.
[Simon Rozet / Matte Noble / Ryan Tomayko]</p></li>
<li><p>Backtraces that move through templates now include filenames and
line numbers where possible. [#51 / S. Brent Faulkner]</p></li>
<li><p>All templates now have an app-level option for setting default
template options (:haml, :sass, :erb, :builder). The app-level
option value must be a Hash if set and is merged with the
template options specified to the render method (Base#haml,
Base#erb, Base#builder). [S. Brent Faulkner, Ryan Tomayko]</p></li>
<li><p>The method signature for all template rendering methods has
been unified: &quot;def engine(template, options={}, locals={})&quot;.
The options Hash now takes the generic :views, :layout, and
:locals options but also any template-specific options. The
generic options are removed before calling the template specific
render method. Locals may be specified using either the
:locals key in the options hash or a second Hash option to the
rendering method. [#191 / Ryan Tomayko]</p></li>
<li><p>The receiver is now passed to &quot;configure&quot; blocks. This
allows for the following idiom in top-level apps:
configure { |app| set :foo, app.root + &#39;/foo&#39; }
[TJ Holowaychuck / Ryan Tomayko]</p></li>
<li><p>The &quot;sinatra/test&quot; lib is deprecated and will be removed in
Sinatra 1.0. This includes the Sinatra::Test module and
Sinatra::TestHarness class in addition to all the framework
test helpers that were deprecated in 0.9.1. The Rack::Test
lib should be used instead: <a href="http://gitrdoc.com/brynary/rack-test">http://gitrdoc.com/brynary/rack-test</a>
[#176 / Simon Rozet]</p></li>
<li><p>Development mode source file reloading has been removed. The
&quot;shotgun&quot; (<a href="http://rtomayko.github.com/shotgun/">http://rtomayko.github.com/shotgun/</a>) program can be
used to achieve the same basic functionality in most situations.
Passenger users should use the &quot;tmp/always_restart.txt&quot;
file (<a href="http://tinyurl.com/c67o4h">http://tinyurl.com/c67o4h</a>). [#166 / Ryan Tomayko]</p></li>
<li><p>Auto-requiring template libs in the erb, builder, haml, and
sass methods is deprecated due to thread-safety issues. You must
require the template libs explicitly in your app file. [Simon Rozet]</p></li>
<li><p>A new Sinatra::Base#route_missing method was added. route_missing
is sent when no route matches the request or all route handlers
pass.  The default implementation forwards the request to the
downstream app when running as middleware (i.e., &quot;@app&quot; is
non-nil), or raises a NotFound exception when no downstream app
is defined. Subclasses can override this method to perform custom
route miss logic. [Jon Crosby]</p></li>
<li><p>A new Sinatra::Base#route_eval method was added. The method
yields to the block and throws :halt with the result. Subclasses
can override this method to tap into the route execution logic.
[TJ Holowaychuck]</p></li>
<li><p>Fix the &quot;-x&quot; (enable request mutex / locking) command line
argument. Passing -x now properly sets the :lock option.
[S. Brent Faulkner, Ryan Tomayko]</p></li>
<li><p>Fix writer (&quot;foo=&quot;) and predicate (&quot;foo?&quot;) methods in extension
modules not being added to the registering class.
[#172 / Pat Nakajima]</p></li>
<li><p>Fix in-file templates when running alongside activesupport and
fatal errors when requiring activesupport before sinatra
[#178 / Brian Candler]</p></li>
<li><p>Fix various issues running on Google AppEngine.
[Samuel Goebert, Simon Rozet]</p></li>
<li><p>Fix in-file templates <strong>END</strong> detection when <strong>END</strong> exists with
other stuff on a line [Yoji Shidara]</p></li>
</ul>

<h2>0.9.1.1 / 2009-03-09</h2>

<ul>
<li>Fix directory traversal vulnerability in default static files
route. See [#177] for more info.</li>
</ul>

<h2>0.9.1 / 2009-03-01</h2>

<ul>
<li><p>Sinatra now runs under Ruby 1.9.1 [#61]</p></li>
<li><p>Route patterns (splats, :named, or Regexp captures) are now
passed as arguments to the block. [#140]</p></li>
<li><p>The &quot;helpers&quot; method now takes a variable number of modules
along with the normal block syntax. [#133]</p></li>
<li><p>New request-level #forward method for middleware components: passes
the env to the downstream app and merges the response status, headers,
and body into the current context. [#126]</p></li>
<li><p>Requests are now automatically forwarded to the downstream app when
running as middleware and no matching route is found or all routes
pass.</p></li>
<li><p>New simple API for extensions/plugins to add DSL-level and
request-level methods. Use Sinatra.register(mixin) to extend
the DSL with all public methods defined in the mixin module;
use Sinatra.helpers(mixin) to make all public methods defined
in the mixin module available at the request level. [#138]
See <a href="http://www.sinatrarb.com/extensions.html">http://www.sinatrarb.com/extensions.html</a> for details.</p></li>
<li><p>Named parameters in routes now capture the &quot;.&quot; character. This makes
routes like &quot;/:path/:filename&quot; match against requests like
&quot;/foo/bar.txt&quot;; in this case, &quot;params[:filename]&quot; is &quot;bar.txt&quot;.
Previously, the route would not match at all.</p></li>
<li><p>Added request-level &quot;redirect back&quot; to redirect to the referring
URL.</p></li>
<li><p>Added a new &quot;clean_trace&quot; option that causes backtraces dumped
to rack.errors and displayed on the development error page to
omit framework and core library backtrace lines. The option is
enabled by default. [#77]</p></li>
<li><p>The ERB output buffer is now available to helpers via the @_out_buf
instance variable.</p></li>
<li><p>It&#39;s now much easier to test sessions in unit tests by passing a
&quot;:session&quot; option to any of the mock request methods. e.g.,
   get &#39;/&#39;, {}, :session =&gt; { &#39;foo&#39; =&gt; &#39;bar&#39; }</p></li>
<li><p>The testing framework specific files (&#39;sinatra/test/spec&#39;,
&#39;sinatra/test/bacon&#39;, &#39;sinatra/test/rspec&#39;, etc.) have been deprecated.
See <a href="http://sinatrarb.com/testing.html">http://sinatrarb.com/testing.html</a> for instructions on setting up
a testing environment with these frameworks.</p></li>
<li><p>The request-level #send_data method from Sinatra 0.3.3 has been added
for compatibility but is deprecated.</p></li>
<li><p>Fix :provides causing crash on any request when request has no
Accept header [#139]</p></li>
<li><p>Fix that ERB templates were evaluated twice per &quot;erb&quot; call.</p></li>
<li><p>Fix app-level middleware not being run when the Sinatra application is
run as middleware.</p></li>
<li><p>Fixed some issues with running under Rack&#39;s CGI handler caused by
writing informational stuff to stdout.</p></li>
<li><p>Fixed that reloading was sometimes enabled when starting from a
rackup file [#110]</p></li>
<li><p>Fixed that &quot;.&quot; in route patterns erroneously matched any character
instead of a literal &quot;.&quot;. [#124]</p></li>
</ul>

<h2>0.9.0.4 / 2009-01-25</h2>

<ul>
<li>Using halt with more than 1 args causes ArgumentError [#131]</li>
<li>using halt in a before filter doesn&#39;t modify response [#127]</li>
<li>Add deprecated Sinatra::EventContext to unbreak plugins [#130]</li>
<li>Give access to GET/POST params in filters [#129]</li>
<li>Preserve non-nested params in nested params hash [#117]</li>
<li>Fix backtrace dump with Rack::Lint [#116]</li>
</ul>

<h2>0.9.0.3 / 2009-01-21</h2>

<ul>
<li>Fall back on mongrel then webrick when thin not found. [#75]</li>
<li>Use :environment instead of :env in test helpers to
fix deprecation warnings coming from framework.</li>
<li>Make sinatra/test/rspec work again [#113]</li>
<li>Fix app_file detection on windows [#118]</li>
<li>Fix static files with Rack::Lint in pipeline [#121]</li>
</ul>

<h2>0.9.0.2 / 2009-01-18</h2>

<ul>
<li>Halting a before block should stop processing of routes [#85]</li>
<li>Fix redirect/halt in before filters [#85]</li>
</ul>

<h2>0.9.0 / 2009-01-18</h2>

<ul>
<li><p>Works with and requires Rack &gt;= 0.9.1</p></li>
<li><p>Multiple Sinatra applications can now co-exist peacefully within a
single process. The new &quot;Sinatra::Base&quot; class can be subclassed to
establish a blank-slate Rack application or middleware component.
Documentation on using these features is forth-coming; the following
provides the basic gist: <a href="http://gist.github.com/38605">http://gist.github.com/38605</a></p></li>
<li><p>Parameters with subscripts are now parsed into a nested/recursive
Hash structure. e.g., &quot;post[title]=Hello&amp;post[body]=World&quot; yields
params: <code>=&gt; {&#39;title&#39; =&gt; &#39;Hello&#39;, &#39;body&#39; =&gt; &#39;World&#39;</code>}.</p></li>
<li><p>Regular expressions may now be used in route patterns; captures are
available at &quot;params[:captures]&quot;.</p></li>
<li><p>New &quot;:provides&quot; route condition takes an array of mime types and
matches only when an Accept request header is present with a
corresponding type. [cypher]</p></li>
<li><p>New request-level &quot;pass&quot; method; immediately exits the current block
and passes control to the next matching route.</p></li>
<li><p>The request-level &quot;body&quot; method now takes a block; evaluation is
deferred until an attempt is made to read the body. The block must
return a String or Array.</p></li>
<li><p>New &quot;route conditions&quot; system for attaching rules for when a route
matches. The :agent and :host route options now use this system.</p></li>
<li><p>New &quot;dump_errors&quot; option controls whether the backtrace is dumped to
rack.errors when an exception is raised from a route. The option is
enabled by default for top-level apps.</p></li>
<li><p>Better default &quot;app_file&quot;, &quot;root&quot;, &quot;public&quot;, and &quot;views&quot; location
detection; changes to &quot;root&quot; and &quot;app_file&quot; automatically cascade to
other options that depend on them.</p></li>
<li><p>Error mappings are now split into two distinct layers: exception
mappings and custom error pages. Exception mappings are registered
with &quot;error(Exception)&quot; and are run only when the app raises an
exception. Custom error pages are registered with &quot;error(status_code)&quot;,
where &quot;status_code&quot; is an integer, and are run any time the response
has the status code specified. It&#39;s also possible to register an error
page for a range of status codes: &quot;error(500..599)&quot;.</p></li>
<li><p>In-file templates are now automatically imported from the file that
requires &#39;sinatra&#39;. The use_in_file_templates! method is still available
for loading templates from other files.</p></li>
<li><p>Sinatra&#39;s testing support is no longer dependent on Test::Unit. Requiring
&#39;sinatra/test&#39; adds the Sinatra::Test module and Sinatra::TestHarness
class, which can be used with any test framework. The &#39;sinatra/test/unit&#39;,
&#39;sinatra/test/spec&#39;, &#39;sinatra/test/rspec&#39;, or &#39;sinatra/test/bacon&#39; files
can be required to setup a framework-specific testing environment. See the
README for more information.</p></li>
<li><p>Added support for Bacon (test framework). The &#39;sinatra/test/bacon&#39; file
can be required to setup Sinatra test helpers on Bacon::Context.</p></li>
<li><p>Deprecated &quot;set_option&quot; and &quot;set_options&quot;; use &quot;set&quot; instead.</p></li>
<li><p>Deprecated the &quot;env&quot; option (&quot;options.env&quot;); use &quot;environment&quot; instead.</p></li>
<li><p>Deprecated the request level &quot;stop&quot; method; use &quot;halt&quot; instead.</p></li>
<li><p>Deprecated the request level &quot;entity_tag&quot; method; use &quot;etag&quot; instead.
Both &quot;entity_tag&quot; and &quot;etag&quot; were previously supported.</p></li>
<li><p>Deprecated the request level &quot;headers&quot; method (HTTP response headers);
use &quot;response[&#39;Header-Name&#39;]&quot; instead.</p></li>
<li><p>Deprecated &quot;Sinatra.application&quot;; use &quot;Sinatra::Application&quot; instead.</p></li>
<li><p>Deprecated setting Sinatra.application = nil to reset an application.
This should no longer be necessary.</p></li>
<li><p>Deprecated &quot;Sinatra.default_options&quot;; use
&quot;Sinatra::Default.set(key, value)&quot; instead.</p></li>
<li><p>Deprecated the &quot;ServerError&quot; exception. All Exceptions are now
treated as internal server errors and result in a 500 response
status.</p></li>
<li><p>Deprecated the &quot;get_it&quot;, &quot;post_it&quot;, &quot;put_it&quot;, &quot;delete_it&quot;, and &quot;head_it&quot;
test helper methods. Use &quot;get&quot;, &quot;post&quot;, &quot;put&quot;, &quot;delete&quot;, and &quot;head&quot;,
respectively, instead.</p></li>
<li><p>Removed Event and EventContext classes. Applications are defined in a
subclass of Sinatra::Base; each request is processed within an
instance.</p></li>
</ul>

<h2>0.3.3 / 2009-01-06</h2>

<ul>
<li><p>Pin to Rack 0.4.0 (this is the last release on Rack 0.4)</p></li>
<li><p>Log unhandled exception backtraces to rack.errors.</p></li>
<li><p>Use RACK_ENV environment variable to establish Sinatra
environment when given. Thin sets this when started with
the -e argument.</p></li>
<li><p>BUG: raising Sinatra::NotFound resulted in a 500 response
code instead of 404.</p></li>
<li><p>BUG: use_in_file_templates! fails with CR/LF [#45]</p></li>
<li><p>BUG: Sinatra detects the app file and root path when run under
thin/passenger.</p></li>
</ul>

<h2>0.3.2</h2>

<ul>
<li><p>BUG: Static and send_file read entire file into String before
sending. Updated to stream with 8K chunks instead.</p></li>
<li><p>Rake tasks and assets for building basic documentation website.
See <a href="http://sinatra.rubyforge.org">http://sinatra.rubyforge.org</a></p></li>
<li><p>Various minor doc fixes.</p></li>
</ul>

<h2>0.3.1</h2>

<ul>
<li>Unbreak optional path parameters [jeremyevans]</li>
</ul>

<h2>0.3.0</h2>

<ul>
<li><p>Add sinatra.gemspec w/ support for github gem builds. Forks can now
enable the build gem option in github to get free username-sinatra.gem
builds: gem install username-sinatra.gem --source=<a href="http://gems.github.com/">http://gems.github.com/</a></p></li>
<li><p>Require rack-0.4 gem; removes frozen rack dir.</p></li>
<li><p>Basic RSpec support; require &#39;sinatra/test/rspec&#39; instead of
&#39;sinatra/test/spec&#39; to use. [avdi]</p></li>
<li><p>before filters can modify request environment vars used for
routing (e.g., PATH_INFO, REQUEST_METHOD, etc.) for URL rewriting
type functionality.</p></li>
<li><p>In-file templates now uses @@ instead of ## as template separator.</p></li>
<li><p>Top-level environment test predicates: development?, test?, production?</p></li>
<li><p>Top-level &quot;set&quot;, &quot;enable&quot;, and &quot;disable&quot; methods for tweaking
app options. [rtomayko]</p></li>
<li><p>Top-level &quot;use&quot; method for building Rack middleware pipelines
leading to app. See README for usage. [rtomayko]</p></li>
<li><p>New &quot;reload&quot; option - set false to disable reloading in development.</p></li>
<li><p>New &quot;host&quot; option - host/ip to bind to [cschneid]</p></li>
<li><p>New &quot;app_file&quot; option - override the file to reload in development
mode [cschneid]</p></li>
<li><p>Development error/not_found page cleanup [sr, adamwiggins]</p></li>
<li><p>Remove a bunch of core extensions (String#to_param, String#from_param,
Hash#from_params, Hash#to_params, Hash#symbolize_keys, Hash#pass)</p></li>
<li><p>Various grammar and formatting fixes to README; additions on
community and contributing [cypher]</p></li>
<li><p>Build RDoc using Hanna template: <a href="http://sinatrarb.rubyforge.org/api">http://sinatrarb.rubyforge.org/api</a></p></li>
<li><p>Specs, documentation and fixes for splat&#39;n routes [vic]</p></li>
<li><p>Fix whitespace errors across all source files. [rtomayko]</p></li>
<li><p>Fix streaming issues with Mongrel (body not closed). [bmizerany]</p></li>
<li><p>Fix various issues with environment not being set properly (configure
blocks not running, error pages not registering, etc.) [cypher]</p></li>
<li><p>Fix to allow locals to be passed to ERB templates [cschneid]</p></li>
<li><p>Fix locking issues causing random errors during reload in development.</p></li>
<li><p>Fix for escaped paths not resolving static files [Matthew Walker]</p></li>
</ul>

<h2>0.2.1</h2>

<ul>
<li>File upload fix and minor tweaks.</li>
</ul>

<h2>0.2.0</h2>

<ul>
<li>Initial gem release of 0.2 codebase.</li>
</ul>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>