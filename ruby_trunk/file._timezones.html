<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: _timezones &mdash; Ruby-master</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "_timezones",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Ruby-master</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: _timezones&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="file_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>

<h2 id="label-Timezone+Specifiers">Timezone Specifiers</h2>

<p>Certain <code>Time</code> methods accept arguments that specify timezones:</p>
<ul><li>
<p>Time.at: keyword argument <code>in:</code>.</p>
</li><li>
<p>Time.new: positional argument <code>zone</code> or keyword argument <code>in:</code>.</p>
</li><li>
<p>Time.now: keyword argument <code>in:</code>.</p>
</li><li>
<p>Time#getlocal: positional argument <code>zone</code>.</p>
</li><li>
<p>Time#localtime: positional argument <code>zone</code>.</p>
</li></ul>

<p>The value given with any of these must be one of the following (each detailed below):</p>
<ul><li>
<p><a href="file.Time@Hours-2FMinutes+Offsets.html">Hours/minutes offset</a>.</p>
</li><li>
<p><a href="file.Time@Single-Letter+Offsets.html">Single-letter offset</a>.</p>
</li><li>
<p><a href="file.Time@Integer+Offsets.html">Integer offset</a>.</p>
</li><li>
<p><a href="file.Time@Timezone+Objects.html">Timezone object</a>.</p>
</li><li>
<p><a href="file.Time@Timezone+Names.html">Timezone name</a>.</p>
</li></ul>

<h3 id="label-Hours-2FMinutes+Offsets">Hours/Minutes Offsets</h3>

<p>The zone value may be a string offset from UTC in the form <code>&#39;+HH:MM&#39;</code> or <code>&#39;-HH:MM&#39;</code>, where:</p>
<ul><li>
<p><code>HH</code> is the 2-digit hour in the range <code>0..23</code>.</p>
</li><li>
<p><code>MM</code> is the 2-digit minute in the range <code>0..59</code>.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span>.<span class='id identifier rubyid_utc'>utc</span>(<span class='int'>2000</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>15</span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; 2000-01-01 20:15:01 UTC
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-23:59</span><span class='tstring_end'>&#39;</span></span>)            <span class='comment'># =&gt; 1999-12-31 20:16:01 -2359
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+23:59</span><span class='tstring_end'>&#39;</span></span>)            <span class='comment'># =&gt; 2000-01-02 20:14:01 +2359</span></code></pre>

<h3 id="label-Single-Letter+Offsets">Single-Letter Offsets</h3>

<p>The zone value may be a  letter in the range <code>&#39;A&#39;..&#39;I&#39;</code> or <code>&#39;K&#39;..&#39;Z&#39;</code>; see <a href="https://en.wikipedia.org/wiki/List_of_military_time_zones" target="_parent" title="List of military time zones">List of military time zones</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span>.<span class='id identifier rubyid_utc'>utc</span>(<span class='int'>2000</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>15</span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; 2000-01-01 20:15:01 UTC
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span>)                 <span class='comment'># =&gt; 2000-01-01 21:15:01 +0100
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>I</span><span class='tstring_end'>&#39;</span></span>)                 <span class='comment'># =&gt; 2000-01-02 05:15:01 +0900
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>K</span><span class='tstring_end'>&#39;</span></span>)                 <span class='comment'># =&gt; 2000-01-02 06:15:01 +1000
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Y</span><span class='tstring_end'>&#39;</span></span>)                 <span class='comment'># =&gt; 2000-01-01 08:15:01 -1200
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Z</span><span class='tstring_end'>&#39;</span></span>)                 <span class='comment'># =&gt; 2000-01-01 20:15:01 UTC</span></code></pre>

<h3 id="label-Integer+Offsets">Integer Offsets</h3>

<p>The zone value may be an integer number of seconds in the range <code>-86399..86399</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span>.<span class='id identifier rubyid_utc'>utc</span>(<span class='int'>2000</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>15</span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; 2000-01-01 20:15:01 UTC
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='op'>-</span><span class='int'>86399</span>)              <span class='comment'># =&gt; 1999-12-31 20:15:02 -235959
</span><span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='label'>in:</span> <span class='int'>86399</span>)               <span class='comment'># =&gt; 2000-01-02 20:15:00 +235959</span></code></pre>

<h3 id="label-Timezone+Objects">Timezone Objects</h3>

<p>The zone value may be an object responding to certain timezone methods, an instance of <a href="https://github.com/panthomakos/timezone" target="_parent" title="Timezone">Timezone</a> and <a href="https://tzinfo.github.io" target="_parent" title="TZInfo">TZInfo</a> for example.</p>

<p>The timezone methods are:</p>
<ul><li>
<p><code>local_to_utc</code>:</p>
<ul><li>
<p>Called when Time.new is invoked with <code>tz</code> as the value of positional argument <code>zone</code> or keyword argument <code>in:</code>.</p>
</li><li>
<p>Argument: a <a href="file.Time@Time-Like+Objects.html">Time-like object</a>.</p>
</li><li>
<p>Returns: a <a href="file.Time@Time-Like+Objects.html">Time-like object</a> in the UTC timezone.</p>
</li></ul>
</li><li>
<p><code>utc_to_local</code>:</p>
<ul><li>
<p>Called when Time.at or Time.now is invoked with <code>tz</code> as the value for keyword argument <code>in:</code>, and when Time#getlocal or Time#localtime is called with <code>tz</code> as the value for positional argument <code>zone</code>.</p>
</li><li>
<p>Argument: a <a href="file.Time@Time-Like+Objects.html">Time-like object</a>.</p>
</li><li>
<p>Returns: a <a href="file.Time@Time-Like+Objects.html">Time-like object</a> in the local timezone.</p>
</li></ul>
</li></ul>

<p>A custom timezone class may have these instance methods, which will be called if defined:</p>
<ul><li>
<p><code>abbr</code>:</p>
<ul><li>
<p>Called when Time#strftime is invoked with a format involving <code>%Z</code>.</p>
</li><li>
<p>Argument: a <a href="file.Time@Time-Like+Objects.html">Time-like object</a>.</p>
</li><li>
<p>Returns: a string abbreviation for the timezone name.</p>
</li></ul>
</li><li>
<p><code>dst?</code>:</p>
<ul><li>
<p>Called when Time.at or Time.now is invoked with <code>tz</code> as the value for keyword argument <code>in:</code>, and when Time#getlocal or Time#localtime is called with <code>tz</code> as the value for positional argument <code>zone</code>.</p>
</li><li>
<p>Argument: a <a href="file.Time@Time-Like+Objects.html">Time-like object</a>.</p>
</li><li>
<p>Returns: whether the time is daylight saving time.</p>
</li></ul>
</li><li>
<p><code>name</code>:</p>
<ul><li>
<p>Called when <code>Marshal.dump(t)</code> is invoked</p>
</li><li>
<p>Argument: none.</p>
</li><li>
<p>Returns: the string name of the timezone.</p>
</li></ul>
</li></ul>

<h4 id="label-Time-Like+Objects"><code>Time</code>-Like Objects</h4>

<p>A <code>Time</code>-like object is a container object capable of interfacing with timezone libraries for timezone conversion.</p>

<p>The argument to the timezone conversion methods above will have attributes similar to Time, except that timezone related attributes are meaningless.</p>

<p>The objects returned by <code>local_to_utc</code> and <code>utc_to_local</code> methods of the timezone object may be of the same class as their arguments, of arbitrary object classes, or of class Integer.</p>

<p>For a returned class other than <code>Integer</code>, the class must have the following methods:</p>
<ul><li>
<p><code>year</code></p>
</li><li>
<p><code>mon</code></p>
</li><li>
<p><code>mday</code></p>
</li><li>
<p><code>hour</code></p>
</li><li>
<p><code>min</code></p>
</li><li>
<p><code>sec</code></p>
</li><li>
<p><code>isdst</code></p>
</li><li>
<p><code>to_i</code></p>
</li></ul>

<p>For a returned <code>Integer</code>, its components, decomposed in UTC, are interpreted as times in the specified timezone.</p>

<h3 id="label-Timezone+Names">Timezone Names</h3>

<p>If the class (the receiver of class methods, or the class of the receiver of instance methods) has <code>find_timezone</code> singleton method, this method is called to achieve the corresponding timezone object from a timezone name.</p>

<p>For example, using <a href="https://github.com/panthomakos/timezone" target="_parent" title="Timezone">Timezone</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>TimeWithTimezone</span> <span class='op'>&lt;</span> <span class='const'>Time</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>timezone</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_find_timezone'>find_timezone</span>(<span class='id identifier rubyid_z'>z</span>) <span class='op'>=</span> <span class='const'>Timezone</span>[<span class='id identifier rubyid_z'>z</span>]
<span class='kw'>end</span>

<span class='const'>TimeWithTimezone</span>.<span class='id identifier rubyid_now'>now</span>(<span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>America/New_York</span><span class='tstring_end'>&quot;</span></span>)        <span class='comment'>#=&gt; 2023-12-25 00:00:00 -0500
</span><span class='const'>TimeWithTimezone</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2023-12-25 America/New_York</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'>#=&gt; 2023-12-25 00:00:00 -0500</span></code></pre>

<p>Or, using <a href="https://tzinfo.github.io" target="_parent" title="TZInfo">TZInfo</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>TimeWithTZInfo</span> <span class='op'>&lt;</span> <span class='const'>Time</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tzinfo</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_find_timezone'>find_timezone</span>(<span class='id identifier rubyid_z'>z</span>) <span class='op'>=</span> <span class='const'>TZInfo</span><span class='op'>::</span><span class='const'>Timezone</span>.<span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_z'>z</span>)
<span class='kw'>end</span>

<span class='const'>TimeWithTZInfo</span>.<span class='id identifier rubyid_now'>now</span>(<span class='label'>in:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>America/New_York</span><span class='tstring_end'>&quot;</span></span>)          <span class='comment'>#=&gt; 2023-12-25 00:00:00 -0500
</span><span class='const'>TimeWithTZInfo</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2023-12-25 America/New_York</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; 2023-12-25 00:00:00 -0500</span></code></pre>

<p>You can define this method per subclasses, or on the toplevel Time class.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>