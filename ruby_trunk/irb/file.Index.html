<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Index &mdash; irb  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Index",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>irb</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Index&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h1><a href="IRB.html" title="IRB (module)"><code>IRB</code></a></h1>

<p><a href="https://badge.fury.io/rb/irb"><img src="https://badge.fury.io/rb/irb.svg" alt="Gem Version"></a>
<a href="https://github.com/ruby/irb/actions/workflows/test.yml"><img src="https://github.com/ruby/irb/actions/workflows/test.yml/badge.svg" alt="build"></a></p>

<h2>Overview</h2>

<p><a href="IRB.html" title="IRB (module)"><code>IRB</code></a> stands for &quot;Interactive Ruby&quot; and is a tool to interactively execute Ruby expressions read from the standard input. The <code>irb</code> command from your shell will start the interpreter.</p>

<p><a href="IRB.html" title="IRB (module)"><code>IRB</code></a> provides a shell-like interface that supports user interaction with the Ruby interpreter. It operates as a <em>read-eval-print loop</em> (<a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a>) that:</p>

<ul>
<li><strong>Reads</strong> each character as you type. You can modify the <a href="IRB.html" title="IRB (module)"><code>IRB</code></a> context to change the way input works. See <a href="#label-Input">Input</a>.</li>
<li><strong>Evaluates</strong> the code each time it has read a syntactically complete passage.</li>
<li><strong>Prints</strong> after evaluating. You can modify the <a href="IRB.html" title="IRB (module)"><code>IRB</code></a> context to change the way output works. See <a href="#label-Output">Output</a>.</li>
</ul>

<h2>Installation</h2>

<blockquote>
<p><strong>Note</strong></p>

<p><a href="IRB.html" title="IRB (module)"><code>IRB</code></a> is a default gem of Ruby, so you shouldn&#39;t need to install it separately. However, if you&#39;re using Ruby 2.6 or later and want to upgrade/install a specific version of <a href="IRB.html" title="IRB (module)"><code>IRB</code></a>, follow these steps.</p>
</blockquote>

<p>To install it with <code>bundler</code>, add this line to your application&#39;s Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>irb</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>Then execute:</p>

<pre class="code console"><code class="console">$ bundle
</code></pre>

<p>Or install it directly with:</p>

<pre class="code console"><code class="console">$ gem install irb
</code></pre>

<h2>Usage</h2>

<blockquote>
<p><strong>Note</strong></p>

<p>We&#39;re working hard to match Pry&#39;s variety of powerful features in IRB. Track our progress or find contribution ideas in <a href="file.COMPARED_WITH_PRY.html">COMPARED_WITH_PRY.md</a>.</p>
</blockquote>

<h3>Starting IRB</h3>

<p>You can start a fresh IRB session by typing <code>irb</code> in your terminal. In the session, you can evaluate Ruby expressions or prototype small Ruby scripts. Input is executed when it is syntactically complete.</p>

<pre class="code console"><code class="console">$ irb
irb(main):001&gt; 1 + 2
=&gt; 3
irb(main):002* class Foo
irb(main):003*   def foo
irb(main):004*     puts 1
irb(main):005*   end
irb(main):006&gt; end
=&gt; :foo
irb(main):007&gt; Foo.new.foo
1
=&gt; nil
</code></pre>

<h3>The <code>binding.irb</code> Breakpoint</h3>

<p>If you use Ruby 2.5 or later versions, you can use <code>binding.irb</code> in your program as breakpoints. Once <code>binding.irb</code> is evaluated, a new IRB session starts with the surrounding context:</p>

<pre class="code console"><code class="console">$ ruby test.rb

From: test.rb @ line 2 :

    1: def greet(word)
 =&gt; 2:   binding.irb
    3:   puts &quot;Hello #{word}&quot;
    4: end
    5:
    6: greet(&quot;World&quot;)

irb(main):001&gt; word
=&gt; &quot;World&quot;
irb(main):002&gt; exit
Hello World
</code></pre>

<h3>Debugging</h3>

<p>You can use IRB as a debugging console with <code>debug.gem</code> with these options:</p>

<ul>
<li>In <code>binding.irb</code>, use the <code>debug</code> command to start an <code>irb:rdbg</code> session with access to all <code>debug.gem</code> commands.</li>
<li>Use the <code>RUBY_DEBUG_IRB_CONSOLE=1</code> environment variable to make <code>debug.gem</code> use IRB as the debugging console.</li>
</ul>

<p>To learn more about debugging with IRB, see <a href="#label-Debugging+with+IRB">Debugging with IRB</a>.</p>

<h2>Startup</h2>

<p>At startup, IRB:</p>

<ol>
<li>Interprets (as Ruby code) the content of the <a href="#label-Configuration">configuration file</a> (if given).</li>
<li>Constructs the initial session context from <a href="#label-Hash+IRB.conf">hash IRB.conf</a> and from default values; the hash content may have been affected by <a href="#command-line-options">command-line options</a>, and by direct assignments in the configuration file.</li>
<li>Assigns the context to variable <code>conf</code>.</li>
<li>Assigns command-line arguments to variable <code>ARGV</code>.</li>
<li>Prints the prompt.</li>
<li>Puts the content of the <a href="#label-Initialization+script">initialization script</a> onto the IRB shell, just as if it were user-typed commands.</li>
</ol>

<h2>Command Line</h2>

<p>On the command line, all options precede all arguments; the first item that is not recognized as an option is treated as an argument, as are all items that follow.</p>

<h3>Command-Line Options</h3>

<p>Many command-line options affect entries in hash <a href="IRB.html#conf-class_method" title="IRB.conf (method)">IRB.conf</a>, which in turn affect the initial configuration of the IRB session.</p>

<p>Details of the options are described in relevant subsections below. A cursory list of IRB command-line options may be seen in the <a href="https://raw.githubusercontent.com/ruby/irb/master/lib/irb/lc/help-message">help message</a>, which is also displayed if you use command-line option <code>--help</code>.</p>

<p>If you are interested in a specific option, consult the <a href="file.rdoc-ref.html">index</a>.</p>

<h3>Command-Line Arguments</h3>

<p>Command-line arguments are passed to IRB in array <code>ARGV</code>:</p>

<pre class="code console"><code class="console">$ irb --noscript Foo Bar Baz
irb(main):001&gt; ARGV
=&gt; [&quot;Foo&quot;, &quot;Bar&quot;, &quot;Baz&quot;]
irb(main):002&gt; exit
$
</code></pre>

<p>Command-line option <code>--</code> causes everything that follows to be treated as arguments, even those that look like options:</p>

<pre class="code console"><code class="console">$ irb --noscript -- --noscript -- Foo Bar Baz
irb(main):001&gt; ARGV
=&gt; [&quot;--noscript&quot;, &quot;--&quot;, &quot;Foo&quot;, &quot;Bar&quot;, &quot;Baz&quot;]
irb(main):002&gt; exit
$
</code></pre>

<h2>Commands</h2>

<p>The following commands are available in IRB. Use the <code>help</code> command to see the list of available commands.</p>

<pre class="code txt"><code class="txt">Help
  help           List all available commands. Use `help &lt;command&gt;` to get information about a specific command.

IRB
  context        Displays current configuration.
  exit           Exit the current irb session.
  exit!          Exit the current process.
  irb_load       Load a Ruby file.
  irb_require    Require a Ruby file.
  source         Loads a given file in the current session.
  irb_info       Show information about IRB.
  history        Shows the input history. `-g [query]` or `-G [query]` allows you to filter the output.
  disable_irb    Disable binding.irb.

Workspace
  cwws           Show the current workspace.
  chws           Change the current workspace to an object.
  workspaces     Show workspaces.
  pushws         Push an object to the workspace stack.
  popws          Pop a workspace from the workspace stack.
  cd             Move into the given object or leave the current context.

Multi-irb (DEPRECATED)
  irb            Start a child IRB.
  jobs           List of current sessions.
  fg             Switches to the session of the given number.
  kill           Kills the session with the given number.

Debugging
  debug          Start the debugger of debug.gem.
  break          Start the debugger of debug.gem and run its `break` command.
  catch          Start the debugger of debug.gem and run its `catch` command.
  next           Start the debugger of debug.gem and run its `next` command.
  delete         Start the debugger of debug.gem and run its `delete` command.
  step           Start the debugger of debug.gem and run its `step` command.
  continue       Start the debugger of debug.gem and run its `continue` command.
  finish         Start the debugger of debug.gem and run its `finish` command.
  backtrace      Start the debugger of debug.gem and run its `backtrace` command.
  info           Start the debugger of debug.gem and run its `info` command.

Misc
  edit           Open a file or source location.
  measure        `measure` enables the mode to measure processing time. `measure :off` disables it.
  copy           Copy expression output to clipboard

Context
  show_doc       Look up documentation with RI.
  ls             Show methods, constants, and variables.
  show_source    Show the source code of a given method, class/module, or constant.
  whereami       Show the source code around binding.irb again.

Helper methods
  conf           Returns the current IRB context.

Aliases
  $              Alias for `show_source`
  @              Alias for `whereami`
</code></pre>

<h2>Configure IRB</h2>

<p>See <a href="file.rdoc-ref.html">Configurations</a> for more details.</p>

<h2>Input</h2>

<p>This section describes the features that allow you to change the way IRB input works; see also <a href="#output">Output</a>.</p>

<h3>Input Command History</h3>

<p>By default, IRB stores a history of up to 1000 input commands in a file named <code>.irb_history</code>. The history file will be in the same directory as the <a href="#label-Configuration+File">configuration file</a> if one is found, or in <code>~/</code> otherwise.</p>

<p>A new IRB session creates the history file if it does not exist and appends to the file if it does exist.</p>

<p>You can change the filepath by adding to your configuration file:
<code>IRB.conf[:HISTORY_FILE] = *filepath*</code>, where <em>filepath</em> is a string filepath.</p>

<p>During the session, method <code>conf.history_file</code> returns the filepath, and method <code>conf.history_file = *new_filepath*</code> copies the history to the file at <em>new_filepath</em>, which becomes the history file for the session.</p>

<p>You can change the number of commands saved by adding to your configuration file: <code>IRB.conf[:SAVE_HISTORY] = *n*</code>, where <em>n</em> is one of:</p>

<ul>
<li>Positive integer: the number of commands to be saved.</li>
<li>Negative integer: all commands are to be saved.</li>
<li>Zero or <code>nil</code>: no commands are to be saved.</li>
</ul>

<p>During the session, you can use methods <code>conf.save_history</code> or <code>conf.save_history=</code> to retrieve or change the count.</p>

<h3>Command Aliases</h3>

<p>By default, IRB defines several command aliases:</p>

<pre class="code console"><code class="console">irb(main):001&gt; conf.command_aliases
=&gt; {:&quot;$&quot;=&gt;:show_source, :&quot;@&quot;=&gt;:whereami}
</code></pre>

<p>You can change the initial aliases in the configuration file with:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="IRB.html" title="IRB (module)">IRB</a></span>.<span class='id identifier rubyid_conf'><a href="IRB.html#conf-class_method" title="IRB.conf (method)">conf</a></span>[<span class='symbeg'>:</span><span class='const'>COMMAND_ALIASES</span>] <span class='op'>=</span> {<span class='label'>foo:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_show_source'>show_source</span><span class='comma'>,</span> <span class='label'>bar:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_whereami'>whereami</span>}</code></pre>

<p>You can replace the current aliases at any time with configuration method <code>conf.command_aliases=</code>; because <code>conf.command_aliases</code> is a hash, you can modify it.</p>

<h3>End-of-File</h3>

<p>By default, <code>IRB.conf[:IGNORE_EOF]</code> is <code>false</code>, which means that typing the end-of-file character <code>Ctrl-D</code> causes the session to exit.</p>

<p>You can reverse that behavior by adding <code>IRB.conf[:IGNORE_EOF] = true</code> to the configuration file.</p>

<p>During the session, method <code>conf.ignore_eof?</code> returns the setting, and method <code>conf.ignore_eof = *boolean*</code> sets it.</p>

<h3>SIGINT</h3>

<p>By default, <code>IRB.conf[:IGNORE_SIGINT]</code> is <code>true</code>, which means that typing the interrupt character <code>Ctrl-C</code> causes the session to exit.</p>

<p>You can reverse that behavior by adding <code>IRB.conf[:IGNORE_SIGING] = false</code> to the configuration file.</p>

<p>During the session, method <code>conf.ignore_siging?</code> returns the setting, and method <code>conf.ignore_sigint = *boolean*</code> sets it.</p>

<h3>Automatic Completion</h3>

<p>By default, IRB enables <a href="https://en.wikipedia.org/wiki/Autocomplete#In_command-line_interpreter">automatic completion</a>:</p>

<p>To cycle through the completion suggestions, use the tab key (and shift-tab to reverse).</p>

<p>You can disable it by either of these:</p>

<ul>
<li>Adding <code>IRB.conf[:USE_AUTOCOMPLETE] = false</code> to the configuration file.</li>
<li>Giving command-line option <code>--noautocomplete</code> (<code>--autocomplete</code> is the default).</li>
</ul>

<p>Method <code>conf.use_autocomplete?</code> returns <code>true</code> if automatic completion is enabled, <code>false</code> otherwise.</p>

<p>The setting may not be changed during the session.</p>

<h3>Type Based Completion</h3>

<p>IRB&#39;s default completion <a href="IRB/RegexpCompletor.html" title="IRB::RegexpCompletor (class)"><code>::IRB::RegexpCompletor</code></a> uses Regexp. IRB offers an experimental completion <a href="IRB/TypeCompletor.html" title="IRB::TypeCompletor (class)"><code>::IRB::TypeCompletor</code></a> that uses type analysis.</p>

<h4>How to Enable IRB::TypeCompletor</h4>

<p>Install <a href="https://github.com/ruby/repl_type_completor/">ruby/repl_type_completor</a> with:</p>

<pre class="code console"><code class="console">$ gem install repl_type_completor
</code></pre>

<p>Or add these lines to your project&#39;s Gemfile.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>irb</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>repl_type_completor</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>group:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_test'>test</span>]</code></pre>

<p>Now you can use type-based completion by:</p>

<ul>
<li><p>Running IRB with the <code>--type-completor</code> option</p>

<pre class="code console"><code class="console">$ irb --type-completor
</code></pre></li>
<li><p>Or writing this line to IRB&#39;s rc-file (e.g., <code>~/.irbrc</code>)</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="IRB.html" title="IRB (module)">IRB</a></span>.<span class='id identifier rubyid_conf'><a href="IRB.html#conf-class_method" title="IRB.conf (method)">conf</a></span>[<span class='symbeg'>:</span><span class='const'>COMPLETOR</span>] <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span> <span class='comment'># default is :regexp</span></code></pre></li>
<li><p>Or setting the environment variable <code>IRB_COMPLETOR</code></p>

<pre class="code ruby"><code class="ruby"><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IRB_COMPLETOR</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span>
<span class='const'><a href="IRB.html" title="IRB (module)">IRB</a></span>.<span class='id identifier rubyid_start'><a href="IRB.html#start-class_method" title="IRB.start (method)">start</a></span></code></pre></li>
</ul>

<p>To check if it&#39;s enabled, type <code>irb_info</code> into IRB and see the <code>Completion</code> section.</p>

<pre class="code console"><code class="console">irb(main):001&gt; irb_info
...
# Enabled
Completion: Autocomplete, ReplTypeCompletor: 0.1.0, Prism: 0.18.0, RBS: 3.3.0
# Not enabled
Completion: Autocomplete, RegexpCompletor
...
</code></pre>

<p>If you have a <code>sig/</code> directory or <code>rbs_collection.lock.yaml</code> in the current directory, IRB will load it.</p>

<h4>Advantage over Default IRB::RegexpCompletor</h4>

<p><a href="IRB/TypeCompletor.html" title="IRB::TypeCompletor (class)"><code>::IRB::TypeCompletor</code></a> can autocomplete chained methods, block parameters, and more if type information is available. These are some examples <a href="IRB/RegexpCompletor.html" title="IRB::RegexpCompletor (class)"><code>::IRB::RegexpCompletor</code></a> cannot complete.</p>

<pre class="code console"><code class="console">irb(main):001&gt; &#39;Ruby&#39;.upcase.chars.s # Array methods (sample, select, shift, size)
</code></pre>

<pre class="code console"><code class="console">irb(main):001&gt; 10.times.map(&amp;:to_s).each do |s|
irb(main):002&gt;   s.up # String methods (upcase, upcase!, upto)
</code></pre>

<pre class="code console"><code class="console">irb(main):001&gt; class User &lt; ApplicationRecord
irb(main):002&gt;   def foo
irb(main):003&gt;     sa # save, save!
</code></pre>

<p>As a trade-off, completion calculation takes more time than <a href="IRB/RegexpCompletor.html" title="IRB::RegexpCompletor (class)"><code>::IRB::RegexpCompletor</code></a>.</p>

<h4>Difference between Steep&#39;s Completion</h4>

<p>Compared with Steep, <a href="IRB/TypeCompletor.html" title="IRB::TypeCompletor (class)"><code>::IRB::TypeCompletor</code></a> has some differences and limitations.</p>

<pre class="code ruby"><code class="ruby">[<span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_sample'>sample</span>.
<span class='comment'># Steep completes the intersection of Integer methods and String methods
</span><span class='comment'># IRB::TypeCompletor completes both Integer and String methods</span></code></pre>

<p>Some features like type narrowing are not implemented.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_f'>f</span>(<span class='id identifier rubyid_arg'>arg</span> <span class='op'>=</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_sample'>sample</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>String</span>)
    <span class='id identifier rubyid_arg'>arg</span>. <span class='comment'># Completes both Integer and String methods</span></code></pre>

<p>Unlike other static type checkers, <a href="IRB/TypeCompletor.html" title="IRB::TypeCompletor (class)"><code>::IRB::TypeCompletor</code></a> uses runtime information to provide better completion.</p>

<pre class="code console"><code class="console">irb(main):001&gt; a = [1]
=&gt; [1]
irb(main):002&gt; a.first. # Completes Integer methods
</code></pre>

<h3>Automatic Indentation</h3>

<p>By default, IRB automatically indents lines of code to show structure (e.g., it indents the contents of a block).</p>

<p>The current setting is returned by the configuration method <code>conf.auto_indent_mode</code>.</p>

<p>The default initial setting is <code>true</code>:</p>

<pre class="code console"><code class="console">irb(main):001&gt; conf.auto_indent_mode
=&gt; true
irb(main):002* Dir.entries(&#39;.&#39;).select do |entry|
irb(main):003*   entry.start_with?(&#39;R&#39;)
irb(main):004&gt; end
=&gt; [&quot;README.md&quot;, &quot;Rakefile&quot;]
</code></pre>

<p>You can change the initial setting in the configuration file with:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="IRB.html" title="IRB (module)">IRB</a></span>.<span class='id identifier rubyid_conf'><a href="IRB.html#conf-class_method" title="IRB.conf (method)">conf</a></span>[<span class='symbeg'>:</span><span class='const'>AUTO_INDENT</span>] <span class='op'>=</span> <span class='kw'>false</span></code></pre>

<p>Note that the <em>current</em> setting <em>may not</em> be changed in the IRB session.</p>

<h3>Input Method</h3>

<p>The IRB input method determines how command input is read; by default, the input method for a session is IRB::RelineInputMethod unless the TERM environment variable is &#39;dumb&#39;, in which case the most simplistic input method is used.</p>

<p>You can set the input method by:</p>

<ul>
<li><p>Adding to the configuration file:</p>

<ul>
<li><code>IRB.conf[:USE_SINGLELINE] = true</code> or <code>IRB.conf[:USE_MULTILINE] = false</code> sets the input method to IRB::ReadlineInputMethod.</li>
<li><code>IRB.conf[:USE_SINGLELINE] = false</code> or <code>IRB.conf[:USE_MULTILINE] = true</code> sets the input method to IRB::RelineInputMethod.</li>
</ul></li>
<li><p>Giving command-line options:</p>

<ul>
<li><code>--singleline</code> or <code>--nomultiline</code> sets the input method to IRB::ReadlineInputMethod.</li>
<li><code>--nosingleline</code> or <code>--multiline</code> sets the input method to IRB::RelineInputMethod.</li>
<li><code>--nosingleline</code> together with <code>--nomultiline</code> sets the input to IRB::StdioInputMethod.</li>
</ul></li>
</ul>

<p>Method <code>conf.use_multiline?</code> and its synonym <code>conf.use_reline</code> return:</p>

<ul>
<li><code>true</code> if option <code>--multiline</code> was given.</li>
<li><code>false</code> if option <code>--nomultiline</code> was given.</li>
<li><code>nil</code> if neither was given.</li>
</ul>

<p>Method <code>conf.use_singleline?</code> and its synonym <code>conf.use_readline</code> return:</p>

<ul>
<li><code>true</code> if option <code>--singleline</code> was given.</li>
<li><code>false</code> if option <code>--nosingleline</code> was given.</li>
<li><code>nil</code> if neither was given.</li>
</ul>

<h2>Output</h2>

<p>This section describes the features that allow you to change the way IRB output works; see also <a href="#label-Input">Input</a>.</p>

<h3>Return-Value Printing (Echoing)</h3>

<p>By default, IRB prints (echoes) the values returned by all input commands.</p>

<p>You can change the initial behavior and suppress all echoing by:</p>

<ul>
<li>Adding to the configuration file: <code>IRB.conf[:ECHO] = false</code>. (The default value for this entry is <code>nil</code>, which means the same as <code>true</code>.)</li>
<li>Giving command-line option <code>--noecho</code>. (The default is <code>--echo</code>.)</li>
</ul>

<p>During the session, you can change the current setting with configuration method <code>conf.echo=</code> (set to <code>true</code> or <code>false</code>).</p>

<p>As stated above, by default IRB prints the values returned by all input commands; but IRB offers special treatment for values returned by assignment statements, which may be:</p>

<ul>
<li><p>Printed with truncation (to fit on a single line of output), which is the default; an ellipsis (<code>...</code> is suffixed, to indicate the truncation):</p>

<pre class="code console"><code class="console">irb(main):001&gt; x = &#39;abc&#39; * 100
&gt; &quot;abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc...&quot;
</code></pre></li>
<li><p>Printed in full (regardless of the length).</p></li>
<li><p>Suppressed (not printed at all).</p></li>
</ul>

<p>You can change the initial behavior by:</p>

<ul>
<li>Adding to the configuration file: <code>IRB.conf[:ECHO_ON_ASSIGNMENT] = false</code>. (The default value for this entry is <code>nil</code>, which means the same as <code>:truncate</code>.)</li>
<li>Giving command-line option <code>--noecho-on-assignment</code> or <code>--echo-on-assignment</code>. (The default is <code>--truncate-echo-on-assignment</code>.)</li>
</ul>

<p>During the session, you can change the current setting with configuration method <code>conf.echo_on_assignment=</code> (set to <code>true</code>, <code>false</code>, or <code>:truncate</code>).</p>

<p>By default, IRB formats returned values by calling method <code>inspect</code>.</p>

<p>You can change the initial behavior by:</p>

<ul>
<li>Adding to the configuration file: <code>IRB.conf[:INSPECT_MODE] = false</code>. (The default value for this entry is <code>true</code>.)</li>
<li>Giving command-line option <code>--noinspect</code>. (The default is <code>--inspect</code>.)</li>
</ul>

<p>During the session, you can change the setting using method <code>conf.inspect_mode=</code>.</p>

<h3>Multiline Output</h3>

<p>By default, IRB prefixes a newline to a multiline response.</p>

<p>You can change the initial default value by adding to the configuration file:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="IRB.html" title="IRB (module)">IRB</a></span>.<span class='id identifier rubyid_conf'><a href="IRB.html#conf-class_method" title="IRB.conf (method)">conf</a></span>[<span class='symbeg'>:</span><span class='const'>NEWLINE_BEFORE_MULTILINE_OUTPUT</span>] <span class='op'>=</span> <span class='kw'>false</span></code></pre>

<p>During a session, you can retrieve or set the value using methods <code>conf.newline_before_multiline_output?</code> and <code>conf.newline_before_multiline_output=</code>.</p>

<p>Examples:</p>

<pre class="code console"><code class="console">irb(main):001&gt; conf.inspect_mode = false
=&gt; false
irb(main):002&gt; &quot;foo\nbar&quot;
=&gt;
foo
bar
irb(main):003&gt; conf.newline_before_multiline_output = false
=&gt; false
irb(main):004&gt; &quot;foo\nbar&quot;
=&gt; foo
bar
</code></pre>

<h3>Evaluation History</h3>

<p>By default, IRB saves no history of evaluations (returned values), and the related methods <code>conf.eval_history</code>, <code>_</code>, and <code>__</code> are undefined.</p>

<p>You can turn on that history and set the maximum number of evaluations to be stored:</p>

<ul>
<li>In the configuration file: add <code>IRB.conf[:EVAL_HISTORY] = *n*</code>. (Examples below assume that we&#39;ve added <code>IRB.conf[:EVAL_HISTORY] = 5</code>.)</li>
<li>In the session (at any time): <code>conf.eval_history = *n*</code>.</li>
</ul>

<p>If <code>n</code> is zero, all evaluation history is stored.</p>

<p>Doing either of the above:</p>

<ul>
<li><p>Sets the maximum size of the evaluation history; defines method <code>conf.eval_history</code>, which returns the maximum size <code>n</code> of the evaluation history:</p>

<pre class="code console"><code class="console">irb(main):001&gt; conf.eval_history = 5
=&gt; 5
irb(main):002&gt; conf.eval_history
=&gt; 5
</code></pre></li>
<li><p>Defines variable <code>_</code>, which contains the most recent evaluation, or <code>nil</code> if none; same as method <code>conf.last_value</code>:</p>

<pre class="code console"><code class="console">irb(main):003&gt; _
=&gt; 5
irb(main):004&gt; :foo
=&gt; :foo
irb(main):005&gt; :bar
=&gt; :bar
irb(main):006&gt; _
=&gt; :bar
irb(main):007&gt; _
=&gt; :bar
</code></pre></li>
<li><p>Defines variable <code>__</code>:</p>

<ul>
<li><code>__</code> unadorned: contains all evaluation history:</li>
</ul>

<pre class="code console"><code class="console">irb(main):008&gt; :foo
=&gt; :foo
irb(main):009&gt; :bar
=&gt; :bar
irb(main):010&gt; :baz
=&gt; :baz
irb(main):011&gt; :bat
=&gt; :bat
irb(main):012&gt; :bam
=&gt; :bam
irb(main):013&gt; __
=&gt;
9 :bar
10 :baz
11 :bat
12 :bam
13 ...self-history...
</code></pre>

<p>Note that when the evaluation is multiline, it is displayed differently.</p>

<ul>
<li><code>__[m]</code>:</li>
<li><p>Positive <code>m</code>: contains the evaluation for the given line number, or <code>nil</code> if that line number is not in the evaluation history:</p>

<pre class="code console"><code class="console">irb(main):015&gt; __[12]
=&gt; :bam
irb(main):016&gt; __[1]
=&gt; nil
</code></pre></li>
<li><p>Negative <code>m</code>: contains the <code>mth</code>-from-end evaluation, or <code>nil</code> if that evaluation is not in the evaluation history:</p>

<pre class="code console"><code class="console">irb(main):017&gt; __[-3]
=&gt; :bam
irb(main):018&gt; __[-13]
=&gt; nil
</code></pre></li>
<li><p>Zero <code>m</code>: contains <code>nil</code>:</p>

<pre class="code console"><code class="console">irb(main):019&gt; __[0]
=&gt; nil
</code></pre></li>
</ul></li>
</ul>

<h3>Initialization Script</h3>

<p>By default, the first command-line argument (after any options) is the path to a Ruby initialization script.</p>

<p>IRB reads the initialization script and puts its content onto the IRB shell, just as if it were user-typed commands.</p>

<p>Command-line option <code>--noscript</code> causes the first command-line argument to be treated as an ordinary argument (instead of an initialization script); <code>--script</code> is the default.</p>

<h2>Debugging with IRB</h2>

<p>Starting from version 1.8.0, IRB offers a powerful integration with <code>debug.gem</code>, providing a debugging experience similar to <code>pry-byebug</code>.</p>

<p>After hitting a <code>binding.irb</code> breakpoint, you can activate the debugger with the <code>debug</code> command. Alternatively, if the <code>debug</code> method is already defined in the current scope, you can call <code>irb_debug</code>.</p>

<pre class="code console"><code class="console">From: test.rb @ line 3 :

    1:
    2: def greet(word)
 =&gt; 3:   binding.irb
    4:   puts &quot;Hello #{word}&quot;
    5: end
    6:
    7: greet(&quot;World&quot;)

irb(main):001&gt; debug
irb:rdbg(main):002&gt;
</code></pre>

<p>Once activated, the prompt&#39;s header changes from <code>irb</code> to <code>irb:rdbg</code>, enabling you to use any of <code>debug.gem</code>&#39;s <a href="https://github.com/ruby/debug#debug-command-on-the-debug-console">commands</a>:</p>

<pre class="code console"><code class="console">irb:rdbg(main):002&gt; info # use info command to see available variables
%self = main
_ = nil
word = &quot;World&quot;
irb:rdbg(main):003&gt; next # use next command to move to the next line
[1, 7] in test.rb
     1|
     2| def greet(word)
     3|   binding.irb
=&gt;   4|   puts &quot;Hello #{word}&quot;
     5| end
     6|
     7| greet(&quot;World&quot;)
=&gt;#0    Object#greet(word=&quot;World&quot;) at test.rb:4
  #1    &lt;main&gt; at test.rb:7
irb:rdbg(main):004&gt;
</code></pre>

<p>Simultaneously, you maintain access to IRB&#39;s commands, such as <code>show_source</code>:</p>

<pre class="code console"><code class="console">irb:rdbg(main):004&gt; show_source greet

From: test.rb:2

def greet(word)
  binding.irb
  puts &quot;Hello #{word}&quot;
end
</code></pre>

<h3>More about <code>debug.gem</code></h3>

<p><code>debug.gem</code> offers many advanced debugging features that simple REPLs can&#39;t provide, including:</p>

<ul>
<li>Step-debugging</li>
<li>Frame navigation</li>
<li>Setting breakpoints with commands</li>
<li>Thread control</li>
<li>...and many more</li>
</ul>

<p>To learn about these features, refer to <code>debug.gem</code>&#39;s <a href="https://github.com/ruby/debug#debug-command-on-the-debug-console">commands list</a>.</p>

<p>In the <code>irb:rdbg</code> session, the <code>help</code> command also displays all commands from <code>debug.gem</code>.</p>

<h3>Advantages Over <code>debug.gem</code>&#39;s Console</h3>

<p>This integration offers several benefits over <code>debug.gem</code>&#39;s native console:</p>

<ol>
<li>Access to handy IRB commands like <code>show_source</code> or <code>show_doc</code>.</li>
<li>Support for multi-line input.</li>
<li>Symbol shortcuts such as <code>@</code> (<code>whereami</code>) and <code>$</code> (<code>show_source</code>).</li>
<li>Autocompletion.</li>
<li>Customizable prompt.</li>
</ol>

<p>However, there are some limitations to be aware of:</p>

<ol>
<li><code>binding.irb</code> doesn&#39;t support <code>pre</code> and <code>do</code> arguments like <a href="https://github.com/ruby/debug#bindingbreak-method">binding.break</a>.</li>
<li>As IRB <a href="https://github.com/ruby/irb/issues/672">doesn&#39;t currently support remote-connection</a>, it can&#39;t be used with <code>debug.gem</code>&#39;s remote debugging feature.</li>
<li>Access to the previous return value via the underscore <code>_</code> is not supported.</li>
</ol>

<h2>Encodings</h2>

<p>Command-line option <code>-E *ex*[:*in*]</code> sets initial external (ex) and internal (in) encodings.</p>

<p>Command-line option <code>-U</code> sets both to UTF-8.</p>

<h2>Contributing</h2>

<p>See [CONTRIBUTING.md]) for more information.</p>

<h2>Extending IRB</h2>

<p>IRB <code>v1.13.0</code> and later versions allow users/libraries to extend its functionality through official APIs.</p>

<p>For more information, visit <a href="file.rdoc-ref.html">EXTEND_IRB.md</a>.</p>

<h2>License</h2>

<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/BSD-2-Clause">2-Clause BSD License</a>.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>