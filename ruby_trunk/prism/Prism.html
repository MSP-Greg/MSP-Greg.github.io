<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Prism &mdash; prism  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Prism",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>prism</a> &raquo; 
      <a href='_index.html#alpha_P'>Index (P)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Prism&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Prism</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a class='nodoc' href="Prism/HeredocQuery.html" title="Prism::HeredocQuery (module)"><code>HeredocQuery</code></a>,
        <a class='nodoc' href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)"><code>LibRubyParser</code></a>,
        <a href="Prism/Pack.html" title="Prism::Pack (module)"><code>Pack</code></a>,
        <a class='nodoc' href="Prism/RegularExpressionOptions.html" title="Prism::RegularExpressionOptions (module)"><code>RegularExpressionOptions</code></a>,
        <a href="Prism/Relocation.html" title="Prism::Relocation (module)"><code>Relocation</code></a>,
        <a href="Prism/Translation.html" title="Prism::Translation (module)"><code>Translation</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Prism/ASCIISource.html" title="Prism::ASCIISource (class)"><code>ASCIISource</code></a>,
        <a href="Prism/BeginNode.html" title="Prism::BeginNode (class)"><code>BeginNode</code></a>,
        <a href="Prism/CallNode.html" title="Prism::CallNode (class)"><code>CallNode</code></a>,
        <a href="Prism/CallOperatorWriteNode.html" title="Prism::CallOperatorWriteNode (class)"><code>CallOperatorWriteNode</code></a>,
        <a href="Prism/CaseMatchNode.html" title="Prism::CaseMatchNode (class)"><code>CaseMatchNode</code></a>,
        <a href="Prism/CaseNode.html" title="Prism::CaseNode (class)"><code>CaseNode</code></a>,
        <a href="Prism/ClassVariableAndWriteNode.html" title="Prism::ClassVariableAndWriteNode (class)"><code>ClassVariableAndWriteNode</code></a>,
        <a href="Prism/ClassVariableOperatorWriteNode.html" title="Prism::ClassVariableOperatorWriteNode (class)"><code>ClassVariableOperatorWriteNode</code></a>,
        <a href="Prism/ClassVariableOrWriteNode.html" title="Prism::ClassVariableOrWriteNode (class)"><code>ClassVariableOrWriteNode</code></a>,
        <a href="Prism/CodeUnitsCache.html" title="Prism::CodeUnitsCache (class)"><code>CodeUnitsCache</code></a>,
        <a href="Prism/Comment.html" title="Prism::Comment (class)"><code>Comment</code></a>,
        <a href="Prism/ConstantAndWriteNode.html" title="Prism::ConstantAndWriteNode (class)"><code>ConstantAndWriteNode</code></a>,
        <a href="Prism/ConstantOperatorWriteNode.html" title="Prism::ConstantOperatorWriteNode (class)"><code>ConstantOperatorWriteNode</code></a>,
        <a href="Prism/ConstantOrWriteNode.html" title="Prism::ConstantOrWriteNode (class)"><code>ConstantOrWriteNode</code></a>,
        <a href="Prism/ConstantPathNode.html" title="Prism::ConstantPathNode (class)"><code>ConstantPathNode</code></a>,
        <a href="Prism/ConstantPathOperatorWriteNode.html" title="Prism::ConstantPathOperatorWriteNode (class)"><code>ConstantPathOperatorWriteNode</code></a>,
        <a href="Prism/ConstantPathTargetNode.html" title="Prism::ConstantPathTargetNode (class)"><code>ConstantPathTargetNode</code></a>,
        <a href="Prism/ConstantReadNode.html" title="Prism::ConstantReadNode (class)"><code>ConstantReadNode</code></a>,
        <a href="Prism/ConstantTargetNode.html" title="Prism::ConstantTargetNode (class)"><code>ConstantTargetNode</code></a>,
        <a href="Prism/ConstantWriteNode.html" title="Prism::ConstantWriteNode (class)"><code>ConstantWriteNode</code></a>,
        <a class='nodoc' href="Prism/DesugarAndWriteNode.html" title="Prism::DesugarAndWriteNode (class)"><code>DesugarAndWriteNode</code></a>,
        <a href="Prism/DesugarCompiler.html" title="Prism::DesugarCompiler (class)"><code>DesugarCompiler</code></a>,
        <a class='nodoc' href="Prism/DesugarOperatorWriteNode.html" title="Prism::DesugarOperatorWriteNode (class)"><code>DesugarOperatorWriteNode</code></a>,
        <a class='nodoc' href="Prism/DesugarOrWriteDefinedNode.html" title="Prism::DesugarOrWriteDefinedNode (class)"><code>DesugarOrWriteDefinedNode</code></a>,
        <a class='nodoc' href="Prism/DesugarOrWriteNode.html" title="Prism::DesugarOrWriteNode (class)"><code>DesugarOrWriteNode</code></a>,
        <a href="Prism/EmbDocComment.html" title="Prism::EmbDocComment (class)"><code>EmbDocComment</code></a>,
        <a href="Prism/GlobalVariableAndWriteNode.html" title="Prism::GlobalVariableAndWriteNode (class)"><code>GlobalVariableAndWriteNode</code></a>,
        <a href="Prism/GlobalVariableOperatorWriteNode.html" title="Prism::GlobalVariableOperatorWriteNode (class)"><code>GlobalVariableOperatorWriteNode</code></a>,
        <a href="Prism/GlobalVariableOrWriteNode.html" title="Prism::GlobalVariableOrWriteNode (class)"><code>GlobalVariableOrWriteNode</code></a>,
        <a href="Prism/IfNode.html" title="Prism::IfNode (class)"><code>IfNode</code></a>,
        <a href="Prism/ImaginaryNode.html" title="Prism::ImaginaryNode (class)"><code>ImaginaryNode</code></a>,
        <a href="Prism/IndexOperatorWriteNode.html" title="Prism::IndexOperatorWriteNode (class)"><code>IndexOperatorWriteNode</code></a>,
        <a href="Prism/InlineComment.html" title="Prism::InlineComment (class)"><code>InlineComment</code></a>,
        <a href="Prism/InstanceVariableAndWriteNode.html" title="Prism::InstanceVariableAndWriteNode (class)"><code>InstanceVariableAndWriteNode</code></a>,
        <a href="Prism/InstanceVariableOperatorWriteNode.html" title="Prism::InstanceVariableOperatorWriteNode (class)"><code>InstanceVariableOperatorWriteNode</code></a>,
        <a href="Prism/InstanceVariableOrWriteNode.html" title="Prism::InstanceVariableOrWriteNode (class)"><code>InstanceVariableOrWriteNode</code></a>,
        <a href="Prism/InterpolatedMatchLastLineNode.html" title="Prism::InterpolatedMatchLastLineNode (class)"><code>InterpolatedMatchLastLineNode</code></a>,
        <a href="Prism/InterpolatedRegularExpressionNode.html" title="Prism::InterpolatedRegularExpressionNode (class)"><code>InterpolatedRegularExpressionNode</code></a>,
        <a href="Prism/InterpolatedStringNode.html" title="Prism::InterpolatedStringNode (class)"><code>InterpolatedStringNode</code></a>,
        <a href="Prism/InterpolatedSymbolNode.html" title="Prism::InterpolatedSymbolNode (class)"><code>InterpolatedSymbolNode</code></a>,
        <a href="Prism/InterpolatedXStringNode.html" title="Prism::InterpolatedXStringNode (class)"><code>InterpolatedXStringNode</code></a>,
        <a class='nodoc' href="Prism/LexCompat.html" title="Prism::LexCompat (class)"><code>LexCompat</code></a>,
        <a href="Prism/LexResult.html" title="Prism::LexResult (class)"><code>LexResult</code></a>,
        <a href="Prism/LocalVariableAndWriteNode.html" title="Prism::LocalVariableAndWriteNode (class)"><code>LocalVariableAndWriteNode</code></a>,
        <a href="Prism/LocalVariableOperatorWriteNode.html" title="Prism::LocalVariableOperatorWriteNode (class)"><code>LocalVariableOperatorWriteNode</code></a>,
        <a href="Prism/LocalVariableOrWriteNode.html" title="Prism::LocalVariableOrWriteNode (class)"><code>LocalVariableOrWriteNode</code></a>,
        <a href="Prism/Location.html" title="Prism::Location (class)"><code>Location</code></a>,
        <a href="Prism/MagicComment.html" title="Prism::MagicComment (class)"><code>MagicComment</code></a>,
        <a href="Prism/MatchLastLineNode.html" title="Prism::MatchLastLineNode (class)"><code>MatchLastLineNode</code></a>,
        <a href="Prism/Node.html" title="Prism::Node (class)"><code>Node</code></a>,
        <a href="Prism/ParametersNode.html" title="Prism::ParametersNode (class)"><code>ParametersNode</code></a>,
        <a href="Prism/ParenthesesNode.html" title="Prism::ParenthesesNode (class)"><code>ParenthesesNode</code></a>,
        <a href="Prism/ParseError.html" title="Prism::ParseError (class)"><code>ParseError</code></a>,
        <a href="Prism/ParseLexResult.html" title="Prism::ParseLexResult (class)"><code>ParseLexResult</code></a>,
        <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)"><code>ParseResult</code></a>,
        <a href="Prism/ParseWarning.html" title="Prism::ParseWarning (class)"><code>ParseWarning</code></a>,
        <a href="Prism/Pattern.html" title="Prism::Pattern (class)"><code>Pattern</code></a>,
        <a href="Prism/RationalNode.html" title="Prism::RationalNode (class)"><code>RationalNode</code></a>,
        <a href="Prism/RegularExpressionNode.html" title="Prism::RegularExpressionNode (class)"><code>RegularExpressionNode</code></a>,
        <a href="Prism/RescueModifierNode.html" title="Prism::RescueModifierNode (class)"><code>RescueModifierNode</code></a>,
        <a href="Prism/RescueNode.html" title="Prism::RescueNode (class)"><code>RescueNode</code></a>,
        <a href="Prism/Result.html" title="Prism::Result (class)"><code>Result</code></a>,
        <a href="Prism/Scope.html" title="Prism::Scope (class)"><code>Scope</code></a>,
        <a href="Prism/Source.html" title="Prism::Source (class)"><code>Source</code></a>,
        <a href="Prism/StringNode.html" title="Prism::StringNode (class)"><code>StringNode</code></a>,
        <a href="Prism/StringQuery.html" title="Prism::StringQuery (class)"><code>StringQuery</code></a>,
        <a href="Prism/Token.html" title="Prism::Token (class)"><code>Token</code></a>,
        <a href="Prism/UnlessNode.html" title="Prism::UnlessNode (class)"><code>UnlessNode</code></a>,
        <a href="Prism/UntilNode.html" title="Prism::UntilNode (class)"><code>UntilNode</code></a>,
        <a href="Prism/WhileNode.html" title="Prism::WhileNode (class)"><code>WhileNode</code></a>,
        <a href="Prism/XStringNode.html" title="Prism::XStringNode (class)"><code>XStringNode</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="Prism/CurrentVersionError.html" title="Prism::CurrentVersionError (class)"><code>CurrentVersionError</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism.rb#L9'>lib/prism.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/desugar_compiler.rb#L4'>lib/prism/desugar_compiler.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L15'>lib/prism/ffi.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/lex_compat.rb#L4'>lib/prism/lex_compat.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/node_ext.rb#L8'>lib/prism/node_ext.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/pack.rb#L6'>lib/prism/pack.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/parse_result.rb#L4'>lib/prism/parse_result.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/pattern.rb#L4'>lib/prism/pattern.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/relocation.rb#L4'>lib/prism/relocation.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/string_query.rb#L4'>lib/prism/string_query.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation.rb#L4'>lib/prism/translation.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/parse_result/comments.rb#L4'>lib/prism/parse_result/comments.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/parse_result/errors.rb#L6'>lib/prism/parse_result/errors.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/parse_result/newlines.rb#L4'>lib/prism/parse_result/newlines.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L16'>lib/prism/translation/parser.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser_current.rb#L6'>lib/prism/translation/parser_current.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser_versions.rb#L4'>lib/prism/translation/parser_versions.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/ripper.rb#L4'>lib/prism/translation/ripper.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/ruby_parser.rb#L16'>lib/prism/translation/ruby_parser.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/builder.rb#L4'>lib/prism/translation/parser/builder.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/compiler.rb#L4'>lib/prism/translation/parser/compiler.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/lexer.rb#L8'>lib/prism/translation/parser/lexer.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/ripper/filter.rb#L3'>lib/prism/translation/ripper/filter.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/ripper/lexer.rb#L6'>lib/prism/translation/ripper/lexer.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/ripper/sexp.rb#L6'>lib/prism/translation/ripper/sexp.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/api_pack.c#L265'>prism/api_pack.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1366'>prism/extension.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The Prism Ruby parser.</p>

<p>“Parsing Ruby is suddenly manageable!”</p>

<pre class="code ruby"><code class="ruby"><span class='op'>-</span> <span class='const'>You</span><span class='comma'>,</span> <span class='id identifier rubyid_hopefully'>hopefully</span></code></pre>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='BACKEND-constant' class='summary_signature'>BACKEND =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The FFI backend is used on other Ruby implementations.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism.rb#L90-L95'># File 'lib/prism.rb', line 90</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>FFI</span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The version constant is set by reading the result of calling pm_version.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L234-L234'># File 'lib/prism/ffi.rb', line 234</a>    <pre class='code c'><span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span>.<span class='id identifier rubyid_pm_version'>pm_version</span>.<span class='id identifier rubyid_read_string'>read_string</span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#dump-class_method" title="dump (class method)">.<strong>dump</strong>(source, **options)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Dump the AST corresponding to the given string to a string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dump_file-class_method" title="dump_file (class method)">.<strong>dump_file</strong>(filepath, **options)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Dump the AST corresponding to the given file to a string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lex-class_method" title="lex (class method)">.<strong>lex</strong>(source, **options)  &#x21d2; LexResult </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return a <a href="Prism/LexResult.html" title="Prism::LexResult (class)"><code>LexResult</code></a> instance that contains an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>Token</code></a> instances corresponding to the given string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lex_compat-class_method" title="lex_compat (class method)">.<strong>lex_compat</strong>(source, **options)  &#x21d2; LexCompat::Result </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a parse result whose value is an array of tokens that closely resembles the return value of <code>Ripper.lex</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lex_file-class_method" title="lex_file (class method)">.<strong>lex_file</strong>(filepath, **options)  &#x21d2; LexResult </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return a <a href="Prism/LexResult.html" title="Prism::LexResult (class)"><code>LexResult</code></a> instance that contains an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>Token</code></a> instances corresponding to the given file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load-class_method" title="load (class method)">.<strong>load</strong>(source, serialized, freeze)  &#x21d2; ParseResult </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load the serialized AST using the source as a reference into a tree.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse-class_method" title="parse (class method)">.<strong>parse</strong>(source, **options)  &#x21d2; ParseResult </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given string and return a <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)"><code>ParseResult</code></a> instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_comments-class_method" title="parse_comments (class method)">.<strong>parse_comments</strong>(source, **options)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given string and return an array of <a href="Prism/Comment.html" title="Prism::Comment (class)"><code>Comment</code></a> objects.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_failure%3F-class_method" title="parse_failure? (class method)">.<strong>parse_failure?</strong>(source, **options)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given string and return true if it parses with errors.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_file-class_method" title=".parse_file (class method)">.<strong>parse_file</strong>(filepath, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Mirror the <code>parse_file</code> API by using the serialization API.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_file_comments-class_method" title=".parse_file_comments (class method)">.<strong>parse_file_comments</strong>(filepath, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Mirror the <code>parse_file_comments</code> API by using the serialization API.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_file_failure%3F-class_method" title="parse_file_failure? (class method)">.<strong>parse_file_failure?</strong>(filepath, **options)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given file and return true if it parses with errors.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_file_success%3F-class_method" title="parse_file_success? (class method)">.<strong>parse_file_success?</strong>(filepath, **options)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given file and return true if it parses without errors.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_lex-class_method" title="parse_lex (class method)">.<strong>parse_lex</strong>(source, **options)  &#x21d2; ParseLexResult </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given string and return a <a href="Prism/ParseLexResult.html" title="Prism::ParseLexResult (class)"><code>ParseLexResult</code></a> instance that contains a 2-element array, where the first element is the AST and the second element is an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>Token</code></a> instances.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_lex_file-class_method" title="parse_lex_file (class method)">.<strong>parse_lex_file</strong>(filepath, **options)  &#x21d2; ParseLexResult </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given file and return a <a href="Prism/ParseLexResult.html" title="Prism::ParseLexResult (class)"><code>ParseLexResult</code></a> instance that contains a 2-element array, where the first element is the AST and the second element is an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>Token</code></a> instances.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_stream-class_method" title="parse_stream (class method)">.<strong>parse_stream</strong>(stream, **options)  &#x21d2; ParseResult </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given object that responds to <code>gets</code> and return a <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)"><code>ParseResult</code></a> instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_success%3F-class_method" title="parse_success? (class method)">.<strong>parse_success?</strong>(source, **options)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given string and return true if it parses without errors.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#profile-class_method" title="profile (class method)">.<strong>profile</strong>(source, **options)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given string and return nothing.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#profile_file-class_method" title="profile_file (class method)">.<strong>profile_file</strong>(filepath, **options)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse the given file and return nothing.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scope-class_method" title=".scope (class method)">.<strong>scope</strong>(locals: [], forwarding: [])  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new scope with the given locals and forwarding options that is suitable for passing into one of the <code>Prism.*</code> methods that accepts the <code>scopes</code> option.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#dump_options-class_method" title=".dump_options (class method)">.<strong>dump_options</strong>(options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Convert the given options into a serialized options string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#dump_options_command_line-class_method" title=".dump_options_command_line (class method)">.<strong>dump_options_command_line</strong>(options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the value that should be dumped for the command_line option.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#dump_options_version-class_method" title=".dump_options_version (class method)">.<strong>dump_options_version</strong>(version)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the value that should be dumped for the version option.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#version_string_to_number-class_method" title=".version_string_to_number (class method)">.<strong>version_string_to_number</strong>(version)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Converts a version string like “4.0.0” or “4.0” into a number.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#dump_common-class_method" title=".dump_common (class method)">.<strong>dump_common</strong>(string, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#lex_common-class_method" title=".lex_common (class method)">.<strong>lex_common</strong>(string, code, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#parse_comments_common-class_method" title=".parse_comments_common (class method)">.<strong>parse_comments_common</strong>(string, code, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#parse_common-class_method" title=".parse_common (class method)">.<strong>parse_common</strong>(string, code, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#parse_file_success_common-class_method" title=".parse_file_success_common (class method)">.<strong>parse_file_success_common</strong>(string, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#parse_lex_common-class_method" title=".parse_lex_common (class method)">.<strong>parse_lex_common</strong>(string, code, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="dump-class_method">
  <h3 class='signature  first'>
    .<strong>dump</strong>(source, **options)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Dump the AST corresponding to the given string to a string. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L398-L422'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='398' data-end='422'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 398</span></pre>
<pre class='code cpp'>

static VALUE
dump(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };
    string_options(argc, argv, &amp;input, &amp;options);

#ifdef PRISM_BUILD_DEBUG
    size_t length = pm_string_length(&amp;input);
    char* dup = xmalloc(length);
    memcpy(dup, pm_string_source(&amp;input), length);
    pm_string_constant_init(&amp;input, dup, length);
#endif

    VALUE value = dump_input(&amp;input, &amp;options);
    if (options.freeze) rb_obj_freeze(value);

#ifdef PRISM_BUILD_DEBUG
    xfree(dup);
#endif

    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_common-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>dump_common</strong>(string, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L365-L374'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='365' data-end='374'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 365</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_common'>dump_common</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>) <span class='comment'># :nodoc:
</span>  <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span><span class='op'>::</span><span class='const'><a href="Prism/LibRubyParser/PrismBuffer.html" title="Prism::LibRubyParser::PrismBuffer (class)">PrismBuffer</a></span>.<span class='id identifier rubyid_with'><a href="Prism/LibRubyParser/PrismBuffer.html#with-class_method" title="Prism::LibRubyParser::PrismBuffer.with (method)">with</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_buffer'>buffer</span><span class='op'>|</span>
    <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span>.<span class='id identifier rubyid_pm_serialize_parse'>pm_serialize_parse</span>(<span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_dump_options'><a href="#dump_options-class_method" title="Prism.dump_options (method)">dump_options</a></span>(<span class='id identifier rubyid_options'>options</span>))

    <span class='id identifier rubyid_dumped'>dumped</span> <span class='op'>=</span> <span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_read'>read</span>
    <span class='id identifier rubyid_dumped'>dumped</span>.<span class='id identifier rubyid_freeze'>freeze</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='kw'>false</span>)

    <span class='id identifier rubyid_dumped'>dumped</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_file-class_method">
  <h3 class='signature '>
    .<strong>dump_file</strong>(filepath, **options)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Dump the AST corresponding to the given file to a string. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L431-L444'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='431' data-end='444'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 431</span></pre>
<pre class='code cpp'>

static VALUE
dump_file(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    VALUE encoded_filepath;
    file_options(argc, argv, &amp;input, &amp;options, &amp;encoded_filepath);

    VALUE value = dump_input(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_options-class_method">
  <h3 class='signature priv'>
    .<strong>dump_options</strong>(options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Convert the given options into a serialized options string.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L460-L552'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='460' data-end='552'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 460</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_options'>dump_options</span>(<span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> []

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>L</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> (<span class='id identifier rubyid_filepath'>filepath</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_filepath'>filepath</span>])
    <span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_filepath'>filepath</span>.<span class='id identifier rubyid_bytesize'>bytesize</span><span class='comma'>,</span> <span class='id identifier rubyid_filepath'>filepath</span>.<span class='id identifier rubyid_b'>b</span>)
    <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A*</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>l</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='int'>1</span>)

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>L</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> (<span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>])
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_encoding'>encoding</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Encoding</span>) <span class='op'>?</span> <span class='id identifier rubyid_encoding'>encoding</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>:</span> <span class='id identifier rubyid_encoding'>encoding</span>
    <span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_bytesize'>bytesize</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_b'>b</span>)
    <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A*</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> (<span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_frozen_string_literal'>frozen_string_literal</span><span class='comma'>,</span> <span class='kw'>false</span>) <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>)

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dump_options_command_line'><a href="#dump_options_command_line-class_method" title="Prism.dump_options_command_line (method)">dump_options_command_line</a></span>(<span class='id identifier rubyid_options'>options</span>)

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dump_options_version'><a href="#dump_options_version-class_method" title="Prism.dump_options_version (method)">dump_options_version</a></span>(<span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_version'>version</span>])

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> (<span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>] <span class='op'>==</span> <span class='kw'>false</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>)

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> (<span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_main_script'>main_script</span><span class='comma'>,</span> <span class='kw'>false</span>) <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>)

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> (<span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_partial_script'>partial_script</span><span class='comma'>,</span> <span class='kw'>false</span>) <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>)

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> (<span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='kw'>false</span>) <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>)

  <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>L</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> (<span class='id identifier rubyid_scopes'>scopes</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_scopes'>scopes</span>])
    <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_scopes'>scopes</span>.<span class='id identifier rubyid_length'>length</span>

    <span class='id identifier rubyid_scopes'>scopes</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_scope'><a href="#scope-class_method" title="Prism.scope (method)">scope</a></span><span class='op'>|</span>
      <span class='id identifier rubyid_locals'>locals</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_forwarding'>forwarding</span> <span class='op'>=</span> <span class='int'>0</span>

      <span class='kw'>case</span> <span class='id identifier rubyid_scope'><a href="#scope-class_method" title="Prism.scope (method)">scope</a></span>
      <span class='kw'>when</span> <span class='const'>Array</span>
        <span class='id identifier rubyid_locals'>locals</span> <span class='op'>=</span> <span class='id identifier rubyid_scope'><a href="#scope-class_method" title="Prism.scope (method)">scope</a></span>
      <span class='kw'>when</span> <span class='const'><a href="Prism/Scope.html" title="Prism::Scope (class)">Scope</a></span>
        <span class='id identifier rubyid_locals'>locals</span> <span class='op'>=</span> <span class='id identifier rubyid_scope'><a href="#scope-class_method" title="Prism.scope (method)">scope</a></span>.<span class='id identifier rubyid_locals'>locals</span>

        <span class='id identifier rubyid_scope'><a href="#scope-class_method" title="Prism.scope (method)">scope</a></span>.<span class='id identifier rubyid_forwarding'>forwarding</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_forward'>forward</span><span class='op'>|</span>
          <span class='kw'>case</span> <span class='id identifier rubyid_forward'>forward</span>
          <span class='kw'>when</span> <span class='symbeg'>:</span><span class='op'>*</span>     <span class='kw'>then</span> <span class='id identifier rubyid_forwarding'>forwarding</span> <span class='op'>|=</span> <span class='int'>0x1</span>
          <span class='kw'>when</span> <span class='symbeg'>:</span><span class='op'>**</span>    <span class='kw'>then</span> <span class='id identifier rubyid_forwarding'>forwarding</span> <span class='op'>|=</span> <span class='int'>0x2</span>
          <span class='kw'>when</span> <span class='symbeg'>:</span><span class='op'>&amp;</span>     <span class='kw'>then</span> <span class='id identifier rubyid_forwarding'>forwarding</span> <span class='op'>|=</span> <span class='int'>0x4</span>
          <span class='kw'>when</span> <span class='symbeg'>:&quot;</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_forwarding'>forwarding</span> <span class='op'>|=</span> <span class='int'>0x8</span>
          <span class='kw'>else</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid forwarding value: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_forward'>forward</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wrong argument type </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_scope'><a href="#scope-class_method" title="Prism.scope (method)">scope</a></span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (expected Array or Prism::Scope)</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>L</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_locals'>locals</span>.<span class='id identifier rubyid_length'>length</span>

      <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_forwarding'>forwarding</span>

      <span class='id identifier rubyid_locals'>locals</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_local'>local</span><span class='op'>|</span>
        <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_local'>local</span>.<span class='id identifier rubyid_name'>name</span>
        <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>L</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>

        <span class='id identifier rubyid_template'>template</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A*</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_b'>b</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_values'>values</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_pack'>pack</span>(<span class='id identifier rubyid_template'>template</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_options_command_line-class_method">
  <h3 class='signature priv'>
    .<strong>dump_options_command_line</strong>(options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the value that should be dumped for the command_line option.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L407-L422'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='407' data-end='422'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 407</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_options_command_line'>dump_options_command_line</span>(<span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_command_line'>command_line</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_command_line'>command_line</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>command_line must be a string</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_command_line'>command_line</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>String</span>)

  <span class='id identifier rubyid_command_line'>command_line</span>.<span class='id identifier rubyid_each_char'>each_char</span>.<span class='id identifier rubyid_inject'>inject</span>(<span class='int'>0</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_char'>char</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_char'>char</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>|</span> <span class='int'>0b000001</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>|</span> <span class='int'>0b000010</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>l</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>|</span> <span class='int'>0b000100</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>|</span> <span class='int'>0b001000</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>p</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>|</span> <span class='int'>0b010000</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>|</span> <span class='int'>0b100000</span>
    <span class='kw'>else</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid command_line option: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_char'>char</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_options_version-class_method">
  <h3 class='signature priv'>
    .<strong>dump_options_version</strong>(version)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the value that should be dumped for the version option.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L425-L442'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='425' data-end='442'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 425</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_options_version'>dump_options_version</span>(<span class='id identifier rubyid_version'>version</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_version'>version</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_version_string_to_number'><a href="#version_string_to_number-class_method" title="Prism.version_string_to_number (method)">version_string_to_number</a></span>(<span class='const'>RUBY_VERSION</span>) <span class='op'>||</span> <span class='id identifier rubyid_raise'>raise</span>(<span class='const'><a href="Prism/CurrentVersionError.html" title="Prism::CurrentVersionError (class)">CurrentVersionError</a></span><span class='comma'>,</span> <span class='const'>RUBY_VERSION</span>)
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>latest</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='int'>0</span> <span class='comment'># Handled in pm_parser_init
</span>  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nearest</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Prism.dump (method)">dump</a></span> <span class='op'>=</span> <span class='id identifier rubyid_version_string_to_number'><a href="#version_string_to_number-class_method" title="Prism.version_string_to_number (method)">version_string_to_number</a></span>(<span class='const'>RUBY_VERSION</span>)
    <span class='kw'>return</span> <span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Prism.dump (method)">dump</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Prism.dump (method)">dump</a></span>
    <span class='kw'>if</span> <span class='const'>RUBY_VERSION</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.3</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_version_string_to_number'><a href="#version_string_to_number-class_method" title="Prism.version_string_to_number (method)">version_string_to_number</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.3</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>else</span>
      <span class='int'>0</span> <span class='comment'># Handled in pm_parser_init
</span>    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_version_string_to_number'><a href="#version_string_to_number-class_method" title="Prism.version_string_to_number (method)">version_string_to_number</a></span>(<span class='id identifier rubyid_version'>version</span>) <span class='op'>||</span> <span class='id identifier rubyid_raise'>raise</span>(<span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid version: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lex-class_method">
  <h3 class='signature '>
    .<strong>lex</strong>(source, **options)  &#x21d2; <a href="Prism/LexResult.html" title="Prism::LexResult (class)">LexResult</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return a <a href="Prism/LexResult.html" title="Prism::LexResult (class)"><code>::Prism::LexResult</code></a> instance that contains an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>::Prism::Token</code></a> instances corresponding to the given string. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L803-L814'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='803' data-end='814'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 803</span></pre>
<pre class='code cpp'>

static VALUE
lex(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };
    string_options(argc, argv, &amp;input, &amp;options);

    VALUE result = parse_lex_input(&amp;input, &amp;options, false);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lex_common-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>lex_common</strong>(string, code, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L376-L381'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='376' data-end='381'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 376</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lex_common'>lex_common</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>) <span class='comment'># :nodoc:
</span>  <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span><span class='op'>::</span><span class='const'><a href="Prism/LibRubyParser/PrismBuffer.html" title="Prism::LibRubyParser::PrismBuffer (class)">PrismBuffer</a></span>.<span class='id identifier rubyid_with'><a href="Prism/LibRubyParser/PrismBuffer.html#with-class_method" title="Prism::LibRubyParser::PrismBuffer.with (method)">with</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_buffer'>buffer</span><span class='op'>|</span>
    <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span>.<span class='id identifier rubyid_pm_serialize_lex'>pm_serialize_lex</span>(<span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_dump_options'><a href="#dump_options-class_method" title="Prism.dump_options (method)">dump_options</a></span>(<span class='id identifier rubyid_options'>options</span>))
    <span class='const'>Serialize</span>.<span class='id identifier rubyid_load_lex'>load_lex</span>(<span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_read'>read</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='kw'>false</span>))
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lex_compat-class_method">
  <h3 class='signature '>
    .<strong>lex_compat</strong>(source, **options)  &#x21d2; <a href="Prism/LexCompat/Result.html" title="Prism::LexCompat::Result (class)">LexCompat::Result</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a parse result whose value is an array of tokens that closely resembles the return value of <code>Ripper.lex</code>.</p>

<p>For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism.rb#L65-L67'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='65' data-end='67'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism.rb', line 65</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_lex_compat'>lex_compat</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='const'><a href="Prism/LexCompat.html" title="Prism::LexCompat (class)">LexCompat</a></span>.<span class='id identifier rubyid_new'><a href="Prism/LexCompat.html#new-class_method" title="Prism::LexCompat.new (method)">new</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>).<span class='id identifier rubyid_result'><a href="Prism/LexCompat.html#result-instance_method" title="Prism::LexCompat#result (method)">result</a></span> <span class='comment'># steep:ignore
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lex_file-class_method">
  <h3 class='signature '>
    .<strong>lex_file</strong>(filepath, **options)  &#x21d2; <a href="Prism/LexResult.html" title="Prism::LexResult (class)">LexResult</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return a <a href="Prism/LexResult.html" title="Prism::LexResult (class)"><code>::Prism::LexResult</code></a> instance that contains an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>::Prism::Token</code></a> instances corresponding to the given file. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L823-L836'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='823' data-end='836'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 823</span></pre>
<pre class='code cpp'>

static VALUE
lex_file(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    VALUE encoded_filepath;
    file_options(argc, argv, &amp;input, &amp;options, &amp;encoded_filepath);

    VALUE value = parse_lex_input(&amp;input, &amp;options, false);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load-class_method">
  <h3 class='signature '>
    .<strong>load</strong>(source, serialized, freeze)  &#x21d2; <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)">ParseResult</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load the serialized AST using the source as a reference into a tree.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism.rb#L73-L75'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='73' data-end='75'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism.rb', line 73</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_serialized'>serialized</span><span class='comma'>,</span> <span class='id identifier rubyid_freeze'>freeze</span> <span class='op'>=</span> <span class='kw'>false</span>)
  <span class='const'>Serialize</span>.<span class='id identifier rubyid_load_parse'>load_parse</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_serialized'>serialized</span><span class='comma'>,</span> <span class='id identifier rubyid_freeze'>freeze</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse-class_method">
  <h3 class='signature '>
    .<strong>parse</strong>(source, **options)  &#x21d2; <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)">ParseResult</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given string and return a <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)"><code>::Prism::ParseResult</code></a> instance. The options that are supported are:</p>
<ul><li>
<p><code>command_line</code> - either nil or a string of the various options that were</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_set'>set</span> <span class='id identifier rubyid_on'>on</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_command'>command</span> <span class='id identifier rubyid_line'>line</span>. <span class='const'>Valid</span> <span class='id identifier rubyid_values'>values</span> <span class='id identifier rubyid_are'>are</span> <span class='id identifier rubyid_combinations'>combinations</span> <span class='id identifier rubyid_of'>of</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>l</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>p</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>and</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span>.</code></pre>
</li><li>
<p><code>encoding</code> - the encoding of the source being parsed. This should be an</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_encoding'>encoding</span> <span class='kw'>or</span> <span class='kw'>nil</span>.</code></pre>
</li><li>
<p><code>filepath</code> - the filepath of the source being parsed. This should be a</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='kw'>or</span> <span class='kw'>nil</span>.</code></pre>
</li><li>
<p><code>freeze</code> - whether or not to deeply freeze the AST. This should be a</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_boolean'>boolean</span> <span class='kw'>or</span> <span class='kw'>nil</span>.</code></pre>
</li><li>
<p><code>frozen_string_literal</code> - whether or not the frozen string literal pragma</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_has'>has</span> <span class='id identifier rubyid_been'>been</span> <span class='id identifier rubyid_set'>set</span>. <span class='const'>This</span> <span class='id identifier rubyid_should'>should</span> <span class='id identifier rubyid_be'>be</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_boolean'>boolean</span> <span class='kw'>or</span> <span class='kw'>nil</span>.</code></pre>
</li><li>
<p><code>line</code> - the line number that the parse starts on. This should be an</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_integer'>integer</span> <span class='kw'>or</span> <span class='kw'>nil</span>. <span class='const'>Note</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_this'>this</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>1</span><span class='op'>-</span><span class='id identifier rubyid_indexed'>indexed</span>.</code></pre>
</li><li>
<p><code>main_script</code> - a boolean indicating whether or not the source being parsed</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_main'>main</span> <span class='id identifier rubyid_script'>script</span> <span class='id identifier rubyid_being'>being</span> <span class='id identifier rubyid_run'>run</span> <span class='id identifier rubyid_by'>by</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_interpreter'>interpreter</span>. <span class='const'>This</span> <span class='id identifier rubyid_controls'>controls</span> <span class='id identifier rubyid_whether'>whether</span>
<span class='kw'>or</span> <span class='kw'>not</span> <span class='id identifier rubyid_shebangs'>shebangs</span> <span class='id identifier rubyid_are'>are</span> <span class='id identifier rubyid_parsed'>parsed</span> <span class='kw'>for</span> <span class='id identifier rubyid_additional'>additional</span> <span class='id identifier rubyid_flags'>flags</span> <span class='kw'>and</span> <span class='id identifier rubyid_whether'>whether</span> <span class='kw'>or</span> <span class='kw'>not</span> <span class='id identifier rubyid_the'>the</span>
<span class='id identifier rubyid_parser'>parser</span> <span class='id identifier rubyid_will'>will</span> <span class='id identifier rubyid_attempt'>attempt</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_find'>find</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_matching'>matching</span> <span class='id identifier rubyid_shebang'>shebang</span> <span class='kw'>if</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_first'>first</span> <span class='id identifier rubyid_one'>one</span> <span class='id identifier rubyid_does'>does</span>
<span class='kw'>not</span> <span class='id identifier rubyid_contain'>contain</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_word'>word</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&quot;</span></span>.</code></pre>
</li><li>
<p><code>partial_script</code> - when the file being parsed is considered a “partial”</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_script'>script</span><span class='comma'>,</span> <span class='id identifier rubyid_jumps'>jumps</span> <span class='id identifier rubyid_will'>will</span> <span class='kw'>not</span> <span class='id identifier rubyid_be'>be</span> <span class='id identifier rubyid_marked'>marked</span> <span class='id identifier rubyid_as'>as</span> <span class='id identifier rubyid_errors'>errors</span> <span class='kw'>if</span> <span class='id identifier rubyid_they'>they</span> <span class='id identifier rubyid_are'>are</span> <span class='kw'>not</span> <span class='id identifier rubyid_contained'>contained</span>
<span class='id identifier rubyid_within'>within</span> <span class='id identifier rubyid_loops'>loops</span><span class='op'>/</span><span class='id identifier rubyid_blocks'>blocks</span>. <span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_used'>used</span> <span class='kw'>in</span> <span class='id identifier rubyid_the'>the</span> <span class='kw'>case</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_you'>you</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>re parsing a
script that you know will be embedded inside another script later, but
you do not have that context yet. For example, when parsing an ERB
template that will be evaluated inside another script.</span></code></pre>
</li><li>
<p><code>scopes</code> - the locals that are in scope surrounding the code that is being</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parsed'>parsed</span>. <span class='const'>This</span> <span class='id identifier rubyid_should'>should</span> <span class='id identifier rubyid_be'>be</span> <span class='id identifier rubyid_an'>an</span> <span class='id identifier rubyid_array'>array</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_arrays'>arrays</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_symbols'>symbols</span> <span class='kw'>or</span> <span class='kw'>nil</span>. <span class='const'>Scopes</span> <span class='id identifier rubyid_are'>are</span>
<span class='id identifier rubyid_ordered'>ordered</span> <span class='id identifier rubyid_from'>from</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_outermost'>outermost</span> <span class='id identifier rubyid_scope'><a href="#scope-class_method" title="Prism.scope (method)">scope</a></span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_innermost'>innermost</span> <span class='id identifier rubyid_one'>one</span>.</code></pre>
</li><li>
<p><code>version</code> - the version of Ruby syntax that prism should used to parse Ruby</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_code'>code</span>. <span class='const'>By</span> <span class='id identifier rubyid_default'>default</span> <span class='id identifier rubyid_prism'>prism</span> <span class='id identifier rubyid_assumes'>assumes</span> <span class='id identifier rubyid_you'>you</span> <span class='id identifier rubyid_want'>want</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_latest'>latest</span>
<span class='id identifier rubyid_version'>version</span> <span class='id identifier rubyid_of'>of</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_syntax'>syntax</span> (<span class='id identifier rubyid_which'>which</span> <span class='id identifier rubyid_you'>you</span> <span class='id identifier rubyid_can'>can</span> <span class='id identifier rubyid_trigger'>trigger</span> <span class='id identifier rubyid_with'>with</span> {<span class='kw'>nil</span>} <span class='kw'>or</span>
{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>latest</span><span class='tstring_end'>&quot;</span></span>}). <span class='const'>You</span> <span class='id identifier rubyid_may'>may</span> <span class='id identifier rubyid_also'>also</span> <span class='id identifier rubyid_restrict'>restrict</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_syntax'>syntax</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_specific'>specific</span> <span class='id identifier rubyid_version'>version</span> <span class='id identifier rubyid_of'>of</span>
<span class='const'>Ruby</span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_g'>g</span>.<span class='comma'>,</span> <span class='id identifier rubyid_with'>with</span> {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.3.0</span><span class='tstring_end'>&quot;</span></span>}. <span class='const'>To</span> <span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_same'>same</span> <span class='id identifier rubyid_syntax'>syntax</span> <span class='id identifier rubyid_version'>version</span> <span class='id identifier rubyid_that'>that</span>
<span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_current'>current</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_running'>running</span> <span class='id identifier rubyid_use'>use</span> <span class='backtick'>`</span><span class='tstring_content'>version: &quot;current&quot;</span><span class='tstring_end'>`</span></span>. <span class='const'>To</span> <span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_the'>the</span>
<span class='id identifier rubyid_nearest'>nearest</span> <span class='id identifier rubyid_version'>version</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_current'>current</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_running'>running</span><span class='comma'>,</span> <span class='id identifier rubyid_use'>use</span>
<span class='backtick'>`</span><span class='tstring_content'>version: &quot;nearest&quot;</span><span class='tstring_end'>`</span></span>. <span class='const'>Raises</span> <span class='const'>ArgumentError</span> <span class='kw'>if</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_version'>version</span> <span class='id identifier rubyid_is'>is</span> <span class='kw'>not</span>
<span class='id identifier rubyid_currently'>currently</span> <span class='id identifier rubyid_supported'>supported</span> <span class='id identifier rubyid_by'>by</span> <span class='const'>Prism</span>.</code></pre>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L911-L933'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='911' data-end='933'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 911</span></pre>
<pre class='code cpp'>

static VALUE
parse(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };
    string_options(argc, argv, &amp;input, &amp;options);

#ifdef PRISM_BUILD_DEBUG
    size_t length = pm_string_length(&amp;input);
    char* dup = xmalloc(length);
    memcpy(dup, pm_string_source(&amp;input), length);
    pm_string_constant_init(&amp;input, dup, length);
#endif

    VALUE value = parse_input(&amp;input, &amp;options);

#ifdef PRISM_BUILD_DEBUG
    xfree(dup);
#endif

    pm_string_free(&amp;input);
    pm_options_free(&amp;options);
    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_comments-class_method">
  <h3 class='signature '>
    .<strong>parse_comments</strong>(source, **options)  &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given string and return an array of <a href="Prism/Comment.html" title="Prism::Comment (class)"><code>::Prism::Comment</code></a> objects. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1103-L1114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1103' data-end='1114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1103</span></pre>
<pre class='code cpp'>

static VALUE
parse_comments(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };
    string_options(argc, argv, &amp;input, &amp;options);

    VALUE result = parse_input_comments(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_comments_common-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>parse_comments_common</strong>(string, code, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L388-L393'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='388' data-end='393'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 388</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_comments_common'>parse_comments_common</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>) <span class='comment'># :nodoc:
</span>  <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span><span class='op'>::</span><span class='const'><a href="Prism/LibRubyParser/PrismBuffer.html" title="Prism::LibRubyParser::PrismBuffer (class)">PrismBuffer</a></span>.<span class='id identifier rubyid_with'><a href="Prism/LibRubyParser/PrismBuffer.html#with-class_method" title="Prism::LibRubyParser::PrismBuffer.with (method)">with</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_buffer'>buffer</span><span class='op'>|</span>
    <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span>.<span class='id identifier rubyid_pm_serialize_parse_comments'>pm_serialize_parse_comments</span>(<span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_dump_options'><a href="#dump_options-class_method" title="Prism.dump_options (method)">dump_options</a></span>(<span class='id identifier rubyid_options'>options</span>))
    <span class='const'>Serialize</span>.<span class='id identifier rubyid_load_parse_comments'>load_parse_comments</span>(<span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_read'>read</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='kw'>false</span>))
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_common-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>parse_common</strong>(string, code, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L383-L386'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='383' data-end='386'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 383</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_common'>parse_common</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_serialized'>serialized</span> <span class='op'>=</span> <span class='id identifier rubyid_dump_common'><a href="#dump_common-class_method" title="Prism.dump_common (method)">dump_common</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
  <span class='const'>Serialize</span>.<span class='id identifier rubyid_load_parse'>load_parse</span>(<span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_serialized'>serialized</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='kw'>false</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_failure?-class_method">
  <h3 class='signature '>
    .<strong>parse_failure?</strong>(source, **options)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given string and return true if it parses with errors. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1238-L1241'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1238' data-end='1241'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1238</span></pre>
<pre class='code cpp'>

static VALUE
parse_failure_p(int argc, VALUE *argv, VALUE self) {
    return RTEST(parse_success_p(argc, argv, self)) ? Qfalse : Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_file-class_method">
  <h3 class='signature '>
    .<strong>parse_file</strong>(filepath, **options)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Mirror the <code>parse_file</code> API by using the serialization API. This uses native strings instead of Ruby strings because it allows us to use mmap when it is available.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L942-L955'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='942' data-end='955'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 942</span></pre>
<pre class='code cpp'>

static VALUE
parse_file(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    VALUE encoded_filepath;
    file_options(argc, argv, &amp;input, &amp;options, &amp;encoded_filepath);

    VALUE value = parse_input(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_file_comments-class_method">
  <h3 class='signature '>
    .<strong>parse_file_comments</strong>(filepath, **options)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Mirror the <code>parse_file_comments</code> API by using the serialization API. This uses native strings instead of Ruby strings because it allows us to use mmap when it is available.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1123-L1136'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1123' data-end='1136'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1123</span></pre>
<pre class='code cpp'>

static VALUE
parse_file_comments(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    VALUE encoded_filepath;
    file_options(argc, argv, &amp;input, &amp;options, &amp;encoded_filepath);

    VALUE value = parse_input_comments(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_file_failure?-class_method">
  <h3 class='signature '>
    .<strong>parse_file_failure?</strong>(filepath, **options)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given file and return true if it parses with errors. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1272-L1275'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1272' data-end='1275'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1272</span></pre>
<pre class='code cpp'>

static VALUE
parse_file_failure_p(int argc, VALUE *argv, VALUE self) {
    return RTEST(parse_file_success_p(argc, argv, self)) ? Qfalse : Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_file_success?-class_method">
  <h3 class='signature '>
    .<strong>parse_file_success?</strong>(filepath, **options)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given file and return true if it parses without errors. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1250-L1263'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1250' data-end='1263'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1250</span></pre>
<pre class='code cpp'>

static VALUE
parse_file_success_p(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    VALUE encoded_filepath;
    file_options(argc, argv, &amp;input, &amp;options, &amp;encoded_filepath);

    VALUE result = parse_input_success_p(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_file_success_common-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>parse_file_success_common</strong>(string, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L402-L404'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='402' data-end='404'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 402</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_file_success_common'>parse_file_success_common</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>) <span class='comment'># :nodoc:
</span>  <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span>.<span class='id identifier rubyid_pm_parse_success_p'>pm_parse_success_p</span>(<span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_dump_options'><a href="#dump_options-class_method" title="Prism.dump_options (method)">dump_options</a></span>(<span class='id identifier rubyid_options'>options</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_lex-class_method">
  <h3 class='signature '>
    .<strong>parse_lex</strong>(source, **options)  &#x21d2; <a href="Prism/ParseLexResult.html" title="Prism::ParseLexResult (class)">ParseLexResult</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given string and return a <a href="Prism/ParseLexResult.html" title="Prism::ParseLexResult (class)"><code>::Prism::ParseLexResult</code></a> instance that contains a 2-element array, where the first element is the AST and the second element is an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>::Prism::Token</code></a> instances.</p>

<p>This API is only meant to be used in the case where you need both the AST and the tokens. If you only need one or the other, use either <a href="#parse-class_method" title="Prism.parse (method)">.parse</a> or <a href="#lex-class_method" title="Prism.lex (method)">.lex</a>.</p>

<p>For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1152-L1163'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1152' data-end='1163'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1152</span></pre>
<pre class='code cpp'>

static VALUE
parse_lex(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };
    string_options(argc, argv, &amp;input, &amp;options);

    VALUE value = parse_lex_input(&amp;input, &amp;options, true);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_lex_common-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>parse_lex_common</strong>(string, code, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L395-L400'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='395' data-end='400'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 395</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_lex_common'>parse_lex_common</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>) <span class='comment'># :nodoc:
</span>  <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span><span class='op'>::</span><span class='const'><a href="Prism/LibRubyParser/PrismBuffer.html" title="Prism::LibRubyParser::PrismBuffer (class)">PrismBuffer</a></span>.<span class='id identifier rubyid_with'><a href="Prism/LibRubyParser/PrismBuffer.html#with-class_method" title="Prism::LibRubyParser::PrismBuffer.with (method)">with</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_buffer'>buffer</span><span class='op'>|</span>
    <span class='const'><a href="Prism/LibRubyParser.html" title="Prism::LibRubyParser (module)">LibRubyParser</a></span>.<span class='id identifier rubyid_pm_serialize_parse_lex'>pm_serialize_parse_lex</span>(<span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_dump_options'><a href="#dump_options-class_method" title="Prism.dump_options (method)">dump_options</a></span>(<span class='id identifier rubyid_options'>options</span>))
    <span class='const'>Serialize</span>.<span class='id identifier rubyid_load_parse_lex'>load_parse_lex</span>(<span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_read'>read</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='kw'>false</span>))
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_lex_file-class_method">
  <h3 class='signature '>
    .<strong>parse_lex_file</strong>(filepath, **options)  &#x21d2; <a href="Prism/ParseLexResult.html" title="Prism::ParseLexResult (class)">ParseLexResult</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given file and return a <a href="Prism/ParseLexResult.html" title="Prism::ParseLexResult (class)"><code>::Prism::ParseLexResult</code></a> instance that contains a 2-element array, where the first element is the AST and the second element is an array of <a href="Prism/Token.html" title="Prism::Token (class)"><code>::Prism::Token</code></a> instances.</p>

<p>This API is only meant to be used in the case where you need both the AST and the tokens. If you only need one or the other, use either <a href="#parse_file-class_method" title="Prism.parse_file (method)">.parse_file</a> or <a href="#lex_file-class_method" title="Prism.lex_file (method)">.lex_file</a>.</p>

<p>For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1179-L1192'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1179' data-end='1192'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1179</span></pre>
<pre class='code cpp'>

static VALUE
parse_lex_file(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    VALUE encoded_filepath;
    file_options(argc, argv, &amp;input, &amp;options, &amp;encoded_filepath);

    VALUE value = parse_lex_input(&amp;input, &amp;options, true);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_stream-class_method">
  <h3 class='signature '>
    .<strong>parse_stream</strong>(stream, **options)  &#x21d2; <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)">ParseResult</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given object that responds to <code>gets</code> and return a <a href="Prism/ParseResult.html" title="Prism::ParseResult (class)"><code>::Prism::ParseResult</code></a> instance. The options that are supported are the same as <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1050-L1074'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1050' data-end='1074'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1050</span></pre>
<pre class='code cpp'>

static VALUE
parse_stream(int argc, VALUE *argv, VALUE self) {
    VALUE stream;
    VALUE keywords;
    rb_scan_args(argc, argv, &quot;1:&quot;, &amp;stream, &amp;keywords);

    pm_options_t options = { 0 };
    extract_options(&amp;options, Qnil, keywords);

    pm_parser_t parser;
    pm_buffer_t buffer;

    pm_node_t *node = pm_parse_stream(&amp;parser, &amp;buffer, (void *) stream, parse_stream_fgets, parse_stream_eof, &amp;options);
    rb_encoding *encoding = rb_enc_find(parser.encoding-&gt;name);

    VALUE source = pm_source_new(&amp;parser, encoding, options.freeze);
    VALUE value = pm_ast_new(&amp;parser, node, encoding, source, options.freeze);
    VALUE result = parse_result_create(rb_cPrismParseResult, &amp;parser, value, encoding, source, options.freeze);

    pm_node_destroy(&amp;parser, node);
    pm_buffer_free(&amp;buffer);
    pm_parser_free(&amp;parser);

    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_success?-class_method">
  <h3 class='signature '>
    .<strong>parse_success?</strong>(source, **options)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given string and return true if it parses without errors. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L1218-L1229'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1218' data-end='1229'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 1218</span></pre>
<pre class='code cpp'>

static VALUE
parse_success_p(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };
    string_options(argc, argv, &amp;input, &amp;options);

    VALUE result = parse_input_success_p(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="profile-class_method">
  <h3 class='signature '>
    .<strong>profile</strong>(source, **options)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given string and return nothing. This method is meant to allow profilers to avoid the overhead of reifying the AST to Ruby. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L978-L989'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='978' data-end='989'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 978</span></pre>
<pre class='code cpp'>

static VALUE
profile(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    string_options(argc, argv, &amp;input, &amp;options);
    profile_input(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="profile_file-class_method">
  <h3 class='signature '>
    .<strong>profile_file</strong>(filepath, **options)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse the given file and return nothing. This method is meant to allow profilers to avoid the overhead of reifying the AST to Ruby. For supported options, see <a href="#parse-class_method" title="Prism.parse (method)">.parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/prism/extension.c#L999-L1012'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='999' data-end='1012'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'prism/extension.c', line 999</span></pre>
<pre class='code cpp'>

static VALUE
profile_file(int argc, VALUE *argv, VALUE self) {
    pm_string_t input;
    pm_options_t options = { 0 };

    VALUE encoded_filepath;
    file_options(argc, argv, &amp;input, &amp;options, &amp;encoded_filepath);

    profile_input(&amp;input, &amp;options);
    pm_string_free(&amp;input);
    pm_options_free(&amp;options);

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scope-class_method">
  <h3 class='signature '>
    .<strong>scope</strong>(locals: [], forwarding: [])  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new scope with the given locals and forwarding options that is suitable for passing into one of the <code>Prism.*</code> methods that accepts the <code>scopes</code> option.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/parse_result.rb#L904-L906'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='904' data-end='906'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/parse_result.rb', line 904</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_scope'>scope</span>(<span class='label'>locals:</span> []<span class='comma'>,</span> <span class='label'>forwarding:</span> [])
  <span class='const'><a href="Prism/Scope.html" title="Prism::Scope (class)">Scope</a></span>.<span class='id identifier rubyid_new'><a href="Prism/Scope.html#new-class_method" title="Prism::Scope.new (method)">new</a></span>(<span class='id identifier rubyid_locals'>locals</span><span class='comma'>,</span> <span class='id identifier rubyid_forwarding'>forwarding</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="version_string_to_number-class_method">
  <h3 class='signature priv'>
    .<strong>version_string_to_number</strong>(version)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Converts a version string like “4.0.0” or “4.0” into a number. Returns nil if the version is unknown.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/ffi.rb#L446-L457'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='446' data-end='457'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/ffi.rb', line 446</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_version_string_to_number'>version_string_to_number</span>(<span class='id identifier rubyid_version'>version</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_version'>version</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A3\.3(\.\d+)?\z</span><span class='regexp_end'>/</span></span>
    <span class='int'>1</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A3\.4(\.\d+)?\z</span><span class='regexp_end'>/</span></span>
    <span class='int'>2</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A3\.5(\.\d+)?\z</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A4\.0(\.\d+)?\z</span><span class='regexp_end'>/</span></span>
    <span class='int'>3</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A4\.1(\.\d+)?\z</span><span class='regexp_end'>/</span></span>
    <span class='int'>4</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>