<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Prism::Translation::Parser &mdash; prism  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Prism::Translation::Parser",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Ruby-master</a> &raquo; 
      <a href='../../'>prism</a> &raquo; 
      <a href='../../_index.html#alpha_P'>Index (P)</a> &raquo; 
        <a href="../../Prism.html" title="Prism (module)">Prism</a> &raquo; 
        <a href="../Translation.html" title="Prism::Translation (module)">Translation</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Parser&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Prism::Translation::Parser</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="Parser/ProcessedSource.html" title="Prism::Translation::Parser::ProcessedSource (module)"><code>ProcessedSource</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Parser/Compiler.html" title="Prism::Translation::Parser::Compiler (class)"><code>Compiler</code></a>,
        <a href="Parser/Lexer.html" title="Prism::Translation::Parser::Lexer (class)"><code>Lexer</code></a>,
        <a href="Parser/PrismDiagnostic.html" title="Prism::Translation::Parser::PrismDiagnostic (class)"><code>PrismDiagnostic</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="Parser33.html" title="Prism::Translation::Parser33 (class)">Parser33</a>, <a href="Parser34.html" title="Prism::Translation::Parser34 (class)">Parser34</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Parser::Base
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Parser::Base
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Parser::Base</span>
        <ul class='fullTree'>
          <li>Object</li>
          <li class='next'>Parser::Base</li>
          <li class='next'>Prism::Translation::Parser</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L11'>lib/prism/translation/parser.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/compiler.rb#L5'>lib/prism/translation/parser/compiler.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/lexer.rb#L5'>lib/prism/translation/parser/lexer.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/rubocop.rb#L14'>lib/prism/translation/parser/rubocop.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>This class is the entry-point for converting a prism syntax tree into the whitequark/parser gem’s syntax tree. It inherits from the base parser for the parser gem, and overrides the parse* methods to parse with prism and then translate.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='Diagnostic-constant' class='summary_signature priv nodoc'>Diagnostic =</span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L12-L12'># File 'lib/prism/translation/parser.rb', line 12</a>    <pre class='code ruby'><span class='op'>::</span><span class='const'>Parser</span><span class='op'>::</span><span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span></pre>
  </li>
  <li>
    <span id='Racc_debug_parser-constant' class='summary_signature nodoc'>Racc_debug_parser =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L29-L29'># File 'lib/prism/translation/parser.rb', line 29</a>    <pre class='code ruby'><span class='kw'>false</span></pre>
  </li>
  <li>
    <span id='VERSION_3_3-constant' class='summary_signature'>VERSION_3_3 =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>For Ruby 3.3</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/rubocop.rb#L19-L19'># File 'lib/prism/translation/parser/rubocop.rb', line 19</a>    <pre class='code ruby'><span class='float'>80_82_73_83_77.33</span></pre>
  </li>
  <li>
    <span id='VERSION_3_4-constant' class='summary_signature'>VERSION_3_4 =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>For Ruby 3.4</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser/rubocop.rb#L22-L22'># File 'lib/prism/translation/parser/rubocop.rb', line 22</a>    <pre class='code ruby'><span class='float'>80_82_73_83_77.34</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#default_encoding-instance_method" title="#default_encoding (instance method)">#<strong>default_encoding</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The default encoding for Ruby files is UTF-8.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse-instance_method" title="#parse (instance method)">#<strong>parse</strong>(source_buffer)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parses a source buffer and returns the AST.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_with_comments-instance_method" title="#parse_with_comments (instance method)">#<strong>parse_with_comments</strong>(source_buffer)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parses a source buffer and returns the AST and the source code comments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tokenize-instance_method" title="#tokenize (instance method)">#<strong>tokenize</strong>(source_buffer, recover = false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parses a source buffer and returns the AST, the source code comments, and the tokens emitted by the lexer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#try_declare_numparam-instance_method" title="#try_declare_numparam (instance method)">#<strong>try_declare_numparam</strong>(node)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Since prism resolves num params for us, we don’t need to support this kind of logic here.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_ast-instance_method" title="#build_ast (instance method)">#<strong>build_ast</strong>(program, offset_cache)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Build the parser gem AST from the prism AST.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_comments-instance_method" title="#build_comments (instance method)">#<strong>build_comments</strong>(comments, offset_cache)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Build the parser gem comments from the prism comments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_offset_cache-instance_method" title="#build_offset_cache (instance method)">#<strong>build_offset_cache</strong>(source)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../../Prism.html" title="Prism (module)"><code>::Prism</code></a> deals with offsets in bytes, while the parser gem deals with offsets in characters.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_range-instance_method" title="#build_range (instance method)">#<strong>build_range</strong>(location, offset_cache)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Build a range from a prism location.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_tokens-instance_method" title="#build_tokens (instance method)">#<strong>build_tokens</strong>(tokens, offset_cache)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Build the parser gem tokens from the prism tokens.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#convert_for_prism-instance_method" title="#convert_for_prism (instance method)">#<strong>convert_for_prism</strong>(version)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Converts the version format handled by <code>Parser</code> to the format handled by <a href="../../Prism.html" title="Prism (module)"><code>::Prism</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#error_diagnostic-instance_method" title="#error_diagnostic (instance method)">#<strong>error_diagnostic</strong>(error, offset_cache)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Build a diagnostic from the given prism parse error.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#unwrap-instance_method" title="#unwrap (instance method)">#<strong>unwrap</strong>(result, offset_cache)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>If there was a error generated during the parse, then raise an appropriate syntax error.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#valid_error%3F-instance_method" title="#valid_error? (instance method)">#<strong>valid_error?</strong>(error)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>This is a hook to allow consumers to disable some errors if they don’t want them to block creating the syntax tree.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#valid_warning%3F-instance_method" title="#valid_warning? (instance method)">#<strong>valid_warning?</strong>(warning)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>This is a hook to allow consumers to disable some warnings if they don’t want them to block creating the syntax tree.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#warning_diagnostic-instance_method" title="#warning_diagnostic (instance method)">#<strong>warning_diagnostic</strong>(warning, offset_cache)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Build a diagnostic from the given prism parse warning.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#version-instance_method" title="#version (instance method)">#<strong>version</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#yyerror-instance_method" title="#yyerror (instance method)">#<strong>yyerror</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="build_ast-instance_method">
  <h3 class='signature priv first'>
    #<strong>build_ast</strong>(program, offset_cache)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Build the parser gem AST from the prism AST.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L256-L258'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='256' data-end='258'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 256</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_ast'>build_ast</span>(<span class='id identifier rubyid_program'>program</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  <span class='id identifier rubyid_program'>program</span>.<span class='id identifier rubyid_accept'>accept</span>(<span class='const'><a href="Parser/Compiler.html" title="Prism::Translation::Parser::Compiler (class)">Compiler</a></span>.<span class='id identifier rubyid_new'><a href="Parser/Compiler.html#new-class_method" title="Prism::Translation::Parser::Compiler.new (method)">new</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_comments-instance_method">
  <h3 class='signature priv'>
    #<strong>build_comments</strong>(comments, offset_cache)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Build the parser gem comments from the prism comments.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L261-L265'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='261' data-end='265'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 261</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_comments'>build_comments</span>(<span class='id identifier rubyid_comments'>comments</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  <span class='id identifier rubyid_comments'>comments</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_comment'>comment</span><span class='op'>|</span>
    <span class='op'>::</span><span class='const'>Parser</span><span class='op'>::</span><span class='const'><a href="../Source.html" title="Prism::Source (class)">Source</a></span><span class='op'>::</span><span class='const'><a href="../Comment.html" title="Prism::Comment (class)">Comment</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_build_range'><a href="#build_range-instance_method" title="Prism::Translation::Parser#build_range (method)">build_range</a></span>(<span class='id identifier rubyid_comment'>comment</span>.<span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>))
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_offset_cache-instance_method">
  <h3 class='signature priv'>
    #<strong>build_offset_cache</strong>(source)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../../Prism.html" title="Prism (module)"><code>::Prism</code></a> deals with offsets in bytes, while the parser gem deals with offsets in characters. We need to handle this conversion in order to build the parser gem AST.</p>

<p>If the bytesize of the source is the same as the length, then we can just use the offset directly. Otherwise, we build an array where the index is the byte offset and the value is the character offset.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L239-L253'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='239' data-end='253'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 239</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_offset_cache'>build_offset_cache</span>(<span class='id identifier rubyid_source'>source</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>==</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_length'>length</span>
    <span class='comment'>#=&gt; (offset) { offset }
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_offset_cache'>offset_cache</span> <span class='op'>=</span> []
    <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='int'>0</span>

    <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_each_char'>each_char</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_char'>char</span><span class='op'>|</span>
      <span class='id identifier rubyid_char'>char</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>.<span class='id identifier rubyid_times'>times</span> { <span class='id identifier rubyid_offset_cache'>offset_cache</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_offset'>offset</span> }
      <span class='id identifier rubyid_offset'>offset</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_offset_cache'>offset_cache</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_offset'>offset</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_range-instance_method">
  <h3 class='signature priv'>
    #<strong>build_range</strong>(location, offset_cache)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Build a range from a prism location.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L273-L279'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='273' data-end='279'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 273</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_range'>build_range</span>(<span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  <span class='op'>::</span><span class='const'>Parser</span><span class='op'>::</span><span class='const'><a href="../Source.html" title="Prism::Source (class)">Source</a></span><span class='op'>::</span><span class='const'>Range</span>.<span class='id identifier rubyid_new'>new</span>(
    <span class='id identifier rubyid_source_buffer'>source_buffer</span><span class='comma'>,</span>
    <span class='id identifier rubyid_offset_cache'>offset_cache</span>[<span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_start_offset'>start_offset</span>]<span class='comma'>,</span>
    <span class='id identifier rubyid_offset_cache'>offset_cache</span>[<span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_end_offset'>end_offset</span>]
  )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_tokens-instance_method">
  <h3 class='signature priv'>
    #<strong>build_tokens</strong>(tokens, offset_cache)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Build the parser gem tokens from the prism tokens.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L268-L270'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='268' data-end='270'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 268</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_tokens'>build_tokens</span>(<span class='id identifier rubyid_tokens'>tokens</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  <span class='const'><a href="Parser/Lexer.html" title="Prism::Translation::Parser::Lexer (class)">Lexer</a></span>.<span class='id identifier rubyid_new'><a href="Parser/Lexer.html#new-class_method" title="Prism::Translation::Parser::Lexer.new (method)">new</a></span>(<span class='id identifier rubyid_source_buffer'>source_buffer</span><span class='comma'>,</span> <span class='id identifier rubyid_tokens'>tokens</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>).<span class='id identifier rubyid_to_a'><a href="Parser/Lexer.html#to_a-instance_method" title="Prism::Translation::Parser::Lexer#to_a (method)">to_a</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="convert_for_prism-instance_method">
  <h3 class='signature priv'>
    #<strong>convert_for_prism</strong>(version)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Converts the version format handled by <code>Parser</code> to the format handled by <a href="../../Prism.html" title="Prism (module)"><code>::Prism</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L282-L291'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='282' data-end='291'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 282</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_convert_for_prism'>convert_for_prism</span>(<span class='id identifier rubyid_version'><a href="#version-instance_method" title="Prism::Translation::Parser#version (method)">version</a></span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_version'><a href="#version-instance_method" title="Prism::Translation::Parser#version (method)">version</a></span>
  <span class='kw'>when</span> <span class='int'>33</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.3.0</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='int'>34</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.4.0</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>latest</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_encoding-instance_method">
  <h3 class='signature '>
    #<strong>default_encoding</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The default encoding for Ruby files is UTF-8.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L36-L38'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='36' data-end='38'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 36</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_encoding'>default_encoding</span>
  <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="error_diagnostic-instance_method">
  <h3 class='signature priv'>
    #<strong>error_diagnostic</strong>(error, offset_cache)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Build a diagnostic from the given prism parse error.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L119-L187'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='119' data-end='187'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 119</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_error_diagnostic'>error_diagnostic</span>(<span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='id identifier rubyid_error'>error</span>.<span class='id identifier rubyid_location'>location</span>
  <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span> <span class='op'>=</span> <span class='id identifier rubyid_build_range'><a href="#build_range-instance_method" title="Prism::Translation::Parser#build_range (method)">build_range</a></span>(<span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)

  <span class='kw'>case</span> <span class='id identifier rubyid_error'>error</span>.<span class='id identifier rubyid_type'>type</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_block_multi'>argument_block_multi</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_block_and_blockarg'>block_and_blockarg</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_formal_constant'>argument_formal_constant</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_const'>argument_const</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_formal_class'>argument_formal_class</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_cvar'>argument_cvar</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_formal_global'>argument_formal_global</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_gvar'>argument_gvar</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_formal_ivar'>argument_formal_ivar</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_ivar'>argument_ivar</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_no_forwarding_amp'>argument_no_forwarding_amp</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_no_anonymous_blockarg'>no_anonymous_blockarg</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_no_forwarding_star'>argument_no_forwarding_star</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_no_anonymous_restarg'>no_anonymous_restarg</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_no_forwarding_star_star'>argument_no_forwarding_star_star</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_no_anonymous_kwrestarg'>no_anonymous_kwrestarg</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_begin_lonely_else'>begin_lonely_else</span>
    <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_copy'>copy</span>(<span class='label'>length:</span> <span class='int'>4</span>)
    <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span> <span class='op'>=</span> <span class='id identifier rubyid_build_range'><a href="#build_range-instance_method" title="Prism::Translation::Parser#build_range (method)">build_range</a></span>(<span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_useless_else'>useless_else</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_class_name'>class_name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_module_name'>module_name</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_module_name_const'>module_name_const</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_class_in_method'>class_in_method</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_class_in_def'>class_in_def</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_def_endless_setter'>def_endless_setter</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_endless_setter'>endless_setter</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_embdoc_term'>embdoc_term</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_embedded_document'>embedded_document</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_incomplete_variable_class'>incomplete_variable_class</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_incomplete_variable_class_3_3_0'>incomplete_variable_class_3_3_0</span>
    <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_copy'>copy</span>(<span class='label'>length:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='int'>1</span>)
    <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span> <span class='op'>=</span> <span class='id identifier rubyid_build_range'><a href="#build_range-instance_method" title="Prism::Translation::Parser#build_range (method)">build_range</a></span>(<span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)

    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_cvar_name'>cvar_name</span><span class='comma'>,</span> { <span class='label'>name:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_slice'>slice</span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_incomplete_variable_instance'>incomplete_variable_instance</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_incomplete_variable_instance_3_3_0'>incomplete_variable_instance_3_3_0</span>
    <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_copy'>copy</span>(<span class='label'>length:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='int'>1</span>)
    <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span> <span class='op'>=</span> <span class='id identifier rubyid_build_range'><a href="#build_range-instance_method" title="Prism::Translation::Parser#build_range (method)">build_range</a></span>(<span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)

    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ivar_name'>ivar_name</span><span class='comma'>,</span> { <span class='label'>name:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_slice'>slice</span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_invalid_variable_global'>invalid_variable_global</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_invalid_variable_global_3_3_0'>invalid_variable_global_3_3_0</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gvar_name'>gvar_name</span><span class='comma'>,</span> { <span class='label'>name:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_slice'>slice</span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_module_in_method'>module_in_method</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_module_in_def'>module_in_def</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_numbered_parameter_ordinary'>numbered_parameter_ordinary</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ordinary_param_defined'>ordinary_param_defined</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_numbered_parameter_outer_scope'>numbered_parameter_outer_scope</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_numparam_used_in_outer_scope'>numparam_used_in_outer_scope</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_parameter_circular'>parameter_circular</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_circular_argument_reference'>circular_argument_reference</span><span class='comma'>,</span> { <span class='label'>var_name:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_slice'>slice</span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_parameter_name_repeat'>parameter_name_repeat</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_duplicate_argument'>duplicate_argument</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_parameter_numbered_reserved'>parameter_numbered_reserved</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_reserved_for_numparam'>reserved_for_numparam</span><span class='comma'>,</span> { <span class='label'>name:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_slice'>slice</span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_singleton_for_literals'>singleton_for_literals</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_singleton_literal'>singleton_literal</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string_literal_eof'>string_literal_eof</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string_eof'>string_eof</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unexpected_token_ignore'>unexpected_token_ignore</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unexpected_token'>unexpected_token</span><span class='comma'>,</span> { <span class='label'>token:</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_slice'>slice</span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_write_target_in_method'>write_target_in_method</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dynamic_const'>dynamic_const</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>else</span>
    <span class='const'><a href="Parser/PrismDiagnostic.html" title="Prism::Translation::Parser::PrismDiagnostic (class)">PrismDiagnostic</a></span>.<span class='id identifier rubyid_new'><a href="Parser/PrismDiagnostic.html#new-class_method" title="Prism::Translation::Parser::PrismDiagnostic.new (method)">new</a></span>(<span class='id identifier rubyid_error'>error</span>.<span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span>.<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse-instance_method">
  <h3 class='signature '>
    #<strong>parse</strong>(source_buffer)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parses a source buffer and returns the AST.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L44-L54'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='44' data-end='54'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 44</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_source_buffer'>source_buffer</span>)
  <span class='ivar'>@source_buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>
  <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>.<span class='id identifier rubyid_source'>source</span>

  <span class='id identifier rubyid_offset_cache'>offset_cache</span> <span class='op'>=</span> <span class='id identifier rubyid_build_offset_cache'><a href="#build_offset_cache-instance_method" title="Prism::Translation::Parser#build_offset_cache (method)">build_offset_cache</a></span>(<span class='id identifier rubyid_source'>source</span>)
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_unwrap'><a href="#unwrap-instance_method" title="Prism::Translation::Parser#unwrap (method)">unwrap</a></span>(<span class='const'><a href="../../Prism.html" title="Prism (module)">Prism</a></span>.<span class='id identifier rubyid_parse'><a href="../../Prism.html#parse-class_method" title="Prism.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='label'>filepath:</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>version:</span> <span class='id identifier rubyid_convert_for_prism'><a href="#convert_for_prism-instance_method" title="Prism::Translation::Parser#convert_for_prism (method)">convert_for_prism</a></span>(<span class='id identifier rubyid_version'><a href="#version-instance_method" title="Prism::Translation::Parser#version (method)">version</a></span>))<span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)

  <span class='id identifier rubyid_build_ast'><a href="#build_ast-instance_method" title="Prism::Translation::Parser#build_ast (method)">build_ast</a></span>(<span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
<span class='kw'>ensure</span>
  <span class='ivar'>@source_buffer</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_with_comments-instance_method">
  <h3 class='signature '>
    #<strong>parse_with_comments</strong>(source_buffer)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parses a source buffer and returns the AST and the source code comments.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L57-L70'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='57' data-end='70'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 57</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_with_comments'>parse_with_comments</span>(<span class='id identifier rubyid_source_buffer'>source_buffer</span>)
  <span class='ivar'>@source_buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>
  <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>.<span class='id identifier rubyid_source'>source</span>

  <span class='id identifier rubyid_offset_cache'>offset_cache</span> <span class='op'>=</span> <span class='id identifier rubyid_build_offset_cache'><a href="#build_offset_cache-instance_method" title="Prism::Translation::Parser#build_offset_cache (method)">build_offset_cache</a></span>(<span class='id identifier rubyid_source'>source</span>)
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_unwrap'><a href="#unwrap-instance_method" title="Prism::Translation::Parser#unwrap (method)">unwrap</a></span>(<span class='const'><a href="../../Prism.html" title="Prism (module)">Prism</a></span>.<span class='id identifier rubyid_parse'><a href="../../Prism.html#parse-class_method" title="Prism.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='label'>filepath:</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>version:</span> <span class='id identifier rubyid_convert_for_prism'><a href="#convert_for_prism-instance_method" title="Prism::Translation::Parser#convert_for_prism (method)">convert_for_prism</a></span>(<span class='id identifier rubyid_version'><a href="#version-instance_method" title="Prism::Translation::Parser#version (method)">version</a></span>))<span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)

  [
    <span class='id identifier rubyid_build_ast'><a href="#build_ast-instance_method" title="Prism::Translation::Parser#build_ast (method)">build_ast</a></span>(<span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)<span class='comma'>,</span>
    <span class='id identifier rubyid_build_comments'><a href="#build_comments-instance_method" title="Prism::Translation::Parser#build_comments (method)">build_comments</a></span>(<span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_comments'>comments</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  ]
<span class='kw'>ensure</span>
  <span class='ivar'>@source_buffer</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tokenize-instance_method">
  <h3 class='signature '>
    #<strong>tokenize</strong>(source_buffer, recover = false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parses a source buffer and returns the AST, the source code comments, and the tokens emitted by the lexer.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L74-L96'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='74' data-end='96'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 74</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tokenize'>tokenize</span>(<span class='id identifier rubyid_source_buffer'>source_buffer</span><span class='comma'>,</span> <span class='id identifier rubyid_recover'>recover</span> <span class='op'>=</span> <span class='kw'>false</span>)
  <span class='ivar'>@source_buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>
  <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>.<span class='id identifier rubyid_source'>source</span>

  <span class='id identifier rubyid_offset_cache'>offset_cache</span> <span class='op'>=</span> <span class='id identifier rubyid_build_offset_cache'><a href="#build_offset_cache-instance_method" title="Prism::Translation::Parser#build_offset_cache (method)">build_offset_cache</a></span>(<span class='id identifier rubyid_source'>source</span>)
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_unwrap'><a href="#unwrap-instance_method" title="Prism::Translation::Parser#unwrap (method)">unwrap</a></span>(<span class='const'><a href="../../Prism.html" title="Prism (module)">Prism</a></span>.<span class='id identifier rubyid_parse_lex'><a href="../../Prism.html#parse_lex-class_method" title="Prism.parse_lex (method)">parse_lex</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='label'>filepath:</span> <span class='id identifier rubyid_source_buffer'>source_buffer</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>version:</span> <span class='id identifier rubyid_convert_for_prism'><a href="#convert_for_prism-instance_method" title="Prism::Translation::Parser#convert_for_prism (method)">convert_for_prism</a></span>(<span class='id identifier rubyid_version'><a href="#version-instance_method" title="Prism::Translation::Parser#version (method)">version</a></span>))<span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
    <span class='kw'>rescue</span> <span class='op'>::</span><span class='const'>Parser</span><span class='op'>::</span><span class='const'>SyntaxError</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_recover'>recover</span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_program'>program</span><span class='comma'>,</span> <span class='id identifier rubyid_tokens'>tokens</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_value'>value</span>
  <span class='id identifier rubyid_ast'>ast</span> <span class='op'>=</span> <span class='id identifier rubyid_build_ast'><a href="#build_ast-instance_method" title="Prism::Translation::Parser#build_ast (method)">build_ast</a></span>(<span class='id identifier rubyid_program'>program</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>) <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_success?'>success?</span>

  [
    <span class='id identifier rubyid_ast'>ast</span><span class='comma'>,</span>
    <span class='id identifier rubyid_build_comments'><a href="#build_comments-instance_method" title="Prism::Translation::Parser#build_comments (method)">build_comments</a></span>(<span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_comments'>comments</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)<span class='comma'>,</span>
    <span class='id identifier rubyid_build_tokens'><a href="#build_tokens-instance_method" title="Prism::Translation::Parser#build_tokens (method)">build_tokens</a></span>(<span class='id identifier rubyid_tokens'>tokens</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  ]
<span class='kw'>ensure</span>
  <span class='ivar'>@source_buffer</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="try_declare_numparam-instance_method">
  <h3 class='signature '>
    #<strong>try_declare_numparam</strong>(node)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Since prism resolves num params for us, we don’t need to support this kind of logic here.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L100-L102'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='100' data-end='102'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_try_declare_numparam'>try_declare_numparam</span>(<span class='id identifier rubyid_node'>node</span>)
  <span class='id identifier rubyid_node'>node</span>.<span class='id identifier rubyid_children'>children</span>[<span class='int'>0</span>].<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A_[1-9]\z</span><span class='regexp_end'>/</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unwrap-instance_method">
  <h3 class='signature priv'>
    #<strong>unwrap</strong>(result, offset_cache)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If there was a error generated during the parse, then raise an appropriate syntax error. Otherwise return the result.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L217-L230'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='217' data-end='230'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 217</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unwrap'>unwrap</span>(<span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_errors'>errors</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_error'>error</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_error?'><a href="#valid_error%3F-instance_method" title="Prism::Translation::Parser#valid_error? (method)">valid_error?</a></span>(<span class='id identifier rubyid_error'>error</span>)
    <span class='id identifier rubyid_diagnostics'>diagnostics</span>.<span class='id identifier rubyid_process'>process</span>(<span class='id identifier rubyid_error_diagnostic'><a href="#error_diagnostic-instance_method" title="Prism::Translation::Parser#error_diagnostic (method)">error_diagnostic</a></span>(<span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>))
  <span class='kw'>end</span>

  <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_warnings'>warnings</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_warning'>warning</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_warning?'><a href="#valid_warning%3F-instance_method" title="Prism::Translation::Parser#valid_warning? (method)">valid_warning?</a></span>(<span class='id identifier rubyid_warning'>warning</span>)
    <span class='id identifier rubyid_diagnostic'>diagnostic</span> <span class='op'>=</span> <span class='id identifier rubyid_warning_diagnostic'><a href="#warning_diagnostic-instance_method" title="Prism::Translation::Parser#warning_diagnostic (method)">warning_diagnostic</a></span>(<span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
    <span class='id identifier rubyid_diagnostics'>diagnostics</span>.<span class='id identifier rubyid_process'>process</span>(<span class='id identifier rubyid_diagnostic'>diagnostic</span>) <span class='kw'>if</span> <span class='id identifier rubyid_diagnostic'>diagnostic</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="valid_error?-instance_method">
  <h3 class='signature priv'>
    #<strong>valid_error?</strong>(error)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This is a hook to allow consumers to disable some errors if they don’t want them to block creating the syntax tree.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L108-L110'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='108' data-end='110'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 108</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_valid_error?'>valid_error?</span>(<span class='id identifier rubyid_error'>error</span>)
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="valid_warning?-instance_method">
  <h3 class='signature priv'>
    #<strong>valid_warning?</strong>(warning)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This is a hook to allow consumers to disable some warnings if they don’t want them to block creating the syntax tree.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L114-L116'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='114' data-end='116'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 114</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_valid_warning?'>valid_warning?</span>(<span class='id identifier rubyid_warning'>warning</span>)
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="version-instance_method">
  <h3 class='signature nodoc'>
    #<strong>version</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L31-L33'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='31' data-end='33'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 31</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_version'>version</span> <span class='comment'># :nodoc:
</span>  <span class='int'>34</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="warning_diagnostic-instance_method">
  <h3 class='signature priv'>
    #<strong>warning_diagnostic</strong>(warning, offset_cache)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Build a diagnostic from the given prism parse warning.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L190-L213'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='190' data-end='213'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 190</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_warning_diagnostic'>warning_diagnostic</span>(<span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)
  <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span> <span class='op'>=</span> <span class='id identifier rubyid_build_range'><a href="#build_range-instance_method" title="Prism::Translation::Parser#build_range (method)">build_range</a></span>(<span class='id identifier rubyid_warning'>warning</span>.<span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='id identifier rubyid_offset_cache'>offset_cache</span>)

  <span class='kw'>case</span> <span class='id identifier rubyid_warning'>warning</span>.<span class='id identifier rubyid_type'>type</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_first_argument_plus'>ambiguous_first_argument_plus</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix'>ambiguous_prefix</span><span class='comma'>,</span> { <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_first_argument_minus'>ambiguous_first_argument_minus</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix'>ambiguous_prefix</span><span class='comma'>,</span> { <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix_ampersand'>ambiguous_prefix_ampersand</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix'>ambiguous_prefix</span><span class='comma'>,</span> { <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix_star'>ambiguous_prefix_star</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix'>ambiguous_prefix</span><span class='comma'>,</span> { <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix_star_star'>ambiguous_prefix_star_star</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_prefix'>ambiguous_prefix</span><span class='comma'>,</span> { <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>**</span><span class='tstring_end'>&quot;</span></span> }<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_slash'>ambiguous_slash</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ambiguous_regexp'>ambiguous_regexp</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dot_dot_dot_eol'>dot_dot_dot_eol</span>
    <span class='const'><a href="#Diagnostic-constant" title="Prism::Translation::Parser::Diagnostic (constant)">Diagnostic</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_triple_dot_at_eol'>triple_dot_at_eol</span><span class='comma'>,</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span><span class='comma'>,</span> [])
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_duplicated_hash_key'>duplicated_hash_key</span>
    <span class='comment'># skip, parser does this on its own
</span>  <span class='kw'>else</span>
    <span class='const'><a href="Parser/PrismDiagnostic.html" title="Prism::Translation::Parser::PrismDiagnostic (class)">PrismDiagnostic</a></span>.<span class='id identifier rubyid_new'><a href="Parser/PrismDiagnostic.html#new-class_method" title="Prism::Translation::Parser::PrismDiagnostic.new (method)">new</a></span>(<span class='id identifier rubyid_warning'>warning</span>.<span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span><span class='comma'>,</span> <span class='id identifier rubyid_warning'>warning</span>.<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_diagnostic_location'>diagnostic_location</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="yyerror-instance_method">
  <h3 class='signature nodoc'>
    #<strong>yyerror</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/prism/translation/parser.rb#L40-L41'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='40' data-end='41'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/prism/translation/parser.rb', line 40</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_yyerror'>yyerror</span> <span class='comment'># :nodoc:
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>