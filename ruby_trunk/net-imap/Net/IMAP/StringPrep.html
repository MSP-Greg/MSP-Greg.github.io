<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Net::IMAP::StringPrep &mdash; net-imap  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Net::IMAP::StringPrep",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Ruby-master</a> &raquo; 
      <a href='../../'>net-imap</a> &raquo; 
      <a href='../../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../../Net.html" title="Net (module)">Net</a> &raquo; 
        <a href="../IMAP.html" title="Net::IMAP (class)">IMAP</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>StringPrep&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Net::IMAP::StringPrep</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="StringPrep/NamePrep.html" title="Net::IMAP::StringPrep::NamePrep (module)"><code>NamePrep</code></a>,
        <a href="StringPrep/SASLprep.html" title="Net::IMAP::StringPrep::SASLprep (module)"><code>SASLprep</code></a>,
        <a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)"><code>Tables</code></a>,
        <a href="StringPrep/Trace.html" title="Net::IMAP::StringPrep::Trace (module)"><code>Trace</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="StringPrep/BidiStringError.html" title="Net::IMAP::StringPrep::BidiStringError (class)"><code>BidiStringError</code></a>,
        <a href="StringPrep/ProhibitedCodepoint.html" title="Net::IMAP::StringPrep::ProhibitedCodepoint (class)"><code>ProhibitedCodepoint</code></a>,
        <a href="StringPrep/StringPrepError.html" title="Net::IMAP::StringPrep::StringPrepError (class)"><code>StringPrepError</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep.rb#L11'>lib/net/imap/stringprep.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep/nameprep.rb#L5'>lib/net/imap/stringprep/nameprep.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep/saslprep.rb#L5'>lib/net/imap/stringprep/saslprep.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep/saslprep_tables.rb#L7'>lib/net/imap/stringprep/saslprep_tables.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep/tables.rb#L7'>lib/net/imap/stringprep/tables.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep/trace.rb#L5'>lib/net/imap/stringprep/trace.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Regexps and utility methods for implementing stringprep profiles.  The StringPrep algorithm is defined by <a href="https://www.rfc-editor.org/rfc/rfc3454.html" target="_parent" title="RFC-3454">RFC-3454</a>.  Each codepoint table defined in the RFC-3454 appendices is matched by a Regexp defined in this module.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#[]-class_method" title=".[] (class method)">.<strong>[]</strong>(table)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a Regexp matching the given <code>table</code> name.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#check_bidi!-class_method" title=".check_bidi! (class method)">.<strong>check_bidi!</strong>(string, c_8: false, profile: nil)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks that <code>string</code> obeys all of the “Bidirectional Characters” requirements in RFC-3454, §6:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#check_prohibited!-class_method" title=".check_prohibited! (class method)">.<strong>check_prohibited!</strong>(string, *tables, bidi: false, unassigned: &quot;A.1&quot;, stored: false, profile: nil)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks <code>string</code> for any codepoint in <code>tables</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#map_tables!-class_method" title=".map_tables! (class method)">.<strong>map_tables!</strong>(string, *tables)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#stringprep-class_method" title=".stringprep (class method)">.<strong>stringprep</strong>(string, maps:, normalization:, prohibited:, **opts)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>&gt;&gt;&gt;.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="[]-class_method">
  <h3 class='signature  first'>
    .<strong>[]</strong>(table)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a Regexp matching the given <code>table</code> name.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep.rb#L49-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='49' data-end='51'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/stringprep.rb', line 49</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='op'>[]</span>(<span class='id identifier rubyid_table'>table</span>)
  <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#REGEXPS-constant" title="Net::IMAP::StringPrep::Tables::REGEXPS (constant)">REGEXPS</a></span>.<span class='id identifier rubyid_fetch'><a href="../IMAP.html#fetch-instance_method" title="Net::IMAP#fetch (method)">fetch</a></span>(<span class='id identifier rubyid_table'>table</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_bidi!-class_method">
  <h3 class='signature private'>
    .<strong>check_bidi!</strong>(string, c_8: false, profile: nil)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Checks that <code>string</code> obeys all of the “Bidirectional Characters” requirements in RFC-3454, §6:</p>
<ul><li>
<p>The characters in <a href=“&quot;C.8&quot;”>StringPrep</a> MUST be prohibited</p>
</li><li>
<p>If a string contains any RandALCat character, the string MUST NOT contain any LCat character.</p>
</li><li>
<p>If a string contains any RandALCat character, a RandALCat character MUST be the first character of the string, and a RandALCat character MUST be the last character of the string.</p>
</li></ul>

<p>This is usually combined with <a href="#check_prohibited!-instance_method" title="Net::IMAP::StringPrep#check_prohibited! (method)">#check_prohibited!</a>, so table “C.8” is only checked when <code>c_8: true</code>.</p>

<p>Raises either <a href="StringPrep/ProhibitedCodepoint.html" title="Net::IMAP::StringPrep::ProhibitedCodepoint (class)"><code>StringPrep::ProhibitedCodepoint</code></a> or <a href="StringPrep/BidiStringError.html" title="Net::IMAP::StringPrep::BidiStringError (class)"><code>StringPrep::BidiStringError</code></a> unless all requirements are met.  <code>profile</code> is an optional string which will be added to any exception that is raised (it does not affect behavior).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep.rb#L144-L155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='144' data-end='155'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/stringprep.rb', line 144</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_bidi!'>check_bidi!</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>c_8:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>profile:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_check_prohibited!'><a href="#check_prohibited!-class_method" title="Net::IMAP::StringPrep.check_prohibited! (method)">check_prohibited!</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C.8</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>profile:</span> <span class='id identifier rubyid_profile'>profile</span>) <span class='kw'>if</span> <span class='id identifier rubyid_c_8'>c_8</span>
  <span class='kw'>if</span> <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#BIDI_FAILS_REQ2-constant" title="Net::IMAP::StringPrep::Tables::BIDI_FAILS_REQ2 (constant)">BIDI_FAILS_REQ2</a></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_string'>string</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="StringPrep/BidiStringError.html" title="Net::IMAP::StringPrep::BidiStringError (class)">BidiStringError</a></span>.<span class='id identifier rubyid_new'><a href="StringPrep/StringPrepError.html#new-class_method" title="Net::IMAP::StringPrep::StringPrepError.new (method)">new</a></span>(
      <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#BIDI_DESC_REQ2-constant" title="Net::IMAP::StringPrep::Tables::BIDI_DESC_REQ2 (constant)">BIDI_DESC_REQ2</a></span><span class='comma'>,</span> <span class='label'>string:</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>profile:</span> <span class='id identifier rubyid_profile'>profile</span><span class='comma'>,</span>
    )
  <span class='kw'>elsif</span> <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#BIDI_FAILS_REQ3-constant" title="Net::IMAP::StringPrep::Tables::BIDI_FAILS_REQ3 (constant)">BIDI_FAILS_REQ3</a></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_string'>string</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="StringPrep/BidiStringError.html" title="Net::IMAP::StringPrep::BidiStringError (class)">BidiStringError</a></span>.<span class='id identifier rubyid_new'><a href="StringPrep/StringPrepError.html#new-class_method" title="Net::IMAP::StringPrep::StringPrepError.new (method)">new</a></span>(
      <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#BIDI_DESC_REQ3-constant" title="Net::IMAP::StringPrep::Tables::BIDI_DESC_REQ3 (constant)">BIDI_DESC_REQ3</a></span><span class='comma'>,</span> <span class='label'>string:</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>profile:</span> <span class='id identifier rubyid_profile'>profile</span><span class='comma'>,</span>
    )
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_prohibited!-class_method">
  <h3 class='signature private'>
    .<strong>check_prohibited!</strong>(string, *tables, bidi: false, unassigned: &quot;A.1&quot;, stored: false, profile: nil)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Checks <code>string</code> for any codepoint in <code>tables</code>. Raises a <a href="StringPrep/ProhibitedCodepoint.html" title="Net::IMAP::StringPrep::ProhibitedCodepoint (class)"><code>StringPrep::ProhibitedCodepoint</code></a> describing the first matching table.</p>

<p>Also checks bidirectional characters, when <code>bidi: true</code>, which may raise a <a href="StringPrep/BidiStringError.html" title="Net::IMAP::StringPrep::BidiStringError (class)"><code>StringPrep::BidiStringError</code></a>.</p>

<p><code>profile</code> is an optional string which will be added to any exception that is raised (it does not affect behavior).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep.rb#L104-L126'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='104' data-end='126'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/stringprep.rb', line 104</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_prohibited!'>check_prohibited!</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span>
                      <span class='op'>*</span><span class='id identifier rubyid_tables'>tables</span><span class='comma'>,</span>
                      <span class='label'>bidi:</span> <span class='kw'>false</span><span class='comma'>,</span>
                      <span class='label'>unassigned:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A.1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='label'>stored:</span> <span class='kw'>false</span><span class='comma'>,</span>
                      <span class='label'>profile:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_tables'>tables</span>  <span class='op'>=</span> <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#TITLES-constant" title="Net::IMAP::StringPrep::Tables::TITLES (constant)">TITLES</a></span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_grep'>grep</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^C</span><span class='regexp_end'>/</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_tables'>tables</span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_tables'>tables</span> <span class='op'>|=</span> [<span class='id identifier rubyid_unassigned'>unassigned</span>] <span class='kw'>if</span> <span class='id identifier rubyid_stored'>stored</span>
  <span class='id identifier rubyid_tables'>tables</span> <span class='op'>|=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>C.8</span><span class='tstring_end'>]</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_bidi'>bidi</span>
  <span class='id identifier rubyid_table'>table</span>   <span class='op'>=</span> <span class='id identifier rubyid_tables'>tables</span>.<span class='id identifier rubyid_find'>find</span> {<span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_t'>t</span>
    <span class='kw'>when</span> <span class='const'>String</span> <span class='kw'>then</span> <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#REGEXPS-constant" title="Net::IMAP::StringPrep::Tables::REGEXPS (constant)">REGEXPS</a></span>.<span class='id identifier rubyid_fetch'><a href="../IMAP.html#fetch-instance_method" title="Net::IMAP#fetch (method)">fetch</a></span>(<span class='id identifier rubyid_t'>t</span>).<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_string'>string</span>)
    <span class='kw'>when</span> <span class='const'>Regexp</span> <span class='kw'>then</span> <span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_string'>string</span>)
    <span class='kw'>else</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>only table names and regexps can be checked</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  }
  <span class='kw'>if</span> <span class='id identifier rubyid_table'>table</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="StringPrep/ProhibitedCodepoint.html" title="Net::IMAP::StringPrep::ProhibitedCodepoint (class)">ProhibitedCodepoint</a></span>.<span class='id identifier rubyid_new'><a href="StringPrep/ProhibitedCodepoint.html#new-class_method" title="Net::IMAP::StringPrep::ProhibitedCodepoint.new (method)">new</a></span>(
      <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='label'>string:</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>profile:</span> <span class='id identifier rubyid_profile'>profile</span>
    )
  <span class='kw'>end</span>
  <span class='id identifier rubyid_check_bidi!'><a href="#check_bidi!-class_method" title="Net::IMAP::StringPrep.check_bidi! (method)">check_bidi!</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>profile:</span> <span class='id identifier rubyid_profile'>profile</span>) <span class='kw'>if</span> <span class='id identifier rubyid_bidi'>bidi</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="map_tables!-class_method">
  <h3 class='signature private'>
    .<strong>map_tables!</strong>(string, *tables)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep.rb#L88-L94'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='88' data-end='94'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/stringprep.rb', line 88</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_map_tables!'>map_tables!</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_tables'>tables</span>)
  <span class='id identifier rubyid_tables'>tables</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span>
    <span class='id identifier rubyid_regexp'>regexp</span><span class='comma'>,</span> <span class='id identifier rubyid_replacements'>replacements</span> <span class='op'>=</span> <span class='const'><a href="StringPrep/Tables.html" title="Net::IMAP::StringPrep::Tables (module)">Tables</a></span><span class='op'>::</span><span class='const'><a href="StringPrep/Tables.html#MAPPINGS-constant" title="Net::IMAP::StringPrep::Tables::MAPPINGS (constant)">MAPPINGS</a></span>.<span class='id identifier rubyid_fetch'><a href="../IMAP.html#fetch-instance_method" title="Net::IMAP#fetch (method)">fetch</a></span>(<span class='id identifier rubyid_table'>table</span>)
    <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>(<span class='id identifier rubyid_regexp'>regexp</span><span class='comma'>,</span> <span class='id identifier rubyid_replacements'>replacements</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_string'>string</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stringprep-class_method">
  <h3 class='signature private'>
    .<strong>stringprep</strong>(string, maps:, normalization:, prohibited:, **opts)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<blockquote><ol><li>
<p>Map – For each character in the input, check if it has a mapping and, if so, replace it with its mapping.  This is described in section 3.</p>
</li><li>
<p>Normalize – Possibly normalize the result of step 1 using Unicode normalization.  This is described in section 4.</p>
</li><li>
<p>Prohibit – Check for any characters that are not allowed in the output.  If any are found, return an error.  This is described in section 5.</p>
</li><li>
<p>Check bidi – Possibly check for right-to-left characters, and if any are found, make sure that the whole string satisfies the requirements for bidirectional strings.  If the string does not satisfy the requirements for bidirectional strings, return an error.  This is described in section 6.</p>
</li></ol>

<p>The above steps MUST be performed in the order given to comply with this specification.</p>
</blockquote>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.4.10/lib/net/imap/stringprep.rb#L76-L86'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='76' data-end='86'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/stringprep.rb', line 76</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stringprep'>stringprep</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span>
               <span class='label'>maps:</span><span class='comma'>,</span>
               <span class='label'>normalization:</span><span class='comma'>,</span>
               <span class='label'>prohibited:</span><span class='comma'>,</span>
               <span class='op'>**</span><span class='id identifier rubyid_opts'>opts</span>)
  <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># also dups (and raises invalid encoding)
</span>  <span class='id identifier rubyid_map_tables!'><a href="#map_tables!-class_method" title="Net::IMAP::StringPrep.map_tables! (method)">map_tables!</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_maps'>maps</span>)                     <span class='kw'>if</span> <span class='id identifier rubyid_maps'>maps</span>
  <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_unicode_normalize!'>unicode_normalize!</span>(<span class='id identifier rubyid_normalization'>normalization</span>)       <span class='kw'>if</span> <span class='id identifier rubyid_normalization'>normalization</span>
  <span class='id identifier rubyid_check_prohibited!'><a href="#check_prohibited!-class_method" title="Net::IMAP::StringPrep.check_prohibited! (method)">check_prohibited!</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_prohibited'>prohibited</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opts'>opts</span>) <span class='kw'>if</span> <span class='id identifier rubyid_prohibited'>prohibited</span>
  <span class='id identifier rubyid_string'>string</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>