<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Net::IMAP::SASL::GS2Header &mdash; net-imap  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Net::IMAP::SASL::GS2Header",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../../'>Ruby-master</a> &raquo; 
      <a href='../../../'>net-imap</a> &raquo; 
      <a href='../../../_index.html#alpha_G'>Index (G)</a> &raquo; 
        <a href="../../../Net.html" title="Net (module)">Net</a> &raquo; 
        <a href="../../IMAP.html" title="Net::IMAP (class)">IMAP</a> &raquo; 
        <a href="../SASL.html" title="Net::IMAP::SASL (module)">SASL</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>GS2Header&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Net::IMAP::SASL::GS2Header</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="OAuthAuthenticator.html" title="Net::IMAP::SASL::OAuthAuthenticator (class)"><code>OAuthAuthenticator</code></a>,
          <a href="OAuthBearerAuthenticator.html" title="Net::IMAP::SASL::OAuthBearerAuthenticator (class)"><code>OAuthBearerAuthenticator</code></a>,
          <a href="ScramAuthenticator.html" title="Net::IMAP::SASL::ScramAuthenticator (class)"><code>ScramAuthenticator</code></a>,
          <a href="ScramSHA1Authenticator.html" title="Net::IMAP::SASL::ScramSHA1Authenticator (class)"><code>ScramSHA1Authenticator</code></a>,
          <a href="ScramSHA256Authenticator.html" title="Net::IMAP::SASL::ScramSHA256Authenticator (class)"><code>ScramSHA256Authenticator</code></a>
      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.10/lib/net/imap/sasl/gs2_header.rb#L20'>lib/net/imap/sasl/gs2_header.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Originally defined for the GS2 mechanism family in <a href="https://www.rfc-editor.org/rfc/rfc5801">RFC5801</a>, several different mechanisms start with a GS2 header:</p>
<ul><li>
<p><code>GS2-*</code>       — <a href="https://www.rfc-editor.org/rfc/rfc5801">RFC5801</a></p>
</li><li>
<p><code>SCRAM-*</code>     — <a href="https://www.rfc-editor.org/rfc/rfc5802">RFC5802</a> (ScramAuthenticator)</p>
</li><li>
<p><code>SAML20</code>      — <a href="https://www.rfc-editor.org/rfc/rfc6595">RFC6595</a></p>
</li><li>
<p><code>OPENID20</code>    — <a href="https://www.rfc-editor.org/rfc/rfc6616">RFC6616</a></p>
</li><li>
<p><code>OAUTH10A</code>    — <a href="https://www.rfc-editor.org/rfc/rfc7628">RFC7628</a></p>
</li><li>
<p><code>OAUTHBEARER</code> — <a href="https://www.rfc-editor.org/rfc/rfc7628">RFC7628</a> (OAuthBearerAuthenticator)</p>
</li></ul>

<p>Classes that include this module must implement <code>#authzid</code>.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='NO_NULL_CHARS-constant' class='summary_signature nodoc'>NO_NULL_CHARS =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.10/lib/net/imap/sasl/gs2_header.rb#L21-L21'># File 'lib/net/imap/sasl/gs2_header.rb', line 21</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[^\x00]+\z</span><span class='regexp_end'>/u</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='RFC5801_SASLNAME-constant' class='summary_signature'>RFC5801_SASLNAME =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Matches <a href="https://www.rfc-editor.org/rfc/rfc5801#section-4" target="_parent" title="RFC5801 §4">RFC5801 §4</a> <code>saslname</code>.  The output from gs2_saslname_encode matches this Regexp.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.10/lib/net/imap/sasl/gs2_header.rb#L26-L26'># File 'lib/net/imap/sasl/gs2_header.rb', line 26</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?:[^,=\x00]|=2C|=3D)+\z</span><span class='regexp_end'>/u</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature mf'>
      <a href="#gs2_saslname_encode-class_method" title=".gs2_saslname_encode (class method)">.<strong>gs2_saslname_encode</strong>(str)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Encodes <code>str</code> to match <a href="#RFC5801_SASLNAME-constant" title="Net::IMAP::SASL::GS2Header::RFC5801_SASLNAME (constant)">RFC5801_SASLNAME</a>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#gs2_authzid-instance_method" title="#gs2_authzid (instance method)">#<strong>gs2_authzid</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The <a href="https://www.rfc-editor.org/rfc/rfc5801#section-4" target="_parent" title="RFC5801 §4">RFC5801 §4</a> <code>gs2-authzid</code> header, when <code>#authzid</code> is not empty.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gs2_cb_flag-instance_method" title="#gs2_cb_flag (instance method)">#<strong>gs2_cb_flag</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The <a href="https://www.rfc-editor.org/rfc/rfc5801#section-4" target="_parent" title="RFC5801 §4">RFC5801 §4</a> <code>gs2-cb-flag</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gs2_header-instance_method" title="#gs2_header (instance method)">#<strong>gs2_header</strong>  </a>
      (also: #cbind_input)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The <a href="https://www.rfc-editor.org/rfc/rfc5801#section-4" target="_parent" title="RFC5801 §4">RFC5801 §4</a> <code>gs2-header</code>, which prefixes the <code>#initial_client_response</code>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="gs2_saslname_encode-class_method">
  <h3 class='signature private first'>
    .<strong>gs2_saslname_encode</strong>(str)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Encodes <code>str</code> to match <a href="#RFC5801_SASLNAME-constant" title="Net::IMAP::SASL::GS2Header::RFC5801_SASLNAME (constant)">RFC5801_SASLNAME</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.10/lib/net/imap/sasl/gs2_header.rb#L67-L75'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='67' data-end='75'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/sasl/gs2_header.rb', line 67</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gs2_saslname_encode'>gs2_saslname_encode</span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>)
  <span class='comment'># Regexp#match raises &quot;invalid byte sequence&quot; for invalid UTF-8
</span>  <span class='const'><a href="#NO_NULL_CHARS-constant" title="Net::IMAP::SASL::GS2Header::NO_NULL_CHARS (constant)">NO_NULL_CHARS</a></span>.<span class='id identifier rubyid_match'>match</span> <span class='id identifier rubyid_str'>str</span> <span class='kw'>or</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid saslname: %p</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> [<span class='id identifier rubyid_str'>str</span>]
  <span class='id identifier rubyid_str'>str</span>
    .<span class='id identifier rubyid_gsub'>gsub</span>(<span class='CHAR'>?=</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=3D</span><span class='tstring_end'>&quot;</span></span>)
    .<span class='id identifier rubyid_gsub'>gsub</span>(<span class='CHAR'>?,</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=2C</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="gs2_authzid-instance_method">
  <h3 class='signature  first'>
    #<strong>gs2_authzid</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The <a href="https://www.rfc-editor.org/rfc/rfc5801#section-4" target="_parent" title="RFC5801 §4">RFC5801 §4</a> <code>gs2-authzid</code> header, when <code>#authzid</code> is not empty.</p>

<p>If <code>#authzid</code> is empty or <code>nil</code>, an empty string is returned.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.10/lib/net/imap/sasl/gs2_header.rb#L59-L62'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='59' data-end='62'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/sasl/gs2_header.rb', line 59</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gs2_authzid'>gs2_authzid</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_authzid'>authzid</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_authzid'>authzid</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gs2_saslname_encode'><a href="#gs2_saslname_encode-class_method" title="Net::IMAP::SASL::GS2Header.gs2_saslname_encode (method)">gs2_saslname_encode</a></span>(<span class='id identifier rubyid_authzid'>authzid</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gs2_cb_flag-instance_method">
  <h3 class='signature '>
    #<strong>gs2_cb_flag</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The <a href="https://www.rfc-editor.org/rfc/rfc5801#section-4" target="_parent" title="RFC5801 §4">RFC5801 §4</a> <code>gs2-cb-flag</code>:</p>
<dl class="rdoc-list note-list"><dt>“<code>n</code>”</dt>
<dd>
<p>The client doesn’t support channel binding.</p>
</dd><dt>“<code>y</code>”</dt>
<dd>
<p>The client does support channel binding but thinks the server does not.</p>
</dd><dt>“<code>p</code>”</dt>
<dd>
<p>The client requires channel binding. The selected channel binding follows “<code>p=</code>”.</p>
</dd></dl>

<p>The default always returns “<code>n</code>”.  A mechanism that supports channel binding must override this method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.10/lib/net/imap/sasl/gs2_header.rb#L53-L53'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='53' data-end='53'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/sasl/gs2_header.rb', line 53</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gs2_cb_flag'>gs2_cb_flag</span><span class='semicolon'>;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gs2_header-instance_method">
  <h3 class='signature '>
    #<strong>gs2_header</strong>  
    <span class='aliases'>Also known as: <span class='names'>#cbind_input</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The <a href="https://www.rfc-editor.org/rfc/rfc5801#section-4" target="_parent" title="RFC5801 §4">RFC5801 §4</a> <code>gs2-header</code>, which prefixes the <code>#initial_client_response</code>.</p>

<blockquote>
<p><em>Note: the actual GS2 header includes an optional flag to indicate that the GSS mechanism is not “standard”, but since all of the SASL mechanisms using GS2 are “standard”, we don’t include that flag.  A class for a nonstandard GSSAPI mechanism should prefix with “<code>F,</code>”.</em></p>
</blockquote>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.10/lib/net/imap/sasl/gs2_header.rb#L37-L39'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='37' data-end='39'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/sasl/gs2_header.rb', line 37</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gs2_header'>gs2_header</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gs2_cb_flag'><a href="#gs2_cb_flag-instance_method" title="Net::IMAP::SASL::GS2Header#gs2_cb_flag (method)">gs2_cb_flag</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gs2_authzid'><a href="#gs2_authzid-instance_method" title="Net::IMAP::SASL::GS2Header#gs2_authzid (method)">gs2_authzid</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>