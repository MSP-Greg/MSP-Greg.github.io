<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ERB &mdash; erb  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ERB",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>erb</a> &raquo; 
      <a href='_index.html#alpha_E'>Index (E)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ERB&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ERB</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="ERB/DefMethod.html" title="ERB::DefMethod (module)"><code>DefMethod</code></a>,
        <a href="ERB/Escape.html" title="ERB::Escape (module)"><code>Escape</code></a>,
        <a href="ERB/Util.html" title="ERB::Util (module)"><code>Util</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="ERB/Compiler.html" title="ERB::Compiler (class)"><code>Compiler</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L780'>lib/erb.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/erb/escape/escape.c#L108'>ext/erb/escape/escape.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb/version.rb#L2'>lib/erb/version.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Class <strong>ERB</strong> (the name stands for <strong>Embedded Ruby</strong>)
is an easy-to-use, but also very powerful, <a href="https://en.wikipedia.org/wiki/Template_processor">template processor</a>.</p>

<p>==== Usage</p>

<p>Before you can use \ERB, you must first require it
(examples on this page assume that this has been done):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>==== In Brief</p>

<p>Here&#39;s how \ERB works:</p>

<ul>
<li>You can create a <em>template</em>: a plain-text string that includes specially formatted <em>tags</em>..</li>
<li>You can create an \ERB object to store the template.</li>
<li>You can call instance method <a href="#result-instance_method" title="ERB#result (method)">#result</a> to get the <em>result</em>.</li>
</ul>

<p>\ERB supports tags of three kinds:</p>

<ul>
<li><p><a href="rdoc-ref:ERB@Expression+Tags">Expression tags</a>:
each begins with <code>'<%'</code>, ends with <code>&#39;%&gt;&#39;</code>; contains a Ruby expression;
in the result, the value of the expression replaces the entire tag:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The magic word is &lt;%= magic_word %&gt;.</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_magic_word'>magic_word</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>) <span class='comment'># =&gt; &quot;The magic word is xyzzy.&quot;</span></code></pre>

<p>The above call to #result passes argument <code>binding</code>,
which contains the binding of variable <code>magic_word</code> to its string value <code>'xyzzy'</code>.</p>

<p>The below call to #result need not pass a binding,
because its expression <code>Date::DAYNAMES</code> is globally defined.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Today is &lt;%= Date::DAYNAMES[Date.today.wday] %&gt;.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='comment'># =&gt; &quot;Today is Monday.&quot;</span></code></pre></li>
<li><p><a href="rdoc-ref:ERB@Execution+Tags">Execution tags</a>:
each begins with <code>'<%='</code>, ends with <code>&#39;%&gt;&#39;</code>; contains Ruby code to be executed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;% File.write(&quot;t.txt&quot;, &quot;Some stuff.&quot;) %&gt;</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Some stuff.&quot;</span></code></pre></li>
<li><p><a href="rdoc-ref:ERB@Comment+Tags">Comment tags</a>:
each begins with <code>'<%#'</code>, ends with <code>&#39;%&gt;&#39;</code>; contains comment text;
in the result, the entire tag is omitted.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Some stuff;&lt;%# Note to self: figure out what the stuff is. %&gt; more stuff.</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='comment'># =&gt; &quot;Some stuff; more stuff.&quot;</span></code></pre></li>
</ul>

<p>==== Some Simple Examples</p>

<p>Here&#39;s a simple example of \ERB in action:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The time is &lt;%= {Time.now} %&gt;.</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The time is 2025-09-09 10:49:26 -0500.</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Details:</p>

<ol>
<li>A plain-text string is assigned to variable <code>template</code>.
Its embedded <a href="rdoc-ref:ERB@Expression+Tags">expression tag</a> <code>&#39;&lt;%= Time.now %&gt;&#39;</code> includes a Ruby expression, <code>Time.now</code>.</li>
<li>The string is put into a new \ERB object, and stored in variable <code>erb</code>.</li>
<li>Method call <code>erb.result</code> generates a string that contains the run-time value of <code>Time.now</code>,
as computed at the time of the call.</li>
</ol>

<p>The
\ERB object may be re-used:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The time is 2025-09-09 10:49:33 -0500.</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Another example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The magic word is &lt;%= magic_word %&gt;.</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_magic_word'>magic_word</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The magic word is abracadabra.</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Details:</p>

<ol>
<li>As before, a plain-text string is assigned to variable <code>template</code>.
Its embedded <a href="rdoc-ref:ERB@Expression+Tags">expression tag</a> <code>&#39;&lt;%= magic_word %&gt;&#39;</code> has a variable <em>name</em>, <code>magic_word</code>.</li>
<li>The string is put into a new \ERB object, and stored in variable <code>erb</code>;
note that <code>magic_word</code> need not be defined before the \ERB object is created.</li>
<li><code>magic_word = &#39;abracadabra&#39;</code> assigns a value to variable <code>magic_word</code>.</li>
<li>Method call <code>erb.result(binding)</code> generates a string
that contains the <em>value</em> of <code>magic_word</code>.</li>
</ol>

<p>As before, the \ERB object may be re-used:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_magic_word'>magic_word</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The magic word is xyzzy.</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>==== Bindings</p>

<p>A call to method <a href="#result-instance_method" title="ERB#result (method)">#result</a>, which produces the formatted result string,
requires a <a href="https://docs.ruby-lang.org/en/master/Binding.html">Binding object</a> as its argument.</p>

<p>The binding object provides the bindings for expressions in <a href="rdoc-ref:ERB@Expression+Tags">expression tags</a>.</p>

<p>There are three ways to provide the required binding:</p>

<ul>
<li><a href="rdoc-ref:ERB@Default+Binding">Default binding</a>.</li>
<li><a href="rdoc-ref:ERB@Local+Binding">Local binding</a>.</li>
<li><a href="rdoc-ref:ERB@Augmented+Binding">Augmented binding</a></li>
</ul>

<p>===== Default Binding</p>

<p>When you pass no <code>binding</code> argument to method <a href="#result-instance_method" title="ERB#result (method)">#result</a>,
the method uses its default binding: the one returned by method <a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">#new_toplevel</a>.
This binding has the bindings defined by Ruby itself,
which are those for Ruby&#39;s constants and variables.</p>

<p>That binding is sufficient for an expression tag that refers only to Ruby&#39;s constants and variables;
these expression tags refer only to Ruby&#39;s global constant <code>RUBY_COPYRIGHT</code> and global variable <code>$0</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>The Ruby copyright is &lt;%= {RUBY_COPYRIGHT.inspect} %&gt;.
The current process is &lt;%= $0 %&gt;.
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_puts'>puts</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='const'>The</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_copyright'>copyright</span> <span class='id identifier rubyid_is'>is</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby - Copyright (C) 1993-2025 Yukihiro Matsumoto</span><span class='tstring_end'>&quot;</span></span>.
<span class='const'>The</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_process'>process</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_irb'>irb</span>.</code></pre>

<p>(The current process is <code>irb</code> because that&#39;s where we&#39;re doing these examples!)</p>

<p>===== Local Binding</p>

<p>The default binding is <em>not</em> sufficient for an expression
that refers to a a constant or variable that is not defined there:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Foo</span> <span class='op'>=</span> <span class='int'>1</span> <span class='comment'># Defines local constant Foo.
</span><span class='id identifier rubyid_foo'>foo</span> <span class='op'>=</span> <span class='int'>2</span> <span class='comment'># Defines local variable foo.
</span><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>The current value of constant Foo is &lt;%= Foo %&gt;.
The current value of variable foo is &lt;%= foo %&gt;.
The Ruby copyright is &lt;%= {RUBY_COPYRIGHT.inspect} %&gt;.
The current process is &lt;%= $0 %&gt;.
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)</code></pre>

<p>This call below raises <code>NameError</code> because although <code>Foo</code> and <code>foo</code> are defined locally,
they are not defined in the default binding:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='comment'># Raises NameError.</span></code></pre>

<p>To make the locally-defined constants and variables available,
you can call <a href="#result-instance_method" title="ERB#result (method)">#result</a> with the local binding:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)
<span class='const'>The</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_value'>value</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_constant'>constant</span> <span class='const'>Foo</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>1</span>.
<span class='const'>The</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_value'>value</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_variable'>variable</span> <span class='id identifier rubyid_foo'>foo</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>2</span>.
<span class='const'>The</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_copyright'>copyright</span> <span class='id identifier rubyid_is'>is</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby - Copyright (C) 1993-2025 Yukihiro Matsumoto</span><span class='tstring_end'>&quot;</span></span>.
<span class='const'>The</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_process'>process</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_irb'>irb</span>.</code></pre>

<p>===== Augmented Binding</p>

<p>Another way to make variable bindings (but not constant bindings) available
is to use method #result_with_hash(hash);
the passed hash has name/value pairs that are to be used to define and assign variables
in a copy of the default binding:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>The current value of variable bar is &lt;%= bar %&gt;.
The current value of variable baz is &lt;%= baz %&gt;.
The Ruby copyright is &lt;%= {RUBY_COPYRIGHT.inspect} %&gt;.
The current process is &lt;%= $0 %&gt;.
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)</code></pre>

<p>Both of these calls raise <code>NameError</code>, because <code>bar</code> and <code>baz</code>
are not defined in either the default binding or the local binding.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>          <span class='comment'># Raises NameError.
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>) <span class='comment'># Raises NameError.</span></code></pre>

<p>This call passes a hash that causes <code>bar</code> and <code>baz</code> to be defined
in a new binding (derived from <a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">#new_toplevel</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_hash'>hash</span> <span class='op'>=</span> {<span class='label'>bar:</span> <span class='int'>3</span><span class='comma'>,</span> <span class='label'>baz:</span> <span class='int'>4</span>}
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result_with_hash'><a href="#result_with_hash-instance_method" title="ERB#result_with_hash (method)">result_with_hash</a></span>(<span class='id identifier rubyid_hash'>hash</span>)
<span class='const'>The</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_value'>value</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_variable'>variable</span> <span class='id identifier rubyid_bar'>bar</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>3</span>.
<span class='const'>The</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_value'>value</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_variable'>variable</span> <span class='id identifier rubyid_baz'>baz</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>4</span>.
<span class='const'>The</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_copyright'>copyright</span> <span class='id identifier rubyid_is'>is</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby - Copyright (C) 1993-2025 Yukihiro Matsumoto</span><span class='tstring_end'>&quot;</span></span>.
<span class='const'>The</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_process'>process</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_irb'>irb</span>.</code></pre>

<p>==== Tags</p>

<p>The examples above use expression tags.
These are the tags available in \ERB:</p>

<ul>
<li><a href="rdoc-ref:ERB@Expression+Tags">Expression tag</a>: the tag contains a Ruby expression;
in the result, the entire tag is to be replaced with the run-time value of the expression.</li>
<li><a href="rdoc-ref:ERB@Execution+Tags">Execution tag</a>: the tag contains Ruby code;
in the result, the entire tag is to be replaced with the run-time value of the code.</li>
<li><a href="rdoc-ref:ERB@Comment+Tags">Comment tag</a>: the tag contains comment code;
in the result, the entire tag is to be omitted.</li>
</ul>

<p>===== Expression Tags</p>

<p>You can embed a Ruby expression in a template using an <em>expression tag</em>.</p>

<p>Its syntax is <code>&lt;%= <em>expression</em> %&gt;</code>,
where <em>expression</em> is any valid Ruby expression.</p>

<p>When you call method <a href="#result-instance_method" title="ERB#result (method)">#result</a>,
the method evaluates the expression and replaces the entire expression tag with the expression&#39;s value:</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Today is &lt;%= Date::DAYNAMES[Date.today.wday] %&gt;.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Today is {Monday.</span><span class='tstring_end'>&quot;</span></span><span class='embexpr_end'>}</span>
{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span><span class='embexpr_end'>}</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Tomorrow will be &lt;%= Date::DAYNAMES[Date.today.wday + 1] %&gt;.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tomorrow will be {Tuesday.</span><span class='tstring_end'>&quot;</span></span>}
{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Yesterday was &lt;%= Date::DAYNAMES[Date.today.wday - 1] %&gt;.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Yesterday was {Sunday.</span><span class='tstring_end'>&quot;</span></span>}</code></pre>

<p>Note that whitespace before and after the expression
is allowed but not required,
and that such whitespace is stripped from the result.</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>My appointment is on &lt;%=Date::DAYNAMES[Date.today.wday + 2]%&gt;.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My appointment is on {Wednesday.</span><span class='tstring_end'>&quot;</span></span><span class='embexpr_end'>}</span>
{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span><span class='embexpr_end'>}</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>My appointment is on &lt;%=     Date::DAYNAMES[Date.today.wday + 2]    %&gt;.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My appointment is on {Wednesday.</span><span class='tstring_end'>&quot;</span></span>}</code></pre>

<p>===== Execution Tags</p>

<p>You can embed Ruby executable code in template using an <em>execution tag</em>.</p>

<p>Its syntax is <code>&lt;% <em>code</em> %&gt;</code>,
where <em>code</em> is any valid Ruby code.</p>

<p>When you call method <a href="#result-instance_method" title="ERB#result (method)">#result</a>,
the method executes the code and removes the entire execution tag
(generating no text in the result):</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo &lt;% {Dir.chdir}(&quot;C:/&quot;) %&gt; bar</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='comment'># =&gt; &quot;foo  bar&quot;</span></code></pre>

<p>Whitespace before and after the embedded code is optional:</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo &lt;%Dir.chdir(&quot;C:/&quot;)%&gt; bar</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>   <span class='comment'># =&gt; &quot;foo  bar&quot;</span></code></pre>

<p>You can interleave text with execution tags to form a control structure
such as a conditional, a loop, or a <code>case</code> statements.</p>

<p>Conditional:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;% if verbosity %&gt;
An error has occurred.
&lt;% else %&gt;
Oops!
&lt;% end %&gt;
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_verbosity'>verbosity</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nAn error has occurred.\n\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_verbosity'>verbosity</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nOops!\n\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Note that the interleaved text may itself contain expression tags:</p>

<p>Loop:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;% {Date::ABBR_DAYNAMES.each} do |dayname| %&gt;
&lt;%= dayname %&gt;
&lt;% end %&gt;
</span><span class='heredoc_end'>TEMPLATE
</span>{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nSun\n\nMon\n\nTue\n\nWed\n\nThu\n\nFri\n\nSat\n\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Other, non-control, lines of Ruby code may be interleaved with the text,
and the Ruby code may itself contain regular Ruby comments:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;% 3.times do %&gt;
&lt;%= {Time.now} %&gt;
&lt;% sleep(1) # Let&#39;s make the times different. %&gt;
&lt;% end %&gt;
</span><span class='heredoc_end'>TEMPLATE
</span>{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n2025-09-09 11:36:02 -0500\n\n\n2025-09-09 11:36:03 -0500\n\n\n2025-09-09 11:36:04 -0500\n\n\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>The execution tag may also contain multiple lines of code:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;%
  (0..2).each do |i|
    (0..2).each do |j|
%&gt;
* &lt;%=i%&gt;,&lt;%=j%&gt;
&lt;%
    end
  end
%&gt;
</span><span class='heredoc_end'>TEMPLATE
</span>{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n* 0,0\n\n* 0,1\n\n* 0,2\n\n* 1,0\n\n* 1,1\n\n* 1,2\n\n* 2,0\n\n* 2,1\n\n* 2,2\n\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>====== Shorthand Format for Execution Tags</p>

<p>You can use keyword argument <code>trim_mode: &#39;%&#39;</code> to enable a shorthand format for execution tags;
this example uses the shorthand format <code>% <em>code</em></code> instead of <code>&lt;% _code_ %&gt;</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>% priorities.each do |priority|
  * &lt;%= priority %&gt;
% end
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_priorities'>priorities</span> <span class='op'>=</span> [ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Run Ruby Quiz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Document Modules</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Answer Questions on Ruby Talk</span><span class='tstring_end'>&#39;</span></span> ]
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)
  <span class='op'>*</span> <span class='const'>Run</span> <span class='const'>Ruby</span> <span class='const'>Quiz</span>
  <span class='op'>*</span> <span class='const'>Document</span> <span class='const'>Modules</span>
  <span class='op'>*</span> <span class='const'>Answer</span> <span class='const'>Questions</span> <span class='id identifier rubyid_on'>on</span> <span class='const'>Ruby</span> <span class='const'>Talk</span></code></pre>

<p>Note that in the shorthand format, the character <code>'%'</code> must be the first character in the code line
(no leading whitespace).</p>

<p>====== Suppressing Unwanted Blank Lines</p>

<p>With keyword argument <code>trim_mode</code> not given,
all blank lines go into the result:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;% if true %&gt;
&lt;%= RUBY_VERSION %&gt;
&lt;% end %&gt;
</span><span class='heredoc_end'>TEMPLATE
</span>{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_inspect'>inspect</span> }
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.4.5\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>You can give <code>trim_mode: &#39;-&#39;</code>, you can suppress each blank line
whose source line ends with <code>-%></code> (instead of <code>%></code>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;% if true -%&gt;
&lt;%= RUBY_VERSION %&gt;
&lt;% end -%&gt;
</span><span class='heredoc_end'>TEMPLATE
</span>{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_inspect'>inspect</span> }
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.4.5\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>It is an error to use the trailing <code>'-%>'</code> notation without <code>trim_mode: &#39;-&#39;</code>:</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_inspect'>inspect</span> } <span class='comment'># Raises SyntaxError.</span></code></pre>

<p>====== Suppressing Unwanted Newlines</p>

<p>Consider this template:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;% RUBY_VERSION %&gt;
&lt;%= RUBY_VERSION %&gt;
foo &lt;% RUBY_VERSION %&gt;
foo &lt;%= RUBY_VERSION %&gt;
</span><span class='heredoc_end'>TEMPLATE</span></code></pre>

<p>With keyword argument <code>trim_mode</code> not given, all newlines go into the result:</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_inspect'>inspect</span> }
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.4.5\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo \n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo 3.4.5\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>You can give <code>trim_mode: &#39;&gt;&#39;</code> to suppress the trailing newline
for each line that ends with <code>'%<'</code> (regardless of its beginning):</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_inspect'>inspect</span> }
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.4.5foo foo 3.4.5</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>You can give <code>trim_mode: &#39;&lt;&gt;&#39;</code> to suppress the trailing newline
for each line that both begins with <code>'<%'</code> and ends with <code>'%>'</code>:</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;&gt;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_inspect'>inspect</span> }
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.4.5foo \n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo 3.4.5\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>====== Combining Trim Modes</p>

<p>You can combine certain trim modes:</p>

<ul>
<li><code>'%-'</code>: Enable shorthand and omit each blank line ending with <code>'-%>'</code>.</li>
<li><code>'%>'</code>: Enable shorthand and omit newline for each line ending with <code>'%>'</code>.</li>
<li><code>'%<>'</code>: Enable shorthand and omit newline for each line starting with <code>'<%'</code> and ending with <code>'%>'</code>.</li>
</ul>

<p>===== Comment Tags</p>

<p>You can embed a comment in a template using a <em>comment tag</em>;
its syntax is <code>&lt;%# <em>text</em> %&gt;</code>,
where <em>text</em> is the text of the comment.</p>

<p>When you call method <a href="#result-instance_method" title="ERB#result (method)">#result</a>,
it removes the entire comment tag
(generating no text in the result).</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Some stuff;&lt;%# Note to self: figure out what the stuff is. %&gt; more stuff.</span><span class='tstring_end'>&#39;</span></span>
{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='comment'># =&gt; &quot;Some stuff; more stuff.&quot;</span></code></pre>

<p>A comment tag may appear anywhere in the template.</p>

<p>Note that the beginning of the tag must be <code>'<%#'</code>, not <code>&#39;&lt;% #&#39;</code>.</p>

<p>In this example, the tag begins with <code>&#39;&lt;% #&#39;</code>, and so is an execution tag, not a comment tag;
the cited code consists entirely of a Ruby-style comment (which is of course ignored):</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Some stuff;&lt;% # Note to self: figure out what the stuff is. %&gt; more stuff.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Some stuff;</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>==== Encodings</p>

<p>An \ERB object has an <a href="https://docs.ruby-lang.org/en/master/Encoding.html">encoding</a>,
which is by default the encoding of the template string;
the result string will also have that encoding.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;%# Comment. %&gt;
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="ERB#encoding (method)">encoding</a></span>   <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="ERB#encoding (method)">encoding</a></span>        <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="ERB#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<p>You can specify a different encoding by adding a <a href="https://docs.ruby-lang.org/en/master/syntax/comments_rdoc.html#label-Magic+Comments">magic comment</a>
at the top of the given template:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;%#-*- coding: Big5 -*-%&gt;
&lt;%# Comment. %&gt;
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="ERB#encoding (method)">encoding</a></span>   <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="ERB#encoding (method)">encoding</a></span>        <span class='comment'># =&gt; #&lt;Encoding:Big5&gt;
</span><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="ERB#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:Big5&gt;</span></code></pre>

<p>==== Error Reporting</p>

<p>Consider this template (containing an error):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;%= nosuch %&gt;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)</code></pre>

<p>When \ERB reports an error,
it includes a file name (if available) and a line number;
the file name comes from method <a href="#filename-instance_method" title="ERB#filename (method)">#filename</a>, the line number from method <a href="#lineno-instance_method" title="ERB#lineno (method)">#lineno</a>.</p>

<p>Initially, those values are <code>nil</code> and <code>0</code>, respectively;
these initial values are reported as <code>&#39;(erb)&#39;</code> and <code>1</code>, respectively:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
(<span class='id identifier rubyid_erb'>erb</span>)<span class='op'>:</span><span class='int'>1</span><span class='op'>:</span><span class='kw'>in</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;main&gt;</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='id identifier rubyid_undefined'>undefined</span> <span class='id identifier rubyid_local'>local</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>or</span> <span class='id identifier rubyid_method'>method</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nosuch</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>for</span> <span class='id identifier rubyid_main'>main</span> (<span class='const'>NameError</span>)</code></pre>

<p>You can use methods <a href="#filename=-instance_method" title="ERB#filename= (method)">#filename=</a> and <a href="#lineno=-instance_method" title="ERB#lineno= (method)">#lineno=</a> to assign values
that are more meaningful in your context:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span> <span class='op'>=</span> <span class='int'>555</span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_txt'>txt</span><span class='symbeg'>:</span><span class='int'>556</span><span class='symbeg'>:</span><span class='kw'>in</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;main&gt;</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='id identifier rubyid_undefined'>undefined</span> <span class='id identifier rubyid_local'>local</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>or</span> <span class='id identifier rubyid_method'>method</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nosuch</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>for</span> <span class='id identifier rubyid_main'>main</span> (<span class='const'>NameError</span>)</code></pre>

<p>You can use method <a href="#location=-instance_method" title="ERB#location= (method)">#location=</a> to set both values:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>999</span>]
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='id identifier rubyid_u'>u</span>.<span class='id identifier rubyid_txt'>txt</span><span class='symbeg'>:</span><span class='int'>1000</span><span class='symbeg'>:</span><span class='kw'>in</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;main&gt;</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='id identifier rubyid_undefined'>undefined</span> <span class='id identifier rubyid_local'>local</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>or</span> <span class='id identifier rubyid_method'>method</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nosuch</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>for</span> <span class='id identifier rubyid_main'>main</span> (<span class='const'>NameError</span>)</code></pre>

<p>==== Plain Text with Embedded Ruby</p>

<p>Here&#39;s a plain-text template;
it uses the literal notation <code>&#39;%q{ ... }&#39;</code> to define the template
(see <a href="https://docs.ruby-lang.org/en/master/syntax/literals_rdoc.html#label-25q-3A+Non-Interpolable+String+Literals">%q literals</a>);
this avoids problems with backslashes.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>%q{</span><span class='tstring_content'>
From:  James Edward Gray II &lt;james@grayproductions.net&gt;
To:  &lt;%= to %&gt;
Subject:  Addressing Needs

&lt;%= to[/\w+/] %&gt;:

Just wanted to send a quick note assuring that your needs are being
addressed.

I want you to know that my team will keep working on the issues,
especially:

&lt;%# ignore numerous minor requests -- focus on priorities %&gt;
% priorities.each do |priority|
  * &lt;%= priority %&gt;
% end

Thanks for your patience.

James Edward Gray II
</span><span class='tstring_end'>}</span></span></code></pre>

<p>The template will need these:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Community Spokesman &lt;spokesman@ruby_community.org&gt;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_priorities'>priorities</span> <span class='op'>=</span> [ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Run Ruby Quiz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Document Modules</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Answer Questions on Ruby Talk</span><span class='tstring_end'>&#39;</span></span> ]</code></pre>

<p>Finally, create the \ERB object and get the result</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%&lt;&gt;</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)

<span class='const'>From</span><span class='op'>:</span>  <span class='const'>James</span> <span class='const'>Edward</span> <span class='const'>Gray</span> <span class='const'>II</span> <span class='op'>&lt;</span><span class='id identifier rubyid_james'>james</span><span class='ivar'>@grayproductions</span>.<span class='id identifier rubyid_net'>net</span><span class='op'>&gt;</span>
<span class='const'>To</span><span class='op'>:</span>  <span class='const'>Community</span> <span class='const'>Spokesman</span> <span class='op'>&lt;</span><span class='id identifier rubyid_spokesman'>spokesman</span><span class='ivar'>@ruby_community</span>.<span class='id identifier rubyid_org'>org</span><span class='op'>&gt;</span>
<span class='const'>Subject</span><span class='op'>:</span>  <span class='const'>Addressing</span> <span class='const'>Needs</span>

<span class='const'>Community</span><span class='op'>:</span>

<span class='const'>Just</span> <span class='id identifier rubyid_wanted'>wanted</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_quick'>quick</span> <span class='id identifier rubyid_note'>note</span> <span class='id identifier rubyid_assuring'>assuring</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_your'>your</span> <span class='id identifier rubyid_needs'>needs</span> <span class='id identifier rubyid_are'>are</span> <span class='id identifier rubyid_being'>being</span>
<span class='id identifier rubyid_addressed'>addressed</span>.

<span class='const'>I</span> <span class='id identifier rubyid_want'>want</span> <span class='id identifier rubyid_you'>you</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_know'>know</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_my'>my</span> <span class='id identifier rubyid_team'>team</span> <span class='id identifier rubyid_will'>will</span> <span class='id identifier rubyid_keep'>keep</span> <span class='id identifier rubyid_working'>working</span> <span class='id identifier rubyid_on'>on</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_issues'>issues</span><span class='comma'>,</span>
<span class='label'>especially:</span>

<span class='op'>*</span> <span class='const'>Run</span> <span class='const'>Ruby</span> <span class='const'>Quiz</span>
<span class='op'>*</span> <span class='const'>Document</span> <span class='const'>Modules</span>
<span class='op'>*</span> <span class='const'>Answer</span> <span class='const'>Questions</span> <span class='id identifier rubyid_on'>on</span> <span class='const'>Ruby</span> <span class='const'>Talk</span>

<span class='const'>Thanks</span> <span class='kw'>for</span> <span class='id identifier rubyid_your'>your</span> <span class='id identifier rubyid_patience'>patience</span>.

<span class='const'>James</span> <span class='const'>Edward</span> <span class='const'>Gray</span> <span class='const'>II</span></code></pre>

<p>==== HTML with Embedded Ruby</p>

<p>This example shows an HTML template.</p>

<p>First, here&#39;s a custom class, <code>Product</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Product</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_cost'>cost</span>)
    <span class='ivar'>@code</span> <span class='op'>=</span> <span class='id identifier rubyid_code'>code</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='ivar'>@desc</span> <span class='op'>=</span> <span class='id identifier rubyid_desc'>desc</span>
    <span class='ivar'>@cost</span> <span class='op'>=</span> <span class='id identifier rubyid_cost'>cost</span>
    <span class='ivar'>@features</span> <span class='op'>=</span> []
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='id identifier rubyid_feature'>feature</span>)
    <span class='ivar'>@features</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_feature'>feature</span>
  <span class='kw'>end</span>

  <span class='comment'># Support templating of member data.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_get_binding'>get_binding</span>
    <span class='id identifier rubyid_binding'>binding</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></code></pre>

<p>The template below will need these values:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_toy'>toy</span> <span class='op'>=</span> {<span class='const'>Product</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TZ-1002</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Rubysapien</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Geek&#39;s Best Friend!  Responds to Ruby commands...</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                  <span class='float'>999.95</span>
                  )
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Listens for verbal commands in the Ruby language!</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Ignores Perl, Java, and all C variants.</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Karate-Chop Action!!!</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Matz signature on left leg.</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Gem studded eyes... Rubies, of course!</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>Here&#39;s the HTML:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;html&gt;
  &lt;head&gt;&lt;title&gt;Ruby Toys -- &lt;%= @name %&gt;&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;&lt;%= @name %&gt; (&lt;%= @code %&gt;)&lt;/h1&gt;
    &lt;p&gt;&lt;%= @desc %&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;% @features.each do |f| %&gt;
        &lt;li&gt;&lt;b&gt;&lt;%= f %&gt;&lt;/b&gt;&lt;/li&gt;
      &lt;% end %&gt;
    &lt;/ul&gt;
    &lt;p&gt;
      &lt;% if @cost &lt; 10 %&gt;
        &lt;b&gt;Only &lt;%= @cost %&gt;!!!&lt;/b&gt;
      &lt;% else %&gt;
         Call for a price, today!
      &lt;% end %&gt;
    &lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</span><span class='heredoc_end'>TEMPLATE</span></code></pre>

<p>Finally, create the \ERB object and get the result (omitting some blank lines):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_get_binding'>get_binding</span>)
<span class='op'>&lt;</span><span class='id identifier rubyid_html'>html</span><span class='op'>&gt;</span>
  <span class='op'>&lt;</span><span class='id identifier rubyid_head'>head</span><span class='op'>&gt;</span><span class='op'>&lt;</span><span class='id identifier rubyid_title'>title</span><span class='op'>&gt;</span><span class='const'>Ruby</span> <span class='const'>Toys</span> <span class='op'>-</span><span class='op'>-</span> <span class='const'>Rubysapien</span><span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>title&gt;&lt;</span><span class='regexp_end'>/head</span></span><span class='op'>&gt;</span>
  <span class='op'>&lt;</span><span class='id identifier rubyid_body'>body</span><span class='op'>&gt;</span>
    <span class='op'>&lt;</span><span class='id identifier rubyid_h1'>h1</span><span class='op'>&gt;</span><span class='const'>Rubysapien</span> (<span class='const'>TZ</span><span class='op'>-</span><span class='int'>1002</span>)<span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>h1&gt;
    &lt;p&gt;Geek&#39;s Best Friend!  Responds to Ruby commands...&lt;</span><span class='regexp_end'>/p</span></span><span class='op'>&gt;</span>
    <span class='op'>&lt;</span><span class='id identifier rubyid_ul'>ul</span><span class='op'>&gt;</span>
        <span class='op'>&lt;</span><span class='id identifier rubyid_li'>li</span><span class='op'>&gt;</span><span class='op'>&lt;</span><span class='id identifier rubyid_b'>b</span><span class='op'>&gt;</span><span class='const'>Listens</span> <span class='kw'>for</span> <span class='id identifier rubyid_verbal'>verbal</span> <span class='id identifier rubyid_commands'>commands</span> <span class='kw'>in</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_language!'>language!</span><span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>b&gt;&lt;</span><span class='regexp_end'>/li</span></span><span class='op'>&gt;</span>
        <span class='op'>&lt;</span><span class='id identifier rubyid_li'>li</span><span class='op'>&gt;</span><span class='op'>&lt;</span><span class='id identifier rubyid_b'>b</span><span class='op'>&gt;</span><span class='const'>Ignores</span> <span class='const'>Perl</span><span class='comma'>,</span> <span class='const'>Java</span><span class='comma'>,</span> <span class='kw'>and</span> <span class='id identifier rubyid_all'>all</span> <span class='const'>C</span> <span class='id identifier rubyid_variants'>variants</span>.<span class='op'>&lt;</span><span class='op'>/</span><span class='id identifier rubyid_b'>b</span><span class='op'>&gt;</span><span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>li&gt;
        &lt;li&gt;&lt;b&gt;Karate-Chop Action!!!&lt;</span><span class='regexp_end'>/b</span></span><span class='op'>&gt;</span><span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>li&gt;
        &lt;li&gt;&lt;b&gt;Matz signature on left leg.&lt;</span><span class='regexp_end'>/b</span></span><span class='op'>&gt;</span><span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>li&gt;
        &lt;li&gt;&lt;b&gt;Gem studded eyes... Rubies, of course!&lt;</span><span class='regexp_end'>/b</span></span><span class='op'>&gt;</span><span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>li&gt;
    &lt;</span><span class='regexp_end'>/ul</span></span><span class='op'>&gt;</span>
    <span class='op'>&lt;</span><span class='id identifier rubyid_p'>p</span><span class='op'>&gt;</span>
         <span class='const'>Call</span> <span class='kw'>for</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_price'>price</span><span class='comma'>,</span> <span class='id identifier rubyid_today!'>today!</span>
    <span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>p&gt;
  &lt;</span><span class='regexp_end'>/body</span></span><span class='op'>&gt;</span>
<span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>html&gt;</span></code></pre>

<p>==== Other Template Processors</p>

<p>Various Ruby projects have their own template processors.
The Ruby Processing System <a href="https://ruby.github.io/rdoc">RDoc</a>, for example, has one that can be used elsewhere.</p>

<p>Other popular template processors may found in the <a href="https://www.ruby-toolbox.com/categories/template_engines">Template Engines</a> page
of the Ruby Toolbox.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='NOT_GIVEN-constant' class='summary_signature priv'>NOT_GIVEN =</span>
    <span class='note title private'>private</span>
    <div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Placeholder constant; used as default value for certain method arguments.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L881-L881'># File 'lib/erb.rb', line 881</a>    <pre class='code ruby'><span class='kw'>defined?</span>(<span class='const'>Ractor</span>) <span class='op'>?</span> <span class='const'>Ractor</span>.<span class='id identifier rubyid_make_shareable'>make_shareable</span>(<span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>) <span class='op'>:</span> <span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span></pre>
  </li>
  <li>
    <span id='Revision-constant' class='summary_signature nodoc'>Revision =</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>#‘</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L781-L781'># File 'lib/erb.rb', line 781</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$Date::                           $</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The string ERB version.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb/version.rb#L4-L4'># File 'lib/erb/version.rb', line 4</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5.1.1</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(template, trim_mode: nil, eoutvar: &#39;_erbout&#39;)  &#x21d2; ERB </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#version-class_method" title="version (class method)">.<strong>version</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#filename-instance_method" title="#filename (instance method)">#<strong>filename</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#src-instance_method" title="#src (instance method)">#<strong>src</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#def_class-instance_method" title="#def_class (instance method)">#<strong>def_class</strong>(super_class = Object, method_name = &#39;result&#39;)  &#x21d2; new_class </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#def_method-instance_method" title="#def_method (instance method)">#<strong>def_method</strong>(module, method_signature, filename = &#39;(ERB)&#39;)  &#x21d2; method_name </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#def_module-instance_method" title="#def_module (instance method)">#<strong>def_module</strong>(method_name = &#39;erb&#39;)  &#x21d2; new_module </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#location=-instance_method" title="#location= (instance method)">#<strong>location=</strong>([filename, lineno]=&gt; [filename, lineno])  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#make_compiler-instance_method" title="#make_compiler (instance method)">#<strong>make_compiler</strong>  &#x21d2; ERB </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#result-instance_method" title="#result (instance method)">#<strong>result</strong>(binding = new_toplevel)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#result_with_hash-instance_method" title="#result_with_hash (instance method)">#<strong>result_with_hash</strong>(hash)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(binding = new_toplevel)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_eoutvar-instance_method" title="#set_eoutvar (instance method)">#<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#new_toplevel-instance_method" title="#new_toplevel (instance method)">#<strong>new_toplevel</strong>(symbols)  &#x21d2; Binding </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(template, trim_mode: nil, eoutvar: &#39;_erbout&#39;)  &#x21d2; <code>ERB</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns a new \ERB object containing the given string <code>template</code>.</p>

<p>For details about <code>template</code>, its embedded tags, and generated results, see <code>ERB</code>.</p>

<p><strong>Keyword Argument <code>trim_mode</code></strong></p>

<p>You can use keyword argument <code>trim_mode: &#39;%&#39;</code>
to enable the <a href="rdoc-ref:ERB@Shorthand+Format+for+Execution+Tags">shorthand format</a> for execution tags.</p>

<p>This value allows <a href="rdoc-ref:ERB@Suppressing+Unwanted+Blank+Lines">blank line control</a>:</p>

<ul>
<li><code>'-'</code>: Omit each blank line ending with <code>'%>'</code>.</li>
</ul>

<p>Other values allow <a href="rdoc-ref:ERB@Suppressing+Unwanted+Newlines">newline control</a>:</p>

<ul>
<li><code>'>'</code>: Omit newline for each line ending with <code>'%>'</code>.</li>
<li><code>'<>'</code>: Omit newline for each line starting with <code>'<%'</code> and ending with <code>'%>'</code>.</li>
</ul>

<p>You can also <a href="rdoc-ref:ERB@Combining+Trim+Modes">combine trim modes</a>.</p>

<p><strong>Keyword Argument <code>eoutvar</code></strong></p>

<p>The string value of keyword argument <code>eoutvar</code> specifies the name of the variable
that method <a href="#result-instance_method" title="ERB#result (method)">#result</a> uses to construct its result string;
see <a href="#src-instance_method" title="ERB#src (method)">#src</a>.</p>

<p>This is useful when you need to run multiple \ERB templates through the same binding
and/or when you want to control where output ends up.</p>

<p>It&#39;s good practice to choose a variable name that begins with an underscore: <code>'_'</code>.</p>

<p><b>Backward Compatibility</b></p>

<p>The calling sequence given above -- which is the one you should use --
is a simplified version of the complete formal calling sequence,
which is:</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'>new</span>}(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span>
<span class='id identifier rubyid_safe_level'>safe_level</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span>
<span class='label'>trim_mode:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>eoutvar:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>The second, third, and fourth positional arguments (those in the second line above) are deprecated;
this method issues warnings if they are given.</p>

<p>However, their values, if given, are handled thus:</p>

<ul>
<li><code>safe_level</code>: ignored.</li>
<li><code>legacy_trim_mode</code>: overrides keyword argument <code>trim_mode</code>.</li>
<li><code>legacy_eoutvar</code>: overrides keyword argument <code>eoutvar</code>.</li>
</ul>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L856-L876'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='856' data-end='876'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 856</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_safe_level'>safe_level</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>eoutvar:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span>)
  <span class='comment'># Complex initializer for $SAFE deprecation at [Feature #14256]. Use keyword arguments to pass trim_mode or eoutvar.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_safe_level'>safe_level</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing safe_level with the 2nd argument of ERB.new is deprecated. Do not use it, and specify other arguments as keyword arguments.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing trim_mode with the 3rd argument of ERB.new is deprecated. Use keyword argument like ERB.new(str, trim_mode: ...) instead.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
    <span class='id identifier rubyid_trim_mode'>trim_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing eoutvar with the 4th argument of ERB.new is deprecated. Use keyword argument like ERB.new(str, eoutvar: ...) instead.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
    <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_compiler'>compiler</span> <span class='op'>=</span> <span class='id identifier rubyid_make_compiler'><a href="#make_compiler-instance_method" title="ERB#make_compiler (method)">make_compiler</a></span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
  <span class='id identifier rubyid_set_eoutvar'><a href="#set_eoutvar-instance_method" title="ERB#set_eoutvar (method)">set_eoutvar</a></span>(<span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span>)
  <span class='ivar'>@src</span><span class='comma'>,</span> <span class='ivar'>@encoding</span><span class='comma'>,</span> <span class='ivar'>@frozen_string</span> <span class='op'>=</span> <span class='op'>*</span><span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_compile'>compile</span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@_init</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_singleton_class'>singleton_class</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="version-class_method">
  <h3 class='signature  first'>
    .<strong>version</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns the string \ERB version.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L790-L792'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='790' data-end='792'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 790</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_version'>version</span>
  <span class='const'><a href="#VERSION-constant" title="ERB::VERSION (constant)">VERSION</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="encoding-instance_method">
  <h3 class='signature ro first'>
    #<strong>encoding</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns the encoding of <code>self</code>;
see <a href="rdoc-ref:ERB@Encodings">Encodings</a>:</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L953-L953'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='953' data-end='953'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 953</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filename-instance_method">
  <h3 class='signature rw'>
    #<strong>filename</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Sets or returns the file name to be used in reporting errors;
see <a href="rdoc-ref:ERB@Error+Reporting">Error Reporting</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L961-L961'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='961' data-end='961'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 961</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filename'>filename</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lineno-instance_method">
  <h3 class='signature rw'>
    #<strong>lineno</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Sets or returns the line number to be used in reporting errors;
see <a href="rdoc-ref:ERB@Error+Reporting">Error Reporting</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L969-L969'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='969' data-end='969'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 969</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lineno'>lineno</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="src-instance_method">
  <h3 class='signature ro'>
    #<strong>src</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns the Ruby code that, when executed, generates the result;
the code is executed by method <a href="#result-instance_method" title="ERB#result (method)">#result</a>,
and by its wrapper methods <a href="#result_with_hash-instance_method" title="ERB#result_with_hash (method)">#result_with_hash</a> and <a href="#run-instance_method" title="ERB#run (method)">#run</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The time is &lt;%= {Time.now} %&gt;.</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_src'>src</span>
<span class='op'>===</span><span class='op'>=</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#coding:UTF-8\n_erbout = +&#39;&#39;; _erbout.&lt;&lt; \&quot;The time is \&quot;.freeze; _erbout.&lt;&lt;(( {Time.now} ).to_s); _erbout.&lt;&lt; \&quot;.\&quot;.freeze; _erbout</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='op'>===</span><span class='op'>=</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The time is 2025-09-18 15:58:08 -0500.</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>In a more readable format:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># puts erb.src.split(&#39;; &#39;)
</span><span class='comment'># #coding:UTF-8
</span><span class='comment'># _erbout = +&#39;&#39;
</span><span class='comment'># _erbout.&lt;&lt; &quot;The time is &quot;.freeze
</span><span class='comment'># _erbout.&lt;&lt;(( Time.now ).to_s)
</span><span class='comment'># _erbout.&lt;&lt; &quot;.&quot;.freeze
</span><span class='comment'># _erbout</span></code></pre>

<p>Variable <code>_erbout</code> is used to store the intermediate results in the code;
the name <code>_erbout</code> is the default in <a href="#new-class_method" title="ERB.new (method)">.new</a>,
and can be changed via keyword argument <code>eoutvar</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='label'>eoutvar:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_foo</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_src'>src</span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>; </span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'>#coding:UTF-8
</span><span class='id identifier rubyid__foo'>_foo</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid__foo'>_foo</span>.<span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The time is </span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='id identifier rubyid__foo'>_foo</span>.<span class='op'>&lt;&lt;</span>(( {<span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>} ).<span class='id identifier rubyid_to_s'>to_s</span>)
<span class='id identifier rubyid__foo'>_foo</span>.<span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='id identifier rubyid__foo'>_foo</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L944-L944'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='944' data-end='944'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 944</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_src'>src</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="def_class-instance_method">
  <h3 class='signature  first'>
    #<strong>def_class</strong>(super_class = Object, method_name = &#39;result&#39;)  &#x21d2; <code>new_class</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns a new nameless class whose superclass is <code>super_class</code>,
and which has instance method <code>method_name</code>.</p>

<p>Create a template from HTML that has embedded expression tags that use <code>@arg1</code> and <code>@arg2</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_html'>html</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;TEMPLATE</span>
<span class='tstring_content'>&lt;html&gt;
&lt;body&gt;
  &lt;p&gt;&lt;%= @arg1 %&gt;&lt;/p&gt;
  &lt;p&gt;&lt;%= @arg2 %&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</span><span class='heredoc_end'>TEMPLATE
</span><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_html'>html</span>)</code></pre>

<p>Create a base class that has <code>@arg1</code> and <code>@arg2</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MyBaseClass</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_arg1'>arg1</span><span class='comma'>,</span> <span class='id identifier rubyid_arg2'>arg2</span>)
    <span class='ivar'>@arg1</span> <span class='op'>=</span> <span class='id identifier rubyid_arg1'>arg1</span>
    <span class='ivar'>@arg2</span> <span class='op'>=</span> <span class='id identifier rubyid_arg2'>arg2</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Use method <code>#def_class</code> to create a subclass that has method <code>:render</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>MySubClass</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_def_class'>def_class</span>(<span class='const'>MyBaseClass</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_render'>render</span>)</code></pre>

<p>Generate the result:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_puts'>puts</span> {<span class='const'>MySubClass</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>123</span>).<span class='id identifier rubyid_render'>render</span>
<span class='op'>&lt;</span><span class='id identifier rubyid_html'>html</span><span class='op'>&gt;</span>
<span class='op'>&lt;</span><span class='id identifier rubyid_body'>body</span><span class='op'>&gt;</span>
  <span class='op'>&lt;</span><span class='id identifier rubyid_p'>p</span><span class='op'>&gt;</span><span class='id identifier rubyid_foo'>foo</span><span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>p&gt;
  &lt;p&gt;123&lt;</span><span class='regexp_end'>/p</span></span><span class='op'>&gt;</span>
<span class='op'>&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>body&gt;
&lt;</span><span class='regexp_end'>/html</span></span><span class='op'>&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1215-L1219'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1215' data-end='1219'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1215</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_class'>def_class</span>(<span class='id identifier rubyid_superklass'>superklass</span><span class='op'>=</span><span class='const'><a href="Object.html" title="Object (class)">Object</a></span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_cls'>cls</span> <span class='op'>=</span> <span class='const'>Class</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_superklass'>superklass</span>)
  <span class='id identifier rubyid_def_method'><a href="#def_method-instance_method" title="ERB#def_method (method)">def_method</a></span>(<span class='id identifier rubyid_cls'>cls</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_cls'>cls</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="def_method-instance_method">
  <h3 class='signature '>
    #<strong>def_method</strong>(module, method_signature, filename = &#39;(ERB)&#39;)  &#x21d2; <code>method_name</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Creates and returns a new instance method in the given module <code>module</code>;
returns the method name as a symbol.</p>

<p>The method is created from the given <code>method_signature</code>,
which consists of the method name and its argument names (if any).</p>

<p>The <a href="#filename-instance_method" title="ERB#filename (method)">#filename</a> sets the value of #filename;
see <a href="rdoc-ref:ERB@Error+Reporting">Error Reporting</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;%= arg1 %&gt; &lt;%= arg2 %&gt;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='const'>MyModule</span> <span class='op'>=</span> {<span class='const'>Module</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_def_method'>def_method</span>(<span class='const'>MyModule</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render(arg1, arg2)</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; :render
</span><span class='kw'>class</span> <span class='const'>MyClass</span><span class='semicolon'>;</span> <span class='id identifier rubyid_include'>include</span> <span class='const'>MyModule</span><span class='semicolon'>;</span> <span class='kw'>end</span>
{<span class='const'>MyClass</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}.<span class='id identifier rubyid_render'>render</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>123</span>)                      <span class='comment'># =&gt; &quot;foo 123&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1132-L1137'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1132' data-end='1137'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1132</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_method'>def_method</span>(<span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(?!#|$)</span><span class='regexp_end'>/</span></span>) {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_methodname'>methodname</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>} <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nend\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_mod'>mod</span>.<span class='id identifier rubyid_module_eval'>module_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_eval'>eval</span>(<span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span><span class='comma'>,</span> <span class='id identifier rubyid_binding'>binding</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="def_module-instance_method">
  <h3 class='signature '>
    #<strong>def_module</strong>(method_name = &#39;erb&#39;)  &#x21d2; <code>new_module</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns a new nameless module that has instance method <code>method_name</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;%= arg1 %&gt; &lt;%= arg2 %&gt;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='id identifier rubyid_template'>template</span>)
<span class='const'>MyModule</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_def_module'>def_module</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render(arg1, arg2)</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>class</span> <span class='const'>MyClass</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>MyModule</span>
<span class='kw'>end</span>
{<span class='const'>MyClass</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}.<span class='id identifier rubyid_render'>render</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>123</span>)
<span class='op'>===</span><span class='op'>=</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo 123</span><span class='tstring_end'>&quot;</span></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1157-L1161'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1157' data-end='1161'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1157</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_module'>def_module</span>(<span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_mod'>mod</span> <span class='op'>=</span> <span class='const'>Module</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>
  <span class='id identifier rubyid_def_method'><a href="#def_method-instance_method" title="ERB#def_method (method)">def_method</a></span>(<span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_mod'>mod</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="location=-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>location=</strong>([filename, lineno]=&gt; [filename, lineno])  </span>
      <span class='overload'>#<strong>location=</strong>(filename)  &#x21d2; <a href="#filename-instance_method" title="ERB#filename (method)">filename</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Sets the values of <a href="#filename-instance_method" title="ERB#filename (method)">#filename</a> and, if given, #lineno;
see <a href="rdoc-ref:ERB@Error+Reporting">Error Reporting</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L981-L984'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='981' data-end='984'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 981</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_location='>location=</span>((<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span><span class='comma'>,</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span>))
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="make_compiler-instance_method">
  <h3 class='signature '>
    #<strong>make_compiler</strong>  &#x21d2; <code>ERB</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns a new <a href="ERB/Compiler.html" title="ERB::Compiler (class)"><code>::ERB::Compiler</code></a> with the given <code>trim_mode</code>;
for <code>trim_mode</code> values, see <a href="#new-class_method" title="ERB.new (method)">.new</a>:</p>

<pre class="code ruby"><code class="ruby">{<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_make_compiler'>make_compiler</span>(<span class='kw'>nil</span>)
<span class='op'>===</span><span class='op'>=</span> <span class='op'>=&gt;</span> <span class='comment'>#&lt;ERB::Compiler:0x000001cff9467678 @insert_cmd=&quot;print&quot;, @percent=false, @post_cmd=[], @pre_cmd=[], @put_cmd=&quot;print&quot;, @trim_mode=nil&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L898-L900'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='898' data-end='900'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 898</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_make_compiler'>make_compiler</span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
  <span class='const'>ERB</span><span class='op'>::</span><span class='const'><a href="ERB/Compiler.html" title="ERB::Compiler (class)">Compiler</a></span>.<span class='id identifier rubyid_new'><a href="ERB/Compiler.html#new-class_method" title="ERB::Compiler.new (method)">new</a></span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new_toplevel-instance_method">
  <h3 class='signature priv'>
    #<strong>new_toplevel</strong>(symbols)  &#x21d2; <code>Binding</code>  <span class="extras">(<span class='priv'>private</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns a new binding based on <code>TOPLEVEL_BINDING</code>;
used to create a default binding for a call to <a href="#result-instance_method" title="ERB#result (method)">#result</a>.</p>

<p>See <a href="rdoc-ref:ERB@Default+Binding">Default Binding</a>.</p>

<p>Argument <code>symbols</code> is an array of symbols;
each symbol <code>symbol</code> is defined as a new variable to hide and
prevent it from overwriting a variable of the same name already
defined within the binding.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1095-L1104'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1095' data-end='1104'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1095</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new_toplevel'>new_toplevel</span>(<span class='id identifier rubyid_vars'>vars</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='const'>TOPLEVEL_BINDING</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vars'>vars</span>
    <span class='id identifier rubyid_vars'>vars</span> <span class='op'>=</span> <span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_select'>select</span> {<span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_local_variable_defined?'>local_variable_defined?</span>(<span class='id identifier rubyid_v'>v</span>)}
    <span class='kw'>unless</span> <span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_empty?'>empty?</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_eval'>eval</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tap {|;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_content'>| break binding}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="result-instance_method">
  <h3 class='signature '>
    #<strong>result</strong>(binding = new_toplevel)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns the string result formed by processing \ERB tags found in the stored template in <code>self</code>.</p>

<p>With no argument given, uses the default binding;
see <a href="rdoc-ref:ERB@Default+Binding">Default Binding</a>.</p>

<p>With argument <code>binding</code> given, uses the local binding;
see <a href="rdoc-ref:ERB@Local+Binding">Local Binding</a>.</p>

<p>See also <a href="#result_with_hash-instance_method" title="ERB#result_with_hash (method)">#result_with_hash</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1052-L1057'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1052' data-end='1057'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1052</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_result'>result</span>(<span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>)
  <span class='kw'>unless</span> <span class='ivar'>@_init</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_singleton_class'>singleton_class</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not initialized</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_eval'>eval</span>(<span class='ivar'>@src</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> (<span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(erb)</span><span class='tstring_end'>&#39;</span></span>)<span class='comma'>,</span> <span class='ivar'>@lineno</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="result_with_hash-instance_method">
  <h3 class='signature '>
    #<strong>result_with_hash</strong>(hash)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Returns the string result formed by processing \ERB tags found in the stored string in <code>self</code>;
see <a href="rdoc-ref:ERB@Augmented+Binding">Augmented Binding</a>.</p>

<p>See also <a href="#result-instance_method" title="ERB#result (method)">#result</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1071-L1077'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1071' data-end='1077'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1071</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_result_with_hash'>result_with_hash</span>(<span class='id identifier rubyid_hash'>hash</span>)
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>(<span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_keys'>keys</span>)
  <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_local_variable_set'>local_variable_set</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_b'>b</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run-instance_method">
  <h3 class='signature '>
    #<strong>run</strong>(binding = new_toplevel)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Like <a href="#result-instance_method" title="ERB#result (method)">#result</a>, but prints the result string (instead of returning it);
returns <code>nil</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1030-L1032'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1030' data-end='1032'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1030</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>(<span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>)
  <span class='id identifier rubyid_print'>print</span> <span class='kw'>self</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_b'>b</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_eoutvar-instance_method">
  <h3 class='signature '>
    #<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>:markup: markdown</p>

<p>Sets the <code>eoutvar</code> value in the <a href="ERB/Compiler.html" title="ERB::Compiler (class)"><code>::ERB::Compiler</code></a> object <code>compiler</code>;
returns a 1-element array containing the value of <code>eoutvar</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> {<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>}(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_compiler'>compiler</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_make_compiler'><a href="#make_compiler-instance_method" title="ERB#make_compiler (method)">make_compiler</a></span>(<span class='kw'>nil</span>)
<span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_compiler'>compiler</span>
<span class='comment'>#&lt;ERB::Compiler:0x000001cff8a9aa00
</span> <span class='ivar'>@insert_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>print</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='ivar'>@percent</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span>
 <span class='ivar'>@post_cmd</span><span class='op'>=</span>[]<span class='comma'>,</span>
 <span class='ivar'>@pre_cmd</span><span class='op'>=</span>[]<span class='comma'>,</span>
 <span class='ivar'>@put_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>print</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='ivar'>@trim_mode</span><span class='op'>=</span><span class='kw'>nil</span><span class='op'>&gt;</span>
<span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_set_eoutvar'>set_eoutvar</span>(<span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; [&quot;_foo&quot;]
</span><span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_compiler'>compiler</span>
<span class='comment'>#&lt;ERB::Compiler:0x000001cff8a9aa00
</span> <span class='ivar'>@insert_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='ivar'>@percent</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span>
 <span class='ivar'>@post_cmd</span><span class='op'>=</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span>
 <span class='ivar'>@pre_cmd</span><span class='op'>=</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo = +&#39;&#39;</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span>
 <span class='ivar'>@put_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='ivar'>@trim_mode</span><span class='op'>=</span><span class='kw'>nil</span><span class='op'>&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1016-L1021'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1016' data-end='1021'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1016</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_eoutvar'>set_eoutvar</span>(<span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_put_cmd'>put_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_insert_cmd'>insert_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_pre_cmd'>pre_cmd</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'> = +&#39;&#39;</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_post_cmd'>post_cmd</span> <span class='op'>=</span> [<span class='id identifier rubyid_eoutvar'>eoutvar</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>