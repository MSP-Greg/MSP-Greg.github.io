<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ERB &mdash; erb  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ERB",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>erb</a> &raquo; 
      <a href='_index.html#alpha_E'>Index (E)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ERB&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ERB</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="ERB/DefMethod.html" title="ERB::DefMethod (module)"><code>DefMethod</code></a>,
        <a href="ERB/Escape.html" title="ERB::Escape (module)"><code>Escape</code></a>,
        <a href="ERB/Util.html" title="ERB::Util (module)"><code>Util</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="ERB/Compiler.html" title="ERB::Compiler (class)"><code>Compiler</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L780'>lib/erb.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/erb/escape/escape.c#L96'>ext/erb/escape/escape.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb/version.rb#L2'>lib/erb/version.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Class <strong>ERB</strong> (the name stands for **Embedded Ruby**) is an easy-to-use, but also very powerful, [template processor][template processor].</p>

<h4 id="label-Usage">Usage</h4>

<p>Before you can use ERB, you must first require it (examples on this page assume that this has been done):</p>

<p>“‘ require ’erb’ “‘</p>

<h4 id="label-In+Brief">In Brief</h4>

<p>Here’s how ERB works:</p>
<ul><li>
<p>You can create a <strong>template</strong>: a plain-text string that includes specially formatted <strong>tags</strong>..</p>
</li><li>
<p>You can create an ERB object to store the template.</p>
</li><li>
<p>You can call instance method <a href="#result-instance_method" title="ERB#result (method)">#result</a> to get the <strong>result</strong>.</p>
</li></ul>

<p>ERB supports tags of three kinds:</p>
<ul><li>
<p>[Expression tags][expression tags]: each begins with <code>‘<%’</code>, ends with ‘’%&gt;‘`; contains a Ruby expression; in the result, the value of the expression replaces the entire tag:</p>

<pre class="code ruby"><code class="ruby">    <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The magic word is &lt;%= magic_word %&gt;.</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span>)
    <span class='id identifier rubyid_magic_word'>magic_word</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>) <span class='comment'># =&gt; &quot;The magic word is xyzzy.&quot;
</span>
<span class='const'>The</span> <span class='id identifier rubyid_above'>above</span> <span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_to'>to</span> <span class='comment'>#result passes argument {binding},
</span><span class='id identifier rubyid_which'>which</span> <span class='id identifier rubyid_contains'>contains</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_binding'>binding</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_variable'>variable</span> {<span class='id identifier rubyid_magic_word'>magic_word</span>} <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_its'>its</span> <span class='id identifier rubyid_string'>string</span> <span class='id identifier rubyid_value'>value</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>}.

<span class='const'>The</span> <span class='id identifier rubyid_below'>below</span> <span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_to'>to</span> <span class='comment'>#result need not pass a binding,
</span><span class='id identifier rubyid_because'>because</span> <span class='id identifier rubyid_its'>its</span> <span class='id identifier rubyid_expression'>expression</span> {<span class='const'>Date</span><span class='op'>::</span><span class='const'>DAYNAMES</span>} <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_globally'>globally</span> <span class='id identifier rubyid_defined'>defined</span>.

    <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Today is &lt;%= Date::DAYNAMES[Date.today.wday] %&gt;.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='comment'># =&gt; &quot;Today is Monday.&quot;</span></code></pre>
</li><li>
<p>[Execution tags][execution tags]: each begins with <code>‘<%=’</code>, ends with ‘’%&gt;‘`; contains Ruby code to be executed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;% File.write(&quot;t.txt&quot;, &quot;Some stuff.&quot;) %&gt;</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Some stuff.&quot;</span></code></pre>
</li><li>
<p>[Comment tags][comment tags]: each begins with <code>‘<%#’</code>, ends with ‘’%&gt;‘`; contains comment text; in the result, the entire tag is omitted.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Some stuff;&lt;%# Note to self: figure out what the stuff is. %&gt; more stuff.</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='comment'># =&gt; &quot;Some stuff; more stuff.&quot;</span></code></pre>
</li></ul>

<h4 id="label-Some+Simple+Examples">Some Simple Examples</h4>

<p>Here’s a simple example of ERB in action:</p>

<p>“‘ template = ’The time is &lt;%= <code>Time.now</code> %&gt;.‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) erb.result</p>

<h3 id="label-3D-3E+-22The+time+is+2025-09-09+10-3A49-3A26+-0500.-22">=&gt; “The time is 2025-09-09 10:49:26 -0500.”</h3>

<p>“‘</p>

<p>Details:</p>
<ol><li>
<p>A plain-text string is assigned to variable <code>template</code>. Its embedded [expression tag][expression tags] ‘’&lt;%= Time.now %&gt;‘` includes a Ruby expression, <code>Time.now</code>.</p>
</li><li>
<p>The string is put into a new ERB object, and stored in variable <code>erb</code>.</p>
</li><li>
<p>Method call <code>erb.result</code> generates a string that contains the run-time value of <code>Time.now</code>, as computed at the time of the call.</p>
</li></ol>

<p>The ERB object may be re-used:</p>

<p>“‘ erb.result</p>

<h3 id="label-3D-3E+-22The+time+is+2025-09-09+10-3A49-3A33+-0500.-22">=&gt; “The time is 2025-09-09 10:49:33 -0500.”</h3>

<p>“‘</p>

<p>Another example:</p>

<p>“‘ template = ’The magic word is &lt;%= magic_word %&gt;.‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) magic_word = ’abracadabra’ erb.result(binding)</p>

<h3 id="label-3D-3E+-22The+magic+word+is+abracadabra.-22">=&gt; “The magic word is abracadabra.”</h3>

<p>“‘</p>

<p>Details:</p>
<ol><li>
<p>As before, a plain-text string is assigned to variable <code>template</code>. Its embedded [expression tag][expression tags] ‘’&lt;%= magic_word %&gt;‘` has a variable <strong>name</strong>, <code>magic_word</code>.</p>
</li><li>
<p>The string is put into a new ERB object, and stored in variable <code>erb</code>; note that <code>magic_word</code> need not be defined before the ERB object is created.</p>
</li><li>
<p><code>magic_word = &#39;abracadabra&#39;</code> assigns a value to variable <code>magic_word</code>.</p>
</li><li>
<p>Method call <code>erb.result(binding)</code> generates a string that contains the <strong>value</strong> of <code>magic_word</code>.</p>
</li></ol>

<p>As before, the ERB object may be re-used:</p>

<p>“‘ magic_word = ’xyzzy’ erb.result(binding)</p>

<h3 id="label-3D-3E+-22The+magic+word+is+xyzzy.-22">=&gt; “The magic word is xyzzy.”</h3>

<p>“‘</p>

<h4 id="label-Bindings">Bindings</h4>

<p>A call to method <a href="#result-instance_method" title="ERB#result (method)">#result</a>, which produces the formatted result string, requires a [Binding object][binding object] as its argument.</p>

<p>The binding object provides the bindings for expressions in [expression tags][expression tags].</p>

<p>There are three ways to provide the required binding:</p>
<ul><li>
<p>[Default binding][default binding].</p>
</li><li>
<p>[Local binding][local binding].</p>
</li><li><dl class="rdoc-list label-list"><dt>Augmented binding][augmented binding</dt>
<dd></dd></dl>
</li></ul>

<h5 id="label-Default+Binding">Default Binding</h5>

<p>When you pass no <code>binding</code> argument to method <a href="#result-instance_method" title="ERB#result (method)">#result</a>, the method uses its default binding: the one returned by method <a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">#new_toplevel</a>. This binding has the bindings defined by Ruby itself, which are those for Ruby’s constants and variables.</p>

<p>That binding is sufficient for an expression tag that refers only to Ruby’s constants and variables; these expression tags refer only to Ruby’s global constant <code>RUBY_COPYRIGHT</code> and global variable <code>$0</code>:</p>

<p>“‘ template = &lt;&lt;TEMPLATE The Ruby copyright is &lt;%= <code>RUBY_COPYRIGHT.inspect</code> %&gt;. The current process is &lt;%= $0 %&gt;. TEMPLATE puts <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result The Ruby copyright is “ruby - Copyright © 1993-2025 Yukihiro Matsumoto”. The current process is irb. “`</p>

<p>(The current process is <code>irb</code> because that’s where we’re doing these examples!)</p>

<h5 id="label-Local+Binding">Local Binding</h5>

<p>The default binding is <strong>not</strong> sufficient for an expression that refers to a a constant or variable that is not defined there:</p>

<p>“‘ Foo = 1 # Defines local constant Foo. foo = 2 # Defines local variable foo. template = &lt;&lt;TEMPLATE The current value of constant Foo is &lt;%= Foo %&gt;. The current value of variable foo is &lt;%= foo %&gt;. The Ruby copyright is &lt;%= <code>RUBY_COPYRIGHT.inspect</code> %&gt;. The current process is &lt;%= $0 %&gt;. TEMPLATE erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) “`</p>

<p>This call below raises <code>NameError</code> because although <code>Foo</code> and <code>foo</code> are defined locally, they are not defined in the default binding:</p>

<p>“‘ erb.result # Raises NameError. “`</p>

<p>To make the locally-defined constants and variables available, you can call <a href="#result-instance_method" title="ERB#result (method)">#result</a> with the local binding:</p>

<p>“‘ puts erb.result(binding) The current value of constant Foo is 1. The current value of variable foo is 2. The Ruby copyright is “ruby - Copyright © 1993-2025 Yukihiro Matsumoto”. The current process is irb. “`</p>

<h5 id="label-Augmented+Binding">Augmented Binding</h5>

<p>Another way to make variable bindings (but not constant bindings) available is to use method #result_with_hash(hash); the passed hash has name/value pairs that are to be used to define and assign variables in a copy of the default binding:</p>

<p>“‘ template = &lt;&lt;TEMPLATE The current value of variable bar is &lt;%= bar %&gt;. The current value of variable baz is &lt;%= baz %&gt;. The Ruby copyright is &lt;%= <code>RUBY_COPYRIGHT.inspect</code> %&gt;. The current process is &lt;%= $0 %&gt;. TEMPLATE erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) “`</p>

<p>Both of these calls raise <code>NameError</code>, because <code>bar</code> and <code>baz</code> are not defined in either the default binding or the local binding.</p>

<p>“‘ puts erb.result          # Raises NameError. puts erb.result(binding) # Raises NameError. “`</p>

<p>This call passes a hash that causes <code>bar</code> and <code>baz</code> to be defined in a new binding (derived from <a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">#new_toplevel</a>):</p>

<p>“‘ hash = <code>3, baz: 4</code> puts erb.result_with_hash(hash) The current value of variable bar is 3. The current value of variable baz is 4. The Ruby copyright is “ruby - Copyright © 1993-2025 Yukihiro Matsumoto”. The current process is irb. “`</p>

<h4 id="label-Tags">Tags</h4>

<p>The examples above use expression tags. These are the tags available in ERB:</p>
<ul><li>
<p>[Expression tag][expression tags]: the tag contains a Ruby expression; in the result, the entire tag is to be replaced with the run-time value of the expression.</p>
</li><li>
<p>[Execution tag][execution tags]: the tag contains Ruby code; in the result, the entire tag is to be replaced with the run-time value of the code.</p>
</li><li>
<p>[Comment tag][comment tags]: the tag contains comment code; in the result, the entire tag is to be omitted.</p>
</li></ul>

<h5 id="label-Expression+Tags">Expression Tags</h5>

<p>You can embed a Ruby expression in a template using an *expression tag*.</p>

<p>Its syntax is <code>&lt;%= <em>expression</em> %&gt;</code>, where <strong>expression</strong> is any valid Ruby expression.</p>

<p>When you call method <a href="#result-instance_method" title="ERB#result (method)">#result</a>, the method evaluates the expression and replaces the entire expression tag with the expression’s value:</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(’Today is &lt;%= <a href="Date.today.wday">Date::DAYNAMES</a> %&gt;.‘).result</p>

<h3 id="label-3D-3E+-22Today+is+-7BMonday.-22-7D">=&gt; “Today is <code>Monday.”</code></h3>

<p><a href="#new-class_method" title="ERB.new (method)">.new</a>(‘Tomorrow will be &lt;%= Date::DAYNAMES[Date.today.wday + 1] %&gt;.’).result</p>

<h3 id="label-3D-3E+-22Tomorrow+will+be+-7BTuesday.-22-7D">=&gt; “Tomorrow will be <code>Tuesday.”</code></h3>

<p><a href="#new-class_method" title="ERB.new (method)">.new</a>(‘Yesterday was &lt;%= Date::DAYNAMES[Date.today.wday - 1] %&gt;.’).result</p>

<h3 id="label-3D-3E+-22Yesterday+was+-7BSunday.-22-7D">=&gt; “Yesterday was <code>Sunday.”</code></h3>

<p>“‘</p>

<p>Note that whitespace before and after the expression is allowed but not required, and that such whitespace is stripped from the result.</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(’My appointment is on &lt;%=Date::DAYNAMES[Date.today.wday + 2]%&gt;.‘).result</p>

<h3 id="label-3D-3E+-22My+appointment+is+on+-7BWednesday.-22-7D">=&gt; “My appointment is on <code>Wednesday.”</code></h3>

<p><a href="#new-class_method" title="ERB.new (method)">.new</a>(‘My appointment is on &lt;%=     Date::DAYNAMES[Date.today.wday + 2]    %&gt;.’).result</p>

<h3 id="label-3D-3E+-22My+appointment+is+on+-7BWednesday.-22-7D">=&gt; “My appointment is on <code>Wednesday.”</code></h3>

<p>“‘</p>

<h5 id="label-Execution+Tags">Execution Tags</h5>

<p>You can embed Ruby executable code in template using an *execution tag*.</p>

<p>Its syntax is <code>&lt;% <em>code</em> %&gt;</code>, where <strong>code</strong> is any valid Ruby code.</p>

<p>When you call method <a href="#result-instance_method" title="ERB#result (method)">#result</a>, the method executes the code and removes the entire execution tag (generating no text in the result):</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(’foo &lt;% <code>Dir.chdir</code>(“C:/”) %&gt; bar’).result # =&gt; “foo  bar” “‘</p>

<p>Whitespace before and after the embedded code is optional:</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(’foo &lt;%Dir.chdir(“C:/”)%&gt; bar’).result   # =&gt; “foo  bar” “‘</p>

<p>You can interleave text with execution tags to form a control structure such as a conditional, a loop, or a <code>case</code> statements.</p>

<p>Conditional:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;% if verbosity %&gt; An error has occurred. &lt;% else %&gt; Oops! &lt;% end %&gt; TEMPLATE erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) verbosity = true erb.result(binding)</p>

<h3 id="label-3D-3E+-22-5CnAn+error+has+occurred.-5Cn-5Cn-22">=&gt; “nAn error has occurred.nn”</h3>

<p>verbosity = false erb.result(binding)</p>

<h3 id="label-3D-3E+-22-5CnOops-21-5Cn-5Cn-22">=&gt; “nOops!nn”</h3>

<p>“‘</p>

<p>Note that the interleaved text may itself contain expression tags:</p>

<p>Loop:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;% <code>Date::ABBR_DAYNAMES.each</code> do |dayname| %&gt; &lt;%= dayname %&gt; &lt;% end %&gt; TEMPLATE <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result</p>

<h3 id="label-3D-3E+-22-5CnSun-5Cn-5CnMon-5Cn-5CnTue-5Cn-5CnWed-5Cn-5CnThu-5Cn-5CnFri-5Cn-5CnSat-5Cn-5Cn-22">=&gt; “nSunnnMonnnTuennWednnThunnFrinnSatnn”</h3>

<p>“‘</p>

<p>Other, non-control, lines of Ruby code may be interleaved with the text, and the Ruby code may itself contain regular Ruby comments:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;% 3.times do %&gt; &lt;%= <code>Time.now</code> %&gt; &lt;% sleep(1) # Let’s make the times different. %&gt; &lt;% end %&gt; TEMPLATE <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result</p>

<h3 id="label-3D-3E+-22-5Cn2025-09-09+11-3A36-3A02+-0500-5Cn-5Cn-5Cn2025-09-09+11-3A36-3A03+-0500-5Cn-5Cn-5Cn2025-09-09+11-3A36-3A04+-0500-5Cn-5Cn-5Cn-22">=&gt; “n2025-09-09 11:36:02 -0500nnn2025-09-09 11:36:03 -0500nnn2025-09-09 11:36:04 -0500nnn”</h3>

<p>“‘</p>

<p>The execution tag may also contain multiple lines of code:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;%</p>

<pre class="code ruby"><code class="ruby">(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
  (<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span></code></pre>

<p>%&gt;</p>
<ul><li>
<p>&lt;%=i%&gt;,&lt;%=j%&gt;</p>
</li></ul>

<p>&lt;%</p>

<pre class="code ruby"><code class="ruby">  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>%&gt; TEMPLATE <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result</p>

<h3 id="label-3D-3E+-22-5Cn-2A+0-2C0-5Cn-5Cn-2A+0-2C1-5Cn-5Cn-2A+0-2C2-5Cn-5Cn-2A+1-2C0-5Cn-5Cn-2A+1-2C1-5Cn-5Cn-2A+1-2C2-5Cn-5Cn-2A+2-2C0-5Cn-5Cn-2A+2-2C1-5Cn-5Cn-2A+2-2C2-5Cn-5Cn-22">=&gt; “n* 0,0nn* 0,1nn* 0,2nn* 1,0nn* 1,1nn* 1,2nn* 2,0nn* 2,1nn* 2,2nn”</h3>

<p>“‘</p>

<h6 id="label-Shorthand+Format+for+Execution+Tags">Shorthand Format for Execution Tags</h6>

<p>You can use keyword argument <code>trim_mode: &#39;%&#39;</code> to enable a shorthand format for execution tags; this example uses the shorthand format <code>% <em>code</em></code> instead of ‘&lt;% <em>code</em> %&gt;`:</p>

<p>“‘ template = &lt;&lt;TEMPLATE % priorities.each do |priority|</p>

<pre class="code ruby"><code class="ruby"><span class='op'>*</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%=</span><span class='tstring_content'> priority %&gt;</span></code></pre>

<p>% end TEMPLATE erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template, trim_mode: ‘%’) priorities = [ ‘Run Ruby Quiz’,</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Document Modules</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Answer Questions on Ruby Talk</span><span class='tstring_end'>&#39;</span></span> ]</code></pre>

<p>puts erb.result(binding)</p>

<pre class="code ruby"><code class="ruby"><span class='op'>*</span> <span class='const'>Run</span> <span class='const'>Ruby</span> <span class='const'>Quiz</span>
<span class='op'>*</span> <span class='const'>Document</span> <span class='const'>Modules</span>
<span class='op'>*</span> <span class='const'>Answer</span> <span class='const'>Questions</span> <span class='id identifier rubyid_on'>on</span> <span class='const'>Ruby</span> <span class='const'>Talk</span></code></pre>

<p>“‘</p>

<p>Note that in the shorthand format, the character <code>‘%’</code> must be the first character in the code line (no leading whitespace).</p>

<h6 id="label-Suppressing+Unwanted+Blank+Lines">Suppressing Unwanted Blank Lines</h6>

<p>With keyword argument <code>trim_mode</code> not given, all blank lines go into the result:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;% if true %&gt; &lt;%= RUBY_VERSION %&gt; &lt;% end %&gt; TEMPLATE <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result.lines.each {|line| puts line.inspect } “n” “3.4.5n” “n” “`</p>

<p>You can give <code>trim_mode: &#39;-&#39;</code>, you can suppress each blank line whose source line ends with <code>-%></code> (instead of <code>%></code>):</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;% if true -%&gt; &lt;%= RUBY_VERSION %&gt; &lt;% end -%&gt; TEMPLATE <a href="#new-class_method" title="ERB.new (method)">.new</a>(template, trim_mode: ’-‘).result.lines.each {|line| puts line.inspect } “3.4.5n” “`</p>

<p>It is an error to use the trailing <code>‘-%>’</code> notation without ‘trim_mode: ’-‘`:</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result.lines.each {|line| puts line.inspect } # Raises SyntaxError. “`</p>

<h6 id="label-Suppressing+Unwanted+Newlines">Suppressing Unwanted Newlines</h6>

<p>Consider this template:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;% RUBY_VERSION %&gt; &lt;%= RUBY_VERSION %&gt; foo &lt;% RUBY_VERSION %&gt; foo &lt;%= RUBY_VERSION %&gt; TEMPLATE “`</p>

<p>With keyword argument <code>trim_mode</code> not given, all newlines go into the result:</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result.lines.each {|line| puts line.inspect } “n” “3.4.5n” “foo n” “foo 3.4.5n” “`</p>

<p>You can give <code>trim_mode: &#39;&gt;&#39;</code> to suppress the trailing newline for each line that ends with <code>‘%<’</code> (regardless of its beginning):</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(template, trim_mode: ’&gt;‘).result.lines.each {|line| puts line.inspect } “3.4.5foo foo 3.4.5” “`</p>

<p>You can give <code>trim_mode: &#39;&lt;&gt;&#39;</code> to suppress the trailing newline for each line that both begins with <code>‘<%’</code> and ends with <code>‘%>’</code>:</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(template, trim_mode: ’&lt;&gt;‘).result.lines.each {|line| puts line.inspect } “3.4.5foo n” “foo 3.4.5n” “`</p>

<h6 id="label-Combining+Trim+Modes">Combining Trim Modes</h6>

<p>You can combine certain trim modes:</p>
<ul><li>
<p><code>‘%-’</code>: Enable shorthand and omit each blank line ending with <code>‘-%>’</code>.</p>
</li><li>
<p><code>‘%>’</code>: Enable shorthand and omit newline for each line ending with <code>‘%>’</code>.</p>
</li><li>
<p><code>‘%<>’</code>: Enable shorthand and omit newline for each line starting with <code>‘<%’</code> and ending with <code>‘%>’</code>.</p>
</li></ul>

<h5 id="label-Comment+Tags">Comment Tags</h5>

<p>You can embed a comment in a template using a *comment tag*; its syntax is <code>&lt;%# <em>text</em> %&gt;</code>, where <strong>text</strong> is the text of the comment.</p>

<p>When you call method <a href="#result-instance_method" title="ERB#result (method)">#result</a>, it removes the entire comment tag (generating no text in the result).</p>

<p>Example:</p>

<p>“‘ template = ’Some stuff;&lt;%# Note to self: figure out what the stuff is. %&gt; more stuff.‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(template).result # =&gt; “Some stuff; more stuff.” “`</p>

<p>A comment tag may appear anywhere in the template.</p>

<p>Note that the beginning of the tag must be <code>‘<%#’</code>, not <code>&#39;&lt;% #&#39;</code>.</p>

<p>In this example, the tag begins with <code>&#39;&lt;% #&#39;</code>, and so is an execution tag, not a comment tag; the cited code consists entirely of a Ruby-style comment (which is of course ignored):</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(’Some stuff;&lt;% # Note to self: figure out what the stuff is. %&gt; more stuff.‘).result</p>

<h3 id="label-3D-3E+-22Some+stuff-3B-22">=&gt; “Some stuff;”</h3>

<p>“‘</p>

<h4 id="label-Encodings">Encodings</h4>

<p>An ERB object has an [<a href="encoding">encoding]</a>, which is by default the encoding of the template string; the result string will also have that encoding.</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;%# Comment. %&gt; TEMPLATE erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) template.encoding   # =&gt; #&lt;Encoding:UTF-8&gt; erb.encoding        # =&gt; #&lt;Encoding:UTF-8&gt; erb.result.encoding # =&gt; #&lt;Encoding:UTF-8&gt; “`</p>

<p>You can specify a different encoding by adding a [magic comment][magic comments] at the top of the given template:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;%#-*- coding: Big5 -*-%&gt; &lt;%# Comment. %&gt; TEMPLATE erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) template.encoding   # =&gt; #&lt;Encoding:UTF-8&gt; erb.encoding        # =&gt; #&lt;Encoding:Big5&gt; erb.result.encoding # =&gt; #&lt;Encoding:Big5&gt; “`</p>

<h4 id="label-Error+Reporting">Error Reporting</h4>

<p>Consider this template (containing an error):</p>

<p>“‘ template = ’&lt;%= nosuch %&gt;‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) “`</p>

<p>When ERB reports an error, it includes a file name (if available) and a line number; the file name comes from method <a href="#filename-instance_method" title="ERB#filename (method)">#filename</a>, the line number from method <a href="#lineno-instance_method" title="ERB#lineno (method)">#lineno</a>.</p>

<p>Initially, those values are <code>nil</code> and <code>0</code>, respectively; these initial values are reported as <code>&#39;(erb)&#39;</code> and <code>1</code>, respectively:</p>

<p>“‘ erb.filename # =&gt; nil erb.lineno   # =&gt; 0 erb.result (erb):1:in ’&lt;main&gt;‘: undefined local variable or method ’nosuch’ for main (NameError) “‘</p>

<p>You can use methods <a href="#filename=-instance_method" title="ERB#filename= (method)">#filename=</a> and <a href="#lineno=-instance_method" title="ERB#lineno= (method)">#lineno=</a> to assign values that are more meaningful in your context:</p>

<p>“‘ erb.filename = ’t.txt’ erb.lineno = 555 erb.result t.txt:556:in ‘&lt;main&gt;’: undefined local variable or method ‘nosuch’ for main (NameError) “‘</p>

<p>You can use method <a href="#location=-instance_method" title="ERB#location= (method)">#location=</a> to set both values:</p>

<p>“‘ erb.location = [’u.txt’, 999] erb.result u.txt:1000:in ‘&lt;main&gt;’: undefined local variable or method ‘nosuch’ for main (NameError) “‘</p>

<h4 id="label-Plain+Text+with+Embedded+Ruby">Plain Text with Embedded Ruby</h4>

<p>Here’s a plain-text template; it uses the literal notation <code>&#39;%q{ ... }&#39;</code> to define the template (see [%q literals][%q literals]); this avoids problems with backslashes.</p>

<p>“‘ template = %q{ From:  James Edward Gray II &lt;james@grayproductions.net&gt; To:  &lt;%= to %&gt; Subject:  Addressing Needs</p>

<p>&lt;%= <a href="/\w+/">to</a> %&gt;:</p>

<p>Just wanted to send a quick note assuring that your needs are being addressed.</p>

<p>I want you to know that my team will keep working on the issues, especially:</p>

<p>&lt;%# ignore numerous minor requests – focus on priorities %&gt; % priorities.each do |priority|</p>

<pre class="code ruby"><code class="ruby"><span class='op'>*</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%=</span><span class='tstring_content'> priority %&gt;</span></code></pre>

<p>% end</p>

<p>Thanks for your patience.</p>

<p>James Edward Gray II } “‘</p>

<p>The template will need these:</p>

<p>“‘ to = ’Community Spokesman &lt;spokesman@ruby_community.org&gt;‘ priorities = [ ’Run Ruby Quiz’,</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Document Modules</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Answer Questions on Ruby Talk</span><span class='tstring_end'>&#39;</span></span> ]</code></pre>

<p>“‘</p>

<p>Finally, create the ERB object and get the result</p>

<p>“‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template, trim_mode: ’%&lt;&gt;‘) puts erb.result(binding)</p>

<p>From:  James Edward Gray II &lt;james@grayproductions.net&gt; To:  Community Spokesman &lt;spokesman@ruby_community.org&gt; Subject:  Addressing Needs</p>

<p>Community:</p>

<p>Just wanted to send a quick note assuring that your needs are being addressed.</p>

<p>I want you to know that my team will keep working on the issues, especially:</p>
<ul><li>
<p>Run Ruby Quiz</p>
</li><li>
<p>Document Modules</p>
</li><li>
<p>Answer Questions on Ruby Talk</p>
</li></ul>

<p>Thanks for your patience.</p>

<p>James Edward Gray II “‘</p>

<h4 id="label-HTML+with+Embedded+Ruby">HTML with Embedded Ruby</h4>

<p>This example shows an HTML template.</p>

<p>First, here’s a custom class, <code>Product</code>:</p>

<p>“‘ class Product</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_cost'>cost</span>)
  <span class='ivar'>@code</span> <span class='op'>=</span> <span class='id identifier rubyid_code'>code</span>
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@desc</span> <span class='op'>=</span> <span class='id identifier rubyid_desc'>desc</span>
  <span class='ivar'>@cost</span> <span class='op'>=</span> <span class='id identifier rubyid_cost'>cost</span>
  <span class='ivar'>@features</span> <span class='op'>=</span> []
<span class='kw'>end</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='id identifier rubyid_feature'>feature</span>)
  <span class='ivar'>@features</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_feature'>feature</span>
<span class='kw'>end</span>

<span class='comment'># Support templating of member data.
</span><span class='kw'>def</span> <span class='id identifier rubyid_get_binding'>get_binding</span>
  <span class='id identifier rubyid_binding'>binding</span>
<span class='kw'>end</span></code></pre>

<p>end “‘</p>

<p>The template below will need these values:</p>

<p>“‘ toy = <code>Product.new</code>(’TZ-1002’,</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Rubysapien</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Geek&#39;s Best Friend!  Responds to Ruby commands...</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='float'>999.95</span>
)</code></pre>

<p>toy.add_feature(‘Listens for verbal commands in the Ruby language!’) toy.add_feature(‘Ignores Perl, Java, and all C variants.’) toy.add_feature(‘Karate-Chop Action!!!’) toy.add_feature(‘Matz signature on left leg.’) toy.add_feature(‘Gem studded eyes… Rubies, of course!’) “‘</p>

<p>Here’s the HTML:</p>

<p>“‘ template = &lt;&lt;TEMPLATE &lt;html&gt;</p>

<pre class="code xml"><code class="xml">&lt;head&gt;&lt;title&gt;Ruby Toys -- &lt;%= @name %&gt;&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;&lt;%= @name %&gt; (&lt;%= @code %&gt;)&lt;/h1&gt;
  &lt;p&gt;&lt;%= @desc %&gt;&lt;/p&gt;
  &lt;ul&gt;
    &lt;% @features.each do |f| %&gt;
      &lt;li&gt;&lt;b&gt;&lt;%= f %&gt;&lt;/b&gt;&lt;/li&gt;
    &lt;% end %&gt;
  &lt;/ul&gt;
  &lt;p&gt;
    &lt;% if @cost &lt; 10 %&gt;
      &lt;b&gt;Only &lt;%= @cost %&gt;!!!&lt;/b&gt;
    &lt;% else %&gt;
       Call for a price, today!
    &lt;% end %&gt;
  &lt;/p&gt;
&lt;/body&gt;
</code></pre>

<p>&lt;/html&gt; TEMPLATE “‘</p>

<p>Finally, create the ERB object and get the result (omitting some blank lines):</p>

<p>“‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) puts erb.result(toy.get_binding) &lt;html&gt;</p>

<pre class="code xml"><code class="xml">&lt;head&gt;&lt;title&gt;Ruby Toys -- Rubysapien&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Rubysapien (TZ-1002)&lt;/h1&gt;
  &lt;p&gt;Geek&#39;s Best Friend!  Responds to Ruby commands...&lt;/p&gt;
  &lt;ul&gt;
      &lt;li&gt;&lt;b&gt;Listens for verbal commands in the Ruby language!&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;Ignores Perl, Java, and all C variants.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;Karate-Chop Action!!!&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;Matz signature on left leg.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;Gem studded eyes... Rubies, of course!&lt;/b&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;p&gt;
       Call for a price, today!
  &lt;/p&gt;
&lt;/body&gt;
</code></pre>

<p>&lt;/html&gt; “‘</p>

<h4 id="label-Other+Template+Processors">Other Template Processors</h4>

<p>Various Ruby projects have their own template processors. The Ruby Processing System [<a href="rdoc">RDoc]</a>, for example, has one that can be used elsewhere.</p>

<p>Other popular template processors may found in the [Template Engines][template engines] page of the Ruby Toolbox.</p>

<p>[%q literals]: <a href="https://docs.ruby-lang.org/en/master/syntax/literals_rdoc.html#label-25q-3A+Non-Interpolable+String+Literals">docs.ruby-lang.org/en/master/syntax/literals_rdoc.html#label-25q-3A+Non-Interpolable+String+Literals</a> [augmented binding]: ERB@Augmented+Binding [binding object]: <a href="https://docs.ruby-lang.org/en/master/Binding.html">docs.ruby-lang.org/en/master/Binding.html</a> [comment tags]: ERB@Comment+Tags [default binding]: ERB@Default+Binding [encoding]: <a href="https://docs.ruby-lang.org/en/master/Encoding.html">docs.ruby-lang.org/en/master/Encoding.html</a> [execution tags]: ERB@Execution+Tags [expression tags]: ERB@Expression+Tags [kernel#binding]: <a href="https://docs.ruby-lang.org/en/master/Kernel.html#method-i-binding">docs.ruby-lang.org/en/master/Kernel.html#method-i-binding</a> [local binding]: ERB@Local+Binding [magic comments]: <a href="https://docs.ruby-lang.org/en/master/syntax/comments_rdoc.html#label-Magic+Comments">docs.ruby-lang.org/en/master/syntax/comments_rdoc.html#label-Magic+Comments</a> [rdoc]: <a href="https://ruby.github.io/rdoc">ruby.github.io/rdoc</a> [sprintf]: <a href="https://docs.ruby-lang.org/en/master/Kernel.html#method-i-sprintf">docs.ruby-lang.org/en/master/Kernel.html#method-i-sprintf</a> [template engines]: <a href="https://www.ruby-toolbox.com/categories/template_engines">www.ruby-toolbox.com/categories/template_engines</a> [template processor]: <a href="https://en.wikipedia.org/wiki/Template_processor">en.wikipedia.org/wiki/Template_processor</a></p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='NOT_GIVEN-constant' class='summary_signature priv'>NOT_GIVEN =</span>
    <span class='note title private'>private</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Placeholder constant; used as default value for certain method arguments.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L881-L881'># File 'lib/erb.rb', line 881</a>    <pre class='code ruby'><span class='kw'>defined?</span>(<span class='const'>Ractor</span>) <span class='op'>?</span> <span class='const'>Ractor</span>.<span class='id identifier rubyid_make_shareable'>make_shareable</span>(<span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>) <span class='op'>:</span> <span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span></pre>
  </li>
  <li>
    <span id='Revision-constant' class='summary_signature nodoc'>Revision =</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>#‘</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L781-L781'># File 'lib/erb.rb', line 781</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$Date::                           $</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The string ERB version.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb/version.rb#L4-L4'># File 'lib/erb/version.rb', line 4</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5.0.2</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(template, trim_mode: nil, eoutvar: &#39;_erbout&#39;)  &#x21d2; ERB </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#version-class_method" title="version (class method)">.<strong>version</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#filename-instance_method" title="#filename (instance method)">#<strong>filename</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#src-instance_method" title="#src (instance method)">#<strong>src</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#def_class-instance_method" title="#def_class (instance method)">#<strong>def_class</strong>(super_class = Object, method_name = &#39;result&#39;)  &#x21d2; new_class </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#def_method-instance_method" title="#def_method (instance method)">#<strong>def_method</strong>(module, method_signature, filename = &#39;(ERB)&#39;)  &#x21d2; method_name </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#def_module-instance_method" title="#def_module (instance method)">#<strong>def_module</strong>(method_name = &#39;erb&#39;)  &#x21d2; new_module </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#location=-instance_method" title="#location= (instance method)">#<strong>location=</strong>([filename, lineno]=&gt; [filename, lineno])  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#make_compiler-instance_method" title="#make_compiler (instance method)">#<strong>make_compiler</strong>  &#x21d2; ERB </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#result-instance_method" title="#result (instance method)">#<strong>result</strong>(binding = new_toplevel)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#result_with_hash-instance_method" title="#result_with_hash (instance method)">#<strong>result_with_hash</strong>(hash)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(binding = new_toplevel)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_eoutvar-instance_method" title="#set_eoutvar (instance method)">#<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#new_toplevel-instance_method" title="#new_toplevel (instance method)">#<strong>new_toplevel</strong>(symbols)  &#x21d2; Binding </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(template, trim_mode: nil, eoutvar: &#39;_erbout&#39;)  &#x21d2; <code>ERB</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns a new ERB object containing the given string <code>template</code>.</p>

<p>For details about <code>template</code>, its embedded tags, and generated results, see <code>ERB</code>.</p>

<p>**Keyword Argument <code>trim_mode</code>**</p>

<p>You can use keyword argument <code>trim_mode: &#39;%&#39;</code> to enable the [shorthand format][shorthand format] for execution tags.</p>

<p>This value allows [blank line control][blank line control]:</p>
<ul><li>
<p><code>‘-’</code>: Omit each blank line ending with <code>‘%>’</code>.</p>
</li></ul>

<p>Other values allow [newline control][newline control]:</p>
<ul><li>
<p><code>‘>’</code>: Omit newline for each line ending with <code>‘%>’</code>.</p>
</li><li>
<p><code>‘<>’</code>: Omit newline for each line starting with <code>‘<%’</code> and ending with <code>‘%>’</code>.</p>
</li></ul>

<p>You can also [combine trim modes][combine trim modes].</p>

<p>**Keyword Argument <code>eoutvar</code>**</p>

<p>The string value of keyword argument <code>eoutvar</code> specifies the name of the variable that method <a href="#result-instance_method" title="ERB#result (method)">#result</a> uses to construct its result string; see <a href="#src-instance_method" title="ERB#src (method)">#src</a>.</p>

<p>This is useful when you need to run multiple ERB templates through the same binding and/or when you want to control where output ends up.</p>

<p>It’s good practice to choose a variable name that begins with an underscore: <code>‘_’</code>.</p>

<p><strong>Backward Compatibility</strong></p>

<p>The calling sequence given above – which is the one you should use – is a simplified version of the complete formal calling sequence, which is:</p>

<p>“‘ <code>new</code>(template, safe_level=NOT_GIVEN, legacy_trim_mode=NOT_GIVEN, legacy_eoutvar=NOT_GIVEN, trim_mode: nil, eoutvar: ’_erbout’) “‘</p>

<p>The second, third, and fourth positional arguments (those in the second line above) are deprecated; this method issues warnings if they are given.</p>

<p>However, their values, if given, are handled thus:</p>
<ul><li>
<p><code>safe_level</code>: ignored.</p>
</li><li>
<p><code>legacy_trim_mode</code>: overrides keyword argument <code>trim_mode</code>.</p>
</li><li>
<p><code>legacy_eoutvar</code>: overrides keyword argument <code>eoutvar</code>.</p>
</li></ul>

<p>[blank line control]: ERB@Suppressing+Unwanted+Blank+Lines [combine trim modes]: ERB@Combining+Trim+Modes [newline control]: ERB@Suppressing+Unwanted+Newlines [shorthand format]: ERB@Shorthand+Format+for+Execution+Tags</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L856-L876'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='856' data-end='876'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 856</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_safe_level'>safe_level</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>eoutvar:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span>)
  <span class='comment'># Complex initializer for $SAFE deprecation at [Feature #14256]. Use keyword arguments to pass trim_mode or eoutvar.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_safe_level'>safe_level</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing safe_level with the 2nd argument of ERB.new is deprecated. Do not use it, and specify other arguments as keyword arguments.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing trim_mode with the 3rd argument of ERB.new is deprecated. Use keyword argument like ERB.new(str, trim_mode: ...) instead.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
    <span class='id identifier rubyid_trim_mode'>trim_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing eoutvar with the 4th argument of ERB.new is deprecated. Use keyword argument like ERB.new(str, eoutvar: ...) instead.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
    <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_compiler'>compiler</span> <span class='op'>=</span> <span class='id identifier rubyid_make_compiler'><a href="#make_compiler-instance_method" title="ERB#make_compiler (method)">make_compiler</a></span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
  <span class='id identifier rubyid_set_eoutvar'><a href="#set_eoutvar-instance_method" title="ERB#set_eoutvar (method)">set_eoutvar</a></span>(<span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span>)
  <span class='ivar'>@src</span><span class='comma'>,</span> <span class='ivar'>@encoding</span><span class='comma'>,</span> <span class='ivar'>@frozen_string</span> <span class='op'>=</span> <span class='op'>*</span><span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_compile'>compile</span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@_init</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_singleton_class'>singleton_class</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="version-class_method">
  <h3 class='signature  first'>
    .<strong>version</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns the string ERB version.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L790-L792'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='790' data-end='792'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 790</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_version'>version</span>
  <span class='const'><a href="#VERSION-constant" title="ERB::VERSION (constant)">VERSION</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="encoding-instance_method">
  <h3 class='signature ro first'>
    #<strong>encoding</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns the encoding of <code>self</code>; see [<a href="encodings">Encodings]</a>:</p>

<p>[encodings]: ERB@Encodings</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L953-L953'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='953' data-end='953'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 953</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filename-instance_method">
  <h3 class='signature rw'>
    #<strong>filename</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Sets or returns the file name to be used in reporting errors; see [Error Reporting][error reporting].</p>

<p>[error reporting]: ERB@Error+Reporting</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L961-L961'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='961' data-end='961'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 961</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filename'>filename</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lineno-instance_method">
  <h3 class='signature rw'>
    #<strong>lineno</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Sets or returns the line number to be used in reporting errors; see [Error Reporting][error reporting].</p>

<p>[error reporting]: ERB@Error+Reporting</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L969-L969'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='969' data-end='969'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 969</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lineno'>lineno</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="src-instance_method">
  <h3 class='signature ro'>
    #<strong>src</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns the Ruby code that, when executed, generates the result; the code is executed by method <a href="#result-instance_method" title="ERB#result (method)">#result</a>, and by its wrapper methods <a href="#result_with_hash-instance_method" title="ERB#result_with_hash (method)">#result_with_hash</a> and <a href="#run-instance_method" title="ERB#run (method)">#run</a>:</p>

<p>“‘ template = ’The time is &lt;%= <code>Time.now</code> %&gt;.‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) erb.src</p>

<h4 id="label-3D-3E+-22-23coding-3AUTF-8-5Cn_erbout+-3D+-2B-27-27-3B+_erbout.-3C-3C+-22The+time+is+-22.freeze-3B+_erbout.-3C-3C-28-28+-7BTime.now-7D+-29.to_s-29-3B+_erbout.-3C-3C+-22.-5C-22.freeze-3B+_erbout-22">=&gt; “#coding:UTF-8n_erbout = +”; _erbout.&lt;&lt; &quot;The time is &quot;.freeze; _erbout.&lt;&lt;(( <code>Time.now</code> ).to_s); _erbout.&lt;&lt; &quot;.&quot;.freeze; _erbout”</h4>

<p>erb.result</p>

<h4 id="label-3D-3E+-22The+time+is+2025-09-18+15-3A58-3A08+-0500.-22">=&gt; “The time is 2025-09-18 15:58:08 -0500.”</h4>

<p>“‘</p>

<p>In a more readable format:</p>

<p>“‘</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># puts erb.src.split(&#39;; &#39;)
</span><span class='comment'># #coding:UTF-8
</span><span class='comment'># _erbout = +&#39;&#39;
</span><span class='comment'># _erbout.&lt;&lt; &quot;The time is &quot;.freeze
</span><span class='comment'># _erbout.&lt;&lt;(( Time.now ).to_s)
</span><span class='comment'># _erbout.&lt;&lt; &quot;.&quot;.freeze
</span><span class='comment'># _erbout</span></code></pre>

<p>“‘</p>

<p>Variable <code>_erbout</code> is used to store the intermediate results in the code; the name <code>_erbout</code> is the default in <a href="#new-class_method" title="ERB.new (method)">.new</a>, and can be changed via keyword argument <code>eoutvar</code>:</p>

<p>“‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template, eoutvar: ’_foo’) puts template.src.split(‘; ’) #coding:UTF-8 _foo = +” _foo.&lt;&lt; “The time is ”.freeze _foo.&lt;&lt;(( <code>Time.now</code> ).to_s) _foo.&lt;&lt; “.”.freeze _foo “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L944-L944'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='944' data-end='944'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 944</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_src'>src</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="def_class-instance_method">
  <h3 class='signature  first'>
    #<strong>def_class</strong>(super_class = Object, method_name = &#39;result&#39;)  &#x21d2; <code>new_class</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns a new nameless class whose superclass is <code>super_class</code>, and which has instance method <code>method_name</code>.</p>

<p>Create a template from HTML that has embedded expression tags that use <code>@arg1</code> and <code>@arg2</code>:</p>

<p>“‘ html = &lt;&lt;TEMPLATE &lt;html&gt; &lt;body&gt;</p>

<pre class="code xml"><code class="xml">&lt;p&gt;&lt;%= @arg1 %&gt;&lt;/p&gt;
&lt;p&gt;&lt;%= @arg2 %&gt;&lt;/p&gt;
</code></pre>

<p>&lt;/body&gt; &lt;/html&gt; TEMPLATE template = <a href="#new-class_method" title="ERB.new (method)">.new</a>(html) “‘</p>

<p>Create a base class that has <code>@arg1</code> and <code>@arg2</code>:</p>

<p>“‘ class MyBaseClass</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_arg1'>arg1</span><span class='comma'>,</span> <span class='id identifier rubyid_arg2'>arg2</span>)
  <span class='ivar'>@arg1</span> <span class='op'>=</span> <span class='id identifier rubyid_arg1'>arg1</span>
  <span class='ivar'>@arg2</span> <span class='op'>=</span> <span class='id identifier rubyid_arg2'>arg2</span>
<span class='kw'>end</span></code></pre>

<p>end “‘</p>

<p>Use method <code>#def_class</code> to create a subclass that has method <code>:render</code>:</p>

<p>“‘ MySubClass = template.def_class(MyBaseClass, :render) “`</p>

<p>Generate the result:</p>

<p>“‘ puts <code>MySubClass.new</code>(’foo’, 123).render &lt;html&gt; &lt;body&gt;</p>

<pre class="code xml"><code class="xml">&lt;p&gt;foo&lt;/p&gt;
&lt;p&gt;123&lt;/p&gt;
</code></pre>

<p>&lt;/body&gt; &lt;/html&gt; “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1215-L1219'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1215' data-end='1219'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1215</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_class'>def_class</span>(<span class='id identifier rubyid_superklass'>superklass</span><span class='op'>=</span><span class='const'><a href="Object.html" title="Object (class)">Object</a></span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_cls'>cls</span> <span class='op'>=</span> <span class='const'>Class</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_superklass'>superklass</span>)
  <span class='id identifier rubyid_def_method'><a href="#def_method-instance_method" title="ERB#def_method (method)">def_method</a></span>(<span class='id identifier rubyid_cls'>cls</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_cls'>cls</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="def_method-instance_method">
  <h3 class='signature '>
    #<strong>def_method</strong>(module, method_signature, filename = &#39;(ERB)&#39;)  &#x21d2; <code>method_name</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Creates and returns a new instance method in the given module <code>module</code>; returns the method name as a symbol.</p>

<p>The method is created from the given <code>method_signature</code>, which consists of the method name and its argument names (if any).</p>

<p>The <a href="#filename-instance_method" title="ERB#filename (method)">#filename</a> sets the value of #filename; see [Error Reporting][error reporting].</p>

<p>[error reporting]: ERB@Error+Reporting</p>

<p>“‘ template = ’&lt;%= arg1 %&gt; &lt;%= arg2 %&gt;‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) MyModule = <code>Module.new</code> erb.def_method(MyModule, ’render(arg1, arg2)‘) # =&gt; :render class MyClass; include MyModule; end <code>MyClass.new</code>.render(’foo’, 123)                      # =&gt; “foo 123” “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1132-L1137'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1132' data-end='1137'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1132</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_method'>def_method</span>(<span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(?!#|$)</span><span class='regexp_end'>/</span></span>) {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_methodname'>methodname</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>} <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nend\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_mod'>mod</span>.<span class='id identifier rubyid_module_eval'>module_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_eval'>eval</span>(<span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span><span class='comma'>,</span> <span class='id identifier rubyid_binding'>binding</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="def_module-instance_method">
  <h3 class='signature '>
    #<strong>def_module</strong>(method_name = &#39;erb&#39;)  &#x21d2; <code>new_module</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns a new nameless module that has instance method <code>method_name</code>.</p>

<p>“‘ template = ’&lt;%= arg1 %&gt; &lt;%= arg2 %&gt;‘ erb = <a href="#new-class_method" title="ERB.new (method)">.new</a>(template) MyModule = template.def_module(’render(arg1, arg2)‘) class MyClass</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='const'>MyModule</span></code></pre>

<p>end <code>MyClass.new</code>.render(‘foo’, 123)</p>

<h4 id="label-3D-3E+-22foo+123-22">=&gt; “foo 123”</h4>

<p>“‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1157-L1161'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1157' data-end='1161'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1157</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_module'>def_module</span>(<span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_mod'>mod</span> <span class='op'>=</span> <span class='const'>Module</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>
  <span class='id identifier rubyid_def_method'><a href="#def_method-instance_method" title="ERB#def_method (method)">def_method</a></span>(<span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_mod'>mod</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="location=-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>location=</strong>([filename, lineno]=&gt; [filename, lineno])  </span>
      <span class='overload'>#<strong>location=</strong>(filename)  &#x21d2; <a href="#filename-instance_method" title="ERB#filename (method)">filename</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Sets the values of <a href="#filename-instance_method" title="ERB#filename (method)">#filename</a> and, if given, #lineno; see [Error Reporting][error reporting].</p>

<p>[error reporting]: ERB@Error+Reporting</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L981-L984'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='981' data-end='984'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 981</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_location='>location=</span>((<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span><span class='comma'>,</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span>))
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="make_compiler-instance_method">
  <h3 class='signature '>
    #<strong>make_compiler</strong>  &#x21d2; <code>ERB</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns a new <a href="ERB/Compiler.html" title="ERB::Compiler (class)"><code>::ERB::Compiler</code></a> with the given <code>trim_mode</code>; for <code>trim_mode</code> values, see <a href="#new-class_method" title="ERB.new (method)">.new</a>:</p>

<p>“‘ <a href="#new-class_method" title="ERB.new (method)">.new</a>(”).make_compiler(nil)</p>

<h4 id="label-3D-3E+-23-3CERB-3A-3ACompiler-3A0x000001cff9467678+-40insert_cmd-3D-22print-22-2C+-40percent-3Dfalse-2C+-40post_cmd-3D-5B-5D-2C+-40pre_cmd-3D-5B-5D-2C+-40put_cmd-3D-22print-22-2C+-40trim_mode-3Dnil-3E">=&gt; #&lt;ERB::Compiler:0x000001cff9467678 @insert_cmd=“print”, @percent=false, @post_cmd=[], @pre_cmd=[], @put_cmd=“print”, @trim_mode=nil&gt;</h4>

<p>“‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L898-L900'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='898' data-end='900'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 898</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_make_compiler'>make_compiler</span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
  <span class='const'>ERB</span><span class='op'>::</span><span class='const'><a href="ERB/Compiler.html" title="ERB::Compiler (class)">Compiler</a></span>.<span class='id identifier rubyid_new'><a href="ERB/Compiler.html#new-class_method" title="ERB::Compiler.new (method)">new</a></span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new_toplevel-instance_method">
  <h3 class='signature priv'>
    #<strong>new_toplevel</strong>(symbols)  &#x21d2; <code>Binding</code>  <span class="extras">(<span class='priv'>private</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns a new binding based on <code>TOPLEVEL_BINDING</code>; used to create a default binding for a call to <a href="#result-instance_method" title="ERB#result (method)">#result</a>.</p>

<p>See [Default Binding][default binding].</p>

<p>Argument <code>symbols</code> is an array of symbols; each symbol <code>symbol</code> is defined as a new variable to hide and prevent it from overwriting a variable of the same name already defined within the binding.</p>

<p>[default binding]: ERB@Default+Binding</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1095-L1104'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1095' data-end='1104'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1095</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new_toplevel'>new_toplevel</span>(<span class='id identifier rubyid_vars'>vars</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='const'>TOPLEVEL_BINDING</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vars'>vars</span>
    <span class='id identifier rubyid_vars'>vars</span> <span class='op'>=</span> <span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_select'>select</span> {<span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_local_variable_defined?'>local_variable_defined?</span>(<span class='id identifier rubyid_v'>v</span>)}
    <span class='kw'>unless</span> <span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_empty?'>empty?</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_eval'>eval</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tap {|;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_content'>| break binding}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="result-instance_method">
  <h3 class='signature '>
    #<strong>result</strong>(binding = new_toplevel)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns the string result formed by processing ERB tags found in the stored template in <code>self</code>.</p>

<p>With no argument given, uses the default binding; see [Default Binding][default binding].</p>

<p>With argument <code>binding</code> given, uses the local binding; see [Local Binding][local binding].</p>

<p>See also <a href="#result_with_hash-instance_method" title="ERB#result_with_hash (method)">#result_with_hash</a>.</p>

<p>[default binding]: ERB@Default+Binding [local binding]: ERB@Local+Binding</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1052-L1057'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1052' data-end='1057'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1052</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_result'>result</span>(<span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>)
  <span class='kw'>unless</span> <span class='ivar'>@_init</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_singleton_class'>singleton_class</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not initialized</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_eval'>eval</span>(<span class='ivar'>@src</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> (<span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(erb)</span><span class='tstring_end'>&#39;</span></span>)<span class='comma'>,</span> <span class='ivar'>@lineno</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="result_with_hash-instance_method">
  <h3 class='signature '>
    #<strong>result_with_hash</strong>(hash)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Returns the string result formed by processing ERB tags found in the stored string in <code>self</code>; see [Augmented Binding][augmented binding].</p>

<p>See also <a href="#result-instance_method" title="ERB#result (method)">#result</a>.</p>

<p>[augmented binding]: ERB@Augmented+Binding</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1071-L1077'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1071' data-end='1077'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1071</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_result_with_hash'>result_with_hash</span>(<span class='id identifier rubyid_hash'>hash</span>)
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>(<span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_keys'>keys</span>)
  <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_local_variable_set'>local_variable_set</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_b'>b</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run-instance_method">
  <h3 class='signature '>
    #<strong>run</strong>(binding = new_toplevel)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Like <a href="#result-instance_method" title="ERB#result (method)">#result</a>, but prints the result string (instead of returning it); returns <code>nil</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1030-L1032'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1030' data-end='1032'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1030</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>(<span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>)
  <span class='id identifier rubyid_print'>print</span> <span class='kw'>self</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_b'>b</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_eoutvar-instance_method">
  <h3 class='signature '>
    #<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p>Sets the <code>eoutvar</code> value in the <a href="ERB/Compiler.html" title="ERB::Compiler (class)"><code>::ERB::Compiler</code></a> object <code>compiler</code>; returns a 1-element array containing the value of <code>eoutvar</code>:</p>

<p>“‘ template = <a href="#new-class_method" title="ERB.new (method)">.new</a>(”) compiler = template.make_compiler(nil) pp compiler #&lt;ERB::Compiler:0x000001cff8a9aa00</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@insert_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>print</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='ivar'>@percent</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span>
<span class='ivar'>@post_cmd</span><span class='op'>=</span>[]<span class='comma'>,</span>
<span class='ivar'>@pre_cmd</span><span class='op'>=</span>[]<span class='comma'>,</span>
<span class='ivar'>@put_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>print</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='ivar'>@trim_mode</span><span class='op'>=</span><span class='kw'>nil</span><span class='op'>&gt;</span></code></pre>

<p>template.set_eoutvar(compiler, ‘_foo’) # =&gt; [“_foo”] pp compiler #&lt;ERB::Compiler:0x000001cff8a9aa00</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@insert_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='ivar'>@percent</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span>
<span class='ivar'>@post_cmd</span><span class='op'>=</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span>
<span class='ivar'>@pre_cmd</span><span class='op'>=</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo = +&#39;&#39;</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span>
<span class='ivar'>@put_cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_foo.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='ivar'>@trim_mode</span><span class='op'>=</span><span class='kw'>nil</span><span class='op'>&gt;</span></code></pre>

<p>“‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/lib/erb.rb#L1016-L1021'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1016' data-end='1021'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 1016</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_eoutvar'>set_eoutvar</span>(<span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_put_cmd'>put_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_insert_cmd'>insert_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_pre_cmd'>pre_cmd</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'> = +&#39;&#39;</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_post_cmd'>post_cmd</span> <span class='op'>=</span> [<span class='id identifier rubyid_eoutvar'>eoutvar</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>