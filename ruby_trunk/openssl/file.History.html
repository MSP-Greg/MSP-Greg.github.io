<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: History &mdash; openssl  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "History",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>openssl</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: History&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h1>Version 4.0.0</h1>

<h2>Compatibility</h2>

<ul>
<li>Ruby &gt;= 2.7</li>
<li><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> &gt;= 1.1.1, LibreSSL &gt;= 3.9, and AWS-LC 1.66.0

<ul>
<li>Removed support for OpenSSL 1.0.2-1.1.0 and LibreSSL 3.1-3.8.
<a href="https://github.com/ruby/openssl/issues/835">[GitHub #835]</a></li>
<li>Added support for AWS-LC.
<a href="https://github.com/ruby/openssl/issues/833">[GitHub #833]</a></li>
</ul></li>
</ul>

<h2>Notable changes</h2>

<ul>
<li><a href="OpenSSL/SSL.html" title="OpenSSL::SSL (module)"><code>::OpenSSL::SSL</code></a>

<ul>
<li>Reduce overhead when writing to <a href="OpenSSL/SSL/SSLSocket.html" title="OpenSSL::SSL::SSLSocket (class)"><code>::OpenSSL::SSL::SSLSocket</code></a>. <code>#syswrite</code> no
longer creates a temporary String object.
<a href="https://github.com/ruby/openssl/pull/831">[GitHub #831]</a></li>
<li>Make <a href="OpenSSL/SSL/SSLContext.html#min_version=-instance_method" title="OpenSSL::SSL::SSLContext#min_version= (method)">OpenSSL::SSL::SSLContext#min_version=</a> and <code>#max_version=</code> wrap the
corresponding OpenSSL APIs directly, and remove the fallback to SSL options.
<a href="https://github.com/ruby/openssl/pull/849">[GitHub #849]</a></li>
<li>Add <a href="OpenSSL/SSL/SSLContext.html#sigalgs=-instance_method" title="OpenSSL::SSL::SSLContext#sigalgs= (method)">OpenSSL::SSL::SSLContext#sigalgs=</a> and <code>#client_sigalgs=</code> for
specifying signature algorithms to use for connections.
<a href="https://github.com/ruby/openssl/pull/895">[GitHub #895]</a></li>
<li>Rename <a href="OpenSSL/SSL/SSLContext.html#ecdh_curves=-instance_method" title="OpenSSL::SSL::SSLContext#ecdh_curves= (method)">OpenSSL::SSL::SSLContext#ecdh_curves=</a> to <code>#groups=</code> following
the underlying OpenSSL API rename. This method is no longer specific to
ECDHE. The old method remains as an alias.
<a href="https://github.com/ruby/openssl/pull/900">[GitHub #900]</a></li>
<li>Add <a href="OpenSSL/SSL/SSLSocket.html#sigalg-instance_method" title="OpenSSL::SSL::SSLSocket#sigalg (method)">OpenSSL::SSL::SSLSocket#sigalg</a>, <code>#peer_sigalg</code>, and <code>#group</code> for
getting the signature algorithm and the key agreement group used in the
current connection.
<a href="https://github.com/ruby/openssl/pull/908">[GitHub #908]</a></li>
<li>Enable <code>SSL_CTX_set_dh_auto()</code> for servers by default.
<a href="https://github.com/ruby/openssl/pull/924">[GitHub #924]</a></li>
<li>Improve Ractor compatibility. Note that the internal-use constant
<a href="OpenSSL/SSL/SSLContext.html#DEFAULT_PARAMS-constant" title="OpenSSL::SSL::SSLContext::DEFAULT_PARAMS (constant)">OpenSSL::SSL::SSLContext::DEFAULT_PARAMS</a> is now frozen.
<a href="https://github.com/ruby/openssl/pull/925">[GitHub #925]</a></li>
</ul></li>
<li><a href="OpenSSL/PKey.html" title="OpenSSL::PKey (module)"><code>::OpenSSL::PKey</code></a>

<ul>
<li>Remove <a href="OpenSSL/PKey/EC/Point.html#mul-instance_method" title="OpenSSL::PKey::EC::Point#mul (method)">OpenSSL::PKey::EC::Point#mul</a> support with array arguments. The
underlying OpenSSL API has been removed, and the method has been deprecated
since ruby/openssl v3.0.0.
<a href="https://github.com/ruby/openssl/pull/843">[GitHub #843]</a></li>
<li><code>OpenSSL::PKey::{RSA,DSA,DH</code>#params} uses <code>nil</code> to indicate missing fields
instead of the number <code>0</code>.
<a href="https://github.com/ruby/openssl/pull/774">[GitHub #774]</a></li>
<li>Unify <a href="OpenSSL/PKey/PKeyError.html" title="OpenSSL::PKey::PKeyError (class)"><code>::OpenSSL::PKey::PKeyError</code></a> classes. The former subclasses
<a href="OpenSSL/PKey.html#DHError-constant" title="OpenSSL::PKey::DHError (constant)">OpenSSL::PKey::DHError</a>, <a href="OpenSSL/PKey.html#DSAError-constant" title="OpenSSL::PKey::DSAError (constant)">OpenSSL::PKey::DSAError</a>,
<a href="OpenSSL/PKey.html#ECError-constant" title="OpenSSL::PKey::ECError (constant)">OpenSSL::PKey::ECError</a>, and <a href="OpenSSL/PKey.html#RSAError-constant" title="OpenSSL::PKey::RSAError (constant)">OpenSSL::PKey::RSAError</a> have been merged
into a single class.
<a href="https://github.com/ruby/openssl/pull/929">[GitHub #929]</a></li>
</ul></li>
<li><a href="OpenSSL/Cipher.html" title="OpenSSL::Cipher (class)"><code>::OpenSSL::Cipher</code></a>

<ul>
<li><a href="OpenSSL/Cipher.html#encrypt-instance_method" title="OpenSSL::Cipher#encrypt (method)">OpenSSL::Cipher#encrypt</a> and <code>#decrypt</code> no longer accept arguments.
Passing passwords has been deprecated since Ruby 1.8.2 (released in 2004).
<a href="https://github.com/ruby/openssl/pull/887">[GitHub #887]</a></li>
<li><a href="OpenSSL/Cipher.html#final-instance_method" title="OpenSSL::Cipher#final (method)">OpenSSL::Cipher#final</a> raises <a href="OpenSSL/Cipher/AuthTagError.html" title="OpenSSL::Cipher::AuthTagError (class)"><code>::OpenSSL::Cipher::AuthTagError</code></a> when the
integrity check fails for AEAD ciphers. <a href="OpenSSL/Cipher/AuthTagError.html" title="OpenSSL::Cipher::AuthTagError (class)"><code>::OpenSSL::Cipher::AuthTagError</code></a> is a
new subclass of <a href="OpenSSL/Cipher/CipherError.html" title="OpenSSL::Cipher::CipherError (class)"><code>::OpenSSL::Cipher::CipherError</code></a>, which was previously raised.
<a href="https://github.com/ruby/openssl/pull/939">[GitHub #939]</a></li>
<li><a href="OpenSSL/Cipher.html#new-class_method" title="OpenSSL::Cipher.new (method)">OpenSSL::Cipher.new</a> now raises <a href="OpenSSL/Cipher/CipherError.html" title="OpenSSL::Cipher::CipherError (class)"><code>::OpenSSL::Cipher::CipherError</code></a> instead of
<code>RuntimeError</code> when OpenSSL does not recognize the algorithm.
<a href="https://github.com/ruby/openssl/pull/958">[GitHub #958]</a></li>
<li>Add support for &quot;fetched&quot; cipher algorithms with OpenSSL 3.0 or later.
<a href="https://github.com/ruby/openssl/pull/958">[GitHub #958]</a></li>
</ul></li>
<li><a href="OpenSSL/Digest.html" title="OpenSSL::Digest (class)"><code>::OpenSSL::Digest</code></a>

<ul>
<li><a href="OpenSSL/Digest.html#new-class_method" title="OpenSSL::Digest.new (method)">OpenSSL::Digest.new</a> now raises <a href="OpenSSL/Digest/DigestError.html" title="OpenSSL::Digest::DigestError (class)"><code>::OpenSSL::Digest::DigestError</code></a> instead of
<code>RuntimeError</code> when OpenSSL does not recognize the algorithm.
<a href="https://github.com/ruby/openssl/pull/958">[GitHub #958]</a></li>
<li>Add support for &quot;fetched&quot; digest algorithms with OpenSSL 3.0 or later.
<a href="https://github.com/ruby/openssl/pull/958">[GitHub #958]</a></li>
</ul></li>
<li><a href="OpenSSL/ASN1.html#decode-class_method" title="OpenSSL::ASN1.decode (method)">OpenSSL::ASN1.decode</a> now assumes a 1950-2049 year range for <code>UTCTime</code>
according to RFC 5280. It previously used a 1969-2068 range. The encoder
has always used the 1950-2049 range.
<a href="https://github.com/ruby/openssl/pull/909">[GitHub #909]</a></li>
<li><a href="OpenSSL/OpenSSLError.html" title="OpenSSL::OpenSSLError (class)"><code>::OpenSSL::OpenSSLError</code></a>, the base class for all ruby/openssl errors, carry
an additional attribute <code>#errors</code> to keep the content of OpenSSL&#39;s error
queue. Also, add <code>#detailed_message</code> for Ruby 3.2 or later.
<a href="https://github.com/ruby/openssl/pull/976">[GitHub #976]</a></li>
<li><a href="OpenSSL/PKCS7.html#new-class_method" title="OpenSSL::PKCS7.new (method)">OpenSSL::PKCS7.new</a> raises <a href="OpenSSL/PKCS7/PKCS7Error.html" title="OpenSSL::PKCS7::PKCS7Error (class)"><code>::OpenSSL::PKCS7::PKCS7Error</code></a> instead of
<code>ArgumentError</code> on error to be consistent with other constructors.
<a href="https://github.com/ruby/openssl/pull/983">[GitHub #983]</a></li>
</ul>

<h1>Version 3.3.2</h1>

<p>Merged changes in 3.1.3 and 3.2.3.</p>

<h1>Version 3.3.1</h1>

<p>Merged changes in 3.1.2 and 3.2.2.</p>

<h1>Version 3.3.0</h1>

<h2>Compatibility</h2>

<ul>
<li>Ruby version: 2.7 or later</li>
<li><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> version: <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 1.0.2 or later, and LibreSSL 3.1 or later</li>
</ul>

<h2>Notable changes</h2>

<ul>
<li><a href="OpenSSL/SSL.html" title="OpenSSL::SSL (module)"><code>::OpenSSL::SSL</code></a>

<ul>
<li><code>OpenSSL::SSL::SSLSocket#set_params</code> no longer sets <code>#min_version=</code> to TLS
1.0 except when OpenSSL 1.0.2 is used. This has been done to disable
SSL 3.0, which is not supported by default in OpenSSL 1.1.0 or later, or in
LibreSSL. This lets it respect the system default if the system-wide
configuration file specifies a higher minimum protocol version.
<a href="https://github.com/ruby/openssl/pull/710">[GitHub #710]</a></li>
<li><a href="OpenSSL/SSL/SSLSocket.html#new-class_method" title="OpenSSL::SSL::SSLSocket.new (method)">OpenSSL::SSL::SSLSocket.new</a> no longer enables the <a href="OpenSSL/SSL.html#OP_ALL-constant" title="OpenSSL::SSL::OP_ALL (constant)">OpenSSL::SSL::OP_ALL</a>
SSL options by default and follows the system default.
<a href="https://github.com/ruby/openssl/pull/767">[GitHub #767]</a></li>
<li>Add the following IO methods to <a href="OpenSSL/SSL/SSLSocket.html" title="OpenSSL::SSL::SSLSocket (class)"><code>::OpenSSL::SSL::SSLSocket</code></a>, which will pass
along to the underlying socket: <code>#local_address</code>, <code>#remote_address</code>,
<code>#close_on_exec=</code>, <code>#close_on_exec?</code>, <code>#wait</code>, <code>#wait_readable</code>, and
<code>#wait_writable</code>.
<a href="https://github.com/ruby/openssl/pull/708">[GitHub #708]</a></li>
<li>Update <code>OpenSSL::SSL::SSLSocket#gets</code> to take the <code>chomp</code> keyword argument.
<a href="https://github.com/ruby/openssl/pull/708">[GitHub #708]</a></li>
<li>Make <a href="OpenSSL/SSL/SSLSocket.html" title="OpenSSL::SSL::SSLSocket (class)"><code>::OpenSSL::SSL::SSLSocket</code></a> respect the <code>IO#timeout</code> value of the
underlying socket on Ruby 3.2 or later. <code>#timeout</code> and <code>#timeout=</code> methods
are also added.
<a href="https://github.com/ruby/openssl/pull/714">[GitHub #714]</a></li>
<li>Add <a href="OpenSSL/SSL/SSLSocket.html#close_read-instance_method" title="OpenSSL::SSL::SSLSocket#close_read (method)">OpenSSL::SSL::SSLSocket#close_read</a> and <code>#close_write</code>.
<a href="https://github.com/ruby/openssl/pull/743">[GitHub #743]</a></li>
<li>Add <a href="OpenSSL/Digest.html#digests-class_method" title="OpenSSL::Digest.digests (method)">OpenSSL::Digest.digests</a> to get a list of all available digest
algorithms.
<a href="https://github.com/ruby/openssl/pull/726">[GitHub #726]</a></li>
<li>Fix <code>OpenSSL::SSL::SSLSocket#read_nonblock</code> clearing the passed String
buffer when nothing can be read from the connection.
<a href="https://github.com/ruby/openssl/pull/739">[GitHub #739]</a></li>
</ul></li>
<li>Add <code>#to_text</code> methods to <a href="OpenSSL/Timestamp/Response.html" title="OpenSSL::Timestamp::Response (class)"><code>::OpenSSL::Timestamp::Response</code></a>,
<a href="OpenSSL/Timestamp/Request.html" title="OpenSSL::Timestamp::Request (class)"><code>::OpenSSL::Timestamp::Request</code></a>, <a href="OpenSSL/Timestamp/TokenInfo.html" title="OpenSSL::Timestamp::TokenInfo (class)"><code>::OpenSSL::Timestamp::TokenInfo</code></a>, and
<a href="OpenSSL/PKCS7.html" title="OpenSSL::PKCS7 (class)"><code>::OpenSSL::PKCS7</code></a> to get a human-readable representation of the object.
<a href="https://github.com/ruby/openssl/pull/756">[GitHub #756]</a></li>
<li>Add <a href="OpenSSL/X509/Certificate.html#tbs_bytes-instance_method" title="OpenSSL::X509::Certificate#tbs_bytes (method)">OpenSSL::X509::Certificate#tbs_bytes</a> to get the DER encoding of the
TBSCertificate.
<a href="https://github.com/ruby/openssl/pull/753">[GitHub #753]</a></li>
<li>Allow passing <code>nil</code> as the digest algorithm to <code>#sign</code> methods on
<a href="OpenSSL/X509/Certificate.html" title="OpenSSL::X509::Certificate (class)"><code>::OpenSSL::X509::Certificate</code></a>, <a href="OpenSSL/X509/Request.html" title="OpenSSL::X509::Request (class)"><code>::OpenSSL::X509::Request</code></a>, and
<a href="OpenSSL/X509/CRL.html" title="OpenSSL::X509::CRL (class)"><code>::OpenSSL::X509::CRL</code></a>. This adds supports for signing with EdDSA keys.
<a href="https://github.com/ruby/openssl/pull/761">[GitHub #761]</a>
<a href="https://github.com/ruby/openssl/pull/804">[GitHub #804]</a></li>
<li>Add <code>OpenSSL::SSL::SSLSocket#readbyte</code>.
<a href="https://github.com/ruby/openssl/pull/771">[GitHub #771]</a></li>
<li>Change <a href="OpenSSL/X509/Store.html#time=-instance_method" title="OpenSSL::X509::Store#time= (method)">OpenSSL::X509::Store#time=</a> to set the time to the <code>X509_VERIFY_PARAM</code>
in the <code>X509_STORE</code>. This allows <a href="OpenSSL/Timestamp/Response.html#verify-instance_method" title="OpenSSL::Timestamp::Response#verify (method)">OpenSSL::Timestamp::Response#verify</a> to
verify a signature with the specified timestamp.
<a href="https://github.com/ruby/openssl/pull/770">[GitHub #770]</a></li>
<li>Make <a href="OpenSSL/PKCS7.html#encrypt-class_method" title="OpenSSL::PKCS7.encrypt (method)">OpenSSL::PKCS7.encrypt</a>&#39;s third parameter <code>cipher</code> mandatory. It had
an undocumented default value &quot;RC2-40-CBC&quot;, which is not only insecure, but
also not supported in OpenSSL 3.0 or later.
<a href="https://github.com/ruby/openssl/pull/796">[GitHub #796]</a></li>
<li>Make <a href="OpenSSL/BN.html" title="OpenSSL::BN (class)"><code>::OpenSSL::BN</code></a> shareable between ractors when frozen.
<a href="https://github.com/ruby/openssl/pull/808">[GitHub #808]</a></li>
<li>Make <a href="OpenSSL/Config.html" title="OpenSSL::Config (class)"><code>::OpenSSL::Config</code></a> instances frozen by default, and make it shareable
between ractors. <a href="OpenSSL/Config.html#DEFAULT_CONFIG_FILE-constant" title="OpenSSL::Config::DEFAULT_CONFIG_FILE (constant)">OpenSSL::Config::DEFAULT_CONFIG_FILE</a> is also frozen.
<a href="https://github.com/ruby/openssl/pull/809">[GitHub #809]</a></li>
<li>Add <a href="OpenSSL/PKCS12.html#set_mac-instance_method" title="OpenSSL::PKCS12#set_mac (method)">OpenSSL::PKCS12#set_mac</a> to configure the MAC parameters and recalculate
a MAC for the content.
<a href="https://github.com/ruby/openssl/pull/788">[GitHub #788]</a></li>
</ul>

<p>And various non-user-visible changes and bug fixes. Please see the commit
history for more details.</p>

<h1>Version 3.2.3</h1>

<p>Merged changes in 3.1.3.</p>

<h1>Version 3.2.2</h1>

<p>Merged changes in 3.1.2.</p>

<h1>Version 3.2.1</h1>

<p>Merged changes in 3.0.3.</p>

<h1>Version 3.2.0</h1>

<h2>Compatibility</h2>

<ul>
<li>Ruby &gt;= 2.7

<ul>
<li>Support for Ruby 2.6 has been removed. Note that Ruby 2.6 reached the
end-of-life in 2022-04.
<a href="https://github.com/ruby/openssl/pull/639">[GitHub #639]</a></li>
</ul></li>
<li><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> &gt;= 1.0.2 or LibreSSL &gt;= 3.1</li>
</ul>

<h2>Notable changes</h2>

<ul>
<li>Add a stub gemspec for JRuby, which depends on the <code>jruby-openssl</code> gem.
<a href="https://github.com/ruby/openssl/pull/598">[GitHub #598]</a></li>
<li>Add support for the FIPS module in <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 3.0/3.1.
<a href="https://github.com/ruby/openssl/pull/608">[GitHub #608]</a></li>
<li>Rework <a href="OpenSSL/PKey.html" title="OpenSSL::PKey (module)"><code>::OpenSSL::PKey</code></a> routines for loading DER or PEM encoded keys for better
compatibility with OpenSSL 3.0/3.1 with the FIPS module.
<a href="https://github.com/ruby/openssl/pull/615">[GitHub #615]</a>
<a href="https://github.com/ruby/openssl/pull/669">[GitHub #669]</a></li>
<li>Add <a href="OpenSSL/Provider.html" title="OpenSSL::Provider (class)"><code>::OpenSSL::Provider</code></a> module for loading and unloading <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 3 providers.
<a href="https://github.com/ruby/openssl/pull/635">[GitHub #635]</a></li>
<li>Add <a href="OpenSSL/PKey.html#new_raw_private_key-class_method" title="OpenSSL::PKey.new_raw_private_key (method)">OpenSSL::PKey.new_raw_private_key</a>, <code>.new_raw_public_key</code>,
<a href="OpenSSL/PKey/PKey.html#raw_private_key-instance_method" title="OpenSSL::PKey::PKey#raw_private_key (method)">OpenSSL::PKey::PKey#raw_private_key</a>, and <code>#raw_public_key</code> for public key
algorithms that use &quot;raw private/public key&quot;, such as X25519 and Ed25519.
<a href="https://github.com/ruby/openssl/pull/646">[GitHub #646]</a></li>
<li>Improve OpenSSL error messages to include additional information when
it is available in OpenSSL&#39;s error queue.
<a href="https://github.com/ruby/openssl/pull/648">[GitHub #648]</a></li>
<li>Change <a href="OpenSSL/SSL/SSLContext.html#ca_file=-instance_method" title="OpenSSL::SSL::SSLContext#ca_file= (method)">OpenSSL::SSL::SSLContext#ca_file=</a> and <code>#ca_path=</code> to raise
<a href="OpenSSL/SSL/SSLError.html" title="OpenSSL::SSL::SSLError (class)"><code>::OpenSSL::SSL::SSLError</code></a> instead of printing a warning message.
<a href="https://github.com/ruby/openssl/pull/659">[GitHub #659]</a></li>
<li>Allow <a href="OpenSSL/X509/ExtensionFactory.html#create_extension-instance_method" title="OpenSSL::X509::ExtensionFactory#create_extension (method)">OpenSSL::X509::ExtensionFactory#create_extension</a> to take OIDs in the
dotted-decimal notation.
<a href="https://github.com/ruby/openssl/pull/141">[GitHub #141]</a></li>
</ul>

<h1>Version 3.1.3</h1>

<h2>Bug fixes</h2>

<ul>
<li>Fix missing NULL check for <code>EVP_PKEY_get0()</code> functions with <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 3.x.
<a href="https://github.com/ruby/openssl/pull/957">[GitHub #957]</a></li>
</ul>

<h1>Version 3.1.2</h1>

<h2>Bug fixes</h2>

<ul>
<li>Fix crash when attempting to export an incomplete <a href="OpenSSL/PKey/DSA.html" title="OpenSSL::PKey::DSA (class)"><code>::OpenSSL::PKey::DSA</code></a> key.
<a href="https://github.com/ruby/openssl/issues/845">[GitHub #845]</a>
<a href="https://github.com/ruby/openssl/pull/847">[GitHub #847]</a></li>
<li>Remove the <code>OpenSSL::X509::V_FLAG_CRL_CHECK_ALL</code> flag from the default store
used by <a href="OpenSSL/SSL/SSLContext.html#set_params-instance_method" title="OpenSSL::SSL::SSLContext#set_params (method)">OpenSSL::SSL::SSLContext#set_params</a>. It causes certificate
verification to fail with OpenSSL 3.6.0. It has no effect with any other
OpenSSL versions.
<a href="https://github.com/ruby/openssl/issues/949">[GitHub #949]</a>
<a href="https://github.com/ruby/openssl/pull/950">[GitHub #950]</a></li>
</ul>

<h1>Version 3.1.1</h1>

<p>Merged changes in 3.0.3.</p>

<h1>Version 3.1.0</h1>

<p>Ruby/OpenSSL 3.1 will be maintained for the lifetime of Ruby 3.2.</p>

<p>Merged bug fixes in 2.2.3 and 3.0.2. Among the new features and changes are:</p>

<h2>Notable changes</h2>

<ul>
<li>Add <a href="OpenSSL/SSL/SSLContext.html#ciphersuites=-instance_method" title="OpenSSL::SSL::SSLContext#ciphersuites= (method)">OpenSSL::SSL::SSLContext#ciphersuites=</a> to allow setting TLS 1.3 cipher
suites.
<a href="https://github.com/ruby/openssl/pull/493">[GitHub #493]</a></li>
<li>Add <a href="OpenSSL/SSL/SSLSocket.html#export_keying_material-instance_method" title="OpenSSL::SSL::SSLSocket#export_keying_material (method)">OpenSSL::SSL::SSLSocket#export_keying_material</a> for exporting keying
material of the session, as defined in RFC 5705.
<a href="https://github.com/ruby/openssl/pull/530">[GitHub #530]</a></li>
<li>Add <a href="OpenSSL/SSL/SSLContext.html#keylog_cb=-instance_method" title="OpenSSL::SSL::SSLContext#keylog_cb= (method)">OpenSSL::SSL::SSLContext#keylog_cb=</a> for setting the TLS key logging
callback, which is useful for supporting NSS&#39;s SSLKEYLOGFILE debugging output.
<a href="https://github.com/ruby/openssl/pull/536">[GitHub #536]</a></li>
<li>Remove the default digest algorithm from <a href="OpenSSL/OCSP/BasicResponse.html#sign-instance_method" title="OpenSSL::OCSP::BasicResponse#sign (method)">OpenSSL::OCSP::BasicResponse#sign</a>
and <a href="OpenSSL/OCSP/Request.html#sign-instance_method" title="OpenSSL::OCSP::Request#sign (method)">OpenSSL::OCSP::Request#sign</a>. Omitting the 5th parameter of these
methods used to be equivalent of specifying SHA-1. This default value is now
removed and we will let the underlying OpenSSL library decide instead.
<a href="https://github.com/ruby/openssl/pull/507">[GitHub #507]</a></li>
<li>Add <a href="OpenSSL/BN.html#mod_sqrt-instance_method" title="OpenSSL::BN#mod_sqrt (method)">OpenSSL::BN#mod_sqrt</a>.
<a href="https://github.com/ruby/openssl/pull/553">[GitHub #553]</a></li>
<li>Allow calling <a href="OpenSSL/Cipher.html#update-instance_method" title="OpenSSL::Cipher#update (method)">OpenSSL::Cipher#update</a> with an empty string. This was
prohibited to workaround an ancient bug in OpenSSL.
<a href="https://github.com/ruby/openssl/pull/568">[GitHub #568]</a></li>
<li>Fix build on platforms without socket support, such as WASI. <a href="OpenSSL/SSL.html" title="OpenSSL::SSL (module)"><code>::OpenSSL::SSL</code></a>
will not be defined if OpenSSL is compiled with <code>OPENSSL_NO_SOCK</code>.
<a href="https://github.com/ruby/openssl/pull/558">[GitHub #558]</a></li>
<li>Improve support for recent LibreSSL versions. This includes HKDF support in
LibreSSL 3.6 and Ed25519 support in LibreSSL 3.7.</li>
</ul>

<h1>Version 3.0.3</h1>

<h2>Bug fixes</h2>

<ul>
<li>Fix a performance regression introduced in v2.1.3 on a buffered write to
<code>SSLSocket</code>.
<a href="https://github.com/ruby/openssl/pull/706">[GitHub #706]</a></li>
<li>Fix <a href="OpenSSL/PKCS7.html" title="OpenSSL::PKCS7 (class)"><code>::OpenSSL::PKCS7</code></a> to handle PKCS#7 structures without content.
<a href="https://github.com/ruby/openssl/pull/690">[GitHub #690]</a>
<a href="https://github.com/ruby/openssl/pull/752">[GitHub #752]</a></li>
<li>Fix <a href="OpenSSL/ASN1/ObjectId.html#==-instance_method" title="OpenSSL::ASN1::ObjectId#== (method)">OpenSSL::ASN1::ObjectId#==</a> with OIDs without a known name.
<a href="https://github.com/ruby/openssl/issues/791">[GitHub #791]</a>
<a href="https://github.com/ruby/openssl/pull/792">[GitHub #792]</a></li>
<li>Fix <code>OpenSSL::X509::Certificate#crl_uris</code> to handle CDP with multiple CRL
URIs.
<a href="https://github.com/ruby/openssl/issues/775">[GitHub #775]</a>
<a href="https://github.com/ruby/openssl/pull/776">[GitHub #776]</a></li>
<li>Fix <a href="OpenSSL/Cipher.html#update-instance_method" title="OpenSSL::Cipher#update (method)">OpenSSL::Cipher#update</a> to always make the output buffer <code>String</code>
independent.
<a href="https://bugs.ruby-lang.org/issues/20937">[Bug #20937]</a>
<a href="https://github.com/ruby/openssl/pull/824">[GitHub #824]</a></li>
</ul>

<h1>Version 3.0.2</h1>

<p>Merged changes in 2.2.3. Additionally, the following issues are fixed by this
release.</p>

<h2>Bug fixes</h2>

<ul>
<li>Fix OpenSSL::PKey::EC#check_key not working correctly on <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 3.0.
<a href="https://github.com/ruby/openssl/issues/563">[GitHub #563]</a>
<a href="https://github.com/ruby/openssl/pull/580">[GitHub #580]</a></li>
</ul>

<h1>Version 3.0.1</h1>

<p>Merged changes in 2.1.4 and 2.2.2. Additionally, the following issues are fixed
by this release.</p>

<h2>Bug fixes</h2>

<ul>
<li>Add missing type check in OpenSSL::PKey::PKey#sign&#39;s optional parameters.
<a href="https://github.com/ruby/openssl/pull/531">[GitHub #531]</a></li>
<li>Work around <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 3.0&#39;s HMAC issues with a zero-length key.
<a href="https://github.com/ruby/openssl/pull/538">[GitHub #538]</a></li>
<li>Fix a regression in OpenSSL::PKey::DSA.generate&#39;s default of &#39;q&#39; size.
<a href="https://github.com/ruby/openssl/issues/483">[GitHub #483]</a>
<a href="https://github.com/ruby/openssl/pull/539">[GitHub #539]</a></li>
<li>Restore OpenSSL::PKey.read&#39;s ability to decode &quot;openssl ecparam -genkey&quot;
output when linked against OpenSSL 3.0.
<a href="https://github.com/ruby/openssl/pull/535">[GitHub #535]</a>
<a href="https://github.com/ruby/openssl/pull/540">[GitHub #540]</a></li>
<li>Restore error checks in OpenSSL::PKey::EC#<code>to_der,to_pem</code>.
<a href="https://github.com/ruby/openssl/pull/541">[GitHub #541]</a></li>
</ul>

<h1>Version 3.0.0</h1>

<h2>Compatibility notes</h2>

<ul>
<li><p><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 1.0.1 and Ruby 2.3-2.5 are no longer supported.
<a href="https://github.com/ruby/openssl/pull/396">[GitHub #396]</a>
<a href="https://github.com/ruby/openssl/pull/466">[GitHub #466]</a></p></li>
<li><p><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 3.0 support is added. It is the first major version bump from <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a>
1.1 and contains incompatible changes that affect Ruby/OpenSSL.
Note that OpenSSL 3.0 support is preliminary and not all features are
currently available:
<a href="https://github.com/ruby/openssl/issues/369">[GitHub #369]</a></p>

<ul>
<li>Deprecate the ability to modify <a href="OpenSSL/PKey/PKey.html" title="OpenSSL::PKey::PKey (class)"><code>::OpenSSL::PKey::PKey</code></a> instances. OpenSSL 3.0
made EVP_PKEY structure immutable, and hence the following methods are not
available when Ruby/OpenSSL is linked against OpenSSL 3.0.
<a href="https://github.com/ruby/openssl/pull/480">[GitHub #480]</a></li>
<li><a href="OpenSSL/PKey/RSA.html#set_key-instance_method" title="OpenSSL::PKey::RSA#set_key (method)">OpenSSL::PKey::RSA#set_key</a>, <code>#set_factors</code>, <code>#set_crt_params</code></li>
<li><a href="OpenSSL/PKey/DSA.html#set_pqg-instance_method" title="OpenSSL::PKey::DSA#set_pqg (method)">OpenSSL::PKey::DSA#set_pqg</a>, <code>#set_key</code></li>
<li><a href="OpenSSL/PKey/DH.html#set_pqg-instance_method" title="OpenSSL::PKey::DH#set_pqg (method)">OpenSSL::PKey::DH#set_pqg</a>, <code>#set_key</code>, <code>#generate_key!</code></li>
<li><a href="OpenSSL/PKey/EC.html#private_key=-instance_method" title="OpenSSL::PKey::EC#private_key= (method)">OpenSSL::PKey::EC#private_key=</a>, <code>#public_key=</code>, <code>#group=</code>, <code>#generate_key!</code></li>
<li>Deprecate <a href="OpenSSL/Engine.html" title="OpenSSL::Engine (class)"><code>::OpenSSL::Engine</code></a>. The ENGINE API has been deprecated in OpenSSL 3.0
in favor of the new &quot;provider&quot; concept and will be removed in a future
version.
<a href="https://github.com/ruby/openssl/pull/481">[GitHub #481]</a></li>
</ul></li>
<li><p><code>OpenSSL::SSL::SSLContext#tmp_ecdh_callback</code> has been removed. It has been
deprecated since v2.0.0 because it is incompatible with modern OpenSSL
versions.
<a href="https://github.com/ruby/openssl/pull/394">[GitHub #394]</a></p></li>
<li><p><code>OpenSSL::SSL::SSLSocket#read</code> and <code>#write</code> now raise <a href="OpenSSL/SSL/SSLError.html" title="OpenSSL::SSL::SSLError (class)"><code>::OpenSSL::SSL::SSLError</code></a>
if called before a TLS connection is established. Historically, they
read/wrote unencrypted data to the underlying socket directly in that case.
<a href="https://github.com/ruby/openssl/issues/9">[GitHub #9]</a>
<a href="https://github.com/ruby/openssl/pull/469">[GitHub #469]</a></p></li>
</ul>

<h2>Notable changes</h2>

<ul>
<li><p>Enhance OpenSSL::PKey&#39;s common interface.
<a href="https://github.com/ruby/openssl/issues/370">[GitHub #370]</a></p>

<ul>
<li>Key deserialization: Enhance <a href="OpenSSL/PKey.html#read-class_method" title="OpenSSL::PKey.read (method)">OpenSSL::PKey.read</a> to handle PEM encoding of
DH parameters, which used to be only deserialized by <a href="OpenSSL/PKey/DH.html#new-class_method" title="OpenSSL::PKey::DH.new (method)">OpenSSL::PKey::DH.new</a>.
<a href="https://github.com/ruby/openssl/issues/328">[GitHub #328]</a></li>
<li>Key generation: Add <a href="OpenSSL/PKey.html#generate_parameters-class_method" title="OpenSSL::PKey.generate_parameters (method)">OpenSSL::PKey.generate_parameters</a> and
<a href="OpenSSL/PKey.html#generate_key-class_method" title="OpenSSL::PKey.generate_key (method)">OpenSSL::PKey.generate_key</a>.
<a href="https://github.com/ruby/openssl/issues/329">[GitHub #329]</a></li>
<li>Public key signing: Enhance <a href="OpenSSL/PKey/PKey.html#sign-instance_method" title="OpenSSL::PKey::PKey#sign (method)">OpenSSL::PKey::PKey#sign</a> and <code>#verify</code> to use
the new EVP_DigestSign() family to enable PureEdDSA support on OpenSSL 1.1.1
or later. They also now take optional algorithm-specific parameters for more
control.
<a href="https://github.com/ruby/openssl/issues/329">[GitHub #329]</a></li>
<li>Low-level public key signing and verification: Add
<a href="OpenSSL/PKey/PKey.html#sign_raw-instance_method" title="OpenSSL::PKey::PKey#sign_raw (method)">OpenSSL::PKey::PKey#sign_raw</a>, <code>#verify_raw</code>, and <code>#verify_recover</code>.
<a href="https://github.com/ruby/openssl/issues/382">[GitHub #382]</a></li>
<li>Public key encryption: Add <a href="OpenSSL/PKey/PKey.html#encrypt-instance_method" title="OpenSSL::PKey::PKey#encrypt (method)">OpenSSL::PKey::PKey#encrypt</a> and <code>#decrypt</code>.
<a href="https://github.com/ruby/openssl/issues/382">[GitHub #382]</a></li>
<li>Key agreement: Add <a href="OpenSSL/PKey/PKey.html#derive-instance_method" title="OpenSSL::PKey::PKey#derive (method)">OpenSSL::PKey::PKey#derive</a>.
<a href="https://github.com/ruby/openssl/issues/329">[GitHub #329]</a></li>
<li>Key comparison: Add <a href="OpenSSL/PKey/PKey.html#compare%3F-instance_method" title="OpenSSL::PKey::PKey#compare? (method)">OpenSSL::PKey::PKey#compare?</a> to conveniently check
that two keys have common parameters and a public key.
<a href="https://github.com/ruby/openssl/issues/383">[GitHub #383]</a></li>
</ul></li>
<li><p>Add <a href="OpenSSL/BN.html#set_flags-instance_method" title="OpenSSL::BN#set_flags (method)">OpenSSL::BN#set_flags</a> and <code>#get_flags</code>. This can be used in combination
with <a href="OpenSSL/BN.html#CONSTTIME-constant" title="OpenSSL::BN::CONSTTIME (constant)">OpenSSL::BN::CONSTTIME</a> to force constant-time computation.
<a href="https://github.com/ruby/openssl/issues/417">[GitHub #417]</a></p></li>
<li><p>Add <a href="OpenSSL/BN.html#abs-instance_method" title="OpenSSL::BN#abs (method)">OpenSSL::BN#abs</a> to get the absolute value of the BIGNUM.
<a href="https://github.com/ruby/openssl/issues/430">[GitHub #430]</a></p></li>
<li><p>Add <code>OpenSSL::SSL::SSLSocket#getbyte</code>.
<a href="https://github.com/ruby/openssl/issues/438">[GitHub #438]</a></p></li>
<li><p>Add <a href="OpenSSL/SSL/SSLContext.html#tmp_dh=-instance_method" title="OpenSSL::SSL::SSLContext#tmp_dh= (method)">OpenSSL::SSL::SSLContext#tmp_dh=</a>.
<a href="https://github.com/ruby/openssl/pull/459">[GitHub #459]</a></p></li>
<li><p>Add <a href="OpenSSL/X509/Certificate.html#load-class_method" title="OpenSSL::X509::Certificate.load (method)">OpenSSL::X509::Certificate.load</a> to load a PEM-encoded and concatenated
list of X.509 certificates at once.
<a href="https://github.com/ruby/openssl/pull/441">[GitHub #441]</a></p></li>
<li><p>Change <a href="OpenSSL/X509/Certificate.html#new-class_method" title="OpenSSL::X509::Certificate.new (method)">OpenSSL::X509::Certificate.new</a> to attempt to deserialize the given
string first as DER encoding first and then as PEM encoding to ensure the
round-trip consistency.
<a href="https://github.com/ruby/openssl/pull/442">[GitHub #442]</a></p></li>
<li><p>Update various part of the code base to use the modern API. No breaking
changes are intended with this. This includes:</p>

<ul>
<li><a href="OpenSSL/HMAC.html" title="OpenSSL::HMAC (class)"><code>::OpenSSL::HMAC</code></a> uses the EVP API.
<a href="https://github.com/ruby/openssl/issues/371">[GitHub #371]</a></li>
<li><a href="OpenSSL/Config.html" title="OpenSSL::Config (class)"><code>::OpenSSL::Config</code></a> uses native OpenSSL API to parse config files.
<a href="https://github.com/ruby/openssl/issues/342">[GitHub #342]</a></li>
</ul></li>
</ul>

<h1>Version 2.2.3</h1>

<h2>Bug fixes</h2>

<ul>
<li>Fix serveral methods in OpenSSL::PKey::EC::Point attempting to raise an error
with an incorrect class, which would end up with a TypeError.
<a href="https://github.com/ruby/openssl/pull/570">[GitHub #570]</a></li>
<li>Fix OpenSSL::PKey::EC::Point#eql? and OpenSSL::PKey::EC::Group#eql?
incorrectly treated OpenSSL&#39;s internal errors as &quot;not equal&quot;.
<a href="https://github.com/ruby/openssl/pull/564">[GitHub #564]</a></li>
<li>Fix build with LibreSSL 3.5 or later.</li>
</ul>

<h1>Version 2.2.2</h1>

<p>Merged changes in 2.1.4.</p>

<h1>Version 2.2.1</h1>

<p>Merged changes in 2.1.3. Additionally, the following issues are fixed by this
release.</p>

<h2>Bug fixes</h2>

<ul>
<li>Fix crash in <code>OpenSSL::Timestamp::{Request,Response,TokenInfo</code>.new} when
invalid arguments are given.
<a href="https://github.com/ruby/openssl/pull/407">[GitHub #407]</a></li>
<li>Fix <a href="OpenSSL/Timestamp/Factory.html#create_timestamp-instance_method" title="OpenSSL::Timestamp::Factory#create_timestamp (method)">OpenSSL::Timestamp::Factory#create_timestamp</a> with LibreSSL on platforms
where <code>time_t</code> has a different size from <code>long</code>.
<a href="https://github.com/ruby/openssl/pull/454">[GitHub #454]</a></li>
</ul>

<h1>Version 2.2.0</h1>

<h2>Compatibility notes</h2>

<ul>
<li>Remove unsupported MDC2, DSS, DSS1, and SHA algorithms.</li>
<li>Remove <code>OpenSSL::PKCS7::SignerInfo#name</code> alias for <code>#issuer</code>.
<a href="https://github.com/ruby/openssl/pull/266">[GitHub #266]</a></li>
<li>Deprecate <code>OpenSSL::Config#add_value</code> and <code>#[]=</code> for future removal.
<a href="https://github.com/ruby/openssl/pull/322">[GitHub #322]</a></li>
</ul>

<h2>Notable changes</h2>

<ul>
<li>Change default <a href="OpenSSL/SSL/SSLServer.html#listen-instance_method" title="OpenSSL::SSL::SSLServer#listen (method)">OpenSSL::SSL::SSLServer#listen</a> backlog argument from
5 to <code>Socket::SOMAXCONN</code>.
<a href="https://github.com/ruby/openssl/issues/286">[GitHub #286]</a></li>
<li>Make <a href="OpenSSL/HMAC.html#==-instance_method" title="OpenSSL::HMAC#== (method)">OpenSSL::HMAC#==</a> use a timing safe string comparison.
<a href="https://github.com/ruby/openssl/pull/284">[GitHub #284]</a></li>
<li>Add support for SHA3 and BLAKE digests.
<a href="https://github.com/ruby/openssl/pull/282">[GitHub #282]</a></li>
<li>Add <a href="OpenSSL/SSL/SSLSocket.html#open-class_method" title="OpenSSL::SSL::SSLSocket.open (method)">OpenSSL::SSL::SSLSocket.open</a> for opening a <code>TCPSocket</code> and
returning an <a href="OpenSSL/SSL/SSLSocket.html" title="OpenSSL::SSL::SSLSocket (class)"><code>::OpenSSL::SSL::SSLSocket</code></a> for it.
<a href="https://github.com/ruby/openssl/issues/225">[GitHub #225]</a></li>
<li>Support marshalling of <a href="OpenSSL/X509.html" title="OpenSSL::X509 (module)"><code>::OpenSSL::X509</code></a> and <a href="OpenSSL/PKey.html" title="OpenSSL::PKey (module)"><code>::OpenSSL::PKey</code></a> objects.
<a href="https://github.com/ruby/openssl/pull/281">[GitHub #281]</a>
<a href="https://github.com/ruby/openssl/pull/363">[GitHub #363]</a></li>
<li>Add <a href="OpenSSL.html#secure_compare-class_method" title="OpenSSL.secure_compare (method)">OpenSSL.secure_compare</a> for timing safe string comparison for
strings of possibly unequal length.
<a href="https://github.com/ruby/openssl/pull/280">[GitHub #280]</a></li>
<li>Add <a href="OpenSSL.html#fixed_length_secure_compare-class_method" title="OpenSSL.fixed_length_secure_compare (method)">OpenSSL.fixed_length_secure_compare</a> for timing safe string
comparison for strings of equal length.
<a href="https://github.com/ruby/openssl/pull/269">[GitHub #269]</a></li>
<li>Add <code>OpenSSL::SSL::SSLSocket#{finished_message,peer_finished_message</code>}
for last finished message sent and received.
<a href="https://github.com/ruby/openssl/pull/250">[GitHub #250]</a></li>
<li>Add <a href="OpenSSL/Timestamp.html" title="OpenSSL::Timestamp (module)"><code>::OpenSSL::Timestamp</code></a> module for handing timestamp requests and
responses.
<a href="https://github.com/ruby/openssl/pull/204">[GitHub #204]</a></li>
<li>Add helper methods for <a href="OpenSSL/X509/Certificate.html" title="OpenSSL::X509::Certificate (class)"><code>::OpenSSL::X509::Certificate</code></a>:
<code>find_extension</code>, <code>subject_key_identifier</code>,
<code>authority_key_identifier</code>, <code>crl_uris</code>, <code>ca_issuer_uris</code> and
<code>ocsp_uris</code>, and for <a href="OpenSSL/X509/CRL.html" title="OpenSSL::X509::CRL (class)"><code>::OpenSSL::X509::CRL</code></a>:
<code>find_extension</code> and <code>subject_key_identifier</code>.
<a href="https://github.com/ruby/openssl/pull/260">[GitHub #260]</a>
<a href="https://github.com/ruby/openssl/pull/275">[GitHub #275]</a>
<a href="https://github.com/ruby/openssl/pull/293">[GitHub #293]</a></li>
<li>Add <code>OpenSSL::ECPoint#add</code> for performing elliptic curve point addition.
<a href="https://github.com/ruby/openssl/pull/261">[GitHub #261]</a></li>
<li>Make <code>OpenSSL::PKey::RSA#{export,to_der</code>} check <code>key</code>, <code>factors</code>, and
<code>crt_params</code> to do proper private key serialization.
<a href="https://github.com/ruby/openssl/pull/258">[GitHub #258]</a></li>
<li>Add <code>OpenSSL::SSL::{SSLSocket,SSLServer</code>#fileno}, returning the
underlying socket file descriptor number.
<a href="https://github.com/ruby/openssl/pull/247">[GitHub #247]</a></li>
<li>Support client certificates with TLS 1.3, and support post-handshake
authentication with OpenSSL 1.1.1+.
<a href="https://github.com/ruby/openssl/pull/239">[GitHub #239]</a></li>
<li>Add <a href="OpenSSL/ASN1/ObjectId.html#==-instance_method" title="OpenSSL::ASN1::ObjectId#== (method)">OpenSSL::ASN1::ObjectId#==</a> for equality testing.</li>
<li>Add <a href="OpenSSL/X509/Extension.html#value_der-instance_method" title="OpenSSL::X509::Extension#value_der (method)">OpenSSL::X509::Extension#value_der</a> for the raw value of
the extension.
<a href="https://github.com/ruby/openssl/pull/234">[GitHub #234]</a></li>
<li>Significantly reduce allocated memory in <a href="OpenSSL/Buffering.html#do_write-instance_method" title="OpenSSL::Buffering#do_write (method)">OpenSSL::Buffering#do_write</a>.
<a href="https://github.com/ruby/openssl/pull/212">[GitHub #212]</a></li>
<li>Ensure all valid IPv6 addresses are considered valid as elements
of subjectAlternativeName in certificates.
<a href="https://github.com/ruby/openssl/pull/185">[GitHub #185]</a></li>
<li>Allow recipient&#39;s certificate to be omitted in PCKS7#decrypt.
<a href="https://github.com/ruby/openssl/pull/183">[GitHub #183]</a></li>
<li>Add support for reading keys in PKCS #8 format and export via instance methods
added to <a href="OpenSSL/PKey.html" title="OpenSSL::PKey (module)"><code>::OpenSSL::PKey</code></a> classes: <code>private_to_der</code>, <code>private_to_pem</code>,
<code>public_to_der</code> and <code>public_to_pem</code>.
<a href="https://github.com/ruby/openssl/pull/297">[GitHub #297]</a></li>
</ul>

<h1>Version 2.1.4</h1>

<h2>Bug fixes</h2>

<ul>
<li>Do not use pkg-config if --with-openssl-dir option is specified.
<a href="https://github.com/ruby/openssl/pull/486">[GitHub #486]</a></li>
</ul>

<h1>Version 2.1.3</h1>

<h2>Bug fixes</h2>

<ul>
<li>Fix deprecation warnings on Ruby 3.0.</li>
<li>Add &quot;.include&quot; directive support in <a href="OpenSSL/Config.html" title="OpenSSL::Config (class)"><code>::OpenSSL::Config</code></a>.
<a href="https://github.com/ruby/openssl/pull/216">[GitHub #216]</a></li>
<li>Fix handling of IPv6 address SANs.
<a href="https://github.com/ruby/openssl/pull/185">[GitHub #185]</a></li>
<li>Hostname verification failure with <a href="OpenSSL/SSL/SSLContext.html#verify_hostname=-instance_method" title="OpenSSL::SSL::SSLContext#verify_hostname= (method)">OpenSSL::SSL::SSLContext#verify_hostname=</a>
sets a proper error code.
<a href="https://github.com/ruby/openssl/pull/350">[GitHub #350]</a></li>
<li>Fix crash with <code>OpenSSL::BN.new(nil, 2)</code>.
<a href="https://bugs.ruby-lang.org/issues/15760">[Bug #15760]</a></li>
<li><code>OpenSSL::SSL::SSLSocket#sys{read,write</code>} prevent internal string buffers from
being modified by another thread.
<a href="https://github.com/ruby/openssl/pull/453">[GitHub #453]</a></li>
<li>Fix misuse of input record separator in <a href="OpenSSL/Buffering.html" title="OpenSSL::Buffering (module)"><code>::OpenSSL::Buffering</code></a> where it was
for output.</li>
<li>Fix wrong integer casting in <a href="OpenSSL/PKey/EC.html#dsa_verify_asn1-instance_method" title="OpenSSL::PKey::EC#dsa_verify_asn1 (method)">OpenSSL::PKey::EC#dsa_verify_asn1</a>.
<a href="https://github.com/ruby/openssl/pull/460">[GitHub #460]</a></li>
<li><code>extconf.rb</code> explicitly checks that OpenSSL&#39;s version number is 1.0.1 or
newer but also less than 3.0. Ruby/OpenSSL v2.1.x and v2.2.x will not support
OpenSSL 3.0 API.
<a href="https://github.com/ruby/openssl/pull/458">[GitHub #458]</a></li>
<li>Activate <code>digest</code> gem correctly. <code>digest</code> library could go into an
inconsistent state if there are multiple versions of <code>digest</code> is installed
and <code>openssl</code> is <code>require</code>d before <code>digest</code>.
<a href="https://github.com/ruby/openssl/pull/463">[GitHub #463]</a></li>
<li>Fix GC.compact compatibility.
<a href="https://github.com/ruby/openssl/issues/464">[GitHub #464]</a>
<a href="https://github.com/ruby/openssl/pull/465">[GitHub #465]</a></li>
</ul>

<h1>Version 2.1.2</h1>

<p>Merged changes in 2.0.9.</p>

<h1>Version 2.1.1</h1>

<p>Merged changes in 2.0.8.</p>

<h1>Version 2.1.0</h1>

<h2>Notable changes</h2>

<ul>
<li>Support for <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> versions before 1.0.1 and LibreSSL versions before 2.5
is removed.
<a href="https://github.com/ruby/openssl/pull/86">[GitHub #86]</a></li>
<li>OpenSSL::BN#negative?, #+@, and #-@ are added.</li>
<li>OpenSSL::SSL::SSLSocket#connect raises a more informative exception when
certificate verification fails.
<a href="https://github.com/ruby/openssl/pull/99">[GitHub #99]</a></li>
<li><a href="OpenSSL/KDF.html" title="OpenSSL::KDF (module)"><code>::OpenSSL::KDF</code></a> module is newly added. In addition to PBKDF2-HMAC that has moved
from OpenSSL::PKCS5, scrypt and HKDF are supported.
<a href="https://github.com/ruby/openssl/pull/109">[GitHub #109]</a>
<a href="https://github.com/ruby/openssl/pull/173">[GitHub #173]</a></li>
<li><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a>.fips_mode is added. We had the setter, but not the getter.
<a href="https://github.com/ruby/openssl/pull/125">[GitHub #125]</a></li>
<li>OpenSSL::OCSP::Request#signed? is added.</li>
<li><a href="OpenSSL/ASN1.html" title="OpenSSL::ASN1 (module)"><code>::OpenSSL::ASN1</code></a> handles the indefinite length form better. <a href="OpenSSL/ASN1.html" title="OpenSSL::ASN1 (module)"><code>::OpenSSL::ASN1</code></a>.decode
no longer wrongly treats the end-of-contents octets as part of the content.
OpenSSL::ASN1::ASN1Data#infinite_length is renamed to #indefinite_length.
<a href="https://github.com/ruby/openssl/pull/98">[GitHub #98]</a></li>
<li>OpenSSL::X509::Name#add_entry now accepts two additional keyword arguments
&#39;loc&#39; and &#39;set&#39;.
<a href="https://github.com/ruby/openssl/issues/94">[GitHub #94]</a></li>
<li>OpenSSL::SSL::SSLContext#min_version= and #max_version= are added to replace
#ssl_version= that was built on top of the deprecated OpenSSL C API. Use of
that method and the constant OpenSSL::SSL::SSLContext::METHODS is now
deprecated.
<a href="https://github.com/ruby/openssl/pull/142">[GitHub #142]</a></li>
<li>OpenSSL::X509::Name#to_utf8 is added.
<a href="https://github.com/ruby/openssl/issues/26">[GitHub #26]</a>
<a href="https://github.com/ruby/openssl/pull/143">[GitHub #143]</a></li>
<li>OpenSSL::X509::<code>Extension,Attribute,Certificate,CRL,Revoked,Request</code> can be
compared with == operator.
<a href="https://github.com/ruby/openssl/pull/161">[GitHub #161]</a></li>
<li>TLS Fallback Signaling Cipher Suite Value (SCSV) support is added.
<a href="https://github.com/ruby/openssl/pull/165">[GitHub #165]</a></li>
<li>Build failure with <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 1.1 built with no-deprecated is fixed.
<a href="https://github.com/ruby/openssl/pull/160">[GitHub #160]</a></li>
<li>OpenSSL::Buffering#write accepts an arbitrary number of arguments.
<a href="https://bugs.ruby-lang.org/issues/9323">[Feature #9323]</a>
<a href="https://github.com/ruby/openssl/pull/162">[GitHub #162]</a></li>
<li>OpenSSL::PKey::RSA#sign_pss and #verify_pss are added. They perform RSA-PSS
signature and verification.
<a href="https://github.com/ruby/openssl/issues/75">[GitHub #75]</a>
<a href="https://github.com/ruby/openssl/pull/76">[GitHub #76]</a>
<a href="https://github.com/ruby/openssl/pull/169">[GitHub #169]</a></li>
<li>OpenSSL::SSL::SSLContext#add_certificate is added.
<a href="https://github.com/ruby/openssl/pull/167">[GitHub #167]</a></li>
<li>OpenSSL::PKey::EC::Point#to_octet_string is added.
OpenSSL::PKey::EC::Point.new can now take String as the second argument.
<a href="https://github.com/ruby/openssl/pull/177">[GitHub #177]</a></li>
</ul>

<h1>Version 2.0.9</h1>

<h2>Security fixes</h2>

<ul>
<li>OpenSSL::X509::Name#&lt;=&gt; could incorrectly return 0 (= equal) for non-equal
objects. CVE-2018-16395 is assigned for this issue.
<a href="https://hackerone.com/reports/387250">https://hackerone.com/reports/387250</a></li>
</ul>

<h2>Bug fixes</h2>

<ul>
<li>Fixed OpenSSL::PKey::*.<code>new,generate</code> immediately aborting if the thread is
interrupted.
<a href="https://bugs.ruby-lang.org/issues/14882">[Bug #14882]</a>
<a href="https://github.com/ruby/openssl/pull/205">[GitHub #205]</a></li>
<li>Fixed OpenSSL::X509::Name#to_s failing with OpenSSL::X509::NameError if
called against an empty instance.
<a href="https://github.com/ruby/openssl/issues/200">[GitHub #200]</a>
<a href="https://github.com/ruby/openssl/pull/211">[GitHub #211]</a></li>
</ul>

<h1>Version 2.0.8</h1>

<h2>Bug fixes</h2>

<ul>
<li>OpenSSL::Cipher#pkcs5_keyivgen raises an error when a negative iteration
count is given.
<a href="https://github.com/ruby/openssl/pull/184">[GitHub #184]</a></li>
<li>Fixed build with LibreSSL 2.7.
<a href="https://github.com/ruby/openssl/issues/192">[GitHub #192]</a>
<a href="https://github.com/ruby/openssl/pull/193">[GitHub #193]</a></li>
</ul>

<h1>Version 2.0.7</h1>

<h2>Bug fixes</h2>

<ul>
<li>OpenSSL::Cipher#auth_data= could segfault if called against a non-AEAD cipher.
<a href="https://bugs.ruby-lang.org/issues/14024">[Bug #14024]</a></li>
<li>OpenSSL::X509::Certificate#public_key= (and similar methods) could segfault
when an instance of OpenSSL::PKey::PKey with no public key components is
passed.
<a href="https://bugs.ruby-lang.org/issues/14087">[Bug #14087]</a>
<a href="https://github.com/ruby/openssl/pull/168">[GitHub #168]</a></li>
</ul>

<h1>Version 2.0.6</h1>

<h2>Bug fixes</h2>

<ul>
<li>The session_remove_cb set to an OpenSSL::SSL::SSLContext is no longer called
during GC.</li>
<li>A possible deadlock in OpenSSL::SSL::SSLSocket#sysread is fixed.
<a href="https://github.com/ruby/openssl/pull/139">[GitHub #139]</a></li>
<li>OpenSSL::BN#hash could return an unnormalized fixnum value on Windows.
<a href="https://bugs.ruby-lang.org/issues/13877">[Bug #13877]</a></li>
<li>OpenSSL::SSL::SSLSocket#sysread and #sysread_nonblock set the length of the
destination buffer String to 0 on error.
<a href="https://github.com/ruby/openssl/pull/153">[GitHub #153]</a></li>
<li>Possible deadlock is fixed. This happened only when built with older versions
of OpenSSL (before 1.1.0) or LibreSSL.
<a href="https://github.com/ruby/openssl/pull/155">[GitHub #155]</a></li>
</ul>

<h1>Version 2.0.5</h1>

<h2>Bug fixes</h2>

<ul>
<li>Reading a PEM/DER-encoded private key or certificate from an <a href="IO.html" title="IO (class)"><code>IO</code></a> object did
not work properly on mswin platforms.
<a href="https://github.com/ruby/openssl/issues/128">[ruby/openssl#128]</a></li>
<li>Broken length check in the PEM passphrase callback is fixed.</li>
<li>It failed to compile when <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> is configured without TLS 1.0 support.</li>
</ul>

<h1>Version 2.0.4</h1>

<h2>Bug fixes</h2>

<ul>
<li>It now compiles with LibreSSL without renaming on Windows (mswin).</li>
<li>A workaround for the error queue leak of X509_load_cert_crl_file() that
causes random errors is added.
<a href="https://bugs.ruby-lang.org/issues/11033">[Bug #11033]</a></li>
</ul>

<h1>Version 2.0.3</h1>

<h2>Bug fixes</h2>

<ul>
<li>OpenSSL::ASN1::Constructive#each which was broken by 2.0.0 is fixed.
<a href="https://github.com/ruby/openssl/pull/96">[ruby/openssl#96]</a></li>
<li>Fixed build with static <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> libraries on Windows.
<a href="https://bugs.ruby-lang.org/issues/13080">[Bug #13080]</a></li>
<li>OpenSSL::X509::Name#eql? which was broken by 2.0.0 is fixed.</li>
</ul>

<h1>Version 2.0.2</h1>

<h2>Bug fixes</h2>

<ul>
<li>Fix build with early 0.9.8 series which did not have SSL_CTX_clear_options().
[ruby-core:78693]</li>
</ul>

<h1>Version 2.0.1</h1>

<h2>Bug fixes</h2>

<ul>
<li>A GC issue around <a href="OpenSSL/BN.html" title="OpenSSL::BN (class)"><code>::OpenSSL::BN</code></a> is fixed.
<a href="https://github.com/ruby/openssl/issues/87">[ruby/openssl#87]</a></li>
<li><a href="OpenSSL/ASN1.html" title="OpenSSL::ASN1 (module)"><code>::OpenSSL::ASN1</code></a> now parses BER encoding of GeneralizedTime without seconds.
<a href="https://github.com/ruby/openssl/pull/88">[ruby/openssl#88]</a></li>
</ul>

<h1>Version 2.0.0</h1>

<p>This is the first release of openssl gem, formerly a standard library of Ruby,
ext/openssl. This is the successor of the version included in Ruby 2.3.</p>

<h2>Compatibility notes</h2>

<ul>
<li>Support for <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> version 0.9.6 and 0.9.7 is completely removed. openssl gem
still works with OpenSSL 0.9.8, but users are strongly encouraged to upgrade
to at least 1.0.1, as OpenSSL &lt; 1.0.1 will not receive any security fixes from
the OpenSSL development team.</li>
</ul>

<h2>Supported platforms</h2>

<ul>
<li><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 1.0.0, 1.0.1, 1.0.2, 1.1.0</li>
<li><a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> &lt; 0.9.8 is no longer supported.</li>
<li>LibreSSL 2.3, 2.4, 2.5</li>
<li>Ruby 2.3, 2.4</li>
</ul>

<h2>Notable changes</h2>

<ul>
<li>Add support for <a href="OpenSSL.html" title="OpenSSL (module)"><code>OpenSSL</code></a> 1.1.0.
<a href="https://bugs.ruby-lang.org/issues/12324">[Feature #12324]</a></li>
<li><p>Add support for LibreSSL</p></li>
<li><p><a href="OpenSSL/Cipher.html" title="OpenSSL::Cipher (class)"><code>::OpenSSL::Cipher</code></a></p>

<ul>
<li>OpenSSL::Cipher#key= and #iv= reject too long inputs. They used to truncate
silently. <a href="https://bugs.ruby-lang.org/issues/12561">[Bug #12561]</a></li>
<li>OpenSSL::Cipher#iv_len= is added. It allows changing IV (nonce) length if
using AEAD ciphers.
<a href="https://bugs.ruby-lang.org/issues/8667">[Bug #8667]</a>,
<a href="https://bugs.ruby-lang.org/issues/10420">[Bug #10420]</a>,
<a href="https://github.com/ruby/ruby/pull/569">[GH ruby/ruby#569]</a>,
<a href="https://github.com/ruby/openssl/pull/58">[GH ruby/openssl#58]</a></li>
<li>OpenSSL::Cipher#auth_tag_len= is added. This sets the authentication tag
length to be generated by an AEAD cipher.</li>
</ul></li>
<li><p><a href="OpenSSL/OCSP.html" title="OpenSSL::OCSP (module)"><code>::OpenSSL::OCSP</code></a></p>

<ul>
<li>Accessor methods are added to OpenSSL::OCSP::CertificateId.
<a href="https://bugs.ruby-lang.org/issues/7181">[Feature #7181]</a></li>
<li>OpenSSL::OCSP::Request and BasicResponse can be signed with non-SHA-1 hash
algorithm. <a href="https://bugs.ruby-lang.org/issues/11552">[Feature #11552]</a></li>
<li>OpenSSL::OCSP::CertificateId and BasicResponse can be encoded into DER.</li>
<li>A new class OpenSSL::OCSP::SingleResponse is added for convenience.</li>
<li>OpenSSL::OCSP::BasicResponse#add_status accepts absolute times. They used to
accept only relative seconds from the current time.</li>
</ul></li>
<li><p><a href="OpenSSL/PKey.html" title="OpenSSL::PKey (module)"><code>::OpenSSL::PKey</code></a></p>

<ul>
<li>OpenSSL::PKey::EC follows the general PKey interface.
<a href="https://bugs.ruby-lang.org/issues/6567">[Bug #6567]</a></li>
<li>OpenSSL::PKey.read raises OpenSSL::PKey::PKeyError instead of ArgumentError
for consistency with OpenSSL::PKey::<code>DH,DSA,RSA,EC</code>#new.
<a href="https://bugs.ruby-lang.org/issues/11774">[Bug #11774]</a>,
<a href="https://github.com/ruby/openssl/pull/55">[GH ruby/openssl#55]</a></li>
<li>OpenSSL::PKey::EC::Group retrieved by OpenSSL::PKey::EC#group is no longer
linked with the EC key. Modifications to the EC::Group have no effect on the
key. <a href="https://github.com/ruby/openssl/pull/71">[GH ruby/openssl#71]</a></li>
<li>OpenSSL::PKey::EC::Point#to_bn allows specifying the point conversion form
by the optional argument.</li>
</ul></li>
<li><p><a href="OpenSSL/SSL.html" title="OpenSSL::SSL (module)"><code>::OpenSSL::SSL</code></a></p>

<ul>
<li>OpenSSL::SSL::SSLSocket#tmp_key is added. A client can call it after the
connection is established to retrieve the ephemeral key.
<a href="https://github.com/ruby/ruby/pull/1318">[GH ruby/ruby#1318]</a></li>
<li>The automatic ephemeral ECDH curve selection is enabled by default when
built with OpenSSL &gt;= 1.0.2 or LibreSSL.</li>
<li>OpenSSL::SSL::SSLContext#security_level= is added. You can set the &quot;security
level&quot; of the SSL context. This is effective only when built with OpenSSL
1.1.0.</li>
<li>A new option &#39;verify_hostname&#39; is added to OpenSSL::SSL::SSLContext. When it
is enabled, and the SNI hostname is also set, the hostname verification on
the server certificate is automatically performed. It is now enabled by
OpenSSL::SSL::SSLContext#set_params.
<a href="https://github.com/ruby/openssl/pull/60">[GH ruby/openssl#60]</a></li>
</ul></li>
</ul>

<h2>Removals</h2>

<ul>
<li><p><a href="OpenSSL/Engine.html" title="OpenSSL::Engine (class)"><code>::OpenSSL::Engine</code></a></p>

<ul>
<li>OpenSSL::Engine.cleanup does nothing when built with OpenSSL 1.1.0.</li>
</ul></li>
<li><p><a href="OpenSSL/SSL.html" title="OpenSSL::SSL (module)"><code>::OpenSSL::SSL</code></a></p>

<ul>
<li>OpenSSL::PKey::DH::DEFAULT_512 is removed. Hence servers no longer use
512-bit DH group by default. It is considered too weak nowadays.
<a href="https://bugs.ruby-lang.org/issues/11968">[Bug #11968]</a>,
<a href="https://github.com/ruby/ruby/pull/1196">[GH ruby/ruby#1196]</a></li>
<li>RC4 cipher suites are removed from OpenSSL::SSL::SSLContext::DEFAULT_PARAMS.
RC4 is now considered to be weak.
<a href="https://github.com/ruby/openssl/pull/50">[GH ruby/openssl#50]</a></li>
</ul></li>
</ul>

<h2>Deprecations</h2>

<ul>
<li><p><a href="OpenSSL/PKey.html" title="OpenSSL::PKey (module)"><code>::OpenSSL::PKey</code></a></p>

<ul>
<li>OpenSSL::PKey::RSA#n=, #e=, #d=, #p=, #q=, #dmp1=, #dmq1=, #iqmp=,
OpenSSL::PKey::DSA#p=, #q=, #g=, #priv_key=, #pub_key=,
OpenSSL::PKey::DH#p=, #g=, #priv_key= and #pub_key= are deprecated. They are
disabled when built with OpenSSL 1.1.0, due to its API change. Instead,
OpenSSL::PKey::RSA#set_key, #set_factors, #set_crt_params,
OpenSSL::PKey::DSA#set_pqg, #set_key, OpenSSL::PKey::DH#set_pqg and #set_key
are added.</li>
</ul></li>
<li><p><a href="OpenSSL/Random.html" title="OpenSSL::Random (module)"><code>::OpenSSL::Random</code></a></p>

<ul>
<li>OpenSSL::Random.pseudo_bytes is deprecated, and not defined when built with
OpenSSL 1.1.0. Use OpenSSL::Random.random_bytes instead.</li>
</ul></li>
<li><p><a href="OpenSSL/SSL.html" title="OpenSSL::SSL (module)"><code>::OpenSSL::SSL</code></a></p>

<ul>
<li>OpenSSL::SSL::SSLContext#tmp_ecdh_callback is deprecated, as the underlying
API SSL_CTX_set_tmp_ecdh_callback() is removed in OpenSSL 1.1.0. It was
first added in Ruby 2.3.0. To specify the curve to be used in ephemeral
ECDH, use OpenSSL::SSL::SSLContext#ecdh_curves=. The automatic curve
selection is also now enabled by default when built with a capable OpenSSL.</li>
</ul></li>
</ul>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>