<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: String &mdash; Core  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "String",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>Core</a> &raquo; 
      <a href='_index.html#alpha_S'>Index (S)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>String&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: String</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a class='nodoc' href="Warning/buffer.html" title="Warning::buffer (class)">Warning::buffer</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Comparable.html" title="Comparable (module)"><code>::Comparable</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L12779'>string.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/master/complex.c#L2391'>complex.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/encoding.c#L1235'>encoding.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/pack.rb#L12'>pack.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/rational.c#L2523'>rational.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/symbol.c#L976'>symbol.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/transcode.c#L2965'>transcode.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#try_convert-class_method" title="try_convert (class method)">.<strong>try_convert</strong>(object)  &#x21d2; Object, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Attempts to convert the given <code>object</code> to a string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(*args)  </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#ascii_only%3F-instance_method" title="#ascii_only? (instance method)">#<strong>ascii_only?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>self</code> contains only ASCII characters:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether the length of <code>self</code> is zero:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#valid_encoding%3F-instance_method" title="#valid_encoding? (instance method)">#<strong>valid_encoding?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>self</code> is encoded correctly:</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#%25-instance_method" title="#% (instance method)">#<strong>%</strong>(object)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the result of formatting <code>object</code> into the format specifications contained in <code>self</code> (see <a href="file.format_specifications.html" title="Format Specifications">Format Specifications</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#*-instance_method" title="#* (instance method)">#<strong>*</strong>(n)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string containing <code>n</code> copies of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#%2B-instance_method" title="#+ (instance method)">#<strong>+</strong>(other_string)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string containing <code>other_string</code> concatenated to <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#%2B@-instance_method" title="#+ (instance method)">#<strong>+</strong>  &#x21d2; String, self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code> if <code>self</code> is not frozen and can be mutated without warning issuance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dedup-instance_method" title="#- (instance method)">#<strong>-</strong>  &#x21d2; String </a>
      (also: #dedup)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a frozen string equal to <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(object)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Appends a string representation of <code>object</code> to <code>self</code>; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#<=>-instance_method" title="#&lt;=&gt; (instance method)">#<strong>&lt;=&gt;</strong>(other)  &#x21d2; 1, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Compares <code>self</code> and <code>other</code>, evaluating their <em>contents</em>, not their <em>lengths</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#===-instance_method" title="#== (instance method)">#<strong>==</strong>(other)  &#x21d2; Boolean </a>
      (also: #===)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>other</code> is equal to <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#===-instance_method" title="#=== (instance method)">#<strong>===</strong>(other)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#==-instance_method" title="String#== (method)">#==</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#=~-instance_method" title="#=~ (instance method)">#<strong>=~</strong>(other)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When <code>other</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(offset)  &#x21d2; String<sup>?</sup> </a>
      (also: #slice)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the substring of <code>self</code> specified by the arguments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#[]=-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(index, other_string)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code> with all, a substring, or none of its contents replaced; returns the argument <code>other_string</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#append_as_bytes-instance_method" title="#append_as_bytes (instance method)">#<strong>append_as_bytes</strong>(*objects)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Concatenates each object in <code>objects</code> into <code>self</code>; returns <code>self</code>; performs no encoding validation or conversion:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#b-instance_method" title="#b (instance method)">#<strong>b</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> that has ASCII-8BIT encoding; the underlying bytes are not modified:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#byteindex-instance_method" title="#byteindex (instance method)">#<strong>byteindex</strong>(object, offset = 0)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the 0-based integer index of a substring of <code>self</code> specified by <code>object</code> (a string or <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>) and <code>offset</code>, or <code>nil</code> if there is no such substring; the returned index is the count of <em>bytes</em> (not characters).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#byterindex-instance_method" title="#byterindex (instance method)">#<strong>byterindex</strong>(object, offset = self.bytesize)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the 0-based integer index of a substring of <code>self</code> that is the <em>last</em> match for the given <code>object</code> (a string or <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>) and <code>offset</code>, or <code>nil</code> if there is no such substring; the returned index is the count of <em>bytes</em> (not characters).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#bytes-instance_method" title="#bytes (instance method)">#<strong>bytes</strong>  &#x21d2; array_of_bytes </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of the bytes in <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#bytesize-instance_method" title="#bytesize (instance method)">#<strong>bytesize</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the count of bytes in <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#byteslice-instance_method" title="#byteslice (instance method)">#<strong>byteslice</strong>(offset, length = 1)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a substring of <code>self</code>, or <code>nil</code> if the substring cannot be constructed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#bytesplice-instance_method" title="#bytesplice (instance method)">#<strong>bytesplice</strong>(offset, length, str)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Replaces <em>target bytes</em> in <code>self</code> with <em>source bytes</em> from the given string <code>str</code>; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#capitalize-instance_method" title="#capitalize (instance method)">#<strong>capitalize</strong>(mapping = :ascii)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string containing the characters in <code>self</code>, each with possibly changed case:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#capitalize!-instance_method" title="#capitalize! (instance method)">#<strong>capitalize!</strong>(mapping = :ascii)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#capitalize-instance_method" title="String#capitalize (method)">#capitalize</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#casecmp-instance_method" title="#casecmp (instance method)">#<strong>casecmp</strong>(other_string)  &#x21d2; 1, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Ignoring case, compares <code>self</code> and <code>other_string</code>; returns:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#casecmp%3F-instance_method" title="#casecmp? (instance method)">#<strong>casecmp?</strong>(other_string)  &#x21d2; true, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if <code>self</code> and <code>other_string</code> are equal after Unicode case folding, <code>false</code> if unequal, <code>nil</code> if incomparable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#center-instance_method" title="#center (instance method)">#<strong>center</strong>(size, pad_string = &#39; &#39;)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a centered copy of <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#chars-instance_method" title="#chars (instance method)">#<strong>chars</strong>  &#x21d2; array_of_characters </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of the characters in <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#chomp-instance_method" title="#chomp (instance method)">#<strong>chomp</strong>(line_sep = $/)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string copied from <code>self</code>, with trailing characters possibly removed:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#chomp!-instance_method" title="#chomp! (instance method)">#<strong>chomp!</strong>(line_sep = $/)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#chomp-instance_method" title="String#chomp (method)">#chomp</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#chop-instance_method" title="#chop (instance method)">#<strong>chop</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string copied from <code>self</code>, with trailing characters possibly removed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#chop!-instance_method" title="#chop! (instance method)">#<strong>chop!</strong>  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#chop-instance_method" title="String#chop (method)">#chop</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#chr-instance_method" title="#chr (instance method)">#<strong>chr</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string containing the first character of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the contents of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#codepoints-instance_method" title="#codepoints (instance method)">#<strong>codepoints</strong>  &#x21d2; array_of_integers </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of the codepoints in <code>self</code>; each codepoint is the integer value for a character:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#concat-instance_method" title="#concat (instance method)">#<strong>concat</strong>(*objects)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Concatenates each object in <code>objects</code> to <code>self</code>; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#count-instance_method" title="#count (instance method)">#<strong>count</strong>(*selectors)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the total number of characters in <code>self</code> that are specified by the given selectors.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#crypt-instance_method" title="#crypt (instance method)">#<strong>crypt</strong>(salt_str)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the string generated by calling <code>crypt(3)</code> standard library function with <code>str</code> and <code>salt_str</code>, in this order, as its arguments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dedup-instance_method" title="#dedup (instance method)">#<strong>dedup</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#-@-instance_method" title="String#-@ (method)">#-@</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(*selectors)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string that is a copy of <code>self</code> with certain characters removed; the removed characters are all instances of those specified by the given string <code>selectors</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete!-instance_method" title="#delete! (instance method)">#<strong>delete!</strong>(*selectors)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#delete-instance_method" title="String#delete (method)">#delete</a>, but modifies <code>self</code> in place; returns <code>self</code> if any characters were deleted, <code>nil</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_prefix-instance_method" title="#delete_prefix (instance method)">#<strong>delete_prefix</strong>(prefix)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with leading substring <code>prefix</code> removed:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_prefix!-instance_method" title="#delete_prefix! (instance method)">#<strong>delete_prefix!</strong>(prefix)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#delete_prefix-instance_method" title="String#delete_prefix (method)">#delete_prefix</a>, except that <code>self</code> is modified in place; returns <code>self</code> if the prefix is removed, <code>nil</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_suffix-instance_method" title="#delete_suffix (instance method)">#<strong>delete_suffix</strong>(suffix)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with trailing substring <code>suffix</code> removed:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_suffix!-instance_method" title="#delete_suffix! (instance method)">#<strong>delete_suffix!</strong>(suffix)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#delete_suffix-instance_method" title="String#delete_suffix (method)">#delete_suffix</a>, except that <code>self</code> is modified in place; returns <code>self</code> if the suffix is removed, <code>nil</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#downcase-instance_method" title="#downcase (instance method)">#<strong>downcase</strong>(mapping = :ascii)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string containing the downcased characters in <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#downcase!-instance_method" title="#downcase! (instance method)">#<strong>downcase!</strong>(mapping)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#downcase-instance_method" title="String#downcase (method)">#downcase</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dump-instance_method" title="#dump (instance method)">#<strong>dump</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>For an ordinary string, this method, <code>dump</code>, returns a printable ASCII-only version of <code>self</code>, enclosed in double-quotes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_byte-instance_method" title="#each_byte (instance method)">#<strong>each_byte</strong> {|byte| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With a block given, calls the block with each successive byte from <code>self</code>; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_char-instance_method" title="#each_char (instance method)">#<strong>each_char</strong> {|char| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With a block given, calls the block with each successive character from <code>self</code>; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_codepoint-instance_method" title="#each_codepoint (instance method)">#<strong>each_codepoint</strong> {|codepoint| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With a block given, calls the block with each successive codepoint from <code>self</code>; each <a href="https://en.wikipedia.org/wiki/Code_point" target="_parent" title="codepoint">codepoint</a> is the integer value for a character; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_grapheme_cluster-instance_method" title="#each_grapheme_cluster (instance method)">#<strong>each_grapheme_cluster</strong> {|grapheme_cluster| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With a block given, calls the given block with each successive grapheme cluster from <code>self</code> (see <a href="https://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries" target="_parent" title="Unicode Grapheme Cluster Boundaries">Unicode Grapheme Cluster Boundaries</a>); returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_line-instance_method" title="#each_line (instance method)">#<strong>each_line</strong>(record_separator = $/, chomp: false) {|substring| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With a block given, forms the substrings (lines) that are the result of splitting <code>self</code> at each occurrence of the given <code>record_separator</code>; passes each line to the block; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encode-instance_method" title="#encode (instance method)">#<strong>encode</strong>(dst_encoding = Encoding.default_internal, **enc_opts)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> transcoded as determined by <code>dst_encoding</code>; see <a href="file.encodings.html" title="Encodings">Encodings</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encode!-instance_method" title="#encode! (instance method)">#<strong>encode!</strong>(dst_encoding = Encoding.default_internal, **enc_opts)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#encode-instance_method" title="String#encode (method)">#encode</a>, but applies encoding changes to <code>self</code>; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  &#x21d2; Encoding </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="Regexp.html#encoding-instance_method" title="Regexp#encoding (method)">Regexp#encoding</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#end_with%3F-instance_method" title="#end_with? (instance method)">#<strong>end_with?</strong>(*strings)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>self</code> ends with any of the given <code>strings</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eql%3F-instance_method" title="#eql? (instance method)">#<strong>eql?</strong>(object)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>self</code> and <code>object</code> have the same length and content:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#force_encoding-instance_method" title="#force_encoding (instance method)">#<strong>force_encoding</strong>(encoding)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Changes the encoding of <code>self</code> to the given <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a>, which may be a string encoding name or an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object; does not change the underlying bytes; returns self:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getbyte-instance_method" title="#getbyte (instance method)">#<strong>getbyte</strong>(index)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the byte at zero-based <a href="#index-instance_method" title="String#index (method)">#index</a> as an integer:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#grapheme_clusters-instance_method" title="#grapheme_clusters (instance method)">#<strong>grapheme_clusters</strong>  &#x21d2; array_of_grapheme_clusters </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of the grapheme clusters in <code>self</code> (see <a href="https://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries" target="_parent" title="Unicode Grapheme Cluster Boundaries">Unicode Grapheme Cluster Boundaries</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gsub-instance_method" title="#gsub (instance method)">#<strong>gsub</strong>(pattern, replacement)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with zero or more substrings replaced.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gsub!-instance_method" title="#gsub! (instance method)">#<strong>gsub!</strong>(pattern, replacement)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#gsub-instance_method" title="String#gsub (method)">#gsub</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hash-instance_method" title="#hash (instance method)">#<strong>hash</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer hash value for <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hex-instance_method" title="#hex (instance method)">#<strong>hex</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Interprets the leading substring of <code>self</code> as hexadecimal, possibly signed; returns its value as an integer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#include%3F-instance_method" title="#include? (instance method)">#<strong>include?</strong>(other_string)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>self</code> contains <code>other_string</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#index-instance_method" title="#index (instance method)">#<strong>index</strong>(pattern, offset = 0)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer position of the first substring that matches the given argument <code>pattern</code>, or <code>nil</code> if none found.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize-instance_method" title="#new (instance method)">#<strong>new</strong>(string = &#39;&#39;.encode(Encoding::ASCII_8BIT), **options)  &#x21d2; String </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new String object containing the given <code>string</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">#<strong>initialize_copy</strong>(other_string)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#replace-instance_method" title="String#replace (method)">#replace</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#insert-instance_method" title="#insert (instance method)">#<strong>insert</strong>(offset, other_string)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Inserts the given <code>other_string</code> into <code>self</code>; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a printable version of <code>self</code>, enclosed in double-quotes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_sym-instance_method" title="#intern (instance method)">#<strong>intern</strong>  &#x21d2; Symbol </a>
      (also: #to_sym)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="Symbol.html" title="Symbol (class)"><code>::Symbol</code></a> object derived from <code>self</code>, creating it if it did not already exist:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#size-instance_method" title="#length (instance method)">#<strong>length</strong>  &#x21d2; Integer </a>
      (also: #size)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the count of characters (not bytes) in <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lines-instance_method" title="#lines (instance method)">#<strong>lines</strong>(record_separator = $/, chomp: false)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns substrings (“lines”) of <code>self</code> according to the given arguments:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ljust-instance_method" title="#ljust (instance method)">#<strong>ljust</strong>(width, pad_string = &#39; &#39;)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code>, left-justified and, if necessary, right-padded with the <code>pad_string</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lstrip-instance_method" title="#lstrip (instance method)">#<strong>lstrip</strong>(*selectors)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with leading whitespace removed; see <a href="String.html#label-Whitespace+in+Strings" title="Whitespace in Strings">Whitespace in Strings</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lstrip!-instance_method" title="#lstrip! (instance method)">#<strong>lstrip!</strong>(*selectors)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#lstrip-instance_method" title="String#lstrip (method)">#lstrip</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match-instance_method" title="#match (instance method)">#<strong>match</strong>(pattern, offset = 0)  &#x21d2; MatchData<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object based on <code>self</code> and the given arguments; updates <a href="Regexp.html#label-Global+Variables" title="{Regexp">{Regexp</a> Global Variables}.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match%3F-instance_method" title="#match? (instance method)">#<strong>match?</strong>(pattern, offset = 0)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether a match is found for <code>self</code> and the given arguments; does not update <a href="Regexp.html#label-Global+Variables" title="{Regexp">{Regexp</a> Global Variables}.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#next-instance_method" title="#next (instance method)">#<strong>next</strong>  &#x21d2; String </a>
      (also: #succ)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the successor to <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#next!-instance_method" title="#next! (instance method)">#<strong>next!</strong>  &#x21d2; self </a>
      (also: #succ!)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#succ-instance_method" title="String#succ (method)">#succ</a>, but modifies <code>self</code> in place; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#oct-instance_method" title="#oct (instance method)">#<strong>oct</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Interprets the leading substring of <code>self</code> as octal, binary, decimal, or hexadecimal, possibly signed; returns their value as an integer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ord-instance_method" title="#ord (instance method)">#<strong>ord</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer ordinal of the first character of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#partition-instance_method" title="#partition (instance method)">#<strong>partition</strong>(pattern)  &#x21d2; Array, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a 3-element array of substrings of <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prepend-instance_method" title="#prepend (instance method)">#<strong>prepend</strong>(*other_strings)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Prefixes to <code>self</code> the concatenation of the given <code>other_strings</code>; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize_copy-instance_method" title="#replace (instance method)">#<strong>replace</strong>(other_string)  &#x21d2; self </a>
      (also: #initialize_copy)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Replaces the contents of <code>self</code> with the contents of <code>other_string</code>; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reverse-instance_method" title="#reverse (instance method)">#<strong>reverse</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string with the characters from <code>self</code> in reverse order.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reverse!-instance_method" title="#reverse! (instance method)">#<strong>reverse!</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code> with its characters reversed:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rindex-instance_method" title="#rindex (instance method)">#<strong>rindex</strong>(pattern, offset = self.length)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer position of the <em>last</em> substring that matches the given argument <code>pattern</code>, or <code>nil</code> if none found.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rjust-instance_method" title="#rjust (instance method)">#<strong>rjust</strong>(width, pad_string = &#39; &#39;)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a right-justified copy of <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rpartition-instance_method" title="#rpartition (instance method)">#<strong>rpartition</strong>(pattern)  &#x21d2; Array, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a 3-element array of substrings of <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rstrip-instance_method" title="#rstrip (instance method)">#<strong>rstrip</strong>(*selectors)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with trailing whitespace removed; see <a href="String.html#label-Whitespace+in+Strings" title="Whitespace in Strings">Whitespace in Strings</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rstrip!-instance_method" title="#rstrip! (instance method)">#<strong>rstrip!</strong>(*selectors)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#rstrip-instance_method" title="String#rstrip (method)">#rstrip</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan-instance_method" title="#scan (instance method)">#<strong>scan</strong>(pattern)  &#x21d2; array_of_results </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Matches a pattern against <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scrub-instance_method" title="#scrub (instance method)">#<strong>scrub</strong>(replacement_string = default_replacement_string)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with each invalid byte sequence replaced by the given <code>replacement_string</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scrub!-instance_method" title="#scrub! (instance method)">#<strong>scrub!</strong>(replacement_string = default_replacement_string)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#scrub-instance_method" title="String#scrub (method)">#scrub</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#setbyte-instance_method" title="#setbyte (instance method)">#<strong>setbyte</strong>(index, integer)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the byte at zero-based offset <a href="#index-instance_method" title="String#index (method)">#index</a> to the value of the given <code>integer</code>; returns <code>integer</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#length-instance_method" title="String#length (method)">#length</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#slice-instance_method" title="#[] (instance method)">#<strong>[]</strong>(offset)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#[]-instance_method" title="String#[] (method)">#[]</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#slice!-instance_method" title="#slice! (instance method)">#<strong>slice!</strong>(index)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#[]-instance_method" title="String#[] (method)">#[]</a> (and its alias <a href="#slice-instance_method" title="String#slice (method)">#slice</a>), except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#split-instance_method" title="#split (instance method)">#<strong>split</strong>(field_sep = $;, limit = 0)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates an array of substrings by splitting <code>self</code> at each occurrence of the given field separator <code>field_sep</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#squeeze-instance_method" title="#squeeze (instance method)">#<strong>squeeze</strong>(*selectors)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with each tuple (doubling, tripling, etc.) of specified characters “squeezed” down to a single character.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#squeeze!-instance_method" title="#squeeze! (instance method)">#<strong>squeeze!</strong>(*selectors)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#squeeze-instance_method" title="String#squeeze (method)">#squeeze</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#start_with%3F-instance_method" title="#start_with? (instance method)">#<strong>start_with?</strong>(*patterns)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>self</code> starts with any of the given <code>patterns</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#strip-instance_method" title="#strip (instance method)">#<strong>strip</strong>(*selectors)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with leading and trailing whitespace removed; see <a href="String.html#label-Whitespace+in+Strings" title="Whitespace in Strings">Whitespace in Strings</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#strip!-instance_method" title="#strip! (instance method)">#<strong>strip!</strong>(*selectors)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#strip-instance_method" title="String#strip (method)">#strip</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sub-instance_method" title="#sub (instance method)">#<strong>sub</strong>(pattern, replacement)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of self, possibly with a substring replaced.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sub!-instance_method" title="#sub! (instance method)">#<strong>sub!</strong>(pattern, replacement)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#sub-instance_method" title="String#sub (method)">#sub</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#succ-instance_method" title="#succ (instance method)">#<strong>succ</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#next-instance_method" title="String#next (method)">#next</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#succ!-instance_method" title="#succ! (instance method)">#<strong>succ!</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#next!-instance_method" title="String#next! (method)">#next!</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sum-instance_method" title="#sum (instance method)">#<strong>sum</strong>(n = 16)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a basic <code>n</code>-bit <a href="https://en.wikipedia.org/wiki/Checksum" target="_parent" title="checksum">checksum</a> of the characters in <code>self</code>; the checksum is the sum of the binary value of each byte in <code>self</code>, modulo <code>2**n - 1</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#swapcase-instance_method" title="#swapcase (instance method)">#<strong>swapcase</strong>(mapping = :ascii)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string containing the characters in <code>self</code>, with cases reversed:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#swapcase!-instance_method" title="#swapcase! (instance method)">#<strong>swapcase!</strong>(mapping)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#swapcase-instance_method" title="String#swapcase (method)">#swapcase</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_c-instance_method" title="#to_c (instance method)">#<strong>to_c</strong>  &#x21d2; Complex </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a <a href="Complex.html" title="Complex (class)"><code>::Complex</code></a> object: parses the leading substring of <code>self</code> to extract two numeric values that become the coordinates of the complex object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_f-instance_method" title="#to_f (instance method)">#<strong>to_f</strong>  &#x21d2; Float </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the result of interpreting leading characters in <code>self</code> as a <a href="Float.html" title="Float (class)"><code>::Float</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_i-instance_method" title="#to_i (instance method)">#<strong>to_i</strong>(base = 10)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the result of interpreting leading characters in <code>self</code> as an integer in the given <code>base</code>; <code>base</code> must be either <code>0</code> or in range <code>(2..36)</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_r-instance_method" title="#to_r (instance method)">#<strong>to_r</strong>  &#x21d2; Rational </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the result of interpreting leading characters in <code>self</code> as a rational value:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_str-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; self, String </a>
      (also: #to_str)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code> if <code>self</code> is a <code>String</code>, or <code>self</code> converted to a <code>String</code> if <code>self</code> is a subclass of <code>String</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_str-instance_method" title="#to_str (instance method)">#<strong>to_str</strong>  &#x21d2; self, String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#to_s-instance_method" title="String#to_s (method)">#to_s</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_sym-instance_method" title="#to_sym (instance method)">#<strong>to_sym</strong>  &#x21d2; Symbol </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#intern-instance_method" title="String#intern (method)">#intern</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tr-instance_method" title="#tr (instance method)">#<strong>tr</strong>(selector, replacements)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with each character specified by string <code>selector</code> translated to the corresponding character in string <code>replacements</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tr!-instance_method" title="#tr! (instance method)">#<strong>tr!</strong>(selector, replacements)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#tr-instance_method" title="String#tr (method)">#tr</a>, except:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tr_s-instance_method" title="#tr_s (instance method)">#<strong>tr_s</strong>(selector, replacements)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#tr-instance_method" title="String#tr (method)">#tr</a>, except:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tr_s!-instance_method" title="#tr_s! (instance method)">#<strong>tr_s!</strong>(selector, replacements)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#tr_s-instance_method" title="String#tr_s (method)">#tr_s</a>, except:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#undump-instance_method" title="#undump (instance method)">#<strong>undump</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Inverse of <code>String#dump;</code> returns a copy of <code>self</code> with changes of the kinds made by <a href="#dump-instance_method" title="String#dump (method)">#dump</a> “undone.”.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unicode_normalize-instance_method" title="#unicode_normalize (instance method)">#<strong>unicode_normalize</strong>(form = :nfc)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of <code>self</code> with <a href="https://unicode.org/reports/tr15" target="_parent" title="Unicode normalization">Unicode normalization</a> applied.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unicode_normalize!-instance_method" title="#unicode_normalize! (instance method)">#<strong>unicode_normalize!</strong>(form = :nfc)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#unicode_normalize-instance_method" title="String#unicode_normalize (method)">#unicode_normalize</a>, except that the normalization is performed on <code>self</code> (not on a copy of <code>self</code>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unicode_normalized%3F-instance_method" title="#unicode_normalized? (instance method)">#<strong>unicode_normalized?</strong>(form = :nfc)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>self</code> is in the given <code>form</code> of Unicode normalization; see <a href="#unicode_normalize-instance_method" title="String#unicode_normalize (method)">#unicode_normalize</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unpack-instance_method" title="#unpack (instance method)">#<strong>unpack</strong>(template, offset: 0) {|o| ... } &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Extracts data from <code>self</code> to form new objects; see <a href="file.packed_data.html" title="Packed Data">Packed Data</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unpack1-instance_method" title="#unpack1 (instance method)">#<strong>unpack1</strong>(template, offset: 0)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#unpack-instance_method" title="String#unpack (method)">#unpack</a> with no block, but unpacks and returns only the first extracted object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#upcase-instance_method" title="#upcase (instance method)">#<strong>upcase</strong>(mapping = :ascii)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string containing the upcased characters in <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#upcase!-instance_method" title="#upcase! (instance method)">#<strong>upcase!</strong>(mapping)  &#x21d2; self<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Like <a href="#upcase-instance_method" title="String#upcase (method)">#upcase</a>, except that:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#upto-instance_method" title="#upto (instance method)">#<strong>upto</strong>(other_string, exclusive = false) {|string| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With a block given, calls the block with each <code>String</code> value returned by successive calls to <code>String#succ;</code> the first value is <code>self</code>, the next is <code>self.succ</code>, and so on; the sequence terminates when value <code>other_string</code> is reached; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#dup-instance_method" title="#dup (instance method)">#<strong>dup</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#freeze-instance_method" title="#freeze (instance method)">#<strong>freeze</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="Comparable.html" title="Comparable (module)"><code>::Comparable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Comparable.html#<-instance_method" title="Comparable#&lt; (method)">#<</a></td>
      <td><div class='inline'><p>Returns whether <code>self</code> is “less than” <code>other</code>; equivalent to <code>(self &lt;=&gt; other) &lt; 0</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Comparable.html#<=-instance_method" title="Comparable#&lt;= (method)">#<=</a></td>
      <td><div class='inline'><p>Returns whether <code>self</code> is “less than or equal to” <code>other</code>; equivalent to <code>(self &lt;=&gt; other) &lt;= 0</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Comparable.html#==-instance_method" title="Comparable#== (method)">#==</a></td>
      <td><div class='inline'><p>Compares two objects based on the receiver’s <a href="#<=>-instance_method" title="String#&lt;=&gt; (method)">#&lt;=&gt;</a> method, returning true if it returns 0.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Comparable.html#>-instance_method" title="Comparable#&gt; (method)">#></a></td>
      <td><div class='inline'><p>Returns whether <code>self</code> is “greater than” <code>other</code>; equivalent to <code>(self &lt;=&gt; other) &gt; 0</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Comparable.html#>=-instance_method" title="Comparable#&gt;= (method)">#>=</a></td>
      <td><div class='inline'><p>Returns whether <code>self</code> is “greater than or equal to” <code>other</code>; equivalent to <code>(self &lt;=&gt; other) &gt;= 0</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Comparable.html#between%3F-instance_method" title="Comparable#between? (method)">#between?</a></td>
      <td><div class='inline'><p>Returns <code>false</code> if <em>obj</em> <a href="#<=>-instance_method" title="String#&lt;=&gt; (method)">#&lt;=&gt;</a> <em>min</em> is less than zero or if <em>obj</em> <a href="#<=>-instance_method" title="String#&lt;=&gt; (method)">#&lt;=&gt;</a> <em>max</em> is greater than zero, <code>true</code> otherwise.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Comparable.html#clamp-instance_method" title="Comparable#clamp (method)">#clamp</a></td>
      <td><div class='inline'><p>In <code>(min, max)</code> form, returns <em>min</em> if <em>obj</em> <a href="#<=>-instance_method" title="String#&lt;=&gt; (method)">#&lt;=&gt;</a> <em>min</em> is less than zero, <em>max</em> if <em>obj</em> <a href="#<=>-instance_method" title="String#&lt;=&gt; (method)">#&lt;=&gt;</a> <em>max</em> is greater than zero, and <em>obj</em> otherwise.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>(*args)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2143-L2220'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2143' data-end='2220'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2143</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_s_new(int argc, VALUE *argv, VALUE klass)
{
    if (klass != rb_cString) {
        return rb_class_new_instance_pass_kw(argc, argv, klass);
    }

    static ID keyword_ids[2];
    VALUE orig, opt, encoding = Qnil, capacity = Qnil;
    VALUE kwargs[2];
    rb_encoding *enc = NULL;

    int n = rb_scan_args(argc, argv, &quot;01:&quot;, &amp;orig, &amp;opt);
    if (NIL_P(opt)) {
        return rb_class_new_instance_pass_kw(argc, argv, klass);
    }

    keyword_ids[0] = rb_id_encoding();
    CONST_ID(keyword_ids[1], &quot;capacity&quot;);
    rb_get_kwargs(opt, keyword_ids, 0, 2, kwargs);
    encoding = kwargs[0];
    capacity = kwargs[1];

    if (n == 1) {
        orig = StringValue(orig);
    }
    else {
        orig = Qnil;
    }

    if (UNDEF_P(encoding)) {
        if (!NIL_P(orig)) {
            encoding = rb_obj_encoding(orig);
        }
    }

    if (!UNDEF_P(encoding)) {
        enc = rb_to_encoding(encoding);
    }

    // If capacity is nil, we&#39;re basically just duping `orig`.
    if (UNDEF_P(capacity)) {
        if (NIL_P(orig)) {
            VALUE empty_str = str_new(klass, &quot;&quot;, 0);
            if (enc) {
                rb_enc_associate(empty_str, enc);
            }
            return empty_str;
        }
        VALUE copy = str_duplicate(klass, orig);
        rb_enc_associate(copy, enc);
        ENC_CODERANGE_CLEAR(copy);
        return copy;
    }

    long capa = 0;
    capa = NUM2LONG(capacity);
    if (capa &lt; 0) {
        capa = 0;
    }

    if (!NIL_P(orig)) {
        long orig_capa = rb_str_capacity(orig);
        if (orig_capa &gt; capa) {
            capa = orig_capa;
        }
    }

    VALUE str = str_enc_new(klass, NULL, capa, enc);
    STR_SET_LEN(str, 0);
    TERM_FILL(RSTRING_PTR(str), enc ? rb_enc_mbmaxlen(enc) : 1);

    if (!NIL_P(orig)) {
        rb_str_buf_append(str, orig);
    }

    return str;
}
</pre>
  </div>
</div>
</section>

  <section class='method_details' id="initialize-instance_method">
  <h3 class='signature '>
    #<strong>new</strong>(string = &#39;&#39;.encode(Encoding::ASCII_8BIT), **options)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new String object containing the given <code>string</code>.</p>

<p>The <code>options</code> are optional keyword options (see below).</p>

<p>With no argument given and keyword <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a> also not given, returns an empty string with the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> <code>ASCII-8BIT</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span> <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>     <span class='comment'># =&gt; #&lt;Encoding:ASCII-8BIT&gt;</span></code></pre>

<p>With argument <code>string</code> given and keyword option <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a> not given, returns a new string with the same encoding as <code>string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_encode'><a href="#encode-instance_method" title="String#encode (method)">encode</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>UTF_16</span>)
<span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='id identifier rubyid_s0'>s0</span>)
<span class='id identifier rubyid_s1'>s1</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-16 (dummy)&gt;</span></code></pre>

<p>(Unlike String.new, a <a href="file.literals.html#label-String%2BLiterals" title="string literal">string literal</a> like <code>&#39;&#39;</code> or a <a href="file.literals.html#label-Here%2BDocument%2BLiterals" title="here document literal">here document literal</a> always has <a href="file.encodings.html#label-Script%2BEncoding" title="script encoding">script encoding</a>.)</p>

<p>With keyword option <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a> given, returns a string with the specified encoding; the <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a> may be an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object, an encoding name, or an encoding name alias:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='label'>encoding:</span> <span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>US_ASCII</span>).<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>        <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>US_ASCII</span>).<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>    <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>US_ASCII</span>).<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>         <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>            <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;</span></code></pre>

<p>The given encoding need not be valid for the string’s content, and its validity is not checked:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ascii</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span> <span class='comment'># =&gt; false</span></code></pre>

<p>But the given <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a> itself is checked:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Raises ArgumentError.</span></code></pre>

<p>With keyword option <code>capacity</code> given, the given value is advisory only, and may or may not set the size of the internal buffer, which may in turn affect performance:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>capacity:</span> <span class='int'>1</span>)    <span class='comment'># Buffer size is at least 4 (includes terminal null byte).
</span><span class='const'>String</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="String.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>capacity:</span> <span class='int'>4096</span>) <span class='comment'># Buffer size is at least 4;
</span>                                  <span class='comment'># may be equal to, greater than, or less than 4096.</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2065-L2140'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2065' data-end='2140'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2065</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_init(int argc, VALUE *argv, VALUE str)
{
    static ID keyword_ids[2];
    VALUE orig, opt, venc, vcapa;
    VALUE kwargs[2];
    rb_encoding *enc = 0;
    int n;

    if (!keyword_ids[0]) {
        keyword_ids[0] = rb_id_encoding();
        CONST_ID(keyword_ids[1], &quot;capacity&quot;);
    }

    n = rb_scan_args(argc, argv, &quot;01:&quot;, &amp;orig, &amp;opt);
    if (!NIL_P(opt)) {
        rb_get_kwargs(opt, keyword_ids, 0, 2, kwargs);
        venc = kwargs[0];
        vcapa = kwargs[1];
        if (!UNDEF_P(venc) &amp;&amp; !NIL_P(venc)) {
            enc = rb_to_encoding(venc);
        }
        if (!UNDEF_P(vcapa) &amp;&amp; !NIL_P(vcapa)) {
            long capa = NUM2LONG(vcapa);
            long len = 0;
            int termlen = enc ? rb_enc_mbminlen(enc) : 1;

            if (capa &lt; STR_BUF_MIN_SIZE) {
                capa = STR_BUF_MIN_SIZE;
            }
            if (n == 1) {
                StringValue(orig);
                len = RSTRING_LEN(orig);
                if (capa &lt; len) {
                    capa = len;
                }
                if (orig == str) n = 0;
            }
            str_modifiable(str);
            if (STR_EMBED_P(str) || FL_TEST(str, STR_SHARED|STR_NOFREE)) {
                /* make noembed always */
                const size_t size = (size_t)capa + termlen;
                const char *const old_ptr = RSTRING_PTR(str);
                const size_t osize = RSTRING_LEN(str) + TERM_LEN(str);
                char *new_ptr = ALLOC_N(char, size);
                if (STR_EMBED_P(str)) RUBY_ASSERT((long)osize &lt;= str_embed_capa(str));
                memcpy(new_ptr, old_ptr, osize &lt; size ? osize : size);
                FL_UNSET_RAW(str, STR_SHARED|STR_NOFREE);
                RSTRING(str)-&gt;as.heap.ptr = new_ptr;
            }
            else if (STR_HEAP_SIZE(str) != (size_t)capa + termlen) {
                SIZED_REALLOC_N(RSTRING(str)-&gt;as.heap.ptr, char,
                        (size_t)capa + termlen, STR_HEAP_SIZE(str));
            }
            STR_SET_LEN(str, len);
            TERM_FILL(&amp;RSTRING(str)-&gt;as.heap.ptr[len], termlen);
            if (n == 1) {
                memcpy(RSTRING(str)-&gt;as.heap.ptr, RSTRING_PTR(orig), len);
                rb_enc_cr_str_exact_copy(str, orig);
            }
            FL_SET(str, STR_NOEMBED);
            RSTRING(str)-&gt;as.heap.aux.capa = capa;
        }
        else if (n == 1) {
            rb_str_replace(str, orig);
        }
        if (enc) {
            rb_enc_associate(str, enc);
            ENC_CODERANGE_CLEAR(str);
        }
    }
    else if (n == 1) {
        rb_str_replace(str, orig);
    }
    return str;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="try_convert-class_method">
  <h3 class='signature  first'>
    .<strong>try_convert</strong>(object)  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>, ...   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Attempts to convert the given <code>object</code> to a string.</p>

<p>If <code>object</code> is already a string, returns <code>object</code>, unmodified.</p>

<p>Otherwise if <code>object</code> responds to <code>:to_str</code>, calls <code>object.to_str</code> and returns the result.</p>

<p>Returns <code>nil</code> if <code>object</code> does not respond to <code>:to_str</code>.</p>

<p>Raises an exception unless <code>object.to_str</code> returns a string.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2972-L2976'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2972' data-end='2976'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2972</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_s_try_convert(VALUE dummy, VALUE str)
{
    return rb_check_string_type(str);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="ascii_only?-instance_method">
  <h3 class='signature ro first'>
    #<strong>ascii_only?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>self</code> contains only ASCII characters:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ascii_only?'>ascii_only?</span>         <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\u{6666}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_ascii_only?'>ascii_only?</span> <span class='comment'># =&gt; false</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11658-L11664'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11658' data-end='11664'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11658</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_is_ascii_only_p(VALUE str)
{
    int cr = rb_enc_str_coderange(str);

    return RBOOL(cr == ENC_CODERANGE_7BIT);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="empty?-instance_method">
  <h3 class='signature ro'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether the length of <code>self</code> is zero:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='comment'># =&gt; true</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2470-L2474'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2470' data-end='2474'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2470</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_empty(VALUE str)
{
    return RBOOL(RSTRING_LEN(str) == 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="valid_encoding?-instance_method">
  <h3 class='signature ro'>
    #<strong>valid_encoding?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>self</code> is encoded correctly:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Straße</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'>valid_encoding?</span>                                 <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                                        <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_force_encoding'><a href="#force_encoding-instance_method" title="String#force_encoding (method)">force_encoding</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>ASCII</span>).<span class='id identifier rubyid_valid_encoding?'>valid_encoding?</span> <span class='comment'># =&gt; false</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11638-L11644'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11638' data-end='11644'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11638</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_valid_encoding_p(VALUE str)
{
    int cr = rb_enc_str_coderange(str);

    return RBOOL(cr != ENC_CODERANGE_BROKEN);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="%-instance_method">
  <h3 class='signature  first'>
    #<strong>%</strong>(object)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the result of formatting <code>object</code> into the format specifications contained in <code>self</code> (see <a href="file.format_specifications.html" title="Format Specifications">Format Specifications</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%05d</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> <span class='int'>123</span> <span class='comment'># =&gt; &quot;00123&quot;</span></code></pre>

<p>If <code>self</code> contains multiple format specifications, <code>object</code> must be an array or hash containing the objects to be formatted:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%-5s: %016x</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> [ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>self</span>.<span class='id identifier rubyid_object_id'>object_id</span> ]                <span class='comment'># =&gt; &quot;ID   : 00002b054ec93168&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo = %{foo}</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> {<span class='label'>foo:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>}                           <span class='comment'># =&gt; &quot;foo = bar&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo = %{foo}, baz = %{baz}</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> {<span class='label'>foo:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>baz:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bat</span><span class='tstring_end'>&#39;</span></span>} <span class='comment'># =&gt; &quot;foo = bar, baz = bat&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2638-L2647'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2638' data-end='2647'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2638</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_format_m(VALUE str, VALUE arg)
{
    VALUE tmp = rb_check_array_type(arg);

    if (!NIL_P(tmp)) {
        return rb_str_format(RARRAY_LENINT(tmp), RARRAY_CONST_PTR(tmp), str);
    }
    return rb_str_format(1, &amp;arg, str);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="*-instance_method">
  <h3 class='signature '>
    #<strong>*</strong>(n)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string containing <code>n</code> copies of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Ho!</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='int'>3</span> <span class='comment'># =&gt; &quot;Ho!Ho!Ho!&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>No!</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='int'>0</span> <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2560-L2616'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2560' data-end='2616'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2560</span></pre>
<pre class='code cpp'>

VALUE
rb_str_times(VALUE str, VALUE times)
{
    VALUE str2;
    long n, len;
    char *ptr2;
    int termlen;

    if (times == INT2FIX(1)) {
        return str_duplicate(rb_cString, str);
    }
    if (times == INT2FIX(0)) {
        str2 = str_alloc_embed(rb_cString, 0);
        rb_enc_copy(str2, str);
        return str2;
    }
    len = NUM2LONG(times);
    if (len &lt; 0) {
        rb_raise(rb_eArgError, &quot;negative argument&quot;);
    }
    if (RSTRING_LEN(str) == 1 &amp;&amp; RSTRING_PTR(str)[0] == 0) {
        if (STR_EMBEDDABLE_P(len, 1)) {
            str2 = str_alloc_embed(rb_cString, len + 1);
            memset(RSTRING_PTR(str2), 0, len + 1);
        }
        else {
            str2 = str_alloc_heap(rb_cString);
            RSTRING(str2)-&gt;as.heap.aux.capa = len;
            RSTRING(str2)-&gt;as.heap.ptr = ZALLOC_N(char, (size_t)len + 1);
        }
        STR_SET_LEN(str2, len);
        rb_enc_copy(str2, str);
        return str2;
    }
    if (len &amp;&amp; LONG_MAX/len &lt;  RSTRING_LEN(str)) {
        rb_raise(rb_eArgError, &quot;argument too big&quot;);
    }

    len *= RSTRING_LEN(str);
    termlen = TERM_LEN(str);
    str2 = str_enc_new(rb_cString, 0, len, STR_ENC_GET(str));
    ptr2 = RSTRING_PTR(str2);
    if (len) {
        n = RSTRING_LEN(str);
        memcpy(ptr2, RSTRING_PTR(str), n);
        while (n &lt;= len/2) {
            memcpy(ptr2 + n, ptr2, n);
            n *= 2;
        }
        memcpy(ptr2 + n, ptr2, len-n);
    }
    STR_SET_LEN(str2, len);
    TERM_FILL(&amp;ptr2[len], termlen);
    rb_enc_cr_str_copy_for_substr(str2, str);

    return str2;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="+-instance_method">
  <h3 class='signature '>
    #<strong>+</strong>(other_string)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string containing <code>other_string</code> concatenated to <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello from </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='kw'>self</span>.<span class='id identifier rubyid_to_s'><a href="#to_s-instance_method" title="String#to_s (method)">to_s</a></span> <span class='comment'># =&gt; &quot;Hello from main&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2487-L2515'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2487' data-end='2515'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2487</span></pre>
<pre class='code cpp'>

VALUE
rb_str_plus(VALUE str1, VALUE str2)
{
    VALUE str3;
    rb_encoding *enc;
    char *ptr1, *ptr2, *ptr3;
    long len1, len2;
    int termlen;

    StringValue(str2);
    enc = rb_enc_check_str(str1, str2);
    RSTRING_GETMEM(str1, ptr1, len1);
    RSTRING_GETMEM(str2, ptr2, len2);
    termlen = rb_enc_mbminlen(enc);
    if (len1 &gt; LONG_MAX - len2) {
        rb_raise(rb_eArgError, &quot;string size too big&quot;);
    }
    str3 = str_enc_new(rb_cString, 0, len1+len2, enc);
    ptr3 = RSTRING_PTR(str3);
    memcpy(ptr3, ptr1, len1);
    memcpy(ptr3+len1, ptr2, len2);
    TERM_FILL(&amp;ptr3[len1+len2], termlen);

    ENCODING_CODERANGE_SET(str3, rb_enc_to_index(enc),
                           ENC_CODERANGE_AND(ENC_CODERANGE(str1), ENC_CODERANGE(str2)));
    RB_GC_GUARD(str1);
    RB_GC_GUARD(str2);
    return str3;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="+@-instance_method">
  <h3 class='signature '>
    #<strong>+</strong>  &#x21d2; <code>String</code>, <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code> if <code>self</code> is not frozen and can be mutated without warning issuance.</p>

<p>Otherwise returns <code>self.dup</code>, which is not frozen.</p>

<p>Related: see <a href="rdoc-ref:String@Freezing-2FUnfreezing">Freezing/Unfreezing</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L3301-L3310'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3301' data-end='3310'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 3301</span></pre>
<pre class='code cpp'>

static VALUE
str_uplus(VALUE str)
{
    if (OBJ_FROZEN(str) || CHILLED_STRING_P(str)) {
        return rb_str_dup(str);
    }
    else {
        return str;
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="-@-instance_method">
  <h3 class='signature '>
    #<strong>-</strong>  &#x21d2; <code>String</code>     <span class='aliases'>Also known as: <span class='names'>#dedup</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a frozen string equal to <code>self</code>.</p>

<p>The returned string is <code>self</code> if and only if all of the following are true:</p>
<ul><li>
<p><code>self</code> is already frozen.</p>
</li><li>
<p><code>self</code> is an instance of String (rather than of a subclass of String)</p>
</li><li>
<p><code>self</code> has no instance variables set on it.</p>
</li></ul>

<p>Otherwise, the returned string is a frozen copy of <code>self</code>.</p>

<p>Returning <code>self</code>, when possible, saves duplicating <code>self</code>; see <a href="https://en.wikipedia.org/wiki/Data_deduplication" target="_parent" title="{Data">{Data</a> deduplication}.</p>

<p>It may also save duplicating other, already-existing, strings:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s0'>s0</span>.<span class='id identifier rubyid_object_id'>object_id</span> <span class='op'>==</span> <span class='id identifier rubyid_s1'>s1</span>.<span class='id identifier rubyid_object_id'>object_id</span>       <span class='comment'># =&gt; false
</span>(<span class='op'>-</span><span class='id identifier rubyid_s0'>s0</span>).<span class='id identifier rubyid_object_id'>object_id</span> <span class='op'>==</span> (<span class='op'>-</span><span class='id identifier rubyid_s1'>s1</span>).<span class='id identifier rubyid_object_id'>object_id</span> <span class='comment'># =&gt; true</span></code></pre>

<p>Note that method <code>#-@</code> is convenient for defining a constant:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>FileName</span> <span class='op'>=</span> <span class='op'>-</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config/database.yml</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>While its alias <a href="#dedup-instance_method" title="String#dedup (method)">#dedup</a> is better suited for chaining:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_dedup'><a href="#dedup-instance_method" title="String#dedup (method)">dedup</a></span>.<span class='id identifier rubyid_gsub!'><a href="#gsub!-instance_method" title="String#gsub! (method)">gsub!</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>Related: see <a href="rdoc-ref:String@Freezing-2FUnfreezing">Freezing/Unfreezing</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L3346-L3353'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3346' data-end='3353'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 3346</span></pre>
<pre class='code cpp'>

static VALUE
str_uminus(VALUE str)
{
    if (!BARE_STRING_P(str) &amp;&amp; !rb_obj_frozen_p(str)) {
        str = rb_str_dup(str);
    }
    return rb_fstring(str);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="<<-instance_method">
  <h3 class='signature '>
    #<strong>&lt;&lt;</strong>(object)  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Appends a string representation of <code>object</code> to <code>self</code>; returns <code>self</code>.</p>

<p>If <code>object</code> is a string, appends it to <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foobar&quot;
</span><span class='id identifier rubyid_s'>s</span>          <span class='comment'># =&gt; &quot;foobar&quot;</span></code></pre>

<p>If <code>object</code> is an integer, its value is considered a codepoint; converts the value to a character before concatenating:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='int'>33</span> <span class='comment'># =&gt; &quot;foo!&quot;</span></code></pre>

<p>Additionally, if the codepoint is in range <code>0..0xff</code> and the encoding of <code>self</code> is <code>Encoding::US_ASCII</code>, changes the encoding to <code>Encoding::ASCII_8BIT</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_encode'><a href="#encode-instance_method" title="String#encode (method)">encode</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>US_ASCII</span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='int'>0xff</span>  <span class='comment'># =&gt; &quot;foo\xFF&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:BINARY (ASCII-8BIT)&gt;</span></code></pre>

<p>Raises RangeError if that codepoint is not representable in the encoding of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>              <span class='comment'># =&gt; &lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='int'>0x00110000</span>         <span class='comment'># 1114112 out of char range (RangeError)
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_encode'><a href="#encode-instance_method" title="String#encode (method)">encode</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>EUC_JP</span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='int'>0x00800080</span>         <span class='comment'># invalid codepoint 0x800080 in EUC-JP (RangeError)</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4034-L4091'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4034' data-end='4091'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4034</span></pre>
<pre class='code cpp'>

VALUE
rb_str_concat(VALUE str1, VALUE str2)
{
    unsigned int code;
    rb_encoding *enc = STR_ENC_GET(str1);
    int encidx;

    if (RB_INTEGER_TYPE_P(str2)) {
        if (rb_num_to_uint(str2, &amp;code) == 0) {
        }
        else if (FIXNUM_P(str2)) {
            rb_raise(rb_eRangeError, &quot;%ld out of char range&quot;, FIX2LONG(str2));
        }
        else {
            rb_raise(rb_eRangeError, &quot;bignum out of char range&quot;);
        }
    }
    else {
        return rb_str_append(str1, str2);
    }

    encidx = rb_ascii8bit_appendable_encoding_index(enc, code);

    if (encidx &gt;= 0) {
        rb_str_buf_cat_byte(str1, (unsigned char)code);
    }
    else {
        long pos = RSTRING_LEN(str1);
        int cr = ENC_CODERANGE(str1);
        int len;
        char *buf;

        switch (len = rb_enc_codelen(code, enc)) {
          case ONIGERR_INVALID_CODE_POINT_VALUE:
            rb_raise(rb_eRangeError, &quot;invalid codepoint 0x%X in %s&quot;, code, rb_enc_name(enc));
            break;
          case ONIGERR_TOO_BIG_WIDE_CHAR_VALUE:
          case 0:
            rb_raise(rb_eRangeError, &quot;%u out of char range&quot;, code);
            break;
        }
        buf = ALLOCA_N(char, len + 1);
        rb_enc_mbcput(code, buf, enc);
        if (rb_enc_precise_mbclen(buf, buf + len + 1, enc) != len) {
            rb_raise(rb_eRangeError, &quot;invalid codepoint 0x%X in %s&quot;, code, rb_enc_name(enc));
        }
        rb_str_resize(str1, pos+len);
        memcpy(RSTRING_PTR(str1) + pos, buf, len);
        if (cr == ENC_CODERANGE_7BIT &amp;&amp; code &gt; 127) {
            cr = ENC_CODERANGE_VALID;
        }
        else if (cr == ENC_CODERANGE_BROKEN) {
            cr = ENC_CODERANGE_UNKNOWN;
        }
        ENC_CODERANGE_SET(str1, cr);
    }
    return str1;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="<=>-instance_method">
  <h3 class='signature '>
    #<strong>&lt;=&gt;</strong>(other)  &#x21d2; <code>1</code>, ...   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Compares <code>self</code> and <code>other</code>, evaluating their <em>contents</em>, not their <em>lengths</em>.</p>

<p>Returns:</p>
<ul><li>
<p><code>-1</code>, if <code>self</code> is smaller.</p>
</li><li>
<p><code>0</code>, if the two are equal.</p>
</li><li>
<p><code>1</code>, if <code>self</code> is larger.</p>
</li><li>
<p><code>nil</code>, if the two are incomparable.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>  <span class='op'>&lt;=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; -1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>  <span class='op'>&lt;=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; -1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>  <span class='op'>&lt;=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>  <span class='op'>&lt;=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>  <span class='op'>&lt;=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_a'>a</span>   <span class='comment'># =&gt; nil</span></code></pre>

<p>Class String includes module <a href="Comparable.html" title="Comparable (module)"><code>::Comparable</code></a>, each of whose methods uses <code>&lt;=&gt;</code> for comparison.</p>

<p>Related: see <a href="String.html#label-Comparing" title="Comparing">Comparing</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4325-L4335'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4325' data-end='4335'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4325</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_cmp_m(VALUE str1, VALUE str2)
{
    int result;
    VALUE s = rb_check_string_type(str2);
    if (NIL_P(s)) {
        return rb_invcmp(str1, str2);
    }
    result = rb_str_cmp(str1, s);
    return INT2FIX(result);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="==-instance_method">
  <h3 class='signature '>
    #<strong>==</strong>(other)  &#x21d2; <code>Boolean</code>     <span class='aliases'>Also known as: <span class='names'>#===</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>other</code> is equal to <code>self</code>.</p>

<p>When <code>other</code> is a string, returns whether <code>other</code> has the same length and content as <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; false</span></code></pre>

<p>Returns <code>false</code> if the two strings’ encodings are not compatible:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{e4 f6 fc}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_encode'><a href="#encode-instance_method" title="String#encode (method)">encode</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>ISO_8859_1</span>) <span class='op'>==</span> (<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{c4 d6 dc}</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; false</span></code></pre>

<p>When <code>other</code> is not a string:</p>
<ul><li>
<p>If <code>other</code> responds to method <a href="#to_str-instance_method" title="String#to_str (method)">#to_str</a>, <code>other == self</code> is called and its return value is returned.</p>
</li><li>
<p>If <code>other</code> does not respond to <a href="#to_str-instance_method" title="String#to_str (method)">#to_str</a>, <code>false</code> is returned.</p>
</li></ul>

<p>Related: <a href="String.html#label-Comparing" title="Comparing">Comparing</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4267-L4278'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4267' data-end='4278'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4267</span></pre>
<pre class='code cpp'>

VALUE
rb_str_equal(VALUE str1, VALUE str2)
{
    if (str1 == str2) return Qtrue;
    if (!RB_TYPE_P(str2, T_STRING)) {
        if (!rb_respond_to(str2, idTo_str)) {
            return Qfalse;
        }
        return rb_equal(str2, str1);
    }
    return rb_str_eql_internal(str1, str2);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="===-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>==</strong>(other)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>===</strong>(other)  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#==-instance_method" title="String#== (method)">#==</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="=~-instance_method">
  <h3 class='signature '>
    #<strong>=~</strong>(other)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When <code>other</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>:</p>
<ul><li>
<p>Returns the integer index (in characters) of the first match for <code>self</code> and <code>other</code>, or <code>nil</code> if none;</p>
</li><li>
<p>Updates <a href="Regexp.html#label-Global+Variables" title="Regexp-related global variables">Regexp-related global variables</a>.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>f</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; 0
</span><span class='gvar'>$~</span>           <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; 1
</span><span class='gvar'>$~</span>           <span class='comment'># =&gt; #&lt;MatchData &quot;o&quot;&gt;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>x</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; nil
</span><span class='gvar'>$~</span>           <span class='comment'># =&gt; nil</span></code></pre>

<p>Note that <code>string =~ regexp</code> is different from <code>regexp =~ string</code> (see <a href="Regexp.html#=~-instance_method" title="Regexp#=~ (method)">Regexp#=~</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_number'>number</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no. 9</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;number&gt;\d+)</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; 4
</span><span class='id identifier rubyid_number'>number</span>                      <span class='comment'># =&gt; nil # Not assigned.
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;number&gt;\d+)</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no. 9</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; 4
</span><span class='id identifier rubyid_number'>number</span>                      <span class='comment'># =&gt; &quot;9&quot; # Assigned.</span></code></pre>

<p>When <code>other</code> is not a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, returns the value returned by <code>other =~ self</code>.</p>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5046-L5059'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5046' data-end='5059'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5046</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_match(VALUE x, VALUE y)
{
    switch (OBJ_BUILTIN_TYPE(y)) {
      case T_STRING:
        rb_raise(rb_eTypeError, &quot;type mismatch: String given&quot;);

      case T_REGEXP:
        return rb_reg_match(y, x);

      default:
        return rb_funcall(y, idEqTilde, 1, x);
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="[]-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>[]</strong>(offset)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>[]</strong>(offset, size)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>[]</strong>(range)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>[]</strong>(substring)  &#x21d2; <code>String</code><sup>?</sup> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#slice</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the substring of <code>self</code> specified by the arguments.</p>

<p><strong>Form <code>self[offset]</code></strong></p>

<p>With non-negative integer argument <code>offset</code> given, returns the 1-character substring found in self at character offset <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span>]    <span class='comment'># =&gt; &quot;h&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>4</span>]    <span class='comment'># =&gt; &quot;o&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>5</span>]    <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>4</span>] <span class='comment'># =&gt; &quot;は&quot;</span></code></pre>

<p>With negative integer argument <code>offset</code> given, counts backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='op'>-</span><span class='int'>1</span>] <span class='comment'># =&gt; &quot;o&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='op'>-</span><span class='int'>5</span>] <span class='comment'># =&gt; &quot;h&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='op'>-</span><span class='int'>6</span>] <span class='comment'># =&gt; nil</span></code></pre>

<p><strong>Form <code>self[offset, size]</code></strong></p>

<p>With integer arguments <code>offset</code> and <a href="#size-instance_method" title="String#size (method)">#size</a> given, returns a substring of size <a href="#size-instance_method" title="String#size (method)">#size</a> characters (as available) beginning at character offset specified by <code>offset</code>.</p>

<p>If argument <code>offset</code> is non-negative, the offset is <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>]  <span class='comment'># =&gt; &quot;h&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>5</span>]  <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span>]  <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>]  <span class='comment'># =&gt; &quot;llo&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span>]  <span class='comment'># =&gt; &quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>2</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>] <span class='comment'># =&gt; nil</span></code></pre>

<p>If argument <code>offset</code> is negative, counts backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span>] <span class='comment'># =&gt; &quot;o&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='op'>-</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>5</span>] <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span>] <span class='comment'># =&gt; &quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='op'>-</span><span class='int'>6</span><span class='comma'>,</span> <span class='int'>5</span>] <span class='comment'># =&gt; nil</span></code></pre>

<p>Special case: if <code>offset</code> equals the size of <code>self</code>, returns a new empty string:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span>]  <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p><strong>Form <code>self[range]</code></strong></p>

<p>With Range argument <code>range</code> given, forms substring <code>self[range.start, range.size]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>]  <span class='comment'># =&gt; &quot;hel&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>]  <span class='comment'># =&gt; &quot;hel&quot;
</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='op'>...</span><span class='int'>2</span>] <span class='comment'># =&gt; &quot;he&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>]  <span class='comment'># =&gt; &quot;he&quot;
</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span>]  <span class='comment'># =&gt; &quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='int'>0</span><span class='op'>...</span><span class='int'>0</span>] <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p><strong>Form <code>self[regexp, capture = 0]</code></strong></p>

<p>With Regexp argument <code>regexp</code> given and <code>capture</code> as zero, searches for a matching substring in <code>self</code>; updates <a href="Regexp.html#label-Global+Variables" title="Regexp-related global variables">Regexp-related global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ell</span><span class='regexp_end'>/</span></span>]     <span class='comment'># =&gt; &quot;ell&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>l+</span><span class='regexp_end'>/</span></span>]      <span class='comment'># =&gt; &quot;ll&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='regexp_end'>/</span></span>]        <span class='comment'># =&gt; &quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nosuch</span><span class='regexp_end'>/</span></span>]  <span class='comment'># =&gt; nil</span></code></pre>

<p>With <code>capture</code> as a positive integer <code>n</code>, returns the <tt>n</tt>th matched group:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span>]    <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>1</span>] <span class='comment'># =&gt; &quot;h&quot;
</span><span class='backref'>$1</span>                          <span class='comment'># =&gt; &quot;h&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>2</span>] <span class='comment'># =&gt; &quot;e&quot;
</span><span class='backref'>$2</span>                          <span class='comment'># =&gt; &quot;e&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>3</span>] <span class='comment'># =&gt; &quot;ll&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>4</span>] <span class='comment'># =&gt; &quot;o&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>5</span>] <span class='comment'># =&gt; nil</span></code></pre>

<p><strong>Form <code>self[substring]</code></strong></p>

<p>With string argument <code>substring</code> given, returns the matching substring of <code>self</code>, if found:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ell</span><span class='tstring_end'>&#39;</span></span>]      <span class='comment'># =&gt; &quot;ell&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>]         <span class='comment'># =&gt; &quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nosuch</span><span class='tstring_end'>&#39;</span></span>]   <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>んにち</span><span class='tstring_end'>&#39;</span></span>] <span class='comment'># =&gt; &quot;んにち&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5729-L5742'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5729' data-end='5742'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5729</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_aref_m(int argc, VALUE *argv, VALUE str)
{
    if (argc == 2) {
        if (RB_TYPE_P(argv[0], T_REGEXP)) {
            return rb_str_subpat(str, argv[0], argv[1]);
        }
        else {
            return rb_str_substr_two_fixnums(str, argv[0], argv[1], TRUE);
        }
    }
    rb_check_arity(argc, 1, 2);
    return rb_str_aref(str, argv[0]);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="[]=-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>[]=</strong>(index, other_string)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>[]=</strong>(start, length, other_string)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>[]=</strong>(range, other_string)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>[]=</strong>(substring, other_string)  &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code> with all, a substring, or none of its contents replaced; returns the argument <code>other_string</code>.</p>

<p><strong>Form <code>self[index] = other_string</code></strong></p>

<p>With non-negative integer argument <a href="#index-instance_method" title="String#index (method)">#index</a> given, searches for the 1-character substring found in self at character offset index:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>0</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>            <span class='comment'># =&gt; &quot;fooello&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>4</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>            <span class='comment'># =&gt; &quot;hellfoo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>5</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>            <span class='comment'># =&gt; &quot;hellofoo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>6</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Raises IndexError: index 6 out of string.</span></code></pre>

<p>With negative integer argument <a href="#index-instance_method" title="String#index (method)">#index</a> given, counts backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>1</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;hellfoo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>5</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;fooello&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>6</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># Raises IndexError: index -6 out of string.</span></code></pre>

<p><strong>Form <code>self[start, length] = other_string</code></strong></p>

<p>With integer arguments <code>start</code> and <a href="#length-instance_method" title="String#length (method)">#length</a> given, searches for a substring of size <a href="#length-instance_method" title="String#length (method)">#length</a> characters (as available) beginning at character offset specified by <code>start</code>.</p>

<p>If argument <code>start</code> is non-negative, the offset is <code>start</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;fooello&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>5</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;foo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>9</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;foo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;hefoollo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>2</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Raises IndexError: negative length -1.</span></code></pre>

<p>If argument <code>start</code> is negative, counts backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;hellfoo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>9</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;hellfoo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>2</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;foollo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>0</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;hefoollo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='op'>-</span><span class='int'>6</span><span class='comma'>,</span> <span class='int'>2</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Raises IndexError: index -6 out of string.</span></code></pre>

<p>Special case: if <code>start</code> equals the length of <code>self</code>, the argument is appended to <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>               <span class='comment'># =&gt; &quot;hellofoo&quot;</span></code></pre>

<p><strong>Form <code>self[range] = other_string</code></strong></p>

<p>With Range argument <code>range</code> given, equivalent to <code>self[range.start, range.size] = other_string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s0'>s0</span>[<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s1'>s1</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s0'>s0</span>               <span class='comment'># =&gt; &quot;foolo&quot;
</span><span class='id identifier rubyid_s1'>s1</span>               <span class='comment'># =&gt; &quot;foolo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>0</span><span class='op'>...</span><span class='int'>2</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;foollo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>0</span><span class='op'>...</span><span class='int'>0</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                <span class='comment'># =&gt; &quot;foohello&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='int'>9</span><span class='op'>..</span><span class='int'>10</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Raises RangeError: 9..10 out of range</span></code></pre>

<p><strong>Form <code>self[regexp, capture = 0] = other_string</code></strong></p>

<p>With Regexp argument <code>regexp</code> given and <code>capture</code> as zero, searches for a matching substring in <code>self</code>; updates <a href="Regexp.html#label-Global+Variables" title="Regexp-related global variables">Regexp-related global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>l</span><span class='regexp_end'>/</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L</span><span class='tstring_end'>&#39;</span></span>       <span class='comment'># =&gt; &quot;L&quot;
</span>[<span class='backref'>$`</span><span class='comma'>,</span> <span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>]       <span class='comment'># =&gt; [&quot;he&quot;, &quot;l&quot;, &quot;lo&quot;]
</span><span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>eLlo</span><span class='regexp_end'>/</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>owdy</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;owdy&quot;
</span>[<span class='backref'>$`</span><span class='comma'>,</span> <span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>]       <span class='comment'># =&gt; [&quot;h&quot;, &quot;eLlo&quot;, &quot;&quot;]
</span><span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>eLlo</span><span class='regexp_end'>/</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>owdy</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Raises IndexError: regexp not matched.
</span>[<span class='backref'>$`</span><span class='comma'>,</span> <span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>]       <span class='comment'># =&gt; [nil, nil, nil]</span></code></pre>

<p>With <code>capture</code> as a positive integer <code>n</code>, searches for the <tt>n</tt>th matched group:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>    <span class='comment'># =&gt; &quot;foo&quot;
</span>[<span class='backref'>$`</span><span class='comma'>,</span> <span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>]                  <span class='comment'># =&gt; [&quot;&quot;, &quot;hello&quot;, &quot;&quot;]
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>1</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                             <span class='comment'># =&gt; &quot;fooello&quot;
</span>[<span class='backref'>$`</span><span class='comma'>,</span> <span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>]                  <span class='comment'># =&gt; [&quot;&quot;, &quot;hello&quot;, &quot;&quot;]
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>2</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                             <span class='comment'># =&gt; &quot;hfoollo&quot;
</span>[<span class='backref'>$`</span><span class='comma'>,</span> <span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>]                  <span class='comment'># =&gt; [&quot;&quot;, &quot;hello&quot;, &quot;&quot;]
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>4</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>                             <span class='comment'># =&gt; &quot;hellfoo&quot;
</span>[<span class='backref'>$`</span><span class='comma'>,</span> <span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='backref'>$&#39;</span>]                  <span class='comment'># =&gt; [&quot;&quot;, &quot;hello&quot;, &quot;&quot;]
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># =&gt; &quot;hello&quot;
</span><span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(h)(e)(l+)(o)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>5</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo  # Raises IndexError: index 5 out of regexp.

s = </span><span class='tstring_end'>&#39;</span></span><span class='id identifier rubyid_hello'>hello</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>
s[/nosuch/] = </span><span class='tstring_end'>&#39;</span></span><span class='id identifier rubyid_foo'>foo</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>           # Raises IndexError: regexp not matched.</span></code></pre>

<p><strong>Form <code>self[substring] = other_string</code></strong></p>

<p>With string argument <code>substring</code> given:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>  <span class='comment'># =&gt; &quot;hefoolo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ll</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>  <span class='comment'># =&gt; &quot;hefooo&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>んにち</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>  <span class='comment'># =&gt; &quot;こfooは&quot;
</span>
<span class='id identifier rubyid_s'>s</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nosuch</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Raises IndexError: string not matched.</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5950-L5964'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5950' data-end='5964'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5950</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_aset_m(int argc, VALUE *argv, VALUE str)
{
    if (argc == 3) {
        if (RB_TYPE_P(argv[0], T_REGEXP)) {
            rb_str_subpat_set(str, argv[0], argv[1], argv[2]);
        }
        else {
            rb_str_update(str, NUM2LONG(argv[0]), NUM2LONG(argv[1]), argv[2]);
        }
        return argv[2];
    }
    rb_check_arity(argc, 2, 3);
    return rb_str_aset(str, argv[0], argv[1]);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="append_as_bytes-instance_method">
  <h3 class='signature '>
    #<strong>append_as_bytes</strong>(*objects)  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Concatenates each object in <code>objects</code> into <code>self</code>; returns <code>self</code>; performs no encoding validation or conversion:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_append_as_bytes'>append_as_bytes</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> \xE2\x82</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;foo \xE2\x82&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span>              <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_append_as_bytes'>append_as_bytes</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xAC 12</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span>              <span class='comment'># =&gt; true</span></code></pre>

<p>When a given object is an integer, the value is considered an 8-bit byte; if the integer occupies more than one byte (i.e,. is greater than 255), appends only the low-order byte (similar to <a href="#setbyte-instance_method" title="String#setbyte (method)">#setbyte</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_append_as_bytes'>append_as_bytes</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>257</span>) <span class='comment'># =&gt; &quot;\u0000\u0001&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>                <span class='comment'># =&gt; 2</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L3883-L3993'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3883' data-end='3993'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 3883</span></pre>
<pre class='code cpp'>

VALUE
rb_str_append_as_bytes(int argc, VALUE *argv, VALUE str)
{
    long needed_capacity = 0;
    volatile VALUE t0;
    enum ruby_value_type *types = ALLOCV_N(enum ruby_value_type, t0, argc);

    for (int index = 0; index &lt; argc; index++) {
        VALUE obj = argv[index];
        enum ruby_value_type type = types[index] = rb_type(obj);
        switch (type) {
          case T_FIXNUM:
          case T_BIGNUM:
            needed_capacity++;
            break;
          case T_STRING:
            needed_capacity += RSTRING_LEN(obj);
            break;
          default:
            rb_raise(
                rb_eTypeError,
                &quot;wrong argument type %&quot;PRIsVALUE&quot; (expected String or Integer)&quot;,
                rb_obj_class(obj)
            );
            break;
        }
    }

    str_ensure_available_capa(str, needed_capacity);
    char *sptr = RSTRING_END(str);

    for (int index = 0; index &lt; argc; index++) {
        VALUE obj = argv[index];
        enum ruby_value_type type = types[index];
        switch (type) {
          case T_FIXNUM:
          case T_BIGNUM: {
            argv[index] = obj = rb_int_and(obj, INT2FIX(0xff));
            char byte = (char)(NUM2INT(obj) &amp; 0xFF);
            *sptr = byte;
            sptr++;
            break;
          }
          case T_STRING: {
            const char *ptr;
            long len;
            RSTRING_GETMEM(obj, ptr, len);
            memcpy(sptr, ptr, len);
            sptr += len;
            break;
          }
          default:
            rb_bug(&quot;append_as_bytes arguments should have been validated&quot;);
        }
    }

    STR_SET_LEN(str, RSTRING_LEN(str) + needed_capacity);
    TERM_FILL(sptr, TERM_LEN(str)); /* sentinel */

    int cr = ENC_CODERANGE(str);
    switch (cr) {
      case ENC_CODERANGE_7BIT: {
        for (int index = 0; index &lt; argc; index++) {
            VALUE obj = argv[index];
            enum ruby_value_type type = types[index];
            switch (type) {
              case T_FIXNUM:
              case T_BIGNUM: {
                if (!ISASCII(NUM2INT(obj))) {
                    goto clear_cr;
                }
                break;
              }
              case T_STRING: {
                if (ENC_CODERANGE(obj) != ENC_CODERANGE_7BIT) {
                    goto clear_cr;
                }
                break;
              }
              default:
                rb_bug(&quot;append_as_bytes arguments should have been validated&quot;);
            }
        }
        break;
      }
      case ENC_CODERANGE_VALID:
        if (ENCODING_GET_INLINED(str) == ENCINDEX_ASCII_8BIT) {
            goto keep_cr;
        }
        else {
            goto clear_cr;
        }
        break;
      default:
        goto clear_cr;
        break;
    }

    RB_GC_GUARD(t0);

  clear_cr:
    // If no fast path was hit, we clear the coderange.
    // append_as_bytes is predominantly meant to be used in
    // buffering situation, hence it&#39;s likely the coderange
    // will never be scanned, so it&#39;s not worth spending time
    // precomputing the coderange except for simple and common
    // situations.
    ENC_CODERANGE_CLEAR(str);
  keep_cr:
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="b-instance_method">
  <h3 class='signature '>
    #<strong>b</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> that has ASCII-8BIT encoding; the underlying bytes are not modified:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x99</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>   <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_b'>b</span>      <span class='comment'># =&gt; &quot;\x99&quot;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>   <span class='comment'># =&gt; #&lt;Encoding:ASCII-8BIT&gt;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u4095</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># =&gt; &quot;䂕&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>   <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>      <span class='comment'># =&gt; [228, 130, 149]
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_b'>b</span>      <span class='comment'># =&gt; &quot;\xE4\x82\x95&quot;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>   <span class='comment'># =&gt; #&lt;Encoding:ASCII-8BIT&gt;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>      <span class='comment'># =&gt; [228, 130, 149]</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11597-L11628'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11597' data-end='11628'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11597</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_b(VALUE str)
{
    VALUE str2;
    if (STR_EMBED_P(str)) {
        str2 = str_alloc_embed(rb_cString, RSTRING_LEN(str) + TERM_LEN(str));
    }
    else {
        str2 = str_alloc_heap(rb_cString);
    }
    str_replace_shared_without_enc(str2, str);

    if (rb_enc_asciicompat(STR_ENC_GET(str))) {
        // BINARY strings can never be broken; they&#39;re either 7-bit ASCII or VALID.
        // If we know the receiver&#39;s code range then we know the result&#39;s code range.
        int cr = ENC_CODERANGE(str);
        switch (cr) {
          case ENC_CODERANGE_7BIT:
            ENC_CODERANGE_SET(str2, ENC_CODERANGE_7BIT);
            break;
          case ENC_CODERANGE_BROKEN:
          case ENC_CODERANGE_VALID:
            ENC_CODERANGE_SET(str2, ENC_CODERANGE_VALID);
            break;
          default:
            ENC_CODERANGE_CLEAR(str2);
            break;
        }
    }

    return str2;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="byteindex-instance_method">
  <h3 class='signature '>
    #<strong>byteindex</strong>(object, offset = 0)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the 0-based integer index of a substring of <code>self</code> specified by <code>object</code> (a string or <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>) and <code>offset</code>, or <code>nil</code> if there is no such substring; the returned index is the count of <em>bytes</em> (not characters).</p>

<p>When <code>object</code> is a string, returns the index of the first found substring equal to <code>object</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>          <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>             <span class='comment'># =&gt; 3 # Three 1-byte characters.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>         <span class='comment'># =&gt; 3 # Three bytes.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ooo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>When <code>object</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, returns the index of the first found substring matching <code>object</code>; updates <a href="Regexp.html#label-Global+Variables" title="Regexp-related global variables">Regexp-related global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>f</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; 0
</span><span class='gvar'>$~</span>                 <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>oo</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ooo</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='gvar'>$~</span>                 <span class='comment'># =&gt; nil</span></code></pre>

<p>Integer argument <code>offset</code>, if given, specifies the 0-based index of the byte where searching is to begin.</p>

<p>When <code>offset</code> is non-negative, searching begins at byte position <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>When <code>offset</code> is negative, counts backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>) <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>2</span>) <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>3</span>) <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>4</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Raises IndexError if the byte at <code>offset</code> is not the first byte of a character:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF\uFFFF</span><span class='tstring_end'>&quot;</span></span>       <span class='comment'># =&gt; &quot;\uFFFF\uFFFF&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>                   <span class='comment'># =&gt; 2 # Two 3-byte characters.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>               <span class='comment'># =&gt; 6 # Six bytes.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span>)    <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>4</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>5</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'>byteindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>6</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4683-L4720'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4683' data-end='4720'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4683</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_byteindex_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    long pos;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        long slen = RSTRING_LEN(str);
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 ? (pos += slen) &lt; 0 : pos &gt; slen) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
    }
    else {
        pos = 0;
    }

    str_ensure_byte_pos(str, pos);

    if (RB_TYPE_P(sub, T_REGEXP)) {
        if (rb_reg_search(sub, str, pos, 0) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = BEG(0);
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_byteindex(str, sub, pos);
        if (pos &gt;= 0) return LONG2NUM(pos);
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="byterindex-instance_method">
  <h3 class='signature '>
    #<strong>byterindex</strong>(object, offset = self.bytesize)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the 0-based integer index of a substring of <code>self</code> that is the <em>last</em> match for the given <code>object</code> (a string or <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>) and <code>offset</code>, or <code>nil</code> if there is no such substring; the returned index is the count of <em>bytes</em> (not characters).</p>

<p>When <code>object</code> is a string, returns the index of the <em>last</em> found substring equal to <code>object</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>           <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>              <span class='comment'># =&gt; 3 # Three 1-byte characters.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>          <span class='comment'># =&gt; 3 # Three bytes.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; 0
</span>  <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; 2
</span>  <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 1
</span>  <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ooo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>When <code>object</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, returns the index of the last found substring matching <code>object</code>; updates <a href="Regexp.html#label-Global+Variables" title="Regexp-related global variables">Regexp-related global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>f</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; 0
</span><span class='gvar'>$~</span>                  <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>oo</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ooo</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='gvar'>$~</span>                  <span class='comment'># =&gt; nil</span></code></pre>

<p>The last match means starting at the possible last position, not the last of the longest matches:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o+</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 2
</span><span class='gvar'>$~</span>                 <span class='comment'>#=&gt; #&lt;MatchData &quot;o&quot;&gt;</span></code></pre>

<p>To get the last longest match, use a negative lookbehind:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;!o)o+</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 1
</span><span class='gvar'>$~</span>                       <span class='comment'># =&gt; #&lt;MatchData &quot;oo&quot;&gt;</span></code></pre>

<p>Or use method <a href="#byteindex-instance_method" title="String#byteindex (method)">#byteindex</a> with negative lookahead:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteindex'><a href="#byteindex-instance_method" title="String#byteindex (method)">byteindex</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o+(?!.*o)</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 1
</span><span class='gvar'>$~</span>                       <span class='comment'>#=&gt; #&lt;MatchData &quot;oo&quot;&gt;</span></code></pre>

<p>Integer argument <code>offset</code>, if given, specifies the 0-based index of the byte where searching is to end.</p>

<p>When <code>offset</code> is non-negative, searching ends at byte position <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; 2</span></code></pre>

<p>When <code>offset</code> is negative, counts backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>) <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>2</span>) <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>3</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Raises IndexError if the byte at <code>offset</code> is not the first byte of a character:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF\uFFFF</span><span class='tstring_end'>&quot;</span></span>        <span class='comment'># =&gt; &quot;\uFFFF\uFFFF&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>                    <span class='comment'># =&gt; 2 # Two 3-byte characters.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>                <span class='comment'># =&gt; 6 # Six bytes.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span>)    <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>4</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>5</span>) <span class='comment'># Raises IndexError
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byterindex'>byterindex</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\uFFFF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>6</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4973-L5010'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4973' data-end='5010'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4973</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_byterindex_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    long pos, len = RSTRING_LEN(str);

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 &amp;&amp; (pos += len) &lt; 0) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
        if (pos &gt; len) pos = len;
    }
    else {
        pos = len;
    }

    str_ensure_byte_pos(str, pos);

    if (RB_TYPE_P(sub, T_REGEXP)) {
        if (rb_reg_search(sub, str, pos, 1) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = BEG(0);
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_byterindex(str, sub, pos);
        if (pos &gt;= 0) return LONG2NUM(pos);
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="bytes-instance_method">
  <h3 class='signature '>
    #<strong>bytes</strong>  &#x21d2; <code>array_of_bytes</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of the bytes in <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytes'>bytes</span>  <span class='comment'># =&gt; [104, 101, 108, 108, 111]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytes'>bytes</span>
<span class='comment'># =&gt; [227, 129, 147, 227, 130, 147, 227, 129, 171, 227, 129, 161, 227, 129, 175]</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9655-L9660'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9655' data-end='9660'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9655</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_bytes(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;bytes&quot;, RSTRING_LEN(str));
    return rb_str_enumerate_bytes(str, ary);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="bytesize-instance_method">
  <h3 class='signature '>
    #<strong>bytesize</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the count of bytes in <code>self</code>.</p>

<p>Note that the byte count may be different from the character count (returned by <a href="#size-instance_method" title="String#size (method)">#size</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'>bytesize</span> <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>     <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'>bytesize</span> <span class='comment'># =&gt; 15
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>     <span class='comment'># =&gt; 5</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2451-L2455'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2451' data-end='2455'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2451</span></pre>
<pre class='code cpp'>

VALUE
rb_str_bytesize(VALUE str)
{
    return LONG2NUM(RSTRING_LEN(str));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="byteslice-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>byteslice</strong>(offset, length = 1)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>byteslice</strong>(range)  &#x21d2; <code>String</code><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a substring of <code>self</code>, or <code>nil</code> if the substring cannot be constructed.</p>

<p>With integer arguments <code>offset</code> and <a href="#length-instance_method" title="String#length (method)">#length</a> given, returns the substring beginning at the given <code>offset</code> and of the given <a href="#length-instance_method" title="String#length (method)">#length</a> (as available):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># =&gt; &quot;0123456789&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>2</span>)     <span class='comment'># =&gt; &quot;2&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>200</span>)   <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>4</span><span class='comma'>,</span> <span class='int'>3</span>)  <span class='comment'># =&gt; &quot;456&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>4</span><span class='comma'>,</span> <span class='int'>30</span>) <span class='comment'># =&gt; &quot;456789&quot;</span></code></pre>

<p>Returns <code>nil</code> if <a href="#length-instance_method" title="String#length (method)">#length</a> is negative or <code>offset</code> falls outside of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>4</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>40</span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Counts backwards from the end of <code>self</code> if <code>offset</code> is negative:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># =&gt; &quot;0123456789&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='op'>-</span><span class='int'>4</span>)    <span class='comment'># =&gt; &quot;6&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='op'>-</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;678&quot;</span></code></pre>

<p>With Range argument <code>range</code> given, returns <code>byteslice(range.begin, range.size)</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>    <span class='comment'># =&gt; &quot;0123456789&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>4</span><span class='op'>..</span><span class='int'>6</span>)   <span class='comment'># =&gt; &quot;456&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='op'>-</span><span class='int'>6</span><span class='op'>..</span><span class='op'>-</span><span class='int'>4</span>) <span class='comment'># =&gt; &quot;456&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>5</span><span class='op'>..</span><span class='int'>2</span>)   <span class='comment'># =&gt; &quot;&quot; # range.size is zero.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>40</span><span class='op'>..</span><span class='int'>42</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>The starting and ending offsets need not be on character boundaries:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;こ&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;\x81\x93\xE3&quot;</span></code></pre>

<p>The encodings of <code>self</code> and the returned substring are always the same:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                 <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>).<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span>).<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<p>But, depending on the character boundaries, the encoding of the returned substring may not be valid:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span>                 <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>).<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span>).<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span> <span class='comment'># =&gt; false</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6769-L6779'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6769' data-end='6779'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6769</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_byteslice(int argc, VALUE *argv, VALUE str)
{
    if (argc == 2) {
        long beg = NUM2LONG(argv[0]);
        long len = NUM2LONG(argv[1]);
        return str_byte_substr(str, beg, len, TRUE);
    }
    rb_check_arity(argc, 1, 2);
    return str_byte_aref(str, argv[0]);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="bytesplice-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>bytesplice</strong>(offset, length, str)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>bytesplice</strong>(offset, length, str, str_offset, str_length)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>bytesplice</strong>(range, str)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>bytesplice</strong>(range, str, str_range)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Replaces <em>target bytes</em> in <code>self</code> with <em>source bytes</em> from the given string <code>str</code>; returns <code>self</code>.</p>

<p>In the first form, arguments <code>offset</code> and <a href="#length-instance_method" title="String#length (method)">#length</a> determine the target bytes, and the source bytes are all of the given <code>str</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;abc3456789&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>3</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;012abc6789&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>50</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>50</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Raises IndexError.</span></code></pre>

<p>The counts of the target bytes and source source bytes may be different:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abc6789&quot;      # Shorter source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abc123456789&quot; # Shorter target.</span></code></pre>

<p>And either count may be zero (i.e., specifying an empty string):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; &quot;3456789&quot;       # Empty source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abc0123456789&quot; # Empty target.</span></code></pre>

<p>In the second form, just as in the first, arugments <code>offset</code> and <a href="#length-instance_method" title="String#length (method)">#length</a> determine the target bytes; argument <code>str</code> <em>contains</em> the source bytes, and the additional arguments <code>str_offset</code> and <code>str_length</code> determine the actual source bytes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;abc3456789&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; &quot;b3456789&quot;      # Shorter source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;abc123456789&quot;  # Shorter target.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span>) <span class='comment'># =&gt; &quot;3456789&quot;       # Empty source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;abc0123456789&quot; # Empty target.</span></code></pre>

<p>In the third form, argument <code>range</code> determines the target bytes and the source bytes are all of the given <code>str</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;abc3456789&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>3</span><span class='op'>..</span><span class='int'>5</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;012abc6789&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>5</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;abc6789&quot;       # Shorter source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;abc123456789&quot;  # Shorter target.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; &quot;3456789&quot;       # Empty source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>...</span><span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abc0123456789&quot; # Empty target.</span></code></pre>

<p>In the fourth form, just as in the third, arugment <code>range</code> determines the target bytes; argument <code>str</code> <em>contains</em> the source bytes, and the additional argument <code>str_range</code> determines the actual source bytes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>)  <span class='comment'># =&gt; &quot;abc3456789&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>3</span><span class='op'>..</span><span class='int'>5</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>)  <span class='comment'># =&gt; &quot;012abc6789&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='op'>..</span><span class='int'>1</span>)  <span class='comment'># =&gt; &quot;ab3456789&quot;     # Shorter source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>)  <span class='comment'># =&gt; &quot;abc23456789&quot;   # Shorter target.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='op'>...</span><span class='int'>0</span>) <span class='comment'># =&gt; &quot;3456789&quot;       # Empty source.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='op'>...</span><span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>) <span class='comment'># =&gt; &quot;abc0123456789&quot; # Empty target.</span></code></pre>

<p>In any of the forms, the beginnings and endings of both source and target must be on character boundaries.</p>

<p>In these examples, <code>self</code> has five 3-byte characters, and so has character boundaries at offsets 0, 3, 6, 9, 12, and 15.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abcんにちは&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Raises IndexError.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesplice'>bytesplice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Raises IndexError.</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6814-L6874'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6814' data-end='6874'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6814</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_bytesplice(int argc, VALUE *argv, VALUE str)
{
    long beg, len, vbeg, vlen;
    VALUE val;
    int cr;

    rb_check_arity(argc, 2, 5);
    if (!(argc == 2 || argc == 3 || argc == 5)) {
        rb_raise(rb_eArgError, &quot;wrong number of arguments (given %d, expected 2, 3, or 5)&quot;, argc);
    }
    if (argc == 2 || (argc == 3 &amp;&amp; !RB_INTEGER_TYPE_P(argv[0]))) {
        if (!rb_range_beg_len(argv[0], &amp;beg, &amp;len, RSTRING_LEN(str), 2)) {
            rb_raise(rb_eTypeError, &quot;wrong argument type %s (expected Range)&quot;,
                     rb_builtin_class_name(argv[0]));
        }
        val = argv[1];
        StringValue(val);
        if (argc == 2) {
            /* bytesplice(range, str) */
            vbeg = 0;
            vlen = RSTRING_LEN(val);
        }
        else {
            /* bytesplice(range, str, str_range) */
            if (!rb_range_beg_len(argv[2], &amp;vbeg, &amp;vlen, RSTRING_LEN(val), 2)) {
                rb_raise(rb_eTypeError, &quot;wrong argument type %s (expected Range)&quot;,
                         rb_builtin_class_name(argv[2]));
            }
        }
    }
    else {
        beg = NUM2LONG(argv[0]);
        len = NUM2LONG(argv[1]);
        val = argv[2];
        StringValue(val);
        if (argc == 3) {
            /* bytesplice(index, length, str) */
            vbeg = 0;
            vlen = RSTRING_LEN(val);
        }
        else {
            /* bytesplice(index, length, str, str_index, str_length) */
            vbeg = NUM2LONG(argv[3]);
            vlen = NUM2LONG(argv[4]);
        }
    }
    str_check_beg_len(str, &amp;beg, &amp;len);
    str_check_beg_len(val, &amp;vbeg, &amp;vlen);
    str_modify_keep_cr(str);

    if (RB_UNLIKELY(ENCODING_GET_INLINED(str) != ENCODING_GET_INLINED(val))) {
        rb_enc_associate(str, rb_enc_check(str, val));
    }

    rb_str_update_1(str, beg, len, val, vbeg, vlen);
    cr = ENC_CODERANGE_AND(ENC_CODERANGE(str), ENC_CODERANGE(val));
    if (cr != ENC_CODERANGE_BROKEN)
        ENC_CODERANGE_SET(str, cr);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="capitalize-instance_method">
  <h3 class='signature '>
    #<strong>capitalize</strong>(mapping = :ascii)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string containing the characters in <code>self</code>, each with possibly changed case:</p>
<ul><li>
<p>The first character made uppercase.</p>
</li><li>
<p>All other characters are made lowercase.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_capitalize'>capitalize</span>  <span class='comment'># =&gt; &quot;Hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HELLO</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_capitalize'>capitalize</span>  <span class='comment'># =&gt; &quot;Hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>straße</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_capitalize'>capitalize</span> <span class='comment'># =&gt; &quot;Straße&quot;  # Lowercase &#39;ß&#39; not changed.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>STRAẞE</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_capitalize'>capitalize</span> <span class='comment'># =&gt; &quot;Straße&quot;  # Uppercase &#39;ẞ&#39; downcased to &#39;ß&#39;.</span></code></pre>

<p>Some characters (and some character sets) do not have upcase and downcase versions; see <a href="file.case_mapping.html" title="Case Mapping">Case Mapping</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1, 2, 3, ...</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_capitalize'>capitalize</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_capitalize'>capitalize</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true</span></code></pre>

<p>The casing is affected by the given <code>mapping</code>, which may be <code>:ascii</code>, <code>:fold</code>, or <code>:turkic</code>; see <a href="file.case_mapping.html#label-Case%2BMappings" title="Case Mappings">Case Mappings</a>.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8141-L8159'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8141' data-end='8159'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8141</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_capitalize(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_TITLECASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return str;
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }
    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="capitalize!-instance_method">
  <h3 class='signature '>
    #<strong>capitalize!</strong>(mapping = :ascii)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#capitalize-instance_method" title="String#capitalize (method)">#capitalize</a>, except that:</p>
<ul><li>
<p>Changes character casings in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any changes are made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: See <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8113-L8130'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8113' data-end='8130'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8113</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_capitalize_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_TITLECASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return Qnil;
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="casecmp-instance_method">
  <h3 class='signature '>
    #<strong>casecmp</strong>(other_string)  &#x21d2; <code>1</code>, ...   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Ignoring case, compares <code>self</code> and <code>other_string</code>; returns:</p>
<ul><li>
<p>-1 if <code>self.downcase</code> is smaller than <code>other_string.downcase</code>.</p>
</li><li>
<p>0 if the two are equal.</p>
</li><li>
<p>1 if <code>self.downcase</code> is larger than <code>other_string.downcase</code>.</p>
</li><li>
<p><code>nil</code> if the two are incomparable.</p>
</li></ul>

<p>See <a href="file.case_mapping.html" title="Case Mapping">Case Mapping</a>.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp'>casecmp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>goo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; -1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>goo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp'>casecmp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp'>casecmp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; -1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp'>casecmp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp'>casecmp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp'>casecmp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp'>casecmp</span>(<span class='int'>1</span>)      <span class='comment'># =&gt; nil</span></code></pre>

<p>Related: see <a href="String.html#label-Comparing" title="Comparing">Comparing</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4366-L4374'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4366' data-end='4374'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4366</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_casecmp(VALUE str1, VALUE str2)
{
    VALUE s = rb_check_string_type(str2);
    if (NIL_P(s)) {
        return Qnil;
    }
    return str_casecmp(str1, s);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="casecmp?-instance_method">
  <h3 class='signature '>
    #<strong>casecmp?</strong>(other_string)  &#x21d2; <code>true</code>, ...   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if <code>self</code> and <code>other_string</code> are equal after Unicode case folding, <code>false</code> if unequal, <code>nil</code> if incomparable.</p>

<p>See <a href="file.case_mapping.html" title="Case Mapping">Case Mapping</a>.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>goo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>goo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='int'>1</span>)      <span class='comment'># =&gt; nil</span></code></pre>

<p>Related: see <a href="String.html#label-Comparing" title="Comparing">Comparing</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4455-L4463'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4455' data-end='4463'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4455</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_casecmp_p(VALUE str1, VALUE str2)
{
    VALUE s = rb_check_string_type(str2);
    if (NIL_P(s)) {
        return Qnil;
    }
    return str_casecmp_p(str1, s);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="center-instance_method">
  <h3 class='signature '>
    #<strong>center</strong>(size, pad_string = &#39; &#39;)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a centered copy of <code>self</code>.</p>

<p>If integer argument <a href="#size-instance_method" title="String#size (method)">#size</a> is greater than the size (in characters) of <code>self</code>, returns a new string of length <a href="#size-instance_method" title="String#size (method)">#size</a> that is a copy of <code>self</code>, centered and padded on one or both ends with <code>pad_string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>6</span>)             <span class='comment'># =&gt; &quot;hello &quot;               # Padded on one end.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>10</span>)            <span class='comment'># =&gt; &quot;  hello   &quot;           # Padded on both ends.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>20</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-|</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; &quot;-|-|-|-hello-|-|-|-|&quot; # Some padding repeated.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>10</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdefg</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abhelloabc&quot;           # Some padding not used.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  hello  </span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>13</span>)        <span class='comment'># =&gt; &quot;    hello    &quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>10</span>)         <span class='comment'># =&gt; &quot;  こんにちは   &quot;      # Multi-byte characters.</span></code></pre>

<p>If <a href="#size-instance_method" title="String#size (method)">#size</a> is less than or equal to the size of <code>self</code>, returns an unpadded copy of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>5</span>)   <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='op'>-</span><span class='int'>10</span>) <span class='comment'># =&gt; &quot;hello&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11185-L11189'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11185' data-end='11189'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11185</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_center(int argc, VALUE *argv, VALUE str)
{
    return rb_str_justify(argc, argv, str, &#39;c&#39;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="chars-instance_method">
  <h3 class='signature '>
    #<strong>chars</strong>  &#x21d2; <code>array_of_characters</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of the characters in <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chars'>chars</span>     <span class='comment'># =&gt; [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chars'>chars</span> <span class='comment'># =&gt; [&quot;こ&quot;, &quot;ん&quot;, &quot;に&quot;, &quot;ち&quot;, &quot;は&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chars'>chars</span>          <span class='comment'># =&gt; []</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9724-L9729'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9724' data-end='9729'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9724</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_chars(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;chars&quot;, rb_str_strlen(str));
    return rb_str_enumerate_chars(str, ary);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="chomp-instance_method">
  <h3 class='signature '>
    #<strong>chomp</strong>(line_sep = $/)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string copied from <code>self</code>, with trailing characters possibly removed:</p>

<p>When <code>line_sep</code> is <code>&quot;\n&quot;</code>, removes the last one or two characters if they are <code>&quot;\r&quot;</code>, <code>&quot;\n&quot;</code>, or <code>&quot;\r\n&quot;</code> (but not <code>&quot;\n\r&quot;</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$/</span>                    <span class='comment'># =&gt; &quot;\n&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\r</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>         <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>         <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\r\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>       <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\n\r</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>       <span class='comment'># =&gt; &quot;abc\n&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>こんにちは\r\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>  <span class='comment'># =&gt; &quot;こんにちは&quot;</span></code></pre>

<p>When <code>line_sep</code> is <code>&#39;&#39;</code> (an empty string), removes multiple trailing occurrences of <code>&quot;\n&quot;</code> or <code>&quot;\r\n&quot;</code> (but not <code>&quot;\r&quot;</code> or <code>&quot;\n\r&quot;</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\n\n\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\r\n\r\n\r\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\n\n\r\n\r\n\n\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\n\r\n\r\n\r</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; &quot;abc\n\r\n\r\n\r&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\r\r\r</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;abc\r\r\r&quot;</span></code></pre>

<p>When <code>line_sep</code> is neither <code>&quot;\n&quot;</code> nor <code>&#39;&#39;</code>, removes a single trailing line separator if there is one:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcd</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cd</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;ab&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdcd</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cd</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abcd&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcd</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xx</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;abcd&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10193-L10199'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10193' data-end='10199'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10193</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_chomp(int argc, VALUE *argv, VALUE str)
{
    VALUE rs = chomp_rs(argc, argv);
    if (NIL_P(rs)) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, 0, chompped_length(str, rs));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="chomp!-instance_method">
  <h3 class='signature '>
    #<strong>chomp!</strong>(line_sep = $/)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#chomp-instance_method" title="String#chomp (method)">#chomp</a>, except that:</p>
<ul><li>
<p>Removes trailing characters from <code>self</code> (not from a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any characters are removed, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10173-L10182'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10173' data-end='10182'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10173</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_chomp_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE rs;
    str_modifiable(str);
    if (RSTRING_LEN(str) == 0 &amp;&amp; argc &lt; 2) return Qnil;
    rs = chomp_rs(argc, argv);
    if (NIL_P(rs)) return Qnil;
    return rb_str_chomp_string(str, rs);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="chop-instance_method">
  <h3 class='signature '>
    #<strong>chop</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string copied from <code>self</code>, with trailing characters possibly removed.</p>

<p>Removes <code>&quot;\r\n&quot;</code> if those are the last two characters.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\r\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chop'>chop</span>      <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>こんにちは\r\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_chop'>chop</span> <span class='comment'># =&gt; &quot;こんにちは&quot;</span></code></pre>

<p>Otherwise removes the last character if it exists.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcd</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chop'>chop</span>     <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chop'>chop</span> <span class='comment'># =&gt; &quot;こんにち&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chop'>chop</span>         <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>If you only need to remove the newline separator at the end of the string, <a href="#chomp-instance_method" title="String#chomp (method)">#chomp</a> is a better alternative.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10017-L10021'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10017' data-end='10021'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10017</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_chop(VALUE str)
{
    return rb_str_subseq(str, 0, chopped_length(str));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="chop!-instance_method">
  <h3 class='signature '>
    #<strong>chop!</strong>  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#chop-instance_method" title="String#chop (method)">#chop</a>, except that:</p>
<ul><li>
<p>Removes trailing characters from <code>self</code> (not from a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any characters are removed, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9991-L10006'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9991' data-end='10006'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9991</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_chop_bang(VALUE str)
{
    str_modify_keep_cr(str);
    if (RSTRING_LEN(str) &gt; 0) {
        long len;
        len = chopped_length(str);
        STR_SET_LEN(str, len);
        TERM_FILL(&amp;RSTRING_PTR(str)[len], TERM_LEN(str));
        if (ENC_CODERANGE(str) != ENC_CODERANGE_7BIT) {
            ENC_CODERANGE_CLEAR(str);
        }
        return str;
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="chr-instance_method">
  <h3 class='signature '>
    #<strong>chr</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string containing the first character of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chr'>chr</span>     <span class='comment'># =&gt; &quot;h&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chr'>chr</span> <span class='comment'># =&gt; &quot;こ&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_chr'>chr</span>          <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6595-L6599'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6595' data-end='6599'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6595</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_chr(VALUE str)
{
    return rb_str_substr(str, 0, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear-instance_method">
  <h3 class='signature '>
    #<strong>clear</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the contents of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_clear'>clear</span> <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_s'>s</span>       <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6573-L6585'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6573' data-end='6585'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6573</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_clear(VALUE str)
{
    str_discard(str);
    STR_SET_EMBED(str);
    STR_SET_LEN(str, 0);
    RSTRING_PTR(str)[0] = 0;
    if (rb_enc_asciicompat(STR_ENC_GET(str)))
        ENC_CODERANGE_SET(str, ENC_CODERANGE_7BIT);
    else
        ENC_CODERANGE_SET(str, ENC_CODERANGE_VALID);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="codepoints-instance_method">
  <h3 class='signature '>
    #<strong>codepoints</strong>  &#x21d2; <code>array_of_integers</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of the codepoints in <code>self</code>; each codepoint is the integer value for a character:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_codepoints'>codepoints</span>     <span class='comment'># =&gt; [104, 101, 108, 108, 111]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_codepoints'>codepoints</span> <span class='comment'># =&gt; [12371, 12435, 12395, 12385, 12399]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_codepoints'>codepoints</span>          <span class='comment'># =&gt; []</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9784-L9789'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9784' data-end='9789'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9784</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_codepoints(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;codepoints&quot;, rb_str_strlen(str));
    return rb_str_enumerate_codepoints(str, ary);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="concat-instance_method">
  <h3 class='signature '>
    #<strong>concat</strong>(*objects)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Concatenates each object in <code>objects</code> to <code>self</code>; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;foobarbaz&quot;</span></code></pre>

<p>For each given object <code>object</code> that is an integer, the value is considered a codepoint and converted to a character before concatenation:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='int'>32</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>32</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;foo bar baz&quot; # Embeds spaces.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こん</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='int'>12395</span><span class='comma'>,</span> <span class='int'>12385</span><span class='comma'>,</span> <span class='int'>12399</span>)  <span class='comment'># =&gt; &quot;こんにちは&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L3837-L3856'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3837' data-end='3856'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 3837</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_concat_multi(int argc, VALUE *argv, VALUE str)
{
    str_modifiable(str);

    if (argc == 1) {
        return rb_str_concat(str, argv[0]);
    }
    else if (argc &gt; 1) {
        int i;
        VALUE arg_str = rb_str_tmp_new(0);
        rb_enc_copy(arg_str, str);
        for (i = 0; i &lt; argc; i++) {
            rb_str_concat(arg_str, argv[i]);
        }
        rb_str_buf_append(str, arg_str);
    }

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="count-instance_method">
  <h3 class='signature '>
    #<strong>count</strong>(*selectors)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the total number of characters in <code>self</code> that are specified by the given selectors.</p>

<p>For one 1-character selector, returns the count of instances of that character:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 5
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 0
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>よろしくお願いします</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>よ</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>し</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 2</span></code></pre>

<p>For one multi-character selector, returns the count of instances for all specified characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; 7
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; 8
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcd</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; 9
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdr</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 11
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdrx</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 11</span></code></pre>

<p>Order and repetition do not matter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ba</span><span class='tstring_end'>&#39;</span></span>)   <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baab</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true</span></code></pre>

<p>For multiple selectors, forms a single selector that is the intersection of characters in all selectors and returns the count of instances for that selector:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdefg</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcde</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dcbfg</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bcd</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>def</span><span class='tstring_end'>&#39;</span></span>)     <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; true</span></code></pre>

<p>In a character selector, three characters get special treatment:</p>
<ul><li>
<p>A caret (<code>&#39;^&#39;</code>) functions as a <em>negation</em> operator for the immediately following characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^bc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 8  # Count of all except &#39;b&#39; and &#39;c&#39;.</span></code></pre>
</li><li>
<p>A hyphen (<code>&#39;-&#39;</code>) between two other characters defines a <em>range</em> of characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-c</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 8  # Count of all &#39;a&#39;, &#39;b&#39;, and &#39;c&#39;.</span></code></pre>
</li><li>
<p>A backslash (<code>&#39;\&#39;</code>) acts as an escape for a caret, a hyphen, or another backslash:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\^bc</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; 3  # Count of &#39;^&#39;, &#39;b&#39;, and &#39;c&#39;.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a\-c</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; 6  # Count of &#39;a&#39;, &#39;-&#39;, and &#39;c&#39;.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo\bar\baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 2  # Count of &#39;\&#39;.</span></code></pre>
</li></ul>

<p>These usages may be mixed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-cq-t</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 10  # Multiple ranges.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ac-d</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; 7   # Range mixed with plain characters.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^a-c</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; 3   # Range mixed with negation.</span></code></pre>

<p>For multiple selectors, all forms may be used, including negations, ranges, and escapes.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^def</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^abcdef</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-e</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c-g</span><span class='tstring_end'>&#39;</span></span>)   <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cde</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c-g</span><span class='tstring_end'>&#39;</span></span>)  <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_count'>count</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defg</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; true</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8950-L9017'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8950' data-end='9017'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8950</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_count(int argc, VALUE *argv, VALUE str)
{
    char table[TR_TABLE_SIZE];
    rb_encoding *enc = 0;
    VALUE del = 0, nodel = 0, tstr;
    char *s, *send;
    int i;
    int ascompat;
    size_t n = 0;

    rb_check_arity(argc, 1, UNLIMITED_ARGUMENTS);

    tstr = argv[0];
    StringValue(tstr);
    enc = rb_enc_check(str, tstr);
    if (argc == 1) {
        const char *ptstr;
        if (RSTRING_LEN(tstr) == 1 &amp;&amp; rb_enc_asciicompat(enc) &amp;&amp;
            (ptstr = RSTRING_PTR(tstr),
             ONIGENC_IS_ALLOWED_REVERSE_MATCH(enc, (const unsigned char *)ptstr, (const unsigned char *)ptstr+1)) &amp;&amp;
            !is_broken_string(str)) {
            int clen;
            unsigned char c = rb_enc_codepoint_len(ptstr, ptstr+1, &amp;clen, enc);

            s = RSTRING_PTR(str);
            if (!s || RSTRING_LEN(str) == 0) return INT2FIX(0);
            send = RSTRING_END(str);
            while (s &lt; send) {
                if (*(unsigned char*)s++ == c) n++;
            }
            return SIZET2NUM(n);
        }
    }

    tr_setup_table(tstr, table, TRUE, &amp;del, &amp;nodel, enc);
    for (i=1; i&lt;argc; i++) {
        tstr = argv[i];
        StringValue(tstr);
        enc = rb_enc_check(str, tstr);
        tr_setup_table(tstr, table, FALSE, &amp;del, &amp;nodel, enc);
    }

    s = RSTRING_PTR(str);
    if (!s || RSTRING_LEN(str) == 0) return INT2FIX(0);
    send = RSTRING_END(str);
    ascompat = rb_enc_asciicompat(enc);
    while (s &lt; send) {
        unsigned int c;

        if (ascompat &amp;&amp; (c = *(unsigned char*)s) &lt; 0x80) {
            if (table[c]) {
                n++;
            }
            s++;
        }
        else {
            int clen;
            c = rb_enc_codepoint_len(s, send, &amp;clen, enc);
            if (tr_find(c, table, del, nodel)) {
                n++;
            }
            s += clen;
        }
    }

    return SIZET2NUM(n);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="crypt-instance_method">
  <h3 class='signature '>
    #<strong>crypt</strong>(salt_str)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the string generated by calling <code>crypt(3)</code> standard library function with <code>str</code> and <code>salt_str</code>, in this order, as its arguments.  Please do not use this method any longer.  It is legacy; provided only for backward compatibility with ruby scripts in earlier days.  It is bad to use in contemporary programs for several reasons:</p>
<ul><li>
<p>Behaviour of C’s <code>crypt(3)</code> depends on the OS it is run.  The generated string lacks data portability.</p>
</li><li>
<p>On some OSes such as Mac OS, <code>crypt(3)</code> never fails (i.e. silently ends up in unexpected results).</p>
</li><li>
<p>On some OSes such as Mac OS, <code>crypt(3)</code> is not thread safe.</p>
</li><li>
<p>So-called “traditional” usage of <code>crypt(3)</code> is very very very weak.  According to its manpage, Linux’s traditional <code>crypt(3)</code> output has only 2**56 variations; too easy to brute force today.  And this is the default behaviour.</p>
</li><li>
<p>In order to make things robust some OSes implement so-called “modular” usage. To go through, you have to do a complex build-up of the <code>salt_str</code> parameter, by hand. Failure in generation of a proper salt string tends not to yield any errors; typos in parameters are normally not detectable.</p>
<ul><li>
<p>For instance, in the following example, the second invocation of String#crypt is wrong; it has a typo in “round=” (lacks “s”).  However the call does not fail and something unexpected is generated.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_crypt'>crypt</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$5$rounds=1000$salt$</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># OK, proper usage
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_crypt'>crypt</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$5$round=1000$salt$</span><span class='tstring_end'>&quot;</span></span>)  <span class='comment'># Typo not detected</span></code></pre>
</li></ul>
</li><li>
<p>Even in the “modular” mode, some hash functions are considered archaic and no longer recommended at all; for instance module <code>$1$</code> is officially abandoned by its author: see</p>
</li></ul>

<p><a href="http://phk.freebsd.dk/sagas/md5crypt_eol">phk.freebsd.dk/sagas/md5crypt_eol</a>/ .  For another</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_instance'>instance</span> <span class='kw'>module</span> <span class='op'>&lt;</span><span class='id identifier rubyid_code'>code</span><span class='op'>&gt;</span><span class='backref'>$3</span><span class='gvar'>$&lt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>code&gt; is considered completely
broken: see the manpage of FreeBSD.</span></code></pre>
<ul><li>
<p>On some OS such as Mac OS, there is no modular mode. Yet, as written above, <code>crypt(3)</code> on Mac OS never fails. This means even if you build up a proper salt string it generates a traditional DES hash anyways, and there is no way for you to be aware of.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_crypt'>crypt</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$5$rounds=1000$salt$</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;$5fNPQMxC5j6.&quot;</span></code></pre>
</li></ul>

<p>If for some reason you cannot migrate to other secure contemporary password hashing algorithms, install the string-crypt gem and <code>require &#39;string/crypt&#39;</code> to continue using it.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10908-L10975'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10908' data-end='10975'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10908</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_crypt(VALUE str, VALUE salt)
{
#ifdef HAVE_CRYPT_R
    VALUE databuf;
    struct crypt_data *data;
#   define CRYPT_END() ALLOCV_END(databuf)
#else
    char *tmp_buf;
    extern char *crypt(const char *, const char *);
#   define CRYPT_END() rb_nativethread_lock_unlock(&amp;crypt_mutex.lock)
#endif
    VALUE result;
    const char *s, *saltp;
    char *res;
#ifdef BROKEN_CRYPT
    char salt_8bit_clean[3];
#endif

    StringValue(salt);
    mustnot_wchar(str);
    mustnot_wchar(salt);
    s = StringValueCStr(str);
    saltp = RSTRING_PTR(salt);
    if (RSTRING_LEN(salt) &lt; 2 || !saltp[0] || !saltp[1]) {
        rb_raise(rb_eArgError, &quot;salt too short (need &gt;=2 bytes)&quot;);
    }

#ifdef BROKEN_CRYPT
    if (!ISASCII((unsigned char)saltp[0]) || !ISASCII((unsigned char)saltp[1])) {
        salt_8bit_clean[0] = saltp[0] &amp; 0x7f;
        salt_8bit_clean[1] = saltp[1] &amp; 0x7f;
        salt_8bit_clean[2] = &#39;\0&#39;;
        saltp = salt_8bit_clean;
    }
#endif
#ifdef HAVE_CRYPT_R
    data = ALLOCV(databuf, sizeof(struct crypt_data));
# ifdef HAVE_STRUCT_CRYPT_DATA_INITIALIZED
    data-&gt;initialized = 0;
# endif
    res = crypt_r(s, saltp, data);
#else
    rb_nativethread_lock_lock(&amp;crypt_mutex.lock);
    res = crypt(s, saltp);
#endif
    if (!res) {
        int err = errno;
        CRYPT_END();
        rb_syserr_fail(err, &quot;crypt&quot;);
    }
#ifdef HAVE_CRYPT_R
    result = rb_str_new_cstr(res);
    CRYPT_END();
#else
    // We need to copy this buffer because it&#39;s static and we need to unlock the mutex
    // before allocating a new object (the string to be returned). If we allocate while
    // holding the lock, we could run GC which fires the VM barrier and causes a deadlock
    // if other ractors are waiting on this lock.
    size_t res_size = strlen(res)+1;
    tmp_buf = ALLOCA_N(char, res_size); // should be small enough to alloca
    memcpy(tmp_buf, res, res_size);
    res = tmp_buf;
    CRYPT_END();
    result = rb_str_new_cstr(res);
#endif
    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dedup-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>-</strong>  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>dedup</strong>  &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#-@-instance_method" title="String#-@ (method)">#-@</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="delete-instance_method">
  <h3 class='signature '>
    #<strong>delete</strong>(*selectors)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string that is a copy of <code>self</code> with certain characters removed; the removed characters are all instances of those specified by the given string <code>selectors</code>.</p>

<p>For one 1-character selector, removes all instances of that character:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;brcdbr&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;aracadara&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;abracadabra&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;abracadabra&quot;
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>よろしくお願いします</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>よ</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;ろしくお願いします&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>し</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;よろくお願います&quot;</span></code></pre>

<p>For one multi-character selector, removes all instances of the specified characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; &quot;rcdr&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; &quot;rdr&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcd</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;rr&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdr</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdrx</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>Order and repetition do not matter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ba</span><span class='tstring_end'>&#39;</span></span>)   <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baab</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true</span></code></pre>

<p>For multiple selectors, forms a single selector that is the intersection of characters in all selectors and removes all instances of characters specified by that selector:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdefg</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcde</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dcbfg</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bcd</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>def</span><span class='tstring_end'>&#39;</span></span>)     <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; true</span></code></pre>

<p>In a character selector, three characters get special treatment:</p>
<ul><li>
<p>A caret (<code>&#39;^&#39;</code>) functions as a <em>negation</em> operator for the immediately following characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^bc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;bcb&quot;  # Deletes all except &#39;b&#39; and &#39;c&#39;.</span></code></pre>
</li><li>
<p>A hyphen (<code>&#39;-&#39;</code>) between two other characters defines a <em>range</em> of characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-c</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;rdr&quot;  # Deletes all &#39;a&#39;, &#39;b&#39;, and &#39;c&#39;.</span></code></pre>
</li><li>
<p>A backslash (<code>&#39;\&#39;</code>) acts as an escape for a caret, a hyphen, or another backslash:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\^bc</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;araadara&quot;   # Deletes all &#39;^&#39;, &#39;b&#39;, and &#39;c&#39;.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a\-c</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;brdbr&quot;      # Deletes all &#39;a&#39;, &#39;-&#39;, and &#39;c&#39;.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo\bar\baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;foobarbaz&quot;  # Deletes all &#39;\&#39;.</span></code></pre>
</li></ul>

<p>These usages may be mixed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-cq-t</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;d&quot;         # Multiple ranges.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ac-d</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;brbr&quot;      # Range mixed with plain characters.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^a-c</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;abacaaba&quot;  # Range mixed with negation.</span></code></pre>

<p>For multiple selectors, all forms may be used, including negations, ranges, and escapes.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^def</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^abcdef</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-e</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c-g</span><span class='tstring_end'>&#39;</span></span>)   <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cde</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^abc</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c-g</span><span class='tstring_end'>&#39;</span></span>)  <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defg</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; true</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8781-L8787'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8781' data-end='8787'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8781</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_delete(int argc, VALUE *argv, VALUE str)
{
    str = str_duplicate(rb_cString, str);
    rb_str_delete_bang(argc, argv, str);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete!-instance_method">
  <h3 class='signature '>
    #<strong>delete!</strong>(*selectors)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#delete-instance_method" title="String#delete (method)">#delete</a>, but modifies <code>self</code> in place; returns <code>self</code> if any characters were deleted, <code>nil</code> otherwise.</p>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8711-L8770'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8711' data-end='8770'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8711</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_delete_bang(int argc, VALUE *argv, VALUE str)
{
    char squeez[TR_TABLE_SIZE];
    rb_encoding *enc = 0;
    char *s, *send, *t;
    VALUE del = 0, nodel = 0;
    int modify = 0;
    int i, ascompat, cr;

    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return Qnil;
    rb_check_arity(argc, 1, UNLIMITED_ARGUMENTS);
    for (i=0; i&lt;argc; i++) {
        VALUE s = argv[i];

        StringValue(s);
        enc = rb_enc_check(str, s);
        tr_setup_table(s, squeez, i==0, &amp;del, &amp;nodel, enc);
    }

    str_modify_keep_cr(str);
    ascompat = rb_enc_asciicompat(enc);
    s = t = RSTRING_PTR(str);
    send = RSTRING_END(str);
    cr = ascompat ? ENC_CODERANGE_7BIT : ENC_CODERANGE_VALID;
    while (s &lt; send) {
        unsigned int c;
        int clen;

        if (ascompat &amp;&amp; (c = *(unsigned char*)s) &lt; 0x80) {
            if (squeez[c]) {
                modify = 1;
            }
            else {
                if (t != s) *t = c;
                t++;
            }
            s++;
        }
        else {
            c = rb_enc_codepoint_len(s, send, &amp;clen, enc);

            if (tr_find(c, squeez, del, nodel)) {
                modify = 1;
            }
            else {
                if (t != s) rb_enc_mbcput(c, t, enc);
                t += clen;
                if (cr == ENC_CODERANGE_7BIT) cr = ENC_CODERANGE_VALID;
            }
            s += clen;
        }
    }
    TERM_FILL(t, TERM_LEN(str));
    STR_SET_LEN(str, t - RSTRING_PTR(str));
    ENC_CODERANGE_SET(str, cr);

    if (modify) return str;
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_prefix-instance_method">
  <h3 class='signature '>
    #<strong>delete_prefix</strong>(prefix)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with leading substring <code>prefix</code> removed:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oof</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;of&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oof</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>)         <span class='comment'># =&gt; &quot;f&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oof</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oof</span><span class='tstring_end'>&#39;</span></span>)        <span class='comment'># =&gt; &quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oof</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;oof&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こん</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;にちは&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11421-L11430'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11421' data-end='11430'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11421</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_delete_prefix(VALUE str, VALUE prefix)
{
    long prefixlen;

    prefixlen = deleted_prefix_length(str, prefix);
    if (prefixlen &lt;= 0) return str_duplicate(rb_cString, str);

    return rb_str_subseq(str, prefixlen, RSTRING_LEN(str) - prefixlen);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_prefix!-instance_method">
  <h3 class='signature '>
    #<strong>delete_prefix!</strong>(prefix)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#delete_prefix-instance_method" title="String#delete_prefix (method)">#delete_prefix</a>, except that <code>self</code> is modified in place; returns <code>self</code> if the prefix is removed, <code>nil</code> otherwise.</p>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11401-L11411'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11401' data-end='11411'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11401</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_delete_prefix_bang(VALUE str, VALUE prefix)
{
    long prefixlen;
    str_modify_keep_cr(str);

    prefixlen = deleted_prefix_length(str, prefix);
    if (prefixlen &lt;= 0) return Qnil;

    return rb_str_drop_bytes(str, prefixlen);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_suffix-instance_method">
  <h3 class='signature '>
    #<strong>delete_suffix</strong>(suffix)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with trailing substring <code>suffix</code> removed:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;fo&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;f&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)         <span class='comment'># =&gt; &quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ちは</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;こんに&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11505-L11514'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11505' data-end='11514'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11505</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_delete_suffix(VALUE str, VALUE suffix)
{
    long suffixlen;

    suffixlen = deleted_suffix_length(str, suffix);
    if (suffixlen &lt;= 0) return str_duplicate(rb_cString, str);

    return rb_str_subseq(str, 0, RSTRING_LEN(str) - suffixlen);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_suffix!-instance_method">
  <h3 class='signature '>
    #<strong>delete_suffix!</strong>(suffix)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#delete_suffix-instance_method" title="String#delete_suffix (method)">#delete_suffix</a>, except that <code>self</code> is modified in place; returns <code>self</code> if the suffix is removed, <code>nil</code> otherwise.</p>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11477-L11495'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11477' data-end='11495'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11477</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_delete_suffix_bang(VALUE str, VALUE suffix)
{
    long olen, suffixlen, len;
    str_modifiable(str);

    suffixlen = deleted_suffix_length(str, suffix);
    if (suffixlen &lt;= 0) return Qnil;

    olen = RSTRING_LEN(str);
    str_modify_keep_cr(str);
    len = olen - suffixlen;
    STR_SET_LEN(str, len);
    TERM_FILL(&amp;RSTRING_PTR(str)[len], TERM_LEN(str));
    if (ENC_CODERANGE(str) != ENC_CODERANGE_7BIT) {
        ENC_CODERANGE_CLEAR(str);
    }
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="downcase-instance_method">
  <h3 class='signature '>
    #<strong>downcase</strong>(mapping = :ascii)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string containing the downcased characters in <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HELLO</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_downcase'>downcase</span>        <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>STRAẞE</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_downcase'>downcase</span>       <span class='comment'># =&gt; &quot;straße&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ПРИВЕТ</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_downcase'>downcase</span>       <span class='comment'># =&gt; &quot;привет&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RubyGems.org</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_downcase'>downcase</span> <span class='comment'># =&gt; &quot;rubygems.org&quot;</span></code></pre>

<p>Some characters (and some character sets) do not have upcase and downcase versions; see <a href="file.case_mapping.html" title="Case Mapping">Case Mapping</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1, 2, 3, ...</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true</span></code></pre>

<p>The casing is affected by the given <code>mapping</code>, which may be <code>:ascii</code>, <code>:fold</code>, or <code>:turkic</code>; see <a href="file.case_mapping.html#label-Case%2BMappings" title="Case Mappings">Case Mappings</a>.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8075-L8098'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8075' data-end='8098'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8075</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_downcase(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_DOWNCASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        ret = rb_str_new(RSTRING_PTR(str), RSTRING_LEN(str));
        str_enc_copy_direct(ret, str);
        downcase_single(ret);
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }

    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="downcase!-instance_method">
  <h3 class='signature '>
    #<strong>downcase!</strong>(mapping)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#downcase-instance_method" title="String#downcase (method)">#downcase</a>, except that:</p>
<ul><li>
<p>Changes character casings in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any changes are made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: See <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8044-L8064'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8044' data-end='8064'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8044</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_downcase_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_DOWNCASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        if (downcase_single(str))
            flags |= ONIGENC_CASE_MODIFIED;
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump-instance_method">
  <h3 class='signature '>
    #<strong>dump</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>For an ordinary string, this method, <code>dump</code>, returns a printable ASCII-only version of <code>self</code>, enclosed in double-quotes.</p>

<p>For a dumped string, method <a href="#undump-instance_method" title="String#undump (method)">#undump</a> is the inverse of <code>dump</code>; it returns a “restored” version of <code>self</code>, where all the dumping changes have been undone.</p>

<p>In the simplest case, the dumped string contains the original string, enclosed in double-quotes; this example is done in <code>irb</code> (interactive <a href="Ruby.html" title="Ruby (module)"><code>::Ruby</code></a>), which uses method <a href="#inspect-instance_method" title="String#inspect (method)">#inspect</a> to render the results:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_dump'>dump</span>        <span class='comment'># =&gt; &quot;\&quot;hello\&quot;&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_dump'>dump</span>.<span class='id identifier rubyid_undump'><a href="#undump-instance_method" title="String#undump (method)">undump</a></span> <span class='comment'># =&gt; &quot;hello&quot;</span></code></pre>

<p>Keep in mind that in the second line above:</p>
<ul><li>
<p>The outer double-quotes are put on by <a href="#inspect-instance_method" title="String#inspect (method)">#inspect</a>, and <em>are</em> <em>not</em> part of the output of #dump.</p>
</li><li>
<p>The inner double-quotes <em>are</em> part of the output of <code>dump</code>, and are escaped by <code>inspect</code> because they are within the outer double-quotes.</p>
</li></ul>

<p>To avoid confusion, we’ll use this helper method to omit the outer double-quotes:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_dump'>dump</span>(<span class='id identifier rubyid_s'>s</span>)
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>String:   </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dumped:   </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_dump'>dump</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Undumped: </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_dump'>dump</span>.<span class='id identifier rubyid_undump'><a href="#undump-instance_method" title="String#undump (method)">undump</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>So that for string <code>&#39;hello&#39;</code>, we’ll see:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>String</span><span class='op'>:</span>    <span class='id identifier rubyid_hello'>hello</span>
<span class='const'>Dumped</span><span class='op'>:</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>Undumped</span><span class='op'>:</span>  <span class='id identifier rubyid_hello'>hello</span></code></pre>

<p>In a dump, certain special characters are escaped:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>String</span><span class='op'>:</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
Dumped:    </span><span class='tstring_end'>&quot;</span></span><span class='CHAR'>\</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>Undumped</span><span class='op'>:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>

String:    \
Dumped:    </span><span class='tstring_end'>&quot;</span></span><span class='CHAR'>\</span><span class='CHAR'>\</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
Undumped:  \</span></code></pre>

<p>In a dump, unprintable characters are replaced by printable ones; the unprintable characters are the whitespace characters (other than space itself); here we see the ordinals for those characers, together with explanatory text:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> {
   <span class='int'>7</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Alert (BEL)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='int'>8</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Backspace (BS)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
   <span class='int'>9</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Horizontal tab (HT)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='int'>10</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Linefeed (LF)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='int'>11</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Vertical tab (VT)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='int'>12</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Formfeed (FF)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='int'>13</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Carriage return (CR)</span><span class='tstring_end'>&#39;</span></span>
}</code></pre>

<p>In this example, the dumped output is printed by method <a href="#inspect-instance_method" title="String#inspect (method)">#inspect</a>, and so contains both outer double-quotes and escaped inner double-quotes:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_h'>h</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_i'>i</span> } <span class='comment'># =&gt; [7, 8, 9, 10, 11, 12, 13]
</span><span class='id identifier rubyid_s'>s</span>                         <span class='comment'># =&gt; &quot;\a\b\t\n\v\f\r&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_dump'>dump</span>                    <span class='comment'># =&gt; &quot;\&quot;\\a\\b\\t\\n\\v\\f\\r\&quot;&quot;</span></code></pre>

<p>If <code>self</code> is encoded in UTF-8 and contains Unicode characters, each Unicode character is dumped as a Unicode escape sequence:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>String</span><span class='op'>:</span>    <span class='id identifier rubyid_こんにちは'>こんにちは</span>
<span class='const'>Dumped</span><span class='op'>:</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u3053\u3093\u306B\u3061\u306F</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>Undumped</span><span class='op'>:</span>  <span class='id identifier rubyid_こんにちは'>こんにちは</span></code></pre>

<p>If the encoding of <code>self</code> is not ASCII-compatible (i.e., if <code>self.encoding.ascii_compatible?</code> returns <code>false</code>), each ASCII-compatible byte is dumped as an ASCII character, and all other bytes are dumped as hexadecimal; also appends <code>.dup.force_encoding(\&quot;encoding\&quot;)</code>, where <code>&lt;encoding&gt;</code> is <code>self.encoding.name</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>String</span><span class='op'>:</span>    <span class='id identifier rubyid_hello'>hello</span>
<span class='const'>Dumped</span><span class='op'>:</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xFE\xFF\x00h\x00e\x00l\x00l\x00o</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_dup'><a href="#dup-instance_method" title="String#dup (method)">dup</a></span>.<span class='id identifier rubyid_force_encoding'><a href="#force_encoding-instance_method" title="String#force_encoding (method)">force_encoding</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-16</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'>Undumped</span><span class='op'>:</span>  <span class='id identifier rubyid_hello'>hello</span>

<span class='const'>String</span><span class='op'>:</span>    <span class='id identifier rubyid_こんにちは'>こんにちは</span>
<span class='const'>Dumped</span><span class='op'>:</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xFE\xFF0S0\x930k0a0o</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_dup'><a href="#dup-instance_method" title="String#dup (method)">dup</a></span>.<span class='id identifier rubyid_force_encoding'><a href="#force_encoding-instance_method" title="String#force_encoding (method)">force_encoding</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-16</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'>Undumped</span><span class='op'>:</span>  <span class='id identifier rubyid_こんにちは'>こんにちは</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7335-L7480'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7335' data-end='7480'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7335</span></pre>
<pre class='code cpp'>

VALUE
rb_str_dump(VALUE str)
{
    int encidx = rb_enc_get_index(str);
    rb_encoding *enc = rb_enc_from_index(encidx);
    long len;
    const char *p, *pend;
    char *q, *qend;
    VALUE result;
    int u8 = (encidx == rb_utf8_encindex());
    static const char nonascii_suffix[] = &quot;.dup.force_encoding(\&quot;%s\&quot;)&quot;;

    len = 2;			/* &quot;&quot; */
    if (!rb_enc_asciicompat(enc)) {
        len += strlen(nonascii_suffix) - rb_strlen_lit(&quot;%s&quot;);
        len += strlen(enc-&gt;name);
    }

    p = RSTRING_PTR(str); pend = p + RSTRING_LEN(str);
    while (p &lt; pend) {
        int clen;
        unsigned char c = *p++;

        switch (c) {
          case &#39;&quot;&#39;:  case &#39;\\&#39;:
          case &#39;\n&#39;: case &#39;\r&#39;:
          case &#39;\t&#39;: case &#39;\f&#39;:
          case &#39;\013&#39;: case &#39;\010&#39;: case &#39;\007&#39;: case &#39;\033&#39;:
            clen = 2;
            break;

          case &#39;#&#39;:
            clen = IS_EVSTR(p, pend) ? 2 : 1;
            break;

          default:
            if (ISPRINT(c)) {
                clen = 1;
            }
            else {
                if (u8 &amp;&amp; c &gt; 0x7F) {	/* \u notation */
                    int n = rb_enc_precise_mbclen(p-1, pend, enc);
                    if (MBCLEN_CHARFOUND_P(n)) {
                        unsigned int cc = rb_enc_mbc_to_codepoint(p-1, pend, enc);
                        if (cc &lt;= 0xFFFF)
                            clen = 6;  /* \uXXXX */
                        else if (cc &lt;= 0xFFFFF)
                            clen = 9;  /* \u{XXXXX} */
                        else
                            clen = 10; /* \u{XXXXXX} */
                        p += MBCLEN_CHARFOUND_LEN(n)-1;
                        break;
                    }
                }
                clen = 4;	/* \xNN */
            }
            break;
        }

        if (clen &gt; LONG_MAX - len) {
            rb_raise(rb_eRuntimeError, &quot;string size too big&quot;);
        }
        len += clen;
    }

    result = rb_str_new(0, len);
    p = RSTRING_PTR(str); pend = p + RSTRING_LEN(str);
    q = RSTRING_PTR(result); qend = q + len + 1;

    *q++ = &#39;&quot;&#39;;
    while (p &lt; pend) {
        unsigned char c = *p++;

        if (c == &#39;&quot;&#39; || c == &#39;\\&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = c;
        }
        else if (c == &#39;#&#39;) {
            if (IS_EVSTR(p, pend)) *q++ = &#39;\\&#39;;
            *q++ = &#39;#&#39;;
        }
        else if (c == &#39;\n&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;n&#39;;
        }
        else if (c == &#39;\r&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;r&#39;;
        }
        else if (c == &#39;\t&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;t&#39;;
        }
        else if (c == &#39;\f&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;f&#39;;
        }
        else if (c == &#39;\013&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;v&#39;;
        }
        else if (c == &#39;\010&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;b&#39;;
        }
        else if (c == &#39;\007&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;a&#39;;
        }
        else if (c == &#39;\033&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;e&#39;;
        }
        else if (ISPRINT(c)) {
            *q++ = c;
        }
        else {
            *q++ = &#39;\\&#39;;
            if (u8) {
                int n = rb_enc_precise_mbclen(p-1, pend, enc) - 1;
                if (MBCLEN_CHARFOUND_P(n)) {
                    int cc = rb_enc_mbc_to_codepoint(p-1, pend, enc);
                    p += n;
                    if (cc &lt;= 0xFFFF)
                        snprintf(q, qend-q, &quot;u%04X&quot;, cc);    /* \uXXXX */
                    else
                        snprintf(q, qend-q, &quot;u{%X}&quot;, cc);  /* \u{XXXXX} or \u{XXXXXX} */
                    q += strlen(q);
                    continue;
                }
            }
            snprintf(q, qend-q, &quot;x%02X&quot;, c);
            q += 3;
        }
    }
    *q++ = &#39;&quot;&#39;;
    *q = &#39;\0&#39;;
    if (!rb_enc_asciicompat(enc)) {
        snprintf(q, qend-q, nonascii_suffix, enc-&gt;name);
        encidx = rb_ascii8bit_encindex();
    }
    /* result from dump is ASCII */
    rb_enc_associate_index(result, encidx);
    ENC_CODERANGE_SET(result, ENC_CODERANGE_7BIT);
    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dup-instance_method">
  <h3 class='signature nodoc'>
    #<strong>dup</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2003-L2012'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2003' data-end='2012'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2003</span></pre>
<pre class='code cpp'>

VALUE
rb_str_dup_m(VALUE str)
{
    if (LIKELY(BARE_STRING_P(str))) {
        return str_duplicate(rb_cString, str);
    }
    else {
        return rb_obj_dup(str);
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_byte-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_byte</strong> {|byte| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_byte</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With a block given, calls the block with each successive byte from <code>self</code>; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_byte'>each_byte</span> {<span class='op'>|</span><span class='id identifier rubyid_byte'>byte</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_byte'>byte</span>) }     <span class='comment'># Five 1-byte characters.
</span><span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [104, 101, 108, 108, 111]
</span><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_byte'>each_byte</span> {<span class='op'>|</span><span class='id identifier rubyid_byte'>byte</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_byte'>byte</span>) }  <span class='comment'># Five 3-byte characters.
</span><span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [227, 129, 147, 227, 130, 147, 227, 129, 171, 227, 129, 161, 227, 129, 175]</span></code></pre>

<p>With no block given, returns an enumerator.</p>

<p>Related: see <a href="String.html#label-Iterating" title="Iterating">Iterating</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9640-L9645'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9640' data-end='9645'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9640</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_each_byte(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_byte_size);
    return rb_str_enumerate_bytes(str, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_char-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_char</strong> {|char| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_char</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With a block given, calls the block with each successive character from <code>self</code>; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_char'>each_char</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_char'>char</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_char'>char</span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]
</span><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_char'>each_char</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_char'>char</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_char'>char</span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;こ&quot;, &quot;ん&quot;, &quot;に&quot;, &quot;ち&quot;, &quot;は&quot;]</span></code></pre>

<p>With no block given, returns an enumerator.</p>

<p>Related: see <a href="String.html#label-Iterating" title="Iterating">Iterating</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9709-L9714'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9709' data-end='9714'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9709</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_each_char(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_char_size);
    return rb_str_enumerate_chars(str, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_codepoint-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_codepoint</strong> {|codepoint| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_codepoint</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With a block given, calls the block with each successive codepoint from <code>self</code>; each <a href="https://en.wikipedia.org/wiki/Code_point" target="_parent" title="codepoint">codepoint</a> is the integer value for a character; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_codepoint'>each_codepoint</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_codepoint'>codepoint</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_codepoint'>codepoint</span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [104, 101, 108, 108, 111]
</span><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_codepoint'>each_codepoint</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_codepoint'>codepoint</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_codepoint'>codepoint</span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [12371, 12435, 12395, 12385, 12399]</span></code></pre>

<p>With no block given, returns an enumerator.</p>

<p>Related: see <a href="String.html#label-Iterating" title="Iterating">Iterating</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9769-L9774'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9769' data-end='9774'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9769</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_each_codepoint(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_char_size);
    return rb_str_enumerate_codepoints(str, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_grapheme_cluster-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_grapheme_cluster</strong> {|grapheme_cluster| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_grapheme_cluster</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With a block given, calls the given block with each successive grapheme cluster from <code>self</code> (see <a href="https://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries" target="_parent" title="Unicode Grapheme Cluster Boundaries">Unicode Grapheme Cluster Boundaries</a>); returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_grapheme_cluster'>each_grapheme_cluster</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_grapheme_cluster'>grapheme_cluster</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_grapheme_cluster'>grapheme_cluster</span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_a'>a</span>  <span class='comment'># =&gt; [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]
</span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_each_grapheme_cluster'>each_grapheme_cluster</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_grapheme_cluster'>grapheme_cluster</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_grapheme_cluster'>grapheme_cluster</span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;こ&quot;, &quot;ん&quot;, &quot;に&quot;, &quot;ち&quot;, &quot;は&quot;]</span></code></pre>

<p>With no block given, returns an enumerator.</p>

<p>Related: see <a href="String.html#label-Iterating" title="Iterating">Iterating</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9939-L9944'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9939' data-end='9944'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9939</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_each_grapheme_cluster(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_grapheme_cluster_size);
    return rb_str_enumerate_grapheme_clusters(str, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_line-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_line</strong>(record_separator = $/, chomp: false) {|substring| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_line</strong>(record_separator = $/, chomp: false)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With a block given, forms the substrings (lines) that are the result of splitting <code>self</code> at each occurrence of the given <code>record_separator</code>; passes each line to the block; returns <code>self</code>.</p>

<p>With the default <code>record_separator</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$/</span> <span class='comment'># =&gt; &quot;\n&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;~EOT</span>
<span class='tstring_content'>This is the first line.
This is line two.

This is line four.
This is line five.
</span><span class='heredoc_end'>EOT
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_each_line'>each_line</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is the first line.\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line two.\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line four.\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line five.\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With a different <code>record_separator</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_record_separator'>record_separator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is </span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_each_line'>each_line</span>(<span class='id identifier rubyid_record_separator'>record_separator</span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is </span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>the first line.\nThis is </span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line two.\n\nThis is </span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line four.\nThis is </span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line five.\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With <a href="#chomp-instance_method" title="String#chomp (method)">#chomp</a> as <code>true</code>, removes the trailing <code>record_separator</code> from each line:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_each_line'>each_line</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is the first line.</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line two.</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line four.</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line five.</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With an empty string as <code>record_separator</code>, forms and passes “paragraphs” by splitting at each occurrence of two or more newlines:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_record_separator'>record_separator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_each_line'>each_line</span>(<span class='id identifier rubyid_record_separator'>record_separator</span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is the first line.\nThis is line two.\n\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line four.\nThis is line five.\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With no block given, returns an enumerator.</p>

<p>Related: see <a href="String.html#label-Iterating" title="Iterating">Iterating</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9546-L9551'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9546' data-end='9551'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9546</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_each_line(int argc, VALUE *argv, VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, argc, argv, 0);
    return rb_str_enumerate_lines(argc, argv, str, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encode-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>encode</strong>(dst_encoding = Encoding.default_internal, **enc_opts)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>encode</strong>(dst_encoding, src_encoding, **enc_opts)  &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> transcoded as determined by <code>dst_encoding</code>; see <a href="file.encodings.html" title="Encodings">Encodings</a>.</p>

<p>By default, raises an exception if <code>self</code> contains an invalid byte or a character not defined in <code>dst_encoding</code>; that behavior may be modified by encoding options; see below.</p>

<p>With no arguments:</p>
<ul><li>
<p>Uses the same encoding if <a href="Encoding.html#default_internal-class_method" title="Encoding.default_internal (method)">Encoding.default_internal</a> is <code>nil</code> (the default):</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span>.<span class='id identifier rubyid_default_internal'><a href="Encoding.html#default_internal-class_method" title="Encoding.default_internal (method)">default_internal</a></span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby\x99</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'><a href="#force_encoding-instance_method" title="String#force_encoding (method)">force_encoding</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Windows-1252</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                <span class='comment'># =&gt; #&lt;Encoding:Windows-1252&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>                   <span class='comment'># =&gt; [82, 117, 98, 121, 153]
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>              <span class='comment'># =&gt; &quot;Ruby\x99&quot;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                <span class='comment'># =&gt; #&lt;Encoding:Windows-1252&gt;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>                   <span class='comment'># =&gt; [82, 117, 98, 121, 226, 132, 162]</span></code></pre>
</li><li>
<p>Otherwise, uses the encoding <a href="Encoding.html#default_internal-class_method" title="Encoding.default_internal (method)">Encoding.default_internal</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span>.<span class='id identifier rubyid_default_internal'><a href="Encoding.html#default_internal-class_method" title="Encoding.default_internal (method)">default_internal</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>              <span class='comment'># =&gt; &quot;Ruby™&quot;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>
</li></ul>

<p>With only argument <code>dst_encoding</code> given, uses that encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby\x99</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'><a href="#force_encoding-instance_method" title="String#force_encoding (method)">force_encoding</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Windows-1252</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>            <span class='comment'># =&gt; #&lt;Encoding:Windows-1252&gt;
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Ruby™&quot;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>            <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<p>With arguments <code>dst_encoding</code> and <code>src_encoding</code> given, interprets <code>self</code> using <code>src_encoding</code>, encodes the new string using <code>dst_encoding</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby\x99</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Windows-1252</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Ruby™&quot;
</span><span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                            <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<p>Optional keyword arguments <code>enc_opts</code> specify encoding options; see <a href="file.encodings.html#label-Encoding%2BOptions" title="{Encoding">{Encoding</a> Options}.</p>

<p>Please note that, unless <code>invalid: :replace</code> option is given, conversion from an encoding <code>enc</code> to the same encoding <code>enc</code> (independent of whether <code>enc</code> is given explicitly or implicitly) is a no-op, i.e. the string is simply copied without any changes, and no exceptions are raised, even if there are invalid bytes.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/transcode.c#L2965-L2971'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2965' data-end='2971'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'transcode.c', line 2965</span></pre>
<pre class='code cpp'>

static VALUE
str_encode(int argc, VALUE *argv, VALUE str)
{
    VALUE newstr = str;
    int encidx = str_transcode(argc, argv, &amp;newstr);
    return encoded_dup(newstr, str, encidx);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encode!-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>encode!</strong>(dst_encoding = Encoding.default_internal, **enc_opts)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>encode!</strong>(dst_encoding, src_encoding, **enc_opts)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#encode-instance_method" title="String#encode (method)">#encode</a>, but applies encoding changes to <code>self</code>; returns <code>self</code>.</p>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/transcode.c#L2934-L2952'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2934' data-end='2952'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'transcode.c', line 2934</span></pre>
<pre class='code cpp'>

static VALUE
str_encode_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE newstr;
    int encidx;

    rb_check_frozen(str);

    newstr = str;
    encidx = str_transcode(argc, argv, &amp;newstr);

    if (encidx &lt; 0) return str;
    if (newstr == str) {
        rb_enc_associate_index(str, encidx);
        return str;
    }
    rb_str_shared_replace(str, newstr);
    return str_encode_associate(str, encidx);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encoding-instance_method">
  <h3 class='signature '>
    #<strong>encoding</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="Regexp.html#encoding-instance_method" title="Regexp#encoding (method)">Regexp#encoding</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="end_with?-instance_method">
  <h3 class='signature '>
    #<strong>end_with?</strong>(*strings)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>self</code> ends with any of the given <code>strings</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>)         <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>は</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; true</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11316-L11340'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11316' data-end='11340'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11316</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_end_with(int argc, VALUE *argv, VALUE str)
{
    int i;

    for (i=0; i&lt;argc; i++) {
        VALUE tmp = argv[i];
        const char *p, *s, *e;
        long slen, tlen;
        rb_encoding *enc;

        StringValue(tmp);
        enc = rb_enc_check(str, tmp);
        if ((tlen = RSTRING_LEN(tmp)) == 0) return Qtrue;
        if ((slen = RSTRING_LEN(str)) &lt; tlen) continue;
        p = RSTRING_PTR(str);
        e = p + slen;
        s = e - tlen;
        if (!at_char_boundary(p, s, e, enc))
            continue;
        if (memcmp(s, RSTRING_PTR(tmp), tlen) == 0)
            return Qtrue;
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eql?-instance_method">
  <h3 class='signature '>
    #<strong>eql?</strong>(object)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>self</code> and <code>object</code> have the same length and content:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; false</span></code></pre>

<p>Returns <code>false</code> if the two strings’ encodings are not compatible:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>äöü</span><span class='tstring_end'>&quot;</span></span>                           <span class='comment'># =&gt; &quot;äöü&quot;
</span><span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='id identifier rubyid_s0'>s0</span>.<span class='id identifier rubyid_encode'><a href="#encode-instance_method" title="String#encode (method)">encode</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>ISO_8859_1</span>) <span class='comment'># =&gt; &quot;\xE4\xF6\xFC&quot;
</span><span class='id identifier rubyid_s0'>s0</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                          <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s1'>s1</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                          <span class='comment'># =&gt; #&lt;Encoding:ISO-8859-1&gt;
</span><span class='id identifier rubyid_s0'>s0</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='id identifier rubyid_s1'>s1</span>)                          <span class='comment'># =&gt; false</span></code></pre>

<p>See <a href="file.encodings.html" title="Encodings">Encodings</a>.</p>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4288-L4294'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4288' data-end='4294'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4288</span></pre>
<pre class='code cpp'>

VALUE
rb_str_eql(VALUE str1, VALUE str2)
{
    if (str1 == str2) return Qtrue;
    if (!RB_TYPE_P(str2, T_STRING)) return Qfalse;
    return rb_str_eql_internal(str1, str2);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="force_encoding-instance_method">
  <h3 class='signature '>
    #<strong>force_encoding</strong>(encoding)  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Changes the encoding of <code>self</code> to the given <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a>, which may be a string encoding name or an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object; does not change the underlying bytes; returns self:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>łał</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>                   <span class='comment'># =&gt; [197, 130, 97, 197, 130]
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ascii</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;\xC5\x82a\xC5\x82&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>                <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span>         <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>                   <span class='comment'># =&gt; [197, 130, 97, 197, 130]</span></code></pre>

<p>Makes the change even if the given <a href="#encoding-instance_method" title="String#encoding (method)">#encoding</a> is invalid for <code>self</code> (as is the change above):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'><a href="#valid_encoding%3F-instance_method" title="String#valid_encoding? (method)">valid_encoding?</a></span>         <span class='comment'># =&gt; false</span></code></pre>

<p>See <a href="file.encodings.html" title="Encodings">Encodings</a>.</p>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11564-L11587'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11564' data-end='11587'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11564</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_force_encoding(VALUE str, VALUE enc)
{
    str_modifiable(str);

    rb_encoding *encoding = rb_to_encoding(enc);
    int idx = rb_enc_to_index(encoding);

    // If the encoding is unchanged, we do nothing.
    if (ENCODING_GET(str) == idx) {
        return str;
    }

    rb_enc_associate_index(str, idx);

    // If the coderange was 7bit and the new encoding is ASCII-compatible
    // we can keep the coderange.
    if (ENC_CODERANGE(str) == ENC_CODERANGE_7BIT &amp;&amp; encoding &amp;&amp; rb_enc_asciicompat(encoding)) {
        return str;
    }

    ENC_CODERANGE_CLEAR(str);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="freeze-instance_method">
  <h3 class='signature nodoc'>
    #<strong>freeze</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L3278-L3288'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3278' data-end='3288'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 3278</span></pre>
<pre class='code cpp'>

VALUE
rb_str_freeze(VALUE str)
{
    if (CHILLED_STRING_P(str)) {
        FL_UNSET_RAW(str, STR_CHILLED);
    }

    if (OBJ_FROZEN(str)) return str;
    rb_str_resize(str, RSTRING_LEN(str));
    return rb_obj_freeze(str);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getbyte-instance_method">
  <h3 class='signature '>
    #<strong>getbyte</strong>(index)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the byte at zero-based <a href="#index-instance_method" title="String#index (method)">#index</a> as an integer:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>(<span class='int'>0</span>)    <span class='comment'># =&gt; 102
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>(<span class='int'>1</span>)    <span class='comment'># =&gt; 111
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>(<span class='int'>2</span>)    <span class='comment'># =&gt; 111</span></code></pre>

<p>Counts backward from the end if <a href="#index-instance_method" title="String#index (method)">#index</a> is negative:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>(<span class='op'>-</span><span class='int'>3</span>) <span class='comment'># =&gt; 102</span></code></pre>

<p>Returns <code>nil</code> if <a href="#index-instance_method" title="String#index (method)">#index</a> is out of range:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>(<span class='int'>3</span>)  <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>(<span class='op'>-</span><span class='int'>4</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>More examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>      <span class='comment'># =&gt; [227, 129, 147, 227, 130, 147, 227, 129, 171, 227, 129, 161, 227, 129, 175]
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>(<span class='int'>2</span>) <span class='comment'># =&gt; 147</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6608-L6619'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6608' data-end='6619'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6608</span></pre>
<pre class='code cpp'>

VALUE
rb_str_getbyte(VALUE str, VALUE index)
{
    long pos = NUM2LONG(index);

    if (pos &lt; 0)
        pos += RSTRING_LEN(str);
    if (pos &lt; 0 ||  RSTRING_LEN(str) &lt;= pos)
        return Qnil;

    return INT2FIX((unsigned char)RSTRING_PTR(str)[pos]);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="grapheme_clusters-instance_method">
  <h3 class='signature '>
    #<strong>grapheme_clusters</strong>  &#x21d2; <code>array_of_grapheme_clusters</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of the grapheme clusters in <code>self</code> (see <a href="https://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries" target="_parent" title="Unicode Grapheme Cluster Boundaries">Unicode Grapheme Cluster Boundaries</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ä-pqr-b̈-xyz-c̈</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>                   <span class='comment'># =&gt; 16
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>               <span class='comment'># =&gt; 19
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_grapheme_clusters'>grapheme_clusters</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span> <span class='comment'># =&gt; 13
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_grapheme_clusters'>grapheme_clusters</span>
<span class='comment'># =&gt; [&quot;ä&quot;, &quot;-&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;-&quot;, &quot;b̈&quot;, &quot;-&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;-&quot;, &quot;c̈&quot;]</span></code></pre>

<p>Details:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ä</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_grapheme_clusters'>grapheme_clusters</span>             <span class='comment'># =&gt; [&quot;ä&quot;]           # One grapheme cluster.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'><a href="#bytes-instance_method" title="String#bytes (method)">bytes</a></span>                         <span class='comment'># =&gt; [97, 204, 136]  # Three bytes.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_chars'><a href="#chars-instance_method" title="String#chars (method)">chars</a></span>                         <span class='comment'># =&gt; [&quot;a&quot;, &quot;̈&quot;]       # Two characters.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_chars'><a href="#chars-instance_method" title="String#chars (method)">chars</a></span>.<span class='id identifier rubyid_map'>map</span> {<span class='op'>|</span><span class='id identifier rubyid_char'>char</span><span class='op'>|</span> <span class='id identifier rubyid_char'>char</span>.<span class='id identifier rubyid_ord'><a href="#ord-instance_method" title="String#ord (method)">ord</a></span> }  <span class='comment'># =&gt; [97, 776]       # Their values.</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9954-L9959'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9954' data-end='9959'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9954</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_grapheme_clusters(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;grapheme_clusters&quot;, rb_str_strlen(str));
    return rb_str_enumerate_grapheme_clusters(str, ary);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gsub-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>gsub</strong>(pattern, replacement)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>gsub</strong>(pattern) {|match| ... } &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>gsub</strong>(pattern)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with zero or more substrings replaced.</p>

<p>Argument <code>pattern</code> may be a string or a Regexp; argument <code>replacement</code> may be a string or a <a href="Hash.html" title="Hash (class)"><code>::Hash</code></a>. Varying types for the argument values makes this method very versatile.</p>

<p>Below are some simple examples; for many more examples, see <a href="String.html#label-Substitution+Methods" title="Substitution Methods">Substitution Methods</a>.</p>

<p>With arguments <code>pattern</code> and string <code>replacement</code> given, replaces each matching substring with the given <code>replacement</code> string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AB</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;ABracadABra&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-c]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;XXrXXXdXXrX&quot;</span></code></pre>

<p>With arguments <code>pattern</code> and hash <code>replacement</code> given, replaces each matching substring with a value from the given <code>replacement</code> hash, or removes it:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>B</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C</span><span class='tstring_end'>&#39;</span></span>}
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-c]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span>) <span class='comment'># =&gt; &quot;ABrACAdABrA&quot;  # &#39;a&#39;, &#39;b&#39;, &#39;c&#39; replaced.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-d]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span>) <span class='comment'># =&gt; &quot;ABrACAABrA&quot;   # &#39;d&#39; removed.</span></code></pre>

<p>With argument <code>pattern</code> and a block given, calls the block with each matching substring; replaces that substring with the block’s return value:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-d]</span><span class='regexp_end'>/</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_substring'>substring</span><span class='op'>|</span> <span class='id identifier rubyid_substring'>substring</span>.<span class='id identifier rubyid_upcase'><a href="#upcase-instance_method" title="String#upcase (method)">upcase</a></span> }
<span class='comment'># =&gt; &quot;ABrACADABrA&quot;</span></code></pre>

<p>With argument <code>pattern</code> and no block given, returns a new <a href="Enumerator.html" title="Enumerator (class)"><code>::Enumerator</code></a>.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6529-L6533'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6529' data-end='6533'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6529</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_gsub(int argc, VALUE *argv, VALUE str)
{
    return str_gsub(argc, argv, str, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gsub!-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>gsub!</strong>(pattern, replacement)  &#x21d2; <code>self</code><sup>?</sup> </span>
      <span class='overload'>#<strong>gsub!</strong>(pattern) {|match| ... } &#x21d2; <code>self</code><sup>?</sup> </span>
      <span class='overload'>#<strong>gsub!</strong>(pattern)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#gsub-instance_method" title="String#gsub (method)">#gsub</a>, except that:</p>
<ul><li>
<p>Performs substitutions in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any characters are removed, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6478-L6483'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6478' data-end='6483'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6478</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_gsub_bang(int argc, VALUE *argv, VALUE str)
{
    str_modify_keep_cr(str);
    return str_gsub(argc, argv, str, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="hash-instance_method">
  <h3 class='signature '>
    #<strong>hash</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer hash value for <code>self</code>.</p>

<p>Two String objects that have identical content and compatible encodings also have the same hash value; see <a href="Object.html#hash-instance_method" title="Object#hash (method)">Object#hash</a> and <a href="file.encodings.html" title="Encodings">Encodings</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_hash'>hash</span>       <span class='comment'># =&gt; -569050784
</span><span class='id identifier rubyid_h'>h</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hash'>hash</span>  <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_h'>h</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hash'>hash</span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_h'>h</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hash'>hash</span>  <span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>äöü</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='id identifier rubyid_s0'>s0</span>.<span class='id identifier rubyid_encode'><a href="#encode-instance_method" title="String#encode (method)">encode</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>ISO_8859_1</span>)
<span class='id identifier rubyid_s0'>s0</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>        <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s1'>s1</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="String#encoding (method)">encoding</a></span>        <span class='comment'># =&gt; #&lt;Encoding:ISO-8859-1&gt;
</span><span class='id identifier rubyid_s0'>s0</span>.<span class='id identifier rubyid_hash'>hash</span> <span class='op'>==</span> <span class='id identifier rubyid_s1'>s1</span>.<span class='id identifier rubyid_hash'>hash</span> <span class='comment'># =&gt; false</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4180-L4185'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4180' data-end='4185'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4180</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_hash_m(VALUE str)
{
    st_index_t hval = rb_str_hash(str);
    return ST2FIX(hval);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="hex-instance_method">
  <h3 class='signature '>
    #<strong>hex</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Interprets the leading substring of <code>self</code> as hexadecimal, possibly signed; returns its value as an integer.</p>

<p>The leading substring is interpreted as hexadecimal when it begins with:</p>
<ul><li>
<p>One or more character representing hexadecimal digits (each in one of the ranges <code>&#39;0&#39;..&#39;9&#39;</code>, <code>&#39;a&#39;..&#39;f&#39;</code>, or <code>&#39;A&#39;..&#39;F&#39;</code>); the string to be interpreted ends at the first character that does not represent a hexadecimal digit:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>        <span class='comment'># =&gt; 15
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>       <span class='comment'># =&gt; 17
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FFF</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>      <span class='comment'># =&gt; 4095
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fffg</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>     <span class='comment'># =&gt; 4095
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>      <span class='comment'># =&gt; 15   # &#39;f&#39; hexadecimal, &#39;oo&#39; not.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>      <span class='comment'># =&gt; 186  # &#39;ba&#39; hexadecimal, &#39;r&#39; not.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deadbeef</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span> <span class='comment'># =&gt; 3735928559</span></code></pre>
</li><li>
<p><code>&#39;0x&#39;</code> or <code>&#39;0X&#39;</code>, followed by one or more hexadecimal digits:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0xfff</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>    <span class='comment'># =&gt; 4095
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0xfffg</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>   <span class='comment'># =&gt; 4095</span></code></pre>
</li></ul>

<p>Any of the above may prefixed with <code>&#39;-&#39;</code>, which negates the interpreted value:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-fff</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>      <span class='comment'># =&gt; -4095
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-0xFFF</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>    <span class='comment'># =&gt; -4095</span></code></pre>

<p>For any substring not described above, returns zero:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xxx</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>     <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>        <span class='comment'># =&gt; 0</span></code></pre>

<p>Note that, unlike <a href="#oct-instance_method" title="String#oct (method)">#oct</a>, this method interprets only hexadecimal, and not binary, octal, or decimal notations:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0b111</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>   <span class='comment'># =&gt; 45329
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0o777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>   <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0d999</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_hex'>hex</span>   <span class='comment'># =&gt; 55705</span></code></pre>

<p>Related: See <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10747-L10751'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10747' data-end='10751'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10747</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_hex(VALUE str)
{
    return rb_str_to_inum(str, 16, FALSE);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="include?-instance_method">
  <h3 class='signature '>
    #<strong>include?</strong>(other_string)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>self</code> contains <code>other_string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ba</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ar</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6999-L7008'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6999' data-end='7008'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6999</span></pre>
<pre class='code cpp'>

VALUE
rb_str_include(VALUE str, VALUE arg)
{
    long i;

    StringValue(arg);
    i = rb_str_index(str, arg, 0);

    return RBOOL(i != -1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="index-instance_method">
  <h3 class='signature '>
    #<strong>index</strong>(pattern, offset = 0)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer position of the first substring that matches the given argument <code>pattern</code>, or <code>nil</code> if none found.</p>

<p>When <code>pattern</code> is a string, returns the index of the first matching substring in <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>)         <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)         <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>)        <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ooo</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ち</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 3</span></code></pre>

<p>When <code>pattern</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, returns the index of the first match in <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.o</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 0</span></code></pre>

<p>When <code>offset</code> is non-negative, begins the search at position <code>offset</code>; the returned index is relative to the beginning of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>)        <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>)        <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>)        <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>)        <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[r-z]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>0</span>)    <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ち</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># =&gt; 3</span></code></pre>

<p>With negative integer argument <code>offset</code>, selects the search position by counting backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>)  <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>2</span>)  <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>3</span>)  <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>4</span>)  <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o.</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>2</span>) <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.o</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>2</span>) <span class='comment'># =&gt; 1</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4554-L4596'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4554' data-end='4596'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4554</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_index_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    rb_encoding *enc = STR_ENC_GET(str);
    long pos;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        long slen = str_strlen(str, enc); /* str&#39;s enc */
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 ? (pos += slen) &lt; 0 : pos &gt; slen) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
    }
    else {
        pos = 0;
    }

    if (RB_TYPE_P(sub, T_REGEXP)) {
        pos = str_offset(RSTRING_PTR(str), RSTRING_END(str), pos,
                         enc, single_byte_optimizable(str));

        if (rb_reg_search(sub, str, pos, 0) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = rb_str_sublen(str, BEG(0));
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_index(str, sub, pos);
        if (pos &gt;= 0) {
            pos = rb_str_sublen(str, pos);
            return LONG2NUM(pos);
        }
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_copy-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>replace</strong>(other_string)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>initialize_copy</strong>(other_string)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#replace-instance_method" title="String#replace (method)">#replace</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="insert-instance_method">
  <h3 class='signature '>
    #<strong>insert</strong>(offset, other_string)  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Inserts the given <code>other_string</code> into <code>self</code>; returns <code>self</code>.</p>

<p>If the given <a href="#index-instance_method" title="String#index (method)">#index</a> is non-negative, inserts <code>other_string</code> at offset <a href="#index-instance_method" title="String#index (method)">#index</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_insert'>insert</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; &quot;barfoo&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_insert'>insert</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; &quot;fbaroo&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_insert'>insert</span>(<span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; &quot;foobar&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_insert'>insert</span>(<span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;こんbarにちは&quot;</span></code></pre>

<p>If the <a href="#index-instance_method" title="String#index (method)">#index</a> is negative, counts backward from the end of <code>self</code> and inserts <code>other_string</code> <em>after</em> the offset:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_insert'>insert</span>(<span class='op'>-</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;fobaro&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5974-L5987'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5974' data-end='5987'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5974</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_insert(VALUE str, VALUE idx, VALUE str2)
{
    long pos = NUM2LONG(idx);

    if (pos == -1) {
        return rb_str_append(str, str2);
    }
    else if (pos &lt; 0) {
        pos++;
    }
    rb_str_update(str, pos, 0, str2);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a printable version of <code>self</code>, enclosed in double-quotes.</p>

<p>Most printable characters are rendered simply as themselves:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_inspect'>inspect</span>        <span class='comment'># =&gt; &quot;\&quot;abc\&quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>012</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_inspect'>inspect</span>        <span class='comment'># =&gt; &quot;\&quot;012\&quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_inspect'>inspect</span>           <span class='comment'># =&gt; &quot;\&quot;\&quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u000012</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_inspect'>inspect</span>   <span class='comment'># =&gt; &quot;\&quot;\\u000012\&quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_inspect'>inspect</span>  <span class='comment'># =&gt; &quot;\&quot;こんにちは\&quot;&quot;</span></code></pre>

<p>But printable characters double-quote (<code>&#39;&quot;&#39;</code>) and backslash and (<code>&#39;\&#39;</code>) are escaped:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_inspect'>inspect</span>  <span class='comment'># =&gt; &quot;\&quot;\\\&quot;\&quot;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\\\\&quot;&quot;</span></code></pre>

<p>Unprintable characters are the <a href="https://en.wikipedia.org/wiki/ASCII" target="_parent" title="ASCII characters">ASCII characters</a> whose values are in range <code>0..31</code>, along with the character whose value is <code>127</code>.</p>

<p>Most of these characters are rendered thus:</p>

<pre class="code ruby"><code class="ruby"><span class='int'>0</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\x00\&quot;&quot;
</span><span class='int'>1</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\x01\&quot;&quot;
</span><span class='int'>2</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\x02\&quot;&quot;
</span><span class='comment'># ...</span></code></pre>

<p>A few, however, have special renderings:</p>

<pre class="code ruby"><code class="ruby"><span class='int'>7</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span>  <span class='comment'># =&gt; &quot;\&quot;\\a\&quot;&quot;  # BEL
</span><span class='int'>8</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span>  <span class='comment'># =&gt; &quot;\&quot;\\b\&quot;&quot;  # BS
</span><span class='int'>9</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span>  <span class='comment'># =&gt; &quot;\&quot;\\t\&quot;&quot;  # TAB
</span><span class='int'>10</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\n\&quot;&quot;  # LF
</span><span class='int'>11</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\v\&quot;&quot;  # VT
</span><span class='int'>12</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\f\&quot;&quot;  # FF
</span><span class='int'>13</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\r\&quot;&quot;  # CR
</span><span class='int'>27</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;\&quot;\\e\&quot;&quot;  # ESC</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7228-L7323'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7228' data-end='7323'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7228</span></pre>
<pre class='code cpp'>

VALUE
rb_str_inspect(VALUE str)
{
    int encidx = ENCODING_GET(str);
    rb_encoding *enc = rb_enc_from_index(encidx);
    const char *p, *pend, *prev;
    char buf[CHAR_ESC_LEN + 1];
    VALUE result = rb_str_buf_new(0);
    rb_encoding *resenc = rb_default_internal_encoding();
    int unicode_p = rb_enc_unicode_p(enc);
    int asciicompat = rb_enc_asciicompat(enc);

    if (resenc == NULL) resenc = rb_default_external_encoding();
    if (!rb_enc_asciicompat(resenc)) resenc = rb_usascii_encoding();
    rb_enc_associate(result, resenc);
    str_buf_cat2(result, &quot;\&quot;&quot;);

    p = RSTRING_PTR(str); pend = RSTRING_END(str);
    prev = p;
    while (p &lt; pend) {
        unsigned int c, cc;
        int n;

        n = rb_enc_precise_mbclen(p, pend, enc);
        if (!MBCLEN_CHARFOUND_P(n)) {
            if (p &gt; prev) str_buf_cat(result, prev, p - prev);
            n = rb_enc_mbminlen(enc);
            if (pend &lt; p + n)
                n = (int)(pend - p);
            while (n--) {
                snprintf(buf, CHAR_ESC_LEN, &quot;\\x%02X&quot;, *p &amp; 0377);
                str_buf_cat(result, buf, strlen(buf));
                prev = ++p;
            }
            continue;
        }
        n = MBCLEN_CHARFOUND_LEN(n);
        c = rb_enc_mbc_to_codepoint(p, pend, enc);
        p += n;
        if ((asciicompat || unicode_p) &amp;&amp;
          (c == &#39;&quot;&#39;|| c == &#39;\\&#39; ||
            (c == &#39;#&#39; &amp;&amp;
             p &lt; pend &amp;&amp;
             MBCLEN_CHARFOUND_P(rb_enc_precise_mbclen(p,pend,enc)) &amp;&amp;
             (cc = rb_enc_codepoint(p,pend,enc),
              (cc == &#39;$&#39; || cc == &#39;@&#39; || cc == &#39;{&#39;))))) {
            if (p - n &gt; prev) str_buf_cat(result, prev, p - n - prev);
            str_buf_cat2(result, &quot;\\&quot;);
            if (asciicompat || enc == resenc) {
                prev = p - n;
                continue;
            }
        }
        switch (c) {
          case &#39;\n&#39;: cc = &#39;n&#39;; break;
          case &#39;\r&#39;: cc = &#39;r&#39;; break;
          case &#39;\t&#39;: cc = &#39;t&#39;; break;
          case &#39;\f&#39;: cc = &#39;f&#39;; break;
          case &#39;\013&#39;: cc = &#39;v&#39;; break;
          case &#39;\010&#39;: cc = &#39;b&#39;; break;
          case &#39;\007&#39;: cc = &#39;a&#39;; break;
          case 033: cc = &#39;e&#39;; break;
          default: cc = 0; break;
        }
        if (cc) {
            if (p - n &gt; prev) str_buf_cat(result, prev, p - n - prev);
            buf[0] = &#39;\\&#39;;
            buf[1] = (char)cc;
            str_buf_cat(result, buf, 2);
            prev = p;
            continue;
        }
        /* The special casing of 0x85 (NEXT_LINE) here is because
         * Oniguruma historically treats it as printable, but it
         * doesn&#39;t match the print POSIX bracket class or character
         * property in regexps.
         *
         * See Ruby Bug #16842 for details:
         * https://bugs.ruby-lang.org/issues/16842
         */
        if ((enc == resenc &amp;&amp; rb_enc_isprint(c, enc) &amp;&amp; c != 0x85) ||
            (asciicompat &amp;&amp; rb_enc_isascii(c, enc) &amp;&amp; ISPRINT(c))) {
            continue;
        }
        else {
            if (p - n &gt; prev) str_buf_cat(result, prev, p - n - prev);
            rb_str_buf_cat_escaped_char(result, c, unicode_p);
            prev = p;
            continue;
        }
    }
    if (p &gt; prev) str_buf_cat(result, prev, p - prev);
    str_buf_cat2(result, &quot;\&quot;&quot;);

    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="intern-instance_method">
  <h3 class='signature '>
    #<strong>intern</strong>  &#x21d2; <a href="Symbol.html" title="Symbol (class)">Symbol</a>     <span class='aliases'>Also known as: <span class='names'>#to_sym</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="Symbol.html" title="Symbol (class)"><code>::Symbol</code></a> object derived from <code>self</code>, creating it if it did not already exist:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_intern'>intern</span>       <span class='comment'># =&gt; :foo
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_intern'>intern</span> <span class='comment'># =&gt; :こんにちは</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/symbol.c#L976-L980'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='976' data-end='980'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'symbol.c', line 976</span></pre>
<pre class='code cpp'>

VALUE
rb_str_intern(VALUE str)
{
    return sym_find_or_insert_dynamic_symbol(&amp;ruby_global_symbols, str);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="length-instance_method">
  <h3 class='signature '>
    #<strong>length</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>     <span class='aliases'>Also known as: <span class='names'>#size</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the count of characters (not bytes) in <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_length'>length</span>        <span class='comment'># =&gt; 3
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_length'>length</span>  <span class='comment'># =&gt; 5</span></code></pre>

<p>Contrast with <a href="#bytesize-instance_method" title="String#bytesize (method)">#bytesize</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>        <span class='comment'># =&gt; 3
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_bytesize'><a href="#bytesize-instance_method" title="String#bytesize (method)">bytesize</a></span>  <span class='comment'># =&gt; 15</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L2437-L2441'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2437' data-end='2441'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 2437</span></pre>
<pre class='code cpp'>

VALUE
rb_str_length(VALUE str)
{
    return LONG2NUM(str_strlen(str, NULL));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lines-instance_method">
  <h3 class='signature '>
    #<strong>lines</strong>(record_separator = $/, chomp: false)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns substrings (“lines”) of <code>self</code> according to the given arguments:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;~EOT</span>
<span class='tstring_content'>This is the first line.
This is line two.

This is line four.
This is line five.
</span><span class='heredoc_end'>EOT</span></code></pre>

<p>With the default argument values:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$/</span> <span class='comment'># =&gt; &quot;\n&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_lines'>lines</span>
<span class='comment'># =&gt;
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is the first line.\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line two.\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line four.\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line five.\n</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>With a different <code>record_separator</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_record_separator'>record_separator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is </span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_lines'>lines</span>(<span class='id identifier rubyid_record_separator'>record_separator</span>)
<span class='comment'># =&gt;
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>the first line.\nThis is </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line two.\n\nThis is </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line four.\nThis is </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line five.\n</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>With keyword argument <a href="#chomp-instance_method" title="String#chomp (method)">#chomp</a> as <code>true</code>, removes the trailing newline from each line:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_lines'>lines</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>)
<span class='comment'># =&gt;
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is the first line.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line two.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line four.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line five.</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9604-L9609'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9604' data-end='9609'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9604</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_lines(int argc, VALUE *argv, VALUE str)
{
    VALUE ary = WANTARRAY(&quot;lines&quot;, 0);
    return rb_str_enumerate_lines(argc, argv, str, ary);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ljust-instance_method">
  <h3 class='signature '>
    #<strong>ljust</strong>(width, pad_string = &#39; &#39;)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code>, left-justified and, if necessary, right-padded with the <code>pad_string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>10</span>)       <span class='comment'># =&gt; &quot;hello     &quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>10</span>)     <span class='comment'># =&gt; &quot;  hello   &quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>10</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;helloababa&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>10</span>)   <span class='comment'># =&gt; &quot;こんにちは     &quot;</span></code></pre>

<p>If <code>width &lt;= self.length</code>, returns a copy of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>5</span>)  <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>1</span>)  <span class='comment'># =&gt; &quot;hello&quot;  # Does not truncate to width.</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11156-L11160'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11156' data-end='11160'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11156</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_ljust(int argc, VALUE *argv, VALUE str)
{
    return rb_str_justify(argc, argv, str, &#39;l&#39;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lstrip-instance_method">
  <h3 class='signature '>
    #<strong>lstrip</strong>(*selectors)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with leading whitespace removed; see <a href="String.html#label-Whitespace+in+Strings" title="Whitespace in Strings">Whitespace in Strings</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_whitespace'>whitespace</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x00\t\n\v\f\r </span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_whitespace'>whitespace</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_whitespace'>whitespace</span>
<span class='comment'># =&gt; &quot;\u0000\t\n\v\f\r abc\u0000\t\n\v\f\r &quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_lstrip'>lstrip</span>
<span class='comment'># =&gt; &quot;abc\u0000\t\n\v\f\r &quot;</span></code></pre>

<p>If <code>selectors</code> are given, removes characters of <code>selectors</code> from the beginning of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---abc+++</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_lstrip'>lstrip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;abc+++&quot;</span></code></pre>

<p><code>selectors</code> must be valid character selectors (see <a href="file.character_selectors.html" title="Character Selectors">Character Selectors</a>), and may use any of its valid forms, including negation, ranges, and escapes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>01234abc56789</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_lstrip'>lstrip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0-9</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># &quot;abc56789&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>01234abc56789</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_lstrip'>lstrip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0-9</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^4-6</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># &quot;4abc56789&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10331-L10350'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10331' data-end='10350'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10331</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_lstrip(int argc, VALUE *argv, VALUE str)
{
    char *start;
    long len, loffset;

    RSTRING_GETMEM(str, start, len);
    if (argc &gt; 0) {
        char table[TR_TABLE_SIZE];
        VALUE del = 0, nodel = 0;

        tr_setup_table_multi(table, &amp;del, &amp;nodel, str, argc, argv);
        loffset = lstrip_offset_table(str, start, start+len, STR_ENC_GET(str), table, del, nodel);
    }
    else {
        loffset = lstrip_offset(str, start, start+len, STR_ENC_GET(str));
    }
    if (loffset &lt;= 0) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, loffset, len - loffset);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lstrip!-instance_method">
  <h3 class='signature '>
    #<strong>lstrip!</strong>(*selectors)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#lstrip-instance_method" title="String#lstrip (method)">#lstrip</a>, except that:</p>
<ul><li>
<p>Performs stripping in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any characters are stripped, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10271-L10301'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10271' data-end='10301'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10271</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_lstrip_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    char *start, *s;
    long olen, loffset;

    str_modify_keep_cr(str);
    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);
    if (argc &gt; 0) {
        char table[TR_TABLE_SIZE];
        VALUE del = 0, nodel = 0;

        tr_setup_table_multi(table, &amp;del, &amp;nodel, str, argc, argv);
        loffset = lstrip_offset_table(str, start, start+olen, enc, table, del, nodel);
    }
    else {
        loffset = lstrip_offset(str, start, start+olen, enc);
    }

    if (loffset &gt; 0) {
        long len = olen-loffset;
        s = start + loffset;
        memmove(start, s, len);
        STR_SET_LEN(str, len);
        TERM_FILL(start+len, rb_enc_mbminlen(enc));
        return str;
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>match</strong>(pattern, offset = 0)  &#x21d2; <a href="MatchData.html" title="MatchData (class)">MatchData</a><sup>?</sup> </span>
      <span class='overload'>#<strong>match</strong>(pattern, offset = 0) {|matchdata| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object based on <code>self</code> and the given arguments; updates <a href="Regexp.html#label-Global+Variables" title="{Regexp">{Regexp</a> Global Variables}.</p>
<ul><li>
<p>Computes <code>regexp</code> by converting <code>pattern</code> (if not already a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_regexp'>regexp</span> <span class='op'>=</span> <span class='const'><a href="Regexp.html" title="Regexp (class)">Regexp</a></span>.<span class='id identifier rubyid_new'><a href="Regexp.html#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='id identifier rubyid_pattern'>pattern</span>)</code></pre>
</li><li>
<p>Computes <code>matchdata</code>, which will be either a <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object or <code>nil</code> (see Regexp#match):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_matchdata'>matchdata</span> <span class='op'>=</span> <span class='id identifier rubyid_regexp'>regexp</span>.<span class='id identifier rubyid_match'>match</span>(<span class='kw'>self</span>[<span class='id identifier rubyid_offset'>offset</span><span class='op'>..</span>])</code></pre>
</li></ul>

<p>With no block given, returns the computed <code>matchdata</code> or <code>nil</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;o&quot;&gt;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; #&lt;MatchData &quot;o&quot;&gt;</span></code></pre>

<p>With a block given and computed <code>matchdata</code> non-nil, calls the block with <code>matchdata</code>; returns the block’s return value:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_matchdata'>matchdata</span><span class='op'>|</span> <span class='id identifier rubyid_matchdata'>matchdata</span> } <span class='comment'># =&gt; #&lt;MatchData &quot;o&quot;&gt;</span></code></pre>

<p>With a block given and <code>nil</code> <code>matchdata</code>, does not call the block:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>x</span><span class='regexp_end'>/</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_matchdata'>matchdata</span><span class='op'>|</span> <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot happen</span><span class='tstring_end'>&#39;</span></span> } <span class='comment'># =&gt; nil</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5102-L5115'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5102' data-end='5115'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5102</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_match_m(int argc, VALUE *argv, VALUE str)
{
    VALUE re, result;
    if (argc &lt; 1)
        rb_check_arity(argc, 1, 2);
    re = argv[0];
    argv[0] = str;
    result = rb_funcallv(get_pat(re), rb_intern(&quot;match&quot;), argc, argv);
    if (!NIL_P(result) &amp;&amp; rb_block_given_p()) {
        return rb_yield(result);
    }
    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match?-instance_method">
  <h3 class='signature '>
    #<strong>match?</strong>(pattern, offset = 0)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether a match is found for <code>self</code> and the given arguments; does not update <a href="Regexp.html#label-Global+Variables" title="{Regexp">{Regexp</a> Global Variables}.</p>

<p>Computes <code>regexp</code> by converting <code>pattern</code> (if not already a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_regexp'>regexp</span> <span class='op'>=</span> <span class='const'><a href="Regexp.html" title="Regexp (class)">Regexp</a></span>.<span class='id identifier rubyid_new'><a href="Regexp.html#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='id identifier rubyid_pattern'>pattern</span>)</code></pre>

<p>Returns <code>true</code> if <code>self[offset..].match(regexp)</code> returns a <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object, <code>false</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>x</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; true</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5140-L5147'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5140' data-end='5147'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5140</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_match_m_p(int argc, VALUE *argv, VALUE str)
{
    VALUE re;
    rb_check_arity(argc, 1, 2);
    re = get_pat(argv[0]);
    return rb_reg_match_p(re, str, argc &gt; 1 ? NUM2LONG(argv[1]) : 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="next-instance_method">
  <h3 class='signature '>
    #<strong>next</strong>  &#x21d2; <code>String</code>     <span class='aliases'>Also known as: <span class='names'>#succ</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the successor to <code>self</code>. The successor is calculated by incrementing characters.</p>

<p>The first character to be incremented is the rightmost alphanumeric: or, if no alphanumerics, the rightmost character:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>THX1138</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span>   <span class='comment'># =&gt; &quot;THX1139&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;&lt;koala&gt;&gt;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;&lt;&lt;koalb&gt;&gt;&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>***</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span>       <span class='comment'># =&gt; &#39;**+&#39;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span>  <span class='comment'># =&gt; &quot;こんにちば&quot;</span></code></pre>

<p>The successor to a digit is another digit, “carrying” to the next-left character for a “rollover” from 9 to 0, and prepending another digit if necessary:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>00</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;01&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;10&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>99</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;100&quot;</span></code></pre>

<p>The successor to a letter is another letter of the same case, carrying to the next-left character for a rollover, and prepending another same-case letter if necessary:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aa</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;ab&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>az</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;ba&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>zz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;aaa&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AA</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;AB&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AZ</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;BA&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ZZ</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;AAA&quot;</span></code></pre>

<p>The successor to a non-alphanumeric character is the next character in the underlying character set’s collating sequence, carrying to the next-left character for a rollover, and prepending another character if necessary:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='int'>0</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span> <span class='op'>*</span> <span class='int'>3</span>   <span class='comment'># =&gt; &quot;\x00\x00\x00&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span>        <span class='comment'># =&gt; &quot;\x00\x00\x01&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='int'>255</span>.<span class='id identifier rubyid_chr'><a href="#chr-instance_method" title="String#chr (method)">chr</a></span> <span class='op'>*</span> <span class='int'>3</span> <span class='comment'># =&gt; &quot;\xFF\xFF\xFF&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span>        <span class='comment'># =&gt; &quot;\x01\x00\x00\x00&quot;</span></code></pre>

<p>Carrying can occur between and among mixtures of alphanumeric characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>zz99zz99</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;zz99zz99&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span>         <span class='comment'># =&gt; &quot;aaa00aa00&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>99zz99zz</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;99zz99zz&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span>         <span class='comment'># =&gt; &quot;100aa00aa&quot;</span></code></pre>

<p>The successor to an empty <code>String</code> is a new empty <code>String</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_succ'><a href="#succ-instance_method" title="String#succ (method)">succ</a></span> <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5342-L5349'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5342' data-end='5349'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5342</span></pre>
<pre class='code cpp'>

VALUE
rb_str_succ(VALUE orig)
{
    VALUE str;
    str = rb_str_new(RSTRING_PTR(orig), RSTRING_LEN(orig));
    rb_enc_cr_str_copy_for_substr(str, orig);
    return str_succ(str);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="next!-instance_method">
  <h3 class='signature '>
    #<strong>next!</strong>  &#x21d2; <code>self</code>     <span class='aliases'>Also known as: <span class='names'>#succ!</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#succ-instance_method" title="String#succ (method)">#succ</a>, but modifies <code>self</code> in place; returns <code>self</code>.</p>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5448-L5454'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5448' data-end='5454'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5448</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_succ_bang(VALUE str)
{
    rb_str_modify(str);
    str_succ(str);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="oct-instance_method">
  <h3 class='signature '>
    #<strong>oct</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Interprets the leading substring of <code>self</code> as octal, binary, decimal, or hexadecimal, possibly signed; returns their value as an integer.</p>

<p>In brief:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Interpreted as octal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>   <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>777x</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0o777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; -511
</span><span class='comment'># Not interpreted as octal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0b111</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 7     # Interpreted as binary.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0d999</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 999   # Interpreted as decimal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0xfff</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 4095  # Interpreted as hexadecimal.</span></code></pre>

<p>The leading substring is interpreted as octal when it begins with:</p>
<ul><li>
<p>One or more character  representing octal digits (each in the range <code>&#39;0&#39;..&#39;7&#39;</code>); the string to be interpreted ends at the first character that does not represent an octal digit:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>      <span class='ivar'>@</span> <span class='op'>=&gt;</span> <span class='int'>7</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>     <span class='comment'># =&gt; 9
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>    <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>   <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7778</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>   <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>777x</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>   <span class='comment'># =&gt; 511</span></code></pre>
</li><li>
<p><code>&#39;0o&#39;</code>, followed by one or more octal digits:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0o777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; 511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0o7778</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 511</span></code></pre>
</li></ul>

<p>The leading substring is <em>not</em> interpreted as octal when it begins with:</p>
<ul><li>
<p><code>&#39;0b&#39;</code>, followed by one or more characters representing binary digits (each in the range <code>&#39;0&#39;..&#39;1&#39;</code>); the string to be interpreted ends at the first character that does not represent a binary digit. the string is interpreted as binary digits (base 2):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0b111</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; 7
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0b1112</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 7</span></code></pre>
</li><li>
<p><code>&#39;0d&#39;</code>, followed by one or more characters representing decimal digits (each in the range <code>&#39;0&#39;..&#39;9&#39;</code>); the string to be interpreted ends at the first character that does not represent a decimal digit. the string is interpreted as decimal digits (base 10):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0d999</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; 999
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0d999x</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 999</span></code></pre>
</li><li>
<p><code>&#39;0x&#39;</code>, followed by one or more characters representing hexadecimal digits (each in one of the ranges <code>&#39;0&#39;..&#39;9&#39;</code>, <code>&#39;a&#39;..&#39;f&#39;</code>, or <code>&#39;A&#39;..&#39;F&#39;</code>); the string to be interpreted ends at the first character that does not represent a hexadecimal digit. the string is interpreted as hexadecimal digits (base 16):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0xfff</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; 4095
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0xfffg</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; 4095</span></code></pre>
</li></ul>

<p>Any of the above may prefixed with <code>&#39;-&#39;</code>, which negates the interpreted value:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>   <span class='comment'># =&gt; -511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-0777</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>  <span class='comment'># =&gt; -511
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-0b111</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; -7
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-0xfff</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span> <span class='comment'># =&gt; -4095</span></code></pre>

<p>For any substring not described above, returns zero:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>      <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_oct'>oct</span>         <span class='comment'># =&gt; 0</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10833-L10837'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10833' data-end='10837'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10833</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_oct(VALUE str)
{
    return rb_str_to_inum(str, -8, FALSE);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ord-instance_method">
  <h3 class='signature '>
    #<strong>ord</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer ordinal of the first character of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>h</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ord'>ord</span>         <span class='comment'># =&gt; 104
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ord'>ord</span>     <span class='comment'># =&gt; 104
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ord'>ord</span>  <span class='comment'># =&gt; 12371</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10986-L10993'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10986' data-end='10993'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10986</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_ord(VALUE s)
{
    unsigned int c;

    c = rb_enc_codepoint(RSTRING_PTR(s), RSTRING_END(s), STR_ENC_GET(s));
    return UINT2NUM(c);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="partition-instance_method">
  <h3 class='signature '>
    #<strong>partition</strong>(pattern)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a>, ...   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a 3-element array of substrings of <code>self</code>.</p>

<p>If <code>pattern</code> is matched, returns the array:</p>

<pre class="code ruby"><code class="ruby">[<span class='id identifier rubyid_pre_match'>pre_match</span><span class='comma'>,</span> <span class='id identifier rubyid_first_match'>first_match</span><span class='comma'>,</span> <span class='id identifier rubyid_post_match'>post_match</span>]</code></pre>

<p>where:</p>
<ul><li>
<p><code>first_match</code> is the first-found matching substring.</p>
</li><li>
<p><code>pre_match</code> and <code>post_match</code> are the preceding and following substrings.</p>
</li></ul>

<p>If <code>pattern</code> is not matched, returns the array:</p>

<pre class="code ruby"><code class="ruby">[<span class='kw'>self</span>.<span class='id identifier rubyid_dup'><a href="#dup-instance_method" title="String#dup (method)">dup</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Note that in the examples below, a returned string <code>&#39;hello&#39;</code> is a copy of <code>self</code>, not <code>self</code>.</p>

<p>If <code>pattern</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, performs the equivalent of <code>self.match(pattern)</code> (also setting <a href="file.globals.html#label-Matched%2BData" title="matched-data variables">matched-data variables</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>h</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; [&quot;&quot;, &quot;h&quot;, &quot;ello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>l</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; [&quot;he&quot;, &quot;l&quot;, &quot;lo&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>l+</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; [&quot;he&quot;, &quot;ll&quot;, &quot;o&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; [&quot;hell&quot;, &quot;o&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; [&quot;&quot;, &quot;&quot;, &quot;hello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; [&quot;&quot;, &quot;&quot;, &quot;hello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>$</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; [&quot;hello&quot;, &quot;&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>x</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; [&quot;hello&quot;, &quot;&quot;, &quot;&quot;]</span></code></pre>

<p>If <code>pattern</code> is not a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, converts it to a string (if it is not already one), then performs the equivalent of <code>self.index(pattern)</code> (and does <em>not</em> set <a href="file.globals.html#label-Matched%2BData" title="matched-data global variables">matched-data global variables</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>h</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; [&quot;&quot;, &quot;h&quot;, &quot;ello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; [&quot;he&quot;, &quot;l&quot;, &quot;lo&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ll</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; [&quot;he&quot;, &quot;ll&quot;, &quot;o&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; [&quot;hell&quot;, &quot;o&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; [&quot;&quot;, &quot;&quot;, &quot;hello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; [&quot;hello&quot;, &quot;&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_partition'>partition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>に</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; [&quot;こん&quot;, &quot;に&quot;, &quot;ちは&quot;]</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11199-L11226'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11199' data-end='11226'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11199</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_partition(VALUE str, VALUE sep)
{
    long pos;

    sep = get_pat_quoted(sep, 0);
    if (RB_TYPE_P(sep, T_REGEXP)) {
        if (rb_reg_search(sep, str, 0, 0) &lt; 0) {
            goto failed;
        }
        VALUE match = rb_backref_get();
        struct re_registers *regs = RMATCH_REGS(match);

        pos = BEG(0);
        sep = rb_str_subseq(str, pos, END(0) - pos);
    }
    else {
        pos = rb_str_index(str, sep, 0);
        if (pos &lt; 0) goto failed;
    }
    return rb_ary_new3(3, rb_str_subseq(str, 0, pos),
                          sep,
                          rb_str_subseq(str, pos+RSTRING_LEN(sep),
                                             RSTRING_LEN(str)-pos-RSTRING_LEN(sep)));

  failed:
    return rb_ary_new3(3, str_duplicate(rb_cString, str), str_new_empty_String(str), str_new_empty_String(str));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prepend-instance_method">
  <h3 class='signature '>
    #<strong>prepend</strong>(*other_strings)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Prefixes to <code>self</code> the concatenation of the given <code>other_strings</code>; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_prepend'>prepend</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;foobarbaz&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4125-L4144'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4125' data-end='4144'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4125</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_prepend_multi(int argc, VALUE *argv, VALUE str)
{
    str_modifiable(str);

    if (argc == 1) {
        rb_str_update(str, 0L, 0L, argv[0]);
    }
    else if (argc &gt; 1) {
        int i;
        VALUE arg_str = rb_str_tmp_new(0);
        rb_enc_copy(arg_str, str);
        for (i = 0; i &lt; argc; i++) {
            rb_str_append(arg_str, argv[i]);
        }
        rb_str_update(str, 0L, 0L, arg_str);
    }

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="replace-instance_method">
  <h3 class='signature '>
    #<strong>replace</strong>(other_string)  &#x21d2; <code>self</code>     <span class='aliases'>Also known as: <span class='names'>#initialize_copy</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Replaces the contents of <code>self</code> with the contents of <code>other_string</code>; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>        <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_replace'>replace</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;bar&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6549-L6558'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6549' data-end='6558'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6549</span></pre>
<pre class='code cpp'>

VALUE
rb_str_replace(VALUE str, VALUE str2)
{
    str_modifiable(str);
    if (str == str2) return str;

    StringValue(str2);
    str_discard(str);
    return str_replace(str, str2);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reverse-instance_method">
  <h3 class='signature '>
    #<strong>reverse</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string with the characters from <code>self</code> in reverse order.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drawer</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse'>reverse</span>       <span class='comment'># =&gt; &quot;reward&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>reviled</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse'>reverse</span>      <span class='comment'># =&gt; &quot;deliver&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stressed</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse'>reverse</span>     <span class='comment'># =&gt; &quot;desserts&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>semordnilaps</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse'>reverse</span> <span class='comment'># =&gt; &quot;spalindromes&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6890-L6938'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6890' data-end='6938'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6890</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_reverse(VALUE str)
{
    rb_encoding *enc;
    VALUE rev;
    char *s, *e, *p;
    int cr;

    if (RSTRING_LEN(str) &lt;= 1) return str_duplicate(rb_cString, str);
    enc = STR_ENC_GET(str);
    rev = rb_str_new(0, RSTRING_LEN(str));
    s = RSTRING_PTR(str); e = RSTRING_END(str);
    p = RSTRING_END(rev);
    cr = ENC_CODERANGE(str);

    if (RSTRING_LEN(str) &gt; 1) {
        if (single_byte_optimizable(str)) {
            while (s &lt; e) {
                *--p = *s++;
            }
        }
        else if (cr == ENC_CODERANGE_VALID) {
            while (s &lt; e) {
                int clen = rb_enc_fast_mbclen(s, e, enc);

                p -= clen;
                memcpy(p, s, clen);
                s += clen;
            }
        }
        else {
            cr = rb_enc_asciicompat(enc) ?
                ENC_CODERANGE_7BIT : ENC_CODERANGE_VALID;
            while (s &lt; e) {
                int clen = rb_enc_mbclen(s, e, enc);

                if (clen &gt; 1 || (*s &amp; 0x80)) cr = ENC_CODERANGE_UNKNOWN;
                p -= clen;
                memcpy(p, s, clen);
                s += clen;
            }
        }
    }
    STR_SET_LEN(rev, RSTRING_LEN(str));
    str_enc_copy_direct(rev, str);
    ENC_CODERANGE_SET(rev, cr);

    return rev;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reverse!-instance_method">
  <h3 class='signature '>
    #<strong>reverse!</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code> with its characters reversed:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drawer</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse!'>reverse!</span>       <span class='comment'># =&gt; &quot;reward&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>reviled</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse!'>reverse!</span>      <span class='comment'># =&gt; &quot;deliver&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stressed</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse!'>reverse!</span>     <span class='comment'># =&gt; &quot;desserts&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>semordnilaps</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_reverse!'>reverse!</span> <span class='comment'># =&gt; &quot;spalindromes&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6955-L6979'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6955' data-end='6979'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6955</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_reverse_bang(VALUE str)
{
    if (RSTRING_LEN(str) &gt; 1) {
        if (single_byte_optimizable(str)) {
            char *s, *e, c;

            str_modify_keep_cr(str);
            s = RSTRING_PTR(str);
            e = RSTRING_END(str) - 1;
            while (s &lt; e) {
                c = *s;
                *s++ = *e;
                *e-- = c;
            }
        }
        else {
            str_shared_replace(str, rb_str_reverse(str));
        }
    }
    else {
        str_modify_keep_cr(str);
    }
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rindex-instance_method">
  <h3 class='signature '>
    #<strong>rindex</strong>(pattern, offset = self.length)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer position of the <em>last</em> substring that matches the given argument <code>pattern</code>, or <code>nil</code> if none found.</p>

<p>When <code>pattern</code> is a string, returns the index of the last matching substring in self:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oo</span><span class='tstring_end'>&#39;</span></span>       <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ooo</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ち</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 3</span></code></pre>

<p>When <code>pattern</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, returns the index of the last match in self:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>f</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>oo</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ooo</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>When <code>offset</code> is non-negative, it specifies the maximum starting position in the string to end the search:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>) <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; 2</span></code></pre>

<p>With negative integer argument <code>offset</code>, selects the search position by counting backward from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>) <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>2</span>) <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>3</span>) <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>4</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>The last match means starting at the possible last position, not the last of longest matches:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o+</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 2
</span><span class='gvar'>$~</span>                 <span class='comment'># =&gt; #&lt;MatchData &quot;o&quot;&gt;</span></code></pre>

<p>To get the last longest match, combine with negative lookbehind:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;!o)o+</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 1
</span><span class='gvar'>$~</span>                       <span class='comment'># =&gt; #&lt;MatchData &quot;oo&quot;&gt;</span></code></pre>

<p>Or <a href="#index-instance_method" title="String#index (method)">#index</a> with negative lookforward.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_index'><a href="#index-instance_method" title="String#index (method)">index</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o+(?!.*o)</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 1
</span><span class='gvar'>$~</span>                       <span class='comment'># =&gt; #&lt;MatchData &quot;oo&quot;&gt;</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L4812-L4855'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4812' data-end='4855'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 4812</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_rindex_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    rb_encoding *enc = STR_ENC_GET(str);
    long pos, len = str_strlen(str, enc); /* str&#39;s enc */

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 &amp;&amp; (pos += len) &lt; 0) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
        if (pos &gt; len) pos = len;
    }
    else {
        pos = len;
    }

    if (RB_TYPE_P(sub, T_REGEXP)) {
        /* enc = rb_enc_check(str, sub); */
        pos = str_offset(RSTRING_PTR(str), RSTRING_END(str), pos,
                         enc, single_byte_optimizable(str));

        if (rb_reg_search(sub, str, pos, 1) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = rb_str_sublen(str, BEG(0));
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_rindex(str, sub, pos);
        if (pos &gt;= 0) {
            pos = rb_str_sublen(str, pos);
            return LONG2NUM(pos);
        }
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rjust-instance_method">
  <h3 class='signature '>
    #<strong>rjust</strong>(width, pad_string = &#39; &#39;)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a right-justified copy of <code>self</code>.</p>

<p>If integer argument <code>width</code> is greater than the size (in characters) of <code>self</code>, returns a new string of length <code>width</code> that is a copy of <code>self</code>, right justified and padded on the left with <code>pad_string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rjust'>rjust</span>(<span class='int'>10</span>)       <span class='comment'># =&gt; &quot;     hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello  </span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rjust'>rjust</span>(<span class='int'>10</span>)     <span class='comment'># =&gt; &quot;   hello  &quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rjust'>rjust</span>(<span class='int'>10</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;ababahello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rjust'>rjust</span>(<span class='int'>10</span>)    <span class='comment'># =&gt; &quot;     こんにちは&quot;</span></code></pre>

<p>If <code>width &lt;= self.size</code>, returns a copy of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rjust'>rjust</span>(<span class='int'>5</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rjust'>rjust</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;hello&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11170-L11174'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11170' data-end='11174'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11170</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_rjust(int argc, VALUE *argv, VALUE str)
{
    return rb_str_justify(argc, argv, str, &#39;r&#39;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rpartition-instance_method">
  <h3 class='signature '>
    #<strong>rpartition</strong>(pattern)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a>, ...   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a 3-element array of substrings of <code>self</code>.</p>

<p>Searches <code>self</code> for a match of <code>pattern</code>, seeking the <em>last</em> match.</p>

<p>If <code>pattern</code> is not matched, returns the array:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span>.<span class='id identifier rubyid_dup'><a href="#dup-instance_method" title="String#dup (method)">dup</a></span>]</code></pre>

<p>If <code>pattern</code> is matched, returns the array:</p>

<pre class="code ruby"><code class="ruby">[<span class='id identifier rubyid_pre_match'>pre_match</span><span class='comma'>,</span> <span class='id identifier rubyid_last_match'>last_match</span><span class='comma'>,</span> <span class='id identifier rubyid_post_match'>post_match</span>]</code></pre>

<p>where:</p>
<ul><li>
<p><code>last_match</code> is the last-found matching substring.</p>
</li><li>
<p><code>pre_match</code> and <code>post_match</code> are the preceding and following substrings.</p>
</li></ul>

<p>The pattern used is:</p>
<ul><li>
<p><code>pattern</code> itself, if it is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>.</p>
</li><li>
<p><code>Regexp.quote(pattern)</code>, if <code>pattern</code> is a string.</p>
</li></ul>

<p>Note that in the examples below, a returned string <code>&#39;hello&#39;</code> is a copy of <code>self</code>, not <code>self</code>.</p>

<p>If <code>pattern</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, searches for the last matching substring (also setting <a href="file.globals.html#label-Matched%2BData" title="matched-data global variables">matched-data global variables</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>l</span><span class='regexp_end'>/</span></span>)     <span class='comment'># =&gt; [&quot;hel&quot;, &quot;l&quot;, &quot;o&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ll</span><span class='regexp_end'>/</span></span>)    <span class='comment'># =&gt; [&quot;he&quot;, &quot;ll&quot;, &quot;o&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>h</span><span class='regexp_end'>/</span></span>)     <span class='comment'># =&gt; [&quot;&quot;, &quot;h&quot;, &quot;ello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o</span><span class='regexp_end'>/</span></span>)     <span class='comment'># =&gt; [&quot;hell&quot;, &quot;o&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='regexp_end'>/</span></span>)      <span class='comment'># =&gt; [&quot;hello&quot;, &quot;&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>x</span><span class='regexp_end'>/</span></span>)     <span class='comment'># =&gt; [&quot;&quot;, &quot;&quot;, &quot;hello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>に</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; [&quot;こん&quot;, &quot;に&quot;, &quot;ちは&quot;]</span></code></pre>

<p>If <code>pattern</code> is not a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, converts it to a string (if it is not already one), then searches for the last matching substring (and does <em>not</em> set <a href="file.globals.html#label-Matched%2BData" title="matched-data global variables">matched-data global variables</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; [&quot;hel&quot;, &quot;l&quot;, &quot;o&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ll</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; [&quot;he&quot;, &quot;ll&quot;, &quot;o&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>h</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; [&quot;&quot;, &quot;h&quot;, &quot;ello&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; [&quot;hell&quot;, &quot;o&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; [&quot;hello&quot;, &quot;&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_rpartition'>rpartition</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>に</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; [&quot;こん&quot;, &quot;に&quot;, &quot;ちは&quot;]</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11236-L11266'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11236' data-end='11266'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11236</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_rpartition(VALUE str, VALUE sep)
{
    long pos = RSTRING_LEN(str);

    sep = get_pat_quoted(sep, 0);
    if (RB_TYPE_P(sep, T_REGEXP)) {
        if (rb_reg_search(sep, str, pos, 1) &lt; 0) {
            goto failed;
        }
        VALUE match = rb_backref_get();
        struct re_registers *regs = RMATCH_REGS(match);

        pos = BEG(0);
        sep = rb_str_subseq(str, pos, END(0) - pos);
    }
    else {
        pos = rb_str_sublen(str, pos);
        pos = rb_str_rindex(str, sep, pos);
        if (pos &lt; 0) {
            goto failed;
        }
    }

    return rb_ary_new3(3, rb_str_subseq(str, 0, pos),
                          sep,
                          rb_str_subseq(str, pos+RSTRING_LEN(sep),
                                        RSTRING_LEN(str)-pos-RSTRING_LEN(sep)));
  failed:
    return rb_ary_new3(3, str_new_empty_String(str), str_new_empty_String(str), str_duplicate(rb_cString, str));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rstrip-instance_method">
  <h3 class='signature '>
    #<strong>rstrip</strong>(*selectors)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with trailing whitespace removed; see <a href="String.html#label-Whitespace+in+Strings" title="Whitespace in Strings">Whitespace in Strings</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_whitespace'>whitespace</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x00\t\n\v\f\r </span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_whitespace'>whitespace</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_whitespace'>whitespace</span>
<span class='id identifier rubyid_s'>s</span>        <span class='comment'># =&gt; &quot;\u0000\t\n\v\f\r abc\u0000\t\n\v\f\r &quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_rstrip'>rstrip</span> <span class='comment'># =&gt; &quot;\u0000\t\n\v\f\r abc&quot;</span></code></pre>

<p>If <code>selectors</code> are given, removes characters of <code>selectors</code> from the end of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---abc+++</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_rstrip'>rstrip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;---abc&quot;</span></code></pre>

<p><code>selectors</code> must be valid character selectors (see <a href="file.character_selectors.html" title="Character Selectors">Character Selectors</a>), and may use any of its valid forms, including negation, ranges, and escapes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>01234abc56789</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_rstrip'>rstrip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0-9</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># &quot;01234abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>01234abc56789</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_rstrip'>rstrip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0-9</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^4-6</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># &quot;01234abc56&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10474-L10495'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10474' data-end='10495'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10474</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_rstrip(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    char *start;
    long olen, roffset;

    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);
    if (argc &gt; 0) {
        char table[TR_TABLE_SIZE];
        VALUE del = 0, nodel = 0;

        tr_setup_table_multi(table, &amp;del, &amp;nodel, str, argc, argv);
        roffset = rstrip_offset_table(str, start, start+olen, enc, table, del, nodel);
    }
    else {
        roffset = rstrip_offset(str, start, start+olen, enc);
    }
    if (roffset &lt;= 0) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, 0, olen-roffset);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rstrip!-instance_method">
  <h3 class='signature '>
    #<strong>rstrip!</strong>(*selectors)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#rstrip-instance_method" title="String#rstrip (method)">#rstrip</a>, except that:</p>
<ul><li>
<p>Performs stripping in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any characters are stripped, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10417-L10445'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10417' data-end='10445'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10417</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_rstrip_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    char *start;
    long olen, roffset;

    str_modify_keep_cr(str);
    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);
    if (argc &gt; 0) {
        char table[TR_TABLE_SIZE];
        VALUE del = 0, nodel = 0;

        tr_setup_table_multi(table, &amp;del, &amp;nodel, str, argc, argv);
        roffset = rstrip_offset_table(str, start, start+olen, enc, table, del, nodel);
    }
    else {
        roffset = rstrip_offset(str, start, start+olen, enc);
    }
    if (roffset &gt; 0) {
        long len = olen - roffset;

        STR_SET_LEN(str, len);
        TERM_FILL(start+len, rb_enc_mbminlen(enc));
        return str;
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>scan</strong>(pattern)  &#x21d2; <code>array_of_results</code> </span>
      <span class='overload'>#<strong>scan</strong>(pattern) {|result| ... } &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Matches a pattern against <code>self</code>:</p>
<ul><li>
<p>If <code>pattern</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, the pattern used is <code>pattern</code> itself.</p>
</li><li>
<p>If <code>pattern</code> is a string, the pattern used is <code>Regexp.quote(pattern)</code>.</p>
</li></ul>

<p>Generates a collection of matching results and updates <a href="Regexp.html#label-Global+Variables" title="regexp-related global variables">regexp-related global variables</a>:</p>
<ul><li>
<p>If the pattern contains no groups, each result is a matched substring.</p>
</li><li>
<p>If the pattern contains groups, each result is an array containing a matched substring for each group.</p>
</li></ul>

<p>With no block given, returns an array of the results:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cruel world</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span>)      <span class='comment'># =&gt; [&quot;cruel&quot;, &quot;world&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cruel world</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>...</span><span class='regexp_end'>/</span></span>)      <span class='comment'># =&gt; [&quot;cru&quot;, &quot;el &quot;, &quot;wor&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cruel world</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(...)</span><span class='regexp_end'>/</span></span>)    <span class='comment'># =&gt; [[&quot;cru&quot;], [&quot;el &quot;], [&quot;wor&quot;]]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cruel world</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(..)(..)</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; [[&quot;cr&quot;, &quot;ue&quot;], [&quot;l &quot;, &quot;wo&quot;]]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>..</span><span class='regexp_end'>/</span></span>)         <span class='comment'># =&gt; [&quot;こん&quot;, &quot;にち&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; [&quot;ab&quot;, &quot;ab&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nosuch</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; []</span></code></pre>

<p>With a block given, calls the block with each result; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cruel world</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_w'>w</span> }
<span class='comment'># =&gt; &quot;cruel&quot;
</span><span class='comment'># =&gt; &quot;world&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cruel world</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.)(.)</span><span class='regexp_end'>/</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> [<span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span>] }
<span class='comment'># =&gt; [&quot;c&quot;, &quot;r&quot;]
</span><span class='comment'># =&gt; [&quot;u&quot;, &quot;e&quot;]
</span><span class='comment'># =&gt; [&quot;l&quot;, &quot; &quot;]
</span><span class='comment'># =&gt; [&quot;w&quot;, &quot;o&quot;]
</span><span class='comment'># =&gt; [&quot;r&quot;, &quot;l&quot;]</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10667-L10698'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10667' data-end='10698'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10667</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_scan(VALUE str, VALUE pat)
{
    VALUE result;
    long start = 0;
    long last = -1, prev = 0;
    char *p = RSTRING_PTR(str); long len = RSTRING_LEN(str);

    pat = get_pat_quoted(pat, 1);
    mustnot_broken(str);
    if (!rb_block_given_p()) {
        VALUE ary = rb_ary_new();

        while (!NIL_P(result = scan_once(str, pat, &amp;start, 0))) {
            last = prev;
            prev = start;
            rb_ary_push(ary, result);
        }
        if (last &gt;= 0) rb_pat_search(pat, str, last, 1);
        else rb_backref_set(Qnil);
        return ary;
    }

    while (!NIL_P(result = scan_once(str, pat, &amp;start, 1))) {
        last = prev;
        prev = start;
        rb_yield(result);
        str_mod_check(str, p, len);
    }
    if (last &gt;= 0) rb_pat_search(pat, str, last, 1);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scrub-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>scrub</strong>(replacement_string = default_replacement_string)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>scrub</strong> {|sequence| ... } &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with each invalid byte sequence replaced by the given <code>replacement_string</code>.</p>

<p>With no block given, replaces each invalid sequence with the given <code>default_replacement_string</code> (by default, <code>&quot;�&quot;</code> for a Unicode encoding, <code>&#39;?&#39;</code> otherwise):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\x81\x81bar</span><span class='tstring_end'>&quot;</span></span><span class='id identifier rubyid_scrub'>scrub</span>                             <span class='comment'># =&gt; &quot;foo��bar&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\x81\x81bar</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'><a href="#force_encoding-instance_method" title="String#force_encoding (method)">force_encoding</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_scrub'>scrub</span> <span class='comment'># =&gt; &quot;foo??bar&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\x81\x81bar</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_scrub'>scrub</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>)                   <span class='comment'># =&gt; &quot;fooxyzzyxyzzybar&quot;</span></code></pre>

<p>With a block given, calls the block with each invalid sequence, and replaces that sequence with the return value of the block:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\x81\x81bar</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_scrub'>scrub</span> {<span class='op'>|</span><span class='id identifier rubyid_sequence'>sequence</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_sequence'>sequence</span><span class='semicolon'>;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>XYZZY</span><span class='tstring_end'>&#39;</span></span> } <span class='comment'># =&gt; &quot;fooXYZZYXYZZYbar&quot;</span></code></pre>

<p>Output :</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x81</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x81</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11993-L11999'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11993' data-end='11999'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11993</span></pre>
<pre class='code cpp'>

static VALUE
str_scrub(int argc, VALUE *argv, VALUE str)
{
    VALUE repl = argc ? (rb_check_arity(argc, 0, 1), argv[0]) : Qnil;
    VALUE new = rb_str_scrub(str, repl);
    return NIL_P(new) ? str_duplicate(rb_cString, str): new;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scrub!-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>scrub!</strong>(replacement_string = default_replacement_string)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>scrub!</strong> {|sequence| ... } &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#scrub-instance_method" title="String#scrub (method)">#scrub</a>, except that:</p>
<ul><li>
<p>Any replacements are made in <code>self</code>.</p>
</li><li>
<p>Returns <code>self</code>.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L12014-L12021'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12014' data-end='12021'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 12014</span></pre>
<pre class='code cpp'>

static VALUE
str_scrub_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE repl = argc ? (rb_check_arity(argc, 0, 1), argv[0]) : Qnil;
    VALUE new = rb_str_scrub(str, repl);
    if (!NIL_P(new)) rb_str_replace(str, new);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setbyte-instance_method">
  <h3 class='signature '>
    #<strong>setbyte</strong>(index, integer)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the byte at zero-based offset <a href="#index-instance_method" title="String#index (method)">#index</a> to the value of the given <code>integer</code>; returns <code>integer</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_setbyte'>setbyte</span>(<span class='int'>2</span><span class='comma'>,</span> <span class='int'>129</span>) <span class='comment'># =&gt; 129
</span><span class='id identifier rubyid_s'>s</span>                 <span class='comment'># =&gt; &quot;xy\x81zy&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6634-L6687'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6634' data-end='6687'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6634</span></pre>
<pre class='code cpp'>

VALUE
rb_str_setbyte(VALUE str, VALUE index, VALUE value)
{
    long pos = NUM2LONG(index);
    long len = RSTRING_LEN(str);
    char *ptr, *head, *left = 0;
    rb_encoding *enc;
    int cr = ENC_CODERANGE_UNKNOWN, width, nlen;

    if (pos &lt; -len || len &lt;= pos)
        rb_raise(rb_eIndexError, &quot;index %ld out of string&quot;, pos);
    if (pos &lt; 0)
        pos += len;

    VALUE v = rb_to_int(value);
    VALUE w = rb_int_and(v, INT2FIX(0xff));
    char byte = (char)(NUM2INT(w) &amp; 0xFF);

    if (!str_independent(str))
        str_make_independent(str);
    enc = STR_ENC_GET(str);
    head = RSTRING_PTR(str);
    ptr = &amp;head[pos];
    if (!STR_EMBED_P(str)) {
        cr = ENC_CODERANGE(str);
        switch (cr) {
          case ENC_CODERANGE_7BIT:
            left = ptr;
            *ptr = byte;
            if (ISASCII(byte)) goto end;
            nlen = rb_enc_precise_mbclen(left, head+len, enc);
            if (!MBCLEN_CHARFOUND_P(nlen))
                ENC_CODERANGE_SET(str, ENC_CODERANGE_BROKEN);
            else
                ENC_CODERANGE_SET(str, ENC_CODERANGE_VALID);
            goto end;
          case ENC_CODERANGE_VALID:
            left = rb_enc_left_char_head(head, ptr, head+len, enc);
            width = rb_enc_precise_mbclen(left, head+len, enc);
            *ptr = byte;
            nlen = rb_enc_precise_mbclen(left, head+len, enc);
            if (!MBCLEN_CHARFOUND_P(nlen))
                ENC_CODERANGE_SET(str, ENC_CODERANGE_BROKEN);
            else if (MBCLEN_CHARFOUND_LEN(nlen) != width || ISASCII(byte))
                ENC_CODERANGE_CLEAR(str);
            goto end;
        }
    }
    ENC_CODERANGE_CLEAR(str);
    *ptr = byte;

  end:
    return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="size-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>length</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'>#<strong>size</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#length-instance_method" title="String#length (method)">#length</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="slice-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>[]</strong>(offset)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>[]</strong>(offset, size)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>[]</strong>(range)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>[]</strong>(substring)  &#x21d2; <code>String</code><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#[]-instance_method" title="String#[] (method)">#[]</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="slice!-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>slice!</strong>(index)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>slice!</strong>(start, length)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>slice!</strong>(range)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>slice!</strong>(regexp, capture = 0)  &#x21d2; <code>String</code><sup>?</sup> </span>
      <span class='overload'>#<strong>slice!</strong>(substring)  &#x21d2; <code>String</code><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#[]-instance_method" title="String#[] (method)">#[]</a> (and its alias <a href="#slice-instance_method" title="String#slice (method)">#slice</a>), except that:</p>
<ul><li>
<p>Performs substitutions in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns the removed substring if any modifications were made, <code>nil</code> otherwise.</p>
</li></ul>

<p>A few examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_slice!'>slice!</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;e&quot;
</span><span class='id identifier rubyid_s'>s</span>             <span class='comment'># =&gt; &quot;hllo&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_slice!'>slice!</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span>             <span class='comment'># =&gt; &quot;hllo&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6014-L6099'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6014' data-end='6099'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6014</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_slice_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE result = Qnil;
    VALUE indx;
    long beg, len = 1;
    char *p;

    rb_check_arity(argc, 1, 2);
    str_modify_keep_cr(str);
    indx = argv[0];
    if (RB_TYPE_P(indx, T_REGEXP)) {
        if (rb_reg_search(indx, str, 0, 0) &lt; 0) return Qnil;
        VALUE match = rb_backref_get();
        struct re_registers *regs = RMATCH_REGS(match);
        int nth = 0;
        if (argc &gt; 1 &amp;&amp; (nth = rb_reg_backref_number(match, argv[1])) &lt; 0) {
            if ((nth += regs-&gt;num_regs) &lt;= 0) return Qnil;
        }
        else if (nth &gt;= regs-&gt;num_regs) return Qnil;
        beg = BEG(nth);
        len = END(nth) - beg;
        goto subseq;
    }
    else if (argc == 2) {
        beg = NUM2LONG(indx);
        len = NUM2LONG(argv[1]);
        goto num_index;
    }
    else if (FIXNUM_P(indx)) {
        beg = FIX2LONG(indx);
        if (!(p = rb_str_subpos(str, beg, &amp;len))) return Qnil;
        if (!len) return Qnil;
        beg = p - RSTRING_PTR(str);
        goto subseq;
    }
    else if (RB_TYPE_P(indx, T_STRING)) {
        beg = rb_str_index(str, indx, 0);
        if (beg == -1) return Qnil;
        len = RSTRING_LEN(indx);
        result = str_duplicate(rb_cString, indx);
        goto squash;
    }
    else {
        switch (rb_range_beg_len(indx, &amp;beg, &amp;len, str_strlen(str, NULL), 0)) {
          case Qnil:
            return Qnil;
          case Qfalse:
            beg = NUM2LONG(indx);
            if (!(p = rb_str_subpos(str, beg, &amp;len))) return Qnil;
            if (!len) return Qnil;
            beg = p - RSTRING_PTR(str);
            goto subseq;
          default:
            goto num_index;
        }
    }

  num_index:
    if (!(p = rb_str_subpos(str, beg, &amp;len))) return Qnil;
    beg = p - RSTRING_PTR(str);

  subseq:
    result = rb_str_new(RSTRING_PTR(str)+beg, len);
    rb_enc_cr_str_copy_for_substr(result, str);

  squash:
    if (len &gt; 0) {
        if (beg == 0) {
            rb_str_drop_bytes(str, len);
        }
        else {
            char *sptr = RSTRING_PTR(str);
            long slen = RSTRING_LEN(str);
            if (beg + len &gt; slen) /* pathological check */
                len = slen - beg;
            memmove(sptr + beg,
                    sptr + beg + len,
                    slen - (beg + len));
            slen -= len;
            STR_SET_LEN(str, slen);
            TERM_FILL(&amp;sptr[slen], TERM_LEN(str));
        }
    }
    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="split-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>split</strong>(field_sep = $;, limit = 0)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>split</strong>(field_sep = $;, limit = 0) {|substring| ... } &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates an array of substrings by splitting <code>self</code> at each occurrence of the given field separator <code>field_sep</code>.</p>

<p>With no arguments given, splits using the field separator <code>$;</code>, whose default value is <code>nil</code>.</p>

<p>With no block given, returns the array of substrings:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; [&quot;&quot;, &quot;br&quot;, &quot;c&quot;, &quot;d&quot;, &quot;br&quot;]</span></code></pre>

<p>When <code>field_sep</code> is <code>nil</code> or <code>&#39; &#39;</code> (a single space), splits at each sequence of whitespace:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='kw'>nil</span>)          <span class='comment'># =&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo \n\tbar\t\n  baz</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo  bar   baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)                     <span class='comment'># =&gt; []</span></code></pre>

<p>When <code>field_sep</code> is an empty string, splits at every character:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;, &quot;c&quot;, &quot;a&quot;, &quot;d&quot;, &quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)            <span class='comment'># =&gt; []
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; [&quot;こ&quot;, &quot;ん&quot;, &quot;に&quot;, &quot;ち&quot;, &quot;は&quot;]</span></code></pre>

<p>When <code>field_sep</code> is a non-empty string and different from <code>&#39; &#39;</code> (a single space), uses that string as the separator:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; [&quot;&quot;, &quot;br&quot;, &quot;c&quot;, &quot;d&quot;, &quot;br&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; [&quot;&quot;, &quot;racad&quot;, &quot;ra&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>)             <span class='comment'># =&gt; []
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>に</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; [&quot;こん&quot;, &quot;ちは&quot;]</span></code></pre>

<p>When <code>field_sep</code> is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>, splits at each occurrence of a matching substring:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ab</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; [&quot;&quot;, &quot;racad&quot;, &quot;ra&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1 + 1 == 2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\W+</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; [&quot;1&quot;, &quot;1&quot;, &quot;2&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='regexp_end'>/</span></span>)   <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;, &quot;c&quot;, &quot;a&quot;, &quot;d&quot;, &quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;]</span></code></pre>

<p>If the Regexp contains groups, their matches are included in the returned array:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1:2:3</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(:)()()</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># =&gt; [&quot;1&quot;, &quot;:&quot;, &quot;&quot;, &quot;&quot;, &quot;2:3&quot;]</span></code></pre>

<p>Argument <code>limit</code> sets a limit on the size of the returned array; it also determines whether trailing empty strings are included in the returned array.</p>

<p>When <code>limit</code> is zero, there is no limit on the size of the array, but trailing empty strings are omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>)  <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;, &quot;c&quot;, &quot;a&quot;, &quot;d&quot;, &quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>) <span class='comment'># =&gt; [&quot;&quot;, &quot;br&quot;, &quot;c&quot;, &quot;d&quot;, &quot;br&quot;]  # Empty string after last &#39;a&#39; omitted.</span></code></pre>

<p>When <code>limit</code> is a positive integer, there is a limit on the size of the array (no more than <code>n - 1</code> splits occur), and trailing empty strings are included:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>)   <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;racadabra&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>)  <span class='comment'># =&gt; [&quot;&quot;, &quot;br&quot;, &quot;cadabra&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>30</span>)  <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;, &quot;c&quot;, &quot;a&quot;, &quot;d&quot;, &quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>30</span>) <span class='comment'># =&gt; [&quot;&quot;, &quot;br&quot;, &quot;c&quot;, &quot;d&quot;, &quot;br&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>)   <span class='comment'># =&gt; [&quot;abracadabra&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>)  <span class='comment'># =&gt; [&quot;abracadabra&quot;]</span></code></pre>

<p>When <code>limit</code> is negative, there is no limit on the size of the array, and trailing empty strings are omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>)  <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;, &quot;c&quot;, &quot;a&quot;, &quot;d&quot;, &quot;a&quot;, &quot;b&quot;, &quot;r&quot;, &quot;a&quot;, &quot;&quot;]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>) <span class='comment'># =&gt; [&quot;&quot;, &quot;br&quot;, &quot;c&quot;, &quot;d&quot;, &quot;br&quot;, &quot;&quot;]</span></code></pre>

<p>If a block is given, it is called with each substring and returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_substring'>substring</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_substring'>substring</span> }</code></pre>

<p>Output :</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Note that the above example is functionally equivalent to:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_substring'>substring</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_substring'>substring</span> }</code></pre>

<p>Output :</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>But the latter:</p>
<ul><li>
<p>Has poorer performance because it creates an intermediate array.</p>
</li><li>
<p>Returns an array (instead of <code>self</code>).</p>
</li></ul>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L9117-L9340'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9117' data-end='9340'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 9117</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_split_m(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    VALUE spat;
    VALUE limit;
    split_type_t split_type;
    long beg, end, i = 0, empty_count = -1;
    int lim = 0;
    VALUE result, tmp;

    result = rb_block_given_p() ? Qfalse : Qnil;
    if (rb_scan_args(argc, argv, &quot;02&quot;, &amp;spat, &amp;limit) == 2) {
        lim = NUM2INT(limit);
        if (lim &lt;= 0) limit = Qnil;
        else if (lim == 1) {
            if (RSTRING_LEN(str) == 0)
                return result ? rb_ary_new2(0) : str;
            tmp = str_duplicate(rb_cString, str);
            if (!result) {
                rb_yield(tmp);
                return str;
            }
            return rb_ary_new3(1, tmp);
        }
        i = 1;
    }
    if (NIL_P(limit) &amp;&amp; !lim) empty_count = 0;

    enc = STR_ENC_GET(str);
    split_type = SPLIT_TYPE_REGEXP;
    if (!NIL_P(spat)) {
        spat = get_pat_quoted(spat, 0);
    }
    else if (NIL_P(spat = rb_fs)) {
        split_type = SPLIT_TYPE_AWK;
    }
    else if (!(spat = rb_fs_check(spat))) {
        rb_raise(rb_eTypeError, &quot;value of $; must be String or Regexp&quot;);
    }
    else {
        rb_category_warn(RB_WARN_CATEGORY_DEPRECATED, &quot;$; is set to non-nil value&quot;);
    }
    if (split_type != SPLIT_TYPE_AWK) {
        switch (BUILTIN_TYPE(spat)) {
          case T_REGEXP:
            rb_reg_options(spat); /* check if uninitialized */
            tmp = RREGEXP_SRC(spat);
            split_type = literal_split_pattern(tmp, SPLIT_TYPE_REGEXP);
            if (split_type == SPLIT_TYPE_AWK) {
                spat = tmp;
                split_type = SPLIT_TYPE_STRING;
            }
            break;

          case T_STRING:
            mustnot_broken(spat);
            split_type = literal_split_pattern(spat, SPLIT_TYPE_STRING);
            break;

          default:
            UNREACHABLE_RETURN(Qnil);
        }
    }

#define SPLIT_STR(beg, len) ( \
        empty_count = split_string(result, str, beg, len, empty_count), \
        str_mod_check(str, str_start, str_len))

    beg = 0;
    char *ptr = RSTRING_PTR(str);
    char *const str_start = ptr;
    const long str_len = RSTRING_LEN(str);
    char *const eptr = str_start + str_len;
    if (split_type == SPLIT_TYPE_AWK) {
        char *bptr = ptr;
        int skip = 1;
        unsigned int c;

        if (result) result = rb_ary_new();
        end = beg;
        if (is_ascii_string(str)) {
            while (ptr &lt; eptr) {
                c = (unsigned char)*ptr++;
                if (skip) {
                    if (ascii_isspace(c)) {
                        beg = ptr - bptr;
                    }
                    else {
                        end = ptr - bptr;
                        skip = 0;
                        if (!NIL_P(limit) &amp;&amp; lim &lt;= i) break;
                    }
                }
                else if (ascii_isspace(c)) {
                    SPLIT_STR(beg, end-beg);
                    skip = 1;
                    beg = ptr - bptr;
                    if (!NIL_P(limit)) ++i;
                }
                else {
                    end = ptr - bptr;
                }
            }
        }
        else {
            while (ptr &lt; eptr) {
                int n;

                c = rb_enc_codepoint_len(ptr, eptr, &amp;n, enc);
                ptr += n;
                if (skip) {
                    if (rb_isspace(c)) {
                        beg = ptr - bptr;
                    }
                    else {
                        end = ptr - bptr;
                        skip = 0;
                        if (!NIL_P(limit) &amp;&amp; lim &lt;= i) break;
                    }
                }
                else if (rb_isspace(c)) {
                    SPLIT_STR(beg, end-beg);
                    skip = 1;
                    beg = ptr - bptr;
                    if (!NIL_P(limit)) ++i;
                }
                else {
                    end = ptr - bptr;
                }
            }
        }
    }
    else if (split_type == SPLIT_TYPE_STRING) {
        char *substr_start = ptr;
        char *sptr = RSTRING_PTR(spat);
        long slen = RSTRING_LEN(spat);

        if (result) result = rb_ary_new();
        mustnot_broken(str);
        enc = rb_enc_check(str, spat);
        while (ptr &lt; eptr &amp;&amp;
               (end = rb_memsearch(sptr, slen, ptr, eptr - ptr, enc)) &gt;= 0) {
            /* Check we are at the start of a char */
            char *t = rb_enc_right_char_head(ptr, ptr + end, eptr, enc);
            if (t != ptr + end) {
                ptr = t;
                continue;
            }
            SPLIT_STR(substr_start - str_start, (ptr+end) - substr_start);
            str_mod_check(spat, sptr, slen);
            ptr += end + slen;
            substr_start = ptr;
            if (!NIL_P(limit) &amp;&amp; lim &lt;= ++i) break;
        }
        beg = ptr - str_start;
    }
    else if (split_type == SPLIT_TYPE_CHARS) {
        int n;

        if (result) result = rb_ary_new_capa(RSTRING_LEN(str));
        mustnot_broken(str);
        enc = rb_enc_get(str);
        while (ptr &lt; eptr &amp;&amp;
               (n = rb_enc_precise_mbclen(ptr, eptr, enc)) &gt; 0) {
            SPLIT_STR(ptr - str_start, n);
            ptr += n;
            if (!NIL_P(limit) &amp;&amp; lim &lt;= ++i) break;
        }
        beg = ptr - str_start;
    }
    else {
        if (result) result = rb_ary_new();
        long len = RSTRING_LEN(str);
        long start = beg;
        long idx;
        int last_null = 0;
        struct re_registers *regs;
        VALUE match = 0;

        for (; rb_reg_search(spat, str, start, 0) &gt;= 0;
             (match ? (rb_match_unbusy(match), rb_backref_set(match)) : (void)0)) {
            match = rb_backref_get();
            if (!result) rb_match_busy(match);
            regs = RMATCH_REGS(match);
            end = BEG(0);
            if (start == end &amp;&amp; BEG(0) == END(0)) {
                if (!ptr) {
                    SPLIT_STR(0, 0);
                    break;
                }
                else if (last_null == 1) {
                    SPLIT_STR(beg, rb_enc_fast_mbclen(ptr+beg, eptr, enc));
                    beg = start;
                }
                else {
                    if (start == len)
                        start++;
                    else
                        start += rb_enc_fast_mbclen(ptr+start,eptr,enc);
                    last_null = 1;
                    continue;
                }
            }
            else {
                SPLIT_STR(beg, end-beg);
                beg = start = END(0);
            }
            last_null = 0;

            for (idx=1; idx &lt; regs-&gt;num_regs; idx++) {
                if (BEG(idx) == -1) continue;
                SPLIT_STR(BEG(idx), END(idx)-BEG(idx));
            }
            if (!NIL_P(limit) &amp;&amp; lim &lt;= ++i) break;
        }
        if (match) rb_match_unbusy(match);
    }
    if (RSTRING_LEN(str) &gt; 0 &amp;&amp; (!NIL_P(limit) || RSTRING_LEN(str) &gt; beg || lim &lt; 0)) {
        SPLIT_STR(beg, RSTRING_LEN(str)-beg);
    }

    return result ? result : str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="squeeze-instance_method">
  <h3 class='signature '>
    #<strong>squeeze</strong>(*selectors)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with each tuple (doubling, tripling, etc.) of specified characters “squeezed” down to a single character.</p>

<p>The tuples to be squeezed are specified by arguments <code>selectors</code>, each of which is a string; see <a href="file.character_selectors.html#label-Character%2BSelectors" title="Character Selectors">Character Selectors</a>.</p>

<p>A single argument may be a single character:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Noooooo!</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>o</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; &quot;No!&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo  bar  baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;foo bar baz&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;Misisippi&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;Mississipi&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;Mississippi&quot;  # Unused selector character is ignored.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>бессонница</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>с</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; &quot;бесонница&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>бессонница</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>н</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; &quot;бессоница&quot;</span></code></pre>

<p>A single argument may be a string of characters:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sp</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; &quot;Misisipi&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ps</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; &quot;Misisipi&quot;   # Order doesn&#39;t matter.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nonsense</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Misisippi&quot;  # Unused selector characters are ignored.</span></code></pre>

<p>A single argument may be a range of characters:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-p</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Mississipi&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>q-z</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Misisippi&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mississippi</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_squeeze'>squeeze</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-z</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Misisipi&quot;</span></code></pre>

<p>Multiple arguments are allowed; see <a href="file.character_selectors.html#label-Multiple%2BCharacter%2BSelectors" title="Multiple Character Selectors">Multiple Character Selectors</a>.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8886-L8892'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8886' data-end='8892'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8886</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_squeeze(int argc, VALUE *argv, VALUE str)
{
    str = str_duplicate(rb_cString, str);
    rb_str_squeeze_bang(argc, argv, str);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="squeeze!-instance_method">
  <h3 class='signature '>
    #<strong>squeeze!</strong>(*selectors)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#squeeze-instance_method" title="String#squeeze (method)">#squeeze</a>, except that:</p>
<ul><li>
<p>Characters are squeezed in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any changes are made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: See <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8802-L8875'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8802' data-end='8875'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8802</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_squeeze_bang(int argc, VALUE *argv, VALUE str)
{
    char squeez[TR_TABLE_SIZE];
    rb_encoding *enc = 0;
    VALUE del = 0, nodel = 0;
    unsigned char *s, *send, *t;
    int i, modify = 0;
    int ascompat, singlebyte = single_byte_optimizable(str);
    unsigned int save;

    if (argc == 0) {
        enc = STR_ENC_GET(str);
    }
    else {
        for (i=0; i&lt;argc; i++) {
            VALUE s = argv[i];

            StringValue(s);
            enc = rb_enc_check(str, s);
            if (singlebyte &amp;&amp; !single_byte_optimizable(s))
                singlebyte = 0;
            tr_setup_table(s, squeez, i==0, &amp;del, &amp;nodel, enc);
        }
    }

    str_modify_keep_cr(str);
    s = t = (unsigned char *)RSTRING_PTR(str);
    if (!s || RSTRING_LEN(str) == 0) return Qnil;
    send = (unsigned char *)RSTRING_END(str);
    save = -1;
    ascompat = rb_enc_asciicompat(enc);

    if (singlebyte) {
        while (s &lt; send) {
            unsigned int c = *s++;
            if (c != save || (argc &gt; 0 &amp;&amp; !squeez[c])) {
                *t++ = save = c;
            }
        }
    }
    else {
        while (s &lt; send) {
            unsigned int c;
            int clen;

            if (ascompat &amp;&amp; (c = *s) &lt; 0x80) {
                if (c != save || (argc &gt; 0 &amp;&amp; !squeez[c])) {
                    *t++ = save = c;
                }
                s++;
            }
            else {
                c = rb_enc_codepoint_len((char *)s, (char *)send, &amp;clen, enc);

                if (c != save || (argc &gt; 0 &amp;&amp; !tr_find(c, squeez, del, nodel))) {
                    if (t != s) rb_enc_mbcput(c, t, enc);
                    save = c;
                    t += clen;
                }
                s += clen;
            }
        }
    }

    TERM_FILL((char *)t, TERM_LEN(str));
    if ((char *)t - RSTRING_PTR(str) != RSTRING_LEN(str)) {
        STR_SET_LEN(str, (char *)t - RSTRING_PTR(str));
        modify = 1;
    }

    if (modify) return str;
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start_with?-instance_method">
  <h3 class='signature '>
    #<strong>start_with?</strong>(*patterns)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>self</code> starts with any of the given <code>patterns</code>.</p>

<p>For each argument, the pattern used is:</p>
<ul><li>
<p>The pattern itself, if it is a <a href="Regexp.html" title="Regexp (class)"><code>::Regexp</code></a>.</p>
</li><li>
<p><code>Regexp.quote(pattern)</code>, if it is a string.</p>
</li></ul>

<p>Returns <code>true</code> if any pattern matches the beginning, <code>false</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hell</span><span class='tstring_end'>&#39;</span></span>)               <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>H</span><span class='regexp_end'>/i</span></span>)                 <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heaven</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hell</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heaven</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>paradise</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こ</span><span class='tstring_end'>&#39;</span></span>)              <span class='comment'># =&gt; true</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11276-L11306'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11276' data-end='11306'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11276</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_start_with(int argc, VALUE *argv, VALUE str)
{
    int i;

    for (i=0; i&lt;argc; i++) {
        VALUE tmp = argv[i];
        if (RB_TYPE_P(tmp, T_REGEXP)) {
            if (rb_reg_start_with_p(tmp, str))
                return Qtrue;
        }
        else {
            const char *p, *s, *e;
            long slen, tlen;
            rb_encoding *enc;

            StringValue(tmp);
            enc = rb_enc_check(str, tmp);
            if ((tlen = RSTRING_LEN(tmp)) == 0) return Qtrue;
            if ((slen = RSTRING_LEN(str)) &lt; tlen) continue;
            p = RSTRING_PTR(str);
            e = p + slen;
            s = p + tlen;
            if (!at_char_right_boundary(p, s, e, enc))
                continue;
            if (memcmp(p, RSTRING_PTR(tmp), tlen) == 0)
                return Qtrue;
        }
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strip-instance_method">
  <h3 class='signature '>
    #<strong>strip</strong>(*selectors)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with leading and trailing whitespace removed; see <a href="String.html#label-Whitespace+in+Strings" title="Whitespace in Strings">Whitespace in Strings</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_whitespace'>whitespace</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x00\t\n\v\f\r </span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_whitespace'>whitespace</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_whitespace'>whitespace</span>
<span class='comment'># =&gt; &quot;\u0000\t\n\v\f\r abc\u0000\t\n\v\f\r &quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_strip'>strip</span> <span class='comment'># =&gt; &quot;abc&quot;</span></code></pre>

<p>If <code>selectors</code> are given, removes characters of <code>selectors</code> from both ends of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---abc+++</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_strip'>strip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-+</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_strip'>strip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+-</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;abc&quot;</span></code></pre>

<p><code>selectors</code> must be valid character selectors (see <a href="file.character_selectors.html" title="Character Selectors">Character Selectors</a>), and may use any of its valid forms, including negation, ranges, and escapes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>01234abc56789</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_strip'>strip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0-9</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># &quot;abc&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>01234abc56789</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_strip'>strip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0-9</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^4-6</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># &quot;4abc56&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10575-L10599'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10575' data-end='10599'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10575</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_strip(int argc, VALUE *argv, VALUE str)
{
    char *start;
    long olen, loffset, roffset;
    rb_encoding *enc = STR_ENC_GET(str);

    RSTRING_GETMEM(str, start, olen);

    if (argc &gt; 0) {
        char table[TR_TABLE_SIZE];
        VALUE del = 0, nodel = 0;

        tr_setup_table_multi(table, &amp;del, &amp;nodel, str, argc, argv);
        loffset = lstrip_offset_table(str, start, start+olen, enc, table, del, nodel);
        roffset = rstrip_offset_table(str, start+loffset, start+olen, enc, table, del, nodel);
    }
    else {
        loffset = lstrip_offset(str, start, start+olen, enc);
        roffset = rstrip_offset(str, start+loffset, start+olen, enc);
    }

    if (loffset &lt;= 0 &amp;&amp; roffset &lt;= 0) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, loffset, olen-loffset-roffset);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strip!-instance_method">
  <h3 class='signature '>
    #<strong>strip!</strong>(*selectors)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#strip-instance_method" title="String#strip (method)">#strip</a>, except that:</p>
<ul><li>
<p>Any modifications are made to <code>self</code>.</p>
</li><li>
<p>Returns <code>self</code> if any modification are made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L10510-L10545'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10510' data-end='10545'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 10510</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_strip_bang(int argc, VALUE *argv, VALUE str)
{
    char *start;
    long olen, loffset, roffset;
    rb_encoding *enc;

    str_modify_keep_cr(str);
    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);

    if (argc &gt; 0) {
        char table[TR_TABLE_SIZE];
        VALUE del = 0, nodel = 0;

        tr_setup_table_multi(table, &amp;del, &amp;nodel, str, argc, argv);
        loffset = lstrip_offset_table(str, start, start+olen, enc, table, del, nodel);
        roffset = rstrip_offset_table(str, start+loffset, start+olen, enc, table, del, nodel);
    }
    else {
        loffset = lstrip_offset(str, start, start+olen, enc);
        roffset = rstrip_offset(str, start+loffset, start+olen, enc);
    }

    if (loffset &gt; 0 || roffset &gt; 0) {
        long len = olen-roffset;
        if (loffset &gt; 0) {
            len -= loffset;
            memmove(start, start + loffset, len);
        }
        STR_SET_LEN(str, len);
        TERM_FILL(start+len, rb_enc_mbminlen(enc));
        return str;
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sub-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>sub</strong>(pattern, replacement)  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>sub</strong>(pattern) {|match| ... } &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of self, possibly with a substring replaced.</p>

<p>Argument <code>pattern</code> may be a string or a Regexp; argument <code>replacement</code> may be a string or a <a href="Hash.html" title="Hash (class)"><code>::Hash</code></a>.</p>

<p>Varying types for the argument values makes this method very versatile.</p>

<p>Below are some simple examples; for many more examples, see <a href="String.html#label-Substitution+Methods" title="Substitution Methods">Substitution Methods</a>.</p>

<p>With arguments <code>pattern</code> and string <code>replacement</code> given, replaces the first matching substring with the given replacement string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>       <span class='comment'># =&gt; &quot;abracadabra&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bra</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;axyzzycadabra&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bra</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;axyzzycadabra&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nope</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;abracadabra&quot;</span></code></pre>

<p>With arguments <code>pattern</code> and hash <code>replacement</code> given, replaces the first matching substring with a value from the given replacement hash, or removes it:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>B</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C</span><span class='tstring_end'>&#39;</span></span>}
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span>)  <span class='comment'># =&gt; &quot;aBracadabra&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>b</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span>)  <span class='comment'># =&gt; &quot;aBracadabra&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>d</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span>)  <span class='comment'># =&gt; &quot;abracaabra&quot;  # &#39;d&#39; removed.</span></code></pre>

<p>With argument <code>pattern</code> and a block given, calls the block with each matching substring; replaces that substring with the block’s return value:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_match'><a href="#match-instance_method" title="String#match (method)">match</a></span><span class='op'>|</span> <span class='id identifier rubyid_match'><a href="#match-instance_method" title="String#match (method)">match</a></span>.<span class='id identifier rubyid_upcase'><a href="#upcase-instance_method" title="String#upcase (method)">upcase</a></span> } <span class='comment'># =&gt; &quot;aBracadabra&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6312-L6318'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6312' data-end='6318'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6312</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_sub(int argc, VALUE *argv, VALUE str)
{
    str = str_duplicate(rb_cString, str);
    rb_str_sub_bang(argc, argv, str);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sub!-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>sub!</strong>(pattern, replacement)  &#x21d2; <code>self</code><sup>?</sup> </span>
      <span class='overload'>#<strong>sub!</strong>(pattern) {|match| ... } &#x21d2; <code>self</code><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#sub-instance_method" title="String#sub (method)">#sub</a>, except that:</p>
<ul><li>
<p>Changes are made to <code>self</code>, not to copy of <code>self</code>.</p>
</li><li>
<p>Returns <code>self</code> if any changes are made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L6193-L6301'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6193' data-end='6301'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 6193</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_sub_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE pat, repl, hash = Qnil;
    int iter = 0;
    long plen;
    int min_arity = rb_block_given_p() ? 1 : 2;
    long beg;

    rb_check_arity(argc, min_arity, 2);
    if (argc == 1) {
        iter = 1;
    }
    else {
        repl = argv[1];
        hash = rb_check_hash_type(argv[1]);
        if (NIL_P(hash)) {
            StringValue(repl);
        }
    }

    pat = get_pat_quoted(argv[0], 1);

    str_modifiable(str);
    beg = rb_pat_search(pat, str, 0, 1);
    if (beg &gt;= 0) {
        rb_encoding *enc;
        int cr = ENC_CODERANGE(str);
        long beg0, end0;
        VALUE match, match0 = Qnil;
        struct re_registers *regs;
        char *p, *rp;
        long len, rlen;

        match = rb_backref_get();
        regs = RMATCH_REGS(match);
        if (RB_TYPE_P(pat, T_STRING)) {
            beg0 = beg;
            end0 = beg0 + RSTRING_LEN(pat);
            match0 = pat;
        }
        else {
            beg0 = BEG(0);
            end0 = END(0);
            if (iter) match0 = rb_reg_nth_match(0, match);
        }

        if (iter || !NIL_P(hash)) {
            p = RSTRING_PTR(str); len = RSTRING_LEN(str);

            if (iter) {
                repl = rb_obj_as_string(rb_yield(match0));
            }
            else {
                repl = rb_hash_aref(hash, rb_str_subseq(str, beg0, end0 - beg0));
                repl = rb_obj_as_string(repl);
            }
            str_mod_check(str, p, len);
            rb_check_frozen(str);
        }
        else {
            repl = rb_reg_regsub(repl, str, regs, RB_TYPE_P(pat, T_STRING) ? Qnil : pat);
        }

        enc = rb_enc_compatible(str, repl);
        if (!enc) {
            rb_encoding *str_enc = STR_ENC_GET(str);
            p = RSTRING_PTR(str); len = RSTRING_LEN(str);
            if (coderange_scan(p, beg0, str_enc) != ENC_CODERANGE_7BIT ||
                coderange_scan(p+end0, len-end0, str_enc) != ENC_CODERANGE_7BIT) {
                rb_raise(rb_eEncCompatError, &quot;incompatible character encodings: %s and %s&quot;,
                         rb_enc_inspect_name(str_enc),
                         rb_enc_inspect_name(STR_ENC_GET(repl)));
            }
            enc = STR_ENC_GET(repl);
        }
        rb_str_modify(str);
        rb_enc_associate(str, enc);
        if (ENC_CODERANGE_UNKNOWN &lt; cr &amp;&amp; cr &lt; ENC_CODERANGE_BROKEN) {
            int cr2 = ENC_CODERANGE(repl);
            if (cr2 == ENC_CODERANGE_BROKEN ||
                (cr == ENC_CODERANGE_VALID &amp;&amp; cr2 == ENC_CODERANGE_7BIT))
                cr = ENC_CODERANGE_UNKNOWN;
            else
                cr = cr2;
        }
        plen = end0 - beg0;
        rlen = RSTRING_LEN(repl);
        len = RSTRING_LEN(str);
        if (rlen &gt; plen) {
            RESIZE_CAPA(str, len + rlen - plen);
        }
        p = RSTRING_PTR(str);
        if (rlen != plen) {
            memmove(p + beg0 + rlen, p + beg0 + plen, len - beg0 - plen);
        }
        rp = RSTRING_PTR(repl);
        memmove(p + beg0, rp, rlen);
        len += rlen - plen;
        STR_SET_LEN(str, len);
        TERM_FILL(&amp;RSTRING_PTR(str)[len], TERM_LEN(str));
        ENC_CODERANGE_SET(str, cr);

        RB_GC_GUARD(match);

        return str;
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="succ-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>next</strong>  &#x21d2; <code>String</code> </span>
      <span class='overload'>#<strong>succ</strong>  &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#next-instance_method" title="String#next (method)">#next</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="succ!-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>next!</strong>  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>succ!</strong>  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#next!-instance_method" title="String#next! (method)">#next!</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="sum-instance_method">
  <h3 class='signature '>
    #<strong>sum</strong>(n = 16)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a basic <code>n</code>-bit <a href="https://en.wikipedia.org/wiki/Checksum" target="_parent" title="checksum">checksum</a> of the characters in <code>self</code>; the checksum is the sum of the binary value of each byte in <code>self</code>, modulo <code>2**n - 1</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_sum'>sum</span>     <span class='comment'># =&gt; 532
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_sum'>sum</span>(<span class='int'>4</span>)  <span class='comment'># =&gt; 4
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_sum'>sum</span>(<span class='int'>64</span>) <span class='comment'># =&gt; 532
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_sum'>sum</span>  <span class='comment'># =&gt; 2582</span></code></pre>

<p>This is not a particularly strong checksum.</p>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L11002-L11053'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11002' data-end='11053'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 11002</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_sum(int argc, VALUE *argv, VALUE str)
{
    int bits = 16;
    char *ptr, *p, *pend;
    long len;
    VALUE sum = INT2FIX(0);
    unsigned long sum0 = 0;

    if (rb_check_arity(argc, 0, 1) &amp;&amp; (bits = NUM2INT(argv[0])) &lt; 0) {
        bits = 0;
    }
    ptr = p = RSTRING_PTR(str);
    len = RSTRING_LEN(str);
    pend = p + len;

    while (p &lt; pend) {
        if (FIXNUM_MAX - UCHAR_MAX &lt; sum0) {
            sum = rb_funcall(sum, &#39;+&#39;, 1, LONG2FIX(sum0));
            str_mod_check(str, ptr, len);
            sum0 = 0;
        }
        sum0 += (unsigned char)*p;
        p++;
    }

    if (bits == 0) {
        if (sum0) {
            sum = rb_funcall(sum, &#39;+&#39;, 1, LONG2FIX(sum0));
        }
    }
    else {
        if (sum == INT2FIX(0)) {
            if (bits &lt; (int)sizeof(long)*CHAR_BIT) {
                sum0 &amp;= (((unsigned long)1)&lt;&lt;bits)-1;
            }
            sum = LONG2FIX(sum0);
        }
        else {
            VALUE mod;

            if (sum0) {
                sum = rb_funcall(sum, &#39;+&#39;, 1, LONG2FIX(sum0));
            }

            mod = rb_funcall(INT2FIX(1), idLTLT, 1, INT2FIX(bits));
            mod = rb_funcall(mod, &#39;-&#39;, 1, INT2FIX(1));
            sum = rb_funcall(sum, &#39;&amp;&#39;, 1, mod);
        }
    }
    return sum;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="swapcase-instance_method">
  <h3 class='signature '>
    #<strong>swapcase</strong>(mapping = :ascii)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string containing the characters in <code>self</code>, with cases reversed:</p>
<ul><li>
<p>Each uppercase character is downcased.</p>
</li><li>
<p>Each lowercase character is upcased.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_swapcase'>swapcase</span>        <span class='comment'># =&gt; &quot;hELLO&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Straße</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_swapcase'>swapcase</span>       <span class='comment'># =&gt; &quot;sTRASSE&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RubyGems.org</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_swapcase'>swapcase</span> <span class='comment'># =&gt; &quot;rUBYgEMS.ORG&quot;</span></code></pre>

<p>The sizes of <code>self</code> and the upcased result may differ:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Straße</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>          <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_swapcase'>swapcase</span>      <span class='comment'># =&gt; &quot;sTRASSE&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_swapcase'>swapcase</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span> <span class='comment'># =&gt; 7</span></code></pre>

<p>Some characters (and some character sets) do not have upcase and downcase versions; see <a href="file.case_mapping.html" title="Case Mapping">Case Mapping</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1, 2, 3, ...</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_swapcase'>swapcase</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_swapcase'>swapcase</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true</span></code></pre>

<p>The casing is affected by the given <code>mapping</code>, which may be <code>:ascii</code>, <code>:fold</code>, or <code>:turkic</code>; see <a href="file.case_mapping.html#label-Case%2BMappings" title="Case Mappings">Case Mappings</a>.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8201-L8219'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8201' data-end='8219'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8201</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_swapcase(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_DOWNCASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return str_duplicate(rb_cString, str);
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }
    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="swapcase!-instance_method">
  <h3 class='signature '>
    #<strong>swapcase!</strong>(mapping)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#swapcase-instance_method" title="String#swapcase (method)">#swapcase</a>, except that:</p>
<ul><li>
<p>Changes are made to <code>self</code>, not to copy of <code>self</code>.</p>
</li><li>
<p>Returns <code>self</code> if any changes are made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8174-L8190'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8174' data-end='8190'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8174</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_swapcase_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_DOWNCASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_c-instance_method">
  <h3 class='signature '>
    #<strong>to_c</strong>  &#x21d2; <a href="Complex.html" title="Complex (class)">Complex</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a <a href="Complex.html" title="Complex (class)"><code>::Complex</code></a> object: parses the leading substring of <code>self</code> to extract two numeric values that become the coordinates of the complex object.</p>

<p>The substring is interpreted as containing either rectangular coordinates (real and imaginary parts) or polar coordinates (magnitude and angle parts), depending on an included or implied “separator” character:</p>
<ul><li>
<p><code>&#39;+&#39;</code>, <code>&#39;-&#39;</code>, or no separator: rectangular coordinates.</p>
</li><li>
<p><code>&#39;@&#39;</code>: polar coordinates.</p>
</li></ul>

<p><strong>In Brief</strong></p>

<p>In these examples, we use method <a href="Complex.html#rect-instance_method" title="Complex#rect (method)">Complex#rect</a> to display rectangular coordinates, and method <a href="Complex.html#polar-instance_method" title="Complex#polar (method)">Complex#polar</a> to display polar coordinates.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Rectangular coordinates.
</span>
<span class='comment'># Real-only: no separator; imaginary part is zero.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>         <span class='comment'># =&gt; [9, 0]         # Integer.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-9</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>        <span class='comment'># =&gt; [-9, 0]        # Integer (negative).
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.5</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>       <span class='comment'># =&gt; [2.5, 0]       # Float.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.23e-14</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>  <span class='comment'># =&gt; [1.23e-14, 0]  # Float with exponent.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.5/1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>     <span class='comment'># =&gt; [(5/2), 0]     # Rational.
</span>
<span class='comment'># Some things are ignored.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>      <span class='comment'># =&gt; [0, 0]         # Unparsed entire substring.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>      <span class='comment'># =&gt; [1, 0]         # Unparsed trailing substring.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> 1 </span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>       <span class='comment'># =&gt; [1, 0]         # Leading and trailing whitespace.
</span><span class='op'>*</span>
<span class='comment'># Imaginary only: trailing &#39;i&#39; required; real part is zero.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>        <span class='comment'># =&gt; [0, 9]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-9i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>       <span class='comment'># =&gt; [0, -9]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.5i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>      <span class='comment'># =&gt; [0, 2.5]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.23e-14i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span> <span class='comment'># =&gt; [0, 1.23e-14]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.5/1i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>    <span class='comment'># =&gt; [0, (5/2)]
</span>
<span class='comment'># Real and imaginary; &#39;+&#39; or &#39;-&#39; separator; trailing &#39;i&#39; required.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2+3i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>      <span class='comment'># =&gt; [2, 3]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-2-3i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>     <span class='comment'># =&gt; [-2, -3]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.5+3i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>    <span class='comment'># =&gt; [2.5, 3]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.5+3/2i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_rect'>rect</span>  <span class='comment'># =&gt; [2.5, (3/2)]
</span>
<span class='comment'># Polar coordinates; &#39;@&#39; separator; magnitude required.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.0@0</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span>             <span class='comment'># =&gt; [1.0, 0.0]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.0@</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span>              <span class='comment'># =&gt; [1.0, 0.0]
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0@</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Math.html" title="Math (module)">Math</a></span><span class='op'>::</span><span class='const'><a href="Math.html#PI-constant" title="Math::PI (constant)">PI</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span>   <span class='comment'># =&gt; [1.0, 3.141592653589793]
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0@</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Math.html" title="Math (module)">Math</a></span><span class='op'>::</span><span class='const'><a href="Math.html#PI-constant" title="Math::PI (constant)">PI</a></span><span class='op'>/</span><span class='int'>2</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span> <span class='comment'># =&gt; [1.0, 1.5707963267948966]</span></code></pre>

<p><strong>Parsed Values</strong></p>

<p>The parsing may be thought of as searching for numeric literals embedded in the substring.</p>

<p>This section shows how the method parses numeric values from leading substrings. The examples show real-only or imaginary-only parsing; the parsing is the same for each part.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span> <span class='comment'># =&gt; (1+0i)      # Ignores trailing unparsed characters.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> 1 </span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (1+0i)      # Ignores leading and trailing whitespace.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (0+0i)      # Finds no leading numeric.
</span>
<span class='comment'># Integer literal embedded in the substring.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>       <span class='comment'># =&gt; (1+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>      <span class='comment'># =&gt; (-1+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>      <span class='comment'># =&gt; (0+1i)
</span>
<span class='comment'># Integer literals that don&#39;t work.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0b100</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (0+0i)   # Not parsed as binary.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0o100</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (0+0i)   # Not parsed as octal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0d100</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (0+0i)   # Not parsed as decimal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0x100</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (0+0i)   # Not parsed as hexadecimal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>010</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>     <span class='comment'># =&gt; (10+0i)  # Not parsed as octal.
</span>
<span class='comment'># Float literals:
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.14</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>    <span class='comment'># =&gt; (3.14+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.14i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (0+3.14i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.23e4</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (12300.0+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.23e+4</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span> <span class='comment'># =&gt; (12300.0+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.23e-4</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span> <span class='comment'># =&gt; (0.000123+0i)
</span>
<span class='comment'># Rational literals:
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1/2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>     <span class='comment'># =&gt; ((1/2)+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-1/2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>    <span class='comment'># =&gt; ((-1/2)+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1/2r</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>    <span class='comment'># =&gt; ((1/2)+0i)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-1/2r</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; ((-1/2)+0i)</span></code></pre>

<p><strong>Rectangular Coordinates</strong></p>

<p>With separator <code>&#39;+&#39;</code> or <code>&#39;-&#39;</code>, or with no separator, interprets the values as rectangular coordinates: real and imaginary.</p>

<p>With no separator, assigns a single value to either the real or the imaginary part:</p>

<pre class="code ruby"><code class="ruby"> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (0+0i)  # Defaults to zero.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (1+0i)  # Real (no trailing &#39;i&#39;).
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span> <span class='comment'># =&gt; (0+1i)  # Imaginary (trailing &#39;i&#39;).
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (0+1i)  # Special case (imaginary 1).</span></code></pre>

<p>With separator <code>&#39;+&#39;</code>, both parts positive (or zero):</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Without trailing &#39;i&#39;.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>    <span class='comment'># =&gt; (0+0i)  # No values: defaults to zero.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (1+0i)  # Value after &#39;+&#39;: real only.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1+</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (1+0i)  # Value before &#39;+&#39;: real only.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2+1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (2+0i)  # Values before and after &#39;+&#39;: real and imaginary.
</span><span class='comment'># With trailing &#39;i&#39;.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+1i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (0+1i)  # Value after &#39;+&#39;: imaginary only.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2+i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (2+1i)  # Value before &#39;+&#39;: real and imaginary 1.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2+1i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span> <span class='comment'># =&gt; (2+1i)  # Values before and after &#39;+&#39;: real and imaginary.</span></code></pre>

<p>With separator <code>&#39;-&#39;</code>, negative imaginary part:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Without trailing &#39;i&#39;.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>    <span class='comment'># =&gt; (0+0i)   # No values: defaults to zero.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (-1+0i)  # Value after &#39;-&#39;: negative real, zero imaginary.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1-</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (1+0i)   # Value before &#39;-&#39;: positive real, zero imaginary.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2-1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (2+0i)   # Values before and after &#39;-&#39;: positive real, zero imaginary.
</span><span class='comment'># With trailing &#39;i&#39;.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-1i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (0-1i)   # Value after &#39;-&#39;: negative real, zero imaginary.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2-i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>  <span class='comment'># =&gt; (2-1i)   # Value before &#39;-&#39;: positive real, negative imaginary.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2-1i</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span> <span class='comment'># =&gt; (2-1i)   # Values before and after &#39;-&#39;: positive real, negative imaginary.</span></code></pre>

<p>Note that the suffixed character <code>&#39;i&#39;</code> may instead be one of <code>&#39;I&#39;</code>, <code>&#39;j&#39;</code>, or <code>&#39;J&#39;</code>, with the same effect.</p>

<p><strong>Polar Coordinates</strong></p>

<p>With separator <code>&#39;@&#39;</code>) interprets the values as polar coordinates: magnitude and angle.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2@</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span>  <span class='comment'># =&gt; [2, 0.0]    # Value before &#39;@&#39;: magnitude only.
</span> <span class='comment'># Values before and after &#39;@&#39;: magnitude and angle.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2@1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span> <span class='comment'># =&gt; [2.0, 1.0]
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0@</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Math.html" title="Math (module)">Math</a></span><span class='op'>::</span><span class='const'><a href="Math.html#PI-constant" title="Math::PI (constant)">PI</a></span><span class='op'>/</span><span class='int'>2</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span> <span class='comment'># =&gt; (0.0+1i)
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0@</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Math.html" title="Math (module)">Math</a></span><span class='op'>::</span><span class='const'><a href="Math.html#PI-constant" title="Math::PI (constant)">PI</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>   <span class='comment'># =&gt; (-1+0.0i)
</span><span class='comment'># Magnitude not given: defaults to zero.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span>   <span class='comment'># =&gt; [0, 0.0]
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@1</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>.<span class='id identifier rubyid_polar'>polar</span>  <span class='comment'># =&gt; [0, 0.0]
</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.0@0</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_c'>to_c</span>             <span class='comment'># =&gt; (1+0.0i)</span></code></pre>

<p>Note that in all cases, the suffixed character <code>&#39;i&#39;</code> may instead be one of <code>&#39;I&#39;</code>, <code>&#39;j&#39;</code>, <code>&#39;J&#39;</code>, with the same effect.</p>

<p>See <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/complex.c#L2391-L2401'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2391' data-end='2401'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'complex.c', line 2391</span></pre>
<pre class='code cpp'>

static VALUE
string_to_c(VALUE self)
{
    VALUE num;

    rb_must_asciicompat(self);

    (void)parse_comp(rb_str_fill_terminator(self, 1), FALSE, &amp;num);

    return num;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_f-instance_method">
  <h3 class='signature '>
    #<strong>to_f</strong>  &#x21d2; <a href="Float.html" title="Float (class)">Float</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the result of interpreting leading characters in <code>self</code> as a <a href="Float.html" title="Float (class)"><code>::Float</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.14159</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_f'>to_f</span>  <span class='comment'># =&gt; 3.14159
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.234e-2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_f'>to_f</span> <span class='comment'># =&gt; 0.01234</span></code></pre>

<p>Characters past a leading valid number are ignored:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.14 (pi to two places)</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_f'>to_f</span> <span class='comment'># =&gt; 3.14</span></code></pre>

<p>Returns zero if there is no leading valid number:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdef</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_f'>to_f</span> <span class='comment'># =&gt; 0.0</span></code></pre>

<p>See <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7077-L7081'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7077' data-end='7081'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7077</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_to_f(VALUE str)
{
    return DBL2NUM(rb_str_to_dbl(str, FALSE));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_i-instance_method">
  <h3 class='signature '>
    #<strong>to_i</strong>(base = 10)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the result of interpreting leading characters in <code>self</code> as an integer in the given <code>base</code>; <code>base</code> must be either <code>0</code> or in range <code>(2..36)</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123456</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>     <span class='comment'># =&gt; 123456
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123def</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>16</span>) <span class='comment'># =&gt; 1195503</span></code></pre>

<p>With <code>base</code> zero given, string <code>object</code> may contain leading characters to specify the actual base:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123def</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>0</span>)   <span class='comment'># =&gt; 123
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0123def</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>0</span>)  <span class='comment'># =&gt; 83
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0b123def</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>0</span>) <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0o123def</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>0</span>) <span class='comment'># =&gt; 83
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0d123def</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>0</span>) <span class='comment'># =&gt; 123
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0x123def</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>0</span>) <span class='comment'># =&gt; 1195503</span></code></pre>

<p>Characters past a leading valid number (in the given <code>base</code>) are ignored:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12.345</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>   <span class='comment'># =&gt; 12
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12345</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>2</span>) <span class='comment'># =&gt; 1</span></code></pre>

<p>Returns zero if there is no leading valid number:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdef</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span> <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>2</span>)   <span class='comment'># =&gt; 0</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7045-L7054'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7045' data-end='7054'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7045</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_to_i(int argc, VALUE *argv, VALUE str)
{
    int base = 10;

    if (rb_check_arity(argc, 0, 1) &amp;&amp; (base = NUM2INT(argv[0])) &lt; 0) {
        rb_raise(rb_eArgError, &quot;invalid radix %d&quot;, base);
    }
    return rb_str_to_inum(str, base, FALSE);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_r-instance_method">
  <h3 class='signature '>
    #<strong>to_r</strong>  &#x21d2; <a href="Rational.html" title="Rational (class)">Rational</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the result of interpreting leading characters in <code>self</code> as a rational value:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span>       <span class='comment'># =&gt; (123/1)   # Integer literal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>300/2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span>     <span class='comment'># =&gt; (150/1)   # Rational literal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-9.2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span>      <span class='comment'># =&gt; (-46/5)   # Float literal.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-9.2e2</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span>    <span class='comment'># =&gt; (-920/1)  # Float literal.</span></code></pre>

<p>Ignores leading and trailing whitespace, and trailing non-numeric characters:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> 2 </span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span>       <span class='comment'># =&gt; (2/1)
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>21-Jun-09</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span> <span class='comment'># =&gt; (21/1)</span></code></pre>

<p>Returns Rational zero if there are no leading numeric characters.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BWV 1079</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span>  <span class='comment'># =&gt; (0/1)</span></code></pre>

<p>NOTE: <code>&#39;0.3&#39;.to_r</code> is equivalent to <code>3/10r</code>, but is different from <code>0.3.to_r</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.3</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_to_r'>to_r</span> <span class='comment'># =&gt; (3/10)
</span><span class='int'>3</span><span class='op'>/</span><span class='rational'>10r</span>      <span class='comment'># =&gt; (3/10)
</span><span class='float'>0.3</span>.<span class='id identifier rubyid_to_r'>to_r</span>   <span class='comment'># =&gt; (5404319552844595/18014398509481984)</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/rational.c#L2523-L2535'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2523' data-end='2535'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rational.c', line 2523</span></pre>
<pre class='code cpp'>

static VALUE
string_to_r(VALUE self)
{
    VALUE num;

    rb_must_asciicompat(self);

    num = parse_rat(RSTRING_PTR(self), RSTRING_END(self), 0, TRUE);

    if (RB_FLOAT_TYPE_P(num) &amp;&amp; !FLOAT_ZERO_P(num))
        rb_raise(rb_eFloatDomainError, &quot;Infinity&quot;);
    return num;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_s-instance_method">
  <h3 class='signature '>
    #<strong>to_s</strong>  &#x21d2; <code>self</code>, <code>String</code>     <span class='aliases'>Also known as: <span class='names'>#to_str</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code> if <code>self</code> is a <code>String</code>, or <code>self</code> converted to a <code>String</code> if <code>self</code> is a subclass of <code>String</code>.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7094-L7101'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7094' data-end='7101'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7094</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_to_s(VALUE str)
{
    if (rb_obj_class(str) != rb_cString) {
        return str_duplicate(rb_cString, str);
    }
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_str-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>to_s</strong>  &#x21d2; <code>self</code>, <code>String</code> </span>
      <span class='overload'>#<strong>to_str</strong>  &#x21d2; <code>self</code>, <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#to_s-instance_method" title="String#to_s (method)">#to_s</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="to_sym-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>intern</strong>  &#x21d2; <a href="Symbol.html" title="Symbol (class)">Symbol</a> </span>
      <span class='overload'>#<strong>to_sym</strong>  &#x21d2; <a href="Symbol.html" title="Symbol (class)">Symbol</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#intern-instance_method" title="String#intern (method)">#intern</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="tr-instance_method">
  <h3 class='signature '>
    #<strong>tr</strong>(selector, replacements)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with each character specified by string <code>selector</code> translated to the corresponding character in string <code>replacements</code>. The correspondence is <em>positional</em>:</p>
<ul><li>
<p>Each occurrence of the first character specified by <code>selector</code> is translated to the first character in <code>replacements</code>.</p>
</li><li>
<p>Each occurrence of the second character specified by <code>selector</code> is translated to the second character in <code>replacements</code>.</p>
</li><li>
<p>And so on.</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>el</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'>#=&gt; &quot;hippo&quot;</span></code></pre>

<p>If <code>replacements</code> is shorter than <code>selector</code>, it is implicitly padded with its own last character:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aeiou</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;h-ll-&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aeiou</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AA-</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;hAll-&quot;</span></code></pre>

<p>Arguments <code>selector</code> and <code>replacements</code> must be valid character selectors (see <a href="file.character_selectors.html" title="Character Selectors">Character Selectors</a>), and may use any of its valid forms, including negation, ranges, and escapes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^aeiou</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; &quot;-e--o&quot;     # Negation.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ibm</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b-z</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-z</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;hal&quot;       # Range.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hel^lo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\^aeiou</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; &quot;h-l-l-&quot;    # Escaped leading caret.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i-b-m</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b\-z</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a-z</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; &quot;ibabm&quot;     # Escaped embedded hyphen.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo\\bar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab\\</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>XYZ</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; &quot;fooZYXr&quot;   # Escaped backslash.</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8605-L8611'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8605' data-end='8611'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8605</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_tr(VALUE str, VALUE src, VALUE repl)
{
    str = str_duplicate(rb_cString, str);
    tr_trans(str, src, repl, 0);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tr!-instance_method">
  <h3 class='signature '>
    #<strong>tr!</strong>(selector, replacements)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#tr-instance_method" title="String#tr (method)">#tr</a>, except:</p>
<ul><li>
<p>Performs substitutions in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any modifications were made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8561-L8565'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8561' data-end='8565'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8561</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_tr_bang(VALUE str, VALUE src, VALUE repl)
{
    return tr_trans(str, src, repl, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tr_s-instance_method">
  <h3 class='signature '>
    #<strong>tr_s</strong>(selector, replacements)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#tr-instance_method" title="String#tr (method)">#tr</a>, except:</p>
<ul><li>
<p>Also squeezes the modified portions of the translated string; see String#squeeze.</p>
</li><li>
<p>Returns the translated and squeezed string.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr_s'>tr_s</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'>#=&gt; &quot;hero&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr_s'>tr_s</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>el</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'>#=&gt; &quot;h-o&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_tr_s'>tr_s</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>el</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hx</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'>#=&gt; &quot;hhxo&quot;</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8934-L8940'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8934' data-end='8940'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8934</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_tr_s(VALUE str, VALUE src, VALUE repl)
{
    str = str_duplicate(rb_cString, str);
    tr_trans(str, src, repl, 1);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tr_s!-instance_method">
  <h3 class='signature '>
    #<strong>tr_s!</strong>(selector, replacements)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#tr_s-instance_method" title="String#tr_s (method)">#tr_s</a>, except:</p>
<ul><li>
<p>Modifies <code>self</code> in place (not a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any changes were made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L8907-L8911'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8907' data-end='8911'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 8907</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_tr_s_bang(VALUE str, VALUE src, VALUE repl)
{
    return tr_trans(str, src, repl, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="undump-instance_method">
  <h3 class='signature '>
    #<strong>undump</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Inverse of <code>String#dump;</code> returns a copy of <code>self</code> with changes of the kinds made by <a href="#dump-instance_method" title="String#dump (method)">#dump</a> “undone.”</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7626-L7715'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7626' data-end='7715'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7626</span></pre>
<pre class='code cpp'>

static VALUE
str_undump(VALUE str)
{
    const char *s = RSTRING_PTR(str);
    const char *s_end = RSTRING_END(str);
    rb_encoding *enc = rb_enc_get(str);
    VALUE undumped = rb_enc_str_new(s, 0L, enc);
    bool utf8 = false;
    bool binary = false;
    int w;

    rb_must_asciicompat(str);
    if (rb_str_is_ascii_only_p(str) == Qfalse) {
        rb_raise(rb_eRuntimeError, &quot;non-ASCII character detected&quot;);
    }
    if (!str_null_check(str, &amp;w)) {
        rb_raise(rb_eRuntimeError, &quot;string contains null byte&quot;);
    }
    if (RSTRING_LEN(str) &lt; 2) goto invalid_format;
    if (*s != &#39;&quot;&#39;) goto invalid_format;

    /* strip &#39;&quot;&#39; at the start */
    s++;

    for (;;) {
        if (s &gt;= s_end) {
            rb_raise(rb_eRuntimeError, &quot;unterminated dumped string&quot;);
        }

        if (*s == &#39;&quot;&#39;) {
            /* epilogue */
            s++;
            if (s == s_end) {
                /* ascii compatible dumped string */
                break;
            }
            else {
                static const char force_encoding_suffix[] = &quot;.force_encoding(\&quot;&quot;; /* &quot;\&quot;)&quot; */
                static const char dup_suffix[] = &quot;.dup&quot;;
                const char *encname;
                int encidx;
                ptrdiff_t size;

                /* check separately for strings dumped by older versions */
                size = sizeof(dup_suffix) - 1;
                if (s_end - s &gt; size &amp;&amp; memcmp(s, dup_suffix, size) == 0) s += size;

                size = sizeof(force_encoding_suffix) - 1;
                if (s_end - s &lt;= size) goto invalid_format;
                if (memcmp(s, force_encoding_suffix, size) != 0) goto invalid_format;
                s += size;

                if (utf8) {
                    rb_raise(rb_eRuntimeError, &quot;dumped string contained Unicode escape but used force_encoding&quot;);
                }

                encname = s;
                s = memchr(s, &#39;&quot;&#39;, s_end-s);
                size = s - encname;
                if (!s) goto invalid_format;
                if (s_end - s != 2) goto invalid_format;
                if (s[0] != &#39;&quot;&#39; || s[1] != &#39;)&#39;) goto invalid_format;

                encidx = rb_enc_find_index2(encname, (long)size);
                if (encidx &lt; 0) {
                    rb_raise(rb_eRuntimeError, &quot;dumped string has unknown encoding name&quot;);
                }
                rb_enc_associate_index(undumped, encidx);
            }
            break;
        }

        if (*s == &#39;\\&#39;) {
            s++;
            if (s &gt;= s_end) {
                rb_raise(rb_eRuntimeError, &quot;invalid escape&quot;);
            }
            undump_after_backslash(undumped, &amp;s, s_end, &amp;enc, &amp;utf8, &amp;binary);
        }
        else {
            rb_str_cat(undumped, s++, 1);
        }
    }

    RB_GC_GUARD(str);

    return undumped;
invalid_format:
    rb_raise(rb_eRuntimeError, &quot;invalid dumped string; not wrapped with &#39;\&quot;&#39; nor &#39;\&quot;...\&quot;.force_encoding(\&quot;...\&quot;)&#39; form&quot;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unicode_normalize-instance_method">
  <h3 class='signature '>
    #<strong>unicode_normalize</strong>(form = :nfc)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of <code>self</code> with <a href="https://unicode.org/reports/tr15" target="_parent" title="Unicode normalization">Unicode normalization</a> applied.</p>

<p>Argument <code>form</code> must be one of the following symbols (see <a href="https://unicode.org/reports/tr15/#Norm_Forms" target="_parent" title="Unicode normalization forms">Unicode normalization forms</a>):</p>
<ul><li>
<p><code>:nfc</code>: Canonical decomposition, followed by canonical composition.</p>
</li><li>
<p><code>:nfd</code>: Canonical decomposition.</p>
</li><li>
<p><code>:nfkc</code>: Compatibility decomposition, followed by canonical composition.</p>
</li><li>
<p><code>:nfkd</code>: Compatibility decomposition.</p>
</li></ul>

<p>The encoding of <code>self</code> must be one of:</p>
<ul><li>
<p><code>Encoding::UTF_8</code>.</p>
</li><li>
<p><code>Encoding::UTF_16BE</code>.</p>
</li><li>
<p><code>Encoding::UTF_16LE</code>.</p>
</li><li>
<p><code>Encoding::UTF_32BE</code>.</p>
</li><li>
<p><code>Encoding::UTF_32LE</code>.</p>
</li><li>
<p><code>Encoding::GB18030</code>.</p>
</li><li>
<p><code>Encoding::UCS_2BE</code>.</p>
</li><li>
<p><code>Encoding::UCS_4BE</code>.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a\u0300</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_unicode_normalize'>unicode_normalize</span>       <span class='comment'># =&gt; &quot;à&quot;  # Lowercase &#39;a&#39; with grave accens.
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a\u0300</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_unicode_normalize'>unicode_normalize</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_nfd'>nfd</span>) <span class='comment'># =&gt; &quot;à&quot;  # Same.</span></code></pre>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L12049-L12053'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12049' data-end='12053'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 12049</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_unicode_normalize(int argc, VALUE *argv, VALUE str)
{
    return unicode_normalize_common(argc, argv, str, id_normalize);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unicode_normalize!-instance_method">
  <h3 class='signature '>
    #<strong>unicode_normalize!</strong>(form = :nfc)  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#unicode_normalize-instance_method" title="String#unicode_normalize (method)">#unicode_normalize</a>, except that the normalization is performed on <code>self</code> (not on a copy of <code>self</code>).</p>

<p>Related: see <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L12065-L12069'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12065' data-end='12069'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 12065</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_unicode_normalize_bang(int argc, VALUE *argv, VALUE str)
{
    return rb_str_replace(str, unicode_normalize_common(argc, argv, str, id_normalize));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unicode_normalized?-instance_method">
  <h3 class='signature '>
    #<strong>unicode_normalized?</strong>(form = :nfc)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>self</code> is in the given <code>form</code> of Unicode normalization; see <a href="#unicode_normalize-instance_method" title="String#unicode_normalize (method)">#unicode_normalize</a>.</p>

<p>The <code>form</code> must be one of <code>:nfc</code>, <code>:nfd</code>, <code>:nfkc</code>, or <code>:nfkd</code>.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a\u0300</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_unicode_normalized?'>unicode_normalized?</span>       <span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a\u0300</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_unicode_normalized?'>unicode_normalized?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_nfd'>nfd</span>) <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u00E0</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_unicode_normalized?'>unicode_normalized?</span>        <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u00E0</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_unicode_normalized?'>unicode_normalized?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_nfd'>nfd</span>)  <span class='comment'># =&gt; false</span></code></pre>

<p>Raises an exception if <code>self</code> is not in a Unicode encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xE0</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'><a href="#force_encoding-instance_method" title="String#force_encoding (method)">force_encoding</a></span>(<span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>ISO_8859_1</span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_unicode_normalized?'>unicode_normalized?</span> <span class='comment'># Raises Encoding::CompatibilityError</span></code></pre>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L12094-L12098'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12094' data-end='12098'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 12094</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_unicode_normalized_p(int argc, VALUE *argv, VALUE str)
{
    return unicode_normalize_common(argc, argv, str, id_normalized_p);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unpack-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>unpack</strong>(template, offset: 0) {|o| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
      <span class='overload'>#<strong>unpack</strong>(template, offset: 0)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Extracts data from <code>self</code> to form new objects; see <a href="file.packed_data.html" title="Packed Data">Packed Data</a>.</p>

<p>With a block given, calls the block with each unpacked object.</p>

<p>With no block given, returns an array containing the unpacked objects.</p>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/pack.rb#L25-L28'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='25' data-end='28'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'pack.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unpack'>unpack</span>(<span class='id identifier rubyid_fmt'>fmt</span><span class='comma'>,</span> <span class='label'>offset:</span> <span class='int'>0</span>)
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_attr!'>attr!</span> <span class='symbeg'>:</span><span class='id identifier rubyid_use_block'>use_block</span>
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_pack_unpack'>pack_unpack</span>(<span class='id identifier rubyid_fmt'>fmt</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unpack1-instance_method">
  <h3 class='signature '>
    #<strong>unpack1</strong>(template, offset: 0)  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#unpack-instance_method" title="String#unpack (method)">#unpack</a> with no block, but unpacks and returns only the first extracted object. See <a href="file.packed_data.html" title="Packed Data">Packed Data</a>.</p>

<p>Related: see <a href="String.html#label-Converting+to+Non–5CString" title="Converting to Non-String">Converting to Non-String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/pack.rb#L37-L39'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='37' data-end='39'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'pack.rb', line 37</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unpack1'>unpack1</span>(<span class='id identifier rubyid_fmt'>fmt</span><span class='comma'>,</span> <span class='label'>offset:</span> <span class='int'>0</span>)
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_pack_unpack1'>pack_unpack1</span>(<span class='id identifier rubyid_fmt'>fmt</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="upcase-instance_method">
  <h3 class='signature '>
    #<strong>upcase</strong>(mapping = :ascii)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string containing the upcased characters in <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upcase'>upcase</span>        <span class='comment'># =&gt; &quot;HELLO&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>straße</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upcase'>upcase</span>       <span class='comment'># =&gt; &quot;STRASSE&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>привет</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upcase'>upcase</span>       <span class='comment'># =&gt; &quot;ПРИВЕТ&quot;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RubyGems.org</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upcase'>upcase</span> <span class='comment'># =&gt; &quot;RUBYGEMS.ORG&quot;</span></code></pre>

<p>The sizes of <code>self</code> and the upcased result may differ:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Straße</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span>        <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_upcase'>upcase</span>      <span class='comment'># =&gt; &quot;STRASSE&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_upcase'>upcase</span>.<span class='id identifier rubyid_size'><a href="#size-instance_method" title="String#size (method)">size</a></span> <span class='comment'># =&gt; 7</span></code></pre>

<p>Some characters (and some character sets) do not have upcase and downcase versions; see <a href="file.case_mapping.html" title="Case Mapping">Case Mapping</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1, 2, 3, ...</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_upcase'>upcase</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_upcase'>upcase</span> <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; true</span></code></pre>

<p>The casing is affected by the given <code>mapping</code>, which may be <code>:ascii</code>, <code>:fold</code>, or <code>:turkic</code>; see <a href="file.case_mapping.html#label-Case%2BMappings" title="Case Mappings">Case Mappings</a>.</p>

<p>Related: see <a href="String.html#label-Converting+to+New+String" title="Converting to New String">Converting to New String</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7988-L8011'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7988' data-end='8011'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7988</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_upcase(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        ret = rb_str_new(RSTRING_PTR(str), RSTRING_LEN(str));
        str_enc_copy_direct(ret, str);
        upcase_single(ret);
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }

    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="upcase!-instance_method">
  <h3 class='signature '>
    #<strong>upcase!</strong>(mapping)  &#x21d2; <code>self</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Like <a href="#upcase-instance_method" title="String#upcase (method)">#upcase</a>, except that:</p>
<ul><li>
<p>Changes character casings in <code>self</code> (not in a copy of <code>self</code>).</p>
</li><li>
<p>Returns <code>self</code> if any changes are made, <code>nil</code> otherwise.</p>
</li></ul>

<p>Related: See <a href="String.html#label-Modifying" title="Modifying">Modifying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L7958-L7978'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7958' data-end='7978'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 7958</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_upcase_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        if (upcase_single(str))
            flags |= ONIGENC_CASE_MODIFIED;
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="upto-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>upto</strong>(other_string, exclusive = false) {|string| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>upto</strong>(other_string, exclusive = false)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With a block given, calls the block with each <code>String</code> value returned by successive calls to <code>String#succ;</code> the first value is <code>self</code>, the next is <code>self.succ</code>, and so on; the sequence terminates when value <code>other_string</code> is reached; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_c'>c</span>) }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]
</span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Ж</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>П</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_c'>c</span>) }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;Ж&quot;, &quot;З&quot;, &quot;И&quot;, &quot;Й&quot;, &quot;К&quot;, &quot;Л&quot;, &quot;М&quot;, &quot;Н&quot;, &quot;О&quot;, &quot;П&quot;]
</span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>よ</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ろ</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_c'>c</span>) }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;よ&quot;, &quot;ら&quot;, &quot;り&quot;, &quot;る&quot;, &quot;れ&quot;, &quot;ろ&quot;]
</span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a8</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b6</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_c'>c</span>) }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;a8&quot;, &quot;a9&quot;, &quot;b0&quot;, &quot;b1&quot;, &quot;b2&quot;, &quot;b3&quot;, &quot;b4&quot;, &quot;b5&quot;, &quot;b6&quot;]</span></code></pre>

<p>If argument <code>exclusive</code> is given as a truthy object, the last value is omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>true</span>) {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_c'>c</span>) }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</span></code></pre>

<p>If <code>other_string</code> would not be reached, does not call the block:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>25</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_fail'>fail</span> <span class='id identifier rubyid_s'>s</span> }
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aa</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_fail'>fail</span> <span class='id identifier rubyid_s'>s</span> }</code></pre>

<p>With no block given, returns a new <a href="Enumerator.html" title="Enumerator (class)"><code>::Enumerator</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a8</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_upto'>upto</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b6</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;Enumerator: &quot;a8&quot;:upto(&quot;b6&quot;)&gt;</span></code></pre>

<p>Related: see <a href="String.html#label-Iterating" title="Iterating">Iterating</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/string.c#L5482-L5490'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5482' data-end='5490'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'string.c', line 5482</span></pre>
<pre class='code cpp'>

static VALUE
rb_str_upto(int argc, VALUE *argv, VALUE beg)
{
    VALUE end, exclusive;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;end, &amp;exclusive);
    RETURN_ENUMERATOR(beg, argc, argv);
    return rb_str_upto_each(beg, end, RTEST(exclusive), str_upto_i, Qnil);
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>