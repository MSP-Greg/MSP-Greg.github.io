<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Exception: Exception &mdash; Core  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Exception",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>Core</a> &raquo; 
      <a href='_index.html#alpha_E'>Index (E)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Exception&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Exception: Exception</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="ArgumentError.html" title="ArgumentError (class)">ArgumentError</a>, <a href="ClosedQueueError.html" title="ClosedQueueError (class)">ClosedQueueError</a>, <a href="EOFError.html" title="EOFError (class)">EOFError</a>, <a href="EncodingError.html" title="EncodingError (class)">EncodingError</a>, <a href="FiberError.html" title="FiberError (class)">FiberError</a>, <a href="FloatDomainError.html" title="FloatDomainError (class)">FloatDomainError</a>, <a href="FrozenError.html" title="FrozenError (class)">FrozenError</a>, <a href="IOError.html" title="IOError (class)">IOError</a>, <a href="IndexError.html" title="IndexError (class)">IndexError</a>, <a href="Interrupt.html" title="Interrupt (class)">Interrupt</a>, <a href="KeyError.html" title="KeyError (class)">KeyError</a>, <a href="LoadError.html" title="LoadError (class)">LoadError</a>, <a href="LocalJumpError.html" title="LocalJumpError (class)">LocalJumpError</a>, <a href="NameError.html" title="NameError (class)">NameError</a>, <a href="NoMatchingPatternError.html" title="NoMatchingPatternError (class)">NoMatchingPatternError</a>, <a href="NoMatchingPatternKeyError.html" title="NoMatchingPatternKeyError (class)">NoMatchingPatternKeyError</a>, <a href="NoMemoryError.html" title="NoMemoryError (class)">NoMemoryError</a>, <a href="NoMethodError.html" title="NoMethodError (class)">NoMethodError</a>, <a href="NotImplementedError.html" title="NotImplementedError (class)">NotImplementedError</a>, <a href="RangeError.html" title="RangeError (class)">RangeError</a>, <a href="RegexpError.html" title="RegexpError (class)">RegexpError</a>, <a href="RuntimeError.html" title="RuntimeError (class)">RuntimeError</a>, <a href="ScriptError.html" title="ScriptError (class)">ScriptError</a>, <a href="SecurityError.html" title="SecurityError (class)">SecurityError</a>, <a href="SignalException.html" title="SignalException (class)">SignalException</a>, <a href="StandardError.html" title="StandardError (class)">StandardError</a>, <a href="StopIteration.html" title="StopIteration (class)">StopIteration</a>, <a href="SyntaxError.html" title="SyntaxError (class)">SyntaxError</a>, <a href="SystemCallError.html" title="SystemCallError (class)">SystemCallError</a>, <a href="SystemExit.html" title="SystemExit (class)">SystemExit</a>, <a href="SystemStackError.html" title="SystemStackError (class)">SystemStackError</a>, <a href="ThreadError.html" title="ThreadError (class)">ThreadError</a>, <a href="TypeError.html" title="TypeError (class)">TypeError</a>, <a href="UncaughtThrowError.html" title="UncaughtThrowError (class)">UncaughtThrowError</a>, <a href="ZeroDivisionError.html" title="ZeroDivisionError (class)">ZeroDivisionError</a>, <a href="fatal.html" title="fatal (class)">fatal</a>, <a href="Encoding/CompatibilityError.html" title="Encoding::CompatibilityError (class)">Encoding::CompatibilityError</a>, <a href="Encoding/ConverterNotFoundError.html" title="Encoding::ConverterNotFoundError (class)">Encoding::ConverterNotFoundError</a>, <a href="Encoding/InvalidByteSequenceError.html" title="Encoding::InvalidByteSequenceError (class)">Encoding::InvalidByteSequenceError</a>, <a href="Encoding/UndefinedConversionError.html" title="Encoding::UndefinedConversionError (class)">Encoding::UndefinedConversionError</a>, <a href="IO/TimeoutError.html" title="IO::TimeoutError (class)">IO::TimeoutError</a>, <a href="Math/DomainError.html" title="Math::DomainError (class)">Math::DomainError</a>, <a href="Ractor/ClosedError.html" title="Ractor::ClosedError (class)">Ractor::ClosedError</a>, <a href="Ractor/Error.html" title="Ractor::Error (class)">Ractor::Error</a>, <a href="Ractor/IsolationError.html" title="Ractor::IsolationError (class)">Ractor::IsolationError</a>, <a href="Ractor/MovedError.html" title="Ractor::MovedError (class)">Ractor::MovedError</a>, <a href="Ractor/RemoteError.html" title="Ractor::RemoteError (class)">Ractor::RemoteError</a>, <a href="Ractor/UnsafeError.html" title="Ractor::UnsafeError (class)">Ractor::UnsafeError</a>, <a href="Regexp/TimeoutError.html" title="Regexp::TimeoutError (class)">Regexp::TimeoutError</a>, <a href="IO/Buffer/AccessError.html" title="IO::Buffer::AccessError (class)">IO::Buffer::AccessError</a>, <a href="IO/Buffer/AllocationError.html" title="IO::Buffer::AllocationError (class)">IO::Buffer::AllocationError</a>, <a href="IO/Buffer/InvalidatedError.html" title="IO::Buffer::InvalidatedError (class)">IO::Buffer::InvalidatedError</a>, <a href="IO/Buffer/LockedError.html" title="IO::Buffer::LockedError (class)">IO::Buffer::LockedError</a>, <a href="IO/Buffer/MaskError.html" title="IO::Buffer::MaskError (class)">IO::Buffer::MaskError</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L3505'>error.c</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="Class.html" title="Class (class)"><code>::Class</code></a> <code>Exception</code> and its subclasses are used to indicate that an error or other problem has occurred, and may need to be handled. See <a href="file.exceptions.html" title="s">s</a>.</p>

<p>An <code>Exception</code> object carries certain information:</p>
<ul><li>
<p>The type (the exceptionâ€™s class), commonly StandardError, RuntimeError, or a subclass of one or the other; see <a href="Exception.html#label-Built-In+Exception+Class+Hierarchy" title="Built-In  Class Hierarchy">Built-In  Class Hierarchy</a>.</p>
</li><li>
<p>An optional descriptive message; see methods ::new, #message.</p>
</li><li>
<p>Optional backtrace information; see methods #backtrace, #backtrace_locations, #set_backtrace.</p>
</li><li>
<p>An optional cause; see method #cause.</p>
</li></ul>

<h3 id="label-Built-In+Exception+Class+Hierarchy">Built-In Exception Class Hierarchy</h3>

<p>The hierarchy of built-in subclasses of class <code>Exception</code>:</p>
<ul><li>
<p><a href="NoMemoryError.html" title="NoMemoryError (class)"><code>::NoMemoryError</code></a></p>
</li><li>
<p><a href="ScriptError.html" title="ScriptError (class)"><code>::ScriptError</code></a></p>
<ul><li>
<p>LoadError</p>
</li><li>
<p>NotImplementedError</p>
</li><li>
<p>SyntaxError</p>
</li></ul>
</li><li>
<p><a href="SecurityError.html" title="SecurityError (class)"><code>::SecurityError</code></a></p>
</li><li>
<p><a href="SignalException.html" title="SignalException (class)"><code>::SignalException</code></a></p>
<ul><li>
<p>Interrupt</p>
</li></ul>
</li><li>
<p><a href="StandardError.html" title="StandardError (class)"><code>::StandardError</code></a></p>
<ul><li>
<p>ArgumentError</p>
<ul><li>
<p>UncaughtThrowError</p>
</li></ul>
</li><li>
<p>EncodingError</p>
</li><li>
<p>FiberError</p>
</li><li>
<p>IOError</p>
<ul><li>
<p>EOFError</p>
</li></ul>
</li><li>
<p>IndexError</p>
<ul><li>
<p>KeyError</p>
</li><li>
<p>StopIteration</p>
<ul><li>
<p>ClosedQueueError</p>
</li></ul>
</li></ul>
</li><li>
<p>LocalJumpError</p>
</li><li>
<p>NameError</p>
<ul><li>
<p>NoMethodError</p>
</li></ul>
</li><li>
<p>RangeError</p>
<ul><li>
<p>FloatDomainError</p>
</li></ul>
</li><li>
<p>RegexpError</p>
</li><li>
<p>RuntimeError</p>
<ul><li>
<p>FrozenError</p>
</li></ul>
</li><li>
<p>SystemCallError</p>
<ul><li>
<p>Errno (and its subclasses, representing system errors)</p>
</li></ul>
</li><li>
<p>ThreadError</p>
</li><li>
<p>TypeError</p>
</li><li>
<p>ZeroDivisionError</p>
</li></ul>
</li><li>
<p><a href="SystemExit.html" title="SystemExit (class)"><code>::SystemExit</code></a></p>
</li><li>
<p><a href="SystemStackError.html" title="SystemStackError (class)"><code>::SystemStackError</code></a></p>
</li><li>
<p><a href="fatal.html" title="fatal (class)">fatal</a></p>
</li></ul>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#to_tty%3F-class_method" title="to_tty? (class method)">.<strong>to_tty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if exception messages will be sent to a terminal device.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#exception-class_method" title="exception (class method)">.<strong>exception</strong>(message = nil)  &#x21d2; self, Exception </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an exception object of the same class as <code>self</code>; useful for creating a similar exception, but with a different message.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(message = nil)  &#x21d2; Exception </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new exception object.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#==-instance_method" title="#== (instance method)">#<strong>==</strong>(other)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether <code>other</code> is the same class as <code>self</code> and its <a href="#message-instance_method" title="Exception#message (method)">#message</a> and <a href="#backtrace-instance_method" title="Exception#backtrace (method)">#backtrace</a> are equal to those of <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#backtrace-instance_method" title="#backtrace (instance method)">#<strong>backtrace</strong>  &#x21d2; Array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the backtrace (the list of code locations that led to the exception), as an array of strings.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#backtrace_locations-instance_method" title="#backtrace_locations (instance method)">#<strong>backtrace_locations</strong>  &#x21d2; Array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the backtrace (the list of code locations that led to the exception), as an array of <a href="Thread/Backtrace/Location.html" title="Thread::Backtrace::Location (class)"><code>::Thread::Backtrace::Location</code></a> instances.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cause-instance_method" title="#cause (instance method)">#<strong>cause</strong>  &#x21d2; Exception<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the previous value of global variable <code>$!</code>, which may be <code>nil</code> (see <a href="file.exceptions.html#label-Global%2BVariables" title="Global Variables">Global Variables</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#detailed_message-instance_method" title="#detailed_message (instance method)">#<strong>detailed_message</strong>(highlight: false, **kwargs)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the message string with enhancements:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exception-instance_method" title="#exception (instance method)">#<strong>exception</strong>(message = nil)  &#x21d2; self, Exception </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an exception object of the same class as <code>self</code>; useful for creating a similar exception, but with a different message.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#full_message-instance_method" title="#full_message (instance method)">#<strong>full_message</strong>(highlight: true, order: :top)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an enhanced message string:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string representation of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#message-instance_method" title="#message (instance method)">#<strong>message</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <a href="#to_s-instance_method" title="Exception#to_s (method)">#to_s</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_backtrace-instance_method" title="#set_backtrace (instance method)">#<strong>set_backtrace</strong>(value)  &#x21d2; value </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the backtrace value for <code>self</code>; returns the given <code>value</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string representation of <code>self</code>:</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(message = nil)  &#x21d2; <code>Exception</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new exception object.</p>

<p>The given <a href="#message-instance_method" title="Exception#message (method)">#message</a> should be a <a href="file.implicit_conversion.html#label-String-Convertible%2BObjects" title="string-convertible object">string-convertible object</a>; see method <code>#message;</code> if not given, the message is the class name of the new instance (which may be the name of a subclass):</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Exception</span>.<span class='id identifier rubyid_new'>new</span>         <span class='comment'># =&gt; #&lt;Exception: Exception&gt;
</span><span class='const'><a href="LoadError.html" title="LoadError (class)">LoadError</a></span>.<span class='id identifier rubyid_new'>new</span>         <span class='comment'># =&gt; #&lt;LoadError: LoadError&gt; # Subclass of Exception.
</span><span class='const'>Exception</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;Exception: Boom&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1505-L1512'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1505' data-end='1512'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1505</span></pre>
<pre class='code cpp'>

static VALUE
exc_initialize(int argc, VALUE *argv, VALUE exc)
{
    VALUE arg;

    arg = (!rb_check_arity(argc, 0, 1) ? Qnil : argv[0]);
    return exc_init(exc, arg);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="to_tty?-class_method">
  <h3 class='signature ro first'>
    .<strong>to_tty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if exception messages will be sent to a terminal device.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1607-L1611'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1607' data-end='1611'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1607</span></pre>
<pre class='code cpp'>

static VALUE
exc_s_to_tty_p(VALUE self)
{
    return RBOOL(rb_stderr_tty_p());
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="exception-class_method">
  <h3 class='signature  first'>
    .<strong>exception</strong>(message = nil)  &#x21d2; <code>self</code>, <code>Exception</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an exception object of the same class as <code>self</code>; useful for creating a similar exception, but with a different message.</p>

<p>With <a href="#message-instance_method" title="Exception#message (method)">#message</a> <code>nil</code>, returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x0'>x0</span> <span class='op'>=</span> <span class='const'><a href="StandardError.html" title="StandardError (class)">StandardError</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Exception.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;StandardError: Boom&gt;
</span><span class='id identifier rubyid_x1'>x1</span> <span class='op'>=</span> <span class='id identifier rubyid_x0'>x0</span>.<span class='id identifier rubyid_exception'>exception</span>              <span class='comment'># =&gt; #&lt;StandardError: Boom&gt;
</span><span class='id identifier rubyid_x0'>x0</span>.<span class='id identifier rubyid___id__'>__id__</span> <span class='op'>==</span> <span class='id identifier rubyid_x1'>x1</span>.<span class='id identifier rubyid___id__'>__id__</span>         <span class='comment'># =&gt; true</span></code></pre>

<p>With <a href="file.implicit_conversion.html#label-String-Convertible%2BObjects" title="string-convertible object">string-convertible object</a> <a href="#message-instance_method" title="Exception#message (method)">#message</a> (even the same as the original message), returns a new exception object whose class is the same as <code>self</code>, and whose message is the given <a href="#message-instance_method" title="Exception#message (method)">#message</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x1'>x1</span> <span class='op'>=</span> <span class='id identifier rubyid_x0'>x0</span>.<span class='id identifier rubyid_exception'>exception</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;StandardError: Boom&gt;
</span><span class='id identifier rubyid_x0'>x0</span><span class='op'>..</span><span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_x1'>x1</span>)            <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L3621'>GitHub</a> ]</span>

</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="==-instance_method">
  <h3 class='signature  first'>
    #<strong>==</strong>(other)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether <code>other</code> is the same class as <code>self</code> and its <a href="#message-instance_method" title="Exception#message (method)">#message</a> and <a href="#backtrace-instance_method" title="Exception#backtrace (method)">#backtrace</a> are equal to those of <code>self</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L2169-L2198'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2169' data-end='2198'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 2169</span></pre>
<pre class='code cpp'>

static VALUE
exc_equal(VALUE exc, VALUE obj)
{
    VALUE mesg, backtrace;

    if (exc == obj) return Qtrue;

    if (rb_obj_class(exc) != rb_obj_class(obj)) {
        int state;

        obj = rb_protect(try_convert_to_exception, obj, &amp;state);
        if (state || UNDEF_P(obj)) {
            rb_set_errinfo(Qnil);
            return Qfalse;
        }
        if (rb_obj_class(exc) != rb_obj_class(obj)) return Qfalse;
        mesg = rb_check_funcall(obj, id_message, 0, 0);
        if (UNDEF_P(mesg)) return Qfalse;
        backtrace = rb_check_funcall(obj, id_backtrace, 0, 0);
        if (UNDEF_P(backtrace)) return Qfalse;
    }
    else {
        mesg = rb_attr_get(obj, id_mesg);
        backtrace = exc_backtrace(obj);
    }

    if (!rb_equal(rb_attr_get(exc, id_mesg), mesg))
        return Qfalse;
    return rb_equal(exc_backtrace(exc), backtrace);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="backtrace-instance_method">
  <h3 class='signature '>
    #<strong>backtrace</strong>  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the backtrace (the list of code locations that led to the exception), as an array of strings.</p>

<p>Example (assuming the code is stored in the file named <code>t.rb</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_division'>division</span>(<span class='id identifier rubyid_numerator'>numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_denominator'>denominator</span>)
  <span class='id identifier rubyid_numerator'>numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_denominator'>denominator</span>
<span class='kw'>end</span>

<span class='kw'>begin</span>
  <span class='id identifier rubyid_division'>division</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span>)
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace'>backtrace</span>
  <span class='comment'># [&quot;t.rb:2:in &#39;Integer#/&#39;&quot;, &quot;t.rb:2:in &#39;Object#division&#39;&quot;, &quot;t.rb:6:in &#39;&lt;main&gt;&#39;&quot;]
</span>  <span class='id identifier rubyid_loc'>loc</span> <span class='op'>=</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace'>backtrace</span>.<span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_loc'>loc</span>.<span class='id identifier rubyid_class'>class</span>
  <span class='comment'># String
</span><span class='kw'>end</span></code></pre>

<p>The value returned by this method might be adjusted when raising (see <a href="Kernel.html#raise-class_method" title="Kernel.raise (method)">Kernel.raise</a>), or during intermediate handling by <a href="#set_backtrace-instance_method" title="Exception#set_backtrace (method)">#set_backtrace</a>.</p>

<p>See also <a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">#backtrace_locations</a> that provide the same value, as structured objects. (Note though that two values might not be consistent with each other when backtraces are manually adjusted.)</p>

<p>see <a href="file.exceptions.html#label-Backtraces" title="Backtraces">Backtraces</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1884-L1897'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1884' data-end='1897'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1884</span></pre>
<pre class='code cpp'>

static VALUE
exc_backtrace(VALUE exc)
{
    VALUE obj;

    obj = rb_attr_get(exc, id_bt);

    if (rb_backtrace_p(obj)) {
        obj = rb_backtrace_to_str_ary(obj);
        /* rb_ivar_set(exc, id_bt, obj); */
    }

    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="backtrace_locations-instance_method">
  <h3 class='signature '>
    #<strong>backtrace_locations</strong>  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the backtrace (the list of code locations that led to the exception), as an array of <a href="Thread/Backtrace/Location.html" title="Thread::Backtrace::Location (class)"><code>::Thread::Backtrace::Location</code></a> instances.</p>

<p>Example (assuming the code is stored in the file named <code>t.rb</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_division'>division</span>(<span class='id identifier rubyid_numerator'>numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_denominator'>denominator</span>)
  <span class='id identifier rubyid_numerator'>numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_denominator'>denominator</span>
<span class='kw'>end</span>

<span class='kw'>begin</span>
  <span class='id identifier rubyid_division'>division</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span>)
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace_locations'>backtrace_locations</span>
  <span class='comment'># [&quot;t.rb:2:in &#39;Integer#/&#39;&quot;, &quot;t.rb:2:in &#39;Object#division&#39;&quot;, &quot;t.rb:6:in &#39;&lt;main&gt;&#39;&quot;]
</span>  <span class='id identifier rubyid_loc'>loc</span> <span class='op'>=</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace_locations'>backtrace_locations</span>.<span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_loc'>loc</span>.<span class='id identifier rubyid_class'>class</span>
  <span class='comment'># Thread::Backtrace::Location
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_loc'>loc</span>.<span class='id identifier rubyid_path'>path</span>
  <span class='comment'># &quot;t.rb&quot;
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_loc'>loc</span>.<span class='id identifier rubyid_lineno'>lineno</span>
  <span class='comment'># 2
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_loc'>loc</span>.<span class='id identifier rubyid_label'>label</span>
  <span class='comment'># &quot;Integer#/&quot;
</span><span class='kw'>end</span></code></pre>

<p>The value returned by this method might be adjusted when raising (see <a href="Kernel.html#raise-class_method" title="Kernel.raise (method)">Kernel.raise</a>), or during intermediate handling by <a href="#set_backtrace-instance_method" title="Exception#set_backtrace (method)">#set_backtrace</a>.</p>

<p>See also <a href="#backtrace-instance_method" title="Exception#backtrace (method)">#backtrace</a> that provide the same value as an array of strings. (Note though that two values might not be consistent with each other when backtraces are manually adjusted.)</p>

<p>See <a href="file.exceptions.html#label-Backtraces" title="Backtraces">Backtraces</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1960-L1970'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1960' data-end='1970'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1960</span></pre>
<pre class='code cpp'>

static VALUE
exc_backtrace_locations(VALUE exc)
{
    VALUE obj;

    obj = rb_attr_get(exc, id_bt_locations);
    if (!NIL_P(obj)) {
        obj = rb_backtrace_to_location_ary(obj);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cause-instance_method">
  <h3 class='signature '>
    #<strong>cause</strong>  &#x21d2; <code>Exception</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the previous value of global variable <code>$!</code>, which may be <code>nil</code> (see <a href="file.exceptions.html#label-Global%2BVariables" title="Global Variables">Global Variables</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='id identifier rubyid_raise'>raise</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom 0</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x0'>x0</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x0'>x0</span><span class='embexpr_end'>}</span><span class='tstring_content'>;  $!: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>;  cause: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x0'>x0</span>.<span class='id identifier rubyid_cause'>cause</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="Exception#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_raise'>raise</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom 1</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x1'>x1</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x1'>x1</span><span class='embexpr_end'>}</span><span class='tstring_content'>;  $!: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>;  cause: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x1'>x1</span>.<span class='id identifier rubyid_cause'>cause</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_raise'>raise</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom 2</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x2'>x2</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x2'>x2</span><span class='embexpr_end'>}</span><span class='tstring_content'>;  $!: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>;  cause: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x2'>x2</span>.<span class='id identifier rubyid_cause'>cause</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Exception</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>0</span><span class='semicolon'>;</span>  <span class='gvar'>$!</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>0</span><span class='semicolon'>;</span>  <span class='id identifier rubyid_cause'>cause</span><span class='op'>:</span> <span class='kw'>nil</span>.
<span class='const'>Exception</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>1</span><span class='semicolon'>;</span>  <span class='gvar'>$!</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>1</span><span class='semicolon'>;</span>  <span class='id identifier rubyid_cause'>cause</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>0</span>.
<span class='const'>Exception</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>2</span><span class='semicolon'>;</span>  <span class='gvar'>$!</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>2</span><span class='semicolon'>;</span>  <span class='id identifier rubyid_cause'>cause</span><span class='op'>:</span> <span class='const'>Boom</span> <span class='int'>1</span>.</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L2148-L2152'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2148' data-end='2152'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 2148</span></pre>
<pre class='code cpp'>

static VALUE
exc_cause(VALUE exc)
{
    return rb_attr_get(exc, id_cause);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="detailed_message-instance_method">
  <h3 class='signature '>
    #<strong>detailed_message</strong>(highlight: false, **kwargs)  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the message string with enhancements:</p>
<ul><li>
<p>Includes the exception class name in the first line.</p>
</li><li>
<p>If the value of keyword <code>highlight</code> is <code>true</code>, includes bolding and underlining ANSI codes (see below) to enhance the appearance of the message.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='int'>1</span> <span class='op'>/</span> <span class='int'>0</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_message'><a href="#message-instance_method" title="Exception#message (method)">message</a></span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_detailed_message'>detailed_message</span>                  <span class='comment'># Class name added.
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_detailed_message'>detailed_message</span>(<span class='label'>highlight:</span> <span class='kw'>true</span>) <span class='comment'># Class name, bolding, and underlining added.
</span><span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>divided by 0</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>divided by 0 (ZeroDivisionError)</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\e[1mdivided by 0 (\e[1;4mZeroDivisionError\e[m\e[1m)\e[m</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>This method is overridden by some gems in the <a href="Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> standard library to add information:</p>
<ul><li>
<p><code>DidYouMean::Correctable#detailed_message</code>.</p>
</li><li>
<p><code>ErrorHighlight::CoreExt#detailed_message</code>.</p>
</li><li>
<p><code>SyntaxSuggest#detailed_message</code>.</p>
</li></ul>

<p>An overriding method must be tolerant of passed keyword arguments, which may include (but may not be limited to):</p>
<ul><li>
<p><code>:highlight</code>.</p>
</li><li>
<p><code>:did_you_mean</code>.</p>
</li><li>
<p><code>:error_highlight</code>.</p>
</li><li>
<p><code>:syntax_suggest</code>.</p>
</li></ul>

<p>An overriding method should also be careful with ANSI code enhancements; see <a href="file.exceptions.html#label-Messages" title="Messages">Messages</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1796-L1808'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1796' data-end='1808'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1796</span></pre>
<pre class='code cpp'>

static VALUE
exc_detailed_message(int argc, VALUE *argv, VALUE exc)
{
    VALUE opt;

    rb_scan_args(argc, argv, &quot;0:&quot;, &amp;opt);

    VALUE highlight = check_highlight_keyword(opt, 0);

    extern VALUE rb_decorate_message(const VALUE eclass, VALUE emesg, int highlight);

    return rb_decorate_message(CLASS_OF(exc), rb_get_message(exc), RTEST(highlight));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exception-instance_method">
  <h3 class='signature '>
    #<strong>exception</strong>(message = nil)  &#x21d2; <code>self</code>, <code>Exception</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an exception object of the same class as <code>self</code>; useful for creating a similar exception, but with a different message.</p>

<p>With <a href="#message-instance_method" title="Exception#message (method)">#message</a> <code>nil</code>, returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x0'>x0</span> <span class='op'>=</span> <span class='const'><a href="StandardError.html" title="StandardError (class)">StandardError</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Exception.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;StandardError: Boom&gt;
</span><span class='id identifier rubyid_x1'>x1</span> <span class='op'>=</span> <span class='id identifier rubyid_x0'>x0</span>.<span class='id identifier rubyid_exception'>exception</span>              <span class='comment'># =&gt; #&lt;StandardError: Boom&gt;
</span><span class='id identifier rubyid_x0'>x0</span>.<span class='id identifier rubyid___id__'>__id__</span> <span class='op'>==</span> <span class='id identifier rubyid_x1'>x1</span>.<span class='id identifier rubyid___id__'>__id__</span>         <span class='comment'># =&gt; true</span></code></pre>

<p>With <a href="file.implicit_conversion.html#label-String-Convertible%2BObjects" title="string-convertible object">string-convertible object</a> <a href="#message-instance_method" title="Exception#message (method)">#message</a> (even the same as the original message), returns a new exception object whose class is the same as <code>self</code>, and whose message is the given <a href="#message-instance_method" title="Exception#message (method)">#message</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x1'>x1</span> <span class='op'>=</span> <span class='id identifier rubyid_x0'>x0</span>.<span class='id identifier rubyid_exception'>exception</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;StandardError: Boom&gt;
</span><span class='id identifier rubyid_x0'>x0</span><span class='op'>..</span><span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_x1'>x1</span>)            <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1539-L1550'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1539' data-end='1550'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1539</span></pre>
<pre class='code cpp'>

static VALUE
exc_exception(int argc, VALUE *argv, VALUE self)
{
    VALUE exc;

    argc = rb_check_arity(argc, 0, 1);
    if (argc == 0) return self;
    if (argc == 1 &amp;&amp; self == argv[0]) return self;
    exc = rb_obj_clone(self);
    rb_ivar_set(exc, id_mesg, argv[0]);
    return exc;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="full_message-instance_method">
  <h3 class='signature '>
    #<strong>full_message</strong>(highlight: true, order: :top)  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an enhanced message string:</p>
<ul><li>
<p>Includes the exception class name.</p>
</li><li>
<p>If the value of keyword <code>highlight</code> is true (not <code>nil</code> or <code>false</code>), includes bolding ANSI codes (see below) to enhance the appearance of the message.</p>
</li><li>
<p>Includes the <a href="file.exceptions.html#label-Backtraces" title="backtrace">backtrace</a>:</p>
<ul><li>
<p>If the value of keyword <code>order</code> is <code>:top</code> (the default), lists the error message and the innermost backtrace entry first.</p>
</li><li>
<p>If the value of keyword <code>order</code> is <code>:bottom</code>, lists the error message the innermost entry last.</p>
</li></ul>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_baz'>baz</span>
  <span class='kw'>begin</span>
    <span class='int'>1</span> <span class='op'>/</span> <span class='int'>0</span>
  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span>
    <span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_message'><a href="#message-instance_method" title="Exception#message (method)">message</a></span>
    <span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_full_message'>full_message</span>(<span class='label'>highlight:</span> <span class='kw'>false</span>).<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_full_message'>full_message</span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='kw'>def</span> <span class='id identifier rubyid_bar'>bar</span><span class='semicolon'>;</span> <span class='id identifier rubyid_baz'>baz</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='kw'>def</span> <span class='id identifier rubyid_foo'>foo</span><span class='semicolon'>;</span> <span class='id identifier rubyid_bar'>bar</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='id identifier rubyid_foo'>foo</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>divided by 0</span><span class='tstring_end'>&quot;</span></span>
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t.rb:3:in &#39;Integer#/&#39;: divided by 0 (ZeroDivisionError)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:3:in &#39;Object#baz&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:10:in &#39;Object#bar&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:11:in &#39;Object#foo&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:12:in &#39;&lt;main&gt;&#39;</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t.rb:3:in &#39;Integer#/&#39;: \e[1mdivided by 0 (\e[1;4mZeroDivisionError\e[m\e[1m)\e[m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:3:in &#39;Object#baz&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:10:in &#39;Object#bar&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:11:in &#39;Object#foo&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tfrom t.rb:12:in &#39;&lt;main&gt;&#39;</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>An overriding method should be careful with ANSI code enhancements; see <a href="file.exceptions.html#label-Messages" title="Messages">Messages</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1712-L1734'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1712' data-end='1734'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1712</span></pre>
<pre class='code cpp'>

static VALUE
exc_full_message(int argc, VALUE *argv, VALUE exc)
{
    VALUE opt, str, emesg, errat;
    VALUE highlight, order;

    rb_scan_args(argc, argv, &quot;0:&quot;, &amp;opt);

    highlight = check_highlight_keyword(opt, 1);
    order = check_order_keyword(opt);

    {
        if (NIL_P(opt)) opt = rb_hash_new();
        rb_hash_aset(opt, sym_highlight, highlight);
    }

    str = rb_str_new2(&quot;&quot;);
    errat = rb_get_backtrace(exc);
    emesg = rb_get_detailed_message(exc, opt);

    rb_error_write(exc, emesg, errat, str, opt, highlight, order);
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string representation of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='const'><a href="RuntimeError.html" title="RuntimeError (class)">RuntimeError</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Exception.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;#&lt;RuntimeError: Boom&gt;&quot;
</span><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='const'><a href="RuntimeError.html" title="RuntimeError (class)">RuntimeError</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Exception.new (method)">new</a></span>
<span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;#&lt;RuntimeError: RuntimeError&gt;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1823-L1849'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1823' data-end='1849'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1823</span></pre>
<pre class='code cpp'>

static VALUE
exc_inspect(VALUE exc)
{
    VALUE str, klass;

    klass = CLASS_OF(exc);
    exc = rb_obj_as_string(exc);
    if (RSTRING_LEN(exc) == 0) {
        return rb_class_name(klass);
    }

    str = rb_str_buf_new2(&quot;#&lt;&quot;);
    klass = rb_class_name(klass);
    rb_str_buf_append(str, klass);

    if (RTEST(rb_str_include(exc, rb_str_new2(&quot;\n&quot;)))) {
        rb_str_catf(str, &quot;:%+&quot;PRIsVALUE, exc);
    }
    else {
        rb_str_buf_cat(str, &quot;: &quot;, 2);
        rb_str_buf_append(str, exc);
    }

    rb_str_buf_cat(str, &quot;&gt;&quot;, 1);

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="message-instance_method">
  <h3 class='signature '>
    #<strong>message</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <a href="#to_s-instance_method" title="Exception#to_s (method)">#to_s</a>.</p>

<p>See <a href="file.exceptions.html#label-Messages" title="Messages">Messages</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1745-L1749'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1745' data-end='1749'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1745</span></pre>
<pre class='code cpp'>

static VALUE
exc_message(VALUE exc)
{
    return rb_funcallv(exc, idTo_s, 0, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_backtrace-instance_method">
  <h3 class='signature '>
    #<strong>set_backtrace</strong>(value)  &#x21d2; <code>value</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the backtrace value for <code>self</code>; returns the given <code>value</code>.</p>

<p>The <code>value</code> might be:</p>
<ul><li>
<p>an array of Thread::Backtrace::Location;</p>
</li><li>
<p>an array of <a href="String.html" title="String (class)"><code>::String</code></a> instances;</p>
</li><li>
<p>a single <a href="String.html" title="String (class)"><code>::String</code></a> instance; or</p>
</li><li>
<p><code>nil</code>.</p>
</li></ul>

<p>Using array of <a href="Thread/Backtrace/Location.html" title="Thread::Backtrace::Location (class)"><code>::Thread::Backtrace::Location</code></a> is the most consistent option: it sets both <a href="#backtrace-instance_method" title="Exception#backtrace (method)">#backtrace</a> and <a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">#backtrace_locations</a>. It should be preferred when possible. The suitable array of locations can be obtained from <a href="Kernel.html#caller_locations-class_method" title="Kernel.caller_locations (method)">Kernel.caller_locations</a>, copied from another error, or just set to the adjusted result of the current errorâ€™s <a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">#backtrace_locations</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='id identifier rubyid_text'>text</span>)
  <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_text'>text</span>)  <span class='comment'># test.rb, line 4
</span><span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'>ParserError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_set_backtrace'>set_backtrace</span>(<span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace_locations'><a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">backtrace_locations</a></span>[<span class='int'>2</span><span class='op'>...</span>])
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;wrong: &quot;json&quot;</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># test.rb:4:in &#39;Object#parse_payload&#39;: unexpected token at &#39;{&quot;wrong: &quot;json&quot;&#39; (JSON::ParserError)
</span><span class='comment'>#
</span><span class='comment'># An error points to the body of parse_payload method,
</span><span class='comment'># hiding the parts of the backtrace related to the internals
</span><span class='comment'># of the &quot;json&quot; library
</span>
<span class='comment'># The error has both #backtace and #backtrace_locations set
</span><span class='comment'># consistently:
</span><span class='kw'>begin</span>
  <span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;wrong: &quot;json&quot;</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace'><a href="#backtrace-instance_method" title="Exception#backtrace (method)">backtrace</a></span>
  <span class='comment'># [&quot;test.rb:4:in &#39;Object#parse_payload&#39;&quot;, &quot;test.rb:20:in &#39;&lt;main&gt;&#39;&quot;]
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace_locations'><a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">backtrace_locations</a></span>
  <span class='comment'># [&quot;test.rb:4:in &#39;Object#parse_payload&#39;&quot;, &quot;test.rb:20:in &#39;&lt;main&gt;&#39;&quot;]
</span><span class='kw'>end</span></code></pre>

<p>When the desired stack of locations is not available and should be constructed from scratch, an array of strings or a singular string can be used. In this case, only {#backtrace} is affected:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='id identifier rubyid_text'>text</span>)
  <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_text'>text</span>)
<span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'>ParserError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_set_backtrace'>set_backtrace</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dsl.rb:34</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>framework.rb:1</span><span class='tstring_end'>&quot;</span></span>])
  <span class='comment'># The error have the new value in #backtrace:
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace'><a href="#backtrace-instance_method" title="Exception#backtrace (method)">backtrace</a></span>
  <span class='comment'># [&quot;dsl.rb:34&quot;, &quot;framework.rb:1&quot;]
</span>
  <span class='comment'># but the original one in #backtrace_locations
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace_locations'><a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">backtrace_locations</a></span>
  <span class='comment'># [&quot;.../json/common.rb:221:in &#39;JSON::Ext::Parser.parse&#39;&quot;, ...]
</span><span class='kw'>end</span>

<span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;wrong: &quot;json&quot;</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>Calling {#set_backtrace} with {nil} clears up {#backtrace} but doesnâ€™t affect {#backtrace_locations}:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='id identifier rubyid_text'>text</span>)
  <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_text'>text</span>)
<span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'>ParserError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_set_backtrace'>set_backtrace</span>(<span class='kw'>nil</span>)
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace'><a href="#backtrace-instance_method" title="Exception#backtrace (method)">backtrace</a></span>
  <span class='comment'># nil
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace_locations'><a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">backtrace_locations</a></span>
  <span class='comment'># [&quot;.../json/common.rb:221:in &#39;JSON::Ext::Parser.parse&#39;&quot;, ...]
</span><span class='kw'>end</span>

<span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;wrong: &quot;json&quot;</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>On reraising of such an exception, both {#backtrace} and {#backtrace_locations} is set to the place of reraising:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='id identifier rubyid_text'>text</span>)
  <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_text'>text</span>)
<span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'>ParserError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_set_backtrace'>set_backtrace</span>(<span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='comment'># test.rb, line 7
</span><span class='kw'>end</span>

<span class='kw'>begin</span>
  <span class='id identifier rubyid_parse_payload'>parse_payload</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;wrong: &quot;json&quot;</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace'><a href="#backtrace-instance_method" title="Exception#backtrace (method)">backtrace</a></span>
  <span class='comment'># [&quot;test.rb:7:in &#39;Object#parse_payload&#39;&quot;, &quot;test.rb:11:in &#39;&lt;main&gt;&#39;&quot;]
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_backtrace_locations'><a href="#backtrace_locations-instance_method" title="Exception#backtrace_locations (method)">backtrace_locations</a></span>
  <span class='comment'># [&quot;test.rb:7:in &#39;Object#parse_payload&#39;&quot;, &quot;test.rb:11:in &#39;&lt;main&gt;&#39;&quot;]
</span><span class='kw'>end</span></code></pre>

<p>See {file:exceptions.html#label-Backtraces Backtraces}.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L2096-L2108'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2096' data-end='2108'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 2096</span></pre>
<pre class='code cpp'>

static VALUE
exc_set_backtrace(VALUE exc, VALUE bt)
{
    VALUE btobj = rb_location_ary_to_backtrace(bt);
    if (RTEST(btobj)) {
        rb_ivar_set(exc, id_bt, btobj);
        rb_ivar_set(exc, id_bt_locations, btobj);
        return bt;
    }
    else {
        return rb_ivar_set(exc, id_bt, rb_check_backtrace(bt));
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_s-instance_method">
  <h3 class='signature '>
    #<strong>to_s</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string representation of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='const'><a href="RuntimeError.html" title="RuntimeError (class)">RuntimeError</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Exception.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'># =&gt; &quot;Boom&quot;
</span><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='const'><a href="RuntimeError.html" title="RuntimeError (class)">RuntimeError</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Exception.new (method)">new</a></span>
<span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'># =&gt; &quot;RuntimeError&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/error.c#L1565-L1572'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1565' data-end='1572'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'error.c', line 1565</span></pre>
<pre class='code cpp'>

static VALUE
exc_to_s(VALUE exc)
{
    VALUE mesg = rb_attr_get(exc, idMesg);

    if (NIL_P(mesg)) return rb_class_name(CLASS_OF(exc));
    return rb_String(mesg);
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>