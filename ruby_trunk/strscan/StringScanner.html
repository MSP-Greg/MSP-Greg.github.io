<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: StringScanner &mdash; strscan  Ruby-master dev</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "StringScanner",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-master</a> &raquo; 
      <a href='.'>strscan</a> &raquo; 
      <a href='_index.html#alpha_S'>Index (S)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>StringScanner&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: StringScanner</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="StringScanner/Error.html" title="StringScanner::Error (class)"><code>Error</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2296'>ext/strscan/strscan.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2280'>ext/strscan/strscan.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/lib/strscan/strscan.rb#L3'>ext/strscan/lib/strscan/strscan.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown</p>

<p> </p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature priv'>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(string, fixed_anchor: false)  &#x21d2; string_scanner </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#must_C_version-class_method" title=".must_C_version (class method)">.<strong>must_C_version</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#beginning_of_line%3F-instance_method" title="#beginning_of_line? (instance method)">#<strong>beginning_of_line?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eos%3F-instance_method" title="#eos? (instance method)">#<strong>eos?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#fixed_anchor%3F-instance_method" title="#fixed_anchor? (instance method)">#<strong>fixed_anchor?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#matched-instance_method" title="#matched (instance method)">#<strong>matched</strong>  &#x21d2; matched_substring<sup>?</sup> </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#matched%3F-instance_method" title="#matched? (instance method)">#<strong>matched?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pointer-instance_method" title="#pointer (instance method)">#<strong>pointer</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pos-instance_method" title="#pos (instance method)">#<strong>pos</strong>  </a>
      (also: #pointer)
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pos=-instance_method" title="#pos= (instance method)">#<strong>pos=</strong>(v)  </a>
      (also: #pointer=)
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#rest-instance_method" title="#rest (instance method)">#<strong>rest</strong>  &#x21d2; target_substring </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#string-instance_method" title="#string (instance method)">#<strong>string</strong>  &#x21d2; stored_string </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#string=-instance_method" title="#string= (instance method)">#<strong>string=</strong>(other_string)  &#x21d2; other_string </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#rest%3F-instance_method" title="#rest? (instance method)">#<strong>rest?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(more_string)  &#x21d2; self </a>
      (also: #concat)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(specifier)  &#x21d2; substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#captures-instance_method" title="#captures (instance method)">#<strong>captures</strong>  &#x21d2; substring_array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#charpos-instance_method" title="#charpos (instance method)">#<strong>charpos</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check-instance_method" title="#check (instance method)">#<strong>check</strong>(pattern)  &#x21d2; matched_substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check_until-instance_method" title="#check_until (instance method)">#<strong>check_until</strong>(pattern)  &#x21d2; substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#concat-instance_method" title="#concat (instance method)">#<strong>concat</strong>(more_string)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#<<-instance_method" title="StringScanner#&lt;&lt; (method)">#&lt;&lt;</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exist%3F-instance_method" title="#exist? (instance method)">#<strong>exist?</strong>(pattern)  &#x21d2; byte_offset<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_byte-instance_method" title="#get_byte (instance method)">#<strong>get_byte</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getch-instance_method" title="#getch (instance method)">#<strong>getch</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match%3F-instance_method" title="#match? (instance method)">#<strong>match?</strong>(pattern)  &#x21d2; updated_position<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#matched_size-instance_method" title="#matched_size (instance method)">#<strong>matched_size</strong>  &#x21d2; substring_size<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#named_captures-instance_method" title="#named_captures (instance method)">#<strong>named_captures</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#peek-instance_method" title="#peek (instance method)">#<strong>peek</strong>(length)  &#x21d2; substring </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#peek_byte-instance_method" title="#peek_byte (instance method)">#<strong>peek_byte</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Peeks at the current byte and returns it as an integer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#post_match-instance_method" title="#post_match (instance method)">#<strong>post_match</strong>  &#x21d2; substring </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pre_match-instance_method" title="#pre_match (instance method)">#<strong>pre_match</strong>  &#x21d2; substring </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rest_size-instance_method" title="#rest_size (instance method)">#<strong>rest_size</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan-instance_method" title="#scan (instance method)">#<strong>scan</strong>(re)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan_byte-instance_method" title="#scan_byte (instance method)">#<strong>scan_byte</strong>  &#x21d2; integer_byte </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Scans one byte and returns it as an integer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan_integer-instance_method" title="#scan_integer (instance method)">#<strong>scan_integer</strong>(base: 10)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If <code>base</code> isn’t provided or is <code>10</code>, then it is equivalent to calling <a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a> with a <code>[+-]?d+</code> pattern, and returns an Integer or nil.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan_until-instance_method" title="#scan_until (instance method)">#<strong>scan_until</strong>(re)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; captures_count </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#skip-instance_method" title="#skip (instance method)">#<strong>skip</strong>(re)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#skip_until-instance_method" title="#skip_until (instance method)">#<strong>skip_until</strong>(re)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#terminate-instance_method" title="#terminate (instance method)">#<strong>terminate</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown  </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unscan-instance_method" title="#unscan (instance method)">#<strong>unscan</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(*specifiers)  &#x21d2; array_of_captures<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#initialize_copy-instance_method" title="#dup (instance method)">#<strong>dup</strong>  &#x21d2; shallow_copy </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>:markup: markdown </p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#scan_base10_integer-instance_method" title="#scan_base10_integer (instance method)">#<strong>scan_base10_integer</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#scan_base16_integer-instance_method" title="#scan_base16_integer (instance method)">#<strong>scan_base16_integer</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#getbyte-instance_method" title="#getbyte (instance method)">#<strong>getbyte</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#peep-instance_method" title="#peep (instance method)">#<strong>peep</strong>(vlen)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#restsize-instance_method" title="#restsize (instance method)">#<strong>restsize</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#scan_full-instance_method" title="#scan_full (instance method)">#<strong>scan_full</strong>(re, s, f)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#search_full-instance_method" title="#search_full (instance method)">#<strong>search_full</strong>(re, s, f)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature priv first'>
    .<strong>new</strong>(string, fixed_anchor: false)  &#x21d2; <code>string_scanner</code>  <span class="extras">(<span class='priv'>private</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns a new <code>StringScanner</code> object whose [stored <a href="1">string]</a> is the given <a href="#string-instance_method" title="StringScanner#string (method)">#string</a>; sets the [fixed-anchor <a href="10">property]</a>:</p>

<p>“‘rb scanner = <code>new</code>(’foobarbaz’) scanner.string        # =&gt; “foobarbaz” scanner.fixed_anchor? # =&gt; false put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++0">pos:       0</h4>

<h4 id="label-charpos-3A+++0">charpos:   0</h4>

<h4 id="label-rest-3A++++++-22foobarbaz-22">rest:      “foobarbaz”</h4>

<h4 id="label-rest_size-3A+9">rest_size: 9</h4>

<p>“‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L251-L279'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='251' data-end='279'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 251</span></pre>
<pre class='code cpp'>

static VALUE
strscan_initialize(int argc, VALUE *argv, VALUE self)
{
    struct strscanner *p;
    VALUE str, options;

    p = check_strscan(self);
    rb_scan_args(argc, argv, &quot;11&quot;, &amp;str, &amp;options);
    options = rb_check_hash_type(options);
    if (!NIL_P(options)) {
        VALUE fixed_anchor;
        ID keyword_ids[1];
        keyword_ids[0] = rb_intern(&quot;fixed_anchor&quot;);
        rb_get_kwargs(options, keyword_ids, 0, 1, &amp;fixed_anchor);
        if (fixed_anchor == Qundef) {
            p-&gt;fixed_anchor_p = false;
        }
        else {
            p-&gt;fixed_anchor_p = RTEST(fixed_anchor);
        }
    }
    else {
        p-&gt;fixed_anchor_p = false;
    }
    StringValue(str);
    RB_OBJ_WRITE(self, &amp;p-&gt;str, str);

    return self;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="must_C_version-class_method">
  <h3 class='signature nodoc first'>
    .<strong>must_C_version</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L329-L333'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='329' data-end='333'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 329</span></pre>
<pre class='code cpp'>

static VALUE
strscan_s_mustc(VALUE self)
{
    return self;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="beginning_of_line?-instance_method">
  <h3 class='signature ro first'>
    #<strong>beginning_of_line?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns whether the [<a href="2">position]</a> is at the beginning of a line; that is, at the beginning of the [stored <a href="1">string]</a> or immediately after a newline:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>MULTILINE_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>
<span class='comment'># =&gt; &quot;Go placidly amid the noise and haste,\nand remember what peace there may be in silence.\n&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span>                <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan_until'><a href="#scan_until-instance_method" title="StringScanner#scan_until (method)">scan_until</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>,</span><span class='regexp_end'>/</span></span>)    <span class='comment'># =&gt; &quot;Go placidly amid the noise and haste,&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n</span><span class='regexp_end'>/</span></span>)         <span class='comment'># =&gt; &quot;\n&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_concat'><a href="#concat-instance_method" title="StringScanner#concat (method)">concat</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; false</span></code></pre>

<p><code>StringScanner#bol?</code> is an alias for <code>beginning_of_line?</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1487-L1496'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1487' data-end='1496'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1487</span></pre>
<pre class='code cpp'>

static VALUE
strscan_bol_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (CURPTR(p) &gt; S_PEND(p)) return Qnil;
    if (p-&gt;curr == 0) return Qtrue;
    return (*(CURPTR(p) - 1) == &#39;\n&#39;) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="empty?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1536-L1541'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1536' data-end='1541'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1536</span></pre>
<pre class='code cpp'>

static VALUE
strscan_empty_p(VALUE self)
{
    rb_warning(&quot;StringScanner#empty? is obsolete; use #eos? instead&quot;);
    return strscan_eos_p(self);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eos?-instance_method">
  <h3 class='signature ro'>
    #<strong>eos?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns whether the [<a href="2">position]</a> is at the end of the [stored <a href="1">string]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.eos? # =&gt; false pos = 3 scanner.eos? # =&gt; false scanner.terminate scanner.eos? # =&gt; true “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1518-L1525'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1518' data-end='1525'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1518</span></pre>
<pre class='code cpp'>

static VALUE
strscan_eos_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return EOS_P(p) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fixed_anchor?-instance_method">
  <h3 class='signature ro'>
    #<strong>fixed_anchor?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns whether the [fixed-anchor <a href="10">property]</a> is set.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2187-L2193'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2187' data-end='2193'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2187</span></pre>
<pre class='code cpp'>

static VALUE
strscan_fixed_anchor_p(VALUE self)
{
    struct strscanner *p;
    p = check_strscan(self);
    return p-&gt;fixed_anchor_p ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matched-instance_method">
  <h3 class='signature ro'>
    #<strong>matched</strong>  &#x21d2; <code>matched_substring</code><sup>?</sup>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the matched substring from the most recent [<a href="17">match]</a> attempt if it was successful, or <code>nil</code> otherwise; see [Basic Matched <a href="18">Values]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.matched        # =&gt; nil scanner.pos = 3 scanner.match?(/bar/)  # =&gt; 3 scanner.matched        # =&gt; “bar” scanner.match?(/nope/) # =&gt; nil scanner.matched        # =&gt; nil “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1620-L1630'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1620' data-end='1630'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1620</span></pre>
<pre class='code cpp'>

static VALUE
strscan_matched(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[0]),
                         adjust_register_position(p, p-&gt;regs.end[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matched?-instance_method">
  <h3 class='signature ro'>
    #<strong>matched?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns <code>true</code> of the most recent [match <a href="17">attempt]</a> was successful, <code>false</code> otherwise; see [Basic Matched <a href="18">Values]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.matched?       # =&gt; false scanner.pos = 3 scanner.exist?(/baz/)  # =&gt; 6 scanner.matched?       # =&gt; true scanner.exist?(/nope/) # =&gt; nil scanner.matched?       # =&gt; false “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1588-L1595'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1588' data-end='1595'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1588</span></pre>
<pre class='code cpp'>

static VALUE
strscan_matched_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return MATCHED_P(p) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pointer-instance_method">
  <h3 class='signature rw'>
    #<strong>pointer</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="pos-instance_method">
  <h3 class='signature rw'>
    #<strong>pos</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#pointer</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L521-L528'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='521' data-end='528'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 521</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_pos(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return LONG2NUM(p-&gt;curr);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pos=-instance_method">
  <h3 class='signature rw'>
    #<strong>pos=</strong>(v)   <span class="extras">(<span class='rw'>rw</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#pointer=</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L550-L563'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='550' data-end='563'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 550</span></pre>
<pre class='code cpp'>

static VALUE
strscan_set_pos(VALUE self, VALUE v)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    i = NUM2LONG(v);
    if (i &lt; 0) i += S_LEN(p);
    if (i &lt; 0) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    if (i &gt; S_LEN(p)) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    p-&gt;curr = i;
    return LONG2NUM(i);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rest-instance_method">
  <h3 class='signature ro'>
    #<strong>rest</strong>  &#x21d2; <code>target_substring</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the ‘rest’ of the [stored <a href="1">string]</a> (all after the current [<a href="2">position]</a>), which is the [target <a href="3">substring]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.rest # =&gt; “foobarbaz” scanner.pos = 3 scanner.rest # =&gt; “barbaz” scanner.terminate scanner.rest # =&gt; “” “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2008-L2018'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2008' data-end='2018'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2008</span></pre>
<pre class='code cpp'>

static VALUE
strscan_rest(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (EOS_P(p)) {
        return str_new(p, &quot;&quot;, 0);
    }
    return extract_range(p, p-&gt;curr, S_LEN(p));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rest?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>rest?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1557-L1564'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1557' data-end='1564'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1557</span></pre>
<pre class='code cpp'>

static VALUE
strscan_rest_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return EOS_P(p) ? Qfalse : Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="string-instance_method">
  <h3 class='signature rw'>
    #<strong>string</strong>  &#x21d2; <code>stored_string</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the [stored <a href="1">string]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobar’) scanner.string # =&gt; “foobar” scanner.concat(‘baz’) scanner.string # =&gt; “foobarbaz” “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L420-L427'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='420' data-end='427'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 420</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_string(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return p-&gt;str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="string=-instance_method">
  <h3 class='signature rw'>
    #<strong>string=</strong>(other_string)  &#x21d2; <code>other_string</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Replaces the [stored <a href="1">string]</a> with the given <code>other_string</code>:</p>
<ul><li>
<p>Sets both [<a href="11">positions]</a> to zero.</p>
</li><li>
<p>Clears [match <a href="9">values]</a>.</p>
</li><li>
<p>Returns <code>other_string</code>.</p>
</li></ul>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobar’) scanner.scan(/foo/) put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++3">pos:       3</h4>

<h4 id="label-charpos-3A+++3">charpos:   3</h4>

<h4 id="label-rest-3A++++++-22bar-22">rest:      “bar”</h4>

<h4 id="label-rest_size-3A+3">rest_size: 3</h4>

<p>match_values_cleared?(scanner) # =&gt; false</p>

<p>scanner.string = ‘baz’         # =&gt; “baz” put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++0">pos:       0</h4>

<h4 id="label-charpos-3A+++0">charpos:   0</h4>

<h4 id="label-rest-3A++++++-22baz-22">rest:      “baz”</h4>

<h4 id="label-rest_size-3A+3">rest_size: 3</h4>

<p>match_values_cleared?(scanner) # =&gt; true “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L464-L474'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='464' data-end='474'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 464</span></pre>
<pre class='code cpp'>

static VALUE
strscan_set_string(VALUE self, VALUE str)
{
    struct strscanner *p = check_strscan(self);

    StringValue(str);
    RB_OBJ_WRITE(self, &amp;p-&gt;str, str);
    p-&gt;curr = 0;
    CLEAR_MATCH_STATUS(p);
    return str;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(more_string)  &#x21d2; <code>self</code>     <span class='aliases'>Also known as: <span class='names'>#concat</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>
<ul><li>
<p>Appends the given <code>more_string</code> to the [stored <a href="1">string]</a>.</p>
</li><li>
<p>Returns <code>self</code>.</p>
</li><li>
<p>Does not affect the [<a href="11">positions]</a> or [match <a href="9">values]</a>.</p>
</li></ul>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foo’) scanner.string           # =&gt; “foo” scanner.terminate scanner.concat(‘barbaz’) # =&gt; #&lt;StringScanner 3/9 “foo” @ “barba…”&gt; scanner.string           # =&gt; “foobarbaz” put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++3">pos:       3</h4>

<h4 id="label-charpos-3A+++3">charpos:   3</h4>

<h4 id="label-rest-3A++++++-22barbaz-22">rest:      “barbaz”</h4>

<h4 id="label-rest_size-3A+6">rest_size: 6</h4>

<p>“‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L505-L514'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='505' data-end='514'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 505</span></pre>
<pre class='code cpp'>

static VALUE
strscan_concat(VALUE self, VALUE str)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    StringValue(str);
    rb_str_append(p-&gt;str, str);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="[]-instance_method">
  <h3 class='signature '>
    #<strong>[]</strong>(specifier)  &#x21d2; <code>substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns a captured substring or <code>nil</code>; see [Captured Match <a href="13">Values]</a>.</p>

<p>When there are captures:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’Fri Dec 12 1975 14:39’) scanner.scan(/(?&lt;wday&gt;w+) (?&lt;month&gt;w+) (?&lt;day&gt;d+) /) “‘</p>
<ul><li>
<p><code>specifier</code> zero: returns the entire matched substring:</p>

<pre class="code ruby"><code class="ruby"><span class='backtick'>`</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_content'>rb
scanner[0]         # =&gt; &quot;Fri Dec 12 &quot;
scanner.pre_match  # =&gt; &quot;&quot;
scanner.post_match # =&gt; &quot;1975 14:39&quot;
</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_end'>`</span></span></code></pre>
</li><li>
<p><code>specifier</code> positive integer. returns the ‘n`th capture, or <code>nil</code> if out of range:</p>

<pre class="code ruby"><code class="ruby"><span class='backtick'>`</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_content'>rb
scanner[1] # =&gt; &quot;Fri&quot;
scanner[2] # =&gt; &quot;Dec&quot;
scanner[3] # =&gt; &quot;12&quot;
scanner[4] # =&gt; nil
</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_end'>`</span></span></code></pre>
</li><li>
<p><code>specifier</code> negative integer. counts backward from the last subgroup:</p>

<pre class="code ruby"><code class="ruby"><span class='backtick'>`</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_content'>rb
scanner[-1] # =&gt; &quot;12&quot;
scanner[-4] # =&gt; &quot;Fri Dec 12 &quot;
scanner[-5] # =&gt; nil
</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_end'>`</span></span></code></pre>
</li><li>
<p><code>specifier</code> symbol or string. returns the named subgroup, or <code>nil</code> if no such:</p>

<pre class="code ruby"><code class="ruby"><span class='backtick'>`</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_content'>rb
scanner[:wday]  # =&gt; &quot;Fri&quot;
scanner[&#39;wday&#39;] # =&gt; &quot;Fri&quot;
scanner[:month] # =&gt; &quot;Dec&quot;
scanner[:day]   # =&gt; &quot;12&quot;
scanner[:nope]  # =&gt; nil
</span><span class='tstring_end'>`</span></span><span class='backtick'>`</span><span class='tstring_end'>`</span></span></code></pre>
</li></ul>

<p>When there are no captures, only <code>[0]</code> returns non-‘nil`:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.exist?(/bar/) <a href="0">scanner</a> # =&gt; “bar” <a href="1">scanner</a> # =&gt; nil “‘</p>

<p>For a failed match, even <code>[0]</code> returns <code>nil</code>:</p>

<p>“‘rb scanner.scan(/nope/) # =&gt; nil <a href="0">scanner</a>           # =&gt; nil <a href="1">scanner</a>           # =&gt; nil “`</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1754-L1785'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1754' data-end='1785'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1754</span></pre>
<pre class='code cpp'>

static VALUE
strscan_aref(VALUE self, VALUE idx)
{
    const char *name;
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;

    switch (TYPE(idx)) {
        case T_SYMBOL:
            idx = rb_sym2str(idx);
            /* fall through */
        case T_STRING:
            RSTRING_GETMEM(idx, name, i);
            i = name_to_backref_number(&amp;(p-&gt;regs), p-&gt;regex, name, name + i, rb_enc_get(idx));
            break;
        default:
            i = NUM2LONG(idx);
    }

    if (i &lt; 0)
        i += p-&gt;regs.num_regs;
    if (i &lt; 0)                 return Qnil;
    if (i &gt;= p-&gt;regs.num_regs) return Qnil;
    if (p-&gt;regs.beg[i] == -1)  return Qnil;

    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[i]),
                         adjust_register_position(p, p-&gt;regs.end[i]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="captures-instance_method">
  <h3 class='signature '>
    #<strong>captures</strong>  &#x21d2; <code>substring_array</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the array of [captured match <a href="13">values]</a> at indexes <code>(1..)</code> if the most recent match attempt succeeded, or <code>nil</code> otherwise:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’Fri Dec 12 1975 14:39’) scanner.captures         # =&gt; nil</p>

<p>scanner.exist?(/(?&lt;wday&gt;w+) (?&lt;month&gt;w+) (?&lt;day&gt;d+) /) scanner.captures         # =&gt; [“Fri”, “Dec”, “12”] scanner.values_at(*0..4) # =&gt; [“Fri Dec 12 ”, “Fri”, “Dec”, “12”, nil]</p>

<p>scanner.exist?(/Fri/) scanner.captures         # =&gt; []</p>

<p>scanner.scan(/nope/) scanner.captures         # =&gt; nil “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1847-L1872'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1847' data-end='1872'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1847</span></pre>
<pre class='code cpp'>

static VALUE
strscan_captures(VALUE self)
{
    struct strscanner *p;
    int   i, num_regs;
    VALUE new_ary;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;

    num_regs = p-&gt;regs.num_regs;
    new_ary  = rb_ary_new2(num_regs);

    for (i = 1; i &lt; num_regs; i++) {
        VALUE str;
        if (p-&gt;regs.beg[i] == -1)
            str = Qnil;
        else
            str = extract_range(p,
                                adjust_register_position(p, p-&gt;regs.beg[i]),
                                adjust_register_position(p, p-&gt;regs.end[i]));
        rb_ary_push(new_ary, str);
    }

    return new_ary;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="charpos-instance_method">
  <h3 class='signature '>
    #<strong>charpos</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L535-L543'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='535' data-end='543'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 535</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_charpos(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);

    return LONG2NUM(rb_enc_strlen(S_PBEG(p), CURPTR(p), rb_enc_get(p-&gt;str)));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check-instance_method">
  <h3 class='signature '>
    #<strong>check</strong>(pattern)  &#x21d2; <code>matched_substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Attempts to [<a href="17">match]</a> the given <code>pattern</code> at the beginning of the [target <a href="3">substring]</a>; does not modify the [<a href="11">positions]</a>.</p>

<p>If the match succeeds:</p>
<ul><li>
<p>Returns the matched substring.</p>
</li><li>
<p>Sets all [match <a href="9">values]</a>.</p>
</li></ul>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.pos = 3 scanner.check(‘bar’) # =&gt; “bar” put_match_values(scanner)</p>

<h4 id="label-Basic+match+values-3A">Basic match values:</h4>

<h4 id="label-matched-3F-3A+++++++true">matched?:       true</h4>

<h4 id="label-matched_size-3A+++3">matched_size:   3</h4>

<h4 id="label-pre_match-3A++++++-22foo-22">pre_match:      “foo”</h4>

<h4 id="label-matched++-3A++++++-22bar-22">matched  :      “bar”</h4>

<h4 id="label-post_match-3A+++++-22baz-22">post_match:     “baz”</h4>

<h4 id="label-Captured+match+values-3A">Captured match values:</h4>

<h4 id="label-size-3A+++++++++++1">size:           1</h4>

<h4 id="label-captures-3A+++++++-5B-5D">captures:       []</h4>

<h4 id="label-named_captures-3A+-7B-7D">named_captures: {}</h4>

<h4 id="label-values_at-3A++++++-5B-22bar-22-2C+nil-5D">values_at:      [“bar”, nil]</h4>

<h4 id="label-5B-5D-3A">[]:</h4>

<h4 id="label-5B0-5D-3A++++++++++-22bar-22">[0]:          “bar”</h4>

<h4 id="label-5B1-5D-3A++++++++++nil">[1]:          nil</h4>

<h4 id="label-3D-3E+0..1">=&gt; 0..1</h4>

<p>put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++3">pos:       3</h4>

<h4 id="label-charpos-3A+++3">charpos:   3</h4>

<h4 id="label-rest-3A++++++-22barbaz-22">rest:      “barbaz”</h4>

<h4 id="label-rest_size-3A+6">rest_size: 6</h4>

<p>“‘</p>

<p>If the match fails:</p>
<ul><li>
<p>Returns <code>nil</code>.</p>
</li><li>
<p>Clears all [match <a href="9">values]</a>.</p>
</li></ul>

<p>“‘rb scanner.check(/nope/)          # =&gt; nil match_values_cleared?(scanner) # =&gt; true “`</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L908-L912'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='908' data-end='912'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 908</span></pre>
<pre class='code cpp'>

static VALUE
strscan_check(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 1, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_until-instance_method">
  <h3 class='signature '>
    #<strong>check_until</strong>(pattern)  &#x21d2; <code>substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Attempts to [<a href="17">match]</a> the given <code>pattern</code> anywhere (at any [<a href="2">position]</a>) in the [target <a href="3">substring]</a>; does not modify the [<a href="11">positions]</a>.</p>

<p>If the match succeeds:</p>
<ul><li>
<p>Sets all [match <a href="9">values]</a>.</p>
</li><li>
<p>Returns the matched substring, which extends from the current [<a href="2">position]</a> to the end of the matched substring.</p>
</li></ul>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbazbatbam’) scanner.pos = 6 scanner.check_until(/bat/) # =&gt; “bazbat” put_match_values(scanner)</p>

<h4 id="label-Basic+match+values-3A">Basic match values:</h4>

<h4 id="label-matched-3F-3A+++++++true">matched?:       true</h4>

<h4 id="label-matched_size-3A+++3">matched_size:   3</h4>

<h4 id="label-pre_match-3A++++++-22foobarbaz-22">pre_match:      “foobarbaz”</h4>

<h4 id="label-matched++-3A++++++-22bat-22">matched  :      “bat”</h4>

<h4 id="label-post_match-3A+++++-22bam-22">post_match:     “bam”</h4>

<h4 id="label-Captured+match+values-3A">Captured match values:</h4>

<h4 id="label-size-3A+++++++++++1">size:           1</h4>

<h4 id="label-captures-3A+++++++-5B-5D">captures:       []</h4>

<h4 id="label-named_captures-3A+-7B-7D">named_captures: {}</h4>

<h4 id="label-values_at-3A++++++-5B-22bat-22-2C+nil-5D">values_at:      [“bat”, nil]</h4>

<h4 id="label-5B-5D-3A">[]:</h4>

<h4 id="label-5B0-5D-3A++++++++++-22bat-22">[0]:          “bat”</h4>

<h4 id="label-5B1-5D-3A++++++++++nil">[1]:          nil</h4>

<p>put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++6">pos:       6</h4>

<h4 id="label-charpos-3A+++6">charpos:   6</h4>

<h4 id="label-rest-3A++++++-22bazbatbam-22">rest:      “bazbatbam”</h4>

<h4 id="label-rest_size-3A+9">rest_size: 9</h4>

<p>“‘</p>

<p>If the match fails:</p>
<ul><li>
<p>Clears all [match <a href="9">values]</a>.</p>
</li><li>
<p>Returns <code>nil</code>.</p>
</li></ul>

<p>“‘rb scanner.check_until(/nope/)    # =&gt; nil match_values_cleared?(scanner) # =&gt; true “`</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1081-L1085'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1081' data-end='1085'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1081</span></pre>
<pre class='code cpp'>

static VALUE
strscan_check_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 1, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear-instance_method">
  <h3 class='signature nodoc'>
    #<strong>clear</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L396-L401'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='396' data-end='401'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 396</span></pre>
<pre class='code cpp'>

static VALUE
strscan_clear(VALUE self)
{
    rb_warning(&quot;StringScanner#clear is obsolete; use #terminate instead&quot;);
    return strscan_terminate(self);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="concat-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>&lt;&lt;</strong>(more_string)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>concat</strong>(more_string)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#<<-instance_method" title="StringScanner#&lt;&lt; (method)">#&lt;&lt;</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="exist?-instance_method">
  <h3 class='signature '>
    #<strong>exist?</strong>(pattern)  &#x21d2; <code>byte_offset</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Attempts to [<a href="17">match]</a> the given <code>pattern</code> anywhere (at any [<a href="2">position]</a>) n the [target <a href="3">substring]</a>; does not modify the [<a href="11">positions]</a>.</p>

<p>If the match succeeds:</p>
<ul><li>
<p>Returns a byte offset: the distance in bytes between the current [<a href="2">position]</a> and the end of the matched substring.</p>
</li><li>
<p>Sets all [match <a href="9">values]</a>.</p>
</li></ul>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbazbatbam’) scanner.pos = 6 scanner.exist?(/bat/) # =&gt; 6 put_match_values(scanner)</p>

<h4 id="label-Basic+match+values-3A">Basic match values:</h4>

<h4 id="label-matched-3F-3A+++++++true">matched?:       true</h4>

<h4 id="label-matched_size-3A+++3">matched_size:   3</h4>

<h4 id="label-pre_match-3A++++++-22foobarbaz-22">pre_match:      “foobarbaz”</h4>

<h4 id="label-matched++-3A++++++-22bat-22">matched  :      “bat”</h4>

<h4 id="label-post_match-3A+++++-22bam-22">post_match:     “bam”</h4>

<h4 id="label-Captured+match+values-3A">Captured match values:</h4>

<h4 id="label-size-3A+++++++++++1">size:           1</h4>

<h4 id="label-captures-3A+++++++-5B-5D">captures:       []</h4>

<h4 id="label-named_captures-3A+-7B-7D">named_captures: {}</h4>

<h4 id="label-values_at-3A++++++-5B-22bat-22-2C+nil-5D">values_at:      [“bat”, nil]</h4>

<h4 id="label-5B-5D-3A">[]:</h4>

<h4 id="label-5B0-5D-3A++++++++++-22bat-22">[0]:          “bat”</h4>

<h4 id="label-5B1-5D-3A++++++++++nil">[1]:          nil</h4>

<p>put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++6">pos:       6</h4>

<h4 id="label-charpos-3A+++6">charpos:   6</h4>

<h4 id="label-rest-3A++++++-22bazbatbam-22">rest:      “bazbatbam”</h4>

<h4 id="label-rest_size-3A+9">rest_size: 9</h4>

<p>“‘</p>

<p>If the match fails:</p>
<ul><li>
<p>Returns <code>nil</code>.</p>
</li><li>
<p>Clears all [match <a href="9">values]</a>.</p>
</li></ul>

<p>“‘rb scanner.exist?(/nope/)         # =&gt; nil match_values_cleared?(scanner) # =&gt; true “`</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1007-L1011'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1007' data-end='1011'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1007</span></pre>
<pre class='code cpp'>

static VALUE
strscan_exist_p(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 0, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_byte-instance_method">
  <h3 class='signature '>
    #<strong>get_byte</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1202-L1219'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1202' data-end='1219'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1202</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_byte(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    p-&gt;prev = p-&gt;curr;
    p-&gt;curr++;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[0]),
                         adjust_register_position(p, p-&gt;regs.end[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getbyte-instance_method">
  <h3 class='signature nodoc'>
    #<strong>getbyte</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1230-L1235'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1230' data-end='1235'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1230</span></pre>
<pre class='code cpp'>

static VALUE
strscan_getbyte(VALUE self)
{
    rb_warning(&quot;StringScanner#getbyte is obsolete; use #get_byte instead&quot;);
    return strscan_get_byte(self);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getch-instance_method">
  <h3 class='signature '>
    #<strong>getch</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1129-L1149'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1129' data-end='1149'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1129</span></pre>
<pre class='code cpp'>

static VALUE
strscan_getch(VALUE self)
{
    struct strscanner *p;
    long len;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    len = rb_enc_mbclen(CURPTR(p), S_PEND(p), rb_enc_get(p-&gt;str));
    len = minl(len, S_RESTLEN(p));
    p-&gt;prev = p-&gt;curr;
    p-&gt;curr += len;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[0]),
                         adjust_register_position(p, p-&gt;regs.end[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_copy-instance_method">
  <h3 class='signature priv'>
    #<strong>dup</strong>  &#x21d2; <code>shallow_copy</code>  <span class="extras">(<span class='priv'>private</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns a shallow copy of <code>self</code>; the [stored <a href="1">string]</a> in the copy is the same string as in <code>self</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L297-L315'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='297' data-end='315'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 297</span></pre>
<pre class='code cpp'>

static VALUE
strscan_init_copy(VALUE vself, VALUE vorig)
{
    struct strscanner *self, *orig;

    self = check_strscan(vself);
    orig = check_strscan(vorig);
    if (self != orig) {
	self-&gt;flags = orig-&gt;flags;
	RB_OBJ_WRITE(vself, &amp;self-&gt;str, orig-&gt;str);
	self-&gt;prev = orig-&gt;prev;
	self-&gt;curr = orig-&gt;curr;
	if (rb_reg_region_copy(&amp;self-&gt;regs, &amp;orig-&gt;regs))
	    rb_memerror();
	RB_GC_GUARD(vorig);
    }

    return vself;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns a string representation of <code>self</code> that may show:</p>
<ol><li>
<p>The current [<a href="2">position]</a>.</p>
</li><li>
<p>The size (in bytes) of the [stored <a href="1">string]</a>.</p>
</li><li>
<p>The substring preceding the current position.</p>
</li><li>
<p>The substring following the current position (which is also the [target <a href="3">substring]</a>).</p>
</li></ol>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(“Fri Dec 12 1975 14:39”) scanner.pos = 11 scanner.inspect # =&gt; “#&lt;StringScanner 11/21 &quot;…c 12 &quot; @ &quot;1975 …&quot;&gt;” “`</p>

<p>If at beginning-of-string, item 4 above (following substring) is omitted:</p>

<p>“‘rb scanner.reset scanner.inspect # =&gt; “#&lt;StringScanner 0/21 @ &quot;Fri D…&quot;&gt;” “`</p>

<p>If at end-of-string, all items above are omitted:</p>

<p>“‘rb scanner.terminate scanner.inspect # =&gt; “#&lt;StringScanner fin&gt;” “`</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2109-L2139'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2109' data-end='2139'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2109</span></pre>
<pre class='code cpp'>

static VALUE
strscan_inspect(VALUE self)
{
    struct strscanner *p;
    VALUE a, b;

    p = check_strscan(self);
    if (NIL_P(p-&gt;str)) {
	a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; (uninitialized)&gt;&quot;, rb_obj_class(self));
	return a;
    }
    if (EOS_P(p)) {
	a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; fin&gt;&quot;, rb_obj_class(self));
	return a;
    }
    if (p-&gt;curr == 0) {
	b = inspect2(p);
	a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; %ld/%ld @ %&quot;PRIsVALUE&quot;&gt;&quot;,
		       rb_obj_class(self),
		       p-&gt;curr, S_LEN(p),
		       b);
	return a;
    }
    a = inspect1(p);
    b = inspect2(p);
    a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; %ld/%ld %&quot;PRIsVALUE&quot; @ %&quot;PRIsVALUE&quot;&gt;&quot;,
		   rb_obj_class(self),
		   p-&gt;curr, S_LEN(p),
		   a, b);
    return a;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match?-instance_method">
  <h3 class='signature '>
    #<strong>match?</strong>(pattern)  &#x21d2; <code>updated_position</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Attempts to [<a href="17">match]</a> the given <code>pattern</code> at the beginning of the [target <a href="3">substring]</a>; does not modify the [<a href="11">positions]</a>.</p>

<p>If the match succeeds:</p>
<ul><li>
<p>Sets [match <a href="9">values]</a>.</p>
</li><li>
<p>Returns the size in bytes of the matched substring.</p>
</li></ul>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.pos = 3 scanner.match?(/bar/) =&gt; 3 put_match_values(scanner)</p>

<h4 id="label-Basic+match+values-3A">Basic match values:</h4>

<h4 id="label-matched-3F-3A+++++++true">matched?:       true</h4>

<h4 id="label-matched_size-3A+++3">matched_size:   3</h4>

<h4 id="label-pre_match-3A++++++-22foo-22">pre_match:      “foo”</h4>

<h4 id="label-matched++-3A++++++-22bar-22">matched  :      “bar”</h4>

<h4 id="label-post_match-3A+++++-22baz-22">post_match:     “baz”</h4>

<h4 id="label-Captured+match+values-3A">Captured match values:</h4>

<h4 id="label-size-3A+++++++++++1">size:           1</h4>

<h4 id="label-captures-3A+++++++-5B-5D">captures:       []</h4>

<h4 id="label-named_captures-3A+-7B-7D">named_captures: {}</h4>

<h4 id="label-values_at-3A++++++-5B-22bar-22-2C+nil-5D">values_at:      [“bar”, nil]</h4>

<h4 id="label-5B-5D-3A">[]:</h4>

<h4 id="label-5B0-5D-3A++++++++++-22bar-22">[0]:          “bar”</h4>

<h4 id="label-5B1-5D-3A++++++++++nil">[1]:          nil</h4>

<p>put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++3">pos:       3</h4>

<h4 id="label-charpos-3A+++3">charpos:   3</h4>

<h4 id="label-rest-3A++++++-22barbaz-22">rest:      “barbaz”</h4>

<h4 id="label-rest_size-3A+6">rest_size: 6</h4>

<p>“‘</p>

<p>If the match fails:</p>
<ul><li>
<p>Clears match values.</p>
</li><li>
<p>Returns <code>nil</code>.</p>
</li><li>
<p>Does not increment positions.</p>
</li></ul>

<p>“‘rb scanner.match?(/nope/)         # =&gt; nil match_values_cleared?(scanner) # =&gt; true “`</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L836-L840'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='836' data-end='840'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 836</span></pre>
<pre class='code cpp'>

static VALUE
strscan_match_p(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 0, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matched_size-instance_method">
  <h3 class='signature '>
    #<strong>matched_size</strong>  &#x21d2; <code>substring_size</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the size (in bytes) of the matched substring from the most recent match [match <a href="17">attempt]</a> if it was successful, or <code>nil</code> otherwise; see [Basic Matched <a href="18">Values]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.matched_size   # =&gt; nil</p>

<p>pos = 3 scanner.exist?(/baz/)  # =&gt; 9 scanner.matched_size   # =&gt; 3</p>

<p>scanner.exist?(/nope/) # =&gt; nil scanner.matched_size   # =&gt; nil “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1657-L1665'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1657' data-end='1665'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1657</span></pre>
<pre class='code cpp'>

static VALUE
strscan_matched_size(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return LONG2NUM(p-&gt;regs.end[0] - p-&gt;regs.beg[0]);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="named_captures-instance_method">
  <h3 class='signature '>
    #<strong>named_captures</strong>  &#x21d2; <code>Hash</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the array of captured match values at indexes (1..) if the most recent match attempt succeeded, or nil otherwise; see [Captured Match <a href="13">Values]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’Fri Dec 12 1975 14:39’) scanner.named_captures # =&gt; {}</p>

<p>pattern = /(?&lt;wday&gt;w+) (?&lt;month&gt;w+) (?&lt;day&gt;d+) / scanner.match?(pattern) scanner.named_captures # =&gt; <code>“month”=&gt;“Dec”, “day”=&gt;“12”</code></p>

<p>scanner.string = ‘nope’ scanner.match?(pattern) scanner.named_captures # =&gt; <code>“month”=&gt;nil, “day”=&gt;nil</code></p>

<p>scanner.match?(/nosuch/) scanner.named_captures # =&gt; {} “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2251-L2264'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2251' data-end='2264'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2251</span></pre>
<pre class='code cpp'>

static VALUE
strscan_named_captures(VALUE self)
{
    struct strscanner *p;
    named_captures_data data;
    GET_SCANNER(self, p);
    data.self = self;
    data.captures = rb_hash_new();
    if (!RB_NIL_P(p-&gt;regex)) {
        onig_foreach_name(RREGEXP_PTR(p-&gt;regex), named_captures_iter, &amp;data);
    }

    return data.captures;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="peek-instance_method">
  <h3 class='signature '>
    #<strong>peek</strong>(length)  &#x21d2; <code>substring</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the substring ‘string[pos, length]`; does not update [match <a href="9">values]</a> or [<a href="11">positions]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.pos = 3 scanner.peek(3)   # =&gt; “bar” scanner.terminate scanner.peek(3)   # =&gt; “” “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1256-L1270'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1256' data-end='1270'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1256</span></pre>
<pre class='code cpp'>

static VALUE
strscan_peek(VALUE self, VALUE vlen)
{
    struct strscanner *p;
    long len;

    GET_SCANNER(self, p);

    len = NUM2LONG(vlen);
    if (EOS_P(p))
        return str_new(p, &quot;&quot;, 0);

    len = minl(len, S_RESTLEN(p));
    return extract_beg_len(p, p-&gt;curr, len);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="peek_byte-instance_method">
  <h3 class='signature '>
    #<strong>peek_byte</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Peeks at the current byte and returns it as an integer.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_peek_byte'>peek_byte</span>         <span class='comment'># =&gt; 97</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1185-L1195'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1185' data-end='1195'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1185</span></pre>
<pre class='code cpp'>

static VALUE
strscan_peek_byte(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (EOS_P(p))
        return Qnil;

    return INT2FIX((unsigned char)*CURPTR(p));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="peep-instance_method">
  <h3 class='signature nodoc'>
    #<strong>peep</strong>(vlen)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1281-L1286'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1281' data-end='1286'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1281</span></pre>
<pre class='code cpp'>

static VALUE
strscan_peep(VALUE self, VALUE vlen)
{
    rb_warning(&quot;StringScanner#peep is obsolete; use #peek instead&quot;);
    return strscan_peek(self, vlen);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="post_match-instance_method">
  <h3 class='signature '>
    #<strong>post_match</strong>  &#x21d2; <code>substring</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the substring that follows the matched substring from the most recent match attempt if it was successful, or <code>nil</code> otherwise; see [Basic Match <a href="18">Values]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.post_match     # =&gt; nil</p>

<p>scanner.pos = 3 scanner.match?(/bar/)  # =&gt; 3 scanner.post_match     # =&gt; “baz”</p>

<p>scanner.match?(/nope/) # =&gt; nil scanner.post_match     # =&gt; nil “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1976-L1986'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1976' data-end='1986'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1976</span></pre>
<pre class='code cpp'>

static VALUE
strscan_post_match(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.end[0]),
                         S_LEN(p));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pre_match-instance_method">
  <h3 class='signature '>
    #<strong>pre_match</strong>  &#x21d2; <code>substring</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the substring that precedes the matched substring from the most recent match attempt if it was successful, or <code>nil</code> otherwise; see [Basic Match <a href="18">Values]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.pre_match      # =&gt; nil</p>

<p>scanner.pos = 3 scanner.exist?(/baz/)  # =&gt; 6 scanner.pre_match      # =&gt; “foobar” # Substring of entire string, not just target string.</p>

<p>scanner.exist?(/nope/) # =&gt; nil scanner.pre_match      # =&gt; nil “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1939-L1949'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1939' data-end='1949'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1939</span></pre>
<pre class='code cpp'>

static VALUE
strscan_pre_match(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p,
                         0,
                         adjust_register_position(p, p-&gt;regs.beg[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset-instance_method">
  <h3 class='signature '>
    #<strong>reset</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Sets both [byte <a href="2">position]</a> and [character <a href="7">position]</a> to zero, and clears [match <a href="9">values]</a>; returns <code>self</code>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.exist?(/bar/)          # =&gt; 6 scanner.reset                  # =&gt; #&lt;StringScanner 0/9 @ “fooba…”&gt; put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++0">pos:       0</h4>

<h4 id="label-charpos-3A+++0">charpos:   0</h4>

<h4 id="label-rest-3A++++++-22foobarbaz-22">rest:      “foobarbaz”</h4>

<h4 id="label-rest_size-3A+9">rest_size: 9</h4>

<h4 id="label-3D-3E+nil">=&gt; nil</h4>

<p>match_values_cleared?(scanner) # =&gt; true “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L361-L370'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='361' data-end='370'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 361</span></pre>
<pre class='code cpp'>

static VALUE
strscan_reset(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    p-&gt;curr = 0;
    CLEAR_MATCH_STATUS(p);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rest_size-instance_method">
  <h3 class='signature '>
    #<strong>rest_size</strong>  &#x21d2; <code>Integer</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the size (in bytes) of the <a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a> of the [stored <a href="1">string]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.rest      # =&gt; “foobarbaz” scanner.rest_size # =&gt; 9 scanner.pos = 3 scanner.rest      # =&gt; “barbaz” scanner.rest_size # =&gt; 6 scanner.terminate scanner.rest      # =&gt; “” scanner.rest_size # =&gt; 0 “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2042-L2054'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2042' data-end='2054'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2042</span></pre>
<pre class='code cpp'>

static VALUE
strscan_rest_size(VALUE self)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    if (EOS_P(p)) {
        return INT2FIX(0);
    }
    i = S_RESTLEN(p);
    return INT2FIX(i);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="restsize-instance_method">
  <h3 class='signature nodoc'>
    #<strong>restsize</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L2065-L2070'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2065' data-end='2070'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2065</span></pre>
<pre class='code cpp'>

static VALUE
strscan_restsize(VALUE self)
{
    rb_warning(&quot;StringScanner#restsize is obsolete; use #rest_size instead&quot;);
    return strscan_rest_size(self);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan-instance_method">
  <h3 class='signature '>
    #<strong>scan</strong>(re)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L774-L778'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='774' data-end='778'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 774</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 1, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_base10_integer-instance_method">
  <h3 class='signature priv'>
    #<strong>scan_base10_integer</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1325-L1360'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1325' data-end='1360'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1325</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_base10_integer(VALUE self)
{
    char *ptr;
    long len = 0;
    struct strscanner *p;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);

    strscan_must_ascii_compat(p-&gt;str);

    ptr = CURPTR(p);

    long remaining_len = S_RESTLEN(p);

    if (remaining_len &lt;= 0) {
        return Qnil;
    }

    if (ptr[len] == &#39;-&#39; || ptr[len] == &#39;+&#39;) {
        len++;
    }

    if (!rb_isdigit(ptr[len])) {
        return Qnil;
    }

    p-&gt;prev = p-&gt;curr;

    while (len &lt; remaining_len &amp;&amp; rb_isdigit(ptr[len])) {
        len++;
    }

    return strscan_parse_integer(p, 10, len);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_base16_integer-instance_method">
  <h3 class='signature priv'>
    #<strong>scan_base16_integer</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1362-L1401'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1362' data-end='1401'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1362</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_base16_integer(VALUE self)
{
    char *ptr;
    long len = 0;
    struct strscanner *p;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);

    strscan_must_ascii_compat(p-&gt;str);

    ptr = CURPTR(p);

    long remaining_len = S_RESTLEN(p);

    if (remaining_len &lt;= 0) {
        return Qnil;
    }

    if (ptr[len] == &#39;-&#39; || ptr[len] == &#39;+&#39;) {
        len++;
    }

    if ((remaining_len &gt;= (len + 3)) &amp;&amp; ptr[len] == &#39;0&#39; &amp;&amp; ptr[len + 1] == &#39;x&#39; &amp;&amp; rb_isxdigit(ptr[len + 2])) {
        len += 2;
    }

    if (len &gt;= remaining_len || !rb_isxdigit(ptr[len])) {
        return Qnil;
    }

    p-&gt;prev = p-&gt;curr;

    while (len &lt; remaining_len &amp;&amp; rb_isxdigit(ptr[len])) {
        len++;
    }

    return strscan_parse_integer(p, 16, len);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_byte-instance_method">
  <h3 class='signature '>
    #<strong>scan_byte</strong>  &#x21d2; <code>integer_byte</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Scans one byte and returns it as an integer. This method is not multibyte character sensitive. See also: <a href="#getch-instance_method" title="StringScanner#getch (method)">#getch</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1160-L1177'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1160' data-end='1177'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1160</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_byte(VALUE self)
{
    struct strscanner *p;
    VALUE byte;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    byte = INT2FIX((unsigned char)*CURPTR(p));
    p-&gt;prev = p-&gt;curr;
    p-&gt;curr++;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return byte;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_full-instance_method">
  <h3 class='signature nodoc'>
    #<strong>scan_full</strong>(re, s, f)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L933-L937'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='933' data-end='937'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 933</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_full(VALUE self, VALUE re, VALUE s, VALUE f)
{
    return strscan_do_scan(self, re, RTEST(s), RTEST(f), 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_integer-instance_method">
  <h3 class='signature '>
    #<strong>scan_integer</strong>(base: 10)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If <code>base</code> isn’t provided or is <code>10</code>, then it is equivalent to calling <a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a> with a <code>[+-]?d+</code> pattern, and returns an Integer or nil.</p>

<p>If <code>base</code> is <code>16</code>, then it is equivalent to calling <a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a> with a <code>[+-]?(0x)?[0-9a-fA-F]+</code> pattern, and returns an Integer or nil.</p>

<p>The scanned string must be encoded with an ASCII compatible encoding, otherwise <code>Encoding::CompatibilityError</code> will be raised.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/lib/strscan/strscan.rb#L15-L24'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='15' data-end='24'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/lib/strscan/strscan.rb', line 15</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_scan_integer'>scan_integer</span>(<span class='label'>base:</span> <span class='int'>10</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_base'>base</span>
  <span class='kw'>when</span> <span class='int'>10</span>
    <span class='id identifier rubyid_scan_base10_integer'><a href="#scan_base10_integer-instance_method" title="StringScanner#scan_base10_integer (method)">scan_base10_integer</a></span>
  <span class='kw'>when</span> <span class='int'>16</span>
    <span class='id identifier rubyid_scan_base16_integer'><a href="#scan_base16_integer-instance_method" title="StringScanner#scan_base16_integer (method)">scan_base16_integer</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unsupported integer base: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="StringScanner#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>, expected 10 or 16</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_until-instance_method">
  <h3 class='signature '>
    #<strong>scan_until</strong>(re)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L944-L948'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='944' data-end='948'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 944</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 1, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="search_full-instance_method">
  <h3 class='signature nodoc'>
    #<strong>search_full</strong>(re, s, f)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1106-L1110'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1106' data-end='1110'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1106</span></pre>
<pre class='code cpp'>

static VALUE
strscan_search_full(VALUE self, VALUE re, VALUE s, VALUE f)
{
    return strscan_do_scan(self, re, RTEST(s), RTEST(f), 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="size-instance_method">
  <h3 class='signature '>
    #<strong>size</strong>  &#x21d2; <code>captures_count</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns the count of captures if the most recent match attempt succeeded, <code>nil</code> otherwise; see [Captures Match <a href="13">Values]</a>:</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’Fri Dec 12 1975 14:39’) scanner.size                        # =&gt; nil</p>

<p>pattern = /(?&lt;wday&gt;w+) (?&lt;month&gt;w+) (?&lt;day&gt;d+) / scanner.match?(pattern) scanner.values_at(*0..scanner.size) # =&gt; [“Fri Dec 12 ”, “Fri”, “Dec”, “12”, nil] scanner.size                        # =&gt; 4</p>

<p>scanner.match?(/nope/)              # =&gt; nil scanner.size                        # =&gt; nil “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1811-L1819'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1811' data-end='1819'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1811</span></pre>
<pre class='code cpp'>

static VALUE
strscan_size(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;
    return INT2FIX(p-&gt;regs.num_regs);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="skip-instance_method">
  <h3 class='signature '>
    #<strong>skip</strong>(re)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L847-L851'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='847' data-end='851'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 847</span></pre>
<pre class='code cpp'>

static VALUE
strscan_skip(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 0, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="skip_until-instance_method">
  <h3 class='signature '>
    #<strong>skip_until</strong>(re)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1018-L1022'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1018' data-end='1022'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1018</span></pre>
<pre class='code cpp'>

static VALUE
strscan_skip_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 0, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="terminate-instance_method">
  <h3 class='signature '>
    #<strong>terminate</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown  </p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L377-L386'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='377' data-end='386'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 377</span></pre>
<pre class='code cpp'>

static VALUE
strscan_terminate(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    p-&gt;curr = S_LEN(p);
    CLEAR_MATCH_STATUS(p);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unscan-instance_method">
  <h3 class='signature '>
    #<strong>unscan</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Sets the [<a href="2">position]</a> to its value previous to the recent successful</p>
<dl class="rdoc-list label-list"><dt>match][17</dt>
<dd>
<p>attempt:</p>
</dd></dl>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’foobarbaz’) scanner.scan(/foo/) put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++3">pos:       3</h4>

<h4 id="label-charpos-3A+++3">charpos:   3</h4>

<h4 id="label-rest-3A++++++-22barbaz-22">rest:      “barbaz”</h4>

<h4 id="label-rest_size-3A+6">rest_size: 6</h4>

<p>scanner.unscan</p>

<h4 id="label-3D-3E+-23-3CStringScanner+0-2F9+-40+-22fooba...-22-3E">=&gt; #&lt;StringScanner 0/9 @ “fooba…”&gt;</h4>

<p>put_situation(scanner)</p>

<h4 id="label-Situation-3A">Situation:</h4>

<h4 id="label-pos-3A+++++++0">pos:       0</h4>

<h4 id="label-charpos-3A+++0">charpos:   0</h4>

<h4 id="label-rest-3A++++++-22foobarbaz-22">rest:      “foobarbaz”</h4>

<h4 id="label-rest_size-3A+9">rest_size: 9</h4>

<p>“‘</p>

<p>Raises an exception if match values are clear:</p>

<p>“‘rb scanner.scan(/nope/)           # =&gt; nil match_values_cleared?(scanner) # =&gt; true scanner.unscan                 # Raises <a href="StringScanner/Error.html" title="StringScanner::Error (class)"><code>::StringScanner::Error</code></a>. “`</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1441-L1452'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1441' data-end='1452'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1441</span></pre>
<pre class='code cpp'>

static VALUE
strscan_unscan(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))
        rb_raise(ScanError, &quot;unscan failed: previous match record not exist&quot;);
    p-&gt;curr = p-&gt;prev;
    CLEAR_MATCH_STATUS(p);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="values_at-instance_method">
  <h3 class='signature '>
    #<strong>values_at</strong>(*specifiers)  &#x21d2; <code>array_of_captures</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:markup: markdown </p>

<p>Returns an array of captured substrings, or <code>nil</code> of none.</p>

<p>For each <code>specifier</code>, the returned substring is ‘[specifier]`; see <a href="#[]-instance_method" title="StringScanner#[] (method)">#[]</a>.</p>

<p>“‘rb scanner = <a href="#new-class_method" title="StringScanner.new (method)">.new</a>(’Fri Dec 12 1975 14:39’) pattern = /(?&lt;wday&gt;w+) (?&lt;month&gt;w+) (?&lt;day&gt;d+) / scanner.match?(pattern) scanner.values_at(*0..3)               # =&gt; [“Fri Dec 12 ”, “Fri”, “Dec”, “12”] scanner.values_at(*%i[wday month day]) # =&gt; [“Fri”, “Dec”, “12”] “‘</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/master/ext/strscan/strscan.c#L1896-L1912'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1896' data-end='1912'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1896</span></pre>
<pre class='code cpp'>

static VALUE
strscan_values_at(int argc, VALUE *argv, VALUE self)
{
    struct strscanner *p;
    long i;
    VALUE new_ary;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;

    new_ary = rb_ary_new2(argc);
    for (i = 0; i&lt;argc; i++) {
        rb_ary_push(new_ary, strscan_aref(self, argv[i]));
    }

    return new_ary;
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>