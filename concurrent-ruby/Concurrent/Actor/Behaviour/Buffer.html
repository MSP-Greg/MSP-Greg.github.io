<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Concurrent::Actor::Behaviour::Buffer &mdash; Concurrent Ruby master</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Concurrent::Actor::Behaviour::Buffer",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Concurrent</a> &raquo; 
      <a href='../../../_index.html#alpha_B'>Index (B)</a> &raquo; 
        <a href="../../../Concurrent.html" title="Concurrent (module)">Concurrent</a> &raquo; 
        <a href="../../Actor.html" title="Concurrent::Actor (module)">Actor</a> &raquo; 
        <a href="../Behaviour.html" title="Concurrent::Actor::Behaviour (module)">Behaviour</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Buffer&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Concurrent::Actor::Behaviour::Buffer</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="Abstract.html" title="Concurrent::Actor::Behaviour::Abstract (class)"><code>Abstract</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Abstract.html" title="Concurrent::Actor::Behaviour::Abstract (class)"><code>Abstract</code></a>,
          <a href="../InternalDelegations.html" title="Concurrent::Actor::InternalDelegations (module)"><code>Actor::InternalDelegations</code></a>,
          <a href="../../Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a>,
          <a href="../PublicDelegations.html" title="Concurrent::Actor::PublicDelegations (module)"><code>Actor::PublicDelegations</code></a>,
          <a href="../TypeCheck.html" title="Concurrent::Actor::TypeCheck (module)"><code>Actor::TypeCheck</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Abstract.html" title="Concurrent::Actor::Behaviour::Abstract (class)">Concurrent::Actor::Behaviour::Abstract</a></span>
        <ul class='fullTree'>
          <li><a href="../../../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'><a href="Abstract.html" title="Concurrent::Actor::Behaviour::Abstract (class)">Concurrent::Actor::Behaviour::Abstract</a></li>
          <li class='next'>Concurrent::Actor::Behaviour::Buffer</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb#L13'>lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Any message reaching this behaviour is buffered. Only one message is is scheduled at any given time. Others are kept in buffer until another one can be scheduled. This effectively means that messages handled by behaviours before buffer have higher priority and they can be processed before messages arriving into buffer. This allows for the processing of internal actor messages like (‘:link`, <code>:supervise</code>) first.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
  <h3 class='inherited'><a href="../../Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="../../Concern/Logging.html#SEV_LABEL-constant" title="Concurrent::Concern::Logging::SEV_LABEL (constant)">SEV_LABEL</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(core, subsequent, core_options)  &#x21d2; Buffer </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>

<h3 class='inherited'><a href="Abstract.html" title="Concurrent::Actor::Behaviour::Abstract (class)"><code>Abstract</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Abstract.html#new-class_method" title="Concurrent::Actor::Behaviour::Abstract.new (method)">.new</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#process_envelopes%3F-instance_method" title="#process_envelopes? (instance method)">#<strong>process_envelopes?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Ensures that only one envelope processing is scheduled with <code>#schedule_execution</code>, this allows other scheduled blocks to be executed before next envelope processing.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Abstract.html" title="Concurrent::Actor::Behaviour::Abstract (class)"><code>Abstract</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="Abstract.html#core-instance_method" title="Concurrent::Actor::Behaviour::Abstract#core (method)">#core</a>,
        <a class='i_m ro' href="Abstract.html#subsequent-instance_method" title="Concurrent::Actor::Behaviour::Abstract#subsequent (method)">#subsequent</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../InternalDelegations.html" title="Concurrent::Actor::InternalDelegations (module)"><code>Actor::InternalDelegations</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="../InternalDelegations.html#terminated%3F-instance_method" title="Concurrent::Actor::InternalDelegations#terminated? (method)">#terminated?</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#on_envelope-instance_method" title="#on_envelope (instance method)">#<strong>on_envelope</strong>(envelope)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#on_event-instance_method" title="#on_event (instance method)">#<strong>on_event</strong>(public, event)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#process_envelope-instance_method" title="#process_envelope (instance method)">#<strong>process_envelope</strong>  </a>
    </span>
  </li>
</ul>

<h3 class='inherited'><a href="Abstract.html" title="Concurrent::Actor::Behaviour::Abstract (class)"><code>Abstract</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Abstract.html#broadcast-instance_method" title="Concurrent::Actor::Behaviour::Abstract#broadcast (method)">#broadcast</a></td>
      <td><div class='inline'><p>broadcasts event to all behaviours and context.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Abstract.html#on_envelope-instance_method" title="Concurrent::Actor::Behaviour::Abstract#on_envelope (method)">#on_envelope</a></td>
      <td><div class='inline'><p>override to add extra behaviour.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Abstract.html#on_event-instance_method" title="Concurrent::Actor::Behaviour::Abstract#on_event (method)">#on_event</a></td>
      <td><div class='inline'><p>override to add extra behaviour.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Abstract.html#pass-instance_method" title="Concurrent::Actor::Behaviour::Abstract#pass (method)">#pass</a>,
        <a class='i_m ' href="Abstract.html#reject_envelope-instance_method" title="Concurrent::Actor::Behaviour::Abstract#reject_envelope (method)">#reject_envelope</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../InternalDelegations.html" title="Concurrent::Actor::InternalDelegations (module)"><code>Actor::InternalDelegations</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../InternalDelegations.html#behaviour-instance_method" title="Concurrent::Actor::InternalDelegations#behaviour (method)">#behaviour</a></td>
      <td><div class='inline'><p>see <a href="../Core.html#behaviour-instance_method" title="Concurrent::Actor::Core#behaviour (method)">Core#behaviour</a></p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../InternalDelegations.html#behaviour!-instance_method" title="Concurrent::Actor::InternalDelegations#behaviour! (method)">#behaviour!</a></td>
      <td><div class='inline'><p>see <a href="../Core.html#behaviour!-instance_method" title="Concurrent::Actor::Core#behaviour! (method)">Core#behaviour!</a></p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../InternalDelegations.html#children-instance_method" title="Concurrent::Actor::InternalDelegations#children (method)">#children</a>,
        <a class='i_m ' href="../InternalDelegations.html#context-instance_method" title="Concurrent::Actor::InternalDelegations#context (method)">#context</a>,
        <a class='i_m ' href="../InternalDelegations.html#dead_letter_routing-instance_method" title="Concurrent::Actor::InternalDelegations#dead_letter_routing (method)">#dead_letter_routing</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../InternalDelegations.html#log-instance_method" title="Concurrent::Actor::InternalDelegations#log (method)">#log</a></td>
      <td><div class='inline'><p>delegates to core.log.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../InternalDelegations.html#redirect-instance_method" title="Concurrent::Actor::InternalDelegations#redirect (method)">#redirect</a>,
        <a class='i_m ' href="../InternalDelegations.html#terminate!-instance_method" title="Concurrent::Actor::InternalDelegations#terminate! (method)">#terminate!</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../../Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../../Concern/Logging.html#log-instance_method" title="Concurrent::Concern::Logging#log (method)">#log</a></td>
      <td><div class='inline'><p>Logs through <a href="../../../Concurrent.html#global_logger-class_method" title="Concurrent.global_logger (method)">Concurrent.global_logger</a>, it can be overridden by setting @logger.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../PublicDelegations.html" title="Concurrent::Actor::PublicDelegations (module)"><code>Actor::PublicDelegations</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../PublicDelegations.html#actor_class-instance_method" title="Concurrent::Actor::PublicDelegations#actor_class (method)">#actor_class</a></td>
      <td><div class='inline'><p>Alias for <a href="../PublicDelegations.html#context_class-instance_method" title="Concurrent::Actor::PublicDelegations#context_class (method)">PublicDelegations#context_class</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../PublicDelegations.html#context_class-instance_method" title="Concurrent::Actor::PublicDelegations#context_class (method)">#context_class</a>,
        <a class='i_m ' href="../PublicDelegations.html#executor-instance_method" title="Concurrent::Actor::PublicDelegations#executor (method)">#executor</a>,
        <a class='i_m ' href="../PublicDelegations.html#name-instance_method" title="Concurrent::Actor::PublicDelegations#name (method)">#name</a>,
        <a class='i_m ' href="../PublicDelegations.html#parent-instance_method" title="Concurrent::Actor::PublicDelegations#parent (method)">#parent</a>,
        <a class='i_m ' href="../PublicDelegations.html#path-instance_method" title="Concurrent::Actor::PublicDelegations#path (method)">#path</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../PublicDelegations.html#ref-instance_method" title="Concurrent::Actor::PublicDelegations#ref (method)">#ref</a></td>
      <td><div class='inline'><p>Alias for <a href="../PublicDelegations.html#reference-instance_method" title="Concurrent::Actor::PublicDelegations#reference (method)">PublicDelegations#reference</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../PublicDelegations.html#reference-instance_method" title="Concurrent::Actor::PublicDelegations#reference (method)">#reference</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../TypeCheck.html" title="Concurrent::Actor::TypeCheck (module)"><code>Actor::TypeCheck</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../TypeCheck.html#Child!-instance_method" title="Concurrent::Actor::TypeCheck#Child! (method)">#Child!</a>,
        <a class='i_m ' href="../TypeCheck.html#Child%3F-instance_method" title="Concurrent::Actor::TypeCheck#Child? (method)">#Child?</a>,
        <a class='i_m ' href="../TypeCheck.html#Match!-instance_method" title="Concurrent::Actor::TypeCheck#Match! (method)">#Match!</a>,
        <a class='i_m ' href="../TypeCheck.html#Match%3F-instance_method" title="Concurrent::Actor::TypeCheck#Match? (method)">#Match?</a>,
        <a class='i_m ' href="../TypeCheck.html#Type!-instance_method" title="Concurrent::Actor::TypeCheck#Type! (method)">#Type!</a>,
        <a class='i_m ' href="../TypeCheck.html#Type%3F-instance_method" title="Concurrent::Actor::TypeCheck#Type? (method)">#Type?</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(core, subsequent, core_options)  &#x21d2; <code>Buffer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb#L14-L18'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='14' data-end='18'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb', line 14</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="../../../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_core'>core</span><span class='comma'>,</span> <span class='id identifier rubyid_subsequent'>subsequent</span><span class='comma'>,</span> <span class='id identifier rubyid_core_options'>core_options</span>)
  <span class='kw'>super</span> <span class='id identifier rubyid_core'>core</span><span class='comma'>,</span> <span class='id identifier rubyid_subsequent'>subsequent</span><span class='comma'>,</span> <span class='id identifier rubyid_core_options'>core_options</span>
  <span class='ivar'>@buffer</span>                     <span class='op'>=</span> []
  <span class='ivar'>@receive_envelope_scheduled</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="process_envelopes?-instance_method">
  <h3 class='signature ro first'>
    #<strong>process_envelopes?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Ensures that only one envelope processing is scheduled with <code>#schedule_execution</code>, this allows other scheduled blocks to be executed before next envelope processing. Simply put this ensures that <a href="../Core.html" title="Concurrent::Actor::Core (class)"><code>Actor::Core</code></a> is still responsive to internal calls (like add_child) even though the <a href="../../Actor.html" title="Concurrent::Actor (module)"><code>Actor</code></a> is flooded with messages.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb#L30-L35'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='30' data-end='35'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb', line 30</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process_envelopes?'>process_envelopes?</span>
  <span class='kw'>unless</span> <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='ivar'>@receive_envelope_scheduled</span>
    <span class='ivar'>@receive_envelope_scheduled</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_process_envelope'><a href="#process_envelope-instance_method" title="Concurrent::Actor::Behaviour::Buffer#process_envelope (method)">process_envelope</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="on_envelope-instance_method">
  <h3 class='signature  first'>
    #<strong>on_envelope</strong>(envelope)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb#L20-L24'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='20' data-end='24'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb', line 20</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_envelope'>on_envelope</span>(<span class='id identifier rubyid_envelope'>envelope</span>)
  <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_envelope'>envelope</span>
  <span class='id identifier rubyid_process_envelopes?'><a href="#process_envelopes%3F-instance_method" title="Concurrent::Actor::Behaviour::Buffer#process_envelopes? (method)">process_envelopes?</a></span>
  <span class='const'><a href="../Behaviour.html#MESSAGE_PROCESSED-constant" title="Concurrent::Actor::Behaviour::MESSAGE_PROCESSED (constant)">MESSAGE_PROCESSED</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_event-instance_method">
  <h3 class='signature '>
    #<strong>on_event</strong>(public, event)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb#L46-L54'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='46' data-end='54'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb', line 46</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_event'>on_event</span>(<span class='id identifier rubyid_public'>public</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span>)
  <span class='id identifier rubyid_event_name'>event_name</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_event_name'>event_name</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_terminated'>terminated</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_restarted'>restarted</span>
    <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_envelope'>envelope</span><span class='op'>|</span> <span class='id identifier rubyid_reject_envelope'>reject_envelope</span> <span class='id identifier rubyid_envelope'>envelope</span> }
    <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>end</span>
  <span class='kw'>super</span> <span class='id identifier rubyid_public'>public</span><span class='comma'>,</span> <span class='id identifier rubyid_event_name'>event_name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process_envelope-instance_method">
  <h3 class='signature '>
    #<strong>process_envelope</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb#L37-L44'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='37' data-end='44'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/actor/behaviour/buffer.rb', line 37</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process_envelope'>process_envelope</span>
  <span class='id identifier rubyid_envelope'>envelope</span> <span class='op'>=</span> <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_shift'>shift</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_envelope'>envelope</span>
  <span class='id identifier rubyid_pass'>pass</span> <span class='id identifier rubyid_envelope'>envelope</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@receive_envelope_scheduled</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_core'>core</span>.<span class='id identifier rubyid_schedule_execution'>schedule_execution</span> { <span class='id identifier rubyid_process_envelopes?'><a href="#process_envelopes%3F-instance_method" title="Concurrent::Actor::Behaviour::Buffer#process_envelopes? (method)">process_envelopes?</a></span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>