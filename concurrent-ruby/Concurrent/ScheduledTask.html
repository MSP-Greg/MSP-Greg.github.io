<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Concurrent::ScheduledTask &mdash; Concurrent RubyÂ master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Concurrent::ScheduledTask",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Concurrent</a> &raquo; 
      <a href='../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ScheduledTask&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Concurrent::ScheduledTask</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Comparable,
          <a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a>,
          <a href="Concern/Observable.html" title="Concurrent::Concern::Observable (module)"><code>Concern::Observable</code></a>,
          <a href="Concern/Obligation.html" title="Concurrent::Concern::Obligation (module)"><code>Concern::Obligation</code></a>,
          <a href="Concern/Dereferenceable.html" title="Concurrent::Concern::Dereferenceable (module)"><code>Concern::Dereferenceable</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="IVar.html" title="Concurrent::IVar (class)">Concurrent::IVar</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)">Concurrent::Synchronization::LockableObject</a></li>
          <li class='next'><a href="IVar.html" title="Concurrent::IVar (class)">Concurrent::IVar</a></li>
          <li class='next'>Concurrent::ScheduledTask</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L158'>lib/concurrent-ruby/concurrent/scheduled_task.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Time calculations on all platforms and languages are sensitive to changes to the system clock. To alleviate the potential problems associated with changing the system clock while an application is running, most modern operating systems provide a monotonic clock that operates independently of the system clock. A monotonic clock cannot be used to determine human-friendly clock times. A monotonic clock is used exclusively for calculating time intervals. Not all Ruby platforms provide access to an operating system monotonic clock. On these platforms a pure-Ruby monotonic clock will be used as a fallback. An operating system monotonic clock is both faster and more reliable than the pure-Ruby implementation. The pure-Ruby implementation should be fast and reliable enough for most non-realtime operations. At this time the common Ruby platforms that provide access to an operating system monotonic clock are MRI 2.1 and above and JRuby (all versions).</p>
</div>
  </div>

<p><code>ScheduledTask</code> is a close relative of <a href="Future.html" title="Concurrent::Future (class)"><code>Future</code></a> but with one
important difference: A <a href="Future.html" title="Concurrent::Future (class)"><code>Future</code></a> is set to execute as soon as possible
whereas a <code>ScheduledTask</code> is set to execute after a specified delay. This
implementation is loosely based on Java&#39;s
<a href="../file._3Ca.html" title="href=&quot;http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html&quot;&gt;http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html&lt;/a&gt; ScheduledExecutorService">href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html</a> ScheduledExecutorService</a>.
It is a more feature-rich variant of <code>Concurrent.timer</code>.</p>

<p>The <em>intended</em> schedule time of task execution is set on object construction
with the <code>delay</code> argument. The delay is a numeric (floating point or integer)
representing a number of seconds in the future. Any other value or a numeric
equal to or less than zero will result in an exception. The <em>actual</em> schedule
time of task execution is set when the <a href="#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">.execute</a> method is called.</p>

<p>The constructor can also be given zero or more processing options. Currently
the only supported options are those recognized by the
<a href="Dereferenceable">Dereferenceable</a> module.</p>

<p>The final constructor argument is a block representing the task to be performed.
If no block is given an <code>ArgumentError</code> will be raised.</p>

<p><strong>States</strong></p>

<p><code>ScheduledTask</code> mixes in the  <a href="Obligation">Obligation</a> module thus giving it
&quot;future&quot; behavior. This includes the expected lifecycle states. <code>ScheduledTask</code>
has one additional state, however. While the task (block) is being executed the
state of the object will be <code>:processing</code>. This additional state is necessary
because it has implications for task cancellation.</p>

<p><strong>Cancellation</strong></p>

<p>A <code>:pending</code> task can be cancelled using the <a href="#cancel-instance_method" title="Concurrent::ScheduledTask#cancel (method)">#cancel</a> method. A task in any
other state, including <code>:processing</code>, cannot be cancelled. The <a href="#cancel-instance_method" title="Concurrent::ScheduledTask#cancel (method)">#cancel</a>
method returns a boolean indicating the success of the cancellation attempt.
A cancelled <code>ScheduledTask</code> cannot be restarted. It is immutable.</p>

<p><strong>Obligation and Observation</strong></p>

<p>The result of a <code>ScheduledTask</code> can be obtained either synchronously or
asynchronously. <code>ScheduledTask</code> mixes in both the <a href="Obligation">Obligation</a>
module and the
<a href="../file._3Ca.html" title="href=&quot;http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html&quot;&gt;http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html&lt;/a&gt; Observable">href="http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html">http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html</a> Observable</a>
module from the Ruby standard library. With one exception <code>ScheduledTask</code>
behaves identically to <a href="Observable">Future</a> with regard to these modules.</p>

<h2>Copy Options</h2>

<p><a href="../Object.html" title="Object (class)"><code>::Object</code></a> references in Ruby are mutable. This can lead to serious
problems when the <code>#value</code> of an object is a mutable reference. Which
is always the case unless the value is a <code>Fixnum</code>, <code>Symbol</code>, or similar
&quot;primitive&quot; data type. Each instance can be configured with a few
options that can help protect the program from potentially dangerous
operations. Each of these options can be optionally set when the object
instance is created:</p>

<ul>
<li><code>:dup_on_deref</code> When true the object will call the <code>#dup</code> method on
the <code>value</code> object every time the <code>#value</code> method is called
(default: false)</li>
<li><code>:freeze_on_deref</code> When true the object will call the <code>#freeze</code>
method on the <code>value</code> object every time the <code>#value</code> method is called
(default: false)</li>
<li><code>:copy_on_deref</code> When given a <code>Proc</code> object the <code>Proc</code> will be run
every time   the <code>#value</code> method is called. The <code>Proc</code> will be given
the current <code>value</code> as its only argument and the result returned by
the block will be the return   value of the <code>#value</code> call. When <code>nil</code>
this option will be ignored (default: nil)</li>
</ul>

<p>When multiple deref options are set the order of operations is strictly defined.
The order of deref operations is:</p>

<ul>
<li><code>:copy_on_deref</code></li>
<li><code>:dup_on_deref</code></li>
<li><code>:freeze_on_deref</code></li>
</ul>

<p>Because of this ordering there is no need to <code>#freeze</code> an object created by a
provided <code>:copy_on_deref</code> block. Simply set <code>:freeze_on_deref</code> to <code>true</code>.
Setting both <code>:dup_on_deref</code> to <code>true</code> and <code>:freeze_on_deref</code> to <code>true</code> is
as close to the behavior of a &quot;pure&quot; functional language (like Erlang, Clojure,
or Haskell) as we are likely to get in Ruby.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Basic usage</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>concurrent/scheduled_task</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>csv</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>open-uri</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>class</span> <span class='const'>Ticker</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_get_year_end_closing'>get_year_end_closing</span>(<span class='id identifier rubyid_symbol'>symbol</span><span class='comma'>,</span> <span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_api_key'>api_key</span>)
   <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY&amp;symbol=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_symbol'>symbol</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;apikey=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_api_key'>api_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;datatype=csv</span><span class='tstring_end'>&quot;</span></span>
   <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> []
   <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>URI</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_uri'>uri</span>).<span class='id identifier rubyid_read'>read</span>
   <span class='kw'>if</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>call frequency</span><span class='tstring_end'>&#39;</span></span>)
     <span class='kw'>return</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rate_limit_exceeded'>rate_limit_exceeded</span>
   <span class='kw'>end</span>
   <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_csv'>csv</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
     <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>close</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_to_f'>to_f</span> <span class='kw'>if</span> <span class='id identifier rubyid_row'>row</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>timestamp</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_year'>year</span>.<span class='id identifier rubyid_to_s'>to_s</span>)
   <span class='kw'>end</span>
   <span class='id identifier rubyid_year_end'>year_end</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_first'>first</span>
   <span class='id identifier rubyid_year_end'>year_end</span>
 <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
   <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_e'>e</span>
 <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_api_key'>api_key</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ALPHAVANTAGE_KEY</span><span class='tstring_end'>&#39;</span></span>]
<span class='id identifier rubyid_abort'>abort</span>(<span class='id identifier rubyid_error_message'>error_message</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_api_key'>api_key</span>

<span class='comment'># Future
</span><span class='id identifier rubyid_price'>price</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'><a href="Future.html" title="Concurrent::Future (class)">Future</a></span>.<span class='id identifier rubyid_execute'><a href="Future.html#execute-class_method" title="Concurrent::Future.execute (method)">execute</a></span>{ <span class='const'>Ticker</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>.<span class='id identifier rubyid_get_year_end_closing'>get_year_end_closing</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TWTR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2013</span><span class='comma'>,</span> <span class='id identifier rubyid_api_key'>api_key</span>) }
<span class='id identifier rubyid_price'>price</span>.<span class='id identifier rubyid_state'>state</span> <span class='comment'>#=&gt; :pending
</span><span class='id identifier rubyid_price'>price</span>.<span class='id identifier rubyid_pending?'>pending?</span> <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_price'>price</span>.<span class='id identifier rubyid_value'>value</span>(<span class='int'>0</span>) <span class='comment'>#=&gt; nil (does not block)
</span>
 <span class='id identifier rubyid_sleep'>sleep</span>(<span class='int'>1</span>)    <span class='comment'># do other stuff
</span>
<span class='id identifier rubyid_price'>price</span>.<span class='id identifier rubyid_value'>value</span> <span class='comment'>#=&gt; 63.65 (after blocking if necessary)
</span><span class='id identifier rubyid_price'>price</span>.<span class='id identifier rubyid_state'>state</span> <span class='comment'>#=&gt; :fulfilled
</span><span class='id identifier rubyid_price'>price</span>.<span class='id identifier rubyid_fulfilled?'>fulfilled?</span> <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_price'>price</span>.<span class='id identifier rubyid_value'>value</span> <span class='comment'>#=&gt; 63.65</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Successful task execution</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>ScheduledTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>(<span class='int'>2</span>){ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>What does the fox say?</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_state'>state</span>         <span class='comment'>#=&gt; :unscheduled
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">execute</a></span>
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_state'>state</span>         <span class='comment'>#=&gt; pending
</span>
<span class='comment'># wait for it...
</span><span class='id identifier rubyid_sleep'>sleep</span>(<span class='int'>3</span>)

<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_unscheduled?'>unscheduled?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_pending?'>pending?</span>     <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_fulfilled?'>fulfilled?</span>   <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_rejected?'>rejected?</span>    <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_value'>value</span>        <span class='comment'>#=&gt; &#39;What does the fox say?&#39;</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>One line creation and execution</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>ScheduledTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>(<span class='int'>2</span>){ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>What does the fox say?</span><span class='tstring_end'>&#39;</span></span> }.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">execute</a></span>
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_state'>state</span>         <span class='comment'>#=&gt; pending
</span>
<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>ScheduledTask</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">execute</a></span>(<span class='int'>2</span>){ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>What do you get when you multiply 6 by 9?</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_state'>state</span>         <span class='comment'>#=&gt; pending</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Failed task execution</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>ScheduledTask</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">execute</a></span>(<span class='int'>2</span>){ <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Call me maybe?</span><span class='tstring_end'>&#39;</span></span>) }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_pending?'>pending?</span>      <span class='comment'>#=&gt; true
</span>
<span class='comment'># wait for it...
</span><span class='id identifier rubyid_sleep'>sleep</span>(<span class='int'>3</span>)

<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_unscheduled?'>unscheduled?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_pending?'>pending?</span>     <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_fulfilled?'>fulfilled?</span>   <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_rejected?'>rejected?</span>    <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_value'>value</span>        <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_reason'>reason</span>       <span class='comment'>#=&gt; #&lt;StandardError: Call me maybe?&gt;</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Task execution with observation</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_observer'>observer</span> <span class='op'>=</span> <span class='const'>Class</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>{
  <span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>(<span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span>)
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The task completed at </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'> with value &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
}.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>

<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>ScheduledTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>(<span class='int'>2</span>){ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>What does the fox say?</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_add_observer'>add_observer</span>(<span class='id identifier rubyid_observer'>observer</span>)
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">execute</a></span>
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_pending?'>pending?</span>      <span class='comment'>#=&gt; true
</span>
<span class='comment'># wait for it...
</span><span class='id identifier rubyid_sleep'>sleep</span>(<span class='int'>3</span>)

<span class='comment'>#&gt;&gt; The task completed at 2013-11-07 12:26:09 -0500 with value &#39;What does the fox say?&#39;</span></code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="http://linux.die.net/man/3/clock_gettime" target="_parent" title="Linux clock_gettime(3)">Linux clock_gettime(3)</a></li>
          <li><code>Concurrent.timer</code></li>
      </ul>

</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#execute-class_method" title=".execute (class method)">.<strong>execute</strong>(delay, opts = {}, &amp;task)  &#x21d2; ScheduledTask </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new <code>ScheduledTask</code> object with the given block, execute it, and return the <code>:pending</code> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(delay, opts = {}) { ... } &#x21d2; ScheduledTask </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Schedule a task for execution at a specified future time.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="IVar.html#new-class_method" title="Concurrent::IVar.new (method)">.new</a></td>
      <td><div class='inline'><p>Create a new <a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a> in the <code>:pending</code> state with the (optional) initial value.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#cancelled%3F-instance_method" title="#cancelled? (instance method)">#<strong>cancelled?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Has the task been cancelled?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#processing%3F-instance_method" title="#processing? (instance method)">#<strong>processing?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>In the task execution in progress?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#executor-instance_method" title="#executor (instance method)">#<strong>executor</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>The executor on which to execute the task.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Concern/Obligation.html" title="Concurrent::Concern::Obligation (module)"><code>Concern::Obligation</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Obligation.html#complete%3F-instance_method" title="Concurrent::Concern::Obligation#complete? (method)">#complete?</a></td>
      <td><div class='inline'><p>Has the obligation completed processing?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Obligation.html#fulfilled%3F-instance_method" title="Concurrent::Concern::Obligation#fulfilled? (method)">#fulfilled?</a></td>
      <td><div class='inline'><p>Has the obligation been fulfilled?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Obligation.html#incomplete%3F-instance_method" title="Concurrent::Concern::Obligation#incomplete? (method)">#incomplete?</a></td>
      <td><div class='inline'><p>Is the obligation still awaiting completion of processing?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Obligation.html#pending%3F-instance_method" title="Concurrent::Concern::Obligation#pending? (method)">#pending?</a></td>
      <td><div class='inline'><p>Is obligation completion still pending?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Obligation.html#realized%3F-instance_method" title="Concurrent::Concern::Obligation#realized? (method)">#realized?</a></td>
      <td><div class='inline'><p>Alias for <a href="Concern/Obligation.html#fulfilled%3F-instance_method" title="Concurrent::Concern::Obligation#fulfilled? (method)">Concern::Obligation#fulfilled?</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Obligation.html#rejected%3F-instance_method" title="Concurrent::Concern::Obligation#rejected? (method)">#rejected?</a></td>
      <td><div class='inline'><p>Has the obligation been rejected?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Concern/Obligation.html#state-instance_method" title="Concurrent::Concern::Obligation#state (method)">#state</a></td>
      <td><div class='inline'><p>The current state of the obligation.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Obligation.html#unscheduled%3F-instance_method" title="Concurrent::Concern::Obligation#unscheduled? (method)">#unscheduled?</a></td>
      <td><div class='inline'><p>Is the obligation still unscheduled?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m rw priv' href="Concern/Obligation.html#state=-instance_method" title="Concurrent::Concern::Obligation#state= (method)">#state=</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Dereferenceable.html" title="Concurrent::Concern::Dereferenceable (module)"><code>Concern::Dereferenceable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Dereferenceable.html#value-instance_method" title="Concurrent::Concern::Dereferenceable#value (method)">#value</a></td>
      <td><div class='inline'><p>Return the value this object represents after applying the options specified by the <code>#set_deref_options</code> method.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#cancel-instance_method" title="#cancel (instance method)">#<strong>cancel</strong>  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Cancel this task and prevent it from executing.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#execute-instance_method" title="#execute (instance method)">#<strong>execute</strong>  &#x21d2; ScheduledTask </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Execute an <code>:unscheduled</code> <code>ScheduledTask</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initial_delay-instance_method" title="#initial_delay (instance method)">#<strong>initial_delay</strong>  &#x21d2; Float </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The <code>delay</code> value given at instantiation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reschedule-instance_method" title="#reschedule (instance method)">#<strong>reschedule</strong>(delay)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reschedule the task using the given delay and the current time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reschedule the task using the original delay and the current time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#schedule_time-instance_method" title="#schedule_time (instance method)">#<strong>schedule_time</strong>  &#x21d2; Float </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The monotonic time at which the the task is scheduled to be executed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#<=>-instance_method" title="#&lt;=&gt; (instance method)">#<strong>&lt;=&gt;</strong>(other)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Comparator which orders by schedule time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_reschedule-instance_method" title="#ns_reschedule (instance method)">#<strong>ns_reschedule</strong>(delay)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Reschedule the task using the given delay and the current time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_schedule-instance_method" title="#ns_schedule (instance method)">#<strong>ns_schedule</strong>(delay)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Schedule the task using the given delay and the current time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#process_task-instance_method" title="#process_task (instance method)">#<strong>process_task</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Execute the task.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="IVar.html#add_observer-instance_method" title="Concurrent::IVar#add_observer (method)">#add_observer</a></td>
      <td><div class='inline'><p>Add an observer on this object that will receive notification on update.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="IVar.html#fail-instance_method" title="Concurrent::IVar#fail (method)">#fail</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the <a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a> to failed due to some error and wake or notify all threads waiting on it.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="IVar.html#set-instance_method" title="Concurrent::IVar#set (method)">#set</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the <a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a> to a value and wake or notify all threads waiting on it.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="IVar.html#try_set-instance_method" title="Concurrent::IVar#try_set (method)">#try_set</a></td>
      <td><div class='inline'><p>Attempt to set the <a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a> with the given value or block.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="IVar.html#complete-instance_method" title="Concurrent::IVar#complete (method)">#complete</a>,
        <a class='i_m priv' href="IVar.html#complete_without_notification-instance_method" title="Concurrent::IVar#complete_without_notification (method)">#complete_without_notification</a>,
        <a class='i_m priv' href="IVar.html#notify_observers-instance_method" title="Concurrent::IVar#notify_observers (method)">#notify_observers</a>,
        <a class='i_m priv' href="IVar.html#ns_complete_without_notification-instance_method" title="Concurrent::IVar#ns_complete_without_notification (method)">#ns_complete_without_notification</a>,
        <a class='i_m priv' href="IVar.html#ns_initialize-instance_method" title="Concurrent::IVar#ns_initialize (method)">#ns_initialize</a>,
        <a class='i_m priv' href="IVar.html#safe_execute-instance_method" title="Concurrent::IVar#safe_execute (method)">#safe_execute</a>,
        <a class='i_m priv nodoc' href="IVar.html#check_for_block_or_value!-instance_method" title="Concurrent::IVar#check_for_block_or_value! (method)">#check_for_block_or_value!</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Observable.html" title="Concurrent::Concern::Observable (module)"><code>Concern::Observable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#add_observer-instance_method" title="Concurrent::Concern::Observable#add_observer (method)">#add_observer</a></td>
      <td><div class='inline'><p>Adds an observer to this set.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#count_observers-instance_method" title="Concurrent::Concern::Observable#count_observers (method)">#count_observers</a></td>
      <td><div class='inline'><p>Return the number of observers associated with this object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#delete_observer-instance_method" title="Concurrent::Concern::Observable#delete_observer (method)">#delete_observer</a></td>
      <td><div class='inline'><p>Remove <code>observer</code> as an observer on this object so that it will no longer receive notifications.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#delete_observers-instance_method" title="Concurrent::Concern::Observable#delete_observers (method)">#delete_observers</a></td>
      <td><div class='inline'><p>Remove all observers associated with this object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#with_observer-instance_method" title="Concurrent::Concern::Observable#with_observer (method)">#with_observer</a></td>
      <td><div class='inline'><p>As <code>#add_observer</code> but can be used for chaining.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Obligation.html" title="Concurrent::Concern::Obligation (module)"><code>Concern::Obligation</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Concern/Obligation.html#exception-instance_method" title="Concurrent::Concern::Obligation#exception (method)">#exception</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Obligation.html#no_error!-instance_method" title="Concurrent::Concern::Obligation#no_error! (method)">#no_error!</a></td>
      <td><div class='inline'><p>Alias for <a href="Concern/Obligation.html#wait!-instance_method" title="Concurrent::Concern::Obligation#wait! (method)">Concern::Obligation#wait!</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Obligation.html#reason-instance_method" title="Concurrent::Concern::Obligation#reason (method)">#reason</a></td>
      <td><div class='inline'><p>If an exception was raised during processing this will return the exception object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Obligation.html#value-instance_method" title="Concurrent::Concern::Obligation#value (method)">#value</a></td>
      <td><div class='inline'><p>The current value of the obligation.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Obligation.html#value!-instance_method" title="Concurrent::Concern::Obligation#value! (method)">#value!</a></td>
      <td><div class='inline'><p>The current value of the obligation.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Obligation.html#wait-instance_method" title="Concurrent::Concern::Obligation#wait (method)">#wait</a></td>
      <td><div class='inline'><p>Wait until obligation is complete or the timeout has been reached.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Obligation.html#wait!-instance_method" title="Concurrent::Concern::Obligation#wait! (method)">#wait!</a></td>
      <td><div class='inline'><p>Wait until obligation is complete or the timeout is reached.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Concern/Obligation.html#compare_and_set_state-instance_method" title="Concurrent::Concern::Obligation#compare_and_set_state (method)">#compare_and_set_state</a></td>
      <td><div class='inline'><p>Atomic compare and set operation State is set to <code>next_state</code> only if <code>current state == expected_current</code>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Concern/Obligation.html#event-instance_method" title="Concurrent::Concern::Obligation#event (method)">#event</a>,
        <a class='i_m priv' href="Concern/Obligation.html#get_arguments_from-instance_method" title="Concurrent::Concern::Obligation#get_arguments_from (method)">#get_arguments_from</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Concern/Obligation.html#if_state-instance_method" title="Concurrent::Concern::Obligation#if_state (method)">#if_state</a></td>
      <td><div class='inline'><p>Executes the block within mutex if current state is included in expected_states.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Concern/Obligation.html#init_obligation-instance_method" title="Concurrent::Concern::Obligation#init_obligation (method)">#init_obligation</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Concern/Obligation.html#ns_check_state%3F-instance_method" title="Concurrent::Concern::Obligation#ns_check_state? (method)">#ns_check_state?</a></td>
      <td><div class='inline'><p>Am I in the current state?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Concern/Obligation.html#ns_set_state-instance_method" title="Concurrent::Concern::Obligation#ns_set_state (method)">#ns_set_state</a>,
        <a class='i_m priv' href="Concern/Obligation.html#set_state-instance_method" title="Concurrent::Concern::Obligation#set_state (method)">#set_state</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Dereferenceable.html" title="Concurrent::Concern::Dereferenceable (module)"><code>Concern::Dereferenceable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Dereferenceable.html#deref-instance_method" title="Concurrent::Concern::Dereferenceable#deref (method)">#deref</a></td>
      <td><div class='inline'><p>Alias for <a href="Concern/Dereferenceable.html#value-instance_method" title="Concurrent::Concern::Dereferenceable#value (method)">Concern::Dereferenceable#value</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Concern/Dereferenceable.html#apply_deref_options-instance_method" title="Concurrent::Concern::Dereferenceable#apply_deref_options (method)">#apply_deref_options</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Concern/Dereferenceable.html#ns_set_deref_options-instance_method" title="Concurrent::Concern::Dereferenceable#ns_set_deref_options (method)">#ns_set_deref_options</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the options which define the operations <code>#value</code> performs before returning data to the caller (dereferencing).</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Synchronization/LockableObject.html#new_condition-instance_method" title="Concurrent::Synchronization::LockableObject#new_condition (method)">#new_condition</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(delay, opts = {}) { ... } &#x21d2; <code>ScheduledTask</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Schedule a task for execution at a specified future time.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>delay</span>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the number of seconds to wait for before executing the task</p>
</div>
  </li>
  <li>
    <span class='name'>opts</span>
    <span class='type'>(<a href="Hash.html" title="Concurrent::Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>the options used to define the behavior at update and deref and to specify the executor on which to perform actions</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>opts</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:executor</span>
          <span class='type'>(<code>Executor</code>)</span>
            &mdash; <div class='inline'>
<p>when set use the given <code>Executor</code> instance. Three special values are also supported: <code>:io</code> returns the global pool for long, blocking (IO) tasks, <code>:fast</code> returns the global pool for short, fast operations, and <code>:immediate</code> returns the global <a href="ImmediateExecutor.html" title="Concurrent::ImmediateExecutor (class)"><code>ImmediateExecutor</code></a> object.</p>
</div>        </li>
        <li>
          <span class='name'>:dup_on_deref</span>
          <span class='type'>(<code>Boolean</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>Call <code>#dup</code> before returning the data from <code>#value</code></p>
</div>        </li>
        <li>
          <span class='name'>:freeze_on_deref</span>
          <span class='type'>(<code>Boolean</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>Call <code>#freeze</code> before returning the data from <code>#value</code></p>
</div>        </li>
        <li>
          <span class='name'>:copy_on_deref</span>
          <span class='type'>(<code>Proc</code>)</span>
          <span class='default'> &mdash; default:
              <tt>nil</tt>          </span>
            &mdash; <div class='inline'>
<p>When calling the <code>#value</code> method, call the given proc passing the internal value as the sole argument then return the new value returned from the proc.</p>
</div>        </li>
        <li>
          <span class='name'>:args</span>
          <span class='type'>(<code>object</code>, <a href="Array.html" title="Concurrent::Array (class)">Array</a>)</span>
            &mdash; <div class='inline'>
<p>zero or more arguments to be passed the task block on execution</p>
</div>        </li>
    </ul>
<p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p>the task to be performed</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>When no block is given</p>
</div>
  </li>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>When given a time that is in the past</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L178-L194'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='178' data-end='194'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 178</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_delay'>delay</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>seconds must be greater than zero</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_delay'>delay</span>.<span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>&lt;</span> <span class='float'>0.0</span>

  <span class='kw'>super</span>(<span class='const'><a href="../Concurrent.html#NULL-constant" title="Concurrent::NULL (constant)">NULL</a></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='kw'>nil</span>)

  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_ns_set_state'>ns_set_state</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_unscheduled'>unscheduled</span>)
    <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_timer_set'>timer_set</span><span class='comma'>,</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_global_timer_set'><a href="../Concurrent.html#global_timer_set-class_method" title="Concurrent.global_timer_set (method)">global_timer_set</a></span>)
    <span class='ivar'>@args</span> <span class='op'>=</span> <span class='id identifier rubyid_get_arguments_from'>get_arguments_from</span>(<span class='id identifier rubyid_opts'>opts</span>)
    <span class='ivar'>@delay</span> <span class='op'>=</span> <span class='id identifier rubyid_delay'>delay</span>.<span class='id identifier rubyid_to_f'>to_f</span>
    <span class='ivar'>@task</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span>
    <span class='ivar'>@time</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@executor</span> <span class='op'>=</span> <span class='const'><a href="Options.html" title="Concurrent::Options (module)">Options</a></span>.<span class='id identifier rubyid_executor_from_options'><a href="Options.html#executor_from_options-class_method" title="Concurrent::Options.executor_from_options (method)">executor_from_options</a></span>(<span class='id identifier rubyid_opts'>opts</span>) <span class='op'>||</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_global_io_executor'><a href="../Concurrent.html#global_io_executor-class_method" title="Concurrent.global_io_executor (method)">global_io_executor</a></span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_observers'>observers</span> <span class='op'>=</span> <span class='const'><a href="Collection.html" title="Concurrent::Collection (module)">Collection</a></span><span class='op'>::</span><span class='const'><a href="Collection/CopyOnNotifyObserverSet.html" title="Concurrent::Collection::CopyOnNotifyObserverSet (class)">CopyOnNotifyObserverSet</a></span>.<span class='id identifier rubyid_new'><a href="Collection/CopyOnNotifyObserverSet.html#new-class_method" title="Concurrent::Collection::CopyOnNotifyObserverSet.new (method)">new</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="execute-class_method">
  <h3 class='signature  first'>
    .<strong>execute</strong>(delay, opts = {}, &amp;task)  &#x21d2; <code>ScheduledTask</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new <code>ScheduledTask</code> object with the given block, execute it, and return the <code>:pending</code> object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>delay</span>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the number of seconds to wait for before executing the task</p>
</div>
  </li>
  <li>
    <span class='name'>opts</span>
    <span class='type'>(<a href="Hash.html" title="Concurrent::Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>the options used to define the behavior at update and deref and to specify the executor on which to perform actions</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>opts</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:executor</span>
          <span class='type'>(<code>Executor</code>)</span>
            &mdash; <div class='inline'>
<p>when set use the given <code>Executor</code> instance. Three special values are also supported: <code>:io</code> returns the global pool for long, blocking (IO) tasks, <code>:fast</code> returns the global pool for short, fast operations, and <code>:immediate</code> returns the global <a href="ImmediateExecutor.html" title="Concurrent::ImmediateExecutor (class)"><code>ImmediateExecutor</code></a> object.</p>
</div>        </li>
        <li>
          <span class='name'>:dup_on_deref</span>
          <span class='type'>(<code>Boolean</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>Call <code>#dup</code> before returning the data from <code>#value</code></p>
</div>        </li>
        <li>
          <span class='name'>:freeze_on_deref</span>
          <span class='type'>(<code>Boolean</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>Call <code>#freeze</code> before returning the data from <code>#value</code></p>
</div>        </li>
        <li>
          <span class='name'>:copy_on_deref</span>
          <span class='type'>(<code>Proc</code>)</span>
          <span class='default'> &mdash; default:
              <tt>nil</tt>          </span>
            &mdash; <div class='inline'>
<p>When calling the <code>#value</code> method, call the given proc passing the internal value as the sole argument then return the new value returned from the proc.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>ScheduledTask</code>)</span>
&mdash;    <div class='inline'>
<p>the newly created <code>ScheduledTask</code> in the <code>:pending</code> state</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>if no block is given</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L290-L292'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='290' data-end='292'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 290</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_execute'>execute</span>(<span class='id identifier rubyid_delay'>delay</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>(<span class='id identifier rubyid_delay'>delay</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>).<span class='id identifier rubyid_execute'>execute</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="cancelled?-instance_method">
  <h3 class='signature ro first'>
    #<strong>cancelled?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Has the task been cancelled?</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if the task is in the given state else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L220-L222'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='220' data-end='222'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 220</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cancelled?'>cancelled?</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_check_state?'>ns_check_state?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_cancelled'>cancelled</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="executor-instance_method">
  <h3 class='signature ro priv'>
    #<strong>executor</strong>   <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The executor on which to execute the task.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L163-L163'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='163' data-end='163'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 163</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_executor'>executor</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="processing?-instance_method">
  <h3 class='signature ro'>
    #<strong>processing?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>In the task execution in progress?</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if the task is in the given state else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L227-L229'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='227' data-end='229'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 227</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_processing?'>processing?</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_check_state?'>ns_check_state?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_processing'>processing</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<=>-instance_method">
  <h3 class='signature priv first'>
    #<strong>&lt;=&gt;</strong>(other)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Comparator which orders by schedule time.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L213-L215'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='213' data-end='215'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 213</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>&lt;=&gt;</span>(<span class='id identifier rubyid_other'>other</span>)
  <span class='id identifier rubyid_schedule_time'><a href="#schedule_time-instance_method" title="Concurrent::ScheduledTask#schedule_time (method)">schedule_time</a></span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_schedule_time'><a href="#schedule_time-instance_method" title="Concurrent::ScheduledTask#schedule_time (method)">schedule_time</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cancel-instance_method">
  <h3 class='signature '>
    #<strong>cancel</strong>  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Cancel this task and prevent it from executing. A task can only be cancelled if it is pending or unscheduled.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if successfully cancelled else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L235-L244'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='235' data-end='244'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 235</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cancel'>cancel</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_compare_and_set_state'>compare_and_set_state</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_cancelled'>cancelled</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pending'>pending</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unscheduled'>unscheduled</span>)
    <span class='id identifier rubyid_complete'>complete</span>(<span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='const'><a href="../Concurrent.html#CancelledOperationError-constant" title="Concurrent::CancelledOperationError (constant)">CancelledOperationError</a></span>.<span class='id identifier rubyid_new'><a href="../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">new</a></span>)
    <span class='comment'># To avoid deadlocks this call must occur outside of #synchronize
</span>    <span class='comment'># Changing the state above should prevent redundant calls
</span>    <span class='ivar'>@parent</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_remove_task'>remove_task</span><span class='comma'>,</span> <span class='kw'>self</span>)
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execute-instance_method">
  <h3 class='signature '>
    #<strong>execute</strong>  &#x21d2; <code>ScheduledTask</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Execute an <code>:unscheduled</code> <code>ScheduledTask</code>. Immediately sets the state to <code>:pending</code> and starts counting down toward execution. Does nothing if the <code>ScheduledTask</code> is in any state other than <code>:unscheduled</code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>ScheduledTask</code>)</span>
&mdash;    <div class='inline'>
<p>a reference to <code>self</code></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L273-L278'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='273' data-end='278'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 273</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_compare_and_set_state'>compare_and_set_state</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pending'>pending</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unscheduled'>unscheduled</span>)
    <span class='id identifier rubyid_synchronize'>synchronize</span>{ <span class='id identifier rubyid_ns_schedule'><a href="#ns_schedule-instance_method" title="Concurrent::ScheduledTask#ns_schedule (method)">ns_schedule</a></span>(<span class='ivar'>@delay</span>) }
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initial_delay-instance_method">
  <h3 class='signature '>
    #<strong>initial_delay</strong>  &#x21d2; <code>Float</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The <code>delay</code> value given at instantiation.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the initial delay.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L199-L201'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='199' data-end='201'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 199</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initial_delay'>initial_delay</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@delay</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_reschedule-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_reschedule</strong>(delay)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reschedule the task using the given delay and the current time. A task can only be reset while it is <code>:pending</code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>delay</span>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the number of seconds to wait for before executing the task</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if successfully rescheduled else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L326-L329'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='326' data-end='329'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 326</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_reschedule'>ns_reschedule</span>(<span class='id identifier rubyid_delay'>delay</span>)
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_ns_check_state?'>ns_check_state?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pending'>pending</span>)
  <span class='ivar'>@parent</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_remove_task'>remove_task</span><span class='comma'>,</span> <span class='kw'>self</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_ns_schedule'><a href="#ns_schedule-instance_method" title="Concurrent::ScheduledTask#ns_schedule (method)">ns_schedule</a></span>(<span class='id identifier rubyid_delay'>delay</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_schedule-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_schedule</strong>(delay)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Schedule the task using the given delay and the current time.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>delay</span>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the number of seconds to wait for before executing the task</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if successfully rescheduled else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L312-L316'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='312' data-end='316'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 312</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_schedule'>ns_schedule</span>(<span class='id identifier rubyid_delay'>delay</span>)
  <span class='ivar'>@delay</span> <span class='op'>=</span> <span class='id identifier rubyid_delay'>delay</span>
  <span class='ivar'>@time</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span> <span class='op'>+</span> <span class='ivar'>@delay</span>
  <span class='ivar'>@parent</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_post_task'>post_task</span><span class='comma'>,</span> <span class='kw'>self</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process_task-instance_method">
  <h3 class='signature priv'>
    #<strong>process_task</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Execute the task.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L297-L299'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='297' data-end='299'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 297</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process_task'>process_task</span>
  <span class='id identifier rubyid_safe_execute'>safe_execute</span>(<span class='ivar'>@task</span><span class='comma'>,</span> <span class='ivar'>@args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reschedule-instance_method">
  <h3 class='signature '>
    #<strong>reschedule</strong>(delay)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reschedule the task using the given delay and the current time. A task can only be reset while it is <code>:pending</code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>delay</span>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the number of seconds to wait for before executing the task</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if successfully rescheduled else false</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>When given a time that is in the past</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L262-L266'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='262' data-end='266'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 262</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reschedule'>reschedule</span>(<span class='id identifier rubyid_delay'>delay</span>)
  <span class='id identifier rubyid_delay'>delay</span> <span class='op'>=</span> <span class='id identifier rubyid_delay'>delay</span>.<span class='id identifier rubyid_to_f'>to_f</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::ScheduledTask.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>seconds must be greater than zero</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_delay'>delay</span> <span class='op'>&lt;</span> <span class='float'>0.0</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span>{ <span class='id identifier rubyid_ns_reschedule'><a href="#ns_reschedule-instance_method" title="Concurrent::ScheduledTask#ns_reschedule (method)">ns_reschedule</a></span>(<span class='id identifier rubyid_delay'>delay</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset-instance_method">
  <h3 class='signature '>
    #<strong>reset</strong>  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reschedule the task using the original delay and the current time. A task can only be reset while it is <code>:pending</code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if successfully rescheduled else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L250-L252'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='250' data-end='252'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 250</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset'>reset</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span>{ <span class='id identifier rubyid_ns_reschedule'><a href="#ns_reschedule-instance_method" title="Concurrent::ScheduledTask#ns_reschedule (method)">ns_reschedule</a></span>(<span class='ivar'>@delay</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="schedule_time-instance_method">
  <h3 class='signature '>
    #<strong>schedule_time</strong>  &#x21d2; <code>Float</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The monotonic time at which the the task is scheduled to be executed.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the schedule time or nil if <code>unscheduled</code></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/scheduled_task.rb#L206-L208'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='206' data-end='208'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/scheduled_task.rb', line 206</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_schedule_time'>schedule_time</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@time</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>