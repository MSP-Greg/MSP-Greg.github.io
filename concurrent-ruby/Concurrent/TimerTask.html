<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Concurrent::TimerTask &mdash; Concurrent Ruby master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Concurrent::TimerTask",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Concurrent</a> &raquo; 
      <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>TimerTask&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Concurrent::TimerTask</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a>,
          <a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Concern/Observable.html" title="Concurrent::Concern::Observable (module)"><code>Concern::Observable</code></a>,
          <a href="Concern/Dereferenceable.html" title="Concurrent::Concern::Dereferenceable (module)"><code>Concern::Dereferenceable</code></a>,
          <a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a>,
          <a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a>,
          <a href="Concern/Deprecation.html" title="Concurrent::Concern::Deprecation (module)"><code>Concern::Deprecation</code></a>,
          <a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a>,
          <a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)">Concurrent::RubyExecutorService</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)">Concurrent::Synchronization::LockableObject</a></li>
          <li class='next'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)">Concurrent::AbstractExecutorService</a></li>
          <li class='next'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)">Concurrent::RubyExecutorService</a></li>
          <li class='next'>Concurrent::TimerTask</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L165'>lib/concurrent-ruby/concurrent/timer_task.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>A very common concurrency pattern is to run a thread that performs a task at regular intervals. The thread that performs the task sleeps for the given interval then wakes up and performs the task. Lather, rinse, repeat… This pattern causes two problems. First, it is difficult to test the business logic of the task because the task itself is tightly coupled with the concurrency logic. Second, an exception raised while performing the task can cause the entire thread to abend. In a long-running application where the task thread is intended to run for days/weeks/years a crashed task thread can pose a significant problem. <code>TimerTask</code> alleviates both problems.</p>

<p>When a <code>TimerTask</code> is launched it starts a thread for monitoring the execution interval. The <code>TimerTask</code> thread does not perform the task, however. Instead, the <code>TimerTask</code> launches the task on a separate thread. Should the task experience an unrecoverable crash only the task thread will crash. This makes the <code>TimerTask</code> very fault tolerant. Additionally, the <code>TimerTask</code> thread can respond to the success or failure of the task, performing logging or ancillary operations.</p>

<p>One other advantage of <code>TimerTask</code> is that it forces the business logic to be completely decoupled from the concurrency logic. The business logic can be tested separately then passed to the <code>TimerTask</code> for scheduling and running.</p>

<p>A <code>TimerTask</code> supports two different types of interval calculations. A fixed delay will always wait the same amount of time between the completion of one task and the start of the next. A fixed rate will attempt to maintain a constant rate of execution regardless of the duration of the task. For example, if a fixed rate task is scheduled to run every 60 seconds but the task itself takes 10 seconds to complete, the next task will be scheduled to run 50 seconds after the start of the previous task. If the task takes 70 seconds to complete, the next task will be start immediately after the previous task completes. Tasks will not be executed concurrently.</p>

<p>In some cases it may be necessary for a <code>TimerTask</code> to affect its own execution cycle. To facilitate this, a reference to the <code>TimerTask</code> instance is passed as an argument to the provided block every time the task is executed.</p>

<p>The <code>TimerTask</code> class includes the <code>Dereferenceable</code> mixin module so the result of the last execution is always available via the <code>#value</code> method. Dereferencing options can be passed to the <code>TimerTask</code> during construction or at any later time using the <code>#set_deref_options</code> method.</p>

<p><code>TimerTask</code> supports notification through the Ruby standard library <a href="http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html" target="_parent" title="Observable">Observable</a> module. On execution the <code>TimerTask</code> will notify the observers with three arguments: time of execution, the result of the block (or nil on failure), and any raised exceptions (or nil on success).</p>

<p>## Copy Options</p>

<p><a href="../Object.html" title="Object (class)"><code>::Object</code></a> references in Ruby are mutable. This can lead to serious problems when the <code>#value</code> of an object is a mutable reference. Which is always the case unless the value is a <code>Fixnum</code>, <code>Symbol</code>, or similar “primitive” data type. Each instance can be configured with a few options that can help protect the program from potentially dangerous operations. Each of these options can be optionally set when the object instance is created:</p>
<ul><li>
<p><code>:dup_on_deref</code> When true the object will call the <code>#dup</code> method on the <code>value</code> object every time the <code>#value</code> method is called (default: false)</p>
</li><li>
<p><code>:freeze_on_deref</code> When true the object will call the <code>#freeze</code> method on the <code>value</code> object every time the <code>#value</code> method is called (default: false)</p>
</li><li>
<p><code>:copy_on_deref</code> When given a <code>Proc</code> object the <code>Proc</code> will be run every time   the <code>#value</code> method is called. The <code>Proc</code> will be given the current <code>value</code> as its only argument and the result returned by the block will be the return   value of the <code>#value</code> call. When <code>nil</code> this option will be ignored (default: nil)</p>
</li></ul>

<p>When multiple deref options are set the order of operations is strictly defined. The order of deref operations is:</p>
<ul><li>
<p><code>:copy_on_deref</code></p>
</li><li>
<p><code>:dup_on_deref</code></p>
</li><li>
<p><code>:freeze_on_deref</code></p>
</li></ul>

<p>Because of this ordering there is no need to <code>#freeze</code> an object created by a provided <code>:copy_on_deref</code> block. Simply set <code>:freeze_on_deref</code> to <code>true</code>. Setting both <code>:dup_on_deref</code> to <code>true</code> and <code>:freeze_on_deref</code> to <code>true</code> is as close to the behavior of a “pure” functional language (like Erlang, Clojure, or Haskell) as we are likely to get in Ruby.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Basic usage</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>{ <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>

<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span> <span class='comment'>#=&gt; 60 (default)
</span>
<span class='comment'># wait 60 seconds...
</span><span class='comment'>#=&gt; &#39;Boom!&#39;
</span>
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_shutdown'>shutdown</span> <span class='comment'>#=&gt; true</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Configuring <code>:execution_interval</code></p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>5</span>) <span class='kw'>do</span>
       <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>end</span>

<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span> <span class='comment'>#=&gt; 5</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Immediate execution with <code>:run_now</code></p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>run_now:</span> <span class='kw'>true</span>){ <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>

<span class='comment'>#=&gt; &#39;Boom!&#39;</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Configuring <code>:interval_type</code> with either <code>:fixed_delay</code> or <code>:fixed_rate</code>, default is <code>:fixed_delay</code></p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>5</span><span class='comma'>,</span> <span class='label'>interval_type:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixed_rate'>fixed_rate</span>) <span class='kw'>do</span>
       <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>end</span>
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_interval_type'><a href="#interval_type-instance_method" title="Concurrent::TimerTask#interval_type (method)">interval_type</a></span> <span class='comment'>#=&gt; :fixed_rate</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Last <code>#value</code> and <code>Dereferenceable</code> mixin</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(
  <span class='label'>dup_on_deref:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>execution_interval:</span> <span class='int'>5</span>
){ <span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span> }

<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>
<span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>   <span class='comment'>#=&gt; 2013-11-07 18:06:50 -0500
</span><span class='id identifier rubyid_sleep'>sleep</span>(<span class='int'>10</span>)
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_value'>value</span> <span class='comment'>#=&gt; 2013-11-07 18:06:55 -0500</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Controlling execution from within the block</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='id identifier rubyid_timer_task'>timer_task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>1</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
  <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span>.<span class='id identifier rubyid_to_i'>to_i</span>.<span class='id identifier rubyid_times'>times</span>{ <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom! </span><span class='tstring_end'>&#39;</span></span> }
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span> <span class='op'>&gt;</span> <span class='int'>5</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Stopping...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_shutdown'>shutdown</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_timer_task'>timer_task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>
<span class='comment'>#=&gt; Boom!
</span><span class='comment'>#=&gt; Boom! Boom!
</span><span class='comment'>#=&gt; Boom! Boom! Boom!
</span><span class='comment'>#=&gt; Boom! Boom! Boom! Boom!
</span><span class='comment'>#=&gt; Boom! Boom! Boom! Boom! Boom!
</span><span class='comment'>#=&gt; Stopping...</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Observation</p>
</div></p>
      <pre class='example code "#{object.source_type}"'><code><span class='kw'>class</span> <span class='const'>TaskObserver</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>(<span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'>) Execution successfully returned </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'>) Execution failed with error </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ex'>ex</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>1</span>){ <span class='int'>42</span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_add_observer'>add_observer</span>(<span class='const'>TaskObserver</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>)
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>4</span>

<span class='comment'>#=&gt; (2013-10-13 19:08:58 -0400) Execution successfully returned 42
</span><span class='comment'>#=&gt; (2013-10-13 19:08:59 -0400) Execution successfully returned 42
</span><span class='comment'>#=&gt; (2013-10-13 19:09:00 -0400) Execution successfully returned 42
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_shutdown'>shutdown</span>

<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>1</span>){ <span class='id identifier rubyid_sleep'>sleep</span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_add_observer'>add_observer</span>(<span class='const'>TaskObserver</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>)
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>

<span class='comment'>#=&gt; (2013-10-13 19:07:25 -0400) Execution timed out
</span><span class='comment'>#=&gt; (2013-10-13 19:07:27 -0400) Execution timed out
</span><span class='comment'>#=&gt; (2013-10-13 19:07:29 -0400) Execution timed out
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_shutdown'>shutdown</span>

<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>1</span>){ <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_add_observer'>add_observer</span>(<span class='const'>TaskObserver</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>)
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>

<span class='comment'>#=&gt; (2013-10-13 19:09:37 -0400) Execution failed with error StandardError
</span><span class='comment'>#=&gt; (2013-10-13 19:09:38 -0400) Execution failed with error StandardError
</span><span class='comment'>#=&gt; (2013-10-13 19:09:39 -0400) Execution failed with error StandardError
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_shutdown'>shutdown</span></code></pre>
  </div>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html" target="_parent" title="http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html">http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html</a></li>
          <li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html" target="_parent" title="http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html">http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html</a></li>
      </ul>

</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DEFAULT_INTERVAL_TYPE-constant' class='summary_signature'>DEFAULT_INTERVAL_TYPE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default <code>:interval_type</code></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L181-L181'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 181</a>    <pre class='code ruby'><span class='const'><a href="#FIXED_DELAY-constant" title="Concurrent::TimerTask::FIXED_DELAY (constant)">FIXED_DELAY</a></span></pre>
  </li>
  <li>
    <span id='EXECUTION_INTERVAL-constant' class='summary_signature'>EXECUTION_INTERVAL =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default <code>:execution_interval</code> in seconds.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L170-L170'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 170</a>    <pre class='code ruby'><span class='int'>60</span></pre>
  </li>
  <li>
    <span id='FIXED_DELAY-constant' class='summary_signature'>FIXED_DELAY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Maintain the interval between the end of one execution and the start of the next execution.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L173-L173'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 173</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='id identifier rubyid_fixed_delay'>fixed_delay</span></pre>
  </li>
  <li>
    <span id='FIXED_RATE-constant' class='summary_signature'>FIXED_RATE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Maintain the interval between the start of one execution and the start of the next. If execution time exceeds the interval, the next execution will start immediately after the previous execution finishes. Executions will not run concurrently.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L178-L178'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 178</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='id identifier rubyid_fixed_rate'>fixed_rate</span></pre>
  </li>
</ul>
  <h3 class='inherited'><a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="Concern/Logging.html#SEV_LABEL-constant" title="Concurrent::Concern::Logging::SEV_LABEL (constant)">SEV_LABEL</a>
  </p>
  <h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
  <p  class='inherited'>
    <a href="AbstractExecutorService.html#FALLBACK_POLICIES-constant" title="Concurrent::AbstractExecutorService::FALLBACK_POLICIES (constant)">FALLBACK_POLICIES</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#execute-class_method" title=".execute (class method)">.<strong>execute</strong>(opts = {}) {|task| ... } &#x21d2; TimerTask </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create and execute a new <code>TimerTask</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(opts = {}, &amp;task)  &#x21d2; TimerTask </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new <code>TimerTask</code> with the given task and configuration.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="RubyExecutorService.html#new-class_method" title="Concurrent::RubyExecutorService.new (method)">.new</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#new-class_method" title="Concurrent::AbstractExecutorService.new (method)">.new</a></td>
      <td><div class='inline'><p>Create a new thread pool.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#execution_interval-instance_method" title="#execution_interval (instance method)">#<strong>execution_interval</strong>  &#x21d2; Fixnum </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#execution_interval=-instance_method" title="#execution_interval= (instance method)">#<strong>execution_interval=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>See additional method definition at line 259.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#interval_type-instance_method" title="#interval_type (instance method)">#<strong>interval_type</strong>  &#x21d2; Symbol </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#running%3F-instance_method" title="#running? (instance method)">#<strong>running?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Is the executor running?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#timeout_interval-instance_method" title="#timeout_interval (instance method)">#<strong>timeout_interval</strong>  &#x21d2; Fixnum </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#timeout_interval=-instance_method" title="#timeout_interval= (instance method)">#<strong>timeout_interval=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>See additional method definition at line 281.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Concern/Dereferenceable.html" title="Concurrent::Concern::Dereferenceable (module)"><code>Concern::Dereferenceable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Concern/Dereferenceable.html#value-instance_method" title="Concurrent::Concern::Dereferenceable#value (method)">#value</a></td>
      <td><div class='inline'><p>Return the value this object represents after applying the options specified by the <code>#set_deref_options</code> method.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="RubyExecutorService.html#fallback_policy-instance_method" title="Concurrent::RubyExecutorService#fallback_policy (method)">#fallback_policy</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_running%3F-instance_method" title="Concurrent::RubyExecutorService#ns_running? (method)">#ns_running?</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_shutdown%3F-instance_method" title="Concurrent::RubyExecutorService#ns_shutdown? (method)">#ns_shutdown?</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_shuttingdown%3F-instance_method" title="Concurrent::RubyExecutorService#ns_shuttingdown? (method)">#ns_shuttingdown?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m rw deprecated' href="AbstractExecutorService.html#auto_terminate=-instance_method" title="Concurrent::AbstractExecutorService#auto_terminate= (method)">#auto_terminate=</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the auto-terminate behavior for this executor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="AbstractExecutorService.html#auto_terminate%3F-instance_method" title="Concurrent::AbstractExecutorService#auto_terminate? (method)">#auto_terminate?</a></td>
      <td><div class='inline'><p>Is the executor auto-terminate when the application exits?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="AbstractExecutorService.html#fallback_policy-instance_method" title="Concurrent::AbstractExecutorService#fallback_policy (method)">#fallback_policy</a>,
        <a class='i_m ro' href="AbstractExecutorService.html#name-instance_method" title="Concurrent::AbstractExecutorService#name (method)">#name</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#running%3F-instance_method" title="Concurrent::AbstractExecutorService#running? (method)">#running?</a></td>
      <td><div class='inline'><p>Is the executor running?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shutdown-instance_method" title="Concurrent::AbstractExecutorService#shutdown (method)">#shutdown</a></td>
      <td><div class='inline'><p>Begin an orderly shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shutdown%3F-instance_method" title="Concurrent::AbstractExecutorService#shutdown? (method)">#shutdown?</a></td>
      <td><div class='inline'><p>Is the executor shutdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shuttingdown%3F-instance_method" title="Concurrent::AbstractExecutorService#shuttingdown? (method)">#shuttingdown?</a></td>
      <td><div class='inline'><p>Is the executor shuttingdown?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro priv' href="AbstractExecutorService.html#ns_auto_terminate%3F-instance_method" title="Concurrent::AbstractExecutorService#ns_auto_terminate? (method)">#ns_auto_terminate?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="ExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::ExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="ExecutorService.html#serialized%3F-instance_method" title="Concurrent::ExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#execute-instance_method" title="#execute (instance method)">#<strong>execute</strong>  &#x21d2; TimerTask </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Execute a previously created <code>TimerTask</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#calculate_next_interval-instance_method" title="#calculate_next_interval (instance method)">#<strong>calculate_next_interval</strong>(start_time)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#execute_task-instance_method" title="#execute_task (instance method)">#<strong>execute_task</strong>(completion)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_initialize-instance_method" title="#ns_initialize (instance method)">#<strong>ns_initialize</strong>(opts, &amp;task)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_kill_execution-instance_method" title="#ns_kill_execution (instance method)">#<strong>ns_kill_execution</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_shutdown_execution-instance_method" title="#ns_shutdown_execution (instance method)">#<strong>ns_shutdown_execution</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#schedule_next_task-instance_method" title="#schedule_next_task (instance method)">#<strong>schedule_next_task</strong>(interval = execution_interval)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited'><a href="Concern/Observable.html" title="Concurrent::Concern::Observable (module)"><code>Concern::Observable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#add_observer-instance_method" title="Concurrent::Concern::Observable#add_observer (method)">#add_observer</a></td>
      <td><div class='inline'><p>Adds an observer to this set.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#count_observers-instance_method" title="Concurrent::Concern::Observable#count_observers (method)">#count_observers</a></td>
      <td><div class='inline'><p>Return the number of observers associated with this object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#delete_observer-instance_method" title="Concurrent::Concern::Observable#delete_observer (method)">#delete_observer</a></td>
      <td><div class='inline'><p>Remove <code>observer</code> as an observer on this object so that it will no longer receive notifications.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#delete_observers-instance_method" title="Concurrent::Concern::Observable#delete_observers (method)">#delete_observers</a></td>
      <td><div class='inline'><p>Remove all observers associated with this object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Observable.html#with_observer-instance_method" title="Concurrent::Concern::Observable#with_observer (method)">#with_observer</a></td>
      <td><div class='inline'><p>As <code>#add_observer</code> but can be used for chaining.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Dereferenceable.html" title="Concurrent::Concern::Dereferenceable (module)"><code>Concern::Dereferenceable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Dereferenceable.html#deref-instance_method" title="Concurrent::Concern::Dereferenceable#deref (method)">#deref</a></td>
      <td><div class='inline'><p>Alias for <a href="Concern/Dereferenceable.html#value-instance_method" title="Concurrent::Concern::Dereferenceable#value (method)">Concern::Dereferenceable#value</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Concern/Dereferenceable.html#apply_deref_options-instance_method" title="Concurrent::Concern::Dereferenceable#apply_deref_options (method)">#apply_deref_options</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Concern/Dereferenceable.html#ns_set_deref_options-instance_method" title="Concurrent::Concern::Dereferenceable#ns_set_deref_options (method)">#ns_set_deref_options</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the options which define the operations <code>#value</code> performs before returning data to the caller (dereferencing).</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#<<-instance_method" title="Concurrent::RubyExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m deprecated' href="RubyExecutorService.html#auto_terminate=-instance_method" title="Concurrent::RubyExecutorService#auto_terminate= (method)">#auto_terminate=</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the auto-terminate behavior for this executor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#auto_terminate%3F-instance_method" title="Concurrent::RubyExecutorService#auto_terminate? (method)">#auto_terminate?</a></td>
      <td><div class='inline'><p>Is the executor auto-terminate when the application exits?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::RubyExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#kill-instance_method" title="Concurrent::RubyExecutorService#kill (method)">#kill</a></td>
      <td><div class='inline'><p>Begin an immediate shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#post-instance_method" title="Concurrent::RubyExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#running%3F-instance_method" title="Concurrent::RubyExecutorService#running? (method)">#running?</a></td>
      <td><div class='inline'><p>Is the executor running?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#serialized%3F-instance_method" title="Concurrent::RubyExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shutdown-instance_method" title="Concurrent::RubyExecutorService#shutdown (method)">#shutdown</a></td>
      <td><div class='inline'><p>Begin an orderly shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shutdown%3F-instance_method" title="Concurrent::RubyExecutorService#shutdown? (method)">#shutdown?</a></td>
      <td><div class='inline'><p>Is the executor shutdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shuttingdown%3F-instance_method" title="Concurrent::RubyExecutorService#shuttingdown? (method)">#shuttingdown?</a></td>
      <td><div class='inline'><p>Is the executor shuttingdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#wait_for_termination-instance_method" title="Concurrent::RubyExecutorService#wait_for_termination (method)">#wait_for_termination</a></td>
      <td><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="RubyExecutorService.html#ns_shutdown_execution-instance_method" title="Concurrent::RubyExecutorService#ns_shutdown_execution (method)">#ns_shutdown_execution</a>,
        <a class='i_m priv' href="RubyExecutorService.html#stop_event-instance_method" title="Concurrent::RubyExecutorService#stop_event (method)">#stop_event</a>,
        <a class='i_m priv' href="RubyExecutorService.html#stopped_event-instance_method" title="Concurrent::RubyExecutorService#stopped_event (method)">#stopped_event</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#<<-instance_method" title="Concurrent::AbstractExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::AbstractExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#kill-instance_method" title="Concurrent::AbstractExecutorService#kill (method)">#kill</a></td>
      <td><div class='inline'><p>Begin an immediate shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#post-instance_method" title="Concurrent::AbstractExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#serialized%3F-instance_method" title="Concurrent::AbstractExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="AbstractExecutorService.html#to_s-instance_method" title="Concurrent::AbstractExecutorService#to_s (method)">#to_s</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#wait_for_termination-instance_method" title="Concurrent::AbstractExecutorService#wait_for_termination (method)">#wait_for_termination</a></td>
      <td><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#fallback_action-instance_method" title="Concurrent::AbstractExecutorService#fallback_action (method)">#fallback_action</a></td>
      <td><div class='inline'><p>Returns an action which executes the <code>fallback_policy</code> once the queue size reaches <code>max_queue</code>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="AbstractExecutorService.html#ns_execute-instance_method" title="Concurrent::AbstractExecutorService#ns_execute (method)">#ns_execute</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#ns_kill_execution-instance_method" title="Concurrent::AbstractExecutorService#ns_kill_execution (method)">#ns_kill_execution</a></td>
      <td><div class='inline'><p>Callback method called when the executor has been killed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#ns_shutdown_execution-instance_method" title="Concurrent::AbstractExecutorService#ns_shutdown_execution (method)">#ns_shutdown_execution</a></td>
      <td><div class='inline'><p>Callback method called when an orderly shutdown has completed.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Deprecation.html" title="Concurrent::Concern::Deprecation (module)"><code>Concern::Deprecation</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Concern/Deprecation.html#deprecated-instance_method" title="Concurrent::Concern::Deprecation#deprecated (method)">#deprecated</a>,
        <a class='i_m ' href="Concern/Deprecation.html#deprecated_method-instance_method" title="Concurrent::Concern::Deprecation#deprecated_method (method)">#deprecated_method</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ExecutorService.html#<<-instance_method" title="Concurrent::ExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ExecutorService.html#post-instance_method" title="Concurrent::ExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Logging.html#log-instance_method" title="Concurrent::Concern::Logging#log (method)">#log</a></td>
      <td><div class='inline'><p>Logs through <a href="../Concurrent.html#global_logger-class_method" title="Concurrent.global_logger (method)">global_logger</a>, it can be overridden by setting @logger.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Synchronization/LockableObject.html#new_condition-instance_method" title="Concurrent::Synchronization::LockableObject#new_condition (method)">#new_condition</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(opts = {}, &amp;task)  &#x21d2; <code>TimerTask</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new <code>TimerTask</code> with the given task and configuration.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L209-L213'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='209' data-end='213'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 209</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>super</span>
  <span class='id identifier rubyid_set_deref_options'>set_deref_options</span> <span class='id identifier rubyid_opts'>opts</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="execute-class_method">
  <h3 class='signature  first'>
    .<strong>execute</strong>(opts = {}) {|task| ... } &#x21d2; <code>TimerTask</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create and execute a new <code>TimerTask</code>.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_execute'>execute</span>(<span class='label'>execution_interval:</span> <span class='int'>10</span>){ <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World\n</span><span class='tstring_end'>&quot;</span></span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_running?'><a href="#running%3F-instance_method" title="Concurrent::TimerTask#running? (method)">running?</a></span> <span class='comment'>#=&gt; true</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>opts</span>
    <span class='type'>(<a href="Hash.html" title="Concurrent::Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>the options defining task execution.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>opts</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:execution_interval</span>
          <span class='type'>(<code>Float</code>)</span>
            &mdash; <div class='inline'>
<p>number of seconds between task executions (default: <a href="#EXECUTION_INTERVAL-constant" title="Concurrent::TimerTask::EXECUTION_INTERVAL (constant)">EXECUTION_INTERVAL</a>)</p>
</div>        </li>
        <li>
          <span class='name'>:run_now</span>
          <span class='type'>(<code>Boolean</code>)</span>
            &mdash; <div class='inline'>
<p>Whether to run the task immediately upon instantiation or to wait until the first #  execution_interval has passed (default: false)</p>
</div>        </li>
        <li>
          <span class='name'>executor,</span>
          <span class='type'>(<code>Executor</code>)</span>
            &mdash; <div class='inline'>
<p>default is <a href="../Concurrent.html#global_io_executor-class_method" title="Concurrent.global_io_executor (method)">Concurrent.global_io_executor</a></p>
</div>        </li>
        <li>
          <span class='name'>:dup_on_deref</span>
          <span class='type'>(<code>Boolean</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>Call <code>#dup</code> before returning the data from <code>#value</code></p>
</div>        </li>
        <li>
          <span class='name'>:freeze_on_deref</span>
          <span class='type'>(<code>Boolean</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>Call <code>#freeze</code> before returning the data from <code>#value</code></p>
</div>        </li>
        <li>
          <span class='name'>:copy_on_deref</span>
          <span class='type'>(<code>Proc</code>)</span>
          <span class='default'> &mdash; default:
              <tt>nil</tt>          </span>
            &mdash; <div class='inline'>
<p>When calling the <code>#value</code> method, call the given proc passing the internal value as the sole argument then return the new value returned from the proc.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p>to the block after <code>:execution_interval</code> seconds have passed since the last yield</p>
</div>
  </li>
</ul>
<p class='tag_title'>Yield Parameters:</p>
<ul class='yieldparam'>
  <li>
    <span class='name'>task</span>
    <span class='type'></span>
&mdash;    <div class='inline'>
<p>a reference to the <code>TimerTask</code> instance so that the block can control its own lifecycle. Necessary since <code>self</code> will refer to the execution context of the block rather than the running <code>TimerTask</code>.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>TimerTask</code>)</span>
&mdash;    <div class='inline'>
<p>the new <code>TimerTask</code></p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p>ArgumentError when no block is given.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L252-L254'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='252' data-end='254'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 252</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_execute'>execute</span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>).<span class='id identifier rubyid_execute'>execute</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="execution_interval-instance_method">
  <h3 class='signature rw first'>
    #<strong>execution_interval</strong>  &#x21d2; <code>Fixnum</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Fixnum</code>)</span>
&mdash;    <div class='inline'>
<p>Number of seconds after the task completes before the task is performed again.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L259-L261'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='259' data-end='261'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 259</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execution_interval'>execution_interval</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@execution_interval</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execution_interval=-instance_method">
  <h3 class='signature rw'>
    #<strong>execution_interval=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>See additional method definition at line 259.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L266-L268'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='266' data-end='268'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 266</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@execution_interval</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="interval_type-instance_method">
  <h3 class='signature ro'>
    #<strong>interval_type</strong>  &#x21d2; <code>Symbol</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>method to calculate the interval between executions</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L276-L276'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='276' data-end='276'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 276</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_interval_type'>interval_type</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="running?-instance_method">
  <h3 class='signature ro'>
    #<strong>running?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Is the executor running?</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p><code>true</code> when running, <code>false</code> when shutting down or shutdown</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L218-L220'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='218' data-end='220'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 218</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_running?'>running?</span>
  <span class='ivar'>@running</span>.<span class='id identifier rubyid_true?'>true?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timeout_interval-instance_method">
  <h3 class='signature rw'>
    #<strong>timeout_interval</strong>  &#x21d2; <code>Fixnum</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Fixnum</code>)</span>
&mdash;    <div class='inline'>
<p>Number of seconds the task can run before it is considered to have failed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L281-L283'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='281' data-end='283'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 281</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout_interval'>timeout_interval</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TimerTask timeouts are now ignored as these were not able to be implemented correctly</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timeout_interval=-instance_method">
  <h3 class='signature rw'>
    #<strong>timeout_interval=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>See additional method definition at line 281.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L288-L290'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='288' data-end='290'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 288</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout_interval'><a href="#timeout_interval-instance_method" title="Concurrent::TimerTask#timeout_interval (method)">timeout_interval</a></span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TimerTask timeouts are now ignored as these were not able to be implemented correctly</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="calculate_next_interval-instance_method">
  <h3 class='signature priv first'>
    #<strong>calculate_next_interval</strong>(start_time)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L352-L359'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='352' data-end='359'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 352</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_calculate_next_interval'>calculate_next_interval</span>(<span class='id identifier rubyid_start_time'>start_time</span>)
  <span class='kw'>if</span> <span class='ivar'>@interval_type</span> <span class='op'>==</span> <span class='const'><a href="#FIXED_RATE-constant" title="Concurrent::TimerTask::FIXED_RATE (constant)">FIXED_RATE</a></span>
    <span class='id identifier rubyid_run_time'>run_time</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span> <span class='op'>-</span> <span class='id identifier rubyid_start_time'>start_time</span>
    [<span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span> <span class='op'>-</span> <span class='id identifier rubyid_run_time'>run_time</span><span class='comma'>,</span> <span class='int'>0</span>].<span class='id identifier rubyid_max'>max</span>
  <span class='kw'>else</span> <span class='comment'># FIXED_DELAY
</span>    <span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execute-instance_method">
  <h3 class='signature '>
    #<strong>execute</strong>  &#x21d2; <code>TimerTask</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Execute a previously created <code>TimerTask</code>.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Instance and execute in separate steps</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>10</span>){ <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World\n</span><span class='tstring_end'>&quot;</span></span> }
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_running?'><a href="#running%3F-instance_method" title="Concurrent::TimerTask#running? (method)">running?</a></span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_execute'>execute</span>
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_running?'><a href="#running%3F-instance_method" title="Concurrent::TimerTask#running? (method)">running?</a></span> <span class='comment'>#=&gt; true</span></code></pre>
        <p class='example_title'><div class='inline'>
<p>Instance and execute in one line</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'>TimerTask</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='label'>execution_interval:</span> <span class='int'>10</span>){ <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World\n</span><span class='tstring_end'>&quot;</span></span> }.<span class='id identifier rubyid_execute'>execute</span>
<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_running?'><a href="#running%3F-instance_method" title="Concurrent::TimerTask#running? (method)">running?</a></span> <span class='comment'>#=&gt; true</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>TimerTask</code>)</span>
&mdash;    <div class='inline'>
<p>a reference to <code>self</code></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L235-L243'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='235' data-end='243'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 235</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='ivar'>@running</span>.<span class='id identifier rubyid_false?'>false?</span>
      <span class='ivar'>@running</span>.<span class='id identifier rubyid_make_true'>make_true</span>
      <span class='id identifier rubyid_schedule_next_task'><a href="#schedule_next_task-instance_method" title="Concurrent::TimerTask#schedule_next_task (method)">schedule_next_task</a></span>(<span class='ivar'>@run_now</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='ivar'>@execution_interval</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execute_task-instance_method">
  <h3 class='signature priv'>
    #<strong>execute_task</strong>(completion)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L336-L349'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='336' data-end='349'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 336</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_task'>execute_task</span>(<span class='id identifier rubyid_completion'>completion</span>)
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='ivar'>@running</span>.<span class='id identifier rubyid_true?'>true?</span>
  <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span>
  <span class='id identifier rubyid__success'>_success</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span> <span class='op'>=</span> <span class='ivar'>@task</span>.<span class='id identifier rubyid_execute'><a href="#execute-class_method" title="Concurrent::TimerTask.execute (method)">execute</a></span>(<span class='kw'>self</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_completion'>completion</span>.<span class='id identifier rubyid_try?'>try?</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='id identifier rubyid_schedule_next_task'><a href="#schedule_next_task-instance_method" title="Concurrent::TimerTask#schedule_next_task (method)">schedule_next_task</a></span>(<span class='id identifier rubyid_calculate_next_interval'><a href="#calculate_next_interval-instance_method" title="Concurrent::TimerTask#calculate_next_interval (method)">calculate_next_interval</a></span>(<span class='id identifier rubyid_start_time'>start_time</span>))
    <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>
    <span class='id identifier rubyid_observers'>observers</span>.<span class='id identifier rubyid_notify_observers'>notify_observers</span> <span class='kw'>do</span>
      [<span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='kw'>self</span>.<span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span>]
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_initialize-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_initialize</strong>(opts, &amp;task)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L296-L315'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='296' data-end='315'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 296</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_initialize'>ns_initialize</span>(<span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_set_deref_options'>set_deref_options</span>(<span class='id identifier rubyid_opts'>opts</span>)

  <span class='kw'>self</span>.<span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_execution'>execution</span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span>] <span class='op'>||</span> <span class='const'><a href="#EXECUTION_INTERVAL-constant" title="Concurrent::TimerTask::EXECUTION_INTERVAL (constant)">EXECUTION_INTERVAL</a></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_interval_type'><a href="#interval_type-instance_method" title="Concurrent::TimerTask#interval_type (method)">interval_type</a></span>] <span class='op'>&amp;&amp;</span> <span class='op'>!</span>[<span class='const'><a href="#FIXED_DELAY-constant" title="Concurrent::TimerTask::FIXED_DELAY (constant)">FIXED_DELAY</a></span><span class='comma'>,</span> <span class='const'><a href="#FIXED_RATE-constant" title="Concurrent::TimerTask::FIXED_RATE (constant)">FIXED_RATE</a></span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_interval_type'><a href="#interval_type-instance_method" title="Concurrent::TimerTask#interval_type (method)">interval_type</a></span>])
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerTask.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>interval_type must be either :fixed_delay or :fixed_rate</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_timeout'>timeout</span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_timeout_interval'><a href="#timeout_interval-instance_method" title="Concurrent::TimerTask#timeout_interval (method)">timeout_interval</a></span>]
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TimeTask timeouts are now ignored as these were not able to be implemented correctly</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@run_now</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_now'>now</span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_run_now'>run_now</span>]
  <span class='ivar'>@interval_type</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_interval_type'><a href="#interval_type-instance_method" title="Concurrent::TimerTask#interval_type (method)">interval_type</a></span>] <span class='op'>||</span> <span class='const'><a href="#DEFAULT_INTERVAL_TYPE-constant" title="Concurrent::TimerTask::DEFAULT_INTERVAL_TYPE (constant)">DEFAULT_INTERVAL_TYPE</a></span>
  <span class='ivar'>@task</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'><a href="SafeTaskExecutor.html" title="Concurrent::SafeTaskExecutor (class)">SafeTaskExecutor</a></span>.<span class='id identifier rubyid_new'><a href="SafeTaskExecutor.html#new-class_method" title="Concurrent::SafeTaskExecutor.new (method)">new</a></span>(<span class='id identifier rubyid_task'>task</span>)
  <span class='ivar'>@executor</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_executor'><a href="../Concurrent.html#executor-class_method" title="Concurrent.executor (method)">executor</a></span>] <span class='op'>||</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_global_io_executor'><a href="../Concurrent.html#global_io_executor-class_method" title="Concurrent.global_io_executor (method)">global_io_executor</a></span>
  <span class='ivar'>@running</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'><a href="AtomicBoolean.html" title="Concurrent::AtomicBoolean (class)">AtomicBoolean</a></span>.<span class='id identifier rubyid_new'><a href="AtomicBoolean.html#new-class_method" title="Concurrent::AtomicBoolean.new (method)">new</a></span>(<span class='kw'>false</span>)
  <span class='ivar'>@value</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>self</span>.<span class='id identifier rubyid_observers'>observers</span> <span class='op'>=</span> <span class='const'><a href="Collection.html" title="Concurrent::Collection (module)">Collection</a></span><span class='op'>::</span><span class='const'><a href="Collection/CopyOnNotifyObserverSet.html" title="Concurrent::Collection::CopyOnNotifyObserverSet (class)">CopyOnNotifyObserverSet</a></span>.<span class='id identifier rubyid_new'><a href="Collection/CopyOnNotifyObserverSet.html#new-class_method" title="Concurrent::Collection::CopyOnNotifyObserverSet.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_kill_execution-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_kill_execution</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L324-L327'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='324' data-end='327'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 324</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_kill_execution'>ns_kill_execution</span>
  <span class='ivar'>@running</span>.<span class='id identifier rubyid_make_false'>make_false</span>
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_shutdown_execution-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_shutdown_execution</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L318-L321'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='318' data-end='321'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 318</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_shutdown_execution'>ns_shutdown_execution</span>
  <span class='ivar'>@running</span>.<span class='id identifier rubyid_make_false'>make_false</span>
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="schedule_next_task-instance_method">
  <h3 class='signature priv'>
    #<strong>schedule_next_task</strong>(interval = execution_interval)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/timer_task.rb#L330-L333'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='330' data-end='333'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/timer_task.rb', line 330</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_schedule_next_task'>schedule_next_task</span>(<span class='id identifier rubyid_interval'>interval</span> <span class='op'>=</span> <span class='id identifier rubyid_execution_interval'><a href="#execution_interval-instance_method" title="Concurrent::TimerTask#execution_interval (method)">execution_interval</a></span>)
  <span class='const'><a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)">ScheduledTask</a></span>.<span class='id identifier rubyid_execute'><a href="ScheduledTask.html#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">execute</a></span>(<span class='id identifier rubyid_interval'>interval</span><span class='comma'>,</span> <span class='label'>executor:</span> <span class='ivar'>@executor</span><span class='comma'>,</span> <span class='label'>args:</span> [<span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'><a href="Event.html" title="Concurrent::Event (class)">Event</a></span>.<span class='id identifier rubyid_new'><a href="Event.html#new-class_method" title="Concurrent::Event.new (method)">new</a></span>]<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_execute_task'><a href="#execute_task-instance_method" title="Concurrent::TimerTask#execute_task (method)">execute_task</a></span>))
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>