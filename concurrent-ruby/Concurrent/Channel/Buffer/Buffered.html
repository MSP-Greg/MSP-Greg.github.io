<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Concurrent::Channel::Buffer::Buffered &mdash; Concurrent Ruby master</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Concurrent::Channel::Buffer::Buffered",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Concurrent</a> &raquo; 
      <a href='../../../_index.html#alpha_B'>Index (B)</a> &raquo; 
        <a href="../../../Concurrent.html" title="Concurrent (module)">Concurrent</a> &raquo; 
        <a href="../../Channel.html" title="Concurrent::Channel (class)">Channel</a> &raquo; 
        <a href="../Buffer.html" title="Concurrent::Channel::Buffer (module)">Buffer</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Buffered&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Concurrent::Channel::Buffer::Buffered</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="Dropping.html" title="Concurrent::Channel::Buffer::Dropping (class)">Dropping</a>, <a href="Sliding.html" title="Concurrent::Channel::Buffer::Sliding (class)">Sliding</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="Base.html" title="Concurrent::Channel::Buffer::Base (class)"><code>Base</code></a>,
          <a href="../../Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Base.html" title="Concurrent::Channel::Buffer::Base (class)"><code>Base</code></a>,
          <a href="../../Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Base.html" title="Concurrent::Channel::Buffer::Base (class)">Concurrent::Channel::Buffer::Base</a></span>
        <ul class='fullTree'>
          <li><a href="../../../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'><a href="../../Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)">Concurrent::Synchronization::LockableObject</a></li>
          <li class='next'><a href="Base.html" title="Concurrent::Channel::Buffer::Base (class)">Concurrent::Channel::Buffer::Base</a></li>
          <li class='next'>Concurrent::Channel::Buffer::Buffered</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L12'>lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>A buffer with a fixed internal capacity. Items can be put onto the buffer without blocking until the internal capacity is reached. Once the buffer is at capacity, subsequent calls to <a href="#put-instance_method" title="Concurrent::Channel::Buffer::Buffered#put (method)">#put</a> will block until an item is removed from the buffer, creating spare capacity.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</div>
<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="Base.html" title="Concurrent::Channel::Buffer::Base (class)"><code>Base</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Base.html#new-class_method" title="Concurrent::Channel::Buffer::Base.new (method)">.new</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#ns_empty%3F-instance_method" title="#ns_empty? (instance method)">#<strong>ns_empty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Predicate indicating if the buffer is empty.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#ns_full%3F-instance_method" title="#ns_full? (instance method)">#<strong>ns_full?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Predicate indicating if the buffer is full.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Base.html" title="Concurrent::Channel::Buffer::Base (class)"><code>Base</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Base.html#blocking%3F-instance_method" title="Concurrent::Channel::Buffer::Base#blocking? (method)">#blocking?</a></td>
      <td><div class='inline'><p>Predicate indicating if this buffer will block <a href="#put-instance_method" title="Concurrent::Channel::Buffer::Buffered#put (method)">#put</a> operations once it reaches its maximum capacity.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Base.html#capacity-instance_method" title="Concurrent::Channel::Buffer::Base#capacity (method)">#capacity</a></td>
      <td><div class='inline'><p>The maximum number of values which can be <a href="#put-instance_method" title="Concurrent::Channel::Buffer::Buffered#put (method)">#put</a> onto the buffer it becomes full.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Base.html#closed%3F-instance_method" title="Concurrent::Channel::Buffer::Base#closed? (method)">#closed?</a></td>
      <td><div class='inline'><p>Predicate indicating is this buffer closed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Base.html#empty%3F-instance_method" title="Concurrent::Channel::Buffer::Base#empty? (method)">#empty?</a></td>
      <td><div class='inline'><p>Predicate indicating if the buffer is empty.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="Base.html#full%3F-instance_method" title="Concurrent::Channel::Buffer::Base#full? (method)">#full?</a></td>
      <td><div class='inline'><p>Predicate indicating if the buffer is full.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Base.html#size-instance_method" title="Concurrent::Channel::Buffer::Base#size (method)">#size</a></td>
      <td><div class='inline'><p>The number of items currently in the buffer.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m rw priv' href="Base.html#buffer-instance_method" title="Concurrent::Channel::Buffer::Base#buffer (method)">#buffer</a>,
        <a class='i_m rw priv' href="Base.html#buffer=-instance_method" title="Concurrent::Channel::Buffer::Base#buffer= (method)">#buffer=</a>,
        <a class='i_m rw priv' href="Base.html#capacity=-instance_method" title="Concurrent::Channel::Buffer::Base#capacity= (method)">#capacity=</a>,
        <a class='i_m rw priv' href="Base.html#closed=-instance_method" title="Concurrent::Channel::Buffer::Base#closed= (method)">#closed=</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="Base.html#ns_closed%3F-instance_method" title="Concurrent::Channel::Buffer::Base#ns_closed? (method)">#ns_closed?</a></td>
      <td><div class='inline'><p>Predicate indicating is this buffer closed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="Base.html#ns_empty%3F-instance_method" title="Concurrent::Channel::Buffer::Base#ns_empty? (method)">#ns_empty?</a></td>
      <td><div class='inline'><p>Predicate indicating if the buffer is empty.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="Base.html#ns_full%3F-instance_method" title="Concurrent::Channel::Buffer::Base#ns_full? (method)">#ns_full?</a></td>
      <td><div class='inline'><p>Predicate indicating if the buffer is full.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m rw priv' href="Base.html#size=-instance_method" title="Concurrent::Channel::Buffer::Base#size= (method)">#size=</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#next-instance_method" title="#next (instance method)">#<strong>next</strong>  &#x21d2; Object, Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Take the next “item” from the buffer and also return a boolean indicating if “more” items can be taken.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#offer-instance_method" title="#offer (instance method)">#<strong>offer</strong>(item)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Put an item onto the buffer if possible.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#poll-instance_method" title="#poll (instance method)">#<strong>poll</strong>  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Take the next item from the buffer if one is available else return immediately.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#put-instance_method" title="#put (instance method)">#<strong>put</strong>(item)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Put an item onto the buffer if possible.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#take-instance_method" title="#take (instance method)">#<strong>take</strong>  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Take an item from the buffer if one is available.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_initialize-instance_method" title="#ns_initialize (instance method)">#<strong>ns_initialize</strong>(size)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new buffer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_put_onto_buffer-instance_method" title="#ns_put_onto_buffer (instance method)">#<strong>ns_put_onto_buffer</strong>(item)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Put an item onto the buffer if possible.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_size-instance_method" title="#ns_size (instance method)">#<strong>ns_size</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>The number of items currently in the buffer.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Base.html" title="Concurrent::Channel::Buffer::Base (class)"><code>Base</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Base.html#close-instance_method" title="Concurrent::Channel::Buffer::Base#close (method)">#close</a></td>
      <td><div class='inline'><p>Close the buffer, preventing new items from being added.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Base.html#next-instance_method" title="Concurrent::Channel::Buffer::Base#next (method)">#next</a></td>
      <td><div class='inline'><p>Take the next “item” from the buffer and also return a boolean indicating if “more” items can be taken.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Base.html#offer-instance_method" title="Concurrent::Channel::Buffer::Base#offer (method)">#offer</a></td>
      <td><div class='inline'><p>Put an item onto the buffer if possible.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Base.html#poll-instance_method" title="Concurrent::Channel::Buffer::Base#poll (method)">#poll</a></td>
      <td><div class='inline'><p>Take the next item from the buffer if one is available else return immediately.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Base.html#put-instance_method" title="Concurrent::Channel::Buffer::Base#put (method)">#put</a></td>
      <td><div class='inline'><p>Put an item onto the buffer if possible.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Base.html#take-instance_method" title="Concurrent::Channel::Buffer::Base#take (method)">#take</a></td>
      <td><div class='inline'><p>Take an item from the buffer if one is available.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Base.html#ns_initialize-instance_method" title="Concurrent::Channel::Buffer::Base#ns_initialize (method)">#ns_initialize</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Base.html#ns_size-instance_method" title="Concurrent::Channel::Buffer::Base#ns_size (method)">#ns_size</a></td>
      <td><div class='inline'><p>The number of items currently in the buffer.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../../Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../../Synchronization/LockableObject.html#new_condition-instance_method" title="Concurrent::Synchronization::LockableObject#new_condition (method)">#new_condition</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <p class='notice'>This class inherits a constructor from <a href="Base.html#new-class_method" title="Concurrent::Channel::Buffer::Base.new (method)">Concurrent::Channel::Buffer::Base</a></p>
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="ns_empty?-instance_method">
  <h3 class='signature ro priv first'>
    #<strong>ns_empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Predicate indicating if the buffer is empty.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if this buffer is empty else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L100-L102'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='100' data-end='102'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_empty?'>ns_empty?</span>
  <span class='id identifier rubyid_ns_size'><a href="#ns_size-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_size (method)">ns_size</a></span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_full?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>ns_full?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Predicate indicating if the buffer is full.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if this buffer is full else false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L105-L107'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='105' data-end='107'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 105</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_full?'>ns_full?</span>
  <span class='id identifier rubyid_ns_size'><a href="#ns_size-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_size (method)">ns_size</a></span> <span class='op'>==</span> <span class='id identifier rubyid_capacity'>capacity</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="next-instance_method">
  <h3 class='signature  first'>
    #<strong>next</strong>  &#x21d2; <a href="../../../Object.html" title="Object (class)">Object</a>, <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Take the next “item” from the buffer and also return a boolean indicating if “more” items can be taken. Used for iterating over a buffer until it is closed and empty.</p>

<p>If the buffer is open but no items remain the calling thread will block until an item is available. The second of the two return values, “more” (a boolean), will always be <code>true</code> when the buffer is open. The “more” value will be <code>false</code> when the channel has been closed and all values have already been received. When “more” is false the returned item will be <a href="../../../Concurrent.html#NULL-constant" title="Concurrent::NULL (constant)">NULL</a>.</p>

<p>Note that when multiple threads access the same channel a race condition can occur when using this method. A call to <code>next</code> from one thread may return <code>true</code> for the second return value, but another thread may <a href="#take-instance_method" title="Concurrent::Channel::Buffer::Buffered#take (method)">#take</a> the last value before the original thread makes another call. Code which iterates over a channel must be programmed to properly handle these race conditions.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../Object.html" title="Object (class)">Object</a>, <code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>the first return value will be the item taken from the buffer and the second return value will be a boolean indicating whether or not more items remain.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L56-L68'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='68'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>next</span>
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_ns_closed?'>ns_closed?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_ns_empty?'><a href="#ns_empty%3F-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_empty? (method)">ns_empty?</a></span>
        <span class='kw'>return</span> <span class='const'><a href="../../../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'><a href="../../../Concurrent.html#NULL-constant" title="Concurrent::NULL (constant)">NULL</a></span><span class='comma'>,</span> <span class='kw'>false</span>
      <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_ns_empty?'><a href="#ns_empty%3F-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_empty? (method)">ns_empty?</a></span>
        <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_buffer'><a href="../../Channel.html#buffer-instance_method" title="Concurrent::Channel#buffer (method)">buffer</a></span>.<span class='id identifier rubyid_shift'>shift</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'>Thread</span>.<span class='id identifier rubyid_pass'>pass</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_initialize-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_initialize</strong>(size)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new buffer.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>size</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>the maximum capacity of the buffer; must be greater than zero.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>when the size is zero (0) or less.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L88-L92'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='88' data-end='92'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 88</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_initialize'>ns_initialize</span>(<span class='id identifier rubyid_size'>size</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="../../Channel.html#new-class_method" title="Concurrent::Channel.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>size must be greater than 0</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_size'>size</span>.<span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>=</span> <span class='id identifier rubyid_size'>size</span>.<span class='id identifier rubyid_to_i'>to_i</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_buffer'><a href="../../Channel.html#buffer-instance_method" title="Concurrent::Channel#buffer (method)">buffer</a></span> <span class='op'>=</span> []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_put_onto_buffer-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_put_onto_buffer</strong>(item)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Put an item onto the buffer if possible. If the buffer is open but not able to accept the item the calling thread will block until the item can be put onto the buffer.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>item</span>
    <span class='type'>(<a href="../../../Object.html" title="Object (class)">Object</a>)</span>
&mdash;    <div class='inline'>
<p>the item/value to put onto the buffer.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if the item was added to the buffer else false (always false when closed).</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L110-L112'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='110' data-end='112'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 110</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_put_onto_buffer'>ns_put_onto_buffer</span>(<span class='id identifier rubyid_item'>item</span>)
  <span class='id identifier rubyid_buffer'><a href="../../Channel.html#buffer-instance_method" title="Concurrent::Channel#buffer (method)">buffer</a></span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_item'>item</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_size-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_size</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The number of items currently in the buffer.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L95-L97'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='95' data-end='97'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 95</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_size'>ns_size</span>
  <span class='id identifier rubyid_buffer'><a href="../../Channel.html#buffer-instance_method" title="Concurrent::Channel#buffer (method)">buffer</a></span>.<span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="offer-instance_method">
  <h3 class='signature '>
    #<strong>offer</strong>(item)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Put an item onto the buffer if possible. If the buffer is open but unable to add an item, probably due to being full, the method will return immediately. Similarly, the method will return immediately when the buffer is closed. A return value of <code>false</code> does not necessarily indicate that the buffer is closed, just that the item could not be added.</p>

<p>New items can be put onto the buffer until the number of items in the buffer reaches the <code>#size</code> value specified during initialization.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>item</span>
    <span class='type'>(<a href="../../../Object.html" title="Object (class)">Object</a>)</span>
&mdash;    <div class='inline'>
<p>the item/value to put onto the buffer.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if the item was added to the buffer else false (always false when closed).</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L38-L47'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='38' data-end='47'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 38</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_offer'>offer</span>(<span class='id identifier rubyid_item'>item</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_ns_closed?'>ns_closed?</span> <span class='op'>||</span> <span class='id identifier rubyid_ns_full?'><a href="#ns_full%3F-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_full? (method)">ns_full?</a></span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_ns_put_onto_buffer'><a href="#ns_put_onto_buffer-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_put_onto_buffer (method)">ns_put_onto_buffer</a></span>(<span class='id identifier rubyid_item'>item</span>)
      <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="poll-instance_method">
  <h3 class='signature '>
    #<strong>poll</strong>  &#x21d2; <a href="../../../Object.html" title="Object (class)">Object</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Take the next item from the buffer if one is available else return immediately. Failing to return a value does not necessarily indicate that the buffer is closed, just that it is empty.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../Object.html" title="Object (class)">Object</a>)</span>
&mdash;    <div class='inline'>
<p>the next item from the buffer or <a href="../../../Concurrent.html#NULL-constant" title="Concurrent::NULL (constant)">NULL</a> if the buffer is empty.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L71-L79'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='71' data-end='79'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 71</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_poll'>poll</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_ns_empty?'><a href="#ns_empty%3F-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_empty? (method)">ns_empty?</a></span>
      <span class='const'><a href="../../../Concurrent.html" title="Concurrent (module)">Concurrent</a></span><span class='op'>::</span><span class='const'><a href="../../../Concurrent.html#NULL-constant" title="Concurrent::NULL (constant)">NULL</a></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_buffer'><a href="../../Channel.html#buffer-instance_method" title="Concurrent::Channel#buffer (method)">buffer</a></span>.<span class='id identifier rubyid_shift'>shift</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="put-instance_method">
  <h3 class='signature '>
    #<strong>put</strong>(item)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Put an item onto the buffer if possible. If the buffer is open but not able to accept the item the calling thread will block until the item can be put onto the buffer.</p>

<p>New items can be put onto the buffer until the number of items in the buffer reaches the <code>#size</code> value specified during initialization.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>item</span>
    <span class='type'>(<a href="../../../Object.html" title="Object (class)">Object</a>)</span>
&mdash;    <div class='inline'>
<p>the item/value to put onto the buffer.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if the item was added to the buffer else false (always false when closed).</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L19-L31'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='19' data-end='31'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 19</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_put'>put</span>(<span class='id identifier rubyid_item'>item</span>)
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_ns_closed?'>ns_closed?</span>
        <span class='kw'>return</span> <span class='kw'>false</span>
      <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_ns_full?'><a href="#ns_full%3F-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_full? (method)">ns_full?</a></span>
        <span class='id identifier rubyid_ns_put_onto_buffer'><a href="#ns_put_onto_buffer-instance_method" title="Concurrent::Channel::Buffer::Buffered#ns_put_onto_buffer (method)">ns_put_onto_buffer</a></span>(<span class='id identifier rubyid_item'>item</span>)
        <span class='kw'>return</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'>Thread</span>.<span class='id identifier rubyid_pass'>pass</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="take-instance_method">
  <h3 class='signature '>
    #<strong>take</strong>  &#x21d2; <a href="../../../Object.html" title="Object (class)">Object</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Take an item from the buffer if one is available. If the buffer is open and no item is available the calling thread will block until an item is available. If the buffer is closed but items are available the remaining items can still be taken. Once the buffer closes, no remaining items can be taken.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../Object.html" title="Object (class)">Object</a>)</span>
&mdash;    <div class='inline'>
<p>the item removed from the buffer; <a href="../../../Concurrent.html#NULL-constant" title="Concurrent::NULL (constant)">NULL</a> once the buffer has closed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb#L50-L53'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='50' data-end='53'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/channel/buffer/buffered.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_take'>take</span>
  <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_next'><a href="#next-instance_method" title="Concurrent::Channel::Buffer::Buffered#next (method)">next</a></span>
  <span class='id identifier rubyid_item'>item</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>