<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Concurrent::RubyThreadPoolExecutor &mdash; Concurrent Ruby master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Concurrent::RubyThreadPoolExecutor",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Concurrent</a> &raquo; 
      <a href='../_index.html#alpha_R'>Index (R)</a> &raquo; 
        <a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>RubyThreadPoolExecutor&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Concurrent::RubyThreadPoolExecutor</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="RubyThreadPoolExecutor/Worker.html" title="Concurrent::RubyThreadPoolExecutor::Worker (class)"><code>Worker</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="RubySingleThreadExecutor.html" title="Concurrent::RubySingleThreadExecutor (class)">RubySingleThreadExecutor</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a>,
          <a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a>,
          <a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a>,
          <a href="Concern/Deprecation.html" title="Concurrent::Concern::Deprecation (module)"><code>Concern::Deprecation</code></a>,
          <a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a>,
          <a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)">Concurrent::RubyExecutorService</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)">Concurrent::Synchronization::LockableObject</a></li>
          <li class='next'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)">Concurrent::AbstractExecutorService</a></li>
          <li class='next'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)">Concurrent::RubyExecutorService</a></li>
          <li class='next'>Concurrent::RubyThreadPoolExecutor</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L12'>lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Failure to properly shutdown a thread pool can lead to unpredictable results. Please read *Shutting Down Thread Pools* for more information.</p>
</div>
  </div>


<p>An abstraction composed of one or more threads and a task queue. Tasks (blocks or <code>proc</code> objects) are submitted to the pool and added to the queue. The threads in the pool remove the tasks and execute them in the order they were received.</p>

<p>A <a href="ThreadPoolExecutor.html" title="Concurrent::ThreadPoolExecutor (class)"><code>ThreadPoolExecutor</code></a> will automatically adjust the pool size according to the bounds set by <code>min-threads</code> and <code>max-threads</code>. When a new task is submitted and fewer than <code>min-threads</code> threads are running, a new thread is created to handle the request, even if other worker threads are idle. If there are more than <code>min-threads</code> but less than <code>max-threads</code> threads running, a new thread will be created only if the queue is full.</p>

<p>Threads that are idle for too long will be garbage collected, down to the configured minimum options. Should a thread crash it, too, will be garbage collected.</p>

<p><a href="ThreadPoolExecutor.html" title="Concurrent::ThreadPoolExecutor (class)"><code>ThreadPoolExecutor</code></a> is based on the Java class of the same name. From the official Java documentation;</p>

<p>&gt; Thread pools address two different problems: they usually provide &gt; improved performance when executing large numbers of asynchronous tasks, &gt; due to reduced per-task invocation overhead, and they provide a means &gt; of bounding and managing the resources, including threads, consumed &gt; when executing a collection of tasks. Each ThreadPoolExecutor also &gt; maintains some basic statistics, such as the number of completed tasks. &gt; &gt; To be useful across a wide range of contexts, this class provides many &gt; adjustable parameters and extensibility hooks. However, programmers are &gt; urged to use the more convenient Executors factory methods &gt; [CachedThreadPool] (unbounded thread pool, with automatic thread reclamation), &gt; [FixedThreadPool] (fixed size thread pool) and [SingleThreadExecutor] (single &gt; background thread), that preconfigure settings for the most common usage &gt; scenarios. **Thread Pool Options**</p>

<p>Thread pools support several configuration options:</p>
<ul><li>
<p><a href="#idletime-instance_method" title="Concurrent::RubyThreadPoolExecutor#idletime (method)">#idletime</a>: The number of seconds that a thread may be idle before being reclaimed.</p>
</li><li>
<p><code>name</code>: The name of the executor (optional). Printed in the executor’s <code>#to_s</code> output and a <code><name>-worker-<id></code> name is given to its threads if supported by used Ruby implementation. <code><id></code> is uniq for each thread.</p>
</li><li>
<p><a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">#max_queue</a>: The maximum number of tasks that may be waiting in the work queue at any one time. When the queue size reaches <a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">#max_queue</a> and no new threads can be created, subsequent tasks will be rejected in accordance with the configured <code>fallback_policy</code>.</p>
</li><li>
<p><code>auto_terminate</code>: When true (default), the threads started will be marked as daemon.</p>
</li><li>
<p><code>fallback_policy</code>: The policy defining how rejected tasks are handled.</p>
</li></ul>

<p>Three fallback policies are supported:</p>
<ul><li>
<p><code>:abort</code>: Raise a <a href="../Concurrent.html#RejectedExecutionError-constant" title="Concurrent::RejectedExecutionError (constant)">RejectedExecutionError</a> exception and discard the task.</p>
</li><li>
<p><code>:discard</code>: Discard the task and return false.</p>
</li><li>
<p><code>:caller_runs</code>: Execute the task on the calling thread.</p>
</li></ul>

<p>**Shutting Down Thread Pools**</p>

<p>Killing a thread pool while tasks are still being processed, either by calling the <code>#kill</code> method or at application exit, will have unpredictable results. There is no way for the thread pool to know what resources are being used by the in-progress tasks. When those tasks are killed the impact on those resources cannot be predicted. The <strong>best</strong> practice is to explicitly shutdown all thread pools using the provided methods:</p>
<ul><li>
<p>Call <code>#shutdown</code> to initiate an orderly termination of all in-progress tasks</p>
</li><li>
<p>Call <code>#wait_for_termination</code> with an appropriate timeout interval an allow the orderly shutdown to complete</p>
</li><li>
<p>Call <code>#kill</code> *only when* the thread pool fails to shutdown in the allotted time</p>
</li></ul>

<p>On some runtime platforms (most notably the JVM) the application will not exit until all thread pools have been shutdown. To prevent applications from “hanging” on exit, all threads can be marked as daemon according to the <code>:auto_terminate</code> option.</p>

<p>“‘ruby pool1 = <a href="FixedThreadPool.html" title="Concurrent::FixedThreadPool (class)"><code>FixedThreadPool</code></a>.new(5) # threads will be marked as daemon pool2 = <a href="FixedThreadPool.html" title="Concurrent::FixedThreadPool (class)"><code>FixedThreadPool</code></a>.new(5, auto_terminate: false) # mark threads as non-daemon “`</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html" target="_parent" title="Java Tutorials: Thread Pools">Java Tutorials: Thread Pools</a></li>
          <li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html" target="_parent" title="Java Executors class">Java Executors class</a></li>
          <li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html" target="_parent" title="Java ExecutorService interface">Java ExecutorService interface</a></li>
          <li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#setDaemon-boolean-" target="_parent" title="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#setDaemon-boolean-">https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#setDaemon-boolean-</a></li>
      </ul>

</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DEFAULT_MAX_POOL_SIZE-constant' class='summary_signature'>DEFAULT_MAX_POOL_SIZE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default maximum number of threads that will be created in the pool.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L15-L15'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 15</a>    <pre class='code ruby'><span class='int'>2_147_483_647</span></pre>
  </li>
  <li>
    <span id='DEFAULT_MAX_QUEUE_SIZE-constant' class='summary_signature'>DEFAULT_MAX_QUEUE_SIZE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default maximum number of tasks that may be added to the task queue.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L21-L21'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 21</a>    <pre class='code ruby'><span class='int'>0</span></pre>
  </li>
  <li>
    <span id='DEFAULT_MIN_POOL_SIZE-constant' class='summary_signature'>DEFAULT_MIN_POOL_SIZE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default minimum number of threads that will be retained in the pool.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L18-L18'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 18</a>    <pre class='code ruby'><span class='int'>0</span></pre>
  </li>
  <li>
    <span id='DEFAULT_SYNCHRONOUS-constant' class='summary_signature'>DEFAULT_SYNCHRONOUS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default value of the <code>:synchronous</code> option.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L27-L27'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 27</a>    <pre class='code ruby'><span class='kw'>false</span></pre>
  </li>
  <li>
    <span id='DEFAULT_THREAD_IDLETIMEOUT-constant' class='summary_signature'>DEFAULT_THREAD_IDLETIMEOUT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default maximum number of seconds a thread in the pool may remain idle before being reclaimed.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L24-L24'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 24</a>    <pre class='code ruby'><span class='int'>60</span></pre>
  </li>
</ul>
  <h3 class='inherited'><a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="Concern/Logging.html#SEV_LABEL-constant" title="Concurrent::Concern::Logging::SEV_LABEL (constant)">SEV_LABEL</a>
  </p>
  <h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
  <p  class='inherited'>
    <a href="AbstractExecutorService.html#FALLBACK_POLICIES-constant" title="Concurrent::AbstractExecutorService::FALLBACK_POLICIES (constant)">FALLBACK_POLICIES</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(opts = {})  &#x21d2; RubyThreadPoolExecutor </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new thread pool.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="RubyExecutorService.html#new-class_method" title="Concurrent::RubyExecutorService.new (method)">.new</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#new-class_method" title="Concurrent::AbstractExecutorService.new (method)">.new</a></td>
      <td><div class='inline'><p>Create a new thread pool.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#can_overflow%3F-instance_method" title="#can_overflow? (instance method)">#<strong>can_overflow?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Does the task queue have a maximum size?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#idletime-instance_method" title="#idletime (instance method)">#<strong>idletime</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The number of seconds that a thread may be idle before being reclaimed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#max_length-instance_method" title="#max_length (instance method)">#<strong>max_length</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The maximum number of threads that may be created in the pool.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#max_queue-instance_method" title="#max_queue (instance method)">#<strong>max_queue</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The maximum number of tasks that may be waiting in the work queue at any one time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#min_length-instance_method" title="#min_length (instance method)">#<strong>min_length</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The minimum number of threads that may be retained in the pool.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#synchronous-instance_method" title="#synchronous (instance method)">#<strong>synchronous</strong>  &#x21d2; true, false </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Whether or not a value of 0 for <code>:max_queue</code> option means the queue must perform direct hand-off or rather unbounded queue.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#ns_limited_queue%3F-instance_method" title="#ns_limited_queue? (instance method)">#<strong>ns_limited_queue?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="RubyExecutorService.html#fallback_policy-instance_method" title="Concurrent::RubyExecutorService#fallback_policy (method)">#fallback_policy</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_running%3F-instance_method" title="Concurrent::RubyExecutorService#ns_running? (method)">#ns_running?</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_shutdown%3F-instance_method" title="Concurrent::RubyExecutorService#ns_shutdown? (method)">#ns_shutdown?</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_shuttingdown%3F-instance_method" title="Concurrent::RubyExecutorService#ns_shuttingdown? (method)">#ns_shuttingdown?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m rw deprecated' href="AbstractExecutorService.html#auto_terminate=-instance_method" title="Concurrent::AbstractExecutorService#auto_terminate= (method)">#auto_terminate=</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the auto-terminate behavior for this executor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="AbstractExecutorService.html#auto_terminate%3F-instance_method" title="Concurrent::AbstractExecutorService#auto_terminate? (method)">#auto_terminate?</a></td>
      <td><div class='inline'><p>Is the executor auto-terminate when the application exits?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="AbstractExecutorService.html#fallback_policy-instance_method" title="Concurrent::AbstractExecutorService#fallback_policy (method)">#fallback_policy</a>,
        <a class='i_m ro' href="AbstractExecutorService.html#name-instance_method" title="Concurrent::AbstractExecutorService#name (method)">#name</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#running%3F-instance_method" title="Concurrent::AbstractExecutorService#running? (method)">#running?</a></td>
      <td><div class='inline'><p>Is the executor running?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shutdown-instance_method" title="Concurrent::AbstractExecutorService#shutdown (method)">#shutdown</a></td>
      <td><div class='inline'><p>Begin an orderly shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shutdown%3F-instance_method" title="Concurrent::AbstractExecutorService#shutdown? (method)">#shutdown?</a></td>
      <td><div class='inline'><p>Is the executor shutdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shuttingdown%3F-instance_method" title="Concurrent::AbstractExecutorService#shuttingdown? (method)">#shuttingdown?</a></td>
      <td><div class='inline'><p>Is the executor shuttingdown?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro priv' href="AbstractExecutorService.html#ns_auto_terminate%3F-instance_method" title="Concurrent::AbstractExecutorService#ns_auto_terminate? (method)">#ns_auto_terminate?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="ExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::ExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="ExecutorService.html#serialized%3F-instance_method" title="Concurrent::ExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#active_count-instance_method" title="#active_count (instance method)">#<strong>active_count</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The number of threads that are actively executing tasks.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#completed_task_count-instance_method" title="#completed_task_count (instance method)">#<strong>completed_task_count</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The number of tasks that have been completed by the pool since construction.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#largest_length-instance_method" title="#largest_length (instance method)">#<strong>largest_length</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The largest number of threads that have been created in the pool since construction.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#length-instance_method" title="#length (instance method)">#<strong>length</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The number of threads currently in the pool.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prune_pool-instance_method" title="#prune_pool (instance method)">#<strong>prune_pool</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Prune the thread pool of unneeded threads.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#queue_length-instance_method" title="#queue_length (instance method)">#<strong>queue_length</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The number of tasks in the queue awaiting execution.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#remaining_capacity-instance_method" title="#remaining_capacity (instance method)">#<strong>remaining_capacity</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Number of tasks that may be enqueued before reaching <a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">#max_queue</a> and rejecting new tasks.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scheduled_task_count-instance_method" title="#scheduled_task_count (instance method)">#<strong>scheduled_task_count</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The number of tasks that have been scheduled for execution on the pool since construction.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_add_busy_worker-instance_method" title="#ns_add_busy_worker (instance method)">#<strong>ns_add_busy_worker</strong>  &#x21d2; nil, Worker </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>creates new worker which has to receive work to do after it’s added.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_assign_worker-instance_method" title="#ns_assign_worker (instance method)">#<strong>ns_assign_worker</strong>(*args, &amp;task)  &#x21d2; true, false </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>tries to assign task to a worker, tries to get one from @ready or to create new one.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_enqueue-instance_method" title="#ns_enqueue (instance method)">#<strong>ns_enqueue</strong>(*args, &amp;task)  &#x21d2; true, false </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>tries to enqueue task.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_execute-instance_method" title="#ns_execute (instance method)">#<strong>ns_execute</strong>(*args, &amp;task)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_initialize-instance_method" title="#ns_initialize (instance method)">#<strong>ns_initialize</strong>(opts)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_kill_execution-instance_method" title="#ns_kill_execution (instance method)">#<strong>ns_kill_execution</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_prune_pool-instance_method" title="#ns_prune_pool (instance method)">#<strong>ns_prune_pool</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>try oldest worker if it is idle for enough time, it’s returned back at the start.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_ready_worker-instance_method" title="#ns_ready_worker (instance method)">#<strong>ns_ready_worker</strong>(worker, last_message, success = true)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>handle ready worker, giving it new job or assigning back to @ready.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_remove_busy_worker-instance_method" title="#ns_remove_busy_worker (instance method)">#<strong>ns_remove_busy_worker</strong>(worker)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>removes a worker which is not in not tracked in @ready.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_reset_if_forked-instance_method" title="#ns_reset_if_forked (instance method)">#<strong>ns_reset_if_forked</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_shutdown_execution-instance_method" title="#ns_shutdown_execution (instance method)">#<strong>ns_shutdown_execution</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_worker_died-instance_method" title="#ns_worker_died (instance method)">#<strong>ns_worker_died</strong>(worker)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ready_worker-instance_method" title="#ready_worker (instance method)">#<strong>ready_worker</strong>(worker, last_message)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#remove_busy_worker-instance_method" title="#remove_busy_worker (instance method)">#<strong>remove_busy_worker</strong>(worker)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#worker_died-instance_method" title="#worker_died (instance method)">#<strong>worker_died</strong>(worker)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#worker_task_completed-instance_method" title="#worker_task_completed (instance method)">#<strong>worker_task_completed</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#<<-instance_method" title="Concurrent::RubyExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m deprecated' href="RubyExecutorService.html#auto_terminate=-instance_method" title="Concurrent::RubyExecutorService#auto_terminate= (method)">#auto_terminate=</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the auto-terminate behavior for this executor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#auto_terminate%3F-instance_method" title="Concurrent::RubyExecutorService#auto_terminate? (method)">#auto_terminate?</a></td>
      <td><div class='inline'><p>Is the executor auto-terminate when the application exits?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::RubyExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#kill-instance_method" title="Concurrent::RubyExecutorService#kill (method)">#kill</a></td>
      <td><div class='inline'><p>Begin an immediate shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#post-instance_method" title="Concurrent::RubyExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#running%3F-instance_method" title="Concurrent::RubyExecutorService#running? (method)">#running?</a></td>
      <td><div class='inline'><p>Is the executor running?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#serialized%3F-instance_method" title="Concurrent::RubyExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shutdown-instance_method" title="Concurrent::RubyExecutorService#shutdown (method)">#shutdown</a></td>
      <td><div class='inline'><p>Begin an orderly shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shutdown%3F-instance_method" title="Concurrent::RubyExecutorService#shutdown? (method)">#shutdown?</a></td>
      <td><div class='inline'><p>Is the executor shutdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shuttingdown%3F-instance_method" title="Concurrent::RubyExecutorService#shuttingdown? (method)">#shuttingdown?</a></td>
      <td><div class='inline'><p>Is the executor shuttingdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#wait_for_termination-instance_method" title="Concurrent::RubyExecutorService#wait_for_termination (method)">#wait_for_termination</a></td>
      <td><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="RubyExecutorService.html#ns_shutdown_execution-instance_method" title="Concurrent::RubyExecutorService#ns_shutdown_execution (method)">#ns_shutdown_execution</a>,
        <a class='i_m priv' href="RubyExecutorService.html#stop_event-instance_method" title="Concurrent::RubyExecutorService#stop_event (method)">#stop_event</a>,
        <a class='i_m priv' href="RubyExecutorService.html#stopped_event-instance_method" title="Concurrent::RubyExecutorService#stopped_event (method)">#stopped_event</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#<<-instance_method" title="Concurrent::AbstractExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::AbstractExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#kill-instance_method" title="Concurrent::AbstractExecutorService#kill (method)">#kill</a></td>
      <td><div class='inline'><p>Begin an immediate shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#post-instance_method" title="Concurrent::AbstractExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#serialized%3F-instance_method" title="Concurrent::AbstractExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="AbstractExecutorService.html#to_s-instance_method" title="Concurrent::AbstractExecutorService#to_s (method)">#to_s</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#wait_for_termination-instance_method" title="Concurrent::AbstractExecutorService#wait_for_termination (method)">#wait_for_termination</a></td>
      <td><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#fallback_action-instance_method" title="Concurrent::AbstractExecutorService#fallback_action (method)">#fallback_action</a></td>
      <td><div class='inline'><p>Returns an action which executes the <code>fallback_policy</code> once the queue size reaches <a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">#max_queue</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="AbstractExecutorService.html#ns_execute-instance_method" title="Concurrent::AbstractExecutorService#ns_execute (method)">#ns_execute</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#ns_kill_execution-instance_method" title="Concurrent::AbstractExecutorService#ns_kill_execution (method)">#ns_kill_execution</a></td>
      <td><div class='inline'><p>Callback method called when the executor has been killed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#ns_shutdown_execution-instance_method" title="Concurrent::AbstractExecutorService#ns_shutdown_execution (method)">#ns_shutdown_execution</a></td>
      <td><div class='inline'><p>Callback method called when an orderly shutdown has completed.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Deprecation.html" title="Concurrent::Concern::Deprecation (module)"><code>Concern::Deprecation</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Concern/Deprecation.html#deprecated-instance_method" title="Concurrent::Concern::Deprecation#deprecated (method)">#deprecated</a>,
        <a class='i_m ' href="Concern/Deprecation.html#deprecated_method-instance_method" title="Concurrent::Concern::Deprecation#deprecated_method (method)">#deprecated_method</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ExecutorService.html#<<-instance_method" title="Concurrent::ExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ExecutorService.html#post-instance_method" title="Concurrent::ExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Logging.html#log-instance_method" title="Concurrent::Concern::Logging#log (method)">#log</a></td>
      <td><div class='inline'><p>Logs through <a href="../Concurrent.html#global_logger-class_method" title="Concurrent.global_logger (method)">global_logger</a>, it can be overridden by setting @logger.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Synchronization/LockableObject.html#new_condition-instance_method" title="Concurrent::Synchronization::LockableObject#new_condition (method)">#new_condition</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(opts = {})  &#x21d2; <code>RubyThreadPoolExecutor</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new thread pool.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>opts</span>
    <span class='type'>(<a href="Hash.html" title="Concurrent::Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>the options which configure the thread pool.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>opts</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:max_threads</span>
          <span class='type'>(<code>Integer</code>)</span>
          <span class='default'> &mdash; default:
              <tt>DEFAULT_MAX_POOL_SIZE</tt>          </span>
            &mdash; <div class='inline'>
<p>the maximum number of threads to be created</p>
</div>        </li>
        <li>
          <span class='name'>:min_threads</span>
          <span class='type'>(<code>Integer</code>)</span>
          <span class='default'> &mdash; default:
              <tt>DEFAULT_MIN_POOL_SIZE</tt>          </span>
            &mdash; <div class='inline'>
<p>When a new task is submitted and fewer than <code>min_threads</code> are running, a new thread is created</p>
</div>        </li>
        <li>
          <span class='name'>:idletime</span>
          <span class='type'>(<code>Integer</code>)</span>
          <span class='default'> &mdash; default:
              <tt>DEFAULT_THREAD_IDLETIMEOUT</tt>          </span>
            &mdash; <div class='inline'>
<p>the maximum number of seconds a thread may be idle before being reclaimed</p>
</div>        </li>
        <li>
          <span class='name'>:max_queue</span>
          <span class='type'>(<code>Integer</code>)</span>
          <span class='default'> &mdash; default:
              <tt>DEFAULT_MAX_QUEUE_SIZE</tt>          </span>
            &mdash; <div class='inline'>
<p>the maximum number of tasks allowed in the work queue at any one time; a value of zero means the queue may grow without bound</p>
</div>        </li>
        <li>
          <span class='name'>:fallback_policy</span>
          <span class='type'>(<code>Symbol</code>)</span>
          <span class='default'> &mdash; default:
              <tt>:abort</tt>          </span>
            &mdash; <div class='inline'>
<p>the policy for handling new tasks that are received when the queue size has reached <a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">#max_queue</a> or the executor has shut down</p>
</div>        </li>
        <li>
          <span class='name'>:synchronous</span>
          <span class='type'>(<code>Boolean</code>)</span>
          <span class='default'> &mdash; default:
              <tt>DEFAULT_SYNCHRONOUS</tt>          </span>
            &mdash; <div class='inline'>
<p>whether or not a value of 0 for <code>:max_queue</code> means the queue must perform direct hand-off rather than unbounded.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>if <code>:max_threads</code> is less than one</p>
</div>
  </li>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>if <code>:min_threads</code> is less than zero</p>
</div>
  </li>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>if <code>:fallback_policy</code> is not one of the values specified in <code>FALLBACK_POLICIES</code></p>
</div>
  </li>
</ul>
  <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html" target="_parent" title="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L45-L47'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='45' data-end='47'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 45</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='kw'>super</span>(<span class='id identifier rubyid_opts'>opts</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="can_overflow?-instance_method">
  <h3 class='signature ro first'>
    #<strong>can_overflow?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Does the task queue have a maximum size?</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>True if the task queue has a maximum size else false.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L72-L74'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='72' data-end='74'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 72</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_can_overflow?'>can_overflow?</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_limited_queue?'><a href="#ns_limited_queue%3F-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_limited_queue? (method)">ns_limited_queue?</a></span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="idletime-instance_method">
  <h3 class='signature ro'>
    #<strong>idletime</strong>  &#x21d2; <code>Integer</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The number of seconds that a thread may be idle before being reclaimed.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of seconds that a thread may be idle before being reclaimed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L36-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='36' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 36</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_idletime'>idletime</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="max_length-instance_method">
  <h3 class='signature ro'>
    #<strong>max_length</strong>  &#x21d2; <code>Integer</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The maximum number of threads that may be created in the pool.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The maximum number of threads that may be created in the pool.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L30-L30'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='30' data-end='30'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 30</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_max_length'>max_length</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="max_queue-instance_method">
  <h3 class='signature ro'>
    #<strong>max_queue</strong>  &#x21d2; <code>Integer</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The maximum number of tasks that may be waiting in the work queue at any one time. When the queue size reaches <code>max_queue</code> subsequent tasks will be rejected in accordance with the configured <code>fallback_policy</code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The maximum number of tasks that may be waiting in the work queue at any one time. When the queue size reaches <code>max_queue</code> subsequent tasks will be rejected in accordance with the configured <code>fallback_policy</code>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L39-L39'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='39' data-end='39'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 39</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_max_queue'>max_queue</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="min_length-instance_method">
  <h3 class='signature ro'>
    #<strong>min_length</strong>  &#x21d2; <code>Integer</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The minimum number of threads that may be retained in the pool.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The minimum number of threads that may be retained in the pool.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L33-L33'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='33' data-end='33'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 33</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_min_length'>min_length</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_limited_queue?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>ns_limited_queue?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L155-L157'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='155' data-end='157'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 155</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_limited_queue?'>ns_limited_queue?</span>
  <span class='ivar'>@max_queue</span> <span class='op'>!=</span> <span class='int'>0</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="synchronous-instance_method">
  <h3 class='signature ro'>
    #<strong>synchronous</strong>  &#x21d2; <code>true</code>, <code>false</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Whether or not a value of 0 for <code>:max_queue</code> option means the queue must perform direct hand-off or rather unbounded queue.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L42-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='42' data-end='42'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 42</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_synchronous'>synchronous</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="active_count-instance_method">
  <h3 class='signature  first'>
    #<strong>active_count</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The number of threads that are actively executing tasks.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of threads that are actively executing tasks.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L65-L69'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='65' data-end='69'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 65</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_active_count'>active_count</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@pool</span>.<span class='id identifier rubyid_length'><a href="#length-instance_method" title="Concurrent::RubyThreadPoolExecutor#length (method)">length</a></span> <span class='op'>-</span> <span class='ivar'>@ready</span>.<span class='id identifier rubyid_length'><a href="#length-instance_method" title="Concurrent::RubyThreadPoolExecutor#length (method)">length</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="completed_task_count-instance_method">
  <h3 class='signature '>
    #<strong>completed_task_count</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The number of tasks that have been completed by the pool since construction.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of tasks that have been completed by the pool since construction.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L60-L62'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='62'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_completed_task_count'>completed_task_count</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@completed_task_count</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="largest_length-instance_method">
  <h3 class='signature '>
    #<strong>largest_length</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The largest number of threads that have been created in the pool since construction.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The largest number of threads that have been created in the pool since construction.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L50-L52'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='50' data-end='52'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_largest_length'>largest_length</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@largest_length</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="length-instance_method">
  <h3 class='signature '>
    #<strong>length</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The number of threads currently in the pool.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of threads currently in the pool.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L77-L79'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='77' data-end='79'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 77</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_length'>length</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@pool</span>.<span class='id identifier rubyid_length'>length</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_add_busy_worker-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_add_busy_worker</strong>  &#x21d2; <code>nil</code>, <a href="RubyThreadPoolExecutor/Worker.html" title="Concurrent::RubyThreadPoolExecutor::Worker (class)">Worker</a>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>creates new worker which has to receive work to do after it’s added</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>, <a href="RubyThreadPoolExecutor/Worker.html" title="Concurrent::RubyThreadPoolExecutor::Worker (class)">Worker</a>)</span>
&mdash;    <div class='inline'>
<p>nil of max capacity is reached</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L241-L248'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='241' data-end='248'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 241</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_add_busy_worker'>ns_add_busy_worker</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@pool</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;=</span> <span class='ivar'>@max_length</span>

  <span class='ivar'>@workers_counter</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='ivar'>@pool</span> <span class='op'>&lt;&lt;</span> (<span class='id identifier rubyid_worker'>worker</span> <span class='op'>=</span> <span class='const'><a href="RubyThreadPoolExecutor/Worker.html" title="Concurrent::RubyThreadPoolExecutor::Worker (class)">Worker</a></span>.<span class='id identifier rubyid_new'><a href="RubyThreadPoolExecutor/Worker.html#new-class_method" title="Concurrent::RubyThreadPoolExecutor::Worker.new (method)">new</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='ivar'>@workers_counter</span>))
  <span class='ivar'>@largest_length</span> <span class='op'>=</span> <span class='ivar'>@pool</span>.<span class='id identifier rubyid_length'><a href="#length-instance_method" title="Concurrent::RubyThreadPoolExecutor#length (method)">length</a></span> <span class='kw'>if</span> <span class='ivar'>@pool</span>.<span class='id identifier rubyid_length'><a href="#length-instance_method" title="Concurrent::RubyThreadPoolExecutor#length (method)">length</a></span> <span class='op'>&gt;</span> <span class='ivar'>@largest_length</span>
  <span class='id identifier rubyid_worker'>worker</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_assign_worker-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_assign_worker</strong>(*args, &amp;task)  &#x21d2; <code>true</code>, <code>false</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>tries to assign task to a worker, tries to get one from @ready or to create new one</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>, <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>if task is assigned to a worker</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L201-L213'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='201' data-end='213'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 201</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_assign_worker'>ns_assign_worker</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='comment'># keep growing if the pool is not at the minimum yet
</span>  <span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span> <span class='op'>=</span> (<span class='ivar'>@ready</span>.<span class='id identifier rubyid_pop'>pop</span> <span class='kw'>if</span> <span class='ivar'>@pool</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;=</span> <span class='ivar'>@min_length</span>) <span class='op'>||</span> <span class='id identifier rubyid_ns_add_busy_worker'><a href="#ns_add_busy_worker-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_add_busy_worker (method)">ns_add_busy_worker</a></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_worker'>worker</span>
    <span class='id identifier rubyid_worker'>worker</span> <span class='op'>&lt;&lt;</span> [<span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span>]
    <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'>ThreadError</span>
  <span class='comment'># Raised when the operating system refuses to create the new thread
</span>  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_enqueue-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_enqueue</strong>(*args, &amp;task)  &#x21d2; <code>true</code>, <code>false</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>tries to enqueue task</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>, <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>if enqueued</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L219-L228'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='219' data-end='228'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 219</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_enqueue'>ns_enqueue</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='ivar'>@synchronous</span>
  
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_ns_limited_queue?'><a href="#ns_limited_queue%3F-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_limited_queue? (method)">ns_limited_queue?</a></span> <span class='op'>||</span> <span class='ivar'>@queue</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='ivar'>@max_queue</span>
    <span class='ivar'>@queue</span> <span class='op'>&lt;&lt;</span> [<span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span>]
    <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_execute-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_execute</strong>(*args, &amp;task)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L160-L171'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='160' data-end='171'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 160</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_execute'>ns_execute</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_ns_reset_if_forked'><a href="#ns_reset_if_forked-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_reset_if_forked (method)">ns_reset_if_forked</a></span>

  <span class='kw'>if</span> <span class='id identifier rubyid_ns_assign_worker'><a href="#ns_assign_worker-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_assign_worker (method)">ns_assign_worker</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>) <span class='op'>||</span> <span class='id identifier rubyid_ns_enqueue'><a href="#ns_enqueue-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_enqueue (method)">ns_enqueue</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
    <span class='ivar'>@scheduled_task_count</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_fallback_action'>fallback_action</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ns_prune_pool'><a href="#ns_prune_pool-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_prune_pool (method)">ns_prune_pool</a></span> <span class='kw'>if</span> <span class='ivar'>@next_gc_time</span> <span class='op'>&lt;</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_initialize-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_initialize</strong>(opts)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L125-L152'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='125' data-end='152'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 125</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_initialize'>ns_initialize</span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='ivar'>@min_length</span>      <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_min_threads'>min_threads</span><span class='comma'>,</span> <span class='const'><a href="#DEFAULT_MIN_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MIN_POOL_SIZE (constant)">DEFAULT_MIN_POOL_SIZE</a></span>).<span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@max_length</span>      <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_max_threads'>max_threads</span><span class='comma'>,</span> <span class='const'><a href="#DEFAULT_MAX_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MAX_POOL_SIZE (constant)">DEFAULT_MAX_POOL_SIZE</a></span>).<span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@idletime</span>        <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_idletime'><a href="#idletime-instance_method" title="Concurrent::RubyThreadPoolExecutor#idletime (method)">idletime</a></span><span class='comma'>,</span> <span class='const'><a href="#DEFAULT_THREAD_IDLETIMEOUT-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_THREAD_IDLETIMEOUT (constant)">DEFAULT_THREAD_IDLETIMEOUT</a></span>).<span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@max_queue</span>       <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_max_queue'><a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">max_queue</a></span><span class='comma'>,</span> <span class='const'><a href="#DEFAULT_MAX_QUEUE_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MAX_QUEUE_SIZE (constant)">DEFAULT_MAX_QUEUE_SIZE</a></span>).<span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@synchronous</span>     <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_synchronous'><a href="#synchronous-instance_method" title="Concurrent::RubyThreadPoolExecutor#synchronous (method)">synchronous</a></span><span class='comma'>,</span> <span class='const'><a href="#DEFAULT_SYNCHRONOUS-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_SYNCHRONOUS (constant)">DEFAULT_SYNCHRONOUS</a></span>)
  <span class='ivar'>@fallback_policy</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_fallback_policy'>fallback_policy</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_abort'>abort</span>)

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::RubyThreadPoolExecutor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>`synchronous` cannot be set unless `max_queue` is 0</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='ivar'>@synchronous</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@max_queue</span> <span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::RubyThreadPoolExecutor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@fallback_policy</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a valid fallback policy</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>unless</span> <span class='const'><a href="AbstractExecutorService.html#FALLBACK_POLICIES-constant" title="Concurrent::AbstractExecutorService::FALLBACK_POLICIES (constant)">FALLBACK_POLICIES</a></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='ivar'>@fallback_policy</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::RubyThreadPoolExecutor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>`max_threads` cannot be less than </span><span class='embexpr_beg'>#{</span><span class='const'><a href="#DEFAULT_MIN_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MIN_POOL_SIZE (constant)">DEFAULT_MIN_POOL_SIZE</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='ivar'>@max_length</span> <span class='op'>&lt;</span> <span class='const'><a href="#DEFAULT_MIN_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MIN_POOL_SIZE (constant)">DEFAULT_MIN_POOL_SIZE</a></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::RubyThreadPoolExecutor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>`max_threads` cannot be greater than </span><span class='embexpr_beg'>#{</span><span class='const'><a href="#DEFAULT_MAX_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MAX_POOL_SIZE (constant)">DEFAULT_MAX_POOL_SIZE</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='ivar'>@max_length</span> <span class='op'>&gt;</span> <span class='const'><a href="#DEFAULT_MAX_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MAX_POOL_SIZE (constant)">DEFAULT_MAX_POOL_SIZE</a></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::RubyThreadPoolExecutor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>`min_threads` cannot be less than </span><span class='embexpr_beg'>#{</span><span class='const'><a href="#DEFAULT_MIN_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MIN_POOL_SIZE (constant)">DEFAULT_MIN_POOL_SIZE</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='ivar'>@min_length</span> <span class='op'>&lt;</span> <span class='const'><a href="#DEFAULT_MIN_POOL_SIZE-constant" title="Concurrent::RubyThreadPoolExecutor::DEFAULT_MIN_POOL_SIZE (constant)">DEFAULT_MIN_POOL_SIZE</a></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::RubyThreadPoolExecutor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>`min_threads` cannot be more than `max_threads`</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_min_length'><a href="#min_length-instance_method" title="Concurrent::RubyThreadPoolExecutor#min_length (method)">min_length</a></span> <span class='op'>&gt;</span> <span class='id identifier rubyid_max_length'><a href="#max_length-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_length (method)">max_length</a></span>

  <span class='ivar'>@pool</span>                 <span class='op'>=</span> [] <span class='comment'># all workers
</span>  <span class='ivar'>@ready</span>                <span class='op'>=</span> [] <span class='comment'># used as a stash (most idle worker is at the start)
</span>  <span class='ivar'>@queue</span>                <span class='op'>=</span> [] <span class='comment'># used as queue
</span>  <span class='comment'># @ready or @queue is empty at all times
</span>  <span class='ivar'>@scheduled_task_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@completed_task_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@largest_length</span>       <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@workers_counter</span>      <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@ruby_pid</span>             <span class='op'>=</span> <span class='gvar'>$$</span> <span class='comment'># detects if Ruby has forked
</span>
  <span class='ivar'>@gc_interval</span>  <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_gc_interval'>gc_interval</span><span class='comma'>,</span> <span class='ivar'>@idletime</span> <span class='op'>/</span> <span class='float'>2.0</span>).<span class='id identifier rubyid_to_i'>to_i</span> <span class='comment'># undocumented
</span>  <span class='ivar'>@next_gc_time</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span> <span class='op'>+</span> <span class='ivar'>@gc_interval</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_kill_execution-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_kill_execution</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L189-L195'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='189' data-end='195'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 189</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_kill_execution'>ns_kill_execution</span>
  <span class='comment'># TODO log out unprocessed tasks in queue
</span>  <span class='comment'># TODO try to shutdown first?
</span>  <span class='ivar'>@pool</span>.<span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_kill'>kill</span>)
  <span class='ivar'>@pool</span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@ready</span>.<span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_prune_pool-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_prune_pool</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>try oldest worker if it is idle for enough time, it’s returned back at the start</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L280-L294'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='280' data-end='294'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 280</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_prune_pool'>ns_prune_pool</span>
  <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span>
  <span class='id identifier rubyid_stopped_workers'>stopped_workers</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='op'>!</span><span class='ivar'>@ready</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> (<span class='ivar'>@pool</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='id identifier rubyid_stopped_workers'>stopped_workers</span> <span class='op'>&gt;</span> <span class='ivar'>@min_length</span>)
    <span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='id identifier rubyid_last_message'>last_message</span> <span class='op'>=</span> <span class='ivar'>@ready</span>.<span class='id identifier rubyid_first'>first</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='id identifier rubyid_last_message'>last_message</span> <span class='op'>&gt;</span> <span class='kw'>self</span>.<span class='id identifier rubyid_idletime'><a href="#idletime-instance_method" title="Concurrent::RubyThreadPoolExecutor#idletime (method)">idletime</a></span>
      <span class='id identifier rubyid_stopped_workers'>stopped_workers</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='ivar'>@ready</span>.<span class='id identifier rubyid_shift'>shift</span>
      <span class='id identifier rubyid_worker'>worker</span> <span class='op'>&lt;&lt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_stop'>stop</span>
    <span class='kw'>else</span> <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@next_gc_time</span> <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span> <span class='op'>+</span> <span class='ivar'>@gc_interval</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_ready_worker-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_ready_worker</strong>(worker, last_message, success = true)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>handle ready worker, giving it new job or assigning back to @ready</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L253-L266'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='253' data-end='266'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 253</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_ready_worker'>ns_ready_worker</span>(<span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='id identifier rubyid_last_message'>last_message</span><span class='comma'>,</span> <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>true</span>)
  <span class='id identifier rubyid_task_and_args'>task_and_args</span> <span class='op'>=</span> <span class='ivar'>@queue</span>.<span class='id identifier rubyid_shift'>shift</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_task_and_args'>task_and_args</span>
    <span class='id identifier rubyid_worker'>worker</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_task_and_args'>task_and_args</span>
  <span class='kw'>else</span>
    <span class='comment'># stop workers when !running?, do not return them to @ready
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_running?'>running?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='id identifier rubyid_last_message'>last_message</span>
      <span class='ivar'>@ready</span>.<span class='id identifier rubyid_push'>push</span>([<span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='id identifier rubyid_last_message'>last_message</span>])
    <span class='kw'>else</span>
      <span class='id identifier rubyid_worker'>worker</span>.<span class='id identifier rubyid_stop'>stop</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_remove_busy_worker-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_remove_busy_worker</strong>(worker)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>removes a worker which is not in not tracked in @ready</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L271-L275'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='271' data-end='275'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 271</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_remove_busy_worker'>ns_remove_busy_worker</span>(<span class='id identifier rubyid_worker'>worker</span>)
  <span class='ivar'>@pool</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_worker'>worker</span>)
  <span class='id identifier rubyid_stopped_event'>stopped_event</span>.<span class='id identifier rubyid_set'>set</span> <span class='kw'>if</span> <span class='ivar'>@pool</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_running?'>running?</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_reset_if_forked-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_reset_if_forked</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L296-L307'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='296' data-end='307'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 296</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_reset_if_forked'>ns_reset_if_forked</span>
  <span class='kw'>if</span> <span class='gvar'>$$</span> <span class='op'>!=</span> <span class='ivar'>@ruby_pid</span>
    <span class='ivar'>@queue</span>.<span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@ready</span>.<span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@pool</span>.<span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@scheduled_task_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@completed_task_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@largest_length</span>       <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@workers_counter</span>      <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@ruby_pid</span>             <span class='op'>=</span> <span class='gvar'>$$</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_shutdown_execution-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_shutdown_execution</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L174-L186'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='174' data-end='186'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 174</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_shutdown_execution'>ns_shutdown_execution</span>
  <span class='id identifier rubyid_ns_reset_if_forked'><a href="#ns_reset_if_forked-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_reset_if_forked (method)">ns_reset_if_forked</a></span>

  <span class='kw'>if</span> <span class='ivar'>@pool</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='comment'># nothing to do
</span>    <span class='id identifier rubyid_stopped_event'>stopped_event</span>.<span class='id identifier rubyid_set'>set</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@queue</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='comment'># no more tasks will be accepted, just stop all workers
</span>    <span class='ivar'>@pool</span>.<span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_stop'>stop</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_worker_died-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_worker_died</strong>(worker)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L231-L235'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='231' data-end='235'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 231</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_worker_died'>ns_worker_died</span>(<span class='id identifier rubyid_worker'>worker</span>)
  <span class='id identifier rubyid_ns_remove_busy_worker'><a href="#ns_remove_busy_worker-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_remove_busy_worker (method)">ns_remove_busy_worker</a></span> <span class='id identifier rubyid_worker'>worker</span>
  <span class='id identifier rubyid_replacement_worker'>replacement_worker</span> <span class='op'>=</span> <span class='id identifier rubyid_ns_add_busy_worker'><a href="#ns_add_busy_worker-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_add_busy_worker (method)">ns_add_busy_worker</a></span>
  <span class='id identifier rubyid_ns_ready_worker'><a href="#ns_ready_worker-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_ready_worker (method)">ns_ready_worker</a></span> <span class='id identifier rubyid_replacement_worker'>replacement_worker</span><span class='comma'>,</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span><span class='comma'>,</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_replacement_worker'>replacement_worker</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prune_pool-instance_method">
  <h3 class='signature '>
    #<strong>prune_pool</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Prune the thread pool of unneeded threads</p>

<p>What is being pruned is controlled by the min_threads and idletime parameters passed at pool creation time</p>

<p>This is a no-op on some pool implementation (e.g. the Java one).  The Ruby pool will auto-prune each time a new job is posted. You will need to call this method explicitly in case your application post jobs in bursts (a lot of jobs and then nothing for long periods)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L118-L120'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='118' data-end='120'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 118</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prune_pool'>prune_pool</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_prune_pool'><a href="#ns_prune_pool-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_prune_pool (method)">ns_prune_pool</a></span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="queue_length-instance_method">
  <h3 class='signature '>
    #<strong>queue_length</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The number of tasks in the queue awaiting execution.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of tasks in the queue awaiting execution.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L82-L84'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='82' data-end='84'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 82</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_queue_length'>queue_length</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@queue</span>.<span class='id identifier rubyid_length'><a href="#length-instance_method" title="Concurrent::RubyThreadPoolExecutor#length (method)">length</a></span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ready_worker-instance_method">
  <h3 class='signature priv'>
    #<strong>ready_worker</strong>(worker, last_message)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L103-L105'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='103' data-end='105'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 103</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ready_worker'>ready_worker</span>(<span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='id identifier rubyid_last_message'>last_message</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_ready_worker'><a href="#ns_ready_worker-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_ready_worker (method)">ns_ready_worker</a></span> <span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='id identifier rubyid_last_message'>last_message</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remaining_capacity-instance_method">
  <h3 class='signature '>
    #<strong>remaining_capacity</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Number of tasks that may be enqueued before reaching <a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">#max_queue</a> and rejecting new tasks. A value of -1 indicates that the queue may grow without bound.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>Number of tasks that may be enqueued before reaching <a href="#max_queue-instance_method" title="Concurrent::RubyThreadPoolExecutor#max_queue (method)">#max_queue</a> and rejecting new tasks. A value of -1 indicates that the queue may grow without bound.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L87-L95'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='87' data-end='95'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 87</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remaining_capacity'>remaining_capacity</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_ns_limited_queue?'><a href="#ns_limited_queue%3F-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_limited_queue? (method)">ns_limited_queue?</a></span>
      <span class='ivar'>@max_queue</span> <span class='op'>-</span> <span class='ivar'>@queue</span>.<span class='id identifier rubyid_length'><a href="#length-instance_method" title="Concurrent::RubyThreadPoolExecutor#length (method)">length</a></span>
    <span class='kw'>else</span>
      <span class='op'>-</span><span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_busy_worker-instance_method">
  <h3 class='signature priv'>
    #<strong>remove_busy_worker</strong>(worker)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L98-L100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='98' data-end='100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 98</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_busy_worker'>remove_busy_worker</span>(<span class='id identifier rubyid_worker'>worker</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_remove_busy_worker'><a href="#ns_remove_busy_worker-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_remove_busy_worker (method)">ns_remove_busy_worker</a></span> <span class='id identifier rubyid_worker'>worker</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scheduled_task_count-instance_method">
  <h3 class='signature '>
    #<strong>scheduled_task_count</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The number of tasks that have been scheduled for execution on the pool since construction.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of tasks that have been scheduled for execution on the pool since construction.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L55-L57'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='55' data-end='57'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 55</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_scheduled_task_count'>scheduled_task_count</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@scheduled_task_count</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_died-instance_method">
  <h3 class='signature priv'>
    #<strong>worker_died</strong>(worker)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L108-L110'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='108' data-end='110'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 108</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_died'>worker_died</span>(<span class='id identifier rubyid_worker'>worker</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_worker_died'><a href="#ns_worker_died-instance_method" title="Concurrent::RubyThreadPoolExecutor#ns_worker_died (method)">ns_worker_died</a></span> <span class='id identifier rubyid_worker'>worker</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_task_completed-instance_method">
  <h3 class='signature priv'>
    #<strong>worker_task_completed</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb#L113-L115'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='113' data-end='115'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb', line 113</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_worker_task_completed'>worker_task_completed</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@completed_task_count</span> <span class='op'>+=</span> <span class='int'>1</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>