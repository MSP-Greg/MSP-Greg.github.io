<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Concurrent::TimerSet &mdash; Concurrent RubyÂ master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Concurrent::TimerSet",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Concurrent</a> &raquo; 
      <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>TimerSet&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Concurrent::TimerSet</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a>,
          <a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a>,
          <a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a>,
          <a href="Concern/Deprecation.html" title="Concurrent::Concern::Deprecation (module)"><code>Concern::Deprecation</code></a>,
          <a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a>,
          <a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a>,
          <a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)">Concurrent::RubyExecutorService</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)">Concurrent::Synchronization::LockableObject</a></li>
          <li class='next'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)">Concurrent::AbstractExecutorService</a></li>
          <li class='next'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)">Concurrent::RubyExecutorService</a></li>
          <li class='next'>Concurrent::TimerSet</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L19'>lib/concurrent-ruby/concurrent/executor/timer_set.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Time calculations on all platforms and languages are sensitive to changes to the system clock. To alleviate the potential problems associated with changing the system clock while an application is running, most modern operating systems provide a monotonic clock that operates independently of the system clock. A monotonic clock cannot be used to determine human-friendly clock times. A monotonic clock is used exclusively for calculating time intervals. Not all Ruby platforms provide access to an operating system monotonic clock. On these platforms a pure-Ruby monotonic clock will be used as a fallback. An operating system monotonic clock is both faster and more reliable than the pure-Ruby implementation. The pure-Ruby implementation should be fast and reliable enough for most non-realtime operations. At this time the common Ruby platforms that provide access to an operating system monotonic clock are MRI 2.1 and above and JRuby (all versions).</p>
</div>
  </div>


<p>Executes a collection of tasks, each after a given delay. A master task monitors the set and schedules each task for execution at the appropriate time. Tasks are run on the global thread pool or on the supplied executor. Each task is represented as a <a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)"><code>ScheduledTask</code></a>.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)"><code>ScheduledTask</code></a></li>
          <li><a href="http://linux.die.net/man/3/clock_gettime" target="_parent" title="Linux clock_gettime(3)">Linux clock_gettime(3)</a></li>
      </ul>

</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
  <h3 class='inherited'><a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="Concern/Logging.html#SEV_LABEL-constant" title="Concurrent::Concern::Logging::SEV_LABEL (constant)">SEV_LABEL</a>
  </p>
  <h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
  <p  class='inherited'>
    <a href="AbstractExecutorService.html#FALLBACK_POLICIES-constant" title="Concurrent::AbstractExecutorService::FALLBACK_POLICIES (constant)">FALLBACK_POLICIES</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(opts = {})  &#x21d2; TimerSet </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new set of timed tasks.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="RubyExecutorService.html#new-class_method" title="Concurrent::RubyExecutorService.new (method)">.new</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#new-class_method" title="Concurrent::AbstractExecutorService.new (method)">.new</a></td>
      <td><div class='inline'><p>Create a new thread pool.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="RubyExecutorService.html#fallback_policy-instance_method" title="Concurrent::RubyExecutorService#fallback_policy (method)">#fallback_policy</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_running%3F-instance_method" title="Concurrent::RubyExecutorService#ns_running? (method)">#ns_running?</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_shutdown%3F-instance_method" title="Concurrent::RubyExecutorService#ns_shutdown? (method)">#ns_shutdown?</a>,
        <a class='i_m ro priv' href="RubyExecutorService.html#ns_shuttingdown%3F-instance_method" title="Concurrent::RubyExecutorService#ns_shuttingdown? (method)">#ns_shuttingdown?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m rw deprecated' href="AbstractExecutorService.html#auto_terminate=-instance_method" title="Concurrent::AbstractExecutorService#auto_terminate= (method)">#auto_terminate=</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the auto-terminate behavior for this executor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="AbstractExecutorService.html#auto_terminate%3F-instance_method" title="Concurrent::AbstractExecutorService#auto_terminate? (method)">#auto_terminate?</a></td>
      <td><div class='inline'><p>Is the executor auto-terminate when the application exits?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="AbstractExecutorService.html#fallback_policy-instance_method" title="Concurrent::AbstractExecutorService#fallback_policy (method)">#fallback_policy</a>,
        <a class='i_m ro' href="AbstractExecutorService.html#name-instance_method" title="Concurrent::AbstractExecutorService#name (method)">#name</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#running%3F-instance_method" title="Concurrent::AbstractExecutorService#running? (method)">#running?</a></td>
      <td><div class='inline'><p>Is the executor running?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shutdown-instance_method" title="Concurrent::AbstractExecutorService#shutdown (method)">#shutdown</a></td>
      <td><div class='inline'><p>Begin an orderly shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shutdown%3F-instance_method" title="Concurrent::AbstractExecutorService#shutdown? (method)">#shutdown?</a></td>
      <td><div class='inline'><p>Is the executor shutdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="AbstractExecutorService.html#shuttingdown%3F-instance_method" title="Concurrent::AbstractExecutorService#shuttingdown? (method)">#shuttingdown?</a></td>
      <td><div class='inline'><p>Is the executor shuttingdown?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro priv' href="AbstractExecutorService.html#ns_auto_terminate%3F-instance_method" title="Concurrent::AbstractExecutorService#ns_auto_terminate? (method)">#ns_auto_terminate?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="ExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::ExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="ExecutorService.html#serialized%3F-instance_method" title="Concurrent::ExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#kill-instance_method" title="#kill (instance method)">#<strong>kill</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Begin an immediate shutdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#post-instance_method" title="#post (instance method)">#<strong>post</strong>(delay, *args) { ... } &#x21d2; Concurrent::ScheduledTask, false </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Post a task to be execute run after a given delay (in seconds).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_initialize-instance_method" title="#ns_initialize (instance method)">#<strong>ns_initialize</strong>(opts)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_post_task-instance_method" title="#ns_post_task (instance method)">#<strong>ns_post_task</strong>(task)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_reset_if_forked-instance_method" title="#ns_reset_if_forked (instance method)">#<strong>ns_reset_if_forked</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ns_shutdown_execution-instance_method" title="#ns_shutdown_execution (instance method)">#<strong>ns_shutdown_execution</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> callback called during shutdown.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#post_task-instance_method" title="#post_task (instance method)">#<strong>post_task</strong>(task)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Post the task to the internal queue.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#process_tasks-instance_method" title="#process_tasks (instance method)">#<strong>process_tasks</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Run a loop and execute tasks in the scheduled order and at the approximate scheduled time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#remove_task-instance_method" title="#remove_task (instance method)">#<strong>remove_task</strong>(task)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Remove the given task from the queue.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="RubyExecutorService.html" title="Concurrent::RubyExecutorService (class)"><code>RubyExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#<<-instance_method" title="Concurrent::RubyExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m deprecated' href="RubyExecutorService.html#auto_terminate=-instance_method" title="Concurrent::RubyExecutorService#auto_terminate= (method)">#auto_terminate=</a></td>
      <td><div class='inline'><p><a href="Set.html" title="Concurrent::Set (class)"><code>Set</code></a> the auto-terminate behavior for this executor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#auto_terminate%3F-instance_method" title="Concurrent::RubyExecutorService#auto_terminate? (method)">#auto_terminate?</a></td>
      <td><div class='inline'><p>Is the executor auto-terminate when the application exits?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::RubyExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#kill-instance_method" title="Concurrent::RubyExecutorService#kill (method)">#kill</a></td>
      <td><div class='inline'><p>Begin an immediate shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#post-instance_method" title="Concurrent::RubyExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#running%3F-instance_method" title="Concurrent::RubyExecutorService#running? (method)">#running?</a></td>
      <td><div class='inline'><p>Is the executor running?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#serialized%3F-instance_method" title="Concurrent::RubyExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shutdown-instance_method" title="Concurrent::RubyExecutorService#shutdown (method)">#shutdown</a></td>
      <td><div class='inline'><p>Begin an orderly shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shutdown%3F-instance_method" title="Concurrent::RubyExecutorService#shutdown? (method)">#shutdown?</a></td>
      <td><div class='inline'><p>Is the executor shutdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#shuttingdown%3F-instance_method" title="Concurrent::RubyExecutorService#shuttingdown? (method)">#shuttingdown?</a></td>
      <td><div class='inline'><p>Is the executor shuttingdown?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="RubyExecutorService.html#wait_for_termination-instance_method" title="Concurrent::RubyExecutorService#wait_for_termination (method)">#wait_for_termination</a></td>
      <td><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="RubyExecutorService.html#ns_shutdown_execution-instance_method" title="Concurrent::RubyExecutorService#ns_shutdown_execution (method)">#ns_shutdown_execution</a>,
        <a class='i_m priv' href="RubyExecutorService.html#stop_event-instance_method" title="Concurrent::RubyExecutorService#stop_event (method)">#stop_event</a>,
        <a class='i_m priv' href="RubyExecutorService.html#stopped_event-instance_method" title="Concurrent::RubyExecutorService#stopped_event (method)">#stopped_event</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AbstractExecutorService.html" title="Concurrent::AbstractExecutorService (class)"><code>AbstractExecutorService</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#<<-instance_method" title="Concurrent::AbstractExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#can_overflow%3F-instance_method" title="Concurrent::AbstractExecutorService#can_overflow? (method)">#can_overflow?</a></td>
      <td><div class='inline'><p>Does the task queue have a maximum size?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#kill-instance_method" title="Concurrent::AbstractExecutorService#kill (method)">#kill</a></td>
      <td><div class='inline'><p>Begin an immediate shutdown.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#post-instance_method" title="Concurrent::AbstractExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#serialized%3F-instance_method" title="Concurrent::AbstractExecutorService#serialized? (method)">#serialized?</a></td>
      <td><div class='inline'><p>Does this executor guarantee serialization of its operations?</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="AbstractExecutorService.html#to_s-instance_method" title="Concurrent::AbstractExecutorService#to_s (method)">#to_s</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="AbstractExecutorService.html#wait_for_termination-instance_method" title="Concurrent::AbstractExecutorService#wait_for_termination (method)">#wait_for_termination</a></td>
      <td><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#fallback_action-instance_method" title="Concurrent::AbstractExecutorService#fallback_action (method)">#fallback_action</a></td>
      <td><div class='inline'><p>Returns an action which executes the <code>fallback_policy</code> once the queue size reaches <code>max_queue</code>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="AbstractExecutorService.html#ns_execute-instance_method" title="Concurrent::AbstractExecutorService#ns_execute (method)">#ns_execute</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#ns_kill_execution-instance_method" title="Concurrent::AbstractExecutorService#ns_kill_execution (method)">#ns_kill_execution</a></td>
      <td><div class='inline'><p>Callback method called when the executor has been killed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="AbstractExecutorService.html#ns_shutdown_execution-instance_method" title="Concurrent::AbstractExecutorService#ns_shutdown_execution (method)">#ns_shutdown_execution</a></td>
      <td><div class='inline'><p>Callback method called when an orderly shutdown has completed.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Deprecation.html" title="Concurrent::Concern::Deprecation (module)"><code>Concern::Deprecation</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Concern/Deprecation.html#deprecated-instance_method" title="Concurrent::Concern::Deprecation#deprecated (method)">#deprecated</a>,
        <a class='i_m ' href="Concern/Deprecation.html#deprecated_method-instance_method" title="Concurrent::Concern::Deprecation#deprecated_method (method)">#deprecated_method</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ExecutorService.html#<<-instance_method" title="Concurrent::ExecutorService#&lt;&lt; (method)">#<<</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ExecutorService.html#post-instance_method" title="Concurrent::ExecutorService#post (method)">#post</a></td>
      <td><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Concern/Logging.html" title="Concurrent::Concern::Logging (module)"><code>Concern::Logging</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Concern/Logging.html#log-instance_method" title="Concurrent::Concern::Logging#log (method)">#log</a></td>
      <td><div class='inline'><p>Logs through <a href="../Concurrent.html#global_logger-class_method" title="Concurrent.global_logger (method)">global_logger</a>, it can be overridden by setting @logger.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Synchronization/LockableObject.html" title="Concurrent::Synchronization::LockableObject (class)"><code>Synchronization::LockableObject</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Synchronization/LockableObject.html#new_condition-instance_method" title="Concurrent::Synchronization::LockableObject#new_condition (method)">#new_condition</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(opts = {})  &#x21d2; <code>TimerSet</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new set of timed tasks.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L30-L32'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='30' data-end='32'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 30</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='kw'>super</span>(<span class='id identifier rubyid_opts'>opts</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="kill-instance_method">
  <h3 class='signature  first'>
    #<strong>kill</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Begin an immediate shutdown. In-progress tasks will be allowed to complete but enqueued tasks will be dismissed and no new tasks will be accepted. Has no additional effect if the thread pool is not running.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L62-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='62' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 62</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_kill'>kill</span>
  <span class='id identifier rubyid_shutdown'>shutdown</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_initialize-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_initialize</strong>(opts)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>opts</span>
    <span class='type'>(<a href="Hash.html" title="Concurrent::Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>the options to create the object with.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L74-L80'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='74' data-end='80'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 74</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_initialize'>ns_initialize</span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='ivar'>@queue</span>              <span class='op'>=</span> <span class='const'><a href="Collection.html" title="Concurrent::Collection (module)">Collection</a></span><span class='op'>::</span><span class='const'><a href="Collection/NonConcurrentPriorityQueue.html" title="Concurrent::Collection::NonConcurrentPriorityQueue (class)">NonConcurrentPriorityQueue</a></span>.<span class='id identifier rubyid_new'><a href="Collection/NonConcurrentPriorityQueue.html#new-class_method" title="Concurrent::Collection::NonConcurrentPriorityQueue.new (method)">new</a></span>(<span class='label'>order:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_min'>min</span>)
  <span class='ivar'>@task_executor</span>      <span class='op'>=</span> <span class='const'><a href="Options.html" title="Concurrent::Options (module)">Options</a></span>.<span class='id identifier rubyid_executor_from_options'><a href="Options.html#executor_from_options-class_method" title="Concurrent::Options.executor_from_options (method)">executor_from_options</a></span>(<span class='id identifier rubyid_opts'>opts</span>) <span class='op'>||</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_global_io_executor'><a href="../Concurrent.html#global_io_executor-class_method" title="Concurrent.global_io_executor (method)">global_io_executor</a></span>
  <span class='ivar'>@timer_executor</span>     <span class='op'>=</span> <span class='const'><a href="SingleThreadExecutor.html" title="Concurrent::SingleThreadExecutor (class)">SingleThreadExecutor</a></span>.<span class='id identifier rubyid_new'><a href="../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">new</a></span>
  <span class='ivar'>@condition</span>          <span class='op'>=</span> <span class='const'><a href="Event.html" title="Concurrent::Event (class)">Event</a></span>.<span class='id identifier rubyid_new'><a href="Event.html#new-class_method" title="Concurrent::Event.new (method)">new</a></span>
  <span class='ivar'>@ruby_pid</span>           <span class='op'>=</span> <span class='gvar'>$$</span> <span class='comment'># detects if Ruby has forked
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_post_task-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_post_task</strong>(task)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L94-L106'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='94' data-end='106'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 94</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_post_task'>ns_post_task</span>(<span class='id identifier rubyid_task'>task</span>)
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_ns_running?'>ns_running?</span>
  <span class='id identifier rubyid_ns_reset_if_forked'><a href="#ns_reset_if_forked-instance_method" title="Concurrent::TimerSet#ns_reset_if_forked (method)">ns_reset_if_forked</a></span>
  <span class='kw'>if</span> (<span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_initial_delay'>initial_delay</span>) <span class='op'>&lt;=</span> <span class='float'>0.01</span>
    <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_executor'><a href="../Concurrent.html#executor-class_method" title="Concurrent.executor (method)">executor</a></span>.<span class='id identifier rubyid_post'><a href="#post-instance_method" title="Concurrent::TimerSet#post (method)">post</a></span> { <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_process_task'>process_task</span> }
  <span class='kw'>else</span>
    <span class='ivar'>@queue</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_task'>task</span>)
    <span class='comment'># only post the process method when the queue is empty
</span>    <span class='ivar'>@timer_executor</span>.<span class='id identifier rubyid_post'><a href="#post-instance_method" title="Concurrent::TimerSet#post (method)">post</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_process_tasks'><a href="#process_tasks-instance_method" title="Concurrent::TimerSet#process_tasks (method)">process_tasks</a></span>)) <span class='kw'>if</span> <span class='ivar'>@queue</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='ivar'>@condition</span>.<span class='id identifier rubyid_set'>set</span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_reset_if_forked-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_reset_if_forked</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L129-L135'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='129' data-end='135'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 129</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_reset_if_forked'>ns_reset_if_forked</span>
  <span class='kw'>if</span> <span class='gvar'>$$</span> <span class='op'>!=</span> <span class='ivar'>@ruby_pid</span>
    <span class='ivar'>@queue</span>.<span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@condition</span>.<span class='id identifier rubyid_reset'>reset</span>
    <span class='ivar'>@ruby_pid</span> <span class='op'>=</span> <span class='gvar'>$$</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ns_shutdown_execution-instance_method">
  <h3 class='signature priv'>
    #<strong>ns_shutdown_execution</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="ExecutorService.html" title="Concurrent::ExecutorService (module)"><code>ExecutorService</code></a> callback called during shutdown.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L122-L127'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='122' data-end='127'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 122</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_shutdown_execution'>ns_shutdown_execution</span>
  <span class='id identifier rubyid_ns_reset_if_forked'><a href="#ns_reset_if_forked-instance_method" title="Concurrent::TimerSet#ns_reset_if_forked (method)">ns_reset_if_forked</a></span>
  <span class='ivar'>@queue</span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@timer_executor</span>.<span class='id identifier rubyid_kill'><a href="#kill-instance_method" title="Concurrent::TimerSet#kill (method)">kill</a></span>
  <span class='id identifier rubyid_stopped_event'>stopped_event</span>.<span class='id identifier rubyid_set'>set</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="post-instance_method">
  <h3 class='signature '>
    #<strong>post</strong>(delay, *args) { ... } &#x21d2; <a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)">Concurrent::ScheduledTask</a>, <code>false</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Post a task to be execute run after a given delay (in seconds). If the delay is less than 1/100th of a second the task will be immediately post to the executor.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>delay</span>
    <span class='type'>(<code>Float</code>)</span>
&mdash;    <div class='inline'>
<p>the number of seconds to wait for before executing the task.</p>
</div>
  </li>
  <li>
    <span class='name'>args</span>
    <span class='type'>(<a href="Array.html" title="Concurrent::Array (class)">Array</a>&lt;<a href="../Object.html" title="Object (class)">Object</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>the arguments passed to the task on execution.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p>the task to be performed.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)">Concurrent::ScheduledTask</a>, <code>false</code>)</span>
&mdash;    <div class='inline'>
<p><a href="IVar.html" title="Concurrent::IVar (class)"><code>IVar</code></a> representing the task if the post is successful; false after shutdown.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>if the intended execution time is not in the future.</p>
</div>
  </li>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>if no block is given.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L48-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='48' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 48</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_post'>post</span>(<span class='id identifier rubyid_delay'>delay</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::TimerSet.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_running?'>running?</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> { <span class='label'>executor:</span>  <span class='ivar'>@task_executor</span><span class='comma'>,</span>
           <span class='label'>args:</span>      <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
           <span class='label'>timer_set:</span> <span class='kw'>self</span> }
  <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'><a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)">ScheduledTask</a></span>.<span class='id identifier rubyid_execute'><a href="ScheduledTask.html#execute-class_method" title="Concurrent::ScheduledTask.execute (method)">execute</a></span>(<span class='id identifier rubyid_delay'>delay</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span>) <span class='comment'># may raise exception
</span>  <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_unscheduled?'>unscheduled?</span> <span class='op'>?</span> <span class='kw'>false</span> <span class='op'>:</span> <span class='id identifier rubyid_task'>task</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="post_task-instance_method">
  <h3 class='signature priv'>
    #<strong>post_task</strong>(task)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This is intended as a callback method from <a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)"><code>ScheduledTask</code></a> only. It is not intended to be used directly. Post a task by using the <code>SchedulesTask#execute</code> method.</p>
</div>
  </div>


<p>Post the task to the internal queue.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L89-L91'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='89' data-end='91'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 89</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_post_task'>post_task</span>(<span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='id identifier rubyid_ns_post_task'><a href="#ns_post_task-instance_method" title="Concurrent::TimerSet#ns_post_task (method)">ns_post_task</a></span>(<span class='id identifier rubyid_task'>task</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process_tasks-instance_method">
  <h3 class='signature priv'>
    #<strong>process_tasks</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Run a loop and execute tasks in the scheduled order and at the approximate scheduled time. If no tasks remain the thread will exit gracefully so that garbage collection can occur. If there are no ready tasks it will sleep for up to 60 seconds waiting for the next scheduled task.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L143-L174'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='143' data-end='174'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 143</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process_tasks'>process_tasks</span>
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@condition</span>.<span class='id identifier rubyid_reset'>reset</span><span class='semicolon'>;</span> <span class='ivar'>@queue</span>.<span class='id identifier rubyid_peek'>peek</span> }
    <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_task'>task</span>

    <span class='id identifier rubyid_now'>now</span>  <span class='op'>=</span> <span class='const'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span>.<span class='id identifier rubyid_monotonic_time'><a href="../Concurrent.html#monotonic_time-class_method" title="Concurrent.monotonic_time (method)">monotonic_time</a></span>
    <span class='id identifier rubyid_diff'>diff</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_schedule_time'>schedule_time</span> <span class='op'>-</span> <span class='id identifier rubyid_now'>now</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_diff'>diff</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
      <span class='comment'># We need to remove the task from the queue before passing
</span>      <span class='comment'># it to the executor, to avoid race conditions where we pass
</span>      <span class='comment'># the peek&#39;ed task to the executor and then pop a different
</span>      <span class='comment'># one that&#39;s been added in the meantime.
</span>      <span class='comment'>#
</span>      <span class='comment'># Note that there&#39;s no race condition between the peek and
</span>      <span class='comment'># this pop - this pop could retrieve a different task from
</span>      <span class='comment'># the peek, but that task would be due to fire now anyway
</span>      <span class='comment'># (because @queue is a priority queue, and this thread is
</span>      <span class='comment'># the only reader, so whatever timer is at the head of the
</span>      <span class='comment'># queue now must have the same pop time, or a closer one, as
</span>      <span class='comment'># when we peeked).
</span>      <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@queue</span>.<span class='id identifier rubyid_pop'>pop</span> }
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_executor'><a href="../Concurrent.html#executor-class_method" title="Concurrent.executor (method)">executor</a></span>.<span class='id identifier rubyid_post'><a href="#post-instance_method" title="Concurrent::TimerSet#post (method)">post</a></span> { <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_process_task'>process_task</span> }
      <span class='kw'>rescue</span> <span class='const'><a href="../Concurrent.html#RejectedExecutionError-constant" title="Concurrent::RejectedExecutionError (constant)">RejectedExecutionError</a></span>
        <span class='comment'># ignore and continue
</span>      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='ivar'>@condition</span>.<span class='id identifier rubyid_wait'>wait</span>([<span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='int'>60</span>].<span class='id identifier rubyid_min'>min</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_task-instance_method">
  <h3 class='signature priv'>
    #<strong>remove_task</strong>(task)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This is intended as a callback method from <a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)"><code>ScheduledTask</code></a> only. It is not intended to be used directly. Cancel a task by using the <a href="ScheduledTask.html#cancel-instance_method" title="Concurrent::ScheduledTask#cancel (method)">ScheduledTask#cancel</a> method.</p>
</div>
  </div>


<p>Remove the given task from the queue.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby/concurrent/executor/timer_set.rb#L115-L117'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='115' data-end='117'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby/concurrent/executor/timer_set.rb', line 115</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_task'>remove_task</span>(<span class='id identifier rubyid_task'>task</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@queue</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_task'>task</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>