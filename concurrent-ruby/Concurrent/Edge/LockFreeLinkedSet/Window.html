<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Concurrent::Edge::LockFreeLinkedSet::Window &mdash; Concurrent Ruby master</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Concurrent::Edge::LockFreeLinkedSet::Window",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Concurrent</a> &raquo; 
      <a href='../../../_index.html#alpha_W'>Index (W)</a> &raquo; 
        <a href="../../../Concurrent.html" title="Concurrent (module)">Concurrent</a> &raquo; 
        <a href="../../Edge.html" title="Concurrent::Edge (module)">Edge</a> &raquo; 
        <a href="../LockFreeLinkedSet.html" title="Concurrent::Edge::LockFreeLinkedSet (class)">LockFreeLinkedSet</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Window&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Concurrent::Edge::LockFreeLinkedSet::Window</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../../../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb#L4'>lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#find-class_method" title=".find (class method)">.<strong>find</strong>(head, item)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>This method is used to find a ‘window’ for which <a href="../LockFreeLinkedSet.html#add-instance_method" title="Concurrent::Edge::LockFreeLinkedSet#add (method)">#add</a> and <a href="../LockFreeLinkedSet.html#remove-instance_method" title="Concurrent::Edge::LockFreeLinkedSet#remove (method)">#remove</a> methods can use to know where to add and remove from the list.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(pred, curr)  &#x21d2; Window </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#curr-instance_method" title="#curr (instance method)">#<strong>curr</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pred-instance_method" title="#pred (instance method)">#<strong>pred</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(pred, curr)  &#x21d2; <code>Window</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb#L7-L9'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7' data-end='9'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb', line 7</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="../../../Concurrent.html#initialize-instance_method" title="Concurrent#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span><span class='comma'>,</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span>)
  <span class='ivar'>@pred</span><span class='comma'>,</span> <span class='ivar'>@curr</span> <span class='op'>=</span> <span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span><span class='comma'>,</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="find-class_method">
  <h3 class='signature  first'>
    .<strong>find</strong>(head, item)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This method is used to find a ‘window’ for which <a href="../LockFreeLinkedSet.html#add-instance_method" title="Concurrent::Edge::LockFreeLinkedSet#add (method)">Concurrent::Edge::LockFreeLinkedSet#add</a> and <a href="../LockFreeLinkedSet.html#remove-instance_method" title="Concurrent::Edge::LockFreeLinkedSet#remove (method)">Concurrent::Edge::LockFreeLinkedSet#remove</a> methods can use to know where to add and remove from the list. However, it has another responsibilility, which is to physically unlink any nodes marked for removal in the set. This prevents adds/removes from having to retraverse the list to physically unlink nodes.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb#L16-L45'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='16' data-end='45'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb', line 16</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_head'>head</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span>)
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_break_inner_loops'>break_inner_loops</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span> <span class='op'>=</span> <span class='id identifier rubyid_head'>head</span>
    <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span> <span class='op'>=</span> <span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span>.<span class='id identifier rubyid_next_node'>next_node</span>

    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='id identifier rubyid_marked'>marked</span> <span class='op'>=</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span>.<span class='id identifier rubyid_successor_reference'>successor_reference</span>.<span class='id identifier rubyid_get'>get</span>

      <span class='comment'># Remove sequence of marked nodes
</span>      <span class='kw'>while</span> <span class='id identifier rubyid_marked'>marked</span>
        <span class='id identifier rubyid_removed'>removed</span> <span class='op'>=</span> <span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span>.<span class='id identifier rubyid_successor_reference'>successor_reference</span>.<span class='id identifier rubyid_compare_and_set'>compare_and_set</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span><span class='comma'>,</span> <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>false</span>

        <span class='comment'># If could not remove node, try again
</span>        <span class='id identifier rubyid_break_inner_loops'>break_inner_loops</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='op'>&amp;&amp;</span> <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_removed'>removed</span>

        <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span> <span class='op'>=</span> <span class='id identifier rubyid_succ'>succ</span>
        <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='id identifier rubyid_marked'>marked</span> <span class='op'>=</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span>.<span class='id identifier rubyid_successor_reference'>successor_reference</span>.<span class='id identifier rubyid_get'>get</span>
      <span class='kw'>end</span>

      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_break_inner_loops'>break_inner_loops</span>

      <span class='comment'># We have found a window
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="Concurrent::Edge::LockFreeLinkedSet::Window.new (method)">new</a></span> <span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span><span class='comma'>,</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_item'>item</span>

      <span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span> <span class='op'>=</span> <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span>
      <span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span> <span class='op'>=</span> <span class='id identifier rubyid_succ'>succ</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="curr-instance_method">
  <h3 class='signature rw first'>
    #<strong>curr</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb#L5-L5'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5' data-end='5'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb', line 5</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pred'><a href="#pred-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#pred (method)">pred</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_curr'>curr</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pred-instance_method">
  <h3 class='signature rw'>
    #<strong>pred</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby-concurrency/concurrent-ruby/blob/master/lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb#L5-L5'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5' data-end='5'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/concurrent-ruby-edge/concurrent/edge/lock_free_linked_set/window.rb', line 5</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pred'>pred</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_curr'><a href="#curr-instance_method" title="Concurrent::Edge::LockFreeLinkedSet::Window#curr (method)">curr</a></span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>