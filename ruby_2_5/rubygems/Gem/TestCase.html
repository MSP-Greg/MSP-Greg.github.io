<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Gem::TestCase &mdash; rubygems  Ruby-2.5.9 p229</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Gem::TestCase",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-2.5.9</a> &raquo; 
      <a href='../'>rubygems</a> &raquo; 
      <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../Gem.html" title="Gem (module)">Gem</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>TestCase&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Gem::TestCase</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="TestCase/SpecFetcherSetup.html" title="Gem::TestCase::SpecFetcherSetup (class)">SpecFetcherSetup</a>,
        <a href="TestCase/StaticSet.html" title="Gem::TestCase::StaticSet (class)">StaticSet</a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="InstallerTestCase.html" title="Gem::InstallerTestCase (class)">InstallerTestCase</a>, <a href="Package/TarTestCase.html" title="Gem::Package::TarTestCase (class)">Package::TarTestCase</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          MiniTest::Unit::TestCase
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a>,
          <a href="Text.html" title="Gem::Text (module)">Text</a>,
          MiniTest::Unit::TestCase
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>MiniTest::Unit::TestCase</span>
        <ul class='fullTree'>
          <li>Object</li>
          <li class='next'>MiniTest::Unit::TestCase</li>
          <li class='next'>Gem::TestCase</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L89'>lib/rubygems/test_case.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>RubyGemTestCase provides a variety of methods for testing rubygems and gem-related behavior in a sandbox.  Through RubyGemTestCase you can install and uninstall gems, fetch remote gems through a stub fetcher and be assured your normal set of gems is not affected.</p>

<p>Tests are always run at a safe level of 1.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='PRIVATE_KEY_PASSPHRASE-constant' class='summary_signature nodoc'>PRIVATE_KEY_PASSPHRASE =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1483-L1483'># File 'lib/rubygems/test_case.rb', line 1483</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Foo bar</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#vc_windows%3F-class_method" title=".vc_windows? (class method)">.<strong>vc_windows?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether or not we&#39;re on a version of Ruby built with VC++ (or Borland) versus Cygwin, Mingw, etc.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#win_platform%3F-class_method" title=".win_platform? (class method)">.<strong>win_platform?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Is this test being run on a Windows platform?</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#cert_path-class_method" title=".cert_path (class method)">.<strong>cert_path</strong>(cert_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the path to the certificate named <code>cert_name</code> from <code>test/rubygems/</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#key_path-class_method" title=".key_path (class method)">.<strong>key_path</strong>(key_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the path to the key named <code>key_name</code> from <code>test/rubygems</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_cert-class_method" title=".load_cert (class method)">.<strong>load_cert</strong>(cert_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Loads certificate named <code>cert_name</code> from <code>test/rubygems/</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_key-class_method" title=".load_key (class method)">.<strong>load_key</strong>(key_name, passphrase = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Loads an RSA private key named <code>key_name</code> with <code>passphrase</code> in <code>test/rubygems/</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#make_command-class_method" title=".make_command (class method)">.<strong>make_command</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the make command for the current platform.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#process_based_port-class_method" title=".process_based_port (class method)">.<strong>process_based_port</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Allows tests to use a random (but controlled) port number instead of a hardcoded one.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rubybin-class_method" title=".rubybin (class method)">.<strong>rubybin</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Finds the path to the Ruby executable.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#have_git%3F-instance_method" title="#have_git? (instance method)">#<strong>have_git?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Skips this test unless you have a git executable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#nmake_found%3F-instance_method" title="#nmake_found? (instance method)">#<strong>nmake_found?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether or not the nmake command could be found.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#vc_windows%3F-instance_method" title="#vc_windows? (instance method)">#<strong>vc_windows?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether or not we&#39;re on a version of Ruby built with VC++ (or Borland) versus Cygwin, Mingw, etc.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#win_platform%3F-instance_method" title="#win_platform? (instance method)">#<strong>win_platform?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Is this test being run on a Windows platform?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#fetcher-instance_method" title="#fetcher (instance method)">#<strong>fetcher</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#gem_repo-instance_method" title="#gem_repo (instance method)">#<strong>gem_repo</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#uri-instance_method" title="#uri (instance method)">#<strong>uri</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="DefaultUserInteraction.html#ui-instance_method" title="Gem::DefaultUserInteraction#ui (method)">#ui</a></td>
      <td><div class='inline'><p>See <a href="DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">DefaultUserInteraction.ui</a></p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="DefaultUserInteraction.html#ui=-instance_method" title="Gem::DefaultUserInteraction#ui= (method)">#ui=</a></td>
      <td><div class='inline'><p>See <a href="DefaultUserInteraction.html#ui=-class_method" title="Gem::DefaultUserInteraction.ui= (method)">DefaultUserInteraction.ui=</a></p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#add_to_fetcher-instance_method" title="#add_to_fetcher (instance method)">#<strong>add_to_fetcher</strong>(spec, path = nil, repo = @gem_repo)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> to <tt>@fetcher</tt> serving the data in the file <a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#all_spec_names-instance_method" title="#all_spec_names (instance method)">#<strong>all_spec_names</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_activate-instance_method" title="#assert_activate (instance method)">#<strong>assert_activate</strong>(expected, *specs)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_contains_make_command-instance_method" title="#assert_contains_make_command (instance method)">#<strong>assert_contains_make_command</strong>(target, output, msg = nil)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_path_exists-instance_method" title="#assert_path_exists (instance method)">#<strong>assert_path_exists</strong>(path, msg = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>TODO: move to minitest.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#build_rake_in-instance_method" title="#build_rake_in (instance method)">#<strong>build_rake_in</strong>(good = true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Allows the proper version of <code>rake</code> to be used for the test.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#common_installer_setup-instance_method" title="#common_installer_setup (instance method)">#<strong>common_installer_setup</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#common_installer_teardown-instance_method" title="#common_installer_teardown (instance method)">#<strong>common_installer_teardown</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create_tmpdir-instance_method" title="#create_tmpdir (instance method)">#<strong>create_tmpdir</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>creates a temporary directory with hax TODO: deprecate and remove.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dep-instance_method" title="#dep (instance method)">#<strong>dep</strong>(name, *requirements)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Construct a new <a href="Dependency.html" title="Gem::Dependency (class)">Dependency</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dependency_request-instance_method" title="#dependency_request (instance method)">#<strong>dependency_request</strong>(dep, from_name, from_version, parent = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a <a href="Resolver/DependencyRequest.html" title="Gem::Resolver::DependencyRequest (class)">Resolver::DependencyRequest</a> from a <a href="Dependency.html" title="Gem::Dependency (class)">Dependency</a> <a href="#dep-instance_method" title="Gem::TestCase#dep (method)">#dep</a>, a <code>from_name</code> and <code>from_version</code> requesting the dependency and a <code>parent</code> DependencyRequest.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#enable_shared-instance_method" title="#enable_shared (instance method)">#<strong>enable_shared</strong>(value)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the ENABLE_SHARED entry in <code>RbConfig::CONFIG</code> to <code>value</code> and restores the original value when the block ends.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#git_gem-instance_method" title="#git_gem (instance method)">#<strong>git_gem</strong>(name = &#39;a&#39;, version = 1)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>A git_gem is used with a gem dependencies file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#install_default_gems-instance_method" title="#install_default_gems (instance method)">#<strong>install_default_gems</strong>(*specs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Installs the provided default specs including writing the spec file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#install_default_specs-instance_method" title="#install_default_specs (instance method)">#<strong>install_default_specs</strong>(*specs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Install the provided default specs.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#install_gem-instance_method" title="#install_gem (instance method)">#<strong>install_gem</strong>(spec, options = {})  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Builds and installs the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#install_gem_user-instance_method" title="#install_gem_user (instance method)">#<strong>install_gem_user</strong>(spec)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Builds and installs the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> into the user dir.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#install_specs-instance_method" title="#install_specs (instance method)">#<strong>install_specs</strong>(*specs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Install the provided specs.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#loaded_spec_names-instance_method" title="#loaded_spec_names (instance method)">#<strong>loaded_spec_names</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#make_command-instance_method" title="#make_command (instance method)">#<strong>make_command</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the make command for the current platform.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mu_pp-instance_method" title="#mu_pp (instance method)">#<strong>mu_pp</strong>(obj)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Enables pretty-print for all tests.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new_default_spec-instance_method" title="#new_default_spec (instance method)">#<strong>new_default_spec</strong>(name, version, deps = nil, *files)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_make_command_line-instance_method" title="#parse_make_command_line (instance method)">#<strong>parse_make_command_line</strong>(line)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#process_based_port-instance_method" title="#process_based_port (instance method)">#<strong>process_based_port</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>See <a href="#process_based_port-class_method" title="Gem::TestCase.process_based_port (method)">.process_based_port</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#quick_gem-instance_method" title="#quick_gem (instance method)">#<strong>quick_gem</strong>(name, version = &#39;2&#39;)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <a href="Specification.html" title="Gem::Specification (class)">Specification</a> with a minimum of extra work.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read_binary-instance_method" title="#read_binary (instance method)">#<strong>read_binary</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a binary file at <a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read_cache-instance_method" title="#read_cache (instance method)">#<strong>read_cache</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a Marshal file at <a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#refute_path_exists-instance_method" title="#refute_path_exists (instance method)">#<strong>refute_path_exists</strong>(path, msg = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>TODO: move to minitest.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#req-instance_method" title="#req (instance method)">#<strong>req</strong>(*requirements)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a new <a href="Requirement.html" title="Gem::Requirement (class)">Requirement</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#save_gemspec-instance_method" title="#save_gemspec (instance method)">#<strong>save_gemspec</strong>(name = &#39;a&#39;, version = 1, directory = &#39;.&#39;)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>create_gemspec creates gem specification in given <code>directory</code> or &#39;.&#39; for the given <code>name</code> and <code>version</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#save_loaded_features-instance_method" title="#save_loaded_features (instance method)">#<strong>save_loaded_features</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan_make_command_lines-instance_method" title="#scan_make_command_lines (instance method)">#<strong>scan_make_command_lines</strong>(output)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#setup-instance_method" title="#setup (instance method)">#<strong>setup</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="#setup-instance_method" title="Gem::TestCase#setup (method)">#setup</a> prepares a sandboxed location to install gems.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#spec-instance_method" title="#spec (instance method)">#<strong>spec</strong>(name, version, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a new <a href="Specification.html" title="Gem::Specification (class)">Specification</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#spec_fetcher-instance_method" title="#spec_fetcher (instance method)">#<strong>spec_fetcher</strong>(repository = @gem_repo)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <a href="SpecFetcher.html" title="Gem::SpecFetcher (class)">SpecFetcher</a> pre-filled with the gems or specs defined in the block.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#teardown-instance_method" title="#teardown (instance method)">#<strong>teardown</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="#teardown-instance_method" title="Gem::TestCase#teardown (method)">#teardown</a> restores the process to its original state and removes the tempdir unless the <code>KEEP_FILES</code> environment variable was set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uninstall_gem-instance_method" title="#uninstall_gem (instance method)">#<strong>uninstall_gem</strong>(spec)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Uninstalls the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unresolved_names-instance_method" title="#unresolved_names (instance method)">#<strong>unresolved_names</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_build_gem-instance_method" title="#util_build_gem (instance method)">#<strong>util_build_gem</strong>(spec)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Builds a gem from <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> and places it in <code>File.join @gemhome, &#39;cache&#39;</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_clear_gems-instance_method" title="#util_clear_gems (instance method)">#<strong>util_clear_gems</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes all installed gems from <tt>@gemhome</tt>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_gem-instance_method" title="#util_gem (instance method)">#<strong>util_gem</strong>(name, version, deps = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a gem with <code>name</code>, <code>version</code> and <code>deps</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_gzip-instance_method" title="#util_gzip (instance method)">#<strong>util_gzip</strong>(data)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Gzips <code>data</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_make_gems-instance_method" title="#util_make_gems (instance method)">#<strong>util_make_gems</strong>(prerelease = false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates several default gems which all have a lib/code.rb file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_remove_gem-instance_method" title="#util_remove_gem (instance method)">#<strong>util_remove_gem</strong>(spec)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_restore_RUBY_VERSION-instance_method" title="#util_restore_RUBY_VERSION (instance method)">#<strong>util_restore_RUBY_VERSION</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_set_arch-instance_method" title="#util_set_arch (instance method)">#<strong>util_set_arch</strong>(arch)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the platform to <code>arch</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_set_RUBY_VERSION-instance_method" title="#util_set_RUBY_VERSION (instance method)">#<strong>util_set_RUBY_VERSION</strong>(version, patchlevel = nil, revision = nil)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_setup_fake_fetcher-instance_method" title="#util_setup_fake_fetcher (instance method)">#<strong>util_setup_fake_fetcher</strong>(prerelease = false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets up a fake fetcher using the gems from <a href="#util_make_gems-instance_method" title="Gem::TestCase#util_make_gems (method)">#util_make_gems</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_setup_spec_fetcher-instance_method" title="#util_setup_spec_fetcher (instance method)">#<strong>util_setup_spec_fetcher</strong>(*specs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets up <a href="SpecFetcher.html" title="Gem::SpecFetcher (class)">SpecFetcher</a> to return information from the gems in <code>specs</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_spec-instance_method" title="#util_spec (instance method)">#<strong>util_spec</strong>(name, version = 2, deps = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a spec with <code>name</code>, <code>version</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#util_zip-instance_method" title="#util_zip (instance method)">#<strong>util_zip</strong>(data)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Deflates <code>data</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#v-instance_method" title="#v (instance method)">#<strong>v</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Construct a new <a href="Version_.html" title="Gem::Version (class)">Version</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#vendor_gem-instance_method" title="#vendor_gem (instance method)">#<strong>vendor_gem</strong>(name = &#39;a&#39;, version = 1)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>A vendor_gem is used with a gem dependencies file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wait_for_child_process_to_exit-instance_method" title="#wait_for_child_process_to_exit (instance method)">#<strong>wait_for_child_process_to_exit</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>In case we&#39;re building docs in a background process, this method waits for that process to exit (or if it&#39;s already been reaped, or never happened, swallows the <code>Errno::ECHILD</code> error).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_file-instance_method" title="#write_file (instance method)">#<strong>write_file</strong>(path)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes a binary file to <a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a> which is relative to <tt>@gemhome</tt>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#in_path%3F-instance_method" title="#in_path? (instance method)">#<strong>in_path?</strong>(executable)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new_spec-instance_method" title="#new_spec (instance method)">#<strong>new_spec</strong>(name, version, deps = nil, *files)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>new_spec is deprecated as it is never used.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#quick_spec-instance_method" title="#quick_spec (instance method)">#<strong>quick_spec</strong>(name, version = &#39;2&#39;)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>TODO:  remove in RubyGems 3.0.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DefaultUserInteraction.html#use_ui-instance_method" title="Gem::DefaultUserInteraction#use_ui (method)">#use_ui</a></td>
      <td><div class='inline'><p>See <a href="DefaultUserInteraction.html#use_ui-class_method" title="Gem::DefaultUserInteraction.use_ui (method)">DefaultUserInteraction.use_ui</a></p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Text.html" title="Gem::Text (module)">Text</a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Text.html#clean_text-instance_method" title="Gem::Text#clean_text (method)">#clean_text</a></td>
      <td><div class='inline'><p>Remove any non-printable characters and make the text suitable for printing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Text.html#format_text-instance_method" title="Gem::Text#format_text (method)">#format_text</a></td>
      <td><div class='inline'><p>Wraps <code>text</code> to <code>wrap</code> characters and optionally indents by <code>indent</code> characters.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Text.html#levenshtein_distance-instance_method" title="Gem::Text#levenshtein_distance (method)">#levenshtein_distance</a></td>
      <td><div class='inline'><p>This code is based directly on the <a href="Text.html" title="Gem::Text (module)">Text</a> gem implementation Returns a value representing the “cost” of transforming str1 into str2.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Text.html#truncate_text-instance_method" title="Gem::Text#truncate_text (method)">#truncate_text</a>,
        <a class='i_m nodoc' href="Text.html#min3-instance_method" title="Gem::Text#min3 (method)">#min3</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="vc_windows?-class_method">
  <h3 class='signature ro first'>
    .<strong>vc_windows?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether or not we&#39;re on a version of Ruby built with VC++ (or Borland) versus Cygwin, Mingw, etc.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1153-L1155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1153' data-end='1155'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1153</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_vc_windows?'>vc_windows?</span>
  <span class='const'>RUBY_PLATFORM</span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mswin</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="win_platform?-class_method">
  <h3 class='signature ro'>
    .<strong>win_platform?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Is this test being run on a Windows platform?</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1138-L1140'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1138' data-end='1140'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1138</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_win_platform?'>win_platform?</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_win_platform?'><a href="../Gem.html#win_platform%3F-class_method" title="Gem.win_platform? (method)">win_platform?</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="cert_path-class_method">
  <h3 class='signature  first'>
    .<strong>cert_path</strong>(cert_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the path to the certificate named <code>cert_name</code> from <code>test/rubygems/</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1450-L1460'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1450' data-end='1460'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1450</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_cert_path'>cert_path</span> <span class='id identifier rubyid_cert_name'>cert_name</span>
  <span class='kw'>if</span> <span class='int'>32</span> <span class='op'>==</span> (<span class='const'>Time</span>.<span class='id identifier rubyid_at'>at</span>(<span class='int'>2</span><span class='op'>**</span><span class='int'>32</span>) <span class='kw'>rescue</span> <span class='int'>32</span>) <span class='kw'>then</span>
    <span class='id identifier rubyid_cert_file'>cert_file</span> <span class='op'>=</span>
      <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../../test/rubygems/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cert_name'>cert_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_cert_32.pem</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                       <span class='kw'>__FILE__</span>

    <span class='kw'>return</span> <span class='id identifier rubyid_cert_file'>cert_file</span> <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_cert_file'>cert_file</span>
  <span class='kw'>end</span>

  <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../../test/rubygems/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cert_name'>cert_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_cert.pem</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>__FILE__</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="key_path-class_method">
  <h3 class='signature '>
    .<strong>key_path</strong>(key_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the path to the key named <code>key_name</code> from <code>test/rubygems</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1476-L1478'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1476' data-end='1478'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1476</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_key_path'>key_path</span> <span class='id identifier rubyid_key_name'>key_name</span>
  <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../../test/rubygems/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key_name'>key_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_key.pem</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>__FILE__</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_cert-class_method">
  <h3 class='signature '>
    .<strong>load_cert</strong>(cert_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Loads certificate named <code>cert_name</code> from <code>test/rubygems/</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1438-L1444'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1438' data-end='1444'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1438</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_load_cert'>load_cert</span> <span class='id identifier rubyid_cert_name'>cert_name</span>
  <span class='id identifier rubyid_cert_file'>cert_file</span> <span class='op'>=</span> <span class='id identifier rubyid_cert_path'><a href="#cert_path-class_method" title="Gem::TestCase.cert_path (method)">cert_path</a></span> <span class='id identifier rubyid_cert_name'>cert_name</span>

  <span class='id identifier rubyid_cert'>cert</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span> <span class='id identifier rubyid_cert_file'>cert_file</span>

  <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Certificate</span>.<span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_cert'>cert</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_key-class_method">
  <h3 class='signature '>
    .<strong>load_key</strong>(key_name, passphrase = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Loads an RSA private key named <code>key_name</code> with <code>passphrase</code> in <code>test/rubygems/</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1465-L1471'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1465' data-end='1471'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1465</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_load_key'>load_key</span> <span class='id identifier rubyid_key_name'>key_name</span><span class='comma'>,</span> <span class='id identifier rubyid_passphrase'>passphrase</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_key_file'>key_file</span> <span class='op'>=</span> <span class='id identifier rubyid_key_path'><a href="#key_path-class_method" title="Gem::TestCase.key_path (method)">key_path</a></span> <span class='id identifier rubyid_key_name'>key_name</span>

  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span> <span class='id identifier rubyid_key_file'>key_file</span>

  <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span>.<span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_passphrase'>passphrase</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="make_command-class_method">
  <h3 class='signature '>
    .<strong>make_command</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the make command for the current platform. For versions of Ruby built on MS Windows with VC++ or Borland it will return &#39;nmake&#39;. On all other platforms, including Cygwin, it will return &#39;make&#39;.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1170-L1172'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1170' data-end='1172'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1170</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_make_command'>make_command</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>make</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MAKE</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> (<span class='id identifier rubyid_vc_windows?'><a href="#vc_windows%3F-class_method" title="Gem::TestCase.vc_windows? (method)">vc_windows?</a></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nmake</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>make</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process_based_port-class_method">
  <h3 class='signature '>
    .<strong>process_based_port</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Allows tests to use a random (but controlled) port number instead of a hardcoded one. This helps CI tools when running parallels builds on the same builder slave.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1203-L1205'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1203' data-end='1205'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1203</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_process_based_port'>process_based_port</span>
  <span class='cvar'>@@process_based_port</span> <span class='op'>||=</span> <span class='int'>8000</span> <span class='op'>+</span> <span class='gvar'>$$</span> <span class='op'>%</span> <span class='int'>1000</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rubybin-class_method">
  <h3 class='signature '>
    .<strong>rubybin</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Finds the path to the Ruby executable</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1236-L1260'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1236' data-end='1260'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1236</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_rubybin'>rubybin</span>
  <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RUBY</span><span class='tstring_end'>&quot;</span></span>]
  <span class='kw'>return</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>
  <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_rubyexe'>rubyexe</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>.exe</span><span class='tstring_end'>&quot;</span></span>

  <span class='int'>3</span>.<span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='kw'>and</span> <span class='const'>File</span>.<span class='id identifier rubyid_executable?'>executable?</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='kw'>and</span> <span class='op'>!</span><span class='const'>File</span>.<span class='id identifier rubyid_directory?'>directory?</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>
      <span class='kw'>return</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>)
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_rubyexe'>rubyexe</span> <span class='kw'>and</span> <span class='const'>File</span>.<span class='id identifier rubyid_executable?'>executable?</span> <span class='id identifier rubyid_rubyexe'>rubyexe</span>
      <span class='kw'>return</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='id identifier rubyid_rubyexe'>rubyexe</span>)
    <span class='kw'>end</span>
    <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>..</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>)
  <span class='kw'>end</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rbconfig</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bindir</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span>
              <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby_install_name</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>+</span>
              <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXEEXT</span><span class='tstring_end'>&quot;</span></span>])
  <span class='kw'>rescue</span> <span class='const'><a href="LoadError.html" title="Gem::LoadError (class)">LoadError</a></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="fetcher-instance_method">
  <h3 class='signature rw  nodoc first'>
    #<strong>fetcher</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L91-L91'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='91' data-end='91'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 91</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fetcher'>fetcher</span> <span class='comment'># :nodoc:</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gem_repo-instance_method">
  <h3 class='signature rw  nodoc'>
    #<strong>gem_repo</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L93-L93'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='93' data-end='93'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 93</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gem_repo'>gem_repo</span> <span class='comment'># :nodoc:</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="have_git?-instance_method">
  <h3 class='signature ro'>
    #<strong>have_git?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Skips this test unless you have a git executable</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L515-L519'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='515' data-end='519'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 515</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_have_git?'>have_git?</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_in_path?'><a href="#in_path%3F-instance_method" title="Gem::TestCase#in_path? (method)">in_path?</a></span> <span class='ivar'>@git</span>

  <span class='id identifier rubyid_skip'>skip</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cannot find git executable, use GIT environment variable to set</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="nmake_found?-instance_method">
  <h3 class='signature ro'>
    #<strong>nmake_found?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether or not the nmake command could be found.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1186-L1188'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1186' data-end='1188'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1186</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_nmake_found?'>nmake_found?</span>
  <span class='id identifier rubyid_system'>system</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nmake /? 1&gt;NUL 2&gt;&amp;1</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uri-instance_method">
  <h3 class='signature rw  nodoc'>
    #<strong>uri</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L95-L95'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='95' data-end='95'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 95</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span> <span class='comment'># :nodoc:</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="vc_windows?-instance_method">
  <h3 class='signature ro'>
    #<strong>vc_windows?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether or not we&#39;re on a version of Ruby built with VC++ (or Borland) versus Cygwin, Mingw, etc.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1161-L1163'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1161' data-end='1163'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1161</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_vc_windows?'>vc_windows?</span>
  <span class='const'>RUBY_PLATFORM</span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mswin</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="win_platform?-instance_method">
  <h3 class='signature ro'>
    #<strong>win_platform?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Is this test being run on a Windows platform?</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1145-L1147'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1145' data-end='1147'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1145</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_win_platform?'>win_platform?</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_win_platform?'><a href="../Gem.html#win_platform%3F-class_method" title="Gem.win_platform? (method)">win_platform?</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="add_to_fetcher-instance_method">
  <h3 class='signature  first'>
    #<strong>add_to_fetcher</strong>(spec, path = nil, repo = @gem_repo)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> to <tt>@fetcher</tt> serving the data in the file <a href="../Gem.html#path-class_method" title="Gem.path (method)">Gem.path</a>. <code>repo</code> indicates which repo to make <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> appear to be in.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1031-L1034'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1031' data-end='1034'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1031</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_to_fetcher'>add_to_fetcher</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_repo'>repo</span><span class='op'>=</span><span class='ivar'>@gem_repo</span>)
  <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>||=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_cache_file'>cache_file</span>
  <span class='ivar'>@fetcher</span>.<span class='id identifier rubyid_data'>data</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_repo</span><span class='embexpr_end'>}</span><span class='tstring_content'>gems/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_file_name'>file_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_read_binary'><a href="#read_binary-instance_method" title="Gem::TestCase#read_binary (method)">read_binary</a></span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="all_spec_names-instance_method">
  <h3 class='signature '>
    #<strong>all_spec_names</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L622-L624'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='622' data-end='624'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 622</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_all_spec_names'>all_spec_names</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_full_name'>full_name</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_activate-instance_method">
  <h3 class='signature '>
    #<strong>assert_activate</strong>(expected, *specs)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L97-L112'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='97' data-end='112'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 97</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_activate'>assert_activate</span> <span class='id identifier rubyid_expected'>expected</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_specs'>specs</span>
  <span class='id identifier rubyid_specs'>specs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
    <span class='kw'>when</span> <span class='const'>String</span> <span class='kw'>then</span>
      <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_find_by_name'><a href="Specification.html#find_by_name-class_method" title="Gem::Specification.find_by_name (method)">find_by_name</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>).<span class='id identifier rubyid_activate'>activate</span>
    <span class='kw'>when</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span> <span class='kw'>then</span>
      <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_activate'>activate</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_flunk'>flunk</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_inspect'>inspect</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_loaded'>loaded</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_loaded_specs'><a href="../Gem.html#loaded_specs-class_method" title="Gem.loaded_specs (method)">loaded_specs</a></span>.<span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_full_name'>full_name</span>)

  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='id identifier rubyid_expected'>expected</span>.<span class='id identifier rubyid_sort'>sort</span><span class='comma'>,</span> <span class='id identifier rubyid_loaded'>loaded</span>.<span class='id identifier rubyid_sort'>sort</span> <span class='kw'>if</span> <span class='id identifier rubyid_expected'>expected</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_contains_make_command-instance_method">
  <h3 class='signature '>
    #<strong>assert_contains_make_command</strong>(target, output, msg = nil)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L171-L198'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='171' data-end='198'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 171</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_contains_make_command'>assert_contains_make_command</span>(<span class='id identifier rubyid_target'>target</span><span class='comma'>,</span> <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_output'>output</span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n</span><span class='regexp_end'>/</span></span>)
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span>(<span class='id identifier rubyid_msg'>msg</span>) {
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Expected output containing make command &quot;%s&quot;: %s</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> [
        (<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%s %s</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> [<span class='id identifier rubyid_make_command'><a href="#make_command-class_method" title="Gem::TestCase.make_command (method)">make_command</a></span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span>]).<span class='id identifier rubyid_rstrip'>rstrip</span><span class='comma'>,</span>
        <span class='id identifier rubyid_output'>output</span>.<span class='id identifier rubyid_inspect'>inspect</span>
      ]
    }
  <span class='kw'>else</span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span>(<span class='id identifier rubyid_msg'>msg</span>) {
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Expected make command &quot;%s&quot;: %s</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> [
        (<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%s %s</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> [<span class='id identifier rubyid_make_command'><a href="#make_command-class_method" title="Gem::TestCase.make_command (method)">make_command</a></span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span>]).<span class='id identifier rubyid_rstrip'>rstrip</span><span class='comma'>,</span>
        <span class='id identifier rubyid_output'>output</span>.<span class='id identifier rubyid_inspect'>inspect</span>
      ]
    }
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert'>assert</span> <span class='id identifier rubyid_scan_make_command_lines'><a href="#scan_make_command_lines-instance_method" title="Gem::TestCase#scan_make_command_lines (method)">scan_make_command_lines</a></span>(<span class='id identifier rubyid_output'>output</span>).<span class='id identifier rubyid_any?'>any?</span> { <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
    <span class='id identifier rubyid_make'>make</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_make_command_line'><a href="#parse_make_command_line-instance_method" title="Gem::TestCase#parse_make_command_line (method)">parse_make_command_line</a></span>(<span class='id identifier rubyid_line'>line</span>)

    <span class='kw'>if</span> <span class='id identifier rubyid_make'>make</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_targets'>targets</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_target'>target</span>)
      <span class='kw'>yield</span> <span class='id identifier rubyid_make'>make</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>false</span>
    <span class='kw'>end</span>
  }<span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_path_exists-instance_method">
  <h3 class='signature '>
    #<strong>assert_path_exists</strong>(path, msg = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>TODO: move to minitest</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L115-L118'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='115' data-end='118'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 115</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_path_exists'>assert_path_exists</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span>(<span class='id identifier rubyid_msg'>msg</span>) { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected path &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; to exist</span><span class='tstring_end'>&quot;</span></span> }
  <span class='id identifier rubyid_assert'>assert</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_rake_in-instance_method">
  <h3 class='signature '>
    #<strong>build_rake_in</strong>(good = true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Allows the proper version of <code>rake</code> to be used for the test.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1217-L1231'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1217' data-end='1231'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1217</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_rake_in'>build_rake_in</span>(<span class='id identifier rubyid_good'>good</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='id identifier rubyid_gem_ruby'>gem_ruby</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='cvar'>@@ruby</span>
  <span class='id identifier rubyid_env_rake'>env_rake</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_rake'>rake</span> <span class='op'>=</span> (<span class='id identifier rubyid_good'>good</span> <span class='op'>?</span> <span class='cvar'>@@good_rake</span> <span class='op'>:</span> <span class='cvar'>@@bad_rake</span>)
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_rake'>rake</span>
  <span class='kw'>yield</span> <span class='id identifier rubyid_rake'>rake</span>
<span class='kw'>ensure</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='id identifier rubyid_gem_ruby'>gem_ruby</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_env_rake'>env_rake</span>
    <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_env_rake'>env_rake</span>
  <span class='kw'>else</span>
    <span class='const'>ENV</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="common_installer_setup-instance_method">
  <h3 class='signature '>
    #<strong>common_installer_setup</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L434-L458'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='434' data-end='458'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 434</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_common_installer_setup'>common_installer_setup</span>
  <span class='id identifier rubyid_common_installer_teardown'><a href="#common_installer_teardown-instance_method" title="Gem::TestCase#common_installer_teardown (method)">common_installer_teardown</a></span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_build'><a href="../Gem.html#post_build-class_method" title="Gem.post_build (method)">post_build</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span><span class='op'>|</span>
    <span class='ivar'>@post_build_hook_arg</span> <span class='op'>=</span> <span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_install'><a href="../Gem.html#post_install-class_method" title="Gem.post_install (method)">post_install</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span><span class='op'>|</span>
    <span class='ivar'>@post_install_hook_arg</span> <span class='op'>=</span> <span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_uninstall'><a href="../Gem.html#post_uninstall-class_method" title="Gem.post_uninstall (method)">post_uninstall</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_uninstaller'>uninstaller</span><span class='op'>|</span>
    <span class='ivar'>@post_uninstall_hook_arg</span> <span class='op'>=</span> <span class='id identifier rubyid_uninstaller'>uninstaller</span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_pre_install'><a href="../Gem.html#pre_install-class_method" title="Gem.pre_install (method)">pre_install</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span><span class='op'>|</span>
    <span class='ivar'>@pre_install_hook_arg</span> <span class='op'>=</span> <span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_pre_uninstall'><a href="../Gem.html#pre_uninstall-class_method" title="Gem.pre_uninstall (method)">pre_uninstall</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_uninstaller'>uninstaller</span><span class='op'>|</span>
    <span class='ivar'>@pre_uninstall_hook_arg</span> <span class='op'>=</span> <span class='id identifier rubyid_uninstaller'>uninstaller</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="common_installer_teardown-instance_method">
  <h3 class='signature '>
    #<strong>common_installer_teardown</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L460-L469'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='460' data-end='469'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 460</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_common_installer_teardown'>common_installer_teardown</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_build_hooks'><a href="../Gem.html#post_build_hooks-class_method" title="Gem.post_build_hooks (method)">post_build_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_install_hooks'><a href="../Gem.html#post_install_hooks-class_method" title="Gem.post_install_hooks (method)">post_install_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_done_installing_hooks'><a href="../Gem.html#done_installing_hooks-class_method" title="Gem.done_installing_hooks (method)">done_installing_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_reset_hooks'><a href="../Gem.html#post_reset_hooks-class_method" title="Gem.post_reset_hooks (method)">post_reset_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_uninstall_hooks'><a href="../Gem.html#post_uninstall_hooks-class_method" title="Gem.post_uninstall_hooks (method)">post_uninstall_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_pre_install_hooks'><a href="../Gem.html#pre_install_hooks-class_method" title="Gem.pre_install_hooks (method)">pre_install_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_pre_reset_hooks'><a href="../Gem.html#pre_reset_hooks-class_method" title="Gem.pre_reset_hooks (method)">pre_reset_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_pre_uninstall_hooks'><a href="../Gem.html#pre_uninstall_hooks-class_method" title="Gem.pre_uninstall_hooks (method)">pre_uninstall_hooks</a></span>.<span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_tmpdir-instance_method">
  <h3 class='signature '>
    #<strong>create_tmpdir</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>creates a temporary directory with hax TODO: deprecate and remove</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L573-L579'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='573' data-end='579'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 573</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_tmpdir'>create_tmpdir</span>
  <span class='id identifier rubyid_tmpdir'>tmpdir</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_tmpdir'>tmpdir</span> <span class='kw'>do</span> <span class='id identifier rubyid_tmpdir'>tmpdir</span> <span class='op'>=</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_pwd'>pwd</span> <span class='kw'>end</span> <span class='comment'># HACK OSX /private/tmp
</span>  <span class='id identifier rubyid_tmpdir'>tmpdir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_tmpdir'>tmpdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test_rubygems_</span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_tmpdir'>tmpdir</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_tmpdir'>tmpdir</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dep-instance_method">
  <h3 class='signature '>
    #<strong>dep</strong>(name, *requirements)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Construct a new <a href="Dependency.html" title="Gem::Dependency (class)">Dependency</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1269-L1271'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1269' data-end='1271'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1269</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dep'>dep</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_requirements'>requirements</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Dependency.html" title="Gem::Dependency (class)">Dependency</a></span>.<span class='id identifier rubyid_new'><a href="Dependency.html#new-class_method" title="Gem::Dependency.new (method)">new</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_requirements'>requirements</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dependency_request-instance_method">
  <h3 class='signature '>
    #<strong>dependency_request</strong>(dep, from_name, from_version, parent = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a <a href="Resolver/DependencyRequest.html" title="Gem::Resolver::DependencyRequest (class)">Resolver::DependencyRequest</a> from a <a href="Dependency.html" title="Gem::Dependency (class)">Dependency</a> <a href="#dep-instance_method" title="Gem::TestCase#dep (method)">#dep</a>, a <code>from_name</code> and <code>from_version</code> requesting the dependency and a <code>parent</code> DependencyRequest</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1278-L1291'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1278' data-end='1291'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1278</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dependency_request'>dependency_request</span> <span class='id identifier rubyid_dep'><a href="#dep-instance_method" title="Gem::TestCase#dep (method)">dep</a></span><span class='comma'>,</span> <span class='id identifier rubyid_from_name'>from_name</span><span class='comma'>,</span> <span class='id identifier rubyid_from_version'>from_version</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_remote'>remote</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Source.html" title="Gem::Source (class)">Source</a></span>.<span class='id identifier rubyid_new'><a href="Source.html#new-class_method" title="Gem::Source.new (method)">new</a></span> <span class='ivar'>@uri</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_parent'>parent</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_parent_dep'>parent_dep</span> <span class='op'>=</span> <span class='id identifier rubyid_dep'><a href="#dep-instance_method" title="Gem::TestCase#dep (method)">dep</a></span> <span class='id identifier rubyid_from_name'>from_name</span><span class='comma'>,</span> <span class='id identifier rubyid_from_version'>from_version</span>
    <span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Resolver.html" title="Gem::Resolver (class)">Resolver</a></span><span class='op'>::</span><span class='const'><a href="Resolver/DependencyRequest.html" title="Gem::Resolver::DependencyRequest (class)">DependencyRequest</a></span>.<span class='id identifier rubyid_new'><a href="Resolver/DependencyRequest.html#new-class_method" title="Gem::Resolver::DependencyRequest.new (method)">new</a></span> <span class='id identifier rubyid_parent_dep'>parent_dep</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Resolver.html" title="Gem::Resolver (class)">Resolver</a></span><span class='op'>::</span><span class='const'><a href="Resolver/IndexSpecification.html" title="Gem::Resolver::IndexSpecification (class)">IndexSpecification</a></span>.<span class='id identifier rubyid_new'><a href="Resolver/IndexSpecification.html#new-class_method" title="Gem::Resolver::IndexSpecification.new (method)">new</a></span> \
    <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_from_name'>from_name</span><span class='comma'>,</span> <span class='id identifier rubyid_from_version'>from_version</span><span class='comma'>,</span> <span class='id identifier rubyid_remote'>remote</span><span class='comma'>,</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Platform.html" title="Gem::Platform (class)">Platform</a></span><span class='op'>::</span><span class='const'><a href="Platform.html#RUBY-constant" title="Gem::Platform::RUBY (constant)">RUBY</a></span>
  <span class='id identifier rubyid_activation'>activation</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Resolver.html" title="Gem::Resolver (class)">Resolver</a></span><span class='op'>::</span><span class='const'><a href="Resolver/ActivationRequest.html" title="Gem::Resolver::ActivationRequest (class)">ActivationRequest</a></span>.<span class='id identifier rubyid_new'><a href="Resolver/ActivationRequest.html#new-class_method" title="Gem::Resolver::ActivationRequest.new (method)">new</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Resolver.html" title="Gem::Resolver (class)">Resolver</a></span><span class='op'>::</span><span class='const'><a href="Resolver/DependencyRequest.html" title="Gem::Resolver::DependencyRequest (class)">DependencyRequest</a></span>.<span class='id identifier rubyid_new'><a href="Resolver/DependencyRequest.html#new-class_method" title="Gem::Resolver::DependencyRequest.new (method)">new</a></span> <span class='id identifier rubyid_dep'><a href="#dep-instance_method" title="Gem::TestCase#dep (method)">dep</a></span><span class='comma'>,</span> <span class='id identifier rubyid_activation'>activation</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enable_shared-instance_method">
  <h3 class='signature '>
    #<strong>enable_shared</strong>(value)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the ENABLE_SHARED entry in <code>RbConfig::CONFIG</code> to <code>value</code> and restores the original value when the block ends</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L124-L135'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='124' data-end='135'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 124</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_enable_shared'>enable_shared</span> <span class='id identifier rubyid_value'>value</span>
  <span class='id identifier rubyid_enable_shared'>enable_shared</span> <span class='op'>=</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ENABLE_SHARED</span><span class='tstring_end'>&#39;</span></span>]
  <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ENABLE_SHARED</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>

  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_enable_shared'>enable_shared</span> <span class='kw'>then</span>
    <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enable_shared</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_enable_shared'>enable_shared</span>
  <span class='kw'>else</span>
    <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>.<span class='id identifier rubyid_delete'>delete</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>enable_shared</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="git_gem-instance_method">
  <h3 class='signature '>
    #<strong>git_gem</strong>(name = &#39;a&#39;, version = 1)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>A git_gem is used with a gem dependencies file.  The gem created here has no files, just a gem specification for the given <code>name</code> and <code>version</code>.</p>

<p>Yields the <code>specification</code> to the block, if given</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L477-L510'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='477' data-end='510'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 477</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_git_gem'>git_gem</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_have_git?'><a href="#have_git%3F-instance_method" title="Gem::TestCase#have_git? (method)">have_git?</a></span>

  <span class='id identifier rubyid_directory'>directory</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>git</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_directory'>directory</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='id identifier rubyid_directory'>directory</span>

  <span class='id identifier rubyid_git_spec'>git_spec</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_new'><a href="Specification.html#new-class_method" title="Gem::Specification.new (method)">new</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_specification'>specification</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_specification'>specification</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_directory'>directory</span>

  <span class='id identifier rubyid_gemspec'>gemspec</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec</span><span class='tstring_end'>&quot;</span></span>

  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_directory'>directory</span><span class='comma'>,</span> <span class='id identifier rubyid_gemspec'>gemspec</span>)<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_git_spec'>git_spec</span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_head'>head</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span> <span class='id identifier rubyid_directory'>directory</span> <span class='kw'>do</span>
    <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.git</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>then</span>
      <span class='id identifier rubyid_system'>system</span> <span class='ivar'>@git</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>init</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--quiet</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_system'>system</span> <span class='ivar'>@git</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user.name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RubyGems Tests</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_system'>system</span> <span class='ivar'>@git</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user.email</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rubygems@example</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_system'>system</span> <span class='ivar'>@git</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>add</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_gemspec'>gemspec</span>
    <span class='id identifier rubyid_system'>system</span> <span class='ivar'>@git</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>commit</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-m</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a non-empty commit message</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--quiet</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_head'>head</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Util.html" title="Gem::Util (module)">Util</a></span>.<span class='id identifier rubyid_popen'><a href="Util.html#popen-class_method" title="Gem::Util.popen (method)">popen</a></span>(<span class='ivar'>@git</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rev-parse</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>master</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_strip'>strip</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_git_spec'>git_spec</span>.<span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_directory'>directory</span><span class='comma'>,</span> <span class='id identifier rubyid_head'>head</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="in_path?-instance_method">
  <h3 class='signature nodoc'>
    #<strong>in_path?</strong>(executable)  &#x21d2; <code>Boolean</code> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L521-L527'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='521' data-end='527'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 521</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_in_path?'>in_path?</span> <span class='id identifier rubyid_executable'>executable</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>%r%</span><span class='tstring_content'>\A([A-Z]:|/)</span><span class='regexp_end'>%</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_executable'>executable</span> <span class='kw'>and</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_executable'>executable</span>

  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PATH</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_split'>split</span>(<span class='const'>File</span><span class='op'>::</span><span class='const'>PATH_SEPARATOR</span>).<span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_directory'>directory</span><span class='op'>|</span>
    <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_directory'>directory</span><span class='comma'>,</span> <span class='id identifier rubyid_executable'>executable</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="install_default_gems-instance_method">
  <h3 class='signature '>
    #<strong>install_default_gems</strong>(*specs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Installs the provided default specs including writing the spec file</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L726-L734'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='726' data-end='734'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 726</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install_default_gems'>install_default_gems</span>(<span class='op'>*</span><span class='id identifier rubyid_specs'>specs</span>)
  <span class='id identifier rubyid_install_default_specs'><a href="#install_default_specs-instance_method" title="Gem::TestCase#install_default_specs (method)">install_default_specs</a></span>(<span class='op'>*</span><span class='id identifier rubyid_specs'>specs</span>)

  <span class='id identifier rubyid_specs'>specs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
      <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_to_ruby_for_cache'>to_ruby_for_cache</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="install_default_specs-instance_method">
  <h3 class='signature '>
    #<strong>install_default_specs</strong>(*specs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Install the provided default specs</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L739-L745'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='739' data-end='745'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 739</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install_default_specs'>install_default_specs</span>(<span class='op'>*</span><span class='id identifier rubyid_specs'>specs</span>)
  <span class='id identifier rubyid_specs'>specs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Installer.html" title="Gem::Installer (class)">Installer</a></span>.<span class='id identifier rubyid_for_spec'><a href="Installer.html#for_spec-class_method" title="Gem::Installer.for_spec (method)">for_spec</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_install_as_default'>install_as_default</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>)
    <span class='id identifier rubyid_installer'><a href="../top-level-namespace.html#installer-instance_method" title="#installer (method)">installer</a></span>.<span class='id identifier rubyid_install'><a href="../Gem.html#install-class_method" title="Gem.install (method)">install</a></span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_register_default_spec'><a href="../Gem.html#register_default_spec-class_method" title="Gem.register_default_spec (method)">register_default_spec</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="install_gem-instance_method">
  <h3 class='signature '>
    #<strong>install_gem</strong>(spec, options = {})  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Builds and installs the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L532-L548'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='532' data-end='548'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 532</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install_gem'>install_gem</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {}
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rubygems/installer</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_gem'>gem</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gem</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_gem'>gem</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_use_ui'>use_ui</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="MockGemUi.html" title="Gem::MockGemUi (class)">MockGemUi</a></span>.<span class='id identifier rubyid_new'><a href="MockGemUi.html#new-class_method" title="Gem::MockGemUi.new (method)">new</a></span> <span class='kw'>do</span>
      <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span> <span class='ivar'>@tempdir</span> <span class='kw'>do</span>
        <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Package.html" title="Gem::Package (class)">Package</a></span>.<span class='id identifier rubyid_build'><a href="Package.html#build-class_method" title="Gem::Package.build (method)">build</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_gem'>gem</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='const'>File</span>.<span class='id identifier rubyid_basename'>basename</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_cache_file'>cache_file</span>)).<span class='id identifier rubyid_untaint'>untaint</span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Installer.html" title="Gem::Installer (class)">Installer</a></span>.<span class='id identifier rubyid_at'><a href="Installer.html#at-class_method" title="Gem::Installer.at (method)">at</a></span>(<span class='id identifier rubyid_gem'>gem</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_merge'>merge</span>({<span class='symbeg'>:</span><span class='id identifier rubyid_wrappers'>wrappers</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>})).<span class='id identifier rubyid_install'><a href="../Gem.html#install-class_method" title="Gem.install (method)">install</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="install_gem_user-instance_method">
  <h3 class='signature '>
    #<strong>install_gem_user</strong>(spec)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Builds and installs the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> into the user dir</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L553-L555'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='553' data-end='555'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 553</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install_gem_user'>install_gem_user</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
  <span class='id identifier rubyid_install_gem'><a href="#install_gem-instance_method" title="Gem::TestCase#install_gem (method)">install_gem</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user_install'>user_install</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="install_specs-instance_method">
  <h3 class='signature '>
    #<strong>install_specs</strong>(*specs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Install the provided specs</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L715-L721'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='715' data-end='721'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 715</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install_specs'>install_specs</span>(<span class='op'>*</span><span class='id identifier rubyid_specs'>specs</span>)
  <span class='id identifier rubyid_specs'>specs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Installer.html" title="Gem::Installer (class)">Installer</a></span>.<span class='id identifier rubyid_for_spec'><a href="Installer.html#for_spec-class_method" title="Gem::Installer.for_spec (method)">for_spec</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>).<span class='id identifier rubyid_install'><a href="../Gem.html#install-class_method" title="Gem.install (method)">install</a></span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_searcher'>searcher</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="loaded_spec_names-instance_method">
  <h3 class='signature '>
    #<strong>loaded_spec_names</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L747-L749'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='747' data-end='749'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 747</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_loaded_spec_names'>loaded_spec_names</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_loaded_specs'><a href="../Gem.html#loaded_specs-class_method" title="Gem.loaded_specs (method)">loaded_specs</a></span>.<span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_full_name'>full_name</span>).<span class='id identifier rubyid_sort'>sort</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="make_command-instance_method">
  <h3 class='signature '>
    #<strong>make_command</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the make command for the current platform. For versions of Ruby built on MS Windows with VC++ or Borland it will return &#39;nmake&#39;. On all other platforms, including Cygwin, it will return &#39;make&#39;.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1179-L1181'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1179' data-end='1181'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1179</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_make_command'>make_command</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>make</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MAKE</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> (<span class='id identifier rubyid_vc_windows?'><a href="#vc_windows%3F-class_method" title="Gem::TestCase.vc_windows? (method)">vc_windows?</a></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nmake</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>make</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mu_pp-instance_method">
  <h3 class='signature '>
    #<strong>mu_pp</strong>(obj)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Enables pretty-print for all tests</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L584-L589'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='584' data-end='589'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 584</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mu_pp'>mu_pp</span>(<span class='id identifier rubyid_obj'>obj</span>)
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>String</span>.<span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>PP</span>.<span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='const'>Encoding</span>.<span class='id identifier rubyid_default_external'>default_external</span>) <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='const'>Encoding</span>
  <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_chomp'>chomp</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new_default_spec-instance_method">
  <h3 class='signature '>
    #<strong>new_default_spec</strong>(name, version, deps = nil, *files)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L807-L824'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='807' data-end='824'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 807</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new_default_spec'>new_default_spec</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_deps'>deps</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_files'>files</span>)
  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='op'>=</span> <span class='id identifier rubyid_util_spec'><a href="#util_spec-instance_method" title="Gem::TestCase#util_spec (method)">util_spec</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_deps'>deps</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@default_spec_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_spec_name'>spec_name</span>)
  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_files'>files</span>

  <span class='id identifier rubyid_lib_dir'>lib_dir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default_gems</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lib</span><span class='tstring_end'>&quot;</span></span>)
  <span class='gvar'>$LOAD_PATH</span>.<span class='id identifier rubyid_unshift'>unshift</span>(<span class='id identifier rubyid_lib_dir'>lib_dir</span>)
  <span class='id identifier rubyid_files'>files</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_rb_path'>rb_path</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_lib_dir'>lib_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
    <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span>(<span class='const'>File</span>.<span class='id identifier rubyid_dirname'>dirname</span>(<span class='id identifier rubyid_rb_path'>rb_path</span>))
    <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_rb_path'>rb_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rb'>rb</span><span class='op'>|</span>
      <span class='id identifier rubyid_rb'>rb</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new_spec-instance_method">
  <h3 class='signature nodoc'>
    #<strong>new_spec</strong>(name, version, deps = nil, *files)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>new_spec is deprecated as it is never used.</p>

<p>TODO:  remove in RubyGems 3.0</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L767-L805'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='767' data-end='805'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 767</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new_spec'>new_spec</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_deps'>deps</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_files'>files</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rubygems/specification</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_new'><a href="Specification.html#new-class_method" title="Gem::Specification.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_platform'>platform</span>    <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Platform.html" title="Gem::Platform (class)">Platform</a></span><span class='op'>::</span><span class='const'><a href="Platform.html#RUBY-constant" title="Gem::Platform::RUBY (constant)">RUBY</a></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_name'>name</span>        <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_version'>version</span>     <span class='op'>=</span> <span class='id identifier rubyid_version'>version</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_author'>author</span>      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A User</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_email'>email</span>       <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example@example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_homepage'>homepage</span>    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_summary'>summary</span>     <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>this is a summary</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_description'>description</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is a test description</span><span class='tstring_end'>&quot;</span></span>

    <span class='const'>Array</span>(<span class='id identifier rubyid_deps'>deps</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> <span class='id identifier rubyid_req'><a href="#req-instance_method" title="Gem::TestCase#req (method)">req</a></span><span class='op'>|</span>
      <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_add_dependency'>add_dependency</span> <span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> (<span class='id identifier rubyid_req'><a href="#req-instance_method" title="Gem::TestCase#req (method)">req</a></span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;= 0</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>end</span>

    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_files'>files</span>.<span class='id identifier rubyid_push'>push</span>(<span class='op'>*</span><span class='id identifier rubyid_files'>files</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_files'>files</span>.<span class='id identifier rubyid_empty?'>empty?</span>

    <span class='kw'>yield</span> <span class='id identifier rubyid_s'>s</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_spec_file'>spec_file</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_files'>files</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_spec_file'>spec_file</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
      <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_to_ruby_for_cache'>to_ruby_for_cache</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_util_build_gem'><a href="#util_build_gem-instance_method" title="Gem::TestCase#util_build_gem (method)">util_build_gem</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>

    <span class='id identifier rubyid_cache_file'>cache_file</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gem</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='const'>File</span>.<span class='id identifier rubyid_dirname'>dirname</span> <span class='id identifier rubyid_cache_file'>cache_file</span>
    <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mv'>mv</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_cache_file'>cache_file</span><span class='comma'>,</span> <span class='id identifier rubyid_cache_file'>cache_file</span>
    <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm'>rm</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_spec_file'>spec_file</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_make_command_line-instance_method">
  <h3 class='signature '>
    #<strong>parse_make_command_line</strong>(line)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L147-L169'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='147' data-end='169'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 147</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_make_command_line'>parse_make_command_line</span>(<span class='id identifier rubyid_line'>line</span>)
  <span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_shellsplit'>shellsplit</span>

  <span class='id identifier rubyid_targets'>targets</span> <span class='op'>=</span> []
  <span class='id identifier rubyid_macros'>macros</span> <span class='op'>=</span> {}

  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_arg'>arg</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(\w+)=</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_macros'>macros</span>[<span class='backref'>$1</span>] <span class='op'>=</span> <span class='backref'>$&#39;</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_targets'>targets</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_arg'>arg</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_targets'>targets</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_targets'>targets</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  {
    <span class='symbeg'>:</span><span class='id identifier rubyid_command'>command</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_command'>command</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_targets'>targets</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_targets'>targets</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_macros'>macros</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_macros'>macros</span><span class='comma'>,</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process_based_port-instance_method">
  <h3 class='signature '>
    #<strong>process_based_port</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>See <a href="#process_based_port-class_method" title="Gem::TestCase.process_based_port (method)">.process_based_port</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1210-L1212'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1210' data-end='1212'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1210</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process_based_port'>process_based_port</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_process_based_port'>process_based_port</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quick_gem-instance_method">
  <h3 class='signature '>
    #<strong>quick_gem</strong>(name, version = &#39;2&#39;)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a <a href="Specification.html" title="Gem::Specification (class)">Specification</a> with a minimum of extra work.  <code>name</code> and <code>version</code> are the gem&#39;s name and version,  platform, author, email, homepage, summary and description are defaulted.  The specification is yielded for customization.</p>

<p>The gem is added to the installed gems in <tt>@gemhome</tt> and the runtime.</p>

<p>Use this with <a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">#write_file</a> to build an installed gem.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L636-L663'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='636' data-end='663'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 636</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quick_gem'>quick_gem</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rubygems/specification</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_new'><a href="Specification.html#new-class_method" title="Gem::Specification.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_platform'>platform</span>    <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Platform.html" title="Gem::Platform (class)">Platform</a></span><span class='op'>::</span><span class='const'><a href="Platform.html#RUBY-constant" title="Gem::Platform::RUBY (constant)">RUBY</a></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_name'>name</span>        <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_version'>version</span>     <span class='op'>=</span> <span class='id identifier rubyid_version'>version</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_author'>author</span>      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A User</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_email'>email</span>       <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example@example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_homepage'>homepage</span>    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_summary'>summary</span>     <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>this is a summary</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_description'>description</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is a test description</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>yield</span>(<span class='id identifier rubyid_s'>s</span>) <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_map'>map</span> <span class='comment'># HACK: force specs to (re-)load before we write
</span>
  <span class='id identifier rubyid_written_path'>written_path</span> <span class='op'>=</span> <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_spec_file'>spec_file</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_to_ruby_for_cache'>to_ruby_for_cache</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id identifier rubyid_written_path'>written_path</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_reset'><a href="Specification.html#reset-class_method" title="Gem::Specification.reset (method)">reset</a></span>

  <span class='kw'>return</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quick_spec-instance_method">
  <h3 class='signature nodoc'>
    #<strong>quick_spec</strong>(name, version = &#39;2&#39;)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>TODO:  remove in RubyGems 3.0</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L668-L670'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='668' data-end='670'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 668</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quick_spec'>quick_spec</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_util_spec'><a href="#util_spec-instance_method" title="Gem::TestCase#util_spec (method)">util_spec</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_binary-instance_method">
  <h3 class='signature '>
    #<strong>read_binary</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a binary file at <a href="../Gem.html#path-class_method" title="Gem.path (method)">Gem.path</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L603-L605'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='603' data-end='605'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 603</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_binary'>read_binary</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_read_binary'><a href="../Gem.html#read_binary-class_method" title="Gem.read_binary (method)">read_binary</a></span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_cache-instance_method">
  <h3 class='signature '>
    #<strong>read_cache</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a Marshal file at <a href="../Gem.html#path-class_method" title="Gem.path (method)">Gem.path</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L594-L598'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='594' data-end='598'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 594</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_cache'>read_cache</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)
  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_untaint'>untaint</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='const'>Marshal</span>.<span class='id identifier rubyid_load'>load</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_read'>read</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="refute_path_exists-instance_method">
  <h3 class='signature '>
    #<strong>refute_path_exists</strong>(path, msg = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>TODO: move to minitest</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L138-L141'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='138' data-end='141'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 138</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_refute_path_exists'>refute_path_exists</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span>(<span class='id identifier rubyid_msg'>msg</span>) { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected path &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; to not exist</span><span class='tstring_end'>&quot;</span></span> }
  <span class='id identifier rubyid_refute'>refute</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="req-instance_method">
  <h3 class='signature '>
    #<strong>req</strong>(*requirements)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a new <a href="Requirement.html" title="Gem::Requirement (class)">Requirement</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1296-L1299'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1296' data-end='1299'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1296</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_req'>req</span> <span class='op'>*</span><span class='id identifier rubyid_requirements'>requirements</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_requirements'>requirements</span>.<span class='id identifier rubyid_first'>first</span> <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Requirement.html" title="Gem::Requirement (class)">Requirement</a></span> <span class='op'>===</span> <span class='id identifier rubyid_requirements'>requirements</span>.<span class='id identifier rubyid_first'>first</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Requirement.html" title="Gem::Requirement (class)">Requirement</a></span>.<span class='id identifier rubyid_create'><a href="Requirement.html#create-class_method" title="Gem::Requirement.create (method)">create</a></span> <span class='id identifier rubyid_requirements'>requirements</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="save_gemspec-instance_method">
  <h3 class='signature '>
    #<strong>save_gemspec</strong>(name = &#39;a&#39;, version = 1, directory = &#39;.&#39;)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>create_gemspec creates gem specification in given <code>directory</code> or &#39;.&#39; for the given <code>name</code> and <code>version</code>.</p>

<p>Yields the <code>specification</code> to the block, if given</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1361-L1371'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1361' data-end='1371'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1361</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_save_gemspec'>save_gemspec</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_directory'>directory</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_vendor_spec'>vendor_spec</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_new'><a href="Specification.html#new-class_method" title="Gem::Specification.new (method)">new</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_specification'>specification</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_specification'>specification</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>

  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_directory'>directory</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_vendor_spec'>vendor_spec</span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_vendor_spec'>vendor_spec</span>.<span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_directory'>directory</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="save_loaded_features-instance_method">
  <h3 class='signature '>
    #<strong>save_loaded_features</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L755-L760'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='755' data-end='760'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 755</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_save_loaded_features'>save_loaded_features</span>
  <span class='id identifier rubyid_old_loaded_features'>old_loaded_features</span> <span class='op'>=</span> <span class='gvar'>$LOADED_FEATURES</span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='gvar'>$LOADED_FEATURES</span>.<span class='id identifier rubyid_replace'>replace</span> <span class='id identifier rubyid_old_loaded_features'>old_loaded_features</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_make_command_lines-instance_method">
  <h3 class='signature '>
    #<strong>scan_make_command_lines</strong>(output)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L143-L145'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='143' data-end='145'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 143</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_scan_make_command_lines'>scan_make_command_lines</span>(<span class='id identifier rubyid_output'>output</span>)
  <span class='id identifier rubyid_output'>output</span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_escape'>escape</span> <span class='id identifier rubyid_make_command'><a href="#make_command-class_method" title="Gem::TestCase.make_command (method)">make_command</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>(?:[[:blank:]].*)?$</span><span class='regexp_end'>/</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup-instance_method">
  <h3 class='signature '>
    #<strong>setup</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>#setup</code> prepares a sandboxed location to install gems.  All installs are directed to a temporary directory.  All install plugins are removed.</p>

<p>If the <code>RUBY</code> environment variable is set the given path is used for <a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">Gem.ruby</a>.  The local platform is set to <code>i386-mswin32</code> for Windows or <code>i686-darwin8.10.1</code> otherwise.</p>

<p>If the <code>KEEP_FILES</code> environment variable is set the files will not be removed from <code>/tmp/test_rubygems_#{$$}.#{Time.now.to_i}</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L220-L366'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='220' data-end='366'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 220</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup'>setup</span>
  <span class='kw'>super</span>

  <span class='ivar'>@orig_gem_home</span>   <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_HOME</span><span class='tstring_end'>&#39;</span></span>]
  <span class='ivar'>@orig_gem_path</span>   <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_PATH</span><span class='tstring_end'>&#39;</span></span>]
  <span class='ivar'>@orig_gem_vendor</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_VENDOR</span><span class='tstring_end'>&#39;</span></span>]
  <span class='ivar'>@orig_gem_spec_cache</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_SPEC_CACHE</span><span class='tstring_end'>&#39;</span></span>]
  <span class='ivar'>@orig_rubygems_gemdeps</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBYGEMS_GEMDEPS</span><span class='tstring_end'>&#39;</span></span>]
  <span class='ivar'>@orig_bundle_gemfile</span>   <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BUNDLE_GEMFILE</span><span class='tstring_end'>&#39;</span></span>]
  <span class='ivar'>@orig_rubygems_host</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBYGEMS_HOST</span><span class='tstring_end'>&#39;</span></span>]
  <span class='const'>ENV</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_find_all'>find_all</span> { <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_REQUIREMENT_</span><span class='tstring_end'>&#39;</span></span>) }.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='const'>ENV</span>.<span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_k'>k</span>
  <span class='kw'>end</span>
  <span class='ivar'>@orig_gem_env_requirements</span> <span class='op'>=</span> <span class='const'>ENV</span>.<span class='id identifier rubyid_to_hash'>to_hash</span>

  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_VENDOR</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='ivar'>@current_dir</span> <span class='op'>=</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_pwd'>pwd</span>
  <span class='ivar'>@fetcher</span>     <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Gem.html#USE_BUNDLER_FOR_GEMDEPS-constant" title="Gem::USE_BUNDLER_FOR_GEMDEPS (constant)">USE_BUNDLER_FOR_GEMDEPS</a></span>
    <span class='const'>Bundler</span>.<span class='id identifier rubyid_ui'><a href="../Gem.html#ui-class_method" title="Gem.ui (method)">ui</a></span>                     <span class='op'>=</span> <span class='const'>Bundler</span><span class='op'>::</span><span class='const'>UI</span><span class='op'>::</span><span class='const'>Silent</span>.<span class='id identifier rubyid_new'>new</span>
  <span class='kw'>end</span>
  <span class='ivar'>@back_ui</span>                       <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a></span>.<span class='id identifier rubyid_ui'><a href="DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">ui</a></span>
  <span class='ivar'>@ui</span>                            <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="MockGemUi.html" title="Gem::MockGemUi (class)">MockGemUi</a></span>.<span class='id identifier rubyid_new'><a href="MockGemUi.html#new-class_method" title="Gem::MockGemUi.new (method)">new</a></span>
  <span class='comment'># This needs to be a new instance since we call use_ui(@ui) when we want to
</span>  <span class='comment'># capture output
</span>  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a></span>.<span class='id identifier rubyid_ui'><a href="DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">ui</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="MockGemUi.html" title="Gem::MockGemUi (class)">MockGemUi</a></span>.<span class='id identifier rubyid_new'><a href="MockGemUi.html#new-class_method" title="Gem::MockGemUi.new (method)">new</a></span>

  <span class='id identifier rubyid_tmpdir'>tmpdir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_tmpdir'>tmpdir</span>
  <span class='id identifier rubyid_tmpdir'>tmpdir</span>.<span class='id identifier rubyid_untaint'>untaint</span>

  <span class='kw'>if</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>KEEP_FILES</span><span class='tstring_end'>&#39;</span></span>] <span class='kw'>then</span>
    <span class='ivar'>@tempdir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_tmpdir'>tmpdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test_rubygems_</span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>else</span>
    <span class='ivar'>@tempdir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_tmpdir'>tmpdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test_rubygems_</span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
  <span class='ivar'>@tempdir</span>.<span class='id identifier rubyid_untaint'>untaint</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='ivar'>@tempdir</span>

  <span class='comment'># This makes the tempdir consistent on OS X.
</span>  <span class='comment'># File.expand_path Dir.tmpdir                      #=&gt; &quot;/var/...&quot;
</span>  <span class='comment'># Dir.chdir Dir.tmpdir do File.expand_path &#39;.&#39; end #=&gt; &quot;/private/var/...&quot;
</span>  <span class='comment'># TODO use File#realpath above instead of #expand_path once 1.8 support is
</span>  <span class='comment'># dropped.
</span>  <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span> <span class='ivar'>@tempdir</span> <span class='kw'>do</span>
    <span class='ivar'>@tempdir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>
    <span class='ivar'>@tempdir</span>.<span class='id identifier rubyid_untaint'>untaint</span>
  <span class='kw'>end</span>

  <span class='comment'># This makes the tempdir consistent on Windows.
</span>  <span class='comment'># Dir.tmpdir may return short path name, but Dir[Dir.tmpdir] returns long
</span>  <span class='comment'># path name. https://bugs.ruby-lang.org/issues/10819
</span>  <span class='comment'># File.expand_path or File.realpath doesn&#39;t convert path name to long path
</span>  <span class='comment'># name. Only Dir[] (= Dir.glob) works.
</span>  <span class='comment'># Short and long path name is specific to Windows filesystem.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_win_platform?'><a href="#win_platform%3F-class_method" title="Gem::TestCase.win_platform? (method)">win_platform?</a></span>
    <span class='ivar'>@tempdir</span> <span class='op'>=</span> <span class='const'>Dir</span>[<span class='ivar'>@tempdir</span>][<span class='int'>0</span>]
    <span class='ivar'>@tempdir</span>.<span class='id identifier rubyid_untaint'>untaint</span>
  <span class='kw'>end</span>

  <span class='ivar'>@gemhome</span>  <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gemhome</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@userhome</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userhome</span><span class='tstring_end'>&#39;</span></span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEM_SPEC_CACHE</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spec_cache</span><span class='tstring_end'>&#39;</span></span>

  <span class='ivar'>@orig_ruby</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBY</span><span class='tstring_end'>&#39;</span></span>] <span class='kw'>then</span>
                 <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>
                 <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBY</span><span class='tstring_end'>&#39;</span></span>]
                 <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>
               <span class='kw'>end</span>

  <span class='ivar'>@git</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GIT</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>git</span><span class='tstring_end'>&#39;</span></span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ensure_gem_subdirectories'><a href="../Gem.html#ensure_gem_subdirectories-class_method" title="Gem.ensure_gem_subdirectories (method)">ensure_gem_subdirectories</a></span> <span class='ivar'>@gemhome</span>

  <span class='ivar'>@orig_LOAD_PATH</span> <span class='op'>=</span> <span class='gvar'>$LOAD_PATH</span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='gvar'>$LOAD_PATH</span>.<span class='id identifier rubyid_map!'>map!</span> { <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    (<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='id identifier rubyid_s'>s</span>)) <span class='op'>==</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>?</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>:</span> <span class='id identifier rubyid_expand_path'>expand_path</span>.<span class='id identifier rubyid_untaint'>untaint</span>
  }

  <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span> <span class='ivar'>@tempdir</span>

  <span class='ivar'>@orig_ENV_HOME</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HOME</span><span class='tstring_end'>&#39;</span></span>]
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HOME</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@userhome</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@user_home</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@gemdeps</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@env_requirements_by_name</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_instance_variable'>remove_instance_variable</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='ivar'>@ruby_version</span> <span class='kw'>if</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variables'>instance_variables</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='symbeg'>:</span><span class='ivar'>@ruby_version</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='ivar'>@gemhome</span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='ivar'>@userhome</span>

  <span class='ivar'>@orig_gem_private_key_passphrase</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_PRIVATE_KEY_PASSPHRASE</span><span class='tstring_end'>&#39;</span></span>]
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_PRIVATE_KEY_PASSPHRASE</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='const'><a href="#PRIVATE_KEY_PASSPHRASE-constant" title="Gem::TestCase::PRIVATE_KEY_PASSPHRASE (constant)">PRIVATE_KEY_PASSPHRASE</a></span>

  <span class='ivar'>@default_dir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@default_spec_dir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@default_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@default_dir</span><span class='comma'>,</span> <span class='ivar'>@default_dir</span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='ivar'>@default_spec_dir</span>

  <span class='comment'># We use Gem::Specification.reset the first time only so that if there
</span>  <span class='comment'># are unresolved deps that leak into the whole test suite, they&#39;re at least
</span>  <span class='comment'># reported once.
</span>  <span class='kw'>if</span> <span class='cvar'>@@initial_reset</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_unresolved_deps'><a href="Specification.html#unresolved_deps-class_method" title="Gem::Specification.unresolved_deps (method)">unresolved_deps</a></span>.<span class='id identifier rubyid_clear'>clear</span> <span class='comment'># done to avoid cross-test warnings
</span>  <span class='kw'>else</span>
    <span class='cvar'>@@initial_reset</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_reset'><a href="Specification.html#reset-class_method" title="Gem::Specification.reset (method)">reset</a></span>
  <span class='kw'>end</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_use_paths'><a href="../Gem.html#use_paths-class_method" title="Gem.use_paths (method)">use_paths</a></span>(<span class='ivar'>@gemhome</span>)

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Security.html" title="Gem::Security (module)">Security</a></span>.<span class='id identifier rubyid_reset'><a href="Security.html#reset-class_method" title="Gem::Security.reset (method)">reset</a></span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_loaded_specs'><a href="../Gem.html#loaded_specs-class_method" title="Gem.loaded_specs (method)">loaded_specs</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_clear_default_specs'><a href="../Gem.html#clear_default_specs-class_method" title="Gem.clear_default_specs (method)">clear_default_specs</a></span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_unresolved_deps'><a href="Specification.html#unresolved_deps-class_method" title="Gem::Specification.unresolved_deps (method)">unresolved_deps</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Gem.html#USE_BUNDLER_FOR_GEMDEPS-constant" title="Gem::USE_BUNDLER_FOR_GEMDEPS (constant)">USE_BUNDLER_FOR_GEMDEPS</a></span>
    <span class='const'>Bundler</span>.<span class='id identifier rubyid_reset!'>reset!</span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_configuration'><a href="../Gem.html#configuration-class_method" title="Gem.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_configuration'><a href="../Gem.html#configuration-class_method" title="Gem.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_update_sources'>update_sources</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="RemoteFetcher.html" title="Gem::RemoteFetcher (class)">RemoteFetcher</a></span>.<span class='id identifier rubyid_fetcher'><a href="RemoteFetcher.html#fetcher-class_method" title="Gem::RemoteFetcher.fetcher (method)">fetcher</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="FakeFetcher.html" title="Gem::FakeFetcher (class)">FakeFetcher</a></span>.<span class='id identifier rubyid_new'><a href="FakeFetcher.html#new-class_method" title="Gem::FakeFetcher.new (method)">new</a></span>

  <span class='ivar'>@gem_repo</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://gems.example.com/</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@uri</span> <span class='op'>=</span> <span class='const'>URI</span>.<span class='id identifier rubyid_parse'>parse</span> <span class='ivar'>@gem_repo</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_sources'><a href="../Gem.html#sources-class_method" title="Gem.sources (method)">sources</a></span>.<span class='id identifier rubyid_replace'>replace</span> [<span class='ivar'>@gem_repo</span>]

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_searcher'>searcher</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="SpecFetcher.html" title="Gem::SpecFetcher (class)">SpecFetcher</a></span>.<span class='id identifier rubyid_fetcher'><a href="SpecFetcher.html#fetcher-class_method" title="Gem::SpecFetcher.fetcher (method)">fetcher</a></span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@orig_BASERUBY</span> <span class='op'>=</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BASERUBY</span><span class='tstring_end'>&#39;</span></span>]
  <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BASERUBY</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby_install_name</span><span class='tstring_end'>&#39;</span></span>]

  <span class='ivar'>@orig_arch</span> <span class='op'>=</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>arch</span><span class='tstring_end'>&#39;</span></span>]

  <span class='kw'>if</span> <span class='id identifier rubyid_win_platform?'><a href="#win_platform%3F-class_method" title="Gem::TestCase.win_platform? (method)">win_platform?</a></span>
    <span class='id identifier rubyid_util_set_arch'><a href="#util_set_arch-instance_method" title="Gem::TestCase#util_set_arch (method)">util_set_arch</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i386-mswin32</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_util_set_arch'><a href="#util_set_arch-instance_method" title="Gem::TestCase#util_set_arch (method)">util_set_arch</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i686-darwin8.10.1</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@marshal_version</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Marshal</span><span class='op'>::</span><span class='const'>MAJOR_VERSION</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='const'>Marshal</span><span class='op'>::</span><span class='const'>MINOR_VERSION</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@orig_LOADED_FEATURES</span> <span class='op'>=</span> <span class='gvar'>$LOADED_FEATURES</span>.<span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="spec-instance_method">
  <h3 class='signature '>
    #<strong>spec</strong>(name, version, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a new <a href="Specification.html" title="Gem::Specification (class)">Specification</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1304-L1306'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1304' data-end='1306'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1304</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_spec'>spec</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_new'><a href="Specification.html#new-class_method" title="Gem::Specification.new (method)">new</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span>(<span class='id identifier rubyid_version'>version</span>)<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="spec_fetcher-instance_method">
  <h3 class='signature '>
    #<strong>spec_fetcher</strong>(repository = @gem_repo)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a <a href="SpecFetcher.html" title="Gem::SpecFetcher (class)">SpecFetcher</a> pre-filled with the gems or specs defined in the block.</p>

<p>Yields a <a href="#fetcher-instance_method" title="Gem::TestCase#fetcher (method)">#fetcher</a> object that responds to <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> and <code>gem</code>.  <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> adds a specification to the <a href="SpecFetcher.html" title="Gem::SpecFetcher (class)">SpecFetcher</a> while <code>gem</code> adds both a specification and the gem data to the <a href="RemoteFetcher.html" title="Gem::RemoteFetcher (class)">RemoteFetcher</a> so the built gem can be downloaded.</p>

<p>If only the a-3 gem is supposed to be downloaded you can save setup time by creating only specs for the other versions:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_spec_fetcher'>spec_fetcher</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fetcher'><a href="#fetcher-instance_method" title="Gem::TestCase#fetcher (method)">fetcher</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_fetcher'><a href="#fetcher-instance_method" title="Gem::TestCase#fetcher (method)">fetcher</a></span>.<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>
  <span class='id identifier rubyid_fetcher'><a href="#fetcher-instance_method" title="Gem::TestCase#fetcher (method)">fetcher</a></span>.<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='int'>3</span> <span class='comment'># dependency on b = 3
</span>  <span class='id identifier rubyid_fetcher'><a href="#fetcher-instance_method" title="Gem::TestCase#fetcher (method)">fetcher</a></span>.<span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='comment'># spec is a Gem::Specification
</span>    <span class='comment'># ...
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1328-L1332'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1328' data-end='1332'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1328</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_spec_fetcher'>spec_fetcher</span> <span class='id identifier rubyid_repository'>repository</span> <span class='op'>=</span> <span class='ivar'>@gem_repo</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'>TestCase</span><span class='op'>::</span><span class='const'><a href="TestCase/SpecFetcherSetup.html" title="Gem::TestCase::SpecFetcherSetup (class)">SpecFetcherSetup</a></span>.<span class='id identifier rubyid_declare'><a href="TestCase/SpecFetcherSetup.html#declare-class_method" title="Gem::TestCase::SpecFetcherSetup.declare (method)">declare</a></span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_repository'>repository</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec_fetcher_setup'>spec_fetcher_setup</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_spec_fetcher_setup'>spec_fetcher_setup</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="teardown-instance_method">
  <h3 class='signature '>
    #<strong>teardown</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>#teardown</code> restores the process to its original state and removes the tempdir unless the <code>KEEP_FILES</code> environment variable was set.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L372-L432'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='372' data-end='432'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 372</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_teardown'>teardown</span>
  <span class='gvar'>$LOAD_PATH</span>.<span class='id identifier rubyid_replace'>replace</span> <span class='ivar'>@orig_LOAD_PATH</span> <span class='kw'>if</span> <span class='ivar'>@orig_LOAD_PATH</span>
  <span class='kw'>if</span> <span class='ivar'>@orig_LOADED_FEATURES</span>
    <span class='kw'>if</span> <span class='ivar'>@orig_LOAD_PATH</span>
      <span class='id identifier rubyid_paths'><a href="../Gem.html#paths-class_method" title="Gem.paths (method)">paths</a></span> <span class='op'>=</span> <span class='ivar'>@orig_LOAD_PATH</span>.<span class='id identifier rubyid_map'>map</span> {<span class='op'>|</span><span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>)}
      (<span class='gvar'>$LOADED_FEATURES</span> <span class='op'>-</span> <span class='ivar'>@orig_LOADED_FEATURES</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_feat'>feat</span><span class='op'>|</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_paths'><a href="../Gem.html#paths-class_method" title="Gem.paths (method)">paths</a></span>.<span class='id identifier rubyid_any?'>any?</span> {<span class='op'>|</span><span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='op'>|</span> <span class='id identifier rubyid_feat'>feat</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)}
          <span class='gvar'>$LOADED_FEATURES</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_feat'>feat</span>)
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='gvar'>$LOADED_FEATURES</span>.<span class='id identifier rubyid_replace'>replace</span> <span class='ivar'>@orig_LOADED_FEATURES</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@orig_BASERUBY</span>
    <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BASERUBY</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_BASERUBY</span>
  <span class='kw'>else</span>
    <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BASERUBY</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
  <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>arch</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_arch</span>

  <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="RemoteFetcher.html" title="Gem::RemoteFetcher (class)">RemoteFetcher</a></span> <span class='kw'>then</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="RemoteFetcher.html" title="Gem::RemoteFetcher (class)">RemoteFetcher</a></span>.<span class='id identifier rubyid_fetcher'><a href="RemoteFetcher.html#fetcher-class_method" title="Gem::RemoteFetcher.fetcher (method)">fetcher</a></span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span> <span class='ivar'>@current_dir</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='ivar'>@tempdir</span> <span class='kw'>unless</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>KEEP_FILES</span><span class='tstring_end'>&#39;</span></span>]

  <span class='const'>ENV</span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@orig_gem_env_requirements</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span><span class='op'>|</span>
    <span class='const'>ENV</span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>=</span> <span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span>
  <span class='kw'>end</span>

  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_HOME</span><span class='tstring_end'>&#39;</span></span>]   <span class='op'>=</span> <span class='ivar'>@orig_gem_home</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_PATH</span><span class='tstring_end'>&#39;</span></span>]   <span class='op'>=</span> <span class='ivar'>@orig_gem_path</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_VENDOR</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_gem_vendor</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_SPEC_CACHE</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_gem_spec_cache</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBYGEMS_GEMDEPS</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_rubygems_gemdeps</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BUNDLE_GEMFILE</span><span class='tstring_end'>&#39;</span></span>]   <span class='op'>=</span> <span class='ivar'>@orig_bundle_gemfile</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBYGEMS_HOST</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_rubygems_host</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='ivar'>@orig_ruby</span> <span class='kw'>if</span> <span class='ivar'>@orig_ruby</span>

  <span class='kw'>if</span> <span class='ivar'>@orig_ENV_HOME</span> <span class='kw'>then</span>
    <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HOME</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_ENV_HOME</span>
  <span class='kw'>else</span>
    <span class='const'>ENV</span>.<span class='id identifier rubyid_delete'>delete</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HOME</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@default_dir</span><span class='comma'>,</span> <span class='kw'>nil</span>

  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEM_PRIVATE_KEY_PASSPHRASE</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='ivar'>@orig_gem_private_key_passphrase</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid__clear_load_cache'><a href="Specification.html#_clear_load_cache-class_method" title="Gem::Specification._clear_load_cache (method)">_clear_load_cache</a></span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_unresolved_deps'><a href="Specification.html#unresolved_deps-class_method" title="Gem::Specification.unresolved_deps (method)">unresolved_deps</a></span>.<span class='id identifier rubyid_clear'>clear</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='id identifier rubyid_refresh'><a href="../Gem.html#refresh-class_method" title="Gem.refresh (method)">refresh</a></span>

  <span class='ivar'>@back_ui</span>.<span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uninstall_gem-instance_method">
  <h3 class='signature '>
    #<strong>uninstall_gem</strong>(spec)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Uninstalls the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L559-L567'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='559' data-end='567'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 559</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uninstall_gem'>uninstall_gem</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rubygems/uninstaller</span><span class='tstring_end'>&#39;</span></span>

  <span class='const'>Class</span>.<span class='id identifier rubyid_new'>new</span>(<span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Uninstaller.html" title="Gem::Uninstaller (class)">Uninstaller</a></span>) {
    <span class='kw'>def</span> <span class='id identifier rubyid_ask_if_ok'>ask_if_ok</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
  }.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_executables'>executables</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user_install'>user_install</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>).<span class='id identifier rubyid_uninstall'>uninstall</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unresolved_names-instance_method">
  <h3 class='signature '>
    #<strong>unresolved_names</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L751-L753'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='751' data-end='753'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 751</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unresolved_names'>unresolved_names</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_unresolved_deps'><a href="Specification.html#unresolved_deps-class_method" title="Gem::Specification.unresolved_deps (method)">unresolved_deps</a></span>.<span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_s'>to_s</span>).<span class='id identifier rubyid_sort'>sort</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_build_gem-instance_method">
  <h3 class='signature '>
    #<strong>util_build_gem</strong>(spec)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Builds a gem from <a href="#spec-instance_method" title="Gem::TestCase#spec (method)">#spec</a> and places it in <code>File.join @gemhome, &#39;cache&#39;</code>.  Automatically creates files based on <code>spec.files</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L676-L694'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='676' data-end='694'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 676</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_build_gem'>util_build_gem</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>)
  <span class='id identifier rubyid_dir'><a href="../Gem.html#dir-class_method" title="Gem.dir (method)">dir</a></span> <span class='op'>=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_gem_dir'>gem_dir</span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_dir'><a href="../Gem.html#dir-class_method" title="Gem.dir (method)">dir</a></span>

  <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span> <span class='id identifier rubyid_dir'><a href="../Gem.html#dir-class_method" title="Gem.dir (method)">dir</a></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_files'>files</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_file'>file</span>
      <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='const'>File</span>.<span class='id identifier rubyid_dirname'>dirname</span>(<span class='id identifier rubyid_file'>file</span>)
      <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fp'>fp</span><span class='op'>|</span> <span class='id identifier rubyid_fp'>fp</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_use_ui'>use_ui</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="MockGemUi.html" title="Gem::MockGemUi (class)">MockGemUi</a></span>.<span class='id identifier rubyid_new'><a href="MockGemUi.html#new-class_method" title="Gem::MockGemUi.new (method)">new</a></span> <span class='kw'>do</span>
      <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Package.html" title="Gem::Package (class)">Package</a></span>.<span class='id identifier rubyid_build'><a href="Package.html#build-class_method" title="Gem::Package.build (method)">build</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_cache_file'>cache_file</span>
    <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mv'>mv</span> <span class='const'>File</span>.<span class='id identifier rubyid_basename'>basename</span>(<span class='id identifier rubyid_cache'>cache</span>)<span class='comma'>,</span> <span class='id identifier rubyid_cache'>cache</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_clear_gems-instance_method">
  <h3 class='signature '>
    #<strong>util_clear_gems</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes all installed gems from <tt>@gemhome</tt>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L704-L710'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='704' data-end='710'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 704</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_clear_gems'>util_clear_gems</span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@gemhome</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># TODO: use Gem::Dirs
</span>  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir'>mkdir</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@gemhome</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&quot;</span></span>)
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@gemhome</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span>)
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir'>mkdir</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@gemhome</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span>)
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_reset'><a href="Specification.html#reset-class_method" title="Gem::Specification.reset (method)">reset</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_gem-instance_method">
  <h3 class='signature '>
    #<strong>util_gem</strong>(name, version, deps = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a gem with <code>name</code>, <code>version</code> and <code>deps</code>.  The specification will be yielded before gem creation for customization.  The gem will be placed in <code>File.join @tempdir, &#39;gems&#39;</code>.  The specification and <code>.gem</code> file location are returned.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L865-L892'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='865' data-end='892'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 865</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_gem'>util_gem</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_deps'>deps</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='comment'># TODO: deprecate
</span>  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deps or block, not both</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_deps'>deps</span> <span class='kw'>and</span> <span class='id identifier rubyid_block'>block</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_deps'>deps</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
      <span class='comment'># Since Hash#each is unordered in 1.8, sort
</span>      <span class='comment'># the keys and iterate that way so the tests are
</span>      <span class='comment'># deterministic on all implementations.
</span>      <span class='id identifier rubyid_deps'>deps</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_sort'>sort</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
        <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_add_dependency'>add_dependency</span> <span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> (<span class='id identifier rubyid_deps'>deps</span>[<span class='id identifier rubyid_n'>n</span>] <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;= 0</span><span class='tstring_end'>&#39;</span></span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)

  <span class='id identifier rubyid_util_build_gem'><a href="#util_build_gem-instance_method" title="Gem::TestCase#util_build_gem (method)">util_build_gem</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>

  <span class='id identifier rubyid_cache_file'>cache_file</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@tempdir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gem</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='const'>File</span>.<span class='id identifier rubyid_dirname'>dirname</span> <span class='id identifier rubyid_cache_file'>cache_file</span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mv'>mv</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_cache_file'>cache_file</span><span class='comma'>,</span> <span class='id identifier rubyid_cache_file'>cache_file</span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm'>rm</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_spec_file'>spec_file</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='kw'>nil</span>

  [<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_cache_file'>cache_file</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_gzip-instance_method">
  <h3 class='signature '>
    #<strong>util_gzip</strong>(data)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Gzips <code>data</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L897-L905'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='897' data-end='905'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 897</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_gzip'>util_gzip</span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='id identifier rubyid_out'>out</span> <span class='op'>=</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span>

  <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipWriter</span>.<span class='id identifier rubyid_wrap'>wrap</span> <span class='id identifier rubyid_out'>out</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_data'>data</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_out'>out</span>.<span class='id identifier rubyid_string'>string</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_make_gems-instance_method">
  <h3 class='signature '>
    #<strong>util_make_gems</strong>(prerelease = false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates several default gems which all have a lib/code.rb file.  The gems are not installed but are available in the cache dir.</p>
<dl class="rdoc-list note-list"><dt><tt>@a1</tt>
<dd>
<p>gem a version 1, this is the best-described gem.</p>
</dd><dt><tt>@a2</tt>
<dd>
<p>gem a version 2</p>
</dd><dt>+@a3a
<dd>
<p>gem a version 3.a</p>
</dd><dt><tt>@a_evil9</tt>
<dd>
<p>gem a_evil version 9, use this to ensure similarly-named gems don&#39;t collide with a.</p>
</dd><dt><tt>@b2</tt>
<dd>
<p>gem b version 2</p>
</dd><dt><tt>@c1_2</tt>
<dd>
<p>gem c version 1.2</p>
</dd><dt><tt>@pl1</tt>
<dd>
<p>gem pl version 1, this gem has a legacy platform of i386-linux.</p>
</dd></dl>

<p>Additional <code>prerelease</code> gems may also be created:</p>
<dl class="rdoc-list note-list"><dt><tt>@a2_pre</tt>
<dd>
<p>gem a version 2.a</p>
</dd></dl>

<p>TODO: nuke this and fix tests. this should speed up a lot</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L925-L987'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='925' data-end='987'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 925</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_make_gems'>util_make_gems</span>(<span class='id identifier rubyid_prerelease'>prerelease</span> <span class='op'>=</span> <span class='kw'>false</span>)
  <span class='ivar'>@a1</span> <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib/code.rb</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_require_paths'>require_paths</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span><span class='op'>::</span><span class='const'><a href="Specification.html#TODAY-constant" title="Gem::Specification::TODAY (constant)">TODAY</a></span> <span class='op'>-</span> <span class='int'>86400</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_homepage'>homepage</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://a.example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>example@example.com</span><span class='words_sep'> </span><span class='tstring_content'>example2@example.com</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_authors'>authors</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>Example</span><span class='words_sep'> </span><span class='tstring_content'>Example2</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_description'>description</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-DESC</span>
<span class='tstring_content'>This line is really, really long.  So long, in fact, that it is more than eighty characters long!  The purpose of this line is for testing wrapping behavior because sometimes people don&#39;t wrap their text to eighty characters.  Without the wrapping, the text might not look good in the RSS feed.

Also, a list:
* An entry that\&#39;s actually kind of sort
* an entry that\&#39;s really long, which will probably get wrapped funny.  That&#39;s ok, somebody wasn&#39;t thinking straight when they made it more than eighty characters.
</span><span class='heredoc_end'>    DESC
</span>  <span class='kw'>end</span>

  <span class='id identifier rubyid_init'>init</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib/code.rb</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_require_paths'>require_paths</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib</span><span class='tstring_end'>]</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@a2</span>      <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>      <span class='op'>&amp;</span><span class='id identifier rubyid_init'>init</span>)
  <span class='ivar'>@a3a</span>     <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>    <span class='op'>&amp;</span><span class='id identifier rubyid_init'>init</span>)
  <span class='ivar'>@a_evil9</span> <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a_evil</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_init'>init</span>)
  <span class='ivar'>@b2</span>      <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>      <span class='op'>&amp;</span><span class='id identifier rubyid_init'>init</span>)
  <span class='ivar'>@c1_2</span>    <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.2</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>    <span class='op'>&amp;</span><span class='id identifier rubyid_init'>init</span>)
  <span class='ivar'>@x</span>       <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>      <span class='op'>&amp;</span><span class='id identifier rubyid_init'>init</span>)
  <span class='ivar'>@dep_x</span>   <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dep_x</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib/code.rb</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_require_paths'>require_paths</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_add_dependency'>add_dependency</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;= 1</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@pl1</span>     <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pl</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='comment'># l for legacy
</span>    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib/code.rb</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_require_paths'>require_paths</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>lib</span><span class='tstring_end'>]</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_platform'>platform</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Platform.html" title="Gem::Platform (class)">Platform</a></span>.<span class='id identifier rubyid_new'><a href="Platform.html#new-class_method" title="Gem::Platform.new (method)">new</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i386-linux</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@original_platform</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i386-linux</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_prerelease'>prerelease</span>
    <span class='ivar'>@a2_pre</span> <span class='op'>=</span> <span class='id identifier rubyid_quick_gem'><a href="#quick_gem-instance_method" title="Gem::TestCase#quick_gem (method)">quick_gem</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_init'>init</span>)
    <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@a2_pre</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'> </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
    <span class='id identifier rubyid_util_build_gem'><a href="#util_build_gem-instance_method" title="Gem::TestCase#util_build_gem (method)">util_build_gem</a></span> <span class='ivar'>@a2_pre</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@a1</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>      </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@a2</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>      </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@a3a</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>     </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@a_evil9</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'> </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@b2</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>      </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@c1_2</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>    </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@pl1</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>     </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@x</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>       </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)
  <span class='id identifier rubyid_write_file'><a href="#write_file-instance_method" title="Gem::TestCase#write_file (method)">write_file</a></span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='op'>*</span><span class='words'><span class='words_beg'>%W[</span><span class='tstring_content'>gems</span><span class='words_sep'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@dep_x</span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='words_sep'>   </span><span class='tstring_content'>lib</span><span class='words_sep'> </span><span class='tstring_content'>code.rb</span><span class='tstring_end'>]</span></span>)

  [<span class='ivar'>@a1</span><span class='comma'>,</span> <span class='ivar'>@a2</span><span class='comma'>,</span> <span class='ivar'>@a3a</span><span class='comma'>,</span> <span class='ivar'>@a_evil9</span><span class='comma'>,</span> <span class='ivar'>@b2</span><span class='comma'>,</span> <span class='ivar'>@c1_2</span><span class='comma'>,</span> <span class='ivar'>@pl1</span><span class='comma'>,</span> <span class='ivar'>@x</span><span class='comma'>,</span> <span class='ivar'>@dep_x</span>].<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='id identifier rubyid_util_build_gem'><a href="#util_build_gem-instance_method" title="Gem::TestCase#util_build_gem (method)">util_build_gem</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
  <span class='kw'>end</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_r'>rm_r</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@gemhome</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@pl1</span>.<span class='id identifier rubyid_original_name'>original_name</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_remove_gem-instance_method">
  <h3 class='signature '>
    #<strong>util_remove_gem</strong>(spec)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L696-L699'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='696' data-end='699'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 696</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_remove_gem'>util_remove_gem</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>)
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_cache_file'>cache_file</span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_spec_file'>spec_file</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_restore_RUBY_VERSION-instance_method">
  <h3 class='signature '>
    #<strong>util_restore_RUBY_VERSION</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1123-L1133'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1123' data-end='1133'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1123</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_restore_RUBY_VERSION'>util_restore_RUBY_VERSION</span>
  <span class='const'>Object</span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_const'>remove_const</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>RUBY_VERSION</span>
  <span class='const'>Object</span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_const'>remove_const</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>RUBY_PATCHLEVEL</span> <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>RUBY_PATCHLEVEL</span>)
  <span class='const'>Object</span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_const'>remove_const</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>RUBY_REVISION</span>   <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>RUBY_REVISION</span>)

  <span class='const'>Object</span>.<span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>RUBY_VERSION</span><span class='comma'>,</span>    <span class='ivar'>@RUBY_VERSION</span>
  <span class='const'>Object</span>.<span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>RUBY_PATCHLEVEL</span><span class='comma'>,</span> <span class='ivar'>@RUBY_PATCHLEVEL</span> <span class='kw'>if</span>
    <span class='kw'>defined?</span>(<span class='ivar'>@RUBY_PATCHLEVEL</span>)
  <span class='const'>Object</span>.<span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>RUBY_REVISION</span><span class='comma'>,</span>   <span class='ivar'>@RUBY_REVISION</span>   <span class='kw'>if</span>
    <span class='kw'>defined?</span>(<span class='ivar'>@RUBY_REVISION</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_set_arch-instance_method">
  <h3 class='signature '>
    #<strong>util_set_arch</strong>(arch)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the platform to <code>arch</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L992-L1000'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='992' data-end='1000'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 992</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_set_arch'>util_set_arch</span>(<span class='id identifier rubyid_arch'>arch</span>)
  <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>arch</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_arch'>arch</span>
  <span class='id identifier rubyid_platform'>platform</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Platform.html" title="Gem::Platform (class)">Platform</a></span>.<span class='id identifier rubyid_new'><a href="Platform.html#new-class_method" title="Gem::Platform.new (method)">new</a></span> <span class='id identifier rubyid_arch'>arch</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@platforms</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Platform.html" title="Gem::Platform (class)">Platform</a></span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbeg'>:</span><span class='ivar'>@local</span><span class='comma'>,</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_platform'>platform</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_set_RUBY_VERSION-instance_method">
  <h3 class='signature '>
    #<strong>util_set_RUBY_VERSION</strong>(version, patchlevel = nil, revision = nil)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1104-L1121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1104' data-end='1121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1104</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_set_RUBY_VERSION'>util_set_RUBY_VERSION</span>(<span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_patchlevel'>patchlevel</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_revision'>revision</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variables'>instance_variables</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='symbeg'>:</span><span class='ivar'>@ruby_version</span> <span class='kw'>or</span>
     <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_instance_variables'>instance_variables</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@ruby_version</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>then</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_instance_variable'>remove_instance_variable</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='ivar'>@ruby_version</span>
  <span class='kw'>end</span>

  <span class='ivar'>@RUBY_VERSION</span>    <span class='op'>=</span> <span class='const'>RUBY_VERSION</span>
  <span class='ivar'>@RUBY_PATCHLEVEL</span> <span class='op'>=</span> <span class='const'>RUBY_PATCHLEVEL</span> <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>RUBY_PATCHLEVEL</span>)
  <span class='ivar'>@RUBY_REVISION</span>   <span class='op'>=</span> <span class='const'>RUBY_REVISION</span>   <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>RUBY_REVISION</span>)

  <span class='const'>Object</span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_const'>remove_const</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>RUBY_VERSION</span>
  <span class='const'>Object</span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_const'>remove_const</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>RUBY_PATCHLEVEL</span> <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>RUBY_PATCHLEVEL</span>)
  <span class='const'>Object</span>.<span class='id identifier rubyid_send'>send</span> <span class='symbeg'>:</span><span class='id identifier rubyid_remove_const'>remove_const</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>RUBY_REVISION</span>   <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>RUBY_REVISION</span>)

  <span class='const'>Object</span>.<span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>RUBY_VERSION</span><span class='comma'>,</span>    <span class='id identifier rubyid_version'>version</span>
  <span class='const'>Object</span>.<span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>RUBY_PATCHLEVEL</span><span class='comma'>,</span> <span class='id identifier rubyid_patchlevel'>patchlevel</span> <span class='kw'>if</span> <span class='id identifier rubyid_patchlevel'>patchlevel</span>
  <span class='const'>Object</span>.<span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>RUBY_REVISION</span><span class='comma'>,</span>   <span class='id identifier rubyid_revision'>revision</span>   <span class='kw'>if</span> <span class='id identifier rubyid_revision'>revision</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_setup_fake_fetcher-instance_method">
  <h3 class='signature '>
    #<strong>util_setup_fake_fetcher</strong>(prerelease = false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets up a fake fetcher using the gems from <a href="#util_make_gems-instance_method" title="Gem::TestCase#util_make_gems (method)">#util_make_gems</a>.  Optionally additional <code>prerelease</code> gems may be included.</p>

<p>Gems created by this method may be fetched using <a href="RemoteFetcher.html" title="Gem::RemoteFetcher (class)">RemoteFetcher</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1008-L1025'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1008' data-end='1025'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1008</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_setup_fake_fetcher'>util_setup_fake_fetcher</span>(<span class='id identifier rubyid_prerelease'>prerelease</span> <span class='op'>=</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>zlib</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>socket</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rubygems/remote_fetcher</span><span class='tstring_end'>&#39;</span></span>

  <span class='ivar'>@fetcher</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="FakeFetcher.html" title="Gem::FakeFetcher (class)">FakeFetcher</a></span>.<span class='id identifier rubyid_new'><a href="FakeFetcher.html#new-class_method" title="Gem::FakeFetcher.new (method)">new</a></span>

  <span class='id identifier rubyid_util_make_gems'><a href="#util_make_gems-instance_method" title="Gem::TestCase#util_make_gems (method)">util_make_gems</a></span>(<span class='id identifier rubyid_prerelease'>prerelease</span>)
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_reset'><a href="Specification.html#reset-class_method" title="Gem::Specification.reset (method)">reset</a></span>

  <span class='ivar'>@all_gems</span> <span class='op'>=</span> [<span class='ivar'>@a1</span><span class='comma'>,</span> <span class='ivar'>@a2</span><span class='comma'>,</span> <span class='ivar'>@a3a</span><span class='comma'>,</span> <span class='ivar'>@a_evil9</span><span class='comma'>,</span> <span class='ivar'>@b2</span><span class='comma'>,</span> <span class='ivar'>@c1_2</span>].<span class='id identifier rubyid_sort'>sort</span>
  <span class='ivar'>@all_gem_names</span> <span class='op'>=</span> <span class='ivar'>@all_gems</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_gem'>gem</span><span class='op'>|</span> <span class='id identifier rubyid_gem'>gem</span>.<span class='id identifier rubyid_full_name'>full_name</span> }

  <span class='id identifier rubyid_gem_names'>gem_names</span> <span class='op'>=</span> [<span class='ivar'>@a1</span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='comma'>,</span> <span class='ivar'>@a2</span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='comma'>,</span> <span class='ivar'>@a3a</span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='comma'>,</span> <span class='ivar'>@b2</span>.<span class='id identifier rubyid_full_name'>full_name</span>]
  <span class='ivar'>@gem_names</span> <span class='op'>=</span> <span class='id identifier rubyid_gem_names'>gem_names</span>.<span class='id identifier rubyid_sort'>sort</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="RemoteFetcher.html" title="Gem::RemoteFetcher (class)">RemoteFetcher</a></span>.<span class='id identifier rubyid_fetcher'><a href="RemoteFetcher.html#fetcher-class_method" title="Gem::RemoteFetcher.fetcher (method)">fetcher</a></span> <span class='op'>=</span> <span class='ivar'>@fetcher</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_setup_spec_fetcher-instance_method">
  <h3 class='signature '>
    #<strong>util_setup_spec_fetcher</strong>(*specs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets up <a href="SpecFetcher.html" title="Gem::SpecFetcher (class)">SpecFetcher</a> to return information from the gems in <code>specs</code>. Best used with <tt>@all_gems</tt> from <a href="#util_setup_fake_fetcher-instance_method" title="Gem::TestCase#util_setup_fake_fetcher (method)">#util_setup_fake_fetcher</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1040-L1095'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1040' data-end='1095'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1040</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_setup_spec_fetcher'>util_setup_spec_fetcher</span>(<span class='op'>*</span><span class='id identifier rubyid_specs'>specs</span>)
  <span class='id identifier rubyid_all_specs'>all_specs</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_to_a'>to_a</span> <span class='op'>+</span> <span class='id identifier rubyid_specs'>specs</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid__resort!'><a href="Specification.html#_resort!-class_method" title="Gem::Specification._resort! (method)">_resort!</a></span> <span class='id identifier rubyid_all_specs'>all_specs</span>

  <span class='id identifier rubyid_spec_fetcher'><a href="#spec_fetcher-instance_method" title="Gem::TestCase#spec_fetcher (method)">spec_fetcher</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="SpecFetcher.html" title="Gem::SpecFetcher (class)">SpecFetcher</a></span>.<span class='id identifier rubyid_fetcher'><a href="SpecFetcher.html#fetcher-class_method" title="Gem::SpecFetcher.fetcher (method)">fetcher</a></span>

  <span class='id identifier rubyid_prerelease'>prerelease</span><span class='comma'>,</span> <span class='id identifier rubyid_all'>all</span> <span class='op'>=</span> <span class='id identifier rubyid_all_specs'>all_specs</span>.<span class='id identifier rubyid_partition'>partition</span> { <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_version'>version</span>.<span class='id identifier rubyid_prerelease?'>prerelease?</span>  }
  <span class='id identifier rubyid_latest'>latest</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid__latest_specs'><a href="Specification.html#_latest_specs-class_method" title="Gem::Specification._latest_specs (method)">_latest_specs</a></span> <span class='id identifier rubyid_all_specs'>all_specs</span>

  <span class='id identifier rubyid_spec_fetcher'><a href="#spec_fetcher-instance_method" title="Gem::TestCase#spec_fetcher (method)">spec_fetcher</a></span>.<span class='id identifier rubyid_specs'>specs</span>[<span class='ivar'>@uri</span>] <span class='op'>=</span> []
  <span class='id identifier rubyid_all'>all</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='id identifier rubyid_spec_fetcher'><a href="#spec_fetcher-instance_method" title="Gem::TestCase#spec_fetcher (method)">spec_fetcher</a></span>.<span class='id identifier rubyid_specs'>specs</span>[<span class='ivar'>@uri</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_name_tuple'>name_tuple</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec_fetcher'><a href="#spec_fetcher-instance_method" title="Gem::TestCase#spec_fetcher (method)">spec_fetcher</a></span>.<span class='id identifier rubyid_latest_specs'>latest_specs</span>[<span class='ivar'>@uri</span>] <span class='op'>=</span> []
  <span class='id identifier rubyid_latest'>latest</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='id identifier rubyid_spec_fetcher'><a href="#spec_fetcher-instance_method" title="Gem::TestCase#spec_fetcher (method)">spec_fetcher</a></span>.<span class='id identifier rubyid_latest_specs'>latest_specs</span>[<span class='ivar'>@uri</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_name_tuple'>name_tuple</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_spec_fetcher'><a href="#spec_fetcher-instance_method" title="Gem::TestCase#spec_fetcher (method)">spec_fetcher</a></span>.<span class='id identifier rubyid_prerelease_specs'>prerelease_specs</span>[<span class='ivar'>@uri</span>] <span class='op'>=</span> []
  <span class='id identifier rubyid_prerelease'>prerelease</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
    <span class='id identifier rubyid_spec_fetcher'><a href="#spec_fetcher-instance_method" title="Gem::TestCase#spec_fetcher (method)">spec_fetcher</a></span>.<span class='id identifier rubyid_prerelease_specs'>prerelease_specs</span>[<span class='ivar'>@uri</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_name_tuple'>name_tuple</span>
  <span class='kw'>end</span>

  <span class='comment'># HACK for test_download_to_cache
</span>  <span class='kw'>unless</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="RemoteFetcher.html" title="Gem::RemoteFetcher (class)">RemoteFetcher</a></span> <span class='op'>===</span> <span class='ivar'>@fetcher</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_marshal_version'><a href="../Gem.html#marshal_version-class_method" title="Gem.marshal_version (method)">marshal_version</a></span>

    <span class='id identifier rubyid_specs'>specs</span> <span class='op'>=</span> <span class='id identifier rubyid_all'>all</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_name_tuple'>name_tuple</span> }
    <span class='id identifier rubyid_s_zip'>s_zip</span> <span class='op'>=</span> <span class='id identifier rubyid_util_gzip'><a href="#util_gzip-instance_method" title="Gem::TestCase#util_gzip (method)">util_gzip</a></span> <span class='const'>Marshal</span>.<span class='id identifier rubyid_dump'>dump</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="NameTuple.html" title="Gem::NameTuple (class)">NameTuple</a></span>.<span class='id identifier rubyid_to_basic'><a href="NameTuple.html#to_basic-class_method" title="Gem::NameTuple.to_basic (method)">to_basic</a></span> <span class='id identifier rubyid_specs'>specs</span>

    <span class='id identifier rubyid_latest_specs'>latest_specs</span> <span class='op'>=</span> <span class='id identifier rubyid_latest'>latest</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
      <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_name_tuple'>name_tuple</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_l_zip'>l_zip</span> <span class='op'>=</span> <span class='id identifier rubyid_util_gzip'><a href="#util_gzip-instance_method" title="Gem::TestCase#util_gzip (method)">util_gzip</a></span> <span class='const'>Marshal</span>.<span class='id identifier rubyid_dump'>dump</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="NameTuple.html" title="Gem::NameTuple (class)">NameTuple</a></span>.<span class='id identifier rubyid_to_basic'><a href="NameTuple.html#to_basic-class_method" title="Gem::NameTuple.to_basic (method)">to_basic</a></span> <span class='id identifier rubyid_latest_specs'>latest_specs</span>

    <span class='id identifier rubyid_prerelease_specs'>prerelease_specs</span> <span class='op'>=</span> <span class='id identifier rubyid_prerelease'>prerelease</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_name_tuple'>name_tuple</span> }
    <span class='id identifier rubyid_p_zip'>p_zip</span> <span class='op'>=</span> <span class='id identifier rubyid_util_gzip'><a href="#util_gzip-instance_method" title="Gem::TestCase#util_gzip (method)">util_gzip</a></span> <span class='const'>Marshal</span>.<span class='id identifier rubyid_dump'>dump</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="NameTuple.html" title="Gem::NameTuple (class)">NameTuple</a></span>.<span class='id identifier rubyid_to_basic'><a href="NameTuple.html#to_basic-class_method" title="Gem::NameTuple.to_basic (method)">to_basic</a></span> <span class='id identifier rubyid_prerelease_specs'>prerelease_specs</span>

    <span class='ivar'>@fetcher</span>.<span class='id identifier rubyid_data'>data</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_repo</span><span class='embexpr_end'>}</span><span class='tstring_content'>specs.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>.gz</span><span class='tstring_end'>&quot;</span></span>]            <span class='op'>=</span> <span class='id identifier rubyid_s_zip'>s_zip</span>
    <span class='ivar'>@fetcher</span>.<span class='id identifier rubyid_data'>data</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_repo</span><span class='embexpr_end'>}</span><span class='tstring_content'>latest_specs.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>.gz</span><span class='tstring_end'>&quot;</span></span>]     <span class='op'>=</span> <span class='id identifier rubyid_l_zip'>l_zip</span>
    <span class='ivar'>@fetcher</span>.<span class='id identifier rubyid_data'>data</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_repo</span><span class='embexpr_end'>}</span><span class='tstring_content'>prerelease_specs.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>.gz</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_p_zip'>p_zip</span>

    <span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_marshal_version'><a href="../Gem.html#marshal_version-class_method" title="Gem.marshal_version (method)">marshal_version</a></span>

    <span class='id identifier rubyid_all_specs'>all_specs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span><span class='op'>|</span>
      <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_repo</span><span class='embexpr_end'>}</span><span class='tstring_content'>quick/Marshal.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'><a href="#v-instance_method" title="Gem::TestCase#v (method)">v</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_original_name'>original_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec.rz</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>Marshal</span>.<span class='id identifier rubyid_dump'>dump</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
      <span class='id identifier rubyid_data_deflate'>data_deflate</span> <span class='op'>=</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>Deflate</span>.<span class='id identifier rubyid_deflate'><a href="../Gem.html#deflate-class_method" title="Gem.deflate (method)">deflate</a></span> <span class='id identifier rubyid_data'>data</span>
      <span class='ivar'>@fetcher</span>.<span class='id identifier rubyid_data'>data</span>[<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_data_deflate'>data_deflate</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span> <span class='comment'># force errors
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_spec-instance_method">
  <h3 class='signature '>
    #<strong>util_spec</strong>(name, version = 2, deps = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a spec with <code>name</code>, <code>version</code>.  <code>deps</code> can specify the dependency or a <code>block</code> can be given for full customization of the specification.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L830-L857'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='830' data-end='857'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 830</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_spec'>util_spec</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_deps'>deps</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'># :yields: specification
</span>  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deps or block, not both</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_deps'>deps</span> <span class='kw'>and</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_new'><a href="Specification.html#new-class_method" title="Gem::Specification.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_platform'>platform</span>    <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Platform.html" title="Gem::Platform (class)">Platform</a></span><span class='op'>::</span><span class='const'><a href="Platform.html#RUBY-constant" title="Gem::Platform::RUBY (constant)">RUBY</a></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_name'>name</span>        <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_version'>version</span>     <span class='op'>=</span> <span class='id identifier rubyid_version'>version</span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_author'>author</span>      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A User</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_email'>email</span>       <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example@example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_homepage'>homepage</span>    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_summary'>summary</span>     <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>this is a summary</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_description'>description</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is a test description</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>yield</span> <span class='id identifier rubyid_s'>s</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_deps'>deps</span> <span class='kw'>then</span>
    <span class='comment'># Since Hash#each is unordered in 1.8, sort the keys and iterate that
</span>    <span class='comment'># way so the tests are deterministic on all implementations.
</span>    <span class='id identifier rubyid_deps'>deps</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_sort'>sort</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
      <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>.<span class='id identifier rubyid_add_dependency'>add_dependency</span> <span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> (<span class='id identifier rubyid_deps'>deps</span>[<span class='id identifier rubyid_n'>n</span>] <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;= 0</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_reset'><a href="Specification.html#reset-class_method" title="Gem::Specification.reset (method)">reset</a></span>

  <span class='kw'>return</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::TestCase#spec (method)">spec</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="util_zip-instance_method">
  <h3 class='signature '>
    #<strong>util_zip</strong>(data)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deflates <code>data</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1100-L1102'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1100' data-end='1102'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_util_zip'>util_zip</span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>Deflate</span>.<span class='id identifier rubyid_deflate'><a href="../Gem.html#deflate-class_method" title="Gem.deflate (method)">deflate</a></span> <span class='id identifier rubyid_data'>data</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="v-instance_method">
  <h3 class='signature '>
    #<strong>v</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Construct a new <a href="Version_.html" title="Gem::Version (class)">Version</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1337-L1339'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1337' data-end='1339'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1337</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_v'>v</span> <span class='id identifier rubyid_string'>string</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Version_.html" title="Gem::Version (class)">Version</a></span>.<span class='id identifier rubyid_create'><a href="Version_.html#create-class_method" title="Gem::Version.create (method)">create</a></span> <span class='id identifier rubyid_string'>string</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="vendor_gem-instance_method">
  <h3 class='signature '>
    #<strong>vendor_gem</strong>(name = &#39;a&#39;, version = 1)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>A vendor_gem is used with a gem dependencies file.  The gem created here has no files, just a gem specification for the given <code>name</code> and <code>version</code>.</p>

<p>Yields the <code>specification</code> to the block, if given</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1347-L1353'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1347' data-end='1353'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1347</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_vendor_gem'>vendor_gem</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_directory'>directory</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vendor</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_directory'>directory</span>

  <span class='id identifier rubyid_save_gemspec'><a href="#save_gemspec-instance_method" title="Gem::TestCase#save_gemspec (method)">save_gemspec</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_directory'>directory</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wait_for_child_process_to_exit-instance_method">
  <h3 class='signature '>
    #<strong>wait_for_child_process_to_exit</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>In case we&#39;re building docs in a background process, this method waits for that process to exit (or if it&#39;s already been reaped, or never happened, swallows the <code>Errno::ECHILD</code> error).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L1193-L1196'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1193' data-end='1196'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 1193</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_wait_for_child_process_to_exit'>wait_for_child_process_to_exit</span>
  <span class='const'>Process</span>.<span class='id identifier rubyid_wait'>wait</span> <span class='kw'>if</span> <span class='const'>Process</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_fork'>fork</span>)
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECHILD</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_file-instance_method">
  <h3 class='signature '>
    #<strong>write_file</strong>(path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes a binary file to <a href="../Gem.html#path-class_method" title="Gem.path (method)">Gem.path</a> which is relative to <tt>@gemhome</tt></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/rubygems/test_case.rb#L610-L620'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='610' data-end='620'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/test_case.rb', line 610</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_file'>write_file</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>)
  <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@gemhome</span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='kw'>unless</span> <span class='const'>Pathname</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>).<span class='id identifier rubyid_absolute?'>absolute?</span>
  <span class='id identifier rubyid_dir'><a href="../Gem.html#dir-class_method" title="Gem.dir (method)">dir</a></span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_dirname'>dirname</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_dir'><a href="../Gem.html#dir-class_method" title="Gem.dir (method)">dir</a></span> <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_directory?'>directory?</span> <span class='id identifier rubyid_dir'><a href="../Gem.html#dir-class_method" title="Gem.dir (method)">dir</a></span>

  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_io'>io</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>