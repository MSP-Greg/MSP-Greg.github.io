<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: WEBrick &mdash; webrick  Ruby-2.5.9 p229</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "WEBrick",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-2.5.9</a> &raquo; 
      <a href='.'>webrick</a> &raquo; 
      <a href='_index.html#alpha_W'>Index (W)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>WEBrick&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: WEBrick</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="WEBrick/AccessLog.html" title="WEBrick::AccessLog (module)">AccessLog</a>,
        <a href="WEBrick/Config.html" title="WEBrick::Config (module)">Config</a>,
        <a href="WEBrick/HTMLUtils.html" title="WEBrick::HTMLUtils (module)">HTMLUtils</a>,
        <a href="WEBrick/HTTPAuth.html" title="WEBrick::HTTPAuth (module)">HTTPAuth</a>,
        <a href="WEBrick/HTTPServlet.html" title="WEBrick::HTTPServlet (module)">HTTPServlet</a>,
        <a href="WEBrick/HTTPStatus.html" title="WEBrick::HTTPStatus (module)">HTTPStatus</a>,
        <a href="WEBrick/HTTPUtils.html" title="WEBrick::HTTPUtils (module)">HTTPUtils</a>,
        <a href="WEBrick/Utils.html" title="WEBrick::Utils (module)">Utils</a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="WEBrick/BasicLog.html" title="WEBrick::BasicLog (class)">BasicLog</a>,
        <a href="WEBrick/CGI.html" title="WEBrick::CGI (class)">CGI</a>,
        <a href="WEBrick/Cookie.html" title="WEBrick::Cookie (class)">Cookie</a>,
        <a href="WEBrick/Daemon.html" title="WEBrick::Daemon (class)">Daemon</a>,
        <a href="WEBrick/GenericServer.html" title="WEBrick::GenericServer (class)">GenericServer</a>,
        <a href="WEBrick/HTTPProxyServer.html" title="WEBrick::HTTPProxyServer (class)">HTTPProxyServer</a>,
        <a href="WEBrick/HTTPRequest.html" title="WEBrick::HTTPRequest (class)">HTTPRequest</a>,
        <a href="WEBrick/HTTPResponse.html" title="WEBrick::HTTPResponse (class)">HTTPResponse</a>,
        <a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a>,
        <a href="WEBrick/HTTPVersion.html" title="WEBrick::HTTPVersion (class)">HTTPVersion</a>,
        <a href="WEBrick/Log.html" title="WEBrick::Log (class)">Log</a>,
        <a href="WEBrick/SNIRequest.html" title="WEBrick::SNIRequest (class)">SNIRequest</a>,
        <a href="WEBrick/SimpleServer.html" title="WEBrick::SimpleServer (class)">SimpleServer</a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="WEBrick/HTTPServerError.html" title="WEBrick::HTTPServerError (class)">HTTPServerError</a>,
        <a href="WEBrick/ServerError.html" title="WEBrick::ServerError (class)">ServerError</a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick.rb#L206'>lib/webrick.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/accesslog.rb#L11'>lib/webrick/accesslog.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/cgi.rb#L16'>lib/webrick/cgi.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/config.rb#L18'>lib/webrick/config.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/cookie.rb#L15'>lib/webrick/cookie.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/htmlutils.rb#L12'>lib/webrick/htmlutils.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth.rb#L18'>lib/webrick/httpauth.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpproxy.rb#L16'>lib/webrick/httpproxy.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httprequest.rb#L18'>lib/webrick/httprequest.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpresponse.rb#L18'>lib/webrick/httpresponse.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/https.rb#L15'>lib/webrick/https.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpserver.rb#L21'>lib/webrick/httpserver.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpservlet.rb#L18'>lib/webrick/httpservlet.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpstatus.rb#L14'>lib/webrick/httpstatus.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httputils.rb#L15'>lib/webrick/httputils.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpversion.rb#L11'>lib/webrick/httpversion.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/log.rb#L12'>lib/webrick/log.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/server.rb#L16'>lib/webrick/server.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/ssl.rb#L12'>lib/webrick/ssl.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/utils.rb#L16'>lib/webrick/utils.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/version.rb#L12'>lib/webrick/version.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth/authenticator.rb#L11'>lib/webrick/httpauth/authenticator.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth/basicauth.rb#L15'>lib/webrick/httpauth/basicauth.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth/digestauth.rb#L21'>lib/webrick/httpauth/digestauth.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth/htdigest.rb#L15'>lib/webrick/httpauth/htdigest.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth/htgroup.rb#L13'>lib/webrick/httpauth/htgroup.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth/htpasswd.rb#L15'>lib/webrick/httpauth/htpasswd.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpauth/userdb.rb#L11'>lib/webrick/httpauth/userdb.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpservlet/abstract.rb#L16'>lib/webrick/httpservlet/abstract.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpservlet/cgihandler.rb#L17'>lib/webrick/httpservlet/cgihandler.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpservlet/erbhandler.rb#L16'>lib/webrick/httpservlet/erbhandler.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpservlet/filehandler.rb#L18'>lib/webrick/httpservlet/filehandler.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpservlet/prochandler.rb#L14'>lib/webrick/httpservlet/prochandler.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-WEB+server+toolkit.">WEB server toolkit.</h3>

<p><code>WEBrick</code> is an HTTP server toolkit that can be configured as an HTTPS server, a proxy server, and a virtual-host server.  <code>WEBrick</code> features complete logging of both server operations and HTTP access.  <code>WEBrick</code> supports both basic and digest authentication in addition to algorithms not in RFC 2617.</p>

<p>A WEBrick server can be composed of multiple <code>WEBrick</code> servers or servlets to provide differing behavior on a per-host or per-path basis.  <code>WEBrick</code> includes servlets for handling <a href="WEBrick/CGI.html" title="WEBrick::CGI (class)">CGI</a> scripts, ERB pages, Ruby blocks and directory listings.</p>

<p><code>WEBrick</code> also includes tools for daemonizing a process and starting a process at a higher privilege level and dropping permissions.</p>

<h4 id="label-Starting+an+HTTP+server">Starting an HTTP server</h4>

<p>To create a new <a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a> that will listen to connections on port 8000 and serve documents from the current user&#39;s public_html folder:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_root'><a href="top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_expand_path'>expand_path</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~/public_html</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a></span>.<span class='id identifier rubyid_new'><a href="WEBrick/HTTPServer.html#new-class_method" title="WEBrick::HTTPServer.new (method)">new</a></span> <span class='symbeg'>:</span><span class='const'>Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>DocumentRoot</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_root'><a href="top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></code></pre>

<p>To run the server you will need to provide a suitable shutdown hook as starting the server blocks the current thread:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_trap'>trap</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INT</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_shutdown'>shutdown</span> <span class='kw'>end</span>

<span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_start'>start</span></code></pre>

<h4 id="label-Custom+Behavior">Custom Behavior</h4>

<p>The easiest way to have a server perform custom operations is through <a href="WEBrick/HTTPServer.html#mount_proc-instance_method" title="WEBrick::HTTPServer#mount_proc (method)">HTTPServer#mount_proc</a>.  The block given will be called with a <a href="WEBrick/HTTPRequest.html" title="WEBrick::HTTPRequest (class)">HTTPRequest</a> with request info and a <a href="WEBrick/HTTPResponse.html" title="WEBrick::HTTPResponse (class)">HTTPResponse</a> which must be filled in appropriately:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_mount_proc'>mount_proc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_res'>res</span><span class='op'>|</span>
  <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>

<p>Remember that <code>server.mount_proc</code> must precede <code>server.start</code>.</p>

<h4 id="label-Servlets">Servlets</h4>

<p>Advanced custom behavior can be obtained through mounting a subclass of <a href="WEBrick/HTTPServlet/AbstractServlet.html" title="WEBrick::HTTPServlet::AbstractServlet (class)">::WEBrick::HTTPServlet::AbstractServlet</a>.  Servlets provide more modularity when writing an HTTP server than mount_proc allows.  Here is a simple servlet:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Simple</span> <span class='op'>&lt;</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/HTTPServlet.html" title="WEBrick::HTTPServlet (module)">HTTPServlet</a></span><span class='op'>::</span><span class='const'><a href="WEBrick/HTTPServlet/AbstractServlet.html" title="WEBrick::HTTPServlet::AbstractServlet (class)">AbstractServlet</a></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_do_GET'>do_GET</span> <span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span>
    <span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_content_type'>content_type</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_do_stuff_with'>do_stuff_with</span> <span class='id identifier rubyid_request'>request</span>

    <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='int'>200</span>
    <span class='id identifier rubyid_response'>response</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello, World!</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>To initialize the servlet you mount it on the server:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_mount'>mount</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/simple</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Simple</span></code></pre>

<p>See <a href="WEBrick/HTTPServlet/AbstractServlet.html" title="WEBrick::HTTPServlet::AbstractServlet (class)">::WEBrick::HTTPServlet::AbstractServlet</a> for more details.</p>

<h4 id="label-Virtual+Hosts">Virtual Hosts</h4>

<p>A server can act as a virtual host for multiple host names.  After creating the listening host, additional hosts that do not listen can be created and attached as virtual hosts:</p>

<pre class="code ruby"><code class="ruby">server = WEBrick::HTTPServer.new # ...

vhost = WEBrick::HTTPServer.new :ServerName =&gt; &#39;vhost.example&#39;,
                                :DoNotListen =&gt; true, # ...
vhost.mount &#39;/&#39;, ...

server.virtual_host vhost</code></pre>

<p>If no <code>:DocumentRoot</code> is provided and no servlets or procs are mounted on the main server it will return 404 for all URLs.</p>

<h4 id="label-HTTPS">HTTPS</h4>

<p>To create an HTTPS server you only need to enable SSL and provide an SSL certificate name:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick/https</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_cert_name'>cert_name</span> <span class='op'>=</span> [
  <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>CN</span><span class='words_sep'> </span><span class='tstring_content'>localhost</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
]

<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a></span>.<span class='id identifier rubyid_new'><a href="WEBrick/HTTPServer.html#new-class_method" title="WEBrick::HTTPServer.new (method)">new</a></span>(<span class='symbeg'>:</span><span class='const'>Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span><span class='comma'>,</span>
                                 <span class='symbeg'>:</span><span class='const'>SSLEnable</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                                 <span class='symbeg'>:</span><span class='const'>SSLCertName</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_cert_name'>cert_name</span>)</code></pre>

<p>This will start the server with a self-generated self-signed certificate. The certificate will be changed every time the server is restarted.</p>

<p>To create a server with a pre-determined key and certificate you can provide them:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick/https</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>openssl</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_cert'>cert</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Certificate</span>.<span class='id identifier rubyid_new'>new</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/path/to/cert.pem</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_pkey'>pkey</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span>.<span class='id identifier rubyid_new'>new</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/path/to/pkey.pem</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a></span>.<span class='id identifier rubyid_new'><a href="WEBrick/HTTPServer.html#new-class_method" title="WEBrick::HTTPServer.new (method)">new</a></span>(<span class='symbeg'>:</span><span class='const'>Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span><span class='comma'>,</span>
                                 <span class='symbeg'>:</span><span class='const'>SSLEnable</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                                 <span class='symbeg'>:</span><span class='const'>SSLCertificate</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_cert'>cert</span><span class='comma'>,</span>
                                 <span class='symbeg'>:</span><span class='const'>SSLPrivateKey</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pkey'>pkey</span>)</code></pre>

<h4 id="label-Proxy+Server">Proxy Server</h4>

<p><code>WEBrick</code> can act as a proxy server:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick/httpproxy</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_proxy'>proxy</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/HTTPProxyServer.html" title="WEBrick::HTTPProxyServer (class)">HTTPProxyServer</a></span>.<span class='id identifier rubyid_new'><a href="WEBrick/HTTPProxyServer.html#new-class_method" title="WEBrick::HTTPProxyServer.new (method)">new</a></span> <span class='symbeg'>:</span><span class='const'>Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span>

<span class='id identifier rubyid_trap'>trap</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INT</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='id identifier rubyid_proxy'>proxy</span>.<span class='id identifier rubyid_shutdown'>shutdown</span> <span class='kw'>end</span></code></pre>

<p>See <code>WEBrick::HTTPProxy</code> for further details including modifying proxied responses.</p>

<h4 id="label-Basic+and+Digest+authentication">Basic and Digest authentication</h4>

<p><code>WEBrick</code> provides both Basic and Digest authentication for regular and proxy servers.  See <a href="WEBrick/HTTPAuth.html" title="WEBrick::HTTPAuth (module)">HTTPAuth</a>, <a href="WEBrick/HTTPAuth/BasicAuth.html" title="WEBrick::HTTPAuth::BasicAuth (class)">::WEBrick::HTTPAuth::BasicAuth</a> and <a href="WEBrick/HTTPAuth/DigestAuth.html" title="WEBrick::HTTPAuth::DigestAuth (class)">::WEBrick::HTTPAuth::DigestAuth</a>.</p>

<h4 id="label-WEBrick+as+a+Production+Web+Server">WEBrick as a Production Web Server</h4>

<p><code>WEBrick</code> can be run as a production server for small loads.</p>

<h5 id="label-Daemonizing">Daemonizing</h5>

<p>To start a <code>WEBrick</code> server as a daemon simple run <a href="WEBrick/Daemon.html#start-class_method" title="WEBrick::Daemon.start (method)">Daemon.start</a> before starting the server.</p>

<h5 id="label-Dropping+Permissions">Dropping Permissions</h5>

<p><code>WEBrick</code> can be started as one user to gain permission to bind to port 80 or 443 for serving HTTP or HTTPS traffic then can drop these permissions for regular operation.  To listen on all interfaces for HTTP traffic:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_sockets'>sockets</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/Utils.html" title="WEBrick::Utils (module)">Utils</a></span>.<span class='id identifier rubyid_create_listeners'><a href="WEBrick/Utils.html#create_listeners-class_method" title="WEBrick::Utils.create_listeners (method)">create_listeners</a></span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='int'>80</span></code></pre>

<p>Then drop privileges:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/Utils.html" title="WEBrick::Utils (module)">Utils</a></span>.<span class='id identifier rubyid_su'><a href="WEBrick/Utils.html#su-class_method" title="WEBrick::Utils.su (method)">su</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>www</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>Then create a server that does not listen by default:</p>

<pre class="code ruby"><code class="ruby">server = WEBrick::HTTPServer.new :DoNotListen =&gt; true, # ...</code></pre>

<p>Then overwrite the listening sockets with the port 80 sockets:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_listeners'>listeners</span>.<span class='id identifier rubyid_replace'>replace</span> <span class='id identifier rubyid_sockets'>sockets</span></code></pre>

<h5 id="label-Logging">Logging</h5>

<p><code>WEBrick</code> can separately log server operations and end-user access.  For server operations:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_log_file'>log_file</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/var/log/webrick.log</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a+</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_log'>log</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/Log.html" title="WEBrick::Log (class)">Log</a></span>.<span class='id identifier rubyid_new'><a href="WEBrick/Log.html#new-class_method" title="WEBrick::Log.new (method)">new</a></span> <span class='id identifier rubyid_log_file'>log_file</span></code></pre>

<p>For user access logging:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_access_log'>access_log</span> <span class='op'>=</span> [
  [<span class='id identifier rubyid_log_file'>log_file</span><span class='comma'>,</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/AccessLog.html" title="WEBrick::AccessLog (module)">AccessLog</a></span><span class='op'>::</span><span class='const'><a href="WEBrick/AccessLog.html#COMBINED_LOG_FORMAT-constant" title="WEBrick::AccessLog::COMBINED_LOG_FORMAT (constant)">COMBINED_LOG_FORMAT</a></span>]<span class='comma'>,</span>
]

<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'><a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a></span>.<span class='id identifier rubyid_new'><a href="WEBrick/HTTPServer.html#new-class_method" title="WEBrick::HTTPServer.new (method)">new</a></span> <span class='symbeg'>:</span><span class='const'>Logger</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_log'>log</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'><a href="WEBrick/AccessLog.html" title="WEBrick::AccessLog (module)">AccessLog</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_access_log'>access_log</span></code></pre>

<p>See <a href="WEBrick/AccessLog.html" title="WEBrick::AccessLog (module)">AccessLog</a> for further log formats.</p>

<h5 id="label-Log+Rotation">Log Rotation</h5>

<p>To rotate logs in <code>WEBrick</code> on a HUP signal (like syslogd can send), open the log file in &#39;a+&#39; mode (as above) and trap &#39;HUP&#39; to reopen the log file:</p>

<pre class="code ruby"><code class="ruby">trap &#39;HUP&#39; do log_file.reopen &#39;/path/to/webrick.log&#39;, &#39;a+&#39;</code></pre>

<h4 id="label-Copyright">Copyright</h4>

<p>Author: IPR – Internet Programming with Ruby – writers</p>

<p>Copyright © 2000 TAKAHASHI Masayoshi, GOTOU YUUZOU Copyright © 2002 Internet Programming with Ruby writers. All rights reserved.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='CR-constant' class='summary_signature nodoc'>CR =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httputils.rb#L16-L16'># File 'lib/webrick/httputils.rb', line 16</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x0d</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='CRLF-constant' class='summary_signature nodoc'>CRLF =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httputils.rb#L18-L18'># File 'lib/webrick/httputils.rb', line 18</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x0d\x0a</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='FakeProxyURI-constant' class='summary_signature nodoc'>FakeProxyURI =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpproxy.rb#L26-L26'># File 'lib/webrick/httpproxy.rb', line 26</a>    <pre class='code ruby'><span class='const'>Object</span>.<span class='id identifier rubyid_new'>new</span></pre>
  </li>
  <li>
    <span id='LF-constant' class='summary_signature nodoc'>LF =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httputils.rb#L17-L17'># File 'lib/webrick/httputils.rb', line 17</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x0a</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='NullReader-constant' class='summary_signature nodoc'>NullReader =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/httpproxy.rb#L18-L18'># File 'lib/webrick/httpproxy.rb', line 18</a>    <pre class='code ruby'><span class='const'>Object</span>.<span class='id identifier rubyid_new'>new</span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The WEBrick version</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v2_5_9/lib/webrick/version.rb#L17-L17'># File 'lib/webrick/version.rb', line 17</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.4.2.1</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
</ul>
</div>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>