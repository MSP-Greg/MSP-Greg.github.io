<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ERB &mdash; erb  Ruby-3.2.10 p266</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ERB",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.2.10</a> &raquo; 
      <a href='.'>erb</a> &raquo; 
      <a href='_index.html#alpha_E'>Index (E)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ERB&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ERB</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="ERB/DefMethod.html" title="ERB::DefMethod (module)"><code>DefMethod</code></a>,
        <a href="ERB/Escape.html" title="ERB::Escape (module)"><code>Escape</code></a>,
        <a href="ERB/Util.html" title="ERB::Util (module)"><code>Util</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="ERB/Compiler.html" title="ERB::Compiler (class)"><code>Compiler</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L262'>lib/erb.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/erb/escape/escape.c#L89'>ext/erb/escape/escape.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb/version.rb#L2'>lib/erb/version.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-ERB+--+Ruby+Templating">ERB – Ruby Templating</h3>

<h4 id="label-Introduction">Introduction</h4>

<p><code>ERB</code> provides an easy to use but powerful templating system for Ruby.  Using <code>ERB</code>, actual Ruby code can be added to any plain text document for the purposes of generating document information details and/or flow control.</p>

<p>A very simple example is this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>42</span>
<span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span> <span class='heredoc_beg'>&lt;&lt;-EOF</span>
<span class='tstring_content'>  The value of x is: &lt;%= x %&gt;
</span><span class='heredoc_end'>EOF
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_binding'>binding</span>)</code></pre>

<p><em>Prints:</em> The value of x is: 42</p>

<p>More complex examples are given below.</p>

<h4 id="label-Recognized+Tags">Recognized Tags</h4>

<p><code>ERB</code> recognizes certain tags in the provided template and converts them based on the rules below:</p>

<pre class="code ruby"><code class="ruby"><span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>% </span><span class='tstring_content'>Ruby</span><span class='tstring_end'> </span></span><span class='id identifier rubyid_code'>code</span> <span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_inline'>inline</span> <span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_output'>output</span> <span class='tstring'><span class='tstring_beg'>%&gt;</span><span class='tstring_content'>
&lt;%= Ruby expression -- replace with result %</span><span class='tstring_end'>&gt;</span></span>
<span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%#</span><span class='tstring_content'> comment -- ignored -- useful in testing %&gt; (`&lt;% </span><span class='tstring_end'>#</span></span><span class='backtick'>`</span><span class='tstring_content'> doesn&#39;t work. Don&#39;t use Ruby comments.)
% a line of Ruby code -- treated as &lt;% line %&gt; (optional -- see ERB.new)
%% replaced with % if first thing on a line and % processing is used
&lt;%% or %%&gt; -- replace with &lt;% or %&gt; respectively</span></code></pre>

<p>All other text is passed through <code>ERB</code> filtering unchanged.</p>

<h4 id="label-Options">Options</h4>

<p>There are several settings you can change when you use <code>ERB</code>:</p>
<ul><li>
<p>the nature of the tags that are recognized;</p>
</li><li>
<p>the binding used to resolve local variables in the template.</p>
</li></ul>

<p>See the <a href="#new-class_method" title="ERB.new (method)">.new</a> and <a href="#result-instance_method" title="ERB#result (method)">#result</a> methods for more detail.</p>

<h4 id="label-Character+encodings">Character encodings</h4>

<p><code>ERB</code> (or Ruby code generated by <code>ERB</code>) returns a string in the same character encoding as the input string.  When the input string has a magic comment, however, it returns a string in the encoding specified by the magic comment.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># -*- coding: utf-8 -*-
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span> <span class='heredoc_beg'>&lt;&lt;EOF</span>
<span class='tstring_content'>&lt;%#-*- coding: Big5 -*-%&gt;
  \_\_ENCODING\_\_ is &lt;%= \_\_ENCODING\_\_ %&gt;.
</span><span class='heredoc_end'>EOF
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_template'>template</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span></code></pre>

<p><em>Prints:</em> _<em>ENCODING</em>_ is Big5.</p>

<h4 id="label-Examples">Examples</h4>

<h5 id="label-Plain+Text">Plain Text</h5>

<p><code>ERB</code> is useful for any generic templating situation.  Note that in this example, we use the convenient “% at start of line” tag, and we quote the template literally with <code>%q{...}</code> to avoid trouble with the backslash.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Create template.
</span><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>%q{</span><span class='tstring_content'>
  From:  James Edward Gray II &lt;james@grayproductions.net&gt;
  To:  &lt;%= to %&gt;
  Subject:  Addressing Needs

  &lt;%= to[/\w+/] %&gt;:

  Just wanted to send a quick note assuring that your needs are being
  addressed.

  I want you to know that my team will keep working on the issues,
  especially:

  &lt;%# ignore numerous minor requests -- focus on priorities %&gt;
  % priorities.each do |priority|
    * &lt;%= priority %&gt;
  % end

  Thanks for your patience.

  James Edward Gray II
</span><span class='tstring_end'>}</span></span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^  </span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)

<span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%&lt;&gt;</span><span class='tstring_end'>&quot;</span></span>)

<span class='comment'># Set up template data.
</span><span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Community Spokesman &lt;spokesman@ruby_community.org&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_priorities'>priorities</span> <span class='op'>=</span> [ <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Run Ruby Quiz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Document Modules</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Answer Questions on Ruby Talk</span><span class='tstring_end'>&quot;</span></span> ]

<span class='comment'># Produce result.
</span><span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_email'>email</span></code></pre>

<p><em>Generates:</em></p>

<pre class="code ruby"><code class="ruby"><span class='const'>From</span><span class='op'>:</span>  <span class='const'>James</span> <span class='const'>Edward</span> <span class='const'>Gray</span> <span class='const'>II</span> <span class='op'>&lt;</span><span class='id identifier rubyid_james'>james</span><span class='ivar'>@grayproductions</span>.<span class='id identifier rubyid_net'>net</span><span class='op'>&gt;</span>
<span class='const'>To</span><span class='op'>:</span>  <span class='const'>Community</span> <span class='const'>Spokesman</span> <span class='op'>&lt;</span><span class='id identifier rubyid_spokesman'>spokesman</span><span class='ivar'>@ruby_community</span>.<span class='id identifier rubyid_org'>org</span><span class='op'>&gt;</span>
<span class='const'>Subject</span><span class='op'>:</span>  <span class='const'>Addressing</span> <span class='const'>Needs</span>

<span class='const'>Community</span><span class='op'>:</span>

<span class='const'>Just</span> <span class='id identifier rubyid_wanted'>wanted</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_quick'>quick</span> <span class='id identifier rubyid_note'>note</span> <span class='id identifier rubyid_assuring'>assuring</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_your'>your</span> <span class='id identifier rubyid_needs'>needs</span> <span class='id identifier rubyid_are'>are</span> <span class='id identifier rubyid_being'>being</span> <span class='id identifier rubyid_addressed'>addressed</span>.

<span class='const'>I</span> <span class='id identifier rubyid_want'>want</span> <span class='id identifier rubyid_you'>you</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_know'>know</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_my'>my</span> <span class='id identifier rubyid_team'>team</span> <span class='id identifier rubyid_will'>will</span> <span class='id identifier rubyid_keep'>keep</span> <span class='id identifier rubyid_working'>working</span> <span class='id identifier rubyid_on'>on</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_issues'>issues</span><span class='comma'>,</span> <span class='label'>especially:</span>

    <span class='op'>*</span> <span class='const'>Run</span> <span class='const'>Ruby</span> <span class='const'>Quiz</span>
    <span class='op'>*</span> <span class='const'>Document</span> <span class='const'>Modules</span>
    <span class='op'>*</span> <span class='const'>Answer</span> <span class='const'>Questions</span> <span class='id identifier rubyid_on'>on</span> <span class='const'>Ruby</span> <span class='const'>Talk</span>

<span class='const'>Thanks</span> <span class='kw'>for</span> <span class='id identifier rubyid_your'>your</span> <span class='id identifier rubyid_patience'>patience</span>.

<span class='const'>James</span> <span class='const'>Edward</span> <span class='const'>Gray</span> <span class='const'>II</span></code></pre>

<h5 id="label-Ruby+in+HTML">Ruby in HTML</h5>

<p><code>ERB</code> is often used in <code>.rhtml</code> files (HTML with embedded Ruby).  Notice the need in this example to provide a special binding when the template is run, so that the instance variables in the Product object can be resolved.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Build template data class.
</span><span class='kw'>class</span> <span class='const'>Product</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>( <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_cost'>cost</span> )
    <span class='ivar'>@code</span> <span class='op'>=</span> <span class='id identifier rubyid_code'>code</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='ivar'>@desc</span> <span class='op'>=</span> <span class='id identifier rubyid_desc'>desc</span>
    <span class='ivar'>@cost</span> <span class='op'>=</span> <span class='id identifier rubyid_cost'>cost</span>

    <span class='ivar'>@features</span> <span class='op'>=</span> [ ]
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_add_feature'>add_feature</span>( <span class='id identifier rubyid_feature'>feature</span> )
    <span class='ivar'>@features</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_feature'>feature</span>
  <span class='kw'>end</span>

  <span class='comment'># Support templating of member data.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_get_binding'>get_binding</span>
    <span class='id identifier rubyid_binding'>binding</span>
  <span class='kw'>end</span>

  <span class='comment'># ...
</span><span class='kw'>end</span>

<span class='comment'># Create template.
</span><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>
  &lt;html&gt;
    &lt;head&gt;&lt;title&gt;Ruby Toys -- &lt;%= @name %&gt;&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;

      &lt;h1&gt;&lt;%= @name %&gt; (&lt;%= @code %&gt;)&lt;/h1&gt;
      &lt;p&gt;&lt;%= @desc %&gt;&lt;/p&gt;

      &lt;ul&gt;
        &lt;% @features.each do |f| %&gt;
          &lt;li&gt;&lt;b&gt;&lt;%= f %&gt;&lt;/b&gt;&lt;/li&gt;
        &lt;% end %&gt;
      &lt;/ul&gt;

      &lt;p&gt;
        &lt;% if @cost &lt; 10 %&gt;
          &lt;b&gt;Only &lt;%= @cost %&gt;!!!&lt;/b&gt;
        &lt;% else %&gt;
           Call for a price, today!
        &lt;% end %&gt;
      &lt;/p&gt;

    &lt;/body&gt;
  &lt;/html&gt;
</span><span class='tstring_end'>}</span></span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^  </span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)

<span class='id identifier rubyid_rhtml'>rhtml</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_template'>template</span>)

<span class='comment'># Set up template data.
</span><span class='id identifier rubyid_toy'>toy</span> <span class='op'>=</span> <span class='const'>Product</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TZ-1002</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rubysapien</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Geek&#39;s Best Friend!  Responds to Ruby commands...</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='float'>999.95</span> )
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Listens for verbal commands in the Ruby language!</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ignores Perl, Java, and all C variants.</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Karate-Chop Action!!!</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Matz signature on left leg.</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_add_feature'>add_feature</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Gem studded eyes... Rubies, of course!</span><span class='tstring_end'>&quot;</span></span>)

<span class='comment'># Produce result.
</span><span class='id identifier rubyid_rhtml'>rhtml</span>.<span class='id identifier rubyid_run'><a href="#run-instance_method" title="ERB#run (method)">run</a></span>(<span class='id identifier rubyid_toy'>toy</span>.<span class='id identifier rubyid_get_binding'>get_binding</span>)</code></pre>

<p><em>Generates (some blank lines removed):</em></p>

<pre class="code xml"><code class="xml">&lt;html&gt;
  &lt;head&gt;&lt;title&gt;Ruby Toys -- Rubysapien&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;

    &lt;h1&gt;Rubysapien (TZ-1002)&lt;/h1&gt;
    &lt;p&gt;Geek&#39;s Best Friend!  Responds to Ruby commands...&lt;/p&gt;

    &lt;ul&gt;
        &lt;li&gt;&lt;b&gt;Listens for verbal commands in the Ruby language!&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Ignores Perl, Java, and all C variants.&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Karate-Chop Action!!!&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Matz signature on left leg.&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Gem studded eyes... Rubies, of course!&lt;/b&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;
         Call for a price, today!
    &lt;/p&gt;

  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h4 id="label-Notes">Notes</h4>

<p>There are a variety of templating solutions available in various Ruby projects. For example, RDoc, distributed with Ruby, uses its own template engine, which can be reused elsewhere.</p>

<p>Other popular engines could be found in the corresponding <a href="https://www.ruby-toolbox.com/categories/template_engines" target="_parent" title="Category">Category</a> of The Ruby Toolbox.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='NOT_GIVEN-constant' class='summary_signature priv'>NOT_GIVEN =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L356-L356'># File 'lib/erb.rb', line 356</a>    <pre class='code ruby'><span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span></pre>
  </li>
  <li>
    <span id='Revision-constant' class='summary_signature nodoc'>Revision =</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p><code>#‘</code></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L263-L263'># File 'lib/erb.rb', line 263</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$Date::                           $</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature priv'>VERSION =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb/version.rb#L3-L3'># File 'lib/erb/version.rb', line 3</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>4.0.2</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(str, safe_level = NOT_GIVEN, legacy_trim_mode = NOT_GIVEN, legacy_eoutvar = NOT_GIVEN, trim_mode: nil, eoutvar: &#39;_erbout&#39;)  &#x21d2; ERB </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a new <code>ERB</code> object with the template specified in <em>str</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#version-class_method" title=".version (class method)">.<strong>version</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns revision information for the erb.rb module.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The encoding to eval.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#filename-instance_method" title="#filename (instance method)">#<strong>filename</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>The optional <em>filename</em> argument passed to <code>Kernel.eval</code> when the <code>ERB</code> code is run.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>The optional <em>lineno</em> argument passed to <code>Kernel.eval</code> when the <code>ERB</code> code is run.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#src-instance_method" title="#src (instance method)">#<strong>src</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The Ruby code generated by <code>ERB</code>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#def_class-instance_method" title="#def_class (instance method)">#<strong>def_class</strong>(superklass = Object, methodname = &#39;result&#39;)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define unnamed class which has <em>methodname</em> as instance method, and return it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#def_method-instance_method" title="#def_method (instance method)">#<strong>def_method</strong>(mod, methodname, fname = &#39;(ERB)&#39;)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Define <em>methodname</em> as instance method of <em>mod</em> from compiled Ruby source.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#def_module-instance_method" title="#def_module (instance method)">#<strong>def_module</strong>(methodname = &#39;erb&#39;)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create unnamed module, define <em>methodname</em> as instance method of it, and return it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#location=-instance_method" title="#location= (instance method)">#<strong>location=</strong>(filename, lineno)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets optional filename and line number that will be used in <code>ERB</code> code evaluation and error reporting.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#make_compiler-instance_method" title="#make_compiler (instance method)">#<strong>make_compiler</strong>(trim_mode)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new compiler for <code>ERB</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#result-instance_method" title="#result (instance method)">#<strong>result</strong>(b = new_toplevel)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Executes the generated <code>ERB</code> code to produce a completed template, returning the results of that code.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#result_with_hash-instance_method" title="#result_with_hash (instance method)">#<strong>result_with_hash</strong>(hash)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Render a template on a new toplevel binding with local variables specified by a Hash object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(b = new_toplevel)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Generate results and print them.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_eoutvar-instance_method" title="#set_eoutvar (instance method)">#<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Can be used to set <em>eoutvar</em> as described in <a href="#new-class_method" title="ERB.new (method)">.new</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#new_toplevel-instance_method" title="#new_toplevel (instance method)">#<strong>new_toplevel</strong>(vars = nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new binding each time <strong>near</strong> TOPLEVEL_BINDING for runs that do not specify a binding.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(str, safe_level = NOT_GIVEN, legacy_trim_mode = NOT_GIVEN, legacy_eoutvar = NOT_GIVEN, trim_mode: nil, eoutvar: &#39;_erbout&#39;)  &#x21d2; <code>ERB</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a new <code>ERB</code> object with the template specified in <em>str</em>.</p>

<p>An ERB object works by building a chunk of Ruby code that will output the completed template when run.</p>

<p>If <em>trim_mode</em> is passed a String containing one or more of the following modifiers, <code>ERB</code> will adjust its code generation as listed:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>% </span><span class='tstring_end'> </span></span><span class='id identifier rubyid_enables'>enables</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_code'>code</span> <span class='id identifier rubyid_processing'>processing</span> <span class='kw'>for</span> <span class='id identifier rubyid_lines'>lines</span> <span class='id identifier rubyid_beginning'>beginning</span> <span class='id identifier rubyid_with'>with</span> <span class='op'>%</span>
<span class='op'>&lt;</span><span class='op'>&gt;</span> <span class='id identifier rubyid_omit'>omit</span> <span class='id identifier rubyid_newline'>newline</span> <span class='kw'>for</span> <span class='id identifier rubyid_lines'>lines</span> <span class='id identifier rubyid_starting'>starting</span> <span class='id identifier rubyid_with'>with</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>% </span><span class='tstring_content'>and</span><span class='tstring_end'> </span></span><span class='id identifier rubyid_ending'>ending</span> <span class='kw'>in</span> <span class='tstring'><span class='tstring_beg'>%&gt;</span><span class='tstring_content'>
</span><span class='tstring_end'>&gt;</span></span>  <span class='id identifier rubyid_omit'>omit</span> <span class='id identifier rubyid_newline'>newline</span> <span class='kw'>for</span> <span class='id identifier rubyid_lines'>lines</span> <span class='id identifier rubyid_ending'>ending</span> <span class='kw'>in</span> <span class='tstring'><span class='tstring_beg'>%&gt;</span><span class='tstring_content'>
-  omit blank lines ending in -%</span><span class='tstring_end'>&gt;</span></span></code></pre>

<p><em>eoutvar</em> can be used to set the name of the variable <code>ERB</code> will build up its output in.  This is useful when you need to run multiple <code>ERB</code> templates through the same binding and/or when you want to control where output ends up.  Pass the name of the variable to be used inside a String.</p>

<h4 id="label-Example">Example</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># build data class
</span><span class='kw'>class</span> <span class='const'>Listings</span>
  <span class='const'>PRODUCT</span> <span class='op'>=</span> { <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Chicken Fried Steak</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='symbeg'>:</span><span class='id identifier rubyid_desc'>desc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A well messages pattie, breaded and fried.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='symbeg'>:</span><span class='id identifier rubyid_cost'>cost</span> <span class='op'>=&gt;</span> <span class='float'>9.95</span> }

  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_product'>product</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_price'>price</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>( <span class='id identifier rubyid_product'>product</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_price'>price</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> )
    <span class='ivar'>@product</span> <span class='op'>=</span> <span class='id identifier rubyid_product'>product</span>
    <span class='ivar'>@price</span> <span class='op'>=</span> <span class='id identifier rubyid_price'>price</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_build'>build</span>
    <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_binding'>binding</span>
    <span class='comment'># create and run templates, filling member data variables
</span>    <span class='const'>ERB</span>.<span class='id identifier rubyid_new'>new</span>(<span class='heredoc_beg'>&lt;&lt;-&#39;END_PRODUCT&#39;</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>eoutvar:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@product</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='id identifier rubyid_b'>b</span>
<span class='tstring_content'>      &lt;%= PRODUCT[:name] %&gt;
      &lt;%= PRODUCT[:desc] %&gt;
</span><span class='heredoc_end'>    END_PRODUCT
</span>    <span class='const'>ERB</span>.<span class='id identifier rubyid_new'>new</span>(<span class='heredoc_beg'>&lt;&lt;-&#39;END_PRICE&#39;</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>eoutvar:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@price</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span> <span class='id identifier rubyid_b'>b</span>
<span class='tstring_content'>      &lt;%= PRODUCT[:name] %&gt; -- &lt;%= PRODUCT[:cost] %&gt;
      &lt;%= PRODUCT[:desc] %&gt;
</span><span class='heredoc_end'>    END_PRICE
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># setup template data
</span><span class='id identifier rubyid_listings'>listings</span> <span class='op'>=</span> <span class='const'>Listings</span>.<span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_listings'>listings</span>.<span class='id identifier rubyid_build'>build</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_listings'>listings</span>.<span class='id identifier rubyid_product'>product</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_listings'>listings</span>.<span class='id identifier rubyid_price'>price</span></code></pre>

<p><em>Generates</em></p>

<pre class="code ruby"><code class="ruby"><span class='const'>Chicken</span> <span class='const'>Fried</span> <span class='const'>Steak</span>
<span class='const'>A</span> <span class='id identifier rubyid_well'>well</span> <span class='id identifier rubyid_messages'>messages</span> <span class='id identifier rubyid_pattie'>pattie</span><span class='comma'>,</span> <span class='id identifier rubyid_breaded'>breaded</span> <span class='kw'>and</span> <span class='id identifier rubyid_fried'>fried</span>.

<span class='const'>Chicken</span> <span class='const'>Fried</span> <span class='const'>Steak</span> <span class='op'>-</span><span class='op'>-</span> <span class='float'>9.95</span>
<span class='const'>A</span> <span class='id identifier rubyid_well'>well</span> <span class='id identifier rubyid_messages'>messages</span> <span class='id identifier rubyid_pattie'>pattie</span><span class='comma'>,</span> <span class='id identifier rubyid_breaded'>breaded</span> <span class='kw'>and</span> <span class='id identifier rubyid_fried'>fried</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L335-L355'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='335' data-end='355'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 335</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_safe_level'>safe_level</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span><span class='op'>=</span><span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span><span class='comma'>,</span> <span class='label'>trim_mode:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>eoutvar:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span>)
  <span class='comment'># Complex initializer for $SAFE deprecation at [Feature #14256]. Use keyword arguments to pass trim_mode or eoutvar.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_safe_level'>safe_level</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing safe_level with the 2nd argument of ERB.new is deprecated. Do not use it, and specify other arguments as keyword arguments.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing trim_mode with the 3rd argument of ERB.new is deprecated. Use keyword argument like ERB.new(str, trim_mode: ...) instead.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
    <span class='id identifier rubyid_trim_mode'>trim_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_legacy_trim_mode'>legacy_trim_mode</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span> <span class='op'>!=</span> <span class='const'><a href="#NOT_GIVEN-constant" title="ERB::NOT_GIVEN (constant)">NOT_GIVEN</a></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passing eoutvar with the 4th argument of ERB.new is deprecated. Use keyword argument like ERB.new(str, eoutvar: ...) instead.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>
    <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='id identifier rubyid_legacy_eoutvar'>legacy_eoutvar</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_compiler'>compiler</span> <span class='op'>=</span> <span class='id identifier rubyid_make_compiler'><a href="#make_compiler-instance_method" title="ERB#make_compiler (method)">make_compiler</a></span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
  <span class='id identifier rubyid_set_eoutvar'><a href="#set_eoutvar-instance_method" title="ERB#set_eoutvar (method)">set_eoutvar</a></span>(<span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span>)
  <span class='ivar'>@src</span><span class='comma'>,</span> <span class='ivar'>@encoding</span><span class='comma'>,</span> <span class='ivar'>@frozen_string</span> <span class='op'>=</span> <span class='op'>*</span><span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_compile'>compile</span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@_init</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_singleton_class'>singleton_class</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="version-class_method">
  <h3 class='signature  first'>
    .<strong>version</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns revision information for the erb.rb module.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L267-L269'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='267' data-end='269'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 267</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_version'>version</span>
  <span class='const'><a href="#VERSION-constant" title="ERB::VERSION (constant)">VERSION</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="encoding-instance_method">
  <h3 class='signature ro first'>
    #<strong>encoding</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The encoding to eval</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L370-L370'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='370' data-end='370'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 370</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filename-instance_method">
  <h3 class='signature rw'>
    #<strong>filename</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The optional <em>filename</em> argument passed to <code>Kernel.eval</code> when the <code>ERB</code> code is run</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L374-L374'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='374' data-end='374'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 374</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filename'>filename</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lineno-instance_method">
  <h3 class='signature rw'>
    #<strong>lineno</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The optional <em>lineno</em> argument passed to <code>Kernel.eval</code> when the <code>ERB</code> code is run</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L378-L378'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='378' data-end='378'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 378</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lineno'>lineno</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="src-instance_method">
  <h3 class='signature ro'>
    #<strong>src</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The Ruby code generated by <code>ERB</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L367-L367'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='367' data-end='367'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 367</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_src'>src</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="def_class-instance_method">
  <h3 class='signature  first'>
    #<strong>def_class</strong>(superklass = Object, methodname = &#39;result&#39;)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define unnamed class which has <em>methodname</em> as instance method, and return it.</p>

<p>example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MyClass_</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_arg1'>arg1</span><span class='comma'>,</span> <span class='id identifier rubyid_arg2'>arg2</span>)
    <span class='ivar'>@arg1</span> <span class='op'>=</span> <span class='id identifier rubyid_arg1'>arg1</span><span class='semicolon'>;</span>  <span class='ivar'>@arg2</span> <span class='op'>=</span> <span class='id identifier rubyid_arg2'>arg2</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example.rhtml</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># @arg1 and @arg2 are used in example.rhtml
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>))
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span> <span class='op'>=</span> <span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>
<span class='const'>MyClass</span> <span class='op'>=</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_def_class'>def_class</span>(<span class='const'>MyClass_</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render()</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_print'>print</span> <span class='const'>MyClass</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>123</span>).<span class='id identifier rubyid_render'>render</span>()</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L501-L505'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='501' data-end='505'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 501</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_class'>def_class</span>(<span class='id identifier rubyid_superklass'>superklass</span><span class='op'>=</span><span class='const'><a href="Object.html" title="Object (class)">Object</a></span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_cls'>cls</span> <span class='op'>=</span> <span class='const'>Class</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='id identifier rubyid_superklass'>superklass</span>)
  <span class='id identifier rubyid_def_method'><a href="#def_method-instance_method" title="ERB#def_method (method)">def_method</a></span>(<span class='id identifier rubyid_cls'>cls</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_cls'>cls</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="def_method-instance_method">
  <h3 class='signature '>
    #<strong>def_method</strong>(mod, methodname, fname = &#39;(ERB)&#39;)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Define <em>methodname</em> as instance method of <em>mod</em> from compiled Ruby source.</p>

<p>example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example.rhtml</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># &#39;arg1&#39; and &#39;arg2&#39; are used in example.rhtml
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>))
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_def_method'>def_method</span>(<span class='const'>MyClass</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render(arg1, arg2)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>)
<span class='id identifier rubyid_print'>print</span> <span class='const'>MyClass</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>.<span class='id identifier rubyid_render'>render</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>123</span>)</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L465-L470'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='465' data-end='470'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 465</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_method'>def_method</span>(<span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(?!#|$)</span><span class='regexp_end'>/</span></span>) {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_methodname'>methodname</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>} <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nend\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_mod'>mod</span>.<span class='id identifier rubyid_module_eval'>module_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_eval'>eval</span>(<span class='id identifier rubyid_src'><a href="#src-instance_method" title="ERB#src (method)">src</a></span><span class='comma'>,</span> <span class='id identifier rubyid_binding'>binding</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="def_module-instance_method">
  <h3 class='signature '>
    #<strong>def_module</strong>(methodname = &#39;erb&#39;)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create unnamed module, define <em>methodname</em> as instance method of it, and return it.</p>

<p>example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example.rhtml</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># &#39;arg1&#39; and &#39;arg2&#39; are used in example.rhtml
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>))
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span> <span class='op'>=</span> <span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>
<span class='const'>MyModule</span> <span class='op'>=</span> <span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_def_module'>def_module</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render(arg1, arg2)</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>class</span> <span class='const'>MyClass</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>MyModule</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L482-L486'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='482' data-end='486'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 482</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_def_module'>def_module</span>(<span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_mod'>mod</span> <span class='op'>=</span> <span class='const'>Module</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>
  <span class='id identifier rubyid_def_method'><a href="#def_method-instance_method" title="ERB#def_method (method)">def_method</a></span>(<span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_mod'>mod</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="location=-instance_method">
  <h3 class='signature '>
    #<strong>location=</strong>(filename, lineno)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets optional filename and line number that will be used in <code>ERB</code> code evaluation and error reporting. See also <a href="#filename=-instance_method" title="ERB#filename= (method)">#filename=</a> and <a href="#lineno=-instance_method" title="ERB#lineno= (method)">#lineno=</a></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ERB.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;%= some_x %&gt;</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_render'>render</span>
<span class='comment'># undefined local variable or method `some_x&#39;
</span><span class='comment'>#   from (erb):1
</span>
<span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>file.erb</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>]
<span class='comment'># All subsequent error reporting would use new location
</span><span class='id identifier rubyid_erb'>erb</span>.<span class='id identifier rubyid_render'>render</span>
<span class='comment'># undefined local variable or method `some_x&#39;
</span><span class='comment'>#   from file.erb:4</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L395-L398'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='395' data-end='398'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 395</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_location='>location=</span>((<span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span><span class='comma'>,</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span>))
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'><a href="#filename-instance_method" title="ERB#filename (method)">filename</a></span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="ERB#lineno (method)">lineno</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="make_compiler-instance_method">
  <h3 class='signature '>
    #<strong>make_compiler</strong>(trim_mode)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new compiler for <code>ERB</code>.  See <a href="ERB/Compiler.html#new-class_method" title="ERB::Compiler.new (method)">Compiler.new</a> for details</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L362-L364'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='362' data-end='364'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 362</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_make_compiler'>make_compiler</span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
  <span class='const'>ERB</span><span class='op'>::</span><span class='const'><a href="ERB/Compiler.html" title="ERB::Compiler (class)">Compiler</a></span>.<span class='id identifier rubyid_new'><a href="ERB/Compiler.html#new-class_method" title="ERB::Compiler.new (method)">new</a></span>(<span class='id identifier rubyid_trim_mode'>trim_mode</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new_toplevel-instance_method">
  <h3 class='signature priv'>
    #<strong>new_toplevel</strong>(vars = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new binding each time <strong>near</strong> TOPLEVEL_BINDING for runs that do not specify a binding.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L446-L455'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='446' data-end='455'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 446</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new_toplevel'>new_toplevel</span>(<span class='id identifier rubyid_vars'>vars</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='const'>TOPLEVEL_BINDING</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vars'>vars</span>
    <span class='id identifier rubyid_vars'>vars</span> <span class='op'>=</span> <span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_select'>select</span> {<span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_local_variable_defined?'>local_variable_defined?</span>(<span class='id identifier rubyid_v'>v</span>)}
    <span class='kw'>unless</span> <span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_empty?'>empty?</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_eval'>eval</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tap {|;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vars'>vars</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_content'>| break binding}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="result-instance_method">
  <h3 class='signature '>
    #<strong>result</strong>(b = new_toplevel)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Executes the generated <code>ERB</code> code to produce a completed template, returning the results of that code.  (See <a href="#new-class_method" title="ERB.new (method)">.new</a> for details on how this process can be affected by <em>safe_level</em>.)</p>

<p><em>b</em> accepts a Binding object which is used to set the context of code evaluation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L425-L430'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='425' data-end='430'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 425</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_result'>result</span>(<span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>)
  <span class='kw'>unless</span> <span class='ivar'>@_init</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_singleton_class'>singleton_class</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not initialized</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_eval'>eval</span>(<span class='ivar'>@src</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> (<span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(erb)</span><span class='tstring_end'>&#39;</span></span>)<span class='comma'>,</span> <span class='ivar'>@lineno</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="result_with_hash-instance_method">
  <h3 class='signature '>
    #<strong>result_with_hash</strong>(hash)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Render a template on a new toplevel binding with local variables specified by a Hash object.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L434-L440'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='434' data-end='440'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 434</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_result_with_hash'>result_with_hash</span>(<span class='id identifier rubyid_hash'>hash</span>)
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>(<span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_keys'>keys</span>)
  <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_local_variable_set'>local_variable_set</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_b'>b</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run-instance_method">
  <h3 class='signature '>
    #<strong>run</strong>(b = new_toplevel)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Generate results and print them. (see <a href="#result-instance_method" title="ERB#result (method)">#result</a>)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L413-L415'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='413' data-end='415'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 413</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>(<span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'><a href="#new_toplevel-instance_method" title="ERB#new_toplevel (method)">new_toplevel</a></span>)
  <span class='id identifier rubyid_print'>print</span> <span class='kw'>self</span>.<span class='id identifier rubyid_result'><a href="#result-instance_method" title="ERB#result (method)">result</a></span>(<span class='id identifier rubyid_b'>b</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_eoutvar-instance_method">
  <h3 class='signature '>
    #<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Can be used to set <em>eoutvar</em> as described in <a href="#new-class_method" title="ERB.new (method)">.new</a>.  It’s probably easier to just use the constructor though, since calling this method requires the setup of an <code>ERB</code> <em>compiler</em> object.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/lib/erb.rb#L405-L410'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='405' data-end='410'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/erb.rb', line 405</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_eoutvar'>set_eoutvar</span>(<span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_put_cmd'>put_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_insert_cmd'>insert_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;&lt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_pre_cmd'>pre_cmd</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'> = +&#39;&#39;</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_compiler'>compiler</span>.<span class='id identifier rubyid_post_cmd'>post_cmd</span> <span class='op'>=</span> [<span class='id identifier rubyid_eoutvar'>eoutvar</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>