<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Gem::Installer &mdash; rubygems  Ruby-3.2.4 p170</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Gem::Installer",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.2.4</a> &raquo; 
      <a href='../'>rubygems</a> &raquo; 
      <a href='../_index.html#alpha_I'>Index (I)</a> &raquo; 
        <a href="../Gem.html" title="Gem (module)">Gem</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Installer&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Gem::Installer</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Installer/FakePackage.html" title="Gem::Installer::FakePackage (class)"><code>FakePackage</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="Deprecate.html" title="Gem::Deprecate (module)"><code>Deprecate</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="InstallerUninstallerUtils.html" title="Gem::InstallerUninstallerUtils (module)"><code>InstallerUninstallerUtils</code></a>,
          <a href="UserInteraction.html" title="Gem::UserInteraction (module)"><code>UserInteraction</code></a>,
          <a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)"><code>DefaultUserInteraction</code></a>,
          <a href="Text.html" title="Gem::Text (module)"><code>Text</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L29'>lib/rubygems/installer.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The installer installs the files contained in the <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> into the <code>Gem.home</code>.</p>

<p><code>Installer</code> does the work of putting files in all the right places on the filesystem including unpacking the gem into its gem dir, installing the gemspec in the specifications dir, storing the cached gem in the cache dir, and installing either wrappers or symlinks for executables.</p>

<p>The installer invokes pre and post install hooks.  Hooks can be added either through a rubygems_plugin.rb file in an installed gem or via a rubygems/defaults/#<code>RUBY_ENGINE</code>.rb or rubygems/defaults/operating_system.rb file.  See <a href="../Gem.html#pre_install-class_method" title="Gem.pre_install (method)">pre_install</a> and <a href="../Gem.html#post_install-class_method" title="Gem.post_install (method)">post_install</a> for details.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='ENV_PATHS-constant' class='summary_signature'>ENV_PATHS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Paths where env(1) might live.  Some systems are broken and have it in /bin</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L36-L36'># File 'lib/rubygems/installer.rb', line 36</a>    <pre class='code ruby'><span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>/usr/bin/env</span><span class='words_sep'> </span><span class='tstring_content'>/bin/env</span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='ExtensionBuildError-constant' class='summary_signature nodoc'>ExtensionBuildError =</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Deprecated in favor of <a href="Ext/BuildError.html" title="Gem::Ext::BuildError (class)"><code>Ext::BuildError</code></a></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L41-L41'># File 'lib/rubygems/installer.rb', line 41</a>    <pre class='code ruby'><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Ext.html" title="Gem::Ext (module)">Ext</a></span><span class='op'>::</span><span class='const'><a href="Ext/BuildError.html" title="Gem::Ext::BuildError (class)">BuildError</a></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#exec_format-class_method" title=".exec_format (class method)">.<strong>exec_format</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Defaults to use Ruby’s program prefix and suffix.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#exec_format=-class_method" title=".exec_format= (class method)">.<strong>exec_format=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Overrides the executable format.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#path_warning-class_method" title=".path_warning (class method)">.<strong>path_warning</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>True if we’ve warned about PATH not including <a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#at-class_method" title=".at (class method)">.<strong>at</strong>(path, options = {})  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Construct an installer object for the gem file located at <a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#for_spec-class_method" title=".for_spec (class method)">.<strong>for_spec</strong>(spec, options = {})  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Construct an installer object for an ephemeral gem (one where we don’t actually have a <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file, just a spec).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inherited-class_method" title=".inherited (class method)">.<strong>inherited</strong>(klass)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Changes in rubygems to lazily loading <code>rubygems/command</code> (in order to lazily load <code>optparse</code> as a side effect) affect bundler’s custom installer which uses <a href="Command.html" title="Gem::Command (class)"><code>Command</code></a> without requiring it (up until bundler 2.2.29).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(package, options = {})  &#x21d2; Installer </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs an <code>Installer</code> instance that will install the gem at <a href="#package-instance_method" title="Gem::Installer#package (method)">#package</a> which can either be a path or an instance of <a href="Package.html" title="Gem::Package (class)"><code>Package</code></a>.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Deprecate.html" title="Gem::Deprecate (module)"><code>Deprecate</code></a> - Extended</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Deprecate.html#deprecate-instance_method" title="Gem::Deprecate#deprecate (method)">deprecate</a></td>
      <td><div class='inline'><p>Simple deprecation method that deprecates <code>name</code> by wrapping it up in a dummy method.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Deprecate.html#rubygems_deprecate-instance_method" title="Gem::Deprecate#rubygems_deprecate (method)">rubygems_deprecate</a></td>
      <td><div class='inline'><p>Simple deprecation method that deprecates <code>name</code> by wrapping it up in a dummy method.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Deprecate.html#rubygems_deprecate_command-instance_method" title="Gem::Deprecate#rubygems_deprecate_command (method)">rubygems_deprecate_command</a></td>
      <td><div class='inline'><p>Deprecation method to deprecate Rubygems commands.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="Deprecate.html#skip_during-instance_method" title="Gem::Deprecate#skip_during (method)">skip_during</a></td>
      <td><div class='inline'><p>Temporarily turn off warnings.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#bin_dir-instance_method" title="#bin_dir (instance method)">#<strong>bin_dir</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The directory a gem’s executables will be installed into.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#gem_home-instance_method" title="#gem_home (instance method)">#<strong>gem_home</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The gem repository the gem will be installed into.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The options passed when the <code>Installer</code> was instantiated.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#package-instance_method" title="#package (instance method)">#<strong>package</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The gem package instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#load_relative_enabled%3F-instance_method" title="#load_relative_enabled? (instance method)">#<strong>load_relative_enabled?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#build_root-instance_method" title="#build_root (instance method)">#<strong>build_root</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)"><code>DefaultUserInteraction</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="DefaultUserInteraction.html#ui-instance_method" title="Gem::DefaultUserInteraction#ui (method)">#ui</a></td>
      <td><div class='inline'><p>See <a href="DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">DefaultUserInteraction.ui</a></p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="DefaultUserInteraction.html#ui=-instance_method" title="Gem::DefaultUserInteraction#ui= (method)">#ui=</a></td>
      <td><div class='inline'><p>See <a href="DefaultUserInteraction.html#ui=-class_method" title="Gem::DefaultUserInteraction.ui= (method)">DefaultUserInteraction.ui=</a></p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#app_script_text-instance_method" title="#app_script_text (instance method)">#<strong>app_script_text</strong>(bin_file_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the text for an application file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#build_extensions-instance_method" title="#build_extensions (instance method)">#<strong>build_extensions</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Builds extensions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_spec_file-instance_method" title="#default_spec_file (instance method)">#<strong>default_spec_file</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The location of the default spec file for default gems.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dir-instance_method" title="#dir (instance method)">#<strong>dir</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the target directory where the gem is to be installed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ensure_dependency-instance_method" title="#ensure_dependency (instance method)">#<strong>ensure_dependency</strong>(spec, dependency)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Ensure that the dependency is satisfied by the current installation of gem.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ensure_loadable_spec-instance_method" title="#ensure_loadable_spec (instance method)">#<strong>ensure_loadable_spec</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Ensures the <a href="Specification.html" title="Gem::Specification (class)"><code>Specification</code></a> written out for this gem is loadable upon installation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#explicit_version_requirement-instance_method" title="#explicit_version_requirement (instance method)">#<strong>explicit_version_requirement</strong>(name)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#extract_bin-instance_method" title="#extract_bin (instance method)">#<strong>extract_bin</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Extracts only the bin/ files from the gem into the gem directory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#extract_files-instance_method" title="#extract_files (instance method)">#<strong>extract_files</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads the file index and extracts each file into the gem directory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#formatted_program_filename-instance_method" title="#formatted_program_filename (instance method)">#<strong>formatted_program_filename</strong>(filename)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Prefix and suffix the program filename the same as ruby.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gem-instance_method" title="#gem (instance method)">#<strong>gem</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Filename of the gem being installed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gem_dir-instance_method" title="#gem_dir (instance method)">#<strong>gem_dir</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Lazy accessor for the spec’s gem directory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gemdeps_load-instance_method" title="#gemdeps_load (instance method)">#<strong>gemdeps_load</strong>(name)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#generate_bin_script-instance_method" title="#generate_bin_script (instance method)">#<strong>generate_bin_script</strong>(filename, bindir)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates the scripts to run the applications in the gem.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#generate_bin_symlink-instance_method" title="#generate_bin_symlink (instance method)">#<strong>generate_bin_symlink</strong>(filename, bindir)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates the symlinks to run the applications in the gem.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#generate_windows_script-instance_method" title="#generate_windows_script (instance method)">#<strong>generate_windows_script</strong>(filename, bindir)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates windows <code>.bat</code> files for easy running of commands.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#install-instance_method" title="#install (instance method)">#<strong>install</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Installs the gem and returns a loaded <a href="Specification.html" title="Gem::Specification (class)"><code>Specification</code></a> for the installed gem.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#installation_satisfies_dependency%3F-instance_method" title="#installation_satisfies_dependency? (instance method)">#<strong>installation_satisfies_dependency?</strong>(dependency)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>True if the gems in the system satisfy <code>dependency</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#installed_specs-instance_method" title="#installed_specs (instance method)">#<strong>installed_specs</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return an Array of Specifications contained within the gem_home we’ll be installing into.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pre_install_checks-instance_method" title="#pre_install_checks (instance method)">#<strong>pre_install_checks</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Performs various checks before installing the gem such as the install repository is writable and its directories exist, required Ruby and rubygems versions are met and that dependencies are installed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#shebang-instance_method" title="#shebang (instance method)">#<strong>shebang</strong>(bin_file_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Generates a <code>#!</code> line for <code>bin_file_name</code>‘s wrapper copying arguments if necessary.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#spec-instance_method" title="#spec (instance method)">#<strong>spec</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Lazy accessor for the installer’s spec.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#spec_file-instance_method" title="#spec_file (instance method)">#<strong>spec_file</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The location of the spec file that is installed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unpack-instance_method" title="#unpack (instance method)">#<strong>unpack</strong>(directory)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Unpacks the gem into the given directory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#verify_spec-instance_method" title="#verify_spec (instance method)">#<strong>verify_spec</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#windows_stub_script-instance_method" title="#windows_stub_script (instance method)">#<strong>windows_stub_script</strong>(bindir, bin_file_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>return the stub script text used to launch the true Ruby script.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_build_info_file-instance_method" title="#write_build_info_file (instance method)">#<strong>write_build_info_file</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the file containing the arguments for building this gem’s extensions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_cache_file-instance_method" title="#write_cache_file (instance method)">#<strong>write_cache_file</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file to the cache directory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_default_spec-instance_method" title="#write_default_spec (instance method)">#<strong>write_default_spec</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the full <code>.gemspec</code> specification (in Ruby) to the gem home’s specifications/default directory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_spec-instance_method" title="#write_spec (instance method)">#<strong>write_spec</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the <code>.gemspec</code> specification (in Ruby) to the gem home’s specifications directory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#bash_prolog_script-instance_method" title="#bash_prolog_script (instance method)">#<strong>bash_prolog_script</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_args-instance_method" title="#build_args (instance method)">#<strong>build_args</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#load_plugin-instance_method" title="#load_plugin (instance method)">#<strong>load_plugin</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#rb_config-instance_method" title="#rb_config (instance method)">#<strong>rb_config</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ruby_install_name-instance_method" title="#ruby_install_name (instance method)">#<strong>ruby_install_name</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#check_executable_overwrite-instance_method" title="#check_executable_overwrite (instance method)">#<strong>check_executable_overwrite</strong>(filename)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks if <code>filename</code> exists in <tt>@bin_dir</tt>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#check_that_user_bin_dir_is_in_path-instance_method" title="#check_that_user_bin_dir_is_in_path (instance method)">#<strong>check_that_user_bin_dir_is_in_path</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ensure_dependencies_met-instance_method" title="#ensure_dependencies_met (instance method)">#<strong>ensure_dependencies_met</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ensure_writable_dir-instance_method" title="#ensure_writable_dir (instance method)">#<strong>ensure_writable_dir</strong>(dir)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#generate_bin-instance_method" title="#generate_bin (instance method)">#<strong>generate_bin</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#generate_plugins-instance_method" title="#generate_plugins (instance method)">#<strong>generate_plugins</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#process_options-instance_method" title="#process_options (instance method)">#<strong>process_options</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#run_post_build_hooks-instance_method" title="#run_post_build_hooks (instance method)">#<strong>run_post_build_hooks</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#run_post_install_hooks-instance_method" title="#run_post_install_hooks (instance method)">#<strong>run_post_install_hooks</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#run_pre_install_hooks-instance_method" title="#run_pre_install_hooks (instance method)">#<strong>run_pre_install_hooks</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#verify_gem_home-instance_method" title="#verify_gem_home (instance method)">#<strong>verify_gem_home</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="InstallerUninstallerUtils.html" title="Gem::InstallerUninstallerUtils (module)"><code>InstallerUninstallerUtils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="InstallerUninstallerUtils.html#regenerate_plugins_for-instance_method" title="Gem::InstallerUninstallerUtils#regenerate_plugins_for (method)">#regenerate_plugins_for</a>,
        <a class='i_m ' href="InstallerUninstallerUtils.html#remove_plugins_for-instance_method" title="Gem::InstallerUninstallerUtils#remove_plugins_for (method)">#remove_plugins_for</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="UserInteraction.html" title="Gem::UserInteraction (module)"><code>UserInteraction</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#alert-instance_method" title="Gem::UserInteraction#alert (method)">#alert</a></td>
      <td><div class='inline'><p>Displays an alert <code>statement</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#alert_error-instance_method" title="Gem::UserInteraction#alert_error (method)">#alert_error</a></td>
      <td><div class='inline'><p>Displays an error <code>statement</code> to the error output location.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#alert_warning-instance_method" title="Gem::UserInteraction#alert_warning (method)">#alert_warning</a></td>
      <td><div class='inline'><p>Displays a warning <code>statement</code> to the warning output location.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#ask-instance_method" title="Gem::UserInteraction#ask (method)">#ask</a></td>
      <td><div class='inline'><p>Asks a <code>question</code> and returns the answer.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#ask_for_password-instance_method" title="Gem::UserInteraction#ask_for_password (method)">#ask_for_password</a></td>
      <td><div class='inline'><p>Asks for a password with a <code>prompt</code></p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#ask_yes_no-instance_method" title="Gem::UserInteraction#ask_yes_no (method)">#ask_yes_no</a></td>
      <td><div class='inline'><p>Asks a yes or no <code>question</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#choose_from_list-instance_method" title="Gem::UserInteraction#choose_from_list (method)">#choose_from_list</a></td>
      <td><div class='inline'><p>Asks the user to answer <code>question</code> with an answer from the given <code>list</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#say-instance_method" title="Gem::UserInteraction#say (method)">#say</a></td>
      <td><div class='inline'><p>Displays the given <code>statement</code> on the standard output (or equivalent).</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#terminate_interaction-instance_method" title="Gem::UserInteraction#terminate_interaction (method)">#terminate_interaction</a></td>
      <td><div class='inline'><p>Terminates the RubyGems process with the given <code>exit_code</code></p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="UserInteraction.html#verbose-instance_method" title="Gem::UserInteraction#verbose (method)">#verbose</a></td>
      <td><div class='inline'><p>Calls <code>say</code> with <code>msg</code> or the results of the block if really_verbose is true.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)"><code>DefaultUserInteraction</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DefaultUserInteraction.html#use_ui-instance_method" title="Gem::DefaultUserInteraction#use_ui (method)">#use_ui</a></td>
      <td><div class='inline'><p>See <a href="DefaultUserInteraction.html#use_ui-class_method" title="Gem::DefaultUserInteraction.use_ui (method)">DefaultUserInteraction.use_ui</a></p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Text.html" title="Gem::Text (module)"><code>Text</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Text.html#clean_text-instance_method" title="Gem::Text#clean_text (method)">#clean_text</a></td>
      <td><div class='inline'><p>Remove any non-printable characters and make the text suitable for printing.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Text.html#format_text-instance_method" title="Gem::Text#format_text (method)">#format_text</a></td>
      <td><div class='inline'><p>Wraps <code>text</code> to <code>wrap</code> characters and optionally indents by <code>indent</code> characters.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Text.html#levenshtein_distance-instance_method" title="Gem::Text#levenshtein_distance (method)">#levenshtein_distance</a></td>
      <td><div class='inline'><p>Returns a value representing the “cost” of transforming str1 into str2 Vendored version of <code>DidYouMean::Levenshtein.distance</code> from the ruby/did_you_mean gem @ 1.4.0 <a href="https://github.com/ruby/did_you_mean/blob/2ddf39b874808685965dbc47d344cf6c7651807c/lib/did_you_mean/levenshtein.rb#L7-L37">github.com/ruby/did_you_mean/blob/2ddf39b874808685965dbc47d344cf6c7651807c/lib/did_you_mean/levenshtein.rb#L7-L37</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Text.html#truncate_text-instance_method" title="Gem::Text#truncate_text (method)">#truncate_text</a>,
        <a class='i_m nodoc' href="Text.html#min3-instance_method" title="Gem::Text#min3 (method)">#min3</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(package, options = {})  &#x21d2; <code>Installer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs an <code>Installer</code> instance that will install the gem at <a href="#package-instance_method" title="Gem::Installer#package (method)">#package</a> which can either be a path or an instance of <a href="Package.html" title="Gem::Package (class)"><code>Package</code></a>.  <a href="#options-instance_method" title="Gem::Installer#options (method)">#options</a> is a Hash with the following keys:</p>
<dl class="rdoc-list note-list"><dt>:bin_dir
<dd>
<p>Where to put a bin wrapper if needed.</p>
</dd><dt>:development
<dd>
<p>Whether or not development dependencies should be installed.</p>
</dd><dt>:env_shebang
<dd>
<p>Use /usr/bin/env in bin wrappers.</p>
</dd><dt>:force
<dd>
<p>Overrides all version checks and security policy checks, except for a signed-gems-only policy.</p>
</dd><dt>:format_executable
<dd>
<p>Format the executable the same as the Ruby executable. If your Ruby is ruby18, foo_exec will be installed as foo_exec18.</p>
</dd><dt>:ignore_dependencies
<dd>
<p>Don’t raise if a dependency is missing.</p>
</dd><dt>:install_dir
<dd>
<p>The directory to install the gem into.</p>
</dd><dt>:security_policy
<dd>
<p>Use the specified security policy.  See <a href="Security.html" title="Gem::Security (module)"><code>Security</code></a></p>
</dd><dt>:user_install
<dd>
<p>Indicate that the gem should be unpacked into the users personal gem directory.</p>
</dd><dt>:only_install_dir
<dd>
<p>Only validate dependencies against what is in the install_dir</p>
</dd><dt>:wrappers
<dd>
<p>Install wrappers if true, symlinks if false.</p>
</dd><dt>:build_args
<dd>
<p>An Array of arguments to pass to the extension builder process. If not set, then Gem::Command.build_args is used</p>
</dd><dt>:post_install_message
<dd>
<p>Print gem post install message if true</p>
</dd></dl>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L180-L198'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='180' data-end='198'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 180</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_package'><a href="#package-instance_method" title="Gem::Installer#package (method)">package</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span><span class='op'>=</span>{})
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fileutils</span><span class='tstring_end'>&quot;</span></span>

  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>
  <span class='ivar'>@package</span> <span class='op'>=</span> <span class='id identifier rubyid_package'><a href="#package-instance_method" title="Gem::Installer#package (method)">package</a></span>

  <span class='id identifier rubyid_process_options'><a href="#process_options-instance_method" title="Gem::Installer#process_options (method)">process_options</a></span>

  <span class='ivar'>@package</span>.<span class='id identifier rubyid_dir_mode'>dir_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dir_mode'>dir_mode</span>]
  <span class='ivar'>@package</span>.<span class='id identifier rubyid_prog_mode'>prog_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prog_mode'>prog_mode</span>]
  <span class='ivar'>@package</span>.<span class='id identifier rubyid_data_mode'>data_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_data_mode'>data_mode</span>]

  <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_user_install'>user_install</span>]
    <span class='ivar'>@gem_home</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_user_dir'><a href="../Gem.html#user_dir-class_method" title="Gem.user_dir (method)">user_dir</a></span>
    <span class='ivar'>@bin_dir</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_bin_dir'><a href="#bin_dir-instance_method" title="Gem::Installer#bin_dir (method)">bin_dir</a></span>]
    <span class='ivar'>@plugins_dir</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_plugindir'><a href="../Gem.html#plugindir-class_method" title="Gem.plugindir (method)">plugindir</a></span>(<span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span>)
    <span class='id identifier rubyid_check_that_user_bin_dir_is_in_path'><a href="#check_that_user_bin_dir_is_in_path-instance_method" title="Gem::Installer#check_that_user_bin_dir_is_in_path (method)">check_that_user_bin_dir_is_in_path</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="exec_format-class_method">
  <h3 class='signature rw first'>
    .<strong>exec_format</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defaults to use Ruby’s program prefix and suffix.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L104-L106'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='104' data-end='106'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 104</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exec_format'>exec_format</span>
  <span class='ivar'>@exec_format</span> <span class='op'>||=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_default_exec_format'><a href="../Gem.html#default_exec_format-class_method" title="Gem.default_exec_format (method)">default_exec_format</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exec_format=-class_method">
  <h3 class='signature rw'>
    .<strong>exec_format=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Overrides the executable format.</p>

<p>This is a sprintf format with a “%s” which will be replaced with the executable name.  It is based off the ruby executable name’s difference from “ruby”.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L101-L101'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='101' data-end='101'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 101</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_exec_format'><a href="#exec_format-class_method" title="Gem::Installer.exec_format (method)">exec_format</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="path_warning-class_method">
  <h3 class='signature rw'>
    .<strong>path_warning</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>True if we’ve warned about PATH not including <a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">Gem.bindir</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L92-L92'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='92' data-end='92'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 92</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_path_warning'>path_warning</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="at-class_method">
  <h3 class='signature  first'>
    .<strong>at</strong>(path, options = {})  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Construct an installer object for the gem file located at <a href="../Gem.html#path-class_method" title="Gem.path (method)">Gem.path</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L112-L116'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='112' data-end='116'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 112</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_security_policy'>security_policy</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_security_policy'>security_policy</span>]
  <span class='id identifier rubyid_package'><a href="#package-instance_method" title="Gem::Installer#package (method)">package</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Package.html" title="Gem::Package (class)">Package</a></span>.<span class='id identifier rubyid_new'><a href="Package.html#new-class_method" title="Gem::Package.new (method)">new</a></span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_security_policy'>security_policy</span>
  <span class='id identifier rubyid_new'><a href="#new-class_method" title="Gem::Installer.new (method)">new</a></span> <span class='id identifier rubyid_package'><a href="#package-instance_method" title="Gem::Installer#package (method)">package</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="for_spec-class_method">
  <h3 class='signature '>
    .<strong>for_spec</strong>(spec, options = {})  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Construct an installer object for an ephemeral gem (one where we don’t actually have a <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file, just a spec)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L150-L153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='150' data-end='153'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 150</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_for_spec'>for_spec</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span> <span class='op'>=</span> {})
  <span class='comment'># FIXME: we should have a real Package class for this
</span>  <span class='id identifier rubyid_new'><a href="#new-class_method" title="Gem::Installer.new (method)">new</a></span> <span class='const'><a href="Installer/FakePackage.html" title="Gem::Installer::FakePackage (class)">FakePackage</a></span>.<span class='id identifier rubyid_new'><a href="Installer/FakePackage.html#new-class_method" title="Gem::Installer::FakePackage.new (method)">new</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inherited-class_method">
  <h3 class='signature '>
    .<strong>inherited</strong>(klass)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Changes in rubygems to lazily loading <code>rubygems/command</code> (in order to lazily load <code>optparse</code> as a side effect) affect bundler’s custom installer which uses <a href="Command.html" title="Gem::Command (class)"><code>Command</code></a> without requiring it (up until bundler 2.2.29). This hook is to compensate for that missing require.</p>

<p>TODO: Remove when rubygems no longer supports running on bundler older than 2.2.29.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L81-L87'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='81' data-end='87'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 81</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inherited'>inherited</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bundler::RubyGemsGemInstaller</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rubygems/command</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>super</span>(<span class='id identifier rubyid_klass'>klass</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="bin_dir-instance_method">
  <h3 class='signature ro first'>
    #<strong>bin_dir</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The directory a gem’s executables will be installed into</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L50-L50'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='50' data-end='50'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bin_dir'>bin_dir</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_root-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>build_root</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L52-L52'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='52' data-end='52'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 52</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_build_root'>build_root</span> <span class='comment'># :nodoc:</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gem_home-instance_method">
  <h3 class='signature ro'>
    #<strong>gem_home</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The gem repository the gem will be installed into</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L57-L57'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='57' data-end='57'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 57</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gem_home'>gem_home</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_relative_enabled?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>load_relative_enabled?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L984-L986'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='984' data-end='986'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 984</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_relative_enabled?'>load_relative_enabled?</span>
  <span class='id identifier rubyid_rb_config'><a href="#rb_config-instance_method" title="Gem::Installer#rb_config (method)">rb_config</a></span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LIBRUBY_RELATIVE</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>yes</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="options-instance_method">
  <h3 class='signature ro'>
    #<strong>options</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The options passed when the <code>Installer</code> was instantiated.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L62-L62'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='62' data-end='62'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 62</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_options'>options</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="package-instance_method">
  <h3 class='signature ro'>
    #<strong>package</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The gem package instance.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L67-L67'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='67' data-end='67'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 67</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_package'>package</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="app_script_text-instance_method">
  <h3 class='signature  first'>
    #<strong>app_script_text</strong>(bin_file_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the text for an application file.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L751-L783'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='751' data-end='783'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 751</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_app_script_text'>app_script_text</span>(<span class='id identifier rubyid_bin_file_name'>bin_file_name</span>)
  <span class='comment'># note that the `load` lines cannot be indented, as old RG versions match
</span>  <span class='comment'># against the beginning of the line
</span>  <span class='kw'>return</span> <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shebang'><a href="#shebang-instance_method" title="Gem::Installer#shebang (method)">shebang</a></span> <span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>
#
# This file was generated by RubyGems.
#
# The application &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; is installed as part of a gem, and
# this file is here to facilitate running it.
#

require &#39;rubygems&#39;
</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gemdeps_load'><a href="#gemdeps_load-instance_method" title="Gem::Installer#gemdeps_load (method)">gemdeps_load</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span>)<span class='embexpr_end'>}</span><span class='tstring_content'>
version = &quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Requirement.html" title="Gem::Requirement (class)">Requirement</a></span>.<span class='id identifier rubyid_default_prerelease'><a href="Requirement.html#default_prerelease-class_method" title="Gem::Requirement.default_prerelease (method)">default_prerelease</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot;

str = ARGV.first
if str
str = str.b[/\\A_(.*)_\\z/, 1]
if str and Gem::Version.correct?(str)
  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_explicit_version_requirement'><a href="#explicit_version_requirement-instance_method" title="Gem::Installer#explicit_version_requirement (method)">explicit_version_requirement</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span>)<span class='embexpr_end'>}</span><span class='tstring_content'>
  ARGV.shift
end
end

if Gem.respond_to?(:activate_bin_path)
load Gem.activate_bin_path(&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;, &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;, version)
else
gem </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_dump'>dump</span><span class='embexpr_end'>}</span><span class='tstring_content'>, version
load Gem.bin_path(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_dump'>dump</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bin_file_name'>bin_file_name</span>.<span class='id identifier rubyid_dump'>dump</span><span class='embexpr_end'>}</span><span class='tstring_content'>, version)
end
</span><span class='heredoc_end'>TEXT
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="bash_prolog_script-instance_method">
  <h3 class='signature priv'>
    #<strong>bash_prolog_script</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L988-L1007'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='988' data-end='1007'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 988</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_bash_prolog_script'>bash_prolog_script</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_load_relative_enabled?'><a href="#load_relative_enabled%3F-instance_method" title="Gem::Installer#load_relative_enabled? (method)">load_relative_enabled?</a></span>
    <span class='id identifier rubyid_script'>script</span> <span class='op'>=</span> <span class='op'>+</span><span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='ignored_sp'>      </span><span class='tstring_content'>bindir=&quot;${0%/*}&quot;
</span><span class='heredoc_end'>    EOS
</span>
    <span class='id identifier rubyid_script'>script</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>%Q(</span><span class='tstring_content'>exec &quot;$bindir/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_install_name'><a href="#ruby_install_name-instance_method" title="Gem::Installer#ruby_install_name (method)">ruby_install_name</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot; &quot;-x&quot; &quot;$0&quot; &quot;$@&quot;\n</span><span class='tstring_end'>)</span></span>

    <span class='heredoc_beg'>&lt;&lt;~EOS</span>
<span class='ignored_sp'>      </span><span class='tstring_content'>#!/bin/sh
</span><span class='ignored_sp'>      </span><span class='tstring_content'># -*- ruby -*-
</span><span class='ignored_sp'>      </span><span class='tstring_content'>_=_\\
</span><span class='ignored_sp'>      </span><span class='tstring_content'>=begin
</span><span class='ignored_sp'>      </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_script'>script</span>.<span class='id identifier rubyid_chomp'>chomp</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='ignored_sp'>      </span><span class='tstring_content'>=end
</span><span class='heredoc_end'>    EOS
</span>  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_args-instance_method">
  <h3 class='signature priv'>
    #<strong>build_args</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L969-L974'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='969' data-end='974'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 969</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_args'>build_args</span>
  <span class='ivar'>@build_args</span> <span class='op'>||=</span> <span class='kw'>begin</span>
                    <span class='id identifier rubyid_require_relative'>require_relative</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>command</span><span class='tstring_end'>&quot;</span></span>
                    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Command.html" title="Gem::Command (class)">Command</a></span>.<span class='id identifier rubyid_build_args'><a href="Command.html#build_args-class_method" title="Gem::Command.build_args (method)">build_args</a></span>
                  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_extensions-instance_method">
  <h3 class='signature '>
    #<strong>build_extensions</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Builds extensions.  Valid types of extensions are extconf.rb files, configure scripts and rakefiles or mkrf_conf files.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L843-L847'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='843' data-end='847'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 843</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_extensions'>build_extensions</span>
  <span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Ext.html" title="Gem::Ext (module)">Ext</a></span><span class='op'>::</span><span class='const'><a href="Ext/Builder.html" title="Gem::Ext::Builder (class)">Builder</a></span>.<span class='id identifier rubyid_new'><a href="Ext/Builder.html#new-class_method" title="Gem::Ext::Builder.new (method)">new</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_build_args'><a href="#build_args-instance_method" title="Gem::Installer#build_args (method)">build_args</a></span>

  <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_build_extensions'>build_extensions</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_executable_overwrite-instance_method">
  <h3 class='signature nodoc'>
    #<strong>check_executable_overwrite</strong>(filename)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Checks if <code>filename</code> exists in <tt>@bin_dir</tt>.</p>

<p>If <tt>@force</tt> is set <code>filename</code> is overwritten.</p>

<p>If <code>filename</code> exists and it is a RubyGems wrapper for a different gem, then the user is consulted.</p>

<p>If <code>filename</code> exists and <tt>@bin_dir</tt> is <a href="../Gem.html#default_bindir-class_method" title="Gem.default_bindir (method)">Gem.default_bindir</a> (/usr/local) the user is consulted.</p>

<p>Otherwise <code>filename</code> is overwritten.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InstallError.html" title="Gem::InstallError (class)">Gem::InstallError</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L213-L275'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='213' data-end='275'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 213</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_executable_overwrite'>check_executable_overwrite</span>(<span class='id identifier rubyid_filename'>filename</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@force</span>

  <span class='id identifier rubyid_generated_bin'>generated_bin</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='ivar'>@bin_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_formatted_program_filename'><a href="#formatted_program_filename-instance_method" title="Gem::Installer#formatted_program_filename (method)">formatted_program_filename</a></span>(<span class='id identifier rubyid_filename'>filename</span>)

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span>

  <span class='id identifier rubyid_ruby_executable'>ruby_executable</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_existing'>existing</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_gets'>gets</span>
    <span class='id identifier rubyid_shebang'><a href="#shebang-instance_method" title="Gem::Installer#shebang (method)">shebang</a></span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^#!.*ruby</span><span class='regexp_end'>/</span></span>

    <span class='kw'>if</span> <span class='id identifier rubyid_load_relative_enabled?'><a href="#load_relative_enabled%3F-instance_method" title="Gem::Installer#load_relative_enabled? (method)">load_relative_enabled?</a></span>
      <span class='kw'>until</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=~</span> <span class='id identifier rubyid_shebang'><a href="#shebang-instance_method" title="Gem::Installer#shebang (method)">shebang</a></span> <span class='kw'>do</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_gets'>gets</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=~</span> <span class='id identifier rubyid_shebang'><a href="#shebang-instance_method" title="Gem::Installer#shebang (method)">shebang</a></span>

    <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># blankline
</span>
    <span class='comment'># TODO detect a specially formatted comment instead of trying
</span>    <span class='comment'># to find a string inside Ruby code.
</span>    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_gets'>gets</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This file was generated by RubyGems</span><span class='tstring_end'>&quot;</span></span>)

    <span class='id identifier rubyid_ruby_executable'>ruby_executable</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_existing'>existing</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_read'>read</span>.<span class='id identifier rubyid_slice'>slice</span>(<span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>
        ^\s*(
          gem \s |
          load \s Gem\.bin_path\( |
          load \s Gem\.activate_bin_path\(
        )
        ([&#39;&quot;])(.*?)(\2),
      </span><span class='regexp_end'>}x</span></span><span class='comma'>,</span> <span class='int'>3</span>)
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_existing'>existing</span>

  <span class='comment'># somebody has written to RubyGems&#39; directory, overwrite, too bad
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_default_bindir'><a href="../Gem.html#default_bindir-class_method" title="Gem.default_bindir (method)">default_bindir</a></span> <span class='op'>!=</span> <span class='ivar'>@bin_dir</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_ruby_executable'>ruby_executable</span>

  <span class='id identifier rubyid_question'>question</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;s executable \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; conflicts with </span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_dup'>dup</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_ruby_executable'>ruby_executable</span>
    <span class='id identifier rubyid_question'>question</span> <span class='op'>&lt;&lt;</span> (<span class='id identifier rubyid_existing'>existing</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>an unknown executable</span><span class='tstring_end'>&quot;</span></span>)

    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_ask_yes_no'>ask_yes_no</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_question'>question</span><span class='embexpr_end'>}</span><span class='tstring_content'>\nOverwrite the executable?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_conflict'>conflict</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>installed executable from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_existing'>existing</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_question'>question</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span>

    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_ask_yes_no'>ask_yes_no</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_question'>question</span><span class='embexpr_end'>}</span><span class='tstring_content'>\nOverwrite the executable?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_conflict'>conflict</span> <span class='op'>=</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> conflicts with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_conflict'>conflict</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_that_user_bin_dir_is_in_path-instance_method">
  <h3 class='signature nodoc'>
    #<strong>check_that_user_bin_dir_is_in_path</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L689-L711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='689' data-end='711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 689</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_that_user_bin_dir_is_in_path'>check_that_user_bin_dir_is_in_path</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_path_warning'><a href="#path_warning-class_method" title="Gem::Installer.path_warning (method)">path_warning</a></span>

  <span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span> <span class='op'>=</span> <span class='ivar'>@bin_dir</span> <span class='op'>||</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>(<span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span>)
  <span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='const'>File</span><span class='op'>::</span><span class='const'>ALT_SEPARATOR</span><span class='comma'>,</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>SEPARATOR</span>) <span class='kw'>if</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>ALT_SEPARATOR</span>

  <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PATH</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='const'>File</span><span class='op'>::</span><span class='const'>ALT_SEPARATOR</span><span class='comma'>,</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>SEPARATOR</span>) <span class='kw'>if</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>ALT_SEPARATOR</span>

  <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_win_platform?'><a href="../Gem.html#win_platform%3F-class_method" title="Gem.win_platform? (method)">win_platform?</a></span>
    <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>.<span class='id identifier rubyid_downcase'>downcase</span>
    <span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span>.<span class='id identifier rubyid_downcase'>downcase</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>.<span class='id identifier rubyid_split'>split</span>(<span class='const'>File</span><span class='op'>::</span><span class='const'>PATH_SEPARATOR</span>)

  <span class='kw'>unless</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>.<span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span>
    <span class='kw'>unless</span> <span class='op'>!</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_win_platform?'><a href="../Gem.html#win_platform%3F-class_method" title="Gem.win_platform? (method)">win_platform?</a></span> <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>.<span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HOME</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~</span><span class='tstring_end'>&quot;</span></span>))
      <span class='id identifier rubyid_alert_warning'>alert_warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You don&#39;t have </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_bin_dir'>user_bin_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'> in your PATH,\n\t  gem executables will not run.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_path_warning'><a href="#path_warning-class_method" title="Gem::Installer.path_warning (method)">path_warning</a></span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_spec_file-instance_method">
  <h3 class='signature '>
    #<strong>default_spec_file</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The location of the default spec file for default gems.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L451-L453'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='451' data-end='453'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 451</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_spec_file'>default_spec_file</span>
  <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dir-instance_method">
  <h3 class='signature '>
    #<strong>dir</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the target directory where the gem is to be installed. This directory is not guaranteed to be populated.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L884-L886'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='884' data-end='886'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 884</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dir'>dir</span>
  <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ensure_dependencies_met-instance_method">
  <h3 class='signature nodoc'>
    #<strong>ensure_dependencies_met</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L644-L651'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='644' data-end='651'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 644</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_dependencies_met'>ensure_dependencies_met</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_deps'>deps</span> <span class='op'>=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_runtime_dependencies'>runtime_dependencies</span>
  <span class='id identifier rubyid_deps'>deps</span> <span class='op'>|=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_development_dependencies'>development_dependencies</span> <span class='kw'>if</span> <span class='ivar'>@development</span>

  <span class='id identifier rubyid_deps'>deps</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dep_gem'>dep_gem</span><span class='op'>|</span>
    <span class='id identifier rubyid_ensure_dependency'><a href="#ensure_dependency-instance_method" title="Gem::Installer#ensure_dependency (method)">ensure_dependency</a></span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_dep_gem'>dep_gem</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ensure_dependency-instance_method">
  <h3 class='signature '>
    #<strong>ensure_dependency</strong>(spec, dependency)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Ensure that the dependency is satisfied by the current installation of gem.  If it is not an exception is raised.</p>
<dl class="rdoc-list note-list"><dt>spec       
<dd>
<p><a href="Specification.html" title="Gem::Specification (class)"><code>Specification</code></a></p>
</dd><dt>dependency 
<dd>
<p><a href="Dependency.html" title="Gem::Dependency (class)"><code>Dependency</code></a></p>
</dd></dl>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L413-L418'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='413' data-end='418'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 413</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_dependency'>ensure_dependency</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='comma'>,</span> <span class='id identifier rubyid_dependency'>dependency</span>)
  <span class='kw'>unless</span> <span class='id identifier rubyid_installation_satisfies_dependency?'><a href="#installation_satisfies_dependency%3F-instance_method" title="Gem::Installer#installation_satisfies_dependency? (method)">installation_satisfies_dependency?</a></span> <span class='id identifier rubyid_dependency'>dependency</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> requires </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dependency'>dependency</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ensure_loadable_spec-instance_method">
  <h3 class='signature '>
    #<strong>ensure_loadable_spec</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Ensures the <a href="Specification.html" title="Gem::Specification (class)"><code>Specification</code></a> written out for this gem is loadable upon installation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L632-L642'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='632' data-end='642'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 632</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_loadable_spec'>ensure_loadable_spec</span>
  <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='op'>=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_to_ruby_for_cache'>to_ruby_for_cache</span>
  <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>.<span class='id identifier rubyid_tap'>tap</span>(<span class='op'>&amp;</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Gem.html#UNTAINT-constant" title="Gem::UNTAINT (constant)">UNTAINT</a></span>)

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_eval'>eval</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='const'>SyntaxError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The specification for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> is corrupt (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ensure_writable_dir-instance_method">
  <h3 class='signature nodoc'>
    #<strong>ensure_writable_dir</strong>(dir)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="FilePermissionError.html" title="Gem::FilePermissionError (class)">Gem::FilePermissionError</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L957-L965'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='957' data-end='965'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 957</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_writable_dir'>ensure_writable_dir</span>(<span class='id identifier rubyid_dir'><a href="#dir-instance_method" title="Gem::Installer#dir (method)">dir</a></span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>begin</span>
    <span class='const'>Dir</span>.<span class='id identifier rubyid_mkdir'>mkdir</span> <span class='id identifier rubyid_dir'><a href="#dir-instance_method" title="Gem::Installer#dir (method)">dir</a></span><span class='comma'>,</span> <span class='op'>*</span>[<span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dir_mode'>dir_mode</span>] <span class='op'>&amp;&amp;</span> <span class='int'>0755</span>].<span class='id identifier rubyid_compact'>compact</span>
  <span class='kw'>rescue</span> <span class='const'>SystemCallError</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_directory?'>directory?</span> <span class='id identifier rubyid_dir'><a href="#dir-instance_method" title="Gem::Installer#dir (method)">dir</a></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="FilePermissionError.html" title="Gem::FilePermissionError (class)">FilePermissionError</a></span>.<span class='id identifier rubyid_new'><a href="FilePermissionError.html#new-class_method" title="Gem::FilePermissionError.new (method)">new</a></span>(<span class='id identifier rubyid_dir'><a href="#dir-instance_method" title="Gem::Installer#dir (method)">dir</a></span>) <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_writable?'>writable?</span> <span class='id identifier rubyid_dir'><a href="#dir-instance_method" title="Gem::Installer#dir (method)">dir</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="explicit_version_requirement-instance_method">
  <h3 class='signature '>
    #<strong>explicit_version_requirement</strong>(name)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L794-L802'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='794' data-end='802'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 794</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_explicit_version_requirement'>explicit_version_requirement</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>version = str</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id identifier rubyid_code'>code</span> <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bundler</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_code'>code</span> <span class='op'>+=</span> <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='tstring_content'>
  ENV[&#39;BUNDLER_VERSION&#39;] = str
</span><span class='heredoc_end'>TEXT
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="extract_bin-instance_method">
  <h3 class='signature '>
    #<strong>extract_bin</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Extracts only the bin/ files from the gem into the gem directory. This is used by default gems to allow a gem-aware stub to function without the full gem installed.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L863-L865'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='863' data-end='865'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 863</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_bin'>extract_bin</span>
  <span class='ivar'>@package</span>.<span class='id identifier rubyid_extract_files'><a href="#extract_files-instance_method" title="Gem::Installer#extract_files (method)">extract_files</a></span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>/*</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="extract_files-instance_method">
  <h3 class='signature '>
    #<strong>extract_files</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads the file index and extracts each file into the gem directory.</p>

<p>Ensures that files can’t be installed outside the gem directory.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L854-L856'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='854' data-end='856'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 854</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_files'>extract_files</span>
  <span class='ivar'>@package</span>.<span class='id identifier rubyid_extract_files'>extract_files</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="formatted_program_filename-instance_method">
  <h3 class='signature '>
    #<strong>formatted_program_filename</strong>(filename)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Prefix and suffix the program filename the same as ruby.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L870-L876'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='870' data-end='876'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 870</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_formatted_program_filename'>formatted_program_filename</span>(<span class='id identifier rubyid_filename'>filename</span>)
  <span class='kw'>if</span> <span class='ivar'>@format_executable</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_exec_format'><a href="#exec_format-class_method" title="Gem::Installer.exec_format (method)">exec_format</a></span> <span class='op'>%</span> <span class='const'>File</span>.<span class='id identifier rubyid_basename'>basename</span>(<span class='id identifier rubyid_filename'>filename</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_filename'>filename</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gem-instance_method">
  <h3 class='signature '>
    #<strong>gem</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Filename of the gem being installed.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L891-L893'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='891' data-end='893'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 891</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gem'>gem</span>
  <span class='ivar'>@package</span>.<span class='id identifier rubyid_gem'>gem</span>.<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gem_dir-instance_method">
  <h3 class='signature '>
    #<strong>gem_dir</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Lazy accessor for the spec’s gem directory.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L280-L282'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='280' data-end='282'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 280</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span>
  <span class='ivar'>@gem_dir</span> <span class='op'>||=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gemdeps_load-instance_method">
  <h3 class='signature '>
    #<strong>gemdeps_load</strong>(name)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L785-L792'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='785' data-end='792'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 785</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gemdeps_load'>gemdeps_load</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bundler</span><span class='tstring_end'>&quot;</span></span>

  <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='tstring_content'>
Gem.use_gemdeps
</span><span class='heredoc_end'>TEXT
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_bin-instance_method">
  <h3 class='signature nodoc'>
    #<strong>generate_bin</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L488-L514'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='488' data-end='514'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 488</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_bin'>generate_bin</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_executables'>executables</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_executables'>executables</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_ensure_writable_dir'><a href="#ensure_writable_dir-instance_method" title="Gem::Installer#ensure_writable_dir (method)">ensure_writable_dir</a></span> <span class='ivar'>@bin_dir</span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_executables'>executables</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_filename'>filename</span><span class='op'>|</span>
    <span class='id identifier rubyid_filename'>filename</span>.<span class='id identifier rubyid_tap'>tap</span>(<span class='op'>&amp;</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Gem.html#UNTAINT-constant" title="Gem::UNTAINT (constant)">UNTAINT</a></span>)
    <span class='id identifier rubyid_bin_path'><a href="../Gem.html#bin_path-class_method" title="Gem.bin_path (method)">bin_path</a></span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_bin_path'><a href="../Gem.html#bin_path-class_method" title="Gem.bin_path (method)">bin_path</a></span>

    <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_stat'>stat</span>(<span class='id identifier rubyid_bin_path'><a href="../Gem.html#bin_path-class_method" title="Gem.bin_path (method)">bin_path</a></span>).<span class='id identifier rubyid_mode'>mode</span>
    <span class='id identifier rubyid_dir_mode'>dir_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prog_mode'>prog_mode</span>] <span class='op'>||</span> (<span class='id identifier rubyid_mode'>mode</span> <span class='op'>|</span> <span class='int'>0111</span>)

    <span class='kw'>unless</span> <span class='id identifier rubyid_dir_mode'>dir_mode</span> <span class='op'>==</span> <span class='id identifier rubyid_mode'>mode</span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fileutils</span><span class='tstring_end'>&quot;</span></span>
      <span class='const'>FileUtils</span>.<span class='id identifier rubyid_chmod'>chmod</span> <span class='id identifier rubyid_dir_mode'>dir_mode</span><span class='comma'>,</span> <span class='id identifier rubyid_bin_path'><a href="../Gem.html#bin_path-class_method" title="Gem.bin_path (method)">bin_path</a></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_check_executable_overwrite'><a href="#check_executable_overwrite-instance_method" title="Gem::Installer#check_executable_overwrite (method)">check_executable_overwrite</a></span> <span class='id identifier rubyid_filename'>filename</span>

    <span class='kw'>if</span> <span class='ivar'>@wrappers</span>
      <span class='id identifier rubyid_generate_bin_script'><a href="#generate_bin_script-instance_method" title="Gem::Installer#generate_bin_script (method)">generate_bin_script</a></span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='ivar'>@bin_dir</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_generate_bin_symlink'><a href="#generate_bin_symlink-instance_method" title="Gem::Installer#generate_bin_symlink (method)">generate_bin_symlink</a></span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='ivar'>@bin_dir</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_bin_script-instance_method">
  <h3 class='signature '>
    #<strong>generate_bin_script</strong>(filename, bindir)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates the scripts to run the applications in the gem.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L536-L550'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='536' data-end='550'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 536</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_bin_script'>generate_bin_script</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>)
  <span class='id identifier rubyid_bin_script_path'>bin_script_path</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_formatted_program_filename'><a href="#formatted_program_filename-instance_method" title="Gem::Installer#formatted_program_filename (method)">formatted_program_filename</a></span>(<span class='id identifier rubyid_filename'>filename</span>)

  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fileutils</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_f'>rm_f</span> <span class='id identifier rubyid_bin_script_path'>bin_script_path</span> <span class='comment'># prior install may have been --no-wrappers
</span>
  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_bin_script_path'>bin_script_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>0755</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_app_script_text'><a href="#app_script_text-instance_method" title="Gem::Installer#app_script_text (method)">app_script_text</a></span>(<span class='id identifier rubyid_filename'>filename</span>)
    <span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_chmod'>chmod</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prog_mode'>prog_mode</span>] <span class='op'>||</span> <span class='int'>0755</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_verbose'>verbose</span> <span class='id identifier rubyid_bin_script_path'>bin_script_path</span>

  <span class='id identifier rubyid_generate_windows_script'><a href="#generate_windows_script-instance_method" title="Gem::Installer#generate_windows_script (method)">generate_windows_script</a></span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_bin_symlink-instance_method">
  <h3 class='signature '>
    #<strong>generate_bin_symlink</strong>(filename, bindir)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates the symlinks to run the applications in the gem.  Moves the symlink if the gem being installed has a newer version.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L556-L573'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='556' data-end='573'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 556</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_bin_symlink'>generate_bin_symlink</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>)
  <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='id identifier rubyid_dst'>dst</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_formatted_program_filename'><a href="#formatted_program_filename-instance_method" title="Gem::Installer#formatted_program_filename (method)">formatted_program_filename</a></span>(<span class='id identifier rubyid_filename'>filename</span>)

  <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_dst'>dst</span>
    <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_symlink?'>symlink?</span> <span class='id identifier rubyid_dst'>dst</span>
      <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_readlink'>readlink</span>(<span class='id identifier rubyid_dst'>dst</span>).<span class='id identifier rubyid_split'>split</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>SEPARATOR</span>
      <span class='id identifier rubyid_cur_version'>cur_version</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Version_.html" title="Gem::Version (class)">Version</a></span>.<span class='id identifier rubyid_create'><a href="Version_.html#create-class_method" title="Gem::Version.create (method)">create</a></span>(<span class='id identifier rubyid_link'>link</span>[<span class='op'>-</span><span class='int'>3</span>].<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^.*-</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>))
      <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_version'>version</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_cur_version'>cur_version</span>
    <span class='kw'>end</span>
    <span class='const'>File</span>.<span class='id identifier rubyid_unlink'>unlink</span> <span class='id identifier rubyid_dst'>dst</span>
  <span class='kw'>end</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_symlink'>symlink</span> <span class='id identifier rubyid_src'>src</span><span class='comma'>,</span> <span class='id identifier rubyid_dst'>dst</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=&gt;</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_configuration'><a href="../Gem.html#configuration-class_method" title="Gem.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_really_verbose'>really_verbose</span>
<span class='kw'>rescue</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='const'>SystemCallError</span>
  <span class='id identifier rubyid_alert_warning'>alert_warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to use symlinks, installing wrapper</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_generate_bin_script'><a href="#generate_bin_script-instance_method" title="Gem::Installer#generate_bin_script (method)">generate_bin_script</a></span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_plugins-instance_method">
  <h3 class='signature nodoc'>
    #<strong>generate_plugins</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L516-L527'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='516' data-end='527'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 516</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_plugins'>generate_plugins</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_latest'>latest</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_latest_spec_for'><a href="Specification.html#latest_spec_for-class_method" title="Gem::Specification.latest_spec_for (method)">latest_spec_for</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_latest'>latest</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_latest'>latest</span>.<span class='id identifier rubyid_version'>version</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_version'>version</span>

  <span class='id identifier rubyid_ensure_writable_dir'><a href="#ensure_writable_dir-instance_method" title="Gem::Installer#ensure_writable_dir (method)">ensure_writable_dir</a></span> <span class='ivar'>@plugins_dir</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_plugins'>plugins</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_remove_plugins_for'>remove_plugins_for</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='comma'>,</span> <span class='ivar'>@plugins_dir</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_regenerate_plugins_for'>regenerate_plugins_for</span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='comma'>,</span> <span class='ivar'>@plugins_dir</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_windows_script-instance_method">
  <h3 class='signature '>
    #<strong>generate_windows_script</strong>(filename, bindir)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates windows <code>.bat</code> files for easy running of commands</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L476-L486'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='476' data-end='486'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 476</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_windows_script'>generate_windows_script</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>)
  <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_win_platform?'><a href="../Gem.html#win_platform%3F-class_method" title="Gem.win_platform? (method)">win_platform?</a></span>
    <span class='id identifier rubyid_script_name'>script_name</span> <span class='op'>=</span> <span class='id identifier rubyid_formatted_program_filename'><a href="#formatted_program_filename-instance_method" title="Gem::Installer#formatted_program_filename (method)">formatted_program_filename</a></span>(<span class='id identifier rubyid_filename'>filename</span>) <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.bat</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_script_path'>script_path</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='const'>File</span>.<span class='id identifier rubyid_basename'>basename</span>(<span class='id identifier rubyid_script_name'>script_name</span>)
    <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_script_path'>script_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_windows_stub_script'><a href="#windows_stub_script-instance_method" title="Gem::Installer#windows_stub_script (method)">windows_stub_script</a></span>(<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>)
    <span class='kw'>end</span>

    <span class='id identifier rubyid_verbose'>verbose</span> <span class='id identifier rubyid_script_path'>script_path</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="install-instance_method">
  <h3 class='signature '>
    #<strong>install</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Installs the gem and returns a loaded <a href="Specification.html" title="Gem::Specification (class)"><code>Specification</code></a> for the installed gem.</p>

<p>The gem will be installed with the following structure:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@gem_home</span><span class='op'>/</span>
  <span class='id identifier rubyid_cache'>cache</span><span class='op'>/</span><span class='op'>&lt;</span><span class='id identifier rubyid_gem'><a href="#gem-instance_method" title="Gem::Installer#gem (method)">gem</a></span><span class='op'>-</span><span class='id identifier rubyid_version'>version</span><span class='op'>&gt;</span>.<span class='id identifier rubyid_gem'><a href="#gem-instance_method" title="Gem::Installer#gem (method)">gem</a></span> <span class='comment'>#=&gt; a cached copy of the installed gem
</span>  <span class='id identifier rubyid_gems'>gems</span><span class='op'>/</span><span class='op'>&lt;</span><span class='id identifier rubyid_gem'><a href="#gem-instance_method" title="Gem::Installer#gem (method)">gem</a></span><span class='op'>-</span><span class='id identifier rubyid_version'>version</span><span class='op'>&gt;</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>... #=&gt; extracted files
  specifications</span><span class='regexp_end'>/</span></span><span class='op'>&lt;</span><span class='id identifier rubyid_gem'><a href="#gem-instance_method" title="Gem::Installer#gem (method)">gem</a></span><span class='op'>-</span><span class='id identifier rubyid_version'>version</span><span class='op'>&gt;</span>.<span class='id identifier rubyid_gemspec'>gemspec</span> <span class='comment'>#=&gt; the Gem::Specification</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L302-L356'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='302' data-end='356'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 302</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install'>install</span>
  <span class='id identifier rubyid_pre_install_checks'><a href="#pre_install_checks-instance_method" title="Gem::Installer#pre_install_checks (method)">pre_install_checks</a></span>

  <span class='id identifier rubyid_run_pre_install_hooks'><a href="#run_pre_install_hooks-instance_method" title="Gem::Installer#run_pre_install_hooks (method)">run_pre_install_hooks</a></span>

  <span class='comment'># Set loaded_from to ensure extension_dir is correct
</span>  <span class='kw'>if</span> <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_install_as_default'>install_as_default</span>]
    <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id identifier rubyid_default_spec_file'><a href="#default_spec_file-instance_method" title="Gem::Installer#default_spec_file (method)">default_spec_file</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id identifier rubyid_spec_file'><a href="#spec_file-instance_method" title="Gem::Installer#spec_file (method)">spec_file</a></span>
  <span class='kw'>end</span>

  <span class='comment'># Completely remove any previous gem files
</span>  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span>
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_extension_dir'>extension_dir</span>

  <span class='id identifier rubyid_dir_mode'>dir_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dir_mode'>dir_mode</span>]
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_dir_mode'>dir_mode</span> <span class='op'>&amp;&amp;</span> <span class='int'>0755</span>

  <span class='kw'>if</span> <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_install_as_default'>install_as_default</span>]
    <span class='id identifier rubyid_extract_bin'><a href="#extract_bin-instance_method" title="Gem::Installer#extract_bin (method)">extract_bin</a></span>
    <span class='id identifier rubyid_write_default_spec'><a href="#write_default_spec-instance_method" title="Gem::Installer#write_default_spec (method)">write_default_spec</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_extract_files'><a href="#extract_files-instance_method" title="Gem::Installer#extract_files (method)">extract_files</a></span>

    <span class='id identifier rubyid_build_extensions'><a href="#build_extensions-instance_method" title="Gem::Installer#build_extensions (method)">build_extensions</a></span>
    <span class='id identifier rubyid_write_build_info_file'><a href="#write_build_info_file-instance_method" title="Gem::Installer#write_build_info_file (method)">write_build_info_file</a></span>
    <span class='id identifier rubyid_run_post_build_hooks'><a href="#run_post_build_hooks-instance_method" title="Gem::Installer#run_post_build_hooks (method)">run_post_build_hooks</a></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_generate_bin'><a href="#generate_bin-instance_method" title="Gem::Installer#generate_bin (method)">generate_bin</a></span>
  <span class='id identifier rubyid_generate_plugins'><a href="#generate_plugins-instance_method" title="Gem::Installer#generate_plugins (method)">generate_plugins</a></span>

  <span class='kw'>unless</span> <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_install_as_default'>install_as_default</span>]
    <span class='id identifier rubyid_write_spec'><a href="#write_spec-instance_method" title="Gem::Installer#write_spec (method)">write_spec</a></span>
    <span class='id identifier rubyid_write_cache_file'><a href="#write_cache_file-instance_method" title="Gem::Installer#write_cache_file (method)">write_cache_file</a></span>
  <span class='kw'>end</span>

  <span class='const'>File</span>.<span class='id identifier rubyid_chmod'>chmod</span>(<span class='id identifier rubyid_dir_mode'>dir_mode</span><span class='comma'>,</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span>) <span class='kw'>if</span> <span class='id identifier rubyid_dir_mode'>dir_mode</span>

  <span class='id identifier rubyid_say'>say</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_post_install_message'>post_install_message</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_post_install_message'>post_install_message</span>] <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_post_install_message'>post_install_message</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_add_spec'><a href="Specification.html#add_spec-class_method" title="Gem::Specification.add_spec (method)">add_spec</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>)

  <span class='id identifier rubyid_load_plugin'><a href="#load_plugin-instance_method" title="Gem::Installer#load_plugin (method)">load_plugin</a></span>

  <span class='id identifier rubyid_run_post_install_hooks'><a href="#run_post_install_hooks-instance_method" title="Gem::Installer#run_post_install_hooks (method)">run_post_install_hooks</a></span>

  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>

<span class='comment'># TODO This rescue is in the wrong place. What is raising this exception?
</span><span class='comment'># move this rescue to around the code that actually might raise it.
</span><span class='kw'>rescue</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipFile</span><span class='op'>::</span><span class='const'>Error</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gzip error installing </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gem'><a href="#gem-instance_method" title="Gem::Installer#gem (method)">gem</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="installation_satisfies_dependency?-instance_method">
  <h3 class='signature '>
    #<strong>installation_satisfies_dependency?</strong>(dependency)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>True if the gems in the system satisfy <code>dependency</code>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L423-L428'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='423' data-end='428'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 423</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_installation_satisfies_dependency?'>installation_satisfies_dependency?</span>(<span class='id identifier rubyid_dependency'>dependency</span>)
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span>] <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dependency'>dependency</span>.<span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_installed_specs'><a href="#installed_specs-instance_method" title="Gem::Installer#installed_specs (method)">installed_specs</a></span>.<span class='id identifier rubyid_detect'>detect</span> {<span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_dependency'>dependency</span>.<span class='id identifier rubyid_matches_spec?'>matches_spec?</span> <span class='id identifier rubyid_s'>s</span> }
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='ivar'>@only_install_dir</span>
  <span class='op'>!</span><span class='id identifier rubyid_dependency'>dependency</span>.<span class='id identifier rubyid_matching_specs'>matching_specs</span>.<span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="installed_specs-instance_method">
  <h3 class='signature '>
    #<strong>installed_specs</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return an Array of Specifications contained within the gem_home we’ll be installing into.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L393-L404'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='393' data-end='404'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 393</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_installed_specs'>installed_specs</span>
  <span class='ivar'>@installed_specs</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_specs'>specs</span> <span class='op'>=</span> []

    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Util.html" title="Gem::Util (module)">Util</a></span>.<span class='id identifier rubyid_glob_files_in_dir'><a href="Util.html#glob_files_in_dir-class_method" title="Gem::Util.glob_files_in_dir (method)">glob_files_in_dir</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*.gemspec</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span>)).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='op'>|</span>
      <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_load'><a href="Specification.html#load-class_method" title="Gem::Specification.load (method)">load</a></span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span>.<span class='id identifier rubyid_tap'>tap</span>(<span class='op'>&amp;</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Gem.html#UNTAINT-constant" title="Gem::UNTAINT (constant)">UNTAINT</a></span>)
      <span class='id identifier rubyid_specs'>specs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_specs'>specs</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_plugin-instance_method">
  <h3 class='signature priv'>
    #<strong>load_plugin</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L1009-L1020'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1009' data-end='1020'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 1009</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_plugin'>load_plugin</span>
  <span class='id identifier rubyid_specs'>specs</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span>.<span class='id identifier rubyid_find_all_by_name'><a href="Specification.html#find_all_by_name-class_method" title="Gem::Specification.find_all_by_name (method)">find_all_by_name</a></span>(<span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span>)
  <span class='comment'># If old version already exists, this plugin isn&#39;t loaded
</span>  <span class='comment'># immediately. It&#39;s for avoiding a case that multiple versions
</span>  <span class='comment'># are loaded at the same time.
</span>  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_specs'>specs</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>

  <span class='id identifier rubyid_plugin_files'>plugin_files</span> <span class='op'>=</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_plugins'>plugins</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_plugin'>plugin</span><span class='op'>|</span>
    <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@plugins_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_plugin</span><span class='embexpr_beg'>#{</span><span class='const'>File</span>.<span class='id identifier rubyid_extname'>extname</span>(<span class='id identifier rubyid_plugin'>plugin</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_load_plugin_files'><a href="../Gem.html#load_plugin_files-class_method" title="Gem.load_plugin_files (method)">load_plugin_files</a></span>(<span class='id identifier rubyid_plugin_files'>plugin_files</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pre_install_checks-instance_method">
  <h3 class='signature '>
    #<strong>pre_install_checks</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Performs various checks before installing the gem such as the install repository is writable and its directories exist, required Ruby and rubygems versions are met and that dependencies are installed.</p>

<p><a href="Version_.html" title="Gem::Version (class)"><code>Version</code></a> and dependency checks are skipped if this install is forced.</p>

<p>The dependent check will be skipped if the install is ignoring dependencies.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L904-L924'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='904' data-end='924'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 904</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pre_install_checks'>pre_install_checks</span>
  <span class='id identifier rubyid_verify_gem_home'><a href="#verify_gem_home-instance_method" title="Gem::Installer#verify_gem_home (method)">verify_gem_home</a></span>

  <span class='comment'># The name and require_paths must be verified first, since it could contain
</span>  <span class='comment'># ruby code that would be eval&#39;ed in #ensure_loadable_spec
</span>  <span class='id identifier rubyid_verify_spec'><a href="#verify_spec-instance_method" title="Gem::Installer#verify_spec (method)">verify_spec</a></span>

  <span class='id identifier rubyid_ensure_loadable_spec'><a href="#ensure_loadable_spec-instance_method" title="Gem::Installer#ensure_loadable_spec (method)">ensure_loadable_spec</a></span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_install_as_default'>install_as_default</span>]
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ensure_default_gem_subdirectories'><a href="../Gem.html#ensure_default_gem_subdirectories-class_method" title="Gem.ensure_default_gem_subdirectories (method)">ensure_default_gem_subdirectories</a></span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span>
  <span class='kw'>else</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ensure_gem_subdirectories'><a href="../Gem.html#ensure_gem_subdirectories-class_method" title="Gem.ensure_gem_subdirectories (method)">ensure_gem_subdirectories</a></span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@force</span>

  <span class='id identifier rubyid_ensure_dependencies_met'><a href="#ensure_dependencies_met-instance_method" title="Gem::Installer#ensure_dependencies_met (method)">ensure_dependencies_met</a></span> <span class='kw'>unless</span> <span class='ivar'>@ignore_dependencies</span>

  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process_options-instance_method">
  <h3 class='signature nodoc'>
    #<strong>process_options</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L653-L687'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='653' data-end='687'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 653</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process_options'>process_options</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@options</span> <span class='op'>=</span> {
    <span class='symbeg'>:</span><span class='id identifier rubyid_bin_dir'><a href="#bin_dir-instance_method" title="Gem::Installer#bin_dir (method)">bin_dir</a></span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_env_shebang'>env_shebang</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_only_install_dir'>only_install_dir</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_post_install_message'>post_install_message</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
  }.<span class='id identifier rubyid_merge'>merge</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>

  <span class='ivar'>@env_shebang</span>         <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_env_shebang'>env_shebang</span>]
  <span class='ivar'>@force</span>               <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span>]
  <span class='ivar'>@install_dir</span>         <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_install_dir'>install_dir</span>]
  <span class='ivar'>@gem_home</span>            <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_install_dir'>install_dir</span>] <span class='op'>||</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_dir'><a href="../Gem.html#dir-class_method" title="Gem.dir (method)">dir</a></span>
  <span class='ivar'>@plugins_dir</span>         <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_plugindir'><a href="../Gem.html#plugindir-class_method" title="Gem.plugindir (method)">plugindir</a></span>(<span class='ivar'>@gem_home</span>)
  <span class='ivar'>@ignore_dependencies</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_ignore_dependencies'>ignore_dependencies</span>]
  <span class='ivar'>@format_executable</span>   <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_format_executable'>format_executable</span>]
  <span class='ivar'>@wrappers</span>            <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_wrappers'>wrappers</span>]
  <span class='ivar'>@only_install_dir</span>    <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_only_install_dir'>only_install_dir</span>]

  <span class='comment'># If the user has asked for the gem to be installed in a directory that is
</span>  <span class='comment'># the system gem directory, then use the system bin directory, else create
</span>  <span class='comment'># (or use) a new bin dir under the gem_home.
</span>  <span class='ivar'>@bin_dir</span>             <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_bin_dir'><a href="#bin_dir-instance_method" title="Gem::Installer#bin_dir (method)">bin_dir</a></span>] <span class='op'>||</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>(<span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span>)
  <span class='ivar'>@development</span>         <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span>]
  <span class='ivar'>@build_root</span>          <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_build_root'><a href="#build_root-instance_method" title="Gem::Installer#build_root (method)">build_root</a></span>]

  <span class='ivar'>@build_args</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_build_args'><a href="#build_args-instance_method" title="Gem::Installer#build_args (method)">build_args</a></span>]

  <span class='kw'>unless</span> <span class='ivar'>@build_root</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@bin_dir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@build_root</span><span class='comma'>,</span> <span class='ivar'>@bin_dir</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[a-zA-Z]:</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>))
    <span class='ivar'>@gem_home</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@build_root</span><span class='comma'>,</span> <span class='ivar'>@gem_home</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[a-zA-Z]:</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>))
    <span class='ivar'>@plugins_dir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span>(<span class='ivar'>@build_root</span><span class='comma'>,</span> <span class='ivar'>@plugins_dir</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[a-zA-Z]:</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>))
    <span class='id identifier rubyid_alert_warning'>alert_warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You build with buildroot.\n  Build root: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@build_root</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n  Bin dir: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@bin_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n  Gem home: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_home</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n  Plugins dir: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@plugins_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rb_config-instance_method">
  <h3 class='signature priv'>
    #<strong>rb_config</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L976-L978'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='976' data-end='978'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 976</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_rb_config'>rb_config</span>
  <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ruby_install_name-instance_method">
  <h3 class='signature priv'>
    #<strong>ruby_install_name</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L980-L982'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='980' data-end='982'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 980</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ruby_install_name'>ruby_install_name</span>
  <span class='id identifier rubyid_rb_config'><a href="#rb_config-instance_method" title="Gem::Installer#rb_config (method)">rb_config</a></span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby_install_name</span><span class='tstring_end'>&quot;</span></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run_post_build_hooks-instance_method">
  <h3 class='signature nodoc'>
    #<strong>run_post_build_hooks</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L369-L380'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='369' data-end='380'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 369</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run_post_build_hooks'>run_post_build_hooks</span> <span class='comment'># :nodoc:
</span>  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_build_hooks'><a href="../Gem.html#post_build_hooks-class_method" title="Gem.post_build_hooks (method)">post_build_hooks</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hook'>hook</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_hook'>hook</span>.<span class='id identifier rubyid_call'>call</span>(<span class='kw'>self</span>) <span class='op'>==</span> <span class='kw'>false</span>
      <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span>

      <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> at </span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_hook'>hook</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[ @](.*:\d+)</span><span class='regexp_end'>/</span></span>

      <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>post-build hook</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_location'>location</span><span class='embexpr_end'>}</span><span class='tstring_content'> failed for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run_post_install_hooks-instance_method">
  <h3 class='signature nodoc'>
    #<strong>run_post_install_hooks</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L382-L386'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='382' data-end='386'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 382</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run_post_install_hooks'>run_post_install_hooks</span> <span class='comment'># :nodoc:
</span>  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_post_install_hooks'><a href="../Gem.html#post_install_hooks-class_method" title="Gem.post_install_hooks (method)">post_install_hooks</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hook'>hook</span><span class='op'>|</span>
    <span class='id identifier rubyid_hook'>hook</span>.<span class='id identifier rubyid_call'>call</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run_pre_install_hooks-instance_method">
  <h3 class='signature nodoc'>
    #<strong>run_pre_install_hooks</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L358-L367'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='358' data-end='367'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 358</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run_pre_install_hooks'>run_pre_install_hooks</span> <span class='comment'># :nodoc:
</span>  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_pre_install_hooks'><a href="../Gem.html#pre_install_hooks-class_method" title="Gem.pre_install_hooks (method)">pre_install_hooks</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hook'>hook</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_hook'>hook</span>.<span class='id identifier rubyid_call'>call</span>(<span class='kw'>self</span>) <span class='op'>==</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> at </span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_hook'>hook</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[ @](.*:\d+)</span><span class='regexp_end'>/</span></span>

      <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pre-install hook</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_location'>location</span><span class='embexpr_end'>}</span><span class='tstring_content'> failed for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="shebang-instance_method">
  <h3 class='signature '>
    #<strong>shebang</strong>(bin_file_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Generates a <code>#!</code> line for <code>bin_file_name</code>‘s wrapper copying arguments if necessary.</p>

<p>If the <code>:custom_shebang</code> config is set, then it is used as a template for how to create the shebang used for to run a gem’s executables.</p>

<p>The template supports 4 expansions:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$env</span>    <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_unix'>unix</span> <span class='id identifier rubyid_env'>env</span> <span class='id identifier rubyid_utility'>utility</span>
<span class='gvar'>$ruby</span>   <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_currently'>currently</span> <span class='id identifier rubyid_running'>running</span> <span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span> <span class='id identifier rubyid_interpreter'>interpreter</span>
<span class='gvar'>$exec</span>   <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_gem'><a href="#gem-instance_method" title="Gem::Installer#gem (method)">gem</a></span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s executable
$name   the name of the gem the executable is for</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L590-L626'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='590' data-end='626'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 590</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_shebang'>shebang</span>(<span class='id identifier rubyid_bin_file_name'>bin_file_name</span>)
  <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_dir'><a href="#gem_dir-instance_method" title="Gem::Installer#gem_dir (method)">gem_dir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_bin_file_name'>bin_file_name</span>
  <span class='id identifier rubyid_first_line'>first_line</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_gets'>gets</span> } <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>if</span> <span class='id identifier rubyid_first_line'>first_line</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='tstring_end'>&quot;</span></span>)
    <span class='comment'># Preserve extra words on shebang line, like &quot;-w&quot;.  Thanks RPA.
</span>    <span class='id identifier rubyid_shebang'>shebang</span> <span class='op'>=</span> <span class='id identifier rubyid_first_line'>first_line</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A\#!.*?ruby\S*((\s\S)+)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='backref'>$1</span>
    <span class='id identifier rubyid_shebang'>shebang</span>.<span class='id identifier rubyid_strip!'>strip!</span> <span class='comment'># Avoid nasty ^M issues.
</span>  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_configuration'><a href="../Gem.html#configuration-class_method" title="Gem.configuration (method)">configuration</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_custom_shebang'>custom_shebang</span>]
    <span class='comment'># replace bin_file_name with &quot;ruby&quot; to avoid endless loops
</span>    <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_install_name'><a href="#ruby_install_name-instance_method" title="Gem::Installer#ruby_install_name (method)">ruby_install_name</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)

    <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\$(\w+)</span><span class='regexp_end'>/</span></span>) <span class='kw'>do</span>
      <span class='kw'>case</span> <span class='backref'>$1</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>env</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@env_path</span> <span class='op'>||=</span> <span class='const'><a href="#ENV_PATHS-constant" title="Gem::Installer::ENV_PATHS (constant)">ENV_PATHS</a></span>.<span class='id identifier rubyid_find'>find</span> {<span class='op'>|</span><span class='id identifier rubyid_env_path'>env_path</span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_executable?'>executable?</span> <span class='id identifier rubyid_env_path'>env_path</span> }
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&quot;</span></span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exec</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_bin_file_name'>bin_file_name</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_which'>which</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='ivar'>@env_shebang</span>
    <span class='comment'># Create a plain shebang line.
</span>    <span class='ivar'>@env_path</span> <span class='op'>||=</span> <span class='const'><a href="#ENV_PATHS-constant" title="Gem::Installer::ENV_PATHS (constant)">ENV_PATHS</a></span>.<span class='id identifier rubyid_find'>find</span> {<span class='op'>|</span><span class='id identifier rubyid_env_path'>env_path</span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_executable?'>executable?</span> <span class='id identifier rubyid_env_path'>env_path</span> }
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='ivar'>@env_path</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_install_name'><a href="#ruby_install_name-instance_method" title="Gem::Installer#ruby_install_name (method)">ruby_install_name</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bash_prolog_script'><a href="#bash_prolog_script-instance_method" title="Gem::Installer#bash_prolog_script (method)">bash_prolog_script</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="spec-instance_method">
  <h3 class='signature '>
    #<strong>spec</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Lazy accessor for the installer’s spec.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L287-L289'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='287' data-end='289'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 287</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_spec'>spec</span>
  <span class='ivar'>@package</span>.<span class='id identifier rubyid_spec'>spec</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="spec_file-instance_method">
  <h3 class='signature '>
    #<strong>spec_file</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The location of the spec file that is installed.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L443-L445'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='443' data-end='445'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 443</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_spec_file'>spec_file</span>
  <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unpack-instance_method">
  <h3 class='signature '>
    #<strong>unpack</strong>(directory)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Unpacks the gem into the given directory.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L433-L436'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='433' data-end='436'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 433</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unpack'>unpack</span>(<span class='id identifier rubyid_directory'>directory</span>)
  <span class='ivar'>@gem_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_directory'>directory</span>
  <span class='id identifier rubyid_extract_files'><a href="#extract_files-instance_method" title="Gem::Installer#extract_files (method)">extract_files</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="verify_gem_home-instance_method">
  <h3 class='signature nodoc'>
    #<strong>verify_gem_home</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="FilePermissionError.html" title="Gem::FilePermissionError (class)">Gem::FilePermissionError</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L713-L716'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='713' data-end='716'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 713</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_verify_gem_home'>verify_gem_home</span> <span class='comment'># :nodoc:
</span>  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dir_mode'>dir_mode</span>] <span class='op'>&amp;&amp;</span> <span class='int'>0755</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="FilePermissionError.html" title="Gem::FilePermissionError (class)">FilePermissionError</a></span><span class='comma'>,</span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span> <span class='kw'>unless</span> <span class='const'>File</span>.<span class='id identifier rubyid_writable?'>writable?</span>(<span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="verify_spec-instance_method">
  <h3 class='signature '>
    #<strong>verify_spec</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L718-L746'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='718' data-end='746'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 718</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_verify_spec'>verify_spec</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>=~</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span><span class='op'>::</span><span class='const'><a href="Specification.html#VALID_NAME_PATTERN-constant" title="Gem::Specification::VALID_NAME_PATTERN (constant)">VALID_NAME_PATTERN</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> has an invalid name</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_raw_require_paths'>raw_require_paths</span>.<span class='id identifier rubyid_any?'>any?</span> {<span class='op'>|</span><span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span><span class='op'>|</span> <span class='id identifier rubyid_path'><a href="../Gem.html#path-class_method" title="Gem.path (method)">path</a></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span> }
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> has an invalid require_paths</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_extensions'>extensions</span>.<span class='id identifier rubyid_any?'>any?</span> {<span class='op'>|</span><span class='id identifier rubyid_ext'>ext</span><span class='op'>|</span> <span class='id identifier rubyid_ext'>ext</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span> }
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> has an invalid extensions</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_platform'>platform</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_platform'>platform</span><span class='embexpr_end'>}</span><span class='tstring_content'> is an invalid platform</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_specification_version'>specification_version</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A\d+\z</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> has an invalid specification_version</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_dependencies'>dependencies</span>.<span class='id identifier rubyid_any?'>any?</span> {<span class='op'>|</span><span class='id identifier rubyid_dep'>dep</span><span class='op'>|</span> <span class='id identifier rubyid_dep'>dep</span>.<span class='id identifier rubyid_type'>type</span> <span class='op'>!=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_runtime'>runtime</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dep'>dep</span>.<span class='id identifier rubyid_type'>type</span> <span class='op'>!=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span> }
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> has an invalid dependencies</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_dependencies'>dependencies</span>.<span class='id identifier rubyid_any?'>any?</span> {<span class='op'>|</span><span class='id identifier rubyid_dep'>dep</span><span class='op'>|</span> <span class='id identifier rubyid_dep'>dep</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?:\R|[&lt;&gt;])</span><span class='regexp_end'>/</span></span> }
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> has an invalid dependencies</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="windows_stub_script-instance_method">
  <h3 class='signature '>
    #<strong>windows_stub_script</strong>(bindir, bin_file_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>return the stub script text used to launch the true Ruby script</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L807-L838'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='807' data-end='838'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 807</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_windows_stub_script'>windows_stub_script</span>(<span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_bin_file_name'>bin_file_name</span>)
  <span class='id identifier rubyid_rb_topdir'>rb_topdir</span> <span class='op'>=</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>TOPDIR</span> <span class='op'>||</span> <span class='const'>File</span>.<span class='id identifier rubyid_dirname'>dirname</span>(<span class='id identifier rubyid_rb_config'><a href="#rb_config-instance_method" title="Gem::Installer#rb_config (method)">rb_config</a></span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bindir</span><span class='tstring_end'>&quot;</span></span>])

  <span class='comment'># get ruby executable file name from RbConfig
</span>  <span class='id identifier rubyid_ruby_exe'>ruby_exe</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rb_config'><a href="#rb_config-instance_method" title="Gem::Installer#rb_config (method)">rb_config</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBY_INSTALL_NAME</span><span class='tstring_end'>&#39;</span></span>]<span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rb_config'><a href="#rb_config-instance_method" title="Gem::Installer#rb_config (method)">rb_config</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EXEEXT</span><span class='tstring_end'>&#39;</span></span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_ruby_exe'>ruby_exe</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby.exe</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_ruby_exe'>ruby_exe</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_ruby_exe'>ruby_exe</span>)
    <span class='comment'># stub &amp; ruby.exe within same folder.  Portable
</span>    <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='tstring_content'>@ECHO OFF
@&quot;%~dp0</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_exe'>ruby_exe</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot; &quot;%~dpn0&quot; %*
</span><span class='heredoc_end'>    TEXT
</span>  <span class='kw'>elsif</span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>.<span class='id identifier rubyid_downcase'>downcase</span>.<span class='id identifier rubyid_start_with?'>start_with?</span> <span class='id identifier rubyid_rb_topdir'>rb_topdir</span>.<span class='id identifier rubyid_downcase'>downcase</span>
    <span class='comment'># stub within ruby folder, but not standard bin.  Portable
</span>    <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pathname</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_from'>from</span> <span class='op'>=</span> <span class='const'>Pathname</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Gem::Installer.new (method)">new</a></span> <span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span>
    <span class='id identifier rubyid_to'>to</span>   <span class='op'>=</span> <span class='const'>Pathname</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Gem::Installer.new (method)">new</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rb_topdir'>rb_topdir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/bin</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_rel'>rel</span>  <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span>.<span class='id identifier rubyid_relative_path_from'>relative_path_from</span> <span class='id identifier rubyid_from'>from</span>
    <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='tstring_content'>@ECHO OFF
@&quot;%~dp0</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rel'>rel</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_exe'>ruby_exe</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot; &quot;%~dpn0&quot; %*
</span><span class='heredoc_end'>    TEXT
</span>  <span class='kw'>else</span>
    <span class='comment'># outside ruby folder, maybe -user-install or bundler.  Portable, but ruby
</span>    <span class='comment'># is dependent on PATH
</span>    <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='tstring_content'>@ECHO OFF
@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_exe'>ruby_exe</span><span class='embexpr_end'>}</span><span class='tstring_content'> &quot;%~dpn0&quot; %*
</span><span class='heredoc_end'>    TEXT
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_build_info_file-instance_method">
  <h3 class='signature '>
    #<strong>write_build_info_file</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the file containing the arguments for building this gem’s extensions.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L930-L947'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='930' data-end='947'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 930</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_build_info_file'>write_build_info_file</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_build_args'><a href="#build_args-instance_method" title="Gem::Installer#build_args (method)">build_args</a></span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_build_info_dir'>build_info_dir</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>build_info</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_dir_mode'>dir_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Gem::Installer#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dir_mode'>dir_mode</span>]
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_build_info_dir'>build_info_dir</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_dir_mode'>dir_mode</span> <span class='op'>&amp;&amp;</span> <span class='int'>0755</span>

  <span class='id identifier rubyid_build_info_file'>build_info_file</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_build_info_dir'>build_info_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.info</span><span class='tstring_end'>&quot;</span></span>

  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_build_info_file'>build_info_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_build_args'><a href="#build_args-instance_method" title="Gem::Installer#build_args (method)">build_args</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
      <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_arg'>arg</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='const'>File</span>.<span class='id identifier rubyid_chmod'>chmod</span>(<span class='id identifier rubyid_dir_mode'>dir_mode</span><span class='comma'>,</span> <span class='id identifier rubyid_build_info_dir'>build_info_dir</span>) <span class='kw'>if</span> <span class='id identifier rubyid_dir_mode'>dir_mode</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_cache_file-instance_method">
  <h3 class='signature '>
    #<strong>write_cache_file</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file to the cache directory</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L952-L955'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='952' data-end='955'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 952</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_cache_file'>write_cache_file</span>
  <span class='id identifier rubyid_cache_file'>cache_file</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'><a href="#gem_home-instance_method" title="Gem::Installer#gem_home (method)">gem_home</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cache</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_file_name'>file_name</span>
  <span class='ivar'>@package</span>.<span class='id identifier rubyid_copy_to'>copy_to</span> <span class='id identifier rubyid_cache_file'>cache_file</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_default_spec-instance_method">
  <h3 class='signature '>
    #<strong>write_default_spec</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the full <code>.gemspec</code> specification (in Ruby) to the gem home’s specifications/default directory.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L469-L471'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='469' data-end='471'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 469</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_default_spec'>write_default_spec</span>
  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_write_binary'><a href="../Gem.html#write_binary-class_method" title="Gem.write_binary (method)">write_binary</a></span>(<span class='id identifier rubyid_default_spec_file'><a href="#default_spec_file-instance_method" title="Gem::Installer#default_spec_file (method)">default_spec_file</a></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_spec-instance_method">
  <h3 class='signature '>
    #<strong>write_spec</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the <code>.gemspec</code> specification (in Ruby) to the gem home’s specifications directory.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_4/lib/rubygems/installer.rb#L459-L463'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='459' data-end='463'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 459</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_spec'>write_spec</span>
  <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_installed_by_version'>installed_by_version</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_rubygems_version'><a href="../Gem.html#rubygems_version-class_method" title="Gem.rubygems_version (method)">rubygems_version</a></span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span>.<span class='id identifier rubyid_write_binary'><a href="../Gem.html#write_binary-class_method" title="Gem.write_binary (method)">write_binary</a></span>(<span class='id identifier rubyid_spec_file'><a href="#spec_file-instance_method" title="Gem::Installer#spec_file (method)">spec_file</a></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'><a href="#spec-instance_method" title="Gem::Installer#spec (method)">spec</a></span>.<span class='id identifier rubyid_to_ruby_for_cache'>to_ruby_for_cache</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>