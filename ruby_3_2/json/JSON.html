<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: JSON &mdash; json  Ruby-3.2.10 p266</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "JSON",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.2.10</a> &raquo; 
      <a href='.'>json</a> &raquo; 
      <a href='_index.html#alpha_J'>Index (J)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>JSON&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: JSON</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="JSON/Ext.html" title="JSON::Ext (module)"><code>Ext</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="JSON/GenericObject.html" title="JSON::GenericObject (class)"><code>GenericObject</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="JSON/CircularDatastructure.html" title="JSON::CircularDatastructure (class)"><code>CircularDatastructure</code></a>,
        <a href="JSON/GeneratorError.html" title="JSON::GeneratorError (class)"><code>GeneratorError</code></a>,
        <a href="JSON/JSONError.html" title="JSON::JSONError (class)"><code>JSONError</code></a>,
        <a href="JSON/MissingUnicodeSupport.html" title="JSON::MissingUnicodeSupport (class)"><code>MissingUnicodeSupport</code></a>,
        <a href="JSON/NestingError.html" title="JSON::NestingError (class)"><code>NestingError</code></a>,
        <a href="JSON/ParserError.html" title="JSON::ParserError (class)"><code>ParserError</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json.rb#L575'>ext/json/lib/json.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/generator/generator.c#L1507'>ext/json/generator/generator.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L5'>ext/json/lib/json/common.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/ext.rb#L3'>ext/json/lib/json/ext.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/generic_object.rb#L4'>ext/json/lib/json/generic_object.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/version.rb#L2'>ext/json/lib/json/version.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/parser/parser.c#L3296'>ext/json/parser/parser.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-JavaScript+Object+Notation+-28JSON-29">JavaScript Object Notation (JSON)</h3>

<p>JSON is a lightweight data-interchange format.</p>

<p>A JSON value is one of the following:</p>
<ul><li>
<p>Double-quoted text:  <code>&quot;foo&quot;</code>.</p>
</li><li>
<p>Number:  <code>1</code>, <code>1.0</code>, <code>2.0e2</code>.</p>
</li><li>
<p>Boolean:  <code>true</code>, <code>false</code>.</p>
</li><li>
<p>Null: <code>null</code>.</p>
</li><li>
<p>Array: an ordered list of values, enclosed by square brackets:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='float'>1.0</span><span class='comma'>,</span> <span class='float'>2.0e2</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_null'>null</span>]</code></pre>
</li><li>
<p>Object: a collection of name/value pairs, enclosed by curly braces; each name is double-quoted text; the values may be any JSON values:</p>

<pre class="code ruby"><code class="ruby">{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='label_end'>&quot;:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='label_end'>&quot;:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='label_end'>&quot;:</span> <span class='float'>1.0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d</span><span class='label_end'>&quot;:</span> <span class='float'>2.0e2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='label_end'>&quot;:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>f</span><span class='label_end'>&quot;:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>g</span><span class='label_end'>&quot;:</span> <span class='id identifier rubyid_null'>null</span>}</code></pre>
</li></ul>

<p>A JSON array or object may contain nested arrays, objects, and scalars to any depth:</p>

<pre class="code ruby"><code class="ruby">{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='label_end'>&quot;:</span> {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='label_end'>&quot;:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='label_end'>&quot;:</span> <span class='int'>2</span>}<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bat</span><span class='label_end'>&quot;:</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span>]}
[{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='label_end'>&quot;:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='label_end'>&quot;:</span> <span class='int'>1</span>}<span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>]]</code></pre>

<h4 id="label-Using+Module+JSON">Using Module JSON</h4>

<p>To make module JSON available in your code, begin with:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>All examples here assume that this has been done.</p>

<h5 id="label-Parsing+JSON">Parsing JSON</h5>

<p>You can parse a String containing JSON data using either of two methods:</p>
<ul><li>
<p><code>JSON.parse(source, opts)</code></p>
</li><li>
<p><code>JSON.parse!(source, opts)</code></p>
</li></ul>

<p>where</p>
<ul><li>
<p><code>source</code> is a Ruby object.</p>
</li><li>
<p><code>opts</code> is a Hash object containing options that control both input allowed and output formatting.</p>
</li></ul>

<p>The difference between the two methods is that <a href="#parse!-class_method" title="JSON.parse! (method)">.parse!</a> omits some checks and may not be safe for some <code>source</code> data; use it only for data from trusted sources. Use the safer method <a href="#parse-class_method" title="JSON.parse (method)">.parse</a> for less trusted sources.</p>

<h6 id="label-Parsing+JSON+Arrays">Parsing JSON Arrays</h6>

<p>When <code>source</code> is a JSON array, <a href="#parse-class_method" title="JSON.parse (method)">.parse</a> by default returns a Ruby Array:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[&quot;foo&quot;, 1, 1.0, 2.0e2, true, false, null]</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; [&quot;foo&quot;, 1, 1.0, 200.0, true, false, nil]
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Array</span></code></pre>

<p>The JSON array may contain nested arrays, objects, and scalars to any depth:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[{&quot;foo&quot;: 0, &quot;bar&quot;: 1}, [&quot;baz&quot;, 2]]</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span>) <span class='comment'># =&gt; [{&quot;foo&quot;=&gt;0, &quot;bar&quot;=&gt;1}, [&quot;baz&quot;, 2]]</span></code></pre>

<h6 id="label-Parsing+JSON+Objects">Parsing JSON Objects</h6>

<p>When the source is a JSON object, <a href="#parse-class_method" title="JSON.parse (method)">.parse</a> by default returns a Ruby Hash:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;a&quot;: &quot;foo&quot;, &quot;b&quot;: 1, &quot;c&quot;: 1.0, &quot;d&quot;: 2.0e2, &quot;e&quot;: true, &quot;f&quot;: false, &quot;g&quot;: null}</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; {&quot;a&quot;=&gt;&quot;foo&quot;, &quot;b&quot;=&gt;1, &quot;c&quot;=&gt;1.0, &quot;d&quot;=&gt;200.0, &quot;e&quot;=&gt;true, &quot;f&quot;=&gt;false, &quot;g&quot;=&gt;nil}
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Hash</span></code></pre>

<p>The JSON object may contain nested arrays, objects, and scalars to any depth:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;foo&quot;: {&quot;bar&quot;: 1, &quot;baz&quot;: 2}, &quot;bat&quot;: [0, 1, 2]}</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span>) <span class='comment'># =&gt; {&quot;foo&quot;=&gt;{&quot;bar&quot;=&gt;1, &quot;baz&quot;=&gt;2}, &quot;bat&quot;=&gt;[0, 1, 2]}</span></code></pre>

<h6 id="label-Parsing+JSON+Scalars">Parsing JSON Scalars</h6>

<p>When the source is a JSON scalar (not an array or object), <a href="#parse-class_method" title="JSON.parse (method)">.parse</a> returns a Ruby scalar.</p>

<p>String:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;foo&quot;</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; &#39;foo&#39;
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; String</span></code></pre>

<p>Integer:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Integer</span></code></pre>

<p>Float:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; 1.0
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Float
</span><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.0e2</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; 200
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Float</span></code></pre>

<p>Boolean:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>true</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; TrueClass
</span><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>false</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; FalseClass</span></code></pre>

<p>Null:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>null</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; NilClass</span></code></pre>

<h6 id="label-Parsing+Options">Parsing Options</h6>

<h6 id="label-Input+Options">Input Options</h6>

<p>Option <code>max_nesting</code> (Integer) specifies the maximum nesting depth allowed; defaults to <code>100</code>; specify <code>false</code> to disable depth checking.</p>

<p>With the default, <code>false</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[0, [1, [2, [3]]]]</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; [0, [1, [2, [3]]]]</span></code></pre>

<p>Too deep:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises JSON::NestingError (nesting of 2 is too deep):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> {<span class='label'>max_nesting:</span> <span class='int'>1</span>})</code></pre>

<p>Bad value:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises TypeError (wrong argument type Symbol (expected Fixnum)):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> {<span class='label'>max_nesting:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>})</code></pre>
<hr>

<p>Option <code>allow_nan</code> (boolean) specifies whether to allow <a href="#NaN-constant" title="JSON::NaN (constant)">NaN</a>, <a href="#Infinity-constant" title="JSON::Infinity (constant)">Infinity</a>, and <a href="#MinusInfinity-constant" title="JSON::MinusInfinity (constant)">MinusInfinity</a> in <code>source</code>; defaults to <code>false</code>.</p>

<p>With the default, <code>false</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises JSON::ParserError (225: unexpected token at &#39;[NaN]&#39;):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[NaN]</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Raises JSON::ParserError (232: unexpected token at &#39;[Infinity]&#39;):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[Infinity]</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Raises JSON::ParserError (248: unexpected token at &#39;[-Infinity]&#39;):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[-Infinity]</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>Allow:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[NaN, Infinity, -Infinity]</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> {<span class='label'>allow_nan:</span> <span class='kw'>true</span>})
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; [NaN, Infinity, -Infinity]</span></code></pre>

<h6 id="label-Output+Options">Output Options</h6>

<p>Option <code>symbolize_names</code> (boolean) specifies whether returned Hash keys should be Symbols; defaults to <code>false</code> (use Strings).</p>

<p>With the default, <code>false</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;a&quot;: &quot;foo&quot;, &quot;b&quot;: 1.0, &quot;c&quot;: true, &quot;d&quot;: false, &quot;e&quot;: null}</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; {&quot;a&quot;=&gt;&quot;foo&quot;, &quot;b&quot;=&gt;1.0, &quot;c&quot;=&gt;true, &quot;d&quot;=&gt;false, &quot;e&quot;=&gt;nil}</span></code></pre>

<p>Use Symbols:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> {<span class='label'>symbolize_names:</span> <span class='kw'>true</span>})
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; {:a=&gt;&quot;foo&quot;, :b=&gt;1.0, :c=&gt;true, :d=&gt;false, :e=&gt;nil}</span></code></pre>
<hr>

<p>Option <code>object_class</code> (Class) specifies the Ruby class to be used for each JSON object; defaults to Hash.</p>

<p>With the default, Hash:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;a&quot;: &quot;foo&quot;, &quot;b&quot;: 1.0, &quot;c&quot;: true, &quot;d&quot;: false, &quot;e&quot;: null}</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Hash</span></code></pre>

<p>Use class OpenStruct:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> {<span class='label'>object_class:</span> <span class='const'><a href="OpenStruct.html" title="OpenStruct (class)">OpenStruct</a></span>})
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; #&lt;OpenStruct a=&quot;foo&quot;, b=1.0, c=true, d=false, e=nil&gt;</span></code></pre>
<hr>

<p>Option <code>array_class</code> (Class) specifies the Ruby class to be used for each JSON array; defaults to Array.</p>

<p>With the default, Array:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[&quot;foo&quot;, 1.0, true, false, null]</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Array</span></code></pre>

<p>Use class Set:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> {<span class='label'>array_class:</span> <span class='const'><a href="Set.html" title="Set (class)">Set</a></span>})
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; #&lt;Set: {&quot;foo&quot;, 1.0, true, false, nil}&gt;</span></code></pre>
<hr>

<p>Option <code>create_additions</code> (boolean) specifies whether to use JSON additions in parsing. See <a href="#module-JSON-label-JSON+Additions">JSON Additions</a>.</p>

<h5 id="label-Generating+JSON">Generating JSON</h5>

<p>To generate a Ruby String containing JSON data, use method <code>JSON.generate(source, opts)</code>, where</p>
<ul><li>
<p><code>source</code> is a Ruby object.</p>
</li><li>
<p><code>opts</code> is a Hash object containing options that control both input allowed and output formatting.</p>
</li></ul>

<h6 id="label-Generating+JSON+from+Arrays">Generating JSON from Arrays</h6>

<p>When the source is a Ruby Array, <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> returns a String containing a JSON array:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>]
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby'>ruby</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &#39;[0,&quot;s&quot;,&quot;foo&quot;]&#39;</span></code></pre>

<p>The Ruby Array array may contain nested arrays, hashes, and scalars to any depth:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> [<span class='int'>0</span><span class='comma'>,</span> [<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span>]<span class='comma'>,</span> {<span class='label'>foo:</span> <span class='int'>3</span><span class='comma'>,</span> <span class='label'>bar:</span> <span class='int'>4</span>}]
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby'>ruby</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &#39;[0,[1,2],{&quot;foo&quot;:3,&quot;bar&quot;:4}]&#39;</span></code></pre>

<h6 id="label-Generating+JSON+from+Hashes">Generating JSON from Hashes</h6>

<p>When the source is a Ruby Hash, <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> returns a String containing a JSON object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> {<span class='label'>foo:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>bar:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>baz:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bat'>bat</span>}
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby'>ruby</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &#39;{&quot;foo&quot;:0,&quot;bar&quot;:&quot;s&quot;,&quot;baz&quot;:&quot;bat&quot;}&#39;</span></code></pre>

<p>The Ruby Hash array may contain nested arrays, hashes, and scalars to any depth:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> {<span class='label'>foo:</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>]<span class='comma'>,</span> <span class='label'>bar:</span> {<span class='label'>baz:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>bat:</span> <span class='int'>3</span>}<span class='comma'>,</span> <span class='label'>bam:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bad'>bad</span>}
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby'>ruby</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &#39;{&quot;foo&quot;:[0,1],&quot;bar&quot;:{&quot;baz&quot;:2,&quot;bat&quot;:3},&quot;bam&quot;:&quot;bad&quot;}&#39;</span></code></pre>

<h6 id="label-Generating+JSON+from+Other+Objects">Generating JSON from Other Objects</h6>

<p>When the source is neither an Array nor a Hash, the generated JSON data depends on the class of the source.</p>

<p>When the source is a Ruby Integer or Float, <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> returns a String containing a JSON number:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='int'>42</span>) <span class='comment'># =&gt; &#39;42&#39;
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='float'>0.42</span>) <span class='comment'># =&gt; &#39;0.42&#39;</span></code></pre>

<p>When the source is a Ruby String, <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> returns a String containing a JSON string (with double-quotes):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A string</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &#39;&quot;A string&quot;&#39;</span></code></pre>

<p>When the source is <code>true</code>, <code>false</code> or <code>nil</code>, <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> returns a String containing the corresponding JSON token:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='kw'>true</span>) <span class='comment'># =&gt; &#39;true&#39;
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='kw'>false</span>) <span class='comment'># =&gt; &#39;false&#39;
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='kw'>nil</span>) <span class='comment'># =&gt; &#39;null&#39;</span></code></pre>

<p>When the source is none of the above, <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> returns a String containing a JSON string representation of the source:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>) <span class='comment'># =&gt; &#39;&quot;foo&quot;&#39;
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='const'><a href="Complex.html" title="Complex (class)">Complex</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span>)) <span class='comment'># =&gt; &#39;&quot;0+0i&quot;&#39;
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='const'>Dir</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>)) <span class='comment'># =&gt; &#39;&quot;#&lt;Dir&gt;&quot;&#39;</span></code></pre>

<h6 id="label-Generating+Options">Generating Options</h6>

<h6 id="label-Input+Options">Input Options</h6>

<p>Option <code>allow_nan</code> (boolean) specifies whether <a href="#NaN-constant" title="JSON::NaN (constant)">NaN</a>, <a href="#Infinity-constant" title="JSON::Infinity (constant)">Infinity</a>, and <code>-Infinity</code> may be generated; defaults to <code>false</code>.</p>

<p>With the default, <code>false</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises JSON::GeneratorError (920: NaN not allowed in JSON):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='const'>JSON</span><span class='op'>::</span><span class='const'><a href="#NaN-constant" title="JSON::NaN (constant)">NaN</a></span>)
<span class='comment'># Raises JSON::GeneratorError (917: Infinity not allowed in JSON):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='const'>JSON</span><span class='op'>::</span><span class='const'><a href="#Infinity-constant" title="JSON::Infinity (constant)">Infinity</a></span>)
<span class='comment'># Raises JSON::GeneratorError (917: -Infinity not allowed in JSON):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='const'>JSON</span><span class='op'>::</span><span class='const'><a href="#MinusInfinity-constant" title="JSON::MinusInfinity (constant)">MinusInfinity</a></span>)</code></pre>

<p>Allow:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> [<span class='const'>Float</span><span class='op'>::</span><span class='const'><a href="#NaN-constant" title="JSON::NaN (constant)">NaN</a></span><span class='comma'>,</span> <span class='const'>Float</span><span class='op'>::</span><span class='const'><a href="#Infinity-constant" title="JSON::Infinity (constant)">Infinity</a></span><span class='comma'>,</span> <span class='const'>Float</span><span class='op'>::</span><span class='const'><a href="#MinusInfinity-constant" title="JSON::MinusInfinity (constant)">MinusInfinity</a></span>]
<span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby'>ruby</span><span class='comma'>,</span> <span class='label'>allow_nan:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &#39;[NaN,Infinity,-Infinity]&#39;</span></code></pre>
<hr>

<p>Option <code>max_nesting</code> (Integer) specifies the maximum nesting depth in <code>obj</code>; defaults to <code>100</code>.</p>

<p>With the default, <code>100</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> [[[[[[<span class='int'>0</span>]]]]]]
<span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_obj'>obj</span>) <span class='comment'># =&gt; &#39;[[[[[[0]]]]]]&#39;</span></code></pre>

<p>Too deep:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises JSON::NestingError (nesting of 2 is too deep):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='label'>max_nesting:</span> <span class='int'>2</span>)</code></pre>

<h6 id="label-Output+Options">Output Options</h6>

<p>The default formatting options generate the most compact JSON data, all on one line and with no whitespace.</p>

<p>You can use these formatting options to generate JSON data in a more open format, using whitespace. See also <a href="#pretty_generate-class_method" title="JSON.pretty_generate (method)">.pretty_generate</a>.</p>
<ul><li>
<p>Option <code>array_nl</code> (String) specifies a string (usually a newline) to be inserted after each JSON array; defaults to the empty String, <code>&#39;&#39;</code>.</p>
</li><li>
<p>Option <code>object_nl</code> (String) specifies a string (usually a newline) to be inserted after each JSON object; defaults to the empty String, <code>&#39;&#39;</code>.</p>
</li><li>
<p>Option <code>indent</code> (String) specifies the string (usually spaces) to be used for indentation; defaults to the empty String, <code>&#39;&#39;</code>; defaults to the empty String, <code>&#39;&#39;</code>; has no effect unless options <code>array_nl</code> or <code>object_nl</code> specify newlines.</p>
</li><li>
<p>Option <code>space</code> (String) specifies a string (usually a space) to be inserted after the colon in each JSON object’s pair; defaults to the empty String, <code>&#39;&#39;</code>.</p>
</li><li>
<p>Option <code>space_before</code> (String) specifies a string (usually a space) to be inserted before the colon in each JSON object’s pair; defaults to the empty String, <code>&#39;&#39;</code>.</p>
</li></ul>

<p>In this example, <code>obj</code> is used first to generate the shortest JSON data (no whitespace), then again with all formatting options specified:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> {<span class='label'>foo:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_baz'>baz</span>]<span class='comma'>,</span> <span class='label'>bat:</span> {<span class='label'>bam:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>bad:</span> <span class='int'>1</span>}}
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Compact:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_json'>json</span>
<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {
  <span class='label'>array_nl:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>object_nl:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>indent:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>space_before:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>space:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>
}
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Open:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Compact</span><span class='op'>:</span>
{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='label_end'>&quot;:</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bat</span><span class='label_end'>&quot;:</span>{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bam</span><span class='label_end'>&quot;:</span><span class='int'>0</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bad</span><span class='label_end'>&quot;:</span><span class='int'>1</span>}}
<span class='const'>Open</span><span class='op'>:</span>
{
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> [
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span>
]<span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bat</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> {
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bam</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bad</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='int'>1</span>
  }
}</code></pre>

<h4 id="label-JSON+Additions">JSON Additions</h4>

<p>When you “round trip” a non-String object from Ruby to JSON and back, you have a new String, instead of the object you began with:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Range.html" title="Range (class)">Range</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>)
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &#39;0..2&quot;&#39;
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span>)
<span class='id identifier rubyid_ruby1'>ruby1</span> <span class='comment'># =&gt; &#39;0..2&#39;
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; String</span></code></pre>

<p>You can use JSON <em>additions</em> to preserve the original object. The addition is an extension of a ruby class, so that:</p>
<ul><li>
<p>JSON.generate stores more information in the JSON string.</p>
</li><li>
<p>JSON.parse, called with option <code>create_additions</code>, uses that information to create a proper Ruby object.</p>
</li></ul>

<p>This example shows a Range being generated into JSON and parsed back into Ruby, both without and with the addition for Range:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'><a href="Range.html" title="Range (class)">Range</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>)
<span class='comment'># This passage does not use the addition for Range.
</span><span class='id identifier rubyid_json0'>json0</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby'>ruby</span>)
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json0'>json0</span>)
<span class='comment'># This passage uses the addition for Range.
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/range</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_json1'>json1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby'>ruby</span>)
<span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json1'>json1</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>)
<span class='comment'># Make a nice display.
</span><span class='id identifier rubyid_display'>display</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;EOT</span>
<span class='tstring_content'>Generated JSON:
  Without addition:  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json0'>json0</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json0'>json0</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
  With addition:     </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json1'>json1</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json1'>json1</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
Parsed JSON:
  Without addition:  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby0'>ruby0</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby0'>ruby0</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
  With addition:     </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
</span><span class='heredoc_end'>EOT
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_display'>display</span></code></pre>

<p>This output shows the different results:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Generated</span> <span class='label'>JSON:</span>
  <span class='const'>Without</span> <span class='label'>addition:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0..2</span><span class='tstring_end'>&quot;</span></span> (<span class='const'>String</span>)
  <span class='const'>With</span> <span class='label'>addition:</span>     {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>json_class</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Range</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='label_end'>&quot;:</span>[<span class='int'>0</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='kw'>false</span>]} (<span class='const'>String</span>)
<span class='const'>Parsed</span> <span class='label'>JSON:</span>
  <span class='const'>Without</span> <span class='label'>addition:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0..2</span><span class='tstring_end'>&quot;</span></span> (<span class='const'>String</span>)
  <span class='const'>With</span> <span class='label'>addition:</span>     <span class='int'>0</span><span class='op'>..</span><span class='int'>2</span> (<span class='const'><a href="Range.html" title="Range (class)">Range</a></span>)</code></pre>

<p>The JSON module includes additions for certain classes. You can also craft custom additions. See <a href="#module-JSON-label-Custom+JSON+Additions">Custom JSON Additions</a>.</p>

<h5 id="label-Built-in+Additions">Built-in Additions</h5>

<p>The JSON module includes additions for certain classes. To use an addition, <code>require</code> its source:</p>
<ul><li>
<p>BigDecimal: <code>require &#39;json/add/bigdecimal&#39;</code></p>
</li><li>
<p>Complex: <code>require &#39;json/add/complex&#39;</code></p>
</li><li>
<p>Date: <code>require &#39;json/add/date&#39;</code></p>
</li><li>
<p>DateTime: <code>require &#39;json/add/date_time&#39;</code></p>
</li><li>
<p>Exception: <code>require &#39;json/add/exception&#39;</code></p>
</li><li>
<p>OpenStruct: <code>require &#39;json/add/ostruct&#39;</code></p>
</li><li>
<p>Range: <code>require &#39;json/add/range&#39;</code></p>
</li><li>
<p>Rational: <code>require &#39;json/add/rational&#39;</code></p>
</li><li>
<p>Regexp: <code>require &#39;json/add/regexp&#39;</code></p>
</li><li>
<p>Set: <code>require &#39;json/add/set&#39;</code></p>
</li><li>
<p>Struct: <code>require &#39;json/add/struct&#39;</code></p>
</li><li>
<p>Symbol: <code>require &#39;json/add/symbol&#39;</code></p>
</li><li>
<p>Time: <code>require &#39;json/add/time&#39;</code></p>
</li></ul>

<p>To reduce punctuation clutter, the examples below show the generated JSON via <code>puts</code>, rather than the usual <code>inspect</code>,</p>

<p>BigDecimal:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/bigdecimal</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="BigDecimal.html" title="BigDecimal (class)">BigDecimal</a></span>(<span class='int'>0</span>) <span class='comment'># 0.0
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;BigDecimal&quot;,&quot;b&quot;:&quot;27:0.0&quot;}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># 0.0
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; BigDecimal</span></code></pre>

<p>Complex:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/complex</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Complex.html" title="Complex (class)">Complex</a></span>(<span class='int'>1</span><span class='op'>+</span><span class='imaginary'>0i</span>) <span class='comment'># 1+0i
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Complex&quot;,&quot;r&quot;:1,&quot;i&quot;:0}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># 1+0i
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Complex</span></code></pre>

<p>Date:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/date</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_today'>today</span> <span class='comment'># 2020-05-02
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Date&quot;,&quot;y&quot;:2020,&quot;m&quot;:5,&quot;d&quot;:2,&quot;sg&quot;:2299161.0}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># 2020-05-02
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Date</span></code></pre>

<p>DateTime:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/date_time</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="DateTime.html" title="DateTime (class)">DateTime</a></span>.<span class='id identifier rubyid_now'>now</span> <span class='comment'># 2020-05-02T10:38:13-05:00
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;DateTime&quot;,&quot;y&quot;:2020,&quot;m&quot;:5,&quot;d&quot;:2,&quot;H&quot;:10,&quot;M&quot;:38,&quot;S&quot;:13,&quot;of&quot;:&quot;-5/24&quot;,&quot;sg&quot;:2299161.0}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># 2020-05-02T10:38:13-05:00
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># DateTime</span></code></pre>

<p>Exception (and its subclasses including RuntimeError):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/exception</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Exception.html" title="Exception (class)">Exception</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A message</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># A message
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Exception&quot;,&quot;m&quot;:&quot;A message&quot;,&quot;b&quot;:null}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># A message
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Exception
</span><span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'>RuntimeError</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Another message</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Another message
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;RuntimeError&quot;,&quot;m&quot;:&quot;Another message&quot;,&quot;b&quot;:null}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># Another message
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># RuntimeError</span></code></pre>

<p>OpenStruct:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/ostruct</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="OpenStruct.html" title="OpenStruct (class)">OpenStruct</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Matz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>language:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Ruby</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># #&lt;OpenStruct name=&quot;Matz&quot;, language=&quot;Ruby&quot;&gt;
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;OpenStruct&quot;,&quot;t&quot;:{&quot;name&quot;:&quot;Matz&quot;,&quot;language&quot;:&quot;Ruby&quot;}}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># #&lt;OpenStruct name=&quot;Matz&quot;, language=&quot;Ruby&quot;&gt;
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># OpenStruct</span></code></pre>

<p>Range:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/range</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Range.html" title="Range (class)">Range</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># 0..2
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Range&quot;,&quot;a&quot;:[0,2,false]}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># 0..2
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Range</span></code></pre>

<p>Rational:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/rational</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Rational.html" title="Rational (class)">Rational</a></span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># 1/3
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Rational&quot;,&quot;n&quot;:1,&quot;d&quot;:3}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># 1/3
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Rational</span></code></pre>

<p>Regexp:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/regexp</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Regexp.html" title="Regexp (class)">Regexp</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># (?-mix:foo)
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Regexp&quot;,&quot;o&quot;:0,&quot;s&quot;:&quot;foo&quot;}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># (?-mix:foo)
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Regexp</span></code></pre>

<p>Set:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/set</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Set.html" title="Set (class)">Set</a></span>.<span class='id identifier rubyid_new'>new</span>([<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span>]) <span class='comment'># #&lt;Set: {0, 1, 2}&gt;
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Set&quot;,&quot;a&quot;:[0,1,2]}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># #&lt;Set: {0, 1, 2}&gt;
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Set</span></code></pre>

<p>Struct:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/struct</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>Customer</span> <span class='op'>=</span> <span class='const'><a href="Struct.html" title="Struct (class)">Struct</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_address'>address</span>) <span class='comment'># Customer
</span><span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'>Customer</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dave</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>123 Main</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># #&lt;struct Customer name=&quot;Dave&quot;, address=&quot;123 Main&quot;&gt;
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Customer&quot;,&quot;v&quot;:[&quot;Dave&quot;,&quot;123 Main&quot;]}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># #&lt;struct Customer name=&quot;Dave&quot;, address=&quot;123 Main&quot;&gt;
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Customer</span></code></pre>

<p>Symbol:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/symbol</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span> <span class='comment'># foo
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Symbol&quot;,&quot;s&quot;:&quot;foo&quot;}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># foo
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Symbol</span></code></pre>

<p>Time:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json/add/time</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby0'>ruby0</span> <span class='op'>=</span> <span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span> <span class='comment'># 2020-05-02 11:28:26 -0500
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_ruby0'>ruby0</span>) <span class='comment'># {&quot;json_class&quot;:&quot;Time&quot;,&quot;s&quot;:1588436906,&quot;n&quot;:840560000}
</span><span class='id identifier rubyid_ruby1'>ruby1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>) <span class='comment'># 2020-05-02 11:28:26 -0500
</span><span class='id identifier rubyid_ruby1'>ruby1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># Time</span></code></pre>

<h5 id="label-Custom+JSON+Additions">Custom JSON Additions</h5>

<p>In addition to the JSON additions provided, you can craft JSON additions of your own, either for Ruby built-in classes or for user-defined classes.</p>

<p>Here’s a user-defined class <code>Foo</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Foo</span>
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_baz'>baz</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_bar'>bar</span><span class='comma'>,</span> <span class='id identifier rubyid_baz'>baz</span>)
    <span class='kw'>self</span>.<span class='id identifier rubyid_bar'>bar</span> <span class='op'>=</span> <span class='id identifier rubyid_bar'>bar</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_baz'>baz</span> <span class='op'>=</span> <span class='id identifier rubyid_baz'>baz</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Here’s the JSON addition for it:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Extend class Foo with JSON addition.
</span><span class='kw'>class</span> <span class='const'>Foo</span>
  <span class='comment'># Serialize Foo object with its class name and arguments
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_to_json'>to_json</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
    {
      <span class='const'>JSON</span>.<span class='id identifier rubyid_create_id'><a href="#create_id-class_method" title="JSON.create_id (method)">create_id</a></span>  <span class='op'>=&gt;</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>             <span class='op'>=&gt;</span> [ <span class='id identifier rubyid_bar'>bar</span><span class='comma'>,</span> <span class='id identifier rubyid_baz'>baz</span> ]
    }.<span class='id identifier rubyid_to_json'>to_json</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='kw'>end</span>
  <span class='comment'># Deserialize JSON string by constructing new Foo object with arguments.
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_json_create'>json_create</span>(<span class='id identifier rubyid_object'>object</span>)
    <span class='id identifier rubyid_new'>new</span>(<span class='op'>*</span><span class='id identifier rubyid_object'>object</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>])
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Demonstration:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># This Foo object has no custom addition.
</span><span class='id identifier rubyid_foo0'>foo0</span> <span class='op'>=</span> <span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='id identifier rubyid_json0'>json0</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_foo0'>foo0</span>)
<span class='id identifier rubyid_obj0'>obj0</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json0'>json0</span>)
<span class='comment'># Lood the custom addition.
</span><span class='id identifier rubyid_require_relative'>require_relative</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo_addition</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># This foo has the custom addition.
</span><span class='id identifier rubyid_foo1'>foo1</span> <span class='op'>=</span> <span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='id identifier rubyid_json1'>json1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_foo1'>foo1</span>)
<span class='id identifier rubyid_obj1'>obj1</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_json1'>json1</span><span class='comma'>,</span> <span class='label'>create_additions:</span> <span class='kw'>true</span>)
<span class='comment'>#   Make a nice display.
</span><span class='id identifier rubyid_display'>display</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;EOT</span>
<span class='tstring_content'>Generated JSON:
  Without custom addition:  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json0'>json0</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json0'>json0</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
  With custom addition:     </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json1'>json1</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json1'>json1</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
Parsed JSON:
  Without custom addition:  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_obj0'>obj0</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_obj0'>obj0</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
  With custom addition:     </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_obj1'>obj1</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_obj1'>obj1</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
</span><span class='heredoc_end'>EOT
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_display'>display</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Generated</span> <span class='label'>JSON:</span>
  <span class='const'>Without</span> <span class='id identifier rubyid_custom'>custom</span> <span class='id identifier rubyid_addition'>addition</span><span class='op'>:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;Foo:0x0000000006534e80&gt;</span><span class='tstring_end'>&quot;</span></span> (<span class='const'>String</span>)
  <span class='const'>With</span> <span class='id identifier rubyid_custom'>custom</span> <span class='label'>addition:</span>     {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>json_class</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='label_end'>&quot;:</span>[<span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span>]} (<span class='const'>String</span>)
<span class='const'>Parsed</span> <span class='label'>JSON:</span>
  <span class='const'>Without</span> <span class='id identifier rubyid_custom'>custom</span> <span class='id identifier rubyid_addition'>addition</span><span class='op'>:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;Foo:0x0000000006534e80&gt;</span><span class='tstring_end'>&quot;</span></span> (<span class='const'>String</span>)
  <span class='const'>With</span> <span class='id identifier rubyid_custom'>custom</span> <span class='label'>addition:</span>     <span class='comment'>#&lt;Foo:0x0000000006473bb8 @bar=0, @baz=1&gt; (Foo)</span></code></pre>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='CREATE_ID_TLS_KEY-constant' class='summary_signature priv'>CREATE_ID_TLS_KEY =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L114-L114'># File 'ext/json/lib/json/common.rb', line 114</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>JSON.create_id</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='DEFAULT_CREATE_ID-constant' class='summary_signature priv'>DEFAULT_CREATE_ID =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L111-L111'># File 'ext/json/lib/json/common.rb', line 111</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json_class</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='Infinity-constant' class='summary_signature'>Infinity =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L132-L132'># File 'ext/json/lib/json/common.rb', line 132</a>    <pre class='code ruby'><span class='float'>1.0</span><span class='op'>/</span><span class='int'>0</span></pre>
  </li>
  <li>
    <span id='JSON_LOADED-constant' class='summary_signature'>JSON_LOADED =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/ext.rb#L14-L14'># File 'ext/json/lib/json/ext.rb', line 14</a>    <pre class='code ruby'><span class='kw'>true</span></pre>
  </li>
  <li>
    <span id='MinusInfinity-constant' class='summary_signature'>MinusInfinity =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L134-L134'># File 'ext/json/lib/json/common.rb', line 134</a>    <pre class='code ruby'><span class='op'>-</span><span class='const'><a href="#Infinity-constant" title="JSON::Infinity (constant)">Infinity</a></span></pre>
  </li>
  <li>
    <span id='NaN-constant' class='summary_signature'>NaN =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L130-L130'># File 'ext/json/lib/json/common.rb', line 130</a>    <pre class='code ruby'><span class='float'>0.0</span><span class='op'>/</span><span class='int'>0</span></pre>
  </li>
  <li>
    <span id='UnparserError-constant' class='summary_signature nodoc'>UnparserError =</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>For backwards compatibility</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L159-L159'># File 'ext/json/lib/json/common.rb', line 159</a>    <pre class='code ruby'><span class='const'><a href="JSON/GeneratorError.html" title="JSON::GeneratorError (class)">GeneratorError</a></span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p><code>JSON</code> version</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/version.rb#L4-L4'># File 'ext/json/lib/json/version.rb', line 4</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.6.3</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='VERSION_ARRAY-constant' class='summary_signature nodoc'>VERSION_ARRAY =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/version.rb#L5-L5'># File 'ext/json/lib/json/version.rb', line 5</a>    <pre class='code ruby'><span class='const'><a href="#VERSION-constant" title="JSON::VERSION (constant)">VERSION</a></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.</span><span class='regexp_end'>/</span></span>).<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_to_i'>to_i</span> }</pre>
  </li>
  <li>
    <span id='VERSION_BUILD-constant' class='summary_signature nodoc'>VERSION_BUILD =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/version.rb#L8-L8'># File 'ext/json/lib/json/version.rb', line 8</a>    <pre class='code ruby'><span class='const'><a href="#VERSION_ARRAY-constant" title="JSON::VERSION_ARRAY (constant)">VERSION_ARRAY</a></span>[<span class='int'>2</span>]</pre>
  </li>
  <li>
    <span id='VERSION_MAJOR-constant' class='summary_signature nodoc'>VERSION_MAJOR =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/version.rb#L6-L6'># File 'ext/json/lib/json/version.rb', line 6</a>    <pre class='code ruby'><span class='const'><a href="#VERSION_ARRAY-constant" title="JSON::VERSION_ARRAY (constant)">VERSION_ARRAY</a></span>[<span class='int'>0</span>]</pre>
  </li>
  <li>
    <span id='VERSION_MINOR-constant' class='summary_signature nodoc'>VERSION_MINOR =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/version.rb#L7-L7'># File 'ext/json/lib/json/version.rb', line 7</a>    <pre class='code ruby'><span class='const'><a href="#VERSION_ARRAY-constant" title="JSON::VERSION_ARRAY (constant)">VERSION_ARRAY</a></span>[<span class='int'>1</span>]</pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#create_id-class_method" title=".create_id (class method)">.<strong>create_id</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current create identifier.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#create_id=-class_method" title=".create_id= (class method)">.<strong>create_id=</strong>(new_value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets create identifier, which is used to decide if the <em>json_create</em> hook of a class should be called; initial value is <code>json_class</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#dump_default_options-class_method" title=".dump_default_options (class method)">.<strong>dump_default_options</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets or returns the default options for the <a href="#dump-class_method" title="JSON.dump (method)">.dump</a> method.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#generator-class_method" title=".generator (class method)">.<strong>generator</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <code>JSON</code> generator module that is used by <code>JSON</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#load_default_options-class_method" title=".load_default_options (class method)">.<strong>load_default_options</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets or returns default options for the <a href="#load-class_method" title="JSON.load (method)">.load</a> method.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#parser-class_method" title=".parser (class method)">.<strong>parser</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <code>JSON</code> parser class that is used by <code>JSON</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#state-class_method" title=".state (class method)">.<strong>state</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets or Returns the <code>JSON</code> generator state class that is used by <code>JSON</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#generator=-class_method" title=".generator= (class method)">.<strong>generator=</strong>(generator)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="Set.html" title="Set (class)"><code>::Set</code></a> the module <em>generator</em> to be used by <code>JSON</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#parser=-class_method" title=".parser= (class method)">.<strong>parser=</strong>(parser)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="Set.html" title="Set (class)"><code>::Set</code></a> the <code>JSON</code> parser class <em>parser</em> to be used by <code>JSON</code>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#[]-class_method" title="[] (class method)">.<strong>[]</strong>(object)  &#x21d2; Array, String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If <code>object</code> is a String, calls <a href="#parse-class_method" title="JSON.parse (method)">.parse</a> with <code>object</code> and <code>opts</code> (see method <a href="#parse-instance_method" title="JSON#parse (method)">#parse</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create_fast_state-class_method" title=".create_fast_state (class method)">.<strong>create_fast_state</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create_pretty_state-class_method" title=".create_pretty_state (class method)">.<strong>create_pretty_state</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#iconv-class_method" title=".iconv (class method)">.<strong>iconv</strong>(to, from, string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Encodes string using <code>String.encode</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#dump-class_method" title="dump (class method)">.<strong>dump</strong>(obj, io = nil, limit = nil)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Dumps <code>obj</code> as a JSON string, i.e. calls generate on the object and returns the result.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#fast_generate-class_method" title="fast_generate (class method)">.<strong>fast_generate</strong>(obj, opts)  &#x21d2; String </a>
      (also: .fast_unparse)
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Arguments <code>obj</code> and <code>opts</code> here are the same as arguments <code>obj</code> and <code>opts</code> in <a href="#generate-class_method" title="JSON.generate (method)">.generate</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#fast_unparse-class_method" title=".fast_unparse (class method)">.<strong>fast_unparse</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#generate-class_method" title="generate (class method)">.<strong>generate</strong>(obj, opts = nil)  &#x21d2; String </a>
      (also: .unparse)
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a String containing the generated JSON data.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#load-class_method" title="load (class method)">.<strong>load</strong>(source, proc = nil, options = {})  &#x21d2; Object </a>
      (also: .restore)
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the Ruby objects created by parsing the given <code>source</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#load_file-class_method" title="load_file (class method)">.<strong>load_file</strong>(path, opts = {})  &#x21d2; Object </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#load_file!-class_method" title="load_file! (class method)">.<strong>load_file!</strong>(path, opts = {})  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#parse-class_method" title="parse (class method)">.<strong>parse</strong>(source, opts)  &#x21d2; Object </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the Ruby objects created by parsing the given <code>source</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#parse!-class_method" title="parse! (class method)">.<strong>parse!</strong>(source, opts)  &#x21d2; Object </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#pretty_generate-class_method" title="pretty_generate (class method)">.<strong>pretty_generate</strong>(obj, opts = nil)  &#x21d2; String </a>
      (also: .pretty_unparse)
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Arguments <code>obj</code> and <code>opts</code> here are the same as arguments <code>obj</code> and <code>opts</code> in <a href="#generate-class_method" title="JSON.generate (method)">.generate</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#pretty_unparse-class_method" title=".pretty_unparse (class method)">.<strong>pretty_unparse</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#restore-class_method" title=".restore (class method)">.<strong>restore</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#unparse-class_method" title=".unparse (class method)">.<strong>unparse</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#deep_const_get-class_method" title=".deep_const_get (class method)">.<strong>deep_const_get</strong>(path)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the constant located at <em>path</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#recurse_proc-class_method" title=".recurse_proc (class method)">.<strong>recurse_proc</strong>(result, &amp;proc)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Recursively calls passed <em>Proc</em> if the parsed data structure is an <em>Array</em> or <em>Hash</em>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="create_id-class_method">
  <h3 class='signature rw first'>
    .<strong>create_id</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current create identifier. See also <a href="#create_id=-class_method" title="JSON.create_id= (method)">.create_id=</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L126-L128'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='126' data-end='128'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 126</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_create_id'>create_id</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CREATE_ID_TLS_KEY-constant" title="JSON::CREATE_ID_TLS_KEY (constant)">CREATE_ID_TLS_KEY</a></span>] <span class='op'>||</span> <span class='const'><a href="#DEFAULT_CREATE_ID-constant" title="JSON::DEFAULT_CREATE_ID (constant)">DEFAULT_CREATE_ID</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_id=-class_method">
  <h3 class='signature rw'>
    .<strong>create_id=</strong>(new_value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets create identifier, which is used to decide if the <em>json_create</em> hook of a class should be called; initial value is <code>json_class</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_create_id'><a href="#create_id-class_method" title="JSON.create_id (method)">create_id</a></span> <span class='comment'># =&gt; &#39;json_class&#39;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L120-L122'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='120' data-end='122'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 120</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_create_id='>create_id=</span>(<span class='id identifier rubyid_new_value'>new_value</span>)
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CREATE_ID_TLS_KEY-constant" title="JSON::CREATE_ID_TLS_KEY (constant)">CREATE_ID_TLS_KEY</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_new_value'>new_value</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_default_options-class_method">
  <h3 class='signature rw'>
    .<strong>dump_default_options</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets or returns the default options for the <a href="#dump-class_method" title="JSON.dump (method)">.dump</a> method. Initially:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_dump_default_options'>dump_default_options</span>
<span class='id identifier rubyid_opts'>opts</span> <span class='comment'># =&gt; {:max_nesting=&gt;false, :allow_nan=&gt;true, :escape_slash=&gt;false}</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L596-L596'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='596' data-end='596'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 596</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dump_default_options'>dump_default_options</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generator-class_method">
  <h3 class='signature rw'>
    .<strong>generator</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <code>JSON</code> generator module that is used by <code>JSON</code>. This is either <a href="JSON/Ext/Generator.html" title="JSON::Ext::Generator (module)"><code>::JSON::Ext::Generator</code></a> or <code>JSON::Pure::Generator</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_generator'>generator</span> <span class='comment'># =&gt; JSON::Ext::Generator</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L103-L103'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='103' data-end='103'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 103</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_generator'>generator</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generator=-class_method">
  <h3 class='signature rw  nodoc'>
    .<strong>generator=</strong>(generator)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="Set.html" title="Set (class)"><code>::Set</code></a> the module <em>generator</em> to be used by <code>JSON</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L58-L79'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='58' data-end='79'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 58</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generator='>generator=</span>(<span class='id identifier rubyid_generator'><a href="#generator-class_method" title="JSON.generator (method)">generator</a></span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_old'>old</span><span class='comma'>,</span> <span class='gvar'>$VERBOSE</span> <span class='op'>=</span> <span class='gvar'>$VERBOSE</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='ivar'>@generator</span> <span class='op'>=</span> <span class='id identifier rubyid_generator'><a href="#generator-class_method" title="JSON.generator (method)">generator</a></span>
  <span class='id identifier rubyid_generator_methods'>generator_methods</span> <span class='op'>=</span> <span class='id identifier rubyid_generator'><a href="#generator-class_method" title="JSON.generator (method)">generator</a></span><span class='op'>::</span><span class='const'>GeneratorMethods</span>
  <span class='kw'>for</span> <span class='id identifier rubyid_const'>const</span> <span class='kw'>in</span> <span class='id identifier rubyid_generator_methods'>generator_methods</span>.<span class='id identifier rubyid_constants'>constants</span>
    <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='id identifier rubyid_deep_const_get'><a href="#deep_const_get-class_method" title="JSON.deep_const_get (method)">deep_const_get</a></span>(<span class='id identifier rubyid_const'>const</span>)
    <span class='id identifier rubyid_modul'>modul</span> <span class='op'>=</span> <span class='id identifier rubyid_generator_methods'>generator_methods</span>.<span class='id identifier rubyid_const_get'>const_get</span>(<span class='id identifier rubyid_const'>const</span>)
    <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_instance_methods'>instance_methods</span>(<span class='kw'>false</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span>
        <span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>to_json</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>and</span> <span class='id identifier rubyid_remove_method'>remove_method</span> <span class='id identifier rubyid_m'>m</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_modul'>modul</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span> <span class='op'>=</span> <span class='id identifier rubyid_generator'><a href="#generator-class_method" title="JSON.generator (method)">generator</a></span><span class='op'>::</span><span class='const'>State</span>
  <span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>State</span><span class='comma'>,</span> <span class='kw'>self</span>.<span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span>
  <span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>SAFE_STATE_PROTOTYPE</span><span class='comma'>,</span> <span class='const'>State</span>.<span class='id identifier rubyid_new'>new</span> <span class='comment'># for JRuby
</span>  <span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>FAST_STATE_PROTOTYPE</span><span class='comma'>,</span> <span class='id identifier rubyid_create_fast_state'><a href="#create_fast_state-class_method" title="JSON.create_fast_state (method)">create_fast_state</a></span>
  <span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>PRETTY_STATE_PROTOTYPE</span><span class='comma'>,</span> <span class='id identifier rubyid_create_pretty_state'><a href="#create_pretty_state-class_method" title="JSON.create_pretty_state (method)">create_pretty_state</a></span>
<span class='kw'>ensure</span>
  <span class='gvar'>$VERBOSE</span> <span class='op'>=</span> <span class='id identifier rubyid_old'>old</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_default_options-class_method">
  <h3 class='signature rw'>
    .<strong>load_default_options</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets or returns default options for the <a href="#load-class_method" title="JSON.load (method)">.load</a> method. Initially:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_load_default_options'>load_default_options</span>
<span class='id identifier rubyid_opts'>opts</span> <span class='comment'># =&gt; {:max_nesting=&gt;false, :allow_nan=&gt;true, :allow_blank=&gt;true, :create_additions=&gt;true}</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L420-L420'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='420' data-end='420'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 420</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_load_default_options'>load_default_options</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parser-class_method">
  <h3 class='signature rw'>
    .<strong>parser</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <code>JSON</code> parser class that is used by <code>JSON</code>. This is either <a href="JSON/Ext/Parser.html" title="JSON::Ext::Parser (class)"><code>::JSON::Ext::Parser</code></a> or <code>JSON::Pure::Parser</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_parser'>parser</span> <span class='comment'># =&gt; JSON::Ext::Parser</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L29-L29'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='29' data-end='29'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 29</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_parser'>parser</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parser=-class_method">
  <h3 class='signature rw  nodoc'>
    .<strong>parser=</strong>(parser)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="Set.html" title="Set (class)"><code>::Set</code></a> the <code>JSON</code> parser class <em>parser</em> to be used by <code>JSON</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L32-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='32' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 32</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parser='>parser=</span>(<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="JSON.parser (method)">parser</a></span>) <span class='comment'># :nodoc:
</span>  <span class='ivar'>@parser</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'><a href="#parser-class_method" title="JSON.parser (method)">parser</a></span>
  <span class='id identifier rubyid_remove_const'>remove_const</span> <span class='symbeg'>:</span><span class='const'>Parser</span> <span class='kw'>if</span> <span class='id identifier rubyid_const_defined?'>const_defined?</span>(<span class='symbeg'>:</span><span class='const'>Parser</span><span class='comma'>,</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_const_set'>const_set</span> <span class='symbeg'>:</span><span class='const'>Parser</span><span class='comma'>,</span> <span class='id identifier rubyid_parser'><a href="#parser-class_method" title="JSON.parser (method)">parser</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state-class_method">
  <h3 class='signature rw'>
    .<strong>state</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets or Returns the <code>JSON</code> generator state class that is used by <code>JSON</code>. This is either <a href="JSON/Ext/Generator/State.html" title="JSON::Ext::Generator::State (class)"><code>::JSON::Ext::Generator::State</code></a> or <code>JSON::Pure::Generator::State</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_state'>state</span> <span class='comment'># =&gt; JSON::Ext::Generator::State</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L108-L108'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='108' data-end='108'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 108</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_state'>state</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="[]-class_method">
  <h3 class='signature  first'>
    .<strong>[]</strong>(object)  &#x21d2; <code>Array</code>, <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If <code>object</code> is a String, calls <a href="#parse-class_method" title="JSON.parse (method)">.parse</a> with <code>object</code> and <code>opts</code> (see method <a href="#parse-instance_method" title="JSON#parse (method)">#parse</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[0, 1, null]</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>JSON</span>[<span class='id identifier rubyid_json'>json</span>]<span class='comment'># =&gt; [0, 1, nil]</span></code></pre>

<p>Otherwise, calls <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> with <code>object</code> and <code>opts</code> (see method <a href="#generate-instance_method" title="JSON#generate (method)">#generate</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='kw'>nil</span>]
<span class='const'>JSON</span>[<span class='id identifier rubyid_ruby'>ruby</span>] <span class='comment'># =&gt; &#39;[0,1,null]&#39;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L18-L24'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='18' data-end='24'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 18</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>[]</span>(<span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='kw'>if</span> <span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_str'>to_str</span>
    <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_to_str'>to_str</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
  <span class='kw'>else</span>
    <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_fast_state-class_method">
  <h3 class='signature '>
    .<strong>create_fast_state</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L81-L89'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='81' data-end='89'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 81</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_fast_state'>create_fast_state</span>
  <span class='const'>State</span>.<span class='id identifier rubyid_new'>new</span>(
    <span class='symbeg'>:</span><span class='id identifier rubyid_indent'>indent</span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_space'>space</span>          <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_object_nl'>object_nl</span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_array_nl'>array_nl</span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_max_nesting'>max_nesting</span>    <span class='op'>=&gt;</span> <span class='kw'>false</span>
  )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_pretty_state-class_method">
  <h3 class='signature '>
    .<strong>create_pretty_state</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L91-L98'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='91' data-end='98'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 91</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_pretty_state'>create_pretty_state</span>
  <span class='const'>State</span>.<span class='id identifier rubyid_new'>new</span>(
    <span class='symbeg'>:</span><span class='id identifier rubyid_indent'>indent</span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_space'>space</span>          <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_object_nl'>object_nl</span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_array_nl'>array_nl</span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deep_const_get-class_method">
  <h3 class='signature nodoc'>
    .<strong>deep_const_get</strong>(path)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the constant located at <em>path</em>. The format of <em>path</em> has to be either ::A::B::C or <code>A::B::C</code>. In any case, A has to be located at the top level (absolute namespace path?). If there doesn’t exist a constant at the given path, an ArgumentError is raised.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L42-L55'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='42' data-end='55'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 42</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deep_const_get'>deep_const_get</span>(<span class='id identifier rubyid_path'>path</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_path'>path</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>::</span><span class='regexp_end'>/</span></span>).<span class='id identifier rubyid_inject'>inject</span>(<span class='const'><a href="Object.html" title="Object (class)">Object</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
    <span class='kw'>case</span>
    <span class='kw'>when</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_empty?'>empty?</span>                  <span class='kw'>then</span> <span class='id identifier rubyid_p'>p</span>
    <span class='kw'>when</span> <span class='id identifier rubyid_p'>p</span>.<span class='id identifier rubyid_const_defined?'>const_defined?</span>(<span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='kw'>true</span>) <span class='kw'>then</span> <span class='id identifier rubyid_p'>p</span>.<span class='id identifier rubyid_const_get'>const_get</span>(<span class='id identifier rubyid_c'>c</span>)
    <span class='kw'>else</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_p'>p</span>.<span class='id identifier rubyid_const_missing'>const_missing</span>(<span class='id identifier rubyid_c'>c</span>)
      <span class='kw'>rescue</span> <span class='const'>NameError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t get const </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump-class_method">
  <h3 class='signature private'>
    .<strong>dump</strong>(obj, io = nil, limit = nil)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Dumps <code>obj</code> as a JSON string, i.e. calls generate on the object and returns the result.</p>

<p>The default options can be changed via method <a href="#dump_default_options-class_method" title="JSON.dump_default_options (method)">.dump_default_options</a>.</p>
<ul><li>
<p>Argument <code>io</code>, if given, should respond to method <code>write</code>; the JSON String is written to <code>io</code>, and <code>io</code> is returned. If <code>io</code> is not given, the JSON String is returned.</p>
</li><li>
<p>Argument <code>limit</code>, if given, is passed to <a href="#generate-class_method" title="JSON.generate (method)">.generate</a> as option <code>max_nesting</code>.</p>
</li></ul>
<hr>

<p>When argument <code>io</code> is not given, returns the JSON String generated from <code>obj</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> {<span class='label'>foo:</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>]<span class='comma'>,</span> <span class='label'>bar:</span> {<span class='label'>baz:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>bat:</span> <span class='int'>3</span>}<span class='comma'>,</span> <span class='label'>bam:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bad'>bad</span>}
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_dump'>dump</span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &quot;{\&quot;foo\&quot;:[0,1],\&quot;bar\&quot;:{\&quot;baz\&quot;:2,\&quot;bat\&quot;:3},\&quot;bam\&quot;:\&quot;bad\&quot;}&quot;</span></code></pre>

<p>When argument <code>io</code> is given, writes the JSON String to <code>io</code> and returns <code>io</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.json</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>JSON</span>.<span class='id identifier rubyid_dump'>dump</span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
<span class='kw'>end</span> <span class='comment'># =&gt; #&lt;File:t.json (closed)&gt;
</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span>)</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='label_end'>&quot;:</span>[<span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span>]<span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='label_end'>&quot;:</span>{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='label_end'>&quot;:</span><span class='int'>2</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bat</span><span class='label_end'>&quot;:</span><span class='int'>3</span>}<span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bam</span><span class='label_end'>&quot;:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bad</span><span class='tstring_end'>&quot;</span></span>}</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L631-L650'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='631' data-end='650'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 631</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump'>dump</span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_anIO'>anIO</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_anIO'>anIO</span> <span class='kw'>and</span> <span class='id identifier rubyid_limit'>limit</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_anIO'>anIO</span> <span class='op'>=</span> <span class='id identifier rubyid_anIO'>anIO</span>.<span class='id identifier rubyid_to_io'>to_io</span> <span class='kw'>if</span> <span class='id identifier rubyid_anIO'>anIO</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_to_io'>to_io</span>)
    <span class='kw'>unless</span> <span class='id identifier rubyid_anIO'>anIO</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_write'>write</span>)
      <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='id identifier rubyid_anIO'>anIO</span>
      <span class='id identifier rubyid_anIO'>anIO</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_dump_default_options'><a href="#dump_default_options-class_method" title="JSON.dump_default_options (method)">dump_default_options</a></span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_max_nesting'>max_nesting</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_limit'>limit</span>) <span class='kw'>if</span> <span class='id identifier rubyid_limit'>limit</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_anIO'>anIO</span>
    <span class='id identifier rubyid_anIO'>anIO</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_result'>result</span>
    <span class='id identifier rubyid_anIO'>anIO</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'><a href="JSON/NestingError.html" title="JSON::NestingError (class)">NestingError</a></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exceed depth limit</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fast_generate-class_method">
  <h3 class='signature private'>
    .<strong>fast_generate</strong>(obj, opts)  &#x21d2; <code>String</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>    <span class='aliases'>Also known as: <span class='names'>.fast_unparse</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Arguments <code>obj</code> and <code>opts</code> here are the same as arguments <code>obj</code> and <code>opts</code> in <a href="#generate-class_method" title="JSON.generate (method)">.generate</a>.</p>

<p>By default, generates JSON data without checking for circular references in <code>obj</code> (option <code>max_nesting</code> set to <code>false</code>, disabled).</p>

<p>Raises an exception if <code>obj</code> contains circular references:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []<span class='semicolon'>;</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> []<span class='semicolon'>;</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_b'>b</span>)<span class='semicolon'>;</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_a'>a</span>)
<span class='comment'># Raises SystemStackError (stack level too deep):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_fast_generate'>fast_generate</span>(<span class='id identifier rubyid_a'>a</span>)</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L335-L352'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='335' data-end='352'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 335</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fast_generate'>fast_generate</span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='const'>State</span> <span class='op'>===</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_create_fast_state'><a href="#create_fast_state-class_method" title="JSON.create_fast_state (method)">create_fast_state</a></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_hash'>to_hash</span>
      <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_to_hash'>to_hash</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_h'>to_h</span>
      <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_to_h'>to_h</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t convert </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> into Hash</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span>.<span class='id identifier rubyid_configure'>configure</span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fast_unparse-class_method">
  <h3 class='signature private'>
    .<strong>fast_unparse</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L356-L356'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='356' data-end='356'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 356</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_fast_unparse'>fast_unparse</span> <span class='id identifier rubyid_fast_generate'><a href="#fast_generate-class_method" title="JSON.fast_generate (method)">fast_generate</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate-class_method">
  <h3 class='signature private'>
    .<strong>generate</strong>(obj, opts = nil)  &#x21d2; <code>String</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>    <span class='aliases'>Also known as: <span class='names'>.unparse</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a String containing the generated JSON data.</p>

<p>See also <a href="#fast_generate-class_method" title="JSON.fast_generate (method)">.fast_generate</a>, <a href="#pretty_generate-class_method" title="JSON.pretty_generate (method)">.pretty_generate</a>.</p>

<p>Argument <code>obj</code> is the Ruby object to be converted to JSON.</p>

<p>Argument <code>opts</code>, if given, contains a Hash of options for the generation. See <a href="#module-JSON-label-Generating+Options">Generating Options</a>.</p>
<hr>

<p>When <code>obj</code> is an Array, returns a String containing a JSON array:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>1.0</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span>]
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &#39;[&quot;foo&quot;,1.0,true,false,null]&#39;</span></code></pre>

<p>When <code>obj</code> is a Hash, returns a String containing a JSON object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> {<span class='label'>foo:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>bar:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>baz:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bat'>bat</span>}
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='id identifier rubyid_json'>json</span> <span class='comment'># =&gt; &#39;{&quot;foo&quot;:0,&quot;bar&quot;:&quot;s&quot;,&quot;baz&quot;:&quot;bat&quot;}&#39;</span></code></pre>

<p>For examples of generating from other Ruby objects, see <a href="#module-JSON-label-Generating+JSON+from+Other+Objects">Generating JSON from Other Objects</a>.</p>
<hr>

<p>Raises an exception if any formatting option is not a String.</p>

<p>Raises an exception if <code>obj</code> contains circular references:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []<span class='semicolon'>;</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> []<span class='semicolon'>;</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_b'>b</span>)<span class='semicolon'>;</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_a'>a</span>)
<span class='comment'># Raises JSON::NestingError (nesting of 100 is too deep):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_a'>a</span>)</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L296-L313'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='296' data-end='313'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 296</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='const'>State</span> <span class='op'>===</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span> <span class='op'>=</span> <span class='const'>State</span>.<span class='id identifier rubyid_new'>new</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_hash'>to_hash</span>
      <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_to_hash'>to_hash</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_h'>to_h</span>
      <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_to_h'>to_h</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t convert </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> into Hash</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span> <span class='op'>=</span> <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span>.<span class='id identifier rubyid_configure'>configure</span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span>.<span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="iconv-class_method">
  <h3 class='signature '>
    .<strong>iconv</strong>(to, from, string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Encodes string using <code>String.encode</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L653-L655'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='653' data-end='655'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 653</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_iconv'>iconv</span>(<span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
  <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load-class_method">
  <h3 class='signature private'>
    .<strong>load</strong>(source, proc = nil, options = {})  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>    <span class='aliases'>Also known as: <span class='names'>.restore</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the Ruby objects created by parsing the given <code>source</code>.</p>
<ul><li>
<p>Argument <code>source</code> must be, or be convertible to, a String:</p>
<ul><li>
<p>If <code>source</code> responds to instance method <code>to_str</code>, <code>source.to_str</code> becomes the source.</p>
</li><li>
<p>If <code>source</code> responds to instance method <code>to_io</code>, <code>source.to_io.read</code> becomes the source.</p>
</li><li>
<p>If <code>source</code> responds to instance method <code>read</code>, <code>source.read</code> becomes the source.</p>
</li><li>
<p>If both of the following are true, source becomes the String <code>&#39;null&#39;</code>:</p>
<ul><li>
<p>Option <code>allow_blank</code> specifies a truthy value.</p>
</li><li>
<p>The source, as defined above, is <code>nil</code> or the empty String <code>&#39;&#39;</code>.</p>
</li></ul>
</li><li>
<p>Otherwise, <code>source</code> remains the source.</p>
</li></ul>
</li><li>
<p>Argument <code>proc</code>, if given, must be a Proc that accepts one argument. It will be called recursively with each result (depth-first order). See details below. BEWARE: This method is meant to serialise data from trusted user input, like from your own database server or clients under your control, it could be dangerous to allow untrusted users to pass JSON sources into it.</p>
</li><li>
<p>Argument <code>opts</code>, if given, contains a Hash of options for the parsing. See <a href="#module-JSON-label-Parsing+Options">Parsing Options</a>. The default options can be changed via method JSON.load_default_options=.</p>
</li></ul>
<hr>

<p>When no <code>proc</code> is given, modifies <code>source</code> as above and returns the result of <code>parse(source, opts)</code>;  see <a href="#parse-instance_method" title="JSON#parse (method)">#parse</a>.</p>

<p>Source for following examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>{
&quot;name&quot;: &quot;Dave&quot;,
  &quot;age&quot; :40,
  &quot;hats&quot;: [
    &quot;Cattleman&#39;s&quot;,
    &quot;Panama&quot;,
    &quot;Tophat&quot;
  ]
}
</span><span class='heredoc_end'>EOT</span></code></pre>

<p>Load a String:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; {&quot;name&quot;=&gt;&quot;Dave&quot;, &quot;age&quot;=&gt;40, &quot;hats&quot;=&gt;[&quot;Cattleman&#39;s&quot;, &quot;Panama&quot;, &quot;Tophat&quot;]}</span></code></pre>

<p>Load an IO object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stringio</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_object'>object</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_load'>load</span>(<span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_source'>source</span>))
<span class='id identifier rubyid_object'>object</span> <span class='comment'># =&gt; {&quot;name&quot;=&gt;&quot;Dave&quot;, &quot;age&quot;=&gt;40, &quot;hats&quot;=&gt;[&quot;Cattleman&#39;s&quot;, &quot;Panama&quot;, &quot;Tophat&quot;]}</span></code></pre>

<p>Load a File object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.json</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span>)
<span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_path'>path</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>JSON</span>.<span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_file'>file</span>)
<span class='kw'>end</span> <span class='comment'># =&gt; {&quot;name&quot;=&gt;&quot;Dave&quot;, &quot;age&quot;=&gt;40, &quot;hats&quot;=&gt;[&quot;Cattleman&#39;s&quot;, &quot;Panama&quot;, &quot;Tophat&quot;]}</span></code></pre>
<hr>

<p>When <code>proc</code> is given:</p>
<ul><li>
<p>Modifies <code>source</code> as above.</p>
</li><li>
<p>Gets the <code>result</code> from calling <code>parse(source, opts)</code>.</p>
</li><li>
<p>Recursively calls <code>proc(result)</code>.</p>
</li><li>
<p>Returns the final result.</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># Some classes for the example.
</span><span class='kw'>class</span> <span class='const'>Base</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_attributes'>attributes</span>)
    <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_attributes'>attributes</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='kw'>class</span> <span class='const'>User</span>    <span class='op'>&lt;</span> <span class='const'>Base</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='kw'>class</span> <span class='const'>Account</span> <span class='op'>&lt;</span> <span class='const'>Base</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='kw'>class</span> <span class='const'>Admin</span>   <span class='op'>&lt;</span> <span class='const'>Base</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='comment'># The JSON source.
</span><span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOF</span>
<span class='tstring_content'>{
  &quot;users&quot;: [
      {&quot;type&quot;: &quot;User&quot;, &quot;username&quot;: &quot;jane&quot;, &quot;email&quot;: &quot;jane@example.com&quot;},
      {&quot;type&quot;: &quot;User&quot;, &quot;username&quot;: &quot;john&quot;, &quot;email&quot;: &quot;john@example.com&quot;}
  ],
  &quot;accounts&quot;: [
      {&quot;account&quot;: {&quot;type&quot;: &quot;Account&quot;, &quot;paid&quot;: true, &quot;account_id&quot;: &quot;1234&quot;}},
      {&quot;account&quot;: {&quot;type&quot;: &quot;Account&quot;, &quot;paid&quot;: false, &quot;account_id&quot;: &quot;1235&quot;}}
  ],
  &quot;admins&quot;: {&quot;type&quot;: &quot;Admin&quot;, &quot;password&quot;: &quot;0wn3d&quot;}
}
</span><span class='heredoc_end'>EOF
</span><span class='comment'># Deserializer method.
</span><span class='kw'>def</span> <span class='id identifier rubyid_deserialize_obj'>deserialize_obj</span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_safe_types'>safe_types</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>User</span><span class='words_sep'> </span><span class='tstring_content'>Account</span><span class='words_sep'> </span><span class='tstring_content'>Admin</span><span class='tstring_end'>)</span></span>)
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Hash</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_obj'>obj</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_safe_types'>safe_types</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_type'>type</span>) <span class='op'>?</span> <span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_const_get'>const_get</span>(<span class='id identifier rubyid_type'>type</span>).<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_obj'>obj</span>) <span class='op'>:</span> <span class='id identifier rubyid_obj'>obj</span>
<span class='kw'>end</span>
<span class='comment'># Call to JSON.load
</span><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_json'>json</span><span class='comma'>,</span> <span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>|</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_obj'>obj</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_obj'>obj</span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>=</span> <span class='id identifier rubyid_deserialize_obj'>deserialize_obj</span> <span class='id identifier rubyid_v'>v</span> }
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_map!'>map!</span> {<span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_deserialize_obj'>deserialize_obj</span> <span class='id identifier rubyid_v'>v</span> }
  <span class='kw'>end</span>
})
<span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_ruby'>ruby</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>users</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span>
   [<span class='comment'>#&lt;User:0x00000000064c4c98
</span>     <span class='ivar'>@attributes</span><span class='op'>=</span>
       {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jane</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jane@example.com</span><span class='tstring_end'>&quot;</span></span>}<span class='op'>&gt;</span><span class='comma'>,</span>
     <span class='comment'>#&lt;User:0x00000000064c4bd0
</span>     <span class='ivar'>@attributes</span><span class='op'>=</span>
       {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>john</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>john@example.com</span><span class='tstring_end'>&quot;</span></span>}<span class='op'>&gt;</span>]<span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>accounts</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span>
   [{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>account</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span>
       <span class='comment'>#&lt;Account:0x00000000064c4928
</span>       <span class='ivar'>@attributes</span><span class='op'>=</span>{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Account</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>paid</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='kw'>true</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>account_id</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1234</span><span class='tstring_end'>&quot;</span></span>}<span class='op'>&gt;</span>}<span class='comma'>,</span>
    {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>account</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span>
       <span class='comment'>#&lt;Account:0x00000000064c4680
</span>       <span class='ivar'>@attributes</span><span class='op'>=</span>{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Account</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>paid</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='kw'>false</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>account_id</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1235</span><span class='tstring_end'>&quot;</span></span>}<span class='op'>&gt;</span>}]<span class='comma'>,</span>
 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admins</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span>
   <span class='comment'>#&lt;Admin:0x00000000064c41f8
</span>   <span class='ivar'>@attributes</span><span class='op'>=</span>{<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Admin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>password</span><span class='tstring_end'>&quot;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0wn3d</span><span class='tstring_end'>&quot;</span></span>}<span class='op'>&gt;</span>}</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L557-L572'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='557' data-end='572'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 557</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_proc'>proc</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_load_default_options'><a href="#load_default_options-class_method" title="JSON.load_default_options (method)">load_default_options</a></span>.<span class='id identifier rubyid_merge'>merge</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_str'>to_str</span>
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_to_str'>to_str</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_io'>to_io</span>
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_to_io'>to_io</span>.<span class='id identifier rubyid_read'>read</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_read'>read</span>)
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_read'>read</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_allow_blank'>allow_blank</span>] <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_empty?'>empty?</span>)
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>null</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
  <span class='id identifier rubyid_recurse_proc'><a href="#recurse_proc-class_method" title="JSON.recurse_proc (method)">recurse_proc</a></span>(<span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span>) <span class='kw'>if</span> <span class='id identifier rubyid_proc'>proc</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_file-class_method">
  <h3 class='signature private'>
    .<strong>load_file</strong>(path, opts = {})  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span>)<span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)</code></pre>

<p>See method <a href="#parse-instance_method" title="JSON#parse (method)">#parse</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L245-L247'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='245' data-end='247'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 245</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_file'>load_file</span>(<span class='id identifier rubyid_filespec'>filespec</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_filespec'>filespec</span>)<span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_file!-class_method">
  <h3 class='signature private'>
    .<strong>load_file!</strong>(path, opts = {})   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>JSON</span>.<span class='id identifier rubyid_parse!'><a href="#parse!-class_method" title="JSON.parse! (method)">parse!</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>))</code></pre>

<p>See method <a href="#parse!-instance_method" title="JSON#parse! (method)">#parse!</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L256-L258'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='256' data-end='258'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 256</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_file!'>load_file!</span>(<span class='id identifier rubyid_filespec'>filespec</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_parse!'><a href="#parse!-class_method" title="JSON.parse! (method)">parse!</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_filespec'>filespec</span>)<span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse-class_method">
  <h3 class='signature private'>
    .<strong>parse</strong>(source, opts)  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the Ruby objects created by parsing the given <code>source</code>.</p>

<p>Argument <code>source</code> contains the String to be parsed.</p>

<p>Argument <code>opts</code>, if given, contains a Hash of options for the parsing. See <a href="#module-JSON-label-Parsing+Options">Parsing Options</a>.</p>
<hr>

<p>When <code>source</code> is a JSON array, returns a Ruby Array:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[&quot;foo&quot;, 1.0, true, false, null]</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; [&quot;foo&quot;, 1.0, true, false, nil]
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Array</span></code></pre>

<p>When <code>source</code> is a JSON object, returns a Ruby Hash:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{&quot;a&quot;: &quot;foo&quot;, &quot;b&quot;: 1.0, &quot;c&quot;: true, &quot;d&quot;: false, &quot;e&quot;: null}</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; {&quot;a&quot;=&gt;&quot;foo&quot;, &quot;b&quot;=&gt;1.0, &quot;c&quot;=&gt;true, &quot;d&quot;=&gt;false, &quot;e&quot;=&gt;nil}
</span><span class='id identifier rubyid_ruby'>ruby</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Hash</span></code></pre>

<p>For examples of parsing for all JSON data types, see <a href="#module-JSON-label-Parsing+JSON">Parsing JSON</a>.</p>

<p>Parses nested <code>JSON</code> objects:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>{
&quot;name&quot;: &quot;Dave&quot;,
  &quot;age&quot; :40,
  &quot;hats&quot;: [
    &quot;Cattleman&#39;s&quot;,
    &quot;Panama&quot;,
    &quot;Tophat&quot;
  ]
}
</span><span class='heredoc_end'>EOT
</span><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_source'>source</span>)
<span class='id identifier rubyid_ruby'>ruby</span> <span class='comment'># =&gt; {&quot;name&quot;=&gt;&quot;Dave&quot;, &quot;age&quot;=&gt;40, &quot;hats&quot;=&gt;[&quot;Cattleman&#39;s&quot;, &quot;Panama&quot;, &quot;Tophat&quot;]}</span></code></pre>
<hr>

<p>Raises an exception if <code>source</code> is not valid <code>JSON</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises JSON::ParserError (783: unexpected token at &#39;&#39;):
</span><span class='const'>JSON</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L215-L217'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='215' data-end='217'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 215</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='const'>Parser</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='op'>**</span>(<span class='id identifier rubyid_opts'>opts</span><span class='op'>||</span>{})).<span class='id identifier rubyid_parse'>parse</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse!-class_method">
  <h3 class='signature private'>
    .<strong>parse!</strong>(source, opts)  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)</code></pre>

<p>with <code>source</code> and possibly modified <code>opts</code>.</p>

<p>Differences from <a href="#parse-class_method" title="JSON.parse (method)">.parse</a>:</p>
<ul><li>
<p>Option <code>max_nesting</code>, if not provided, defaults to <code>false</code>, which disables checking for nesting depth.</p>
</li><li>
<p>Option <code>allow_nan</code>, if not provided, defaults to <code>true</code>.</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L230-L236'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='230' data-end='236'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 230</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse!'>parse!</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {
    <span class='symbeg'>:</span><span class='id identifier rubyid_max_nesting'>max_nesting</span>  <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_allow_nan'>allow_nan</span>    <span class='op'>=&gt;</span> <span class='kw'>true</span>
  }.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='const'>Parser</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='op'>**</span>(<span class='id identifier rubyid_opts'>opts</span><span class='op'>||</span>{})).<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="JSON.parse (method)">parse</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pretty_generate-class_method">
  <h3 class='signature private'>
    .<strong>pretty_generate</strong>(obj, opts = nil)  &#x21d2; <code>String</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>    <span class='aliases'>Also known as: <span class='names'>.pretty_unparse</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Arguments <code>obj</code> and <code>opts</code> here are the same as arguments <code>obj</code> and <code>opts</code> in <a href="#generate-class_method" title="JSON.generate (method)">.generate</a>.</p>

<p>Default options are:</p>

<pre class="code ruby"><code class="ruby">{
  <span class='label'>indent:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='comment'># Two spaces
</span>  <span class='label'>space:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>     <span class='comment'># One space
</span>  <span class='label'>array_nl:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'># Newline
</span>  <span class='label'>object_nl:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># Newline
</span>}</code></pre>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_obj'>obj</span> <span class='op'>=</span> {<span class='label'>foo:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_baz'>baz</span>]<span class='comma'>,</span> <span class='label'>bat:</span> {<span class='label'>bam:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>bad:</span> <span class='int'>1</span>}}
<span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_pretty_generate'>pretty_generate</span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_json'>json</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">{
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='label_end'>&quot;:</span> [
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span>
  ]<span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bat</span><span class='label_end'>&quot;:</span> {
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bam</span><span class='label_end'>&quot;:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bad</span><span class='label_end'>&quot;:</span> <span class='int'>1</span>
  }
}</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L390-L407'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='390' data-end='407'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 390</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pretty_generate'>pretty_generate</span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='const'>State</span> <span class='op'>===</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_create_pretty_state'><a href="#create_pretty_state-class_method" title="JSON.create_pretty_state (method)">create_pretty_state</a></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_hash'>to_hash</span>
      <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_to_hash'>to_hash</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_h'>to_h</span>
      <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_to_h'>to_h</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t convert </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> into Hash</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span>.<span class='id identifier rubyid_configure'>configure</span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_state'><a href="#state-class_method" title="JSON.state (method)">state</a></span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>(<span class='id identifier rubyid_obj'>obj</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pretty_unparse-class_method">
  <h3 class='signature private'>
    .<strong>pretty_unparse</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L411-L411'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='411' data-end='411'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 411</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_pretty_unparse'>pretty_unparse</span> <span class='id identifier rubyid_pretty_generate'><a href="#pretty_generate-class_method" title="JSON.pretty_generate (method)">pretty_generate</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="recurse_proc-class_method">
  <h3 class='signature private nodoc'>
    .<strong>recurse_proc</strong>(result, &amp;proc)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Recursively calls passed <em>Proc</em> if the parsed data structure is an <em>Array</em> or <em>Hash</em></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L575-L586'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='575' data-end='586'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 575</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_recurse_proc'>recurse_proc</span>(<span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>case</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_recurse_proc'>recurse_proc</span> <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span> }
    <span class='id identifier rubyid_proc'>proc</span>.<span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='id identifier rubyid_recurse_proc'>recurse_proc</span> <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span><span class='semicolon'>;</span> <span class='id identifier rubyid_recurse_proc'>recurse_proc</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span> }
    <span class='id identifier rubyid_proc'>proc</span>.<span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_proc'>proc</span>.<span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="restore-class_method">
  <h3 class='signature private'>
    .<strong>restore</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L588-L588'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='588' data-end='588'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 588</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_restore'>restore</span> <span class='id identifier rubyid_load'><a href="#load-class_method" title="JSON.load (method)">load</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unparse-class_method">
  <h3 class='signature private'>
    .<strong>unparse</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_2_10/ext/json/lib/json/common.rb#L318-L318'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='318' data-end='318'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/json/lib/json/common.rb', line 318</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_unparse'>unparse</span> <span class='id identifier rubyid_generate'><a href="#generate-class_method" title="JSON.generate (method)">generate</a></span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>