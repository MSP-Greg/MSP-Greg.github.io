<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Mongoid::Fields::ClassMethods &mdash; Mongoid master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongoid::Fields::ClassMethods",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Mongoid master</a> &raquo; 
      <a href='../../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../../Mongoid.html" title="Mongoid (module)">Mongoid</a> &raquo; 
        <a href="../Fields.html" title="Mongoid::Fields (module)">Fields</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ClassMethods&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Mongoid::Fields::ClassMethods</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Extended In:</div>
      <div class='box_11'>
        <a href="../Composable.html" title="Mongoid::Composable (module)"><code>::Mongoid::Composable</code></a>,
          <a href="../Document.html" title="Mongoid::Document (module)"><code>::Mongoid::Document</code></a>
      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L57'>lib/mongoid/fields.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L443'>lib/mongoid/fields.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#using_object_ids%3F-instance_method" title="#using_object_ids? (instance method)">#<strong>using_object_ids?</strong>  &#x21d2; true | false </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Convenience method for determining if we are using <code>BSON::ObjectIds</code> as our id.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#attribute_names-instance_method" title="#attribute_names (instance method)">#<strong>attribute_names</strong>  &#x21d2; Array&lt;String&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of names for the attributes available on this object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cleanse_localized_field_names-instance_method" title="#cleanse_localized_field_names (instance method)">#<strong>cleanse_localized_field_names</strong>(name)  &#x21d2; Field </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the _translations from the given field name.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#database_field_name-instance_method" title="#database_field_name (instance method)">#<strong>database_field_name</strong>(name)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the name of the provided field as it is stored in the database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#extract_id_field-instance_method" title="#extract_id_field (instance method)">#<strong>extract_id_field</strong>(attributes)  &#x21d2; Object </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Extracts the id field from the specified attributes hash based on aliases defined in this class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#field-instance_method" title="#field (instance method)">#<strong>field</strong>(name, options = {})  &#x21d2; Field </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Defines all the fields that are accessible on the <a href="../Document.html" title="Mongoid::Document (module)"><code>::Mongoid::Document</code></a> For each field that is defined, a getter and setter will be added as an instance method to the <a href="../Document.html" title="Mongoid::Document (module)"><code>::Mongoid::Document</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#id_fields-instance_method" title="#id_fields (instance method)">#<strong>id_fields</strong>  &#x21d2; Array&lt;Symbol | String&gt; </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the list of id fields for this model class, as both strings and symbols.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#replace_field-instance_method" title="#replace_field (instance method)">#<strong>replace_field</strong>(name, type)  &#x21d2; Serializable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Replace a field with a new type.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#traverse_association_tree-instance_method" title="#traverse_association_tree (instance method)">#<strong>traverse_association_tree</strong>(key) {|The, The, Whether| ... } &#x21d2; Field </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Traverse down the association tree and search for the field for the given key.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="using_object_ids?-instance_method">
  <h3 class='signature ro first'>
    #<strong>using_object_ids?</strong>  &#x21d2; <code>true</code> | <code>false</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Convenience method for determining if we are using <code>BSON::ObjectIds</code> as our id.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Does this class use object ids?</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_person'>person</span>.<span class='id identifier rubyid_using_object_ids?'>using_object_ids?</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>If the class uses BSON::ObjectIds for the id.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L514-L516'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='514' data-end='516'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 514</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_using_object_ids?'>using_object_ids?</span>
  <span class='id identifier rubyid_fields'>fields</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_object_id_field?'>object_id_field?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="attribute_names-instance_method">
  <h3 class='signature  first'>
    #<strong>attribute_names</strong>  &#x21d2; <a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../String.html" title="String (class)">String</a>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of names for the attributes available on this object.</p>

<p>Provides the field names in an ORM-agnostic way. <a href="../../Rails.html" title="Rails (module)"><code>::Rails</code></a> v3.1+ uses this method to automatically wrap params in JSON requests.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the field names</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Model</span>.<span class='id identifier rubyid_attribute_names'>attribute_names</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../String.html" title="String (class)">String</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>The field names</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L454-L456'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='454' data-end='456'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 454</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attribute_names'>attribute_names</span>
  <span class='id identifier rubyid_fields'>fields</span>.<span class='id identifier rubyid_keys'>keys</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cleanse_localized_field_names-instance_method">
  <h3 class='signature '>
    #<strong>cleanse_localized_field_names</strong>(name)  &#x21d2; <code>Field</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the _translations from the given field name. This is done only when there doesn’t already exist a field name or relation with the same name (i.e. with the _translations suffix). This check for an existing field is done recursively</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../../String.html" title="String (class)">String</a> | <a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the field to cleanse.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Field</code>)</span>
&mdash;    <div class='inline'>
<p>The field name without _translations</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L100-L126'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='100' data-end='126'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cleanse_localized_field_names'>cleanse_localized_field_names</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_database_field_name'><a href="#database_field_name-instance_method" title="Mongoid::Fields::ClassMethods#database_field_name (method)">database_field_name</a></span>(<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span>)

  <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='kw'>self</span>
  [].<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_res'>res</span><span class='op'>|</span>
    <span class='id identifier rubyid_ar'>ar</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>)
    <span class='id identifier rubyid_ar'>ar</span>.<span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fn'>fn</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_fn'>fn</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_fields'>fields</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_fn'>fn</span>) <span class='op'>||</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_relations'>relations</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_fn'>fn</span>)
        <span class='kw'>if</span> <span class='id identifier rubyid_fn'>fn</span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='const'><a href="../Fields.html#TRANSLATIONS_SFX-constant" title="Mongoid::Fields::TRANSLATIONS_SFX (constant)">TRANSLATIONS_SFX</a></span>)
          <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_fn'>fn</span>.<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='const'><a href="../Fields.html#TRANSLATIONS_SFX-constant" title="Mongoid::Fields::TRANSLATIONS_SFX (constant)">TRANSLATIONS_SFX</a></span>)
        <span class='kw'>else</span>
          <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_fn'>fn</span>
        <span class='kw'>end</span>

      <span class='kw'>end</span>
      <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_key'>key</span>)

      <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_fields'>fields</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_fn'>fn</span>)
        <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_ar'>ar</span>.<span class='id identifier rubyid_drop'>drop</span>(<span class='id identifier rubyid_i'>i</span><span class='op'>+</span><span class='int'>1</span>).<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>)) <span class='kw'>unless</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>==</span> <span class='id identifier rubyid_ar'>ar</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span>
        <span class='kw'>break</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_relations'>relations</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_fn'>fn</span>)
        <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_relations'>relations</span>[<span class='id identifier rubyid_key'>key</span>].<span class='id identifier rubyid_klass'>klass</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="database_field_name-instance_method">
  <h3 class='signature '>
    #<strong>database_field_name</strong>(name)  &#x21d2; <a href="../../String.html" title="String (class)">String</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the name of the provided field as it is stored in the database. Used in determining if the field is aliased or not.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../../String.html" title="String (class)">String</a> | <a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The name to get.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the field as it’s stored in the db.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L464-L466'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='464' data-end='466'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 464</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_database_field_name'>database_field_name</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='const'><a href="../Fields.html" title="Mongoid::Fields (module)">Fields</a></span>.<span class='id identifier rubyid_database_field_name'><a href="../Fields.html#database_field_name-class_method" title="Mongoid::Fields.database_field_name (method)">database_field_name</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_relations'>relations</span><span class='comma'>,</span> <span class='id identifier rubyid_aliased_fields'>aliased_fields</span><span class='comma'>,</span> <span class='id identifier rubyid_aliased_associations'>aliased_associations</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="extract_id_field-instance_method">
  <h3 class='signature nodoc'>
    #<strong>extract_id_field</strong>(attributes)  &#x21d2; <code>Object</code> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Extracts the id field from the specified attributes hash based on aliases defined in this class.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>attributes</span>
    <span class='type'>(<a href="../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The attributes to inspect.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Object</code>)</span>
&mdash;    <div class='inline'>
<p>The id value.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L83-L90'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='83' data-end='90'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 83</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_id_field'>extract_id_field</span>(<span class='id identifier rubyid_attributes'>attributes</span>)
  <span class='id identifier rubyid_id_fields'><a href="#id_fields-instance_method" title="Mongoid::Fields::ClassMethods#id_fields (method)">id_fields</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_attributes'>attributes</span>[<span class='id identifier rubyid_k'>k</span>]
      <span class='kw'>return</span> <span class='id identifier rubyid_v'>v</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="field-instance_method">
  <h3 class='signature '>
    #<strong>field</strong>(name, options = {})  &#x21d2; <code>Field</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defines all the fields that are accessible on the <a href="../Document.html" title="Mongoid::Document (module)"><code>::Mongoid::Document</code></a> For each field that is defined, a getter and setter will be added as an instance method to the <a href="../Document.html" title="Mongoid::Document (module)"><code>::Mongoid::Document</code></a>.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Define a field.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_field'>field</span> <span class='symbeg'>:</span><span class='id identifier rubyid_score'>score</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='const'><a href="../../Integer.html" title="Integer (class)">Integer</a></span><span class='comma'>,</span> <span class='label'>default:</span> <span class='int'>0</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the field.</p>
</div>
  </li>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<a href="../../Hash.html" title="Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>The options to pass to the field.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:type</span>
          <span class='type'>(<code>Class</code> | <a href="../../Symbol.html" title="Symbol (class)">Symbol</a> | <a href="../../String.html" title="String (class)">String</a>)</span>
            &mdash; <div class='inline'>
<p>The type of the field.</p>
</div>        </li>
        <li>
          <span class='name'>:label</span>
          <span class='type'>(<a href="../../String.html" title="String (class)">String</a>)</span>
            &mdash; <div class='inline'>
<p>The label for the field.</p>
</div>        </li>
        <li>
          <span class='name'>:default</span>
          <span class='type'>(<code>Object</code> | <code>Proc</code>)</span>
            &mdash; <div class='inline'>
<p>The field’s default.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Field</code>)</span>
&mdash;    <div class='inline'>
<p>The generated field</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L483-L491'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='483' data-end='491'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 483</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_field'>field</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="../Fields.html#options-class_method" title="Mongoid::Fields.options (method)">options</a></span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_named'>named</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Validators.html" title="Mongoid::Fields::Validators (module)">Validators</a></span><span class='op'>::</span><span class='const'><a href="Validators/Macro.html" title="Mongoid::Fields::Validators::Macro (module)">Macro</a></span>.<span class='id identifier rubyid_validate'><a href="Validators/Macro.html#validate-instance_method" title="Mongoid::Fields::Validators::Macro#validate (method)">validate</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="../Fields.html#options-class_method" title="Mongoid::Fields.options (method)">options</a></span>)
  <span class='id identifier rubyid_added'>added</span> <span class='op'>=</span> <span class='id identifier rubyid_add_field'>add_field</span>(<span class='id identifier rubyid_named'>named</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="../Fields.html#options-class_method" title="Mongoid::Fields.options (method)">options</a></span>)
  <span class='id identifier rubyid_descendants'>descendants</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_subclass'>subclass</span><span class='op'>|</span>
    <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_add_field'>add_field</span>(<span class='id identifier rubyid_named'>named</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="../Fields.html#options-class_method" title="Mongoid::Fields.options (method)">options</a></span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_added'>added</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="id_fields-instance_method">
  <h3 class='signature nodoc'>
    #<strong>id_fields</strong>  &#x21d2; <a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../Symbol.html" title="Symbol (class)">Symbol</a> | <a href="../../String.html" title="String (class)">String</a>&gt; 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the list of id fields for this model class, as both strings and symbols.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../Symbol.html" title="Symbol (class)">Symbol</a> | <a href="../../String.html" title="String (class)">String</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>List of id fields.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L64-L73'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='64' data-end='73'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 64</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_id_fields'>id_fields</span>
  <span class='const'><a href="../Fields.html#IDS-constant" title="Mongoid::Fields::IDS (constant)">IDS</a></span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id_fields'>id_fields</span><span class='op'>|</span>
    <span class='id identifier rubyid_aliased_fields'>aliased_fields</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_id_fields'>id_fields</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>
        <span class='id identifier rubyid_id_fields'>id_fields</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_k'>k</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="replace_field-instance_method">
  <h3 class='signature '>
    #<strong>replace_field</strong>(name, type)  &#x21d2; <a href="../Serializable.html" title="Mongoid::Serializable (module)">Serializable</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Replace a field with a new type.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Replace the field.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Model</span>.<span class='id identifier rubyid_replace_field'>replace_field</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="../../String.html" title="String (class)">String</a></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the field.</p>
</div>
  </li>
  <li>
    <span class='name'>type</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>The new type of field.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Serializable.html" title="Mongoid::Serializable (module)">Serializable</a>)</span>
&mdash;    <div class='inline'>
<p>The new field.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L502-L505'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='502' data-end='505'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 502</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_replace_field'>replace_field</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span>)
  <span class='id identifier rubyid_remove_defaults'>remove_defaults</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_add_field'>add_field</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_fields'>fields</span>[<span class='id identifier rubyid_name'>name</span>].<span class='id identifier rubyid_options'><a href="../Fields.html#options-class_method" title="Mongoid::Fields.options (method)">options</a></span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>type:</span> <span class='id identifier rubyid_type'>type</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="traverse_association_tree-instance_method">
  <h3 class='signature nodoc'>
    #<strong>traverse_association_tree</strong>(key) {|The, The, Whether| ... } &#x21d2; <code>Field</code> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Traverse down the association tree and search for the field for the given key.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>key</span>
    <span class='type'>(<a href="../../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>The key used to search the association tree.</p>
</div>
  </li>
  <li>
    <span class='name'>&amp;block</span>
    <span class='type'></span>
&mdash;    <div class='inline'>
<p>The block.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Yield Parameters:</p>
<ul class='yieldparam'>
  <li>
    <span class='name'>The</span>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>current method.</p>
</div>
  </li>
  <li>
    <span class='name'>The</span>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a> | <a href="../../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>field or the relation.</p>
</div>
  </li>
  <li>
    <span class='name'>Whether</span>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>the second yield parameter is a field or not.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Field</code>)</span>
&mdash;    <div class='inline'>
<p>The field found for the given key at the end of the search. This will return nil if the last thing found is an association or no field was found for the given key.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/fields.rb#L533-L535'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='533' data-end='535'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/fields.rb', line 533</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_traverse_association_tree'>traverse_association_tree</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='const'><a href="../Fields.html" title="Mongoid::Fields (module)">Fields</a></span>.<span class='id identifier rubyid_traverse_association_tree'><a href="../Fields.html#traverse_association_tree-class_method" title="Mongoid::Fields.traverse_association_tree (method)">traverse_association_tree</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_fields'>fields</span><span class='comma'>,</span> <span class='id identifier rubyid_relations'>relations</span><span class='comma'>,</span> <span class='id identifier rubyid_aliased_associations'>aliased_associations</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>