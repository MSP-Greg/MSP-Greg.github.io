<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Mongoid::SearchIndexable::ClassMethods &mdash; Mongoid master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongoid::SearchIndexable::ClassMethods",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Mongoid master</a> &raquo; 
      <a href='../../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../../Mongoid.html" title="Mongoid (module)">Mongoid</a> &raquo; 
        <a href="../SearchIndexable.html" title="Mongoid::SearchIndexable (module)">SearchIndexable</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ClassMethods&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Mongoid::SearchIndexable::ClassMethods</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Extended In:</div>
      <div class='box_11'>
        <a href="../Composable.html" title="Mongoid::Composable (module)"><code>::Mongoid::Composable</code></a>,
          <a href="../Document.html" title="Mongoid::Document (module)"><code>::Mongoid::Document</code></a>
      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L59'>lib/mongoid/search_indexable.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Implementations for the feature’s class-level methods.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#create_search_indexes-instance_method" title="#create_search_indexes (instance method)">#<strong>create_search_indexes</strong>  &#x21d2; Array&lt;String&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Request the creation of all registered search indices.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#remove_search_index-instance_method" title="#remove_search_index (instance method)">#<strong>remove_search_index</strong>(name: nil, id: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the search index specified by the given name or id.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#remove_search_indexes-instance_method" title="#remove_search_indexes (instance method)">#<strong>remove_search_indexes</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Request the removal of all registered search indexes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#search_index-instance_method" title="#search_index (instance method)">#<strong>search_index</strong>(name_or_defn, defn = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds an index definition for the provided single or compound keys.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#search_indexes-instance_method" title="#search_indexes (instance method)">#<strong>search_indexes</strong>(options = {})  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>A convenience method for querying the search indexes available on the current model’s collection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wait_for_search_indexes-instance_method" title="#wait_for_search_indexes (instance method)">#<strong>wait_for_search_indexes</strong>(names, interval: 5) {|SearchIndexable::Status| ... } </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Waits for the named search indexes to be created.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#get_indexes-instance_method" title="#get_indexes (instance method)">#<strong>get_indexes</strong>(names)  &#x21d2; Array&lt;Hash&gt; </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Retrieves the index records for the indexes with the given names.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="create_search_indexes-instance_method">
  <h3 class='signature  first'>
    #<strong>create_search_indexes</strong>  &#x21d2; <a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../String.html" title="String (class)">String</a>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Request the creation of all registered search indices. Note that the search indexes are created asynchronously, and may take several minutes to be fully available.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../String.html" title="String (class)">String</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>The names of the search indexes.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L65-L69'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='65' data-end='69'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/search_indexable.rb', line 65</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_search_indexes'>create_search_indexes</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_search_index_specs'>search_index_specs</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_collection'>collection</span>.<span class='id identifier rubyid_search_indexes'><a href="#search_indexes-instance_method" title="Mongoid::SearchIndexable::ClassMethods#search_indexes (method)">search_indexes</a></span>.<span class='id identifier rubyid_create_many'>create_many</span>(<span class='id identifier rubyid_search_index_specs'>search_index_specs</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_indexes-instance_method">
  <h3 class='signature priv'>
    #<strong>get_indexes</strong>(names)  &#x21d2; <a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../Hash.html" title="Hash (class)">Hash</a>&gt;  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Retrieves the index records for the indexes with the given names.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>names</span>
    <span class='type'>(<a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../String.html" title="String (class)">String</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>the index names to query</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../Hash.html" title="Hash (class)">Hash</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>the raw index documents</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L162-L164'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='162' data-end='164'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/search_indexable.rb', line 162</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_indexes'>get_indexes</span>(<span class='id identifier rubyid_names'>names</span>)
  <span class='id identifier rubyid_collection'>collection</span>.<span class='id identifier rubyid_search_indexes'><a href="#search_indexes-instance_method" title="Mongoid::SearchIndexable::ClassMethods#search_indexes (method)">search_indexes</a></span>.<span class='id identifier rubyid_select'>select</span> { <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_i'>i</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span>]) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_search_index-instance_method">
  <h3 class='signature '>
    #<strong>remove_search_index</strong>(name: nil, id: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the search index specified by the given name or id. Either name OR id must be given, but not both.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../../String.html" title="String (class)">String</a> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>the name of the index to remove</p>
</div>
  </li>
  <li>
    <span class='name'>id</span>
    <span class='type'>(<a href="../../String.html" title="String (class)">String</a> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>the id of the index to remove</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L107-L114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='107' data-end='114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/search_indexable.rb', line 107</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_search_index'>remove_search_index</span>(<span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_logger'>logger</span>.<span class='id identifier rubyid_info'>info</span>(
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MONGOID: Removing search index &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span> <span class='op'>||</span> <span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; </span><span class='tstring_end'>&quot;</span></span> \
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on collection &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_collection'>collection</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;.</span><span class='tstring_end'>&quot;</span></span>
  )

  <span class='id identifier rubyid_collection'>collection</span>.<span class='id identifier rubyid_search_indexes'><a href="#search_indexes-instance_method" title="Mongoid::SearchIndexable::ClassMethods#search_indexes (method)">search_indexes</a></span>.<span class='id identifier rubyid_drop_one'>drop_one</span>(<span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='id identifier rubyid_id'>id</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_search_indexes-instance_method">
  <h3 class='signature '>
    #<strong>remove_search_indexes</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>It would be nice if this could remove ONLY the search indexes</p>
</div>
  </div>


<p>Request the removal of all registered search indexes. Note that the search indexes are removed asynchronously, and may take several minutes to be fully deleted.</p>

<p>that have been declared on the model, but because the model may not name the index, we can’t guarantee that we’ll know the name or id of the corresponding indexes. It is not unreasonable to assume, though, that the intention is for the model to declare, one-to-one, all desired search indexes, so removing all search indexes ought to suffice. If a specific index or set of indexes needs to be removed instead, consider using search_indexes.each with remove_search_index.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L128-L132'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='128' data-end='132'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/search_indexable.rb', line 128</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_search_indexes'>remove_search_indexes</span>
  <span class='id identifier rubyid_search_indexes'><a href="#search_indexes-instance_method" title="Mongoid::SearchIndexable::ClassMethods#search_indexes (method)">search_indexes</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='op'>|</span>
    <span class='id identifier rubyid_remove_search_index'><a href="#remove_search_index-instance_method" title="Mongoid::SearchIndexable::ClassMethods#remove_search_index (method)">remove_search_index</a></span> <span class='label'>id:</span> <span class='id identifier rubyid_spec'>spec</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>]
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="search_index-instance_method">
  <h3 class='signature '>
    #<strong>search_index</strong>(name_or_defn, defn = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds an index definition for the provided single or compound keys.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Create a basic index.</p>
</div></p>
      <pre class='example code ruby'><code><span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'><a href="../../Mongoid.html" title="Mongoid (module)">Mongoid</a></span><span class='op'>::</span><span class='const'><a href="../Document.html" title="Mongoid::Document (module)">Document</a></span>
  <span class='id identifier rubyid_field'>field</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='const'><a href="../../String.html" title="String (class)">String</a></span>
  <span class='id identifier rubyid_search_index'>search_index</span>({ <span class='op'>...</span> })
  <span class='id identifier rubyid_search_index'>search_index</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name_of_index'>name_of_index</span><span class='comma'>,</span> { <span class='op'>...</span> }
<span class='kw'>end</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name_or_defn</span>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a> | <a href="../../String.html" title="String (class)">String</a> | <a href="../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>Either the name of the index to define, or the index definition.</p>
</div>
  </li>
  <li>
    <span class='name'>defn</span>
    <span class='type'>(<a href="../../Hash.html" title="Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>The search index definition.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L147-L153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='147' data-end='153'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/search_indexable.rb', line 147</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_search_index'>search_index</span>(<span class='id identifier rubyid_name_or_defn'>name_or_defn</span><span class='comma'>,</span> <span class='id identifier rubyid_defn'>defn</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name_or_defn'>name_or_defn</span>
  <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_defn'>defn</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>)

  <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> { <span class='label'>definition:</span> <span class='id identifier rubyid_defn'>defn</span> }.<span class='id identifier rubyid_tap'>tap</span> { <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>] <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span> }
  <span class='id identifier rubyid_search_index_specs'>search_index_specs</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_spec'>spec</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="search_indexes-instance_method">
  <h3 class='signature '>
    #<strong>search_indexes</strong>(options = {})  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>A convenience method for querying the search indexes available on the current model’s collection.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<a href="../../Hash.html" title="Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>the options to pass through to the search index query.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:id</span>
          <span class='type'>(<a href="../../String.html" title="String (class)">String</a>)</span>
            &mdash; <div class='inline'>
<p>The id of the specific index to query (optional)</p>
</div>        </li>
        <li>
          <span class='name'>:name</span>
          <span class='type'>(<a href="../../String.html" title="String (class)">String</a>)</span>
            &mdash; <div class='inline'>
<p>The name of the specific index to query (optional)</p>
</div>        </li>
        <li>
          <span class='name'>:aggregate</span>
          <span class='type'>(<a href="../../Hash.html" title="Hash (class)">Hash</a>)</span>
            &mdash; <div class='inline'>
<p>The options hash to pass to the aggregate command (optional)</p>
</div>        </li>
    </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L98-L100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='98' data-end='100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/search_indexable.rb', line 98</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_search_indexes'>search_indexes</span>(<span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_collection'>collection</span>.<span class='id identifier rubyid_search_indexes'>search_indexes</span>(<span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wait_for_search_indexes-instance_method">
  <h3 class='signature '>
    #<strong>wait_for_search_indexes</strong>(names, interval: 5) {|SearchIndexable::Status| ... } 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Waits for the named search indexes to be created.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>names</span>
    <span class='type'>(<a href="../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../String.html" title="String (class)">String</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>the list of index names to wait for</p>
</div>
  </li>
  <li>
    <span class='name'>interval</span>
    <span class='type'>(<a href="../../Integer.html" title="Integer (class)">Integer</a>)</span>
&mdash;    <div class='inline'>
<p>the number of seconds to wait before polling again (only used when a progress callback is given).</p>
</div>
  </li>
</ul>
<p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<a href="Status.html" title="Mongoid::SearchIndexable::Status (class)">SearchIndexable::Status</a>)</span>
&mdash;    <div class='inline'>
<p>the status object</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/search_indexable.rb#L78-L86'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='78' data-end='86'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/search_indexable.rb', line 78</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_wait_for_search_indexes'>wait_for_search_indexes</span>(<span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='label'>interval:</span> <span class='int'>5</span>)
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><a href="Status.html" title="Mongoid::SearchIndexable::Status (class)">Status</a></span>.<span class='id identifier rubyid_new'><a href="Status.html#new-class_method" title="Mongoid::SearchIndexable::Status.new (method)">new</a></span>(<span class='id identifier rubyid_get_indexes'><a href="#get_indexes-instance_method" title="Mongoid::SearchIndexable::ClassMethods#get_indexes (method)">get_indexes</a></span>(<span class='id identifier rubyid_names'>names</span>))
    <span class='kw'>yield</span> <span class='id identifier rubyid_status'>status</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_ready?'>ready?</span>

    <span class='id identifier rubyid_sleep'>sleep</span> <span class='id identifier rubyid_interval'>interval</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>