<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Mongoid::Contextual::Mongo::DocumentsLoader &mdash; Mongoid master</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongoid::Contextual::Mongo::DocumentsLoader",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Mongoid master</a> &raquo; 
      <a href='../../../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../../../Mongoid.html" title="Mongoid (module)">Mongoid</a> &raquo; 
        <a href="../../Contextual.html" title="Mongoid::Contextual (module)">Contextual</a> &raquo; 
        <a href="../Mongo.html" title="Mongoid::Contextual::Mongo (class)">Mongo</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>DocumentsLoader&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Mongoid::Contextual::Mongo::DocumentsLoader  <span class='private note title'>Private</span>
</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This class is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Forwardable
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="../../Association/EagerLoadable.html" title="Mongoid::Association::EagerLoadable (module)"><code>::Mongoid::Association::EagerLoadable</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L10'>lib/mongoid/contextual/mongo/documents_loader.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Loads documents for the provided criteria.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#executor-class_method" title=".executor (class method)">.<strong>executor</strong>(name = Mongoid.async_query_executor)  &#x21d2; Concurrent::ImmediateExecutor | Concurrent::ThreadPoolExecutor </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns suitable executor according to <a href="../../../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> config options.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#global_thread_pool_async_query_executor-class_method" title=".global_thread_pool_async_query_executor (class method)">.<strong>global_thread_pool_async_query_executor</strong>  &#x21d2; Concurrent::ThreadPoolExecutor </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns asynchronous executor to be used when async_query_executor config option is set to <code>:global_thread_pool</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#immediate_executor-class_method" title=".immediate_executor (class method)">.<strong>immediate_executor</strong>  &#x21d2; Concurrent::ImmediateExecutor </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns synchronous executor to be used when async_query_executor config option is set to <code>:immediate</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(view, klass, criteria, executor: self.class.executor)  &#x21d2; DocumentsLoader </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Instantiates the document loader instance and immediately schedules its execution using the provided executor.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#criteria-instance_method" title="#criteria (instance method)">#<strong>criteria</strong>  &#x21d2; Mongoid::Criteria </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#pending%3F-instance_method" title="#pending? (instance method)">#<strong>pending?</strong>  &#x21d2; true | false </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns false or true whether the loader is in pending state.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#started%3F-instance_method" title="#started? (instance method)">#<strong>started?</strong>  &#x21d2; true | false </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns false or true whether the loader is in started state.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="../../Association/EagerLoadable.html" title="Mongoid::Association::EagerLoadable (module)"><code>::Mongoid::Association::EagerLoadable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="../../Association/EagerLoadable.html#eager_loadable%3F-instance_method" title="Mongoid::Association::EagerLoadable#eager_loadable? (method)">#eager_loadable?</a></td>
      <td><div class='inline'><p>Indicates whether the criteria has association inclusions which should be eager loaded.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#execute-instance_method" title="#execute (instance method)">#<strong>execute</strong>  &#x21d2; Array&lt;Mongoid::Document&gt; </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Loads records specified by <code>@criteria</code> from the database, and convert them to <a href="../../../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> documents of <code>@klass</code> type.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#unschedule-instance_method" title="#unschedule (instance method)">#<strong>unschedule</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Mark the loader as unscheduled.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#start-instance_method" title="#start (instance method)">#<strong>start</strong>  &#x21d2; true | false </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Mark the loader as started if possible.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="../../Association/EagerLoadable.html" title="Mongoid::Association::EagerLoadable (module)"><code>::Mongoid::Association::EagerLoadable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../../Association/EagerLoadable.html#eager_load-instance_method" title="Mongoid::Association::EagerLoadable#eager_load (method)">#eager_load</a></td>
      <td><div class='inline'><p>Load the associations for the given documents.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../../Association/EagerLoadable.html#preload-instance_method" title="Mongoid::Association::EagerLoadable#preload (method)">#preload</a></td>
      <td><div class='inline'><p>Load the associations for the given documents.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="executor-class_method">
  <h3 class='signature nodoc first'>
    .<strong>executor</strong>(name = Mongoid.async_query_executor)  &#x21d2; <code>Concurrent::ImmediateExecutor</code> | <code>Concurrent::ThreadPoolExecutor</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns suitable executor according to <a href="../../../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> config options.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../../../String.html" title="String (class)">String</a> | <a href="../../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
    <em class='default'>(defaults to: <tt>Mongoid.async_query_executor</tt>)</em>
&mdash;    <div class='inline'>
<p>The query executor name, can be either <code>:immediate</code> or <code>:global_thread_pool</code>. Defaulted to <code>async_query_executor</code> config option.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Concurrent::ImmediateExecutor</code> | <code>Concurrent::ThreadPoolExecutor</code>)</span>
&mdash;    <div class='inline'>
<p>The executor to be used to execute document loading tasks.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../../Errors/InvalidQueryExecutor.html" title="Mongoid::Errors::InvalidQueryExecutor (class)">Errors::InvalidQueryExecutor</a>)</span>
&mdash;    <div class='inline'>
<p>If an unknown name is provided.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L61-L70'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='61' data-end='70'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 61</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_executor'>executor</span>(<span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='const'><a href="../../../Mongoid.html" title="Mongoid (module)">Mongoid</a></span>.<span class='id identifier rubyid_async_query_executor'>async_query_executor</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_immediate'>immediate</span>
    <span class='id identifier rubyid_immediate_executor'><a href="#immediate_executor-class_method" title="Mongoid::Contextual::Mongo::DocumentsLoader.immediate_executor (method)">immediate_executor</a></span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_global_thread_pool'>global_thread_pool</span>
    <span class='id identifier rubyid_global_thread_pool_async_query_executor'><a href="#global_thread_pool_async_query_executor-class_method" title="Mongoid::Contextual::Mongo::DocumentsLoader.global_thread_pool_async_query_executor (method)">global_thread_pool_async_query_executor</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/InvalidQueryExecutor.html" title="Mongoid::Errors::InvalidQueryExecutor (class)">InvalidQueryExecutor</a></span>.<span class='id identifier rubyid_new'><a href="../../Errors/InvalidQueryExecutor.html#new-class_method" title="Mongoid::Errors::InvalidQueryExecutor.new (method)">new</a></span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="global_thread_pool_async_query_executor-class_method">
  <h3 class='signature nodoc'>
    .<strong>global_thread_pool_async_query_executor</strong>  &#x21d2; <code>Concurrent::ThreadPoolExecutor</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns asynchronous executor to be used when async_query_executor config option is set to <code>:global_thread_pool</code>. This executor runs operations on background threads using a thread pool.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Concurrent::ThreadPoolExecutor</code>)</span>
&mdash;    <div class='inline'>
<p>The executor to be used to execute document loading tasks.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L32-L49'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='32' data-end='49'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 32</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_global_thread_pool_async_query_executor'>global_thread_pool_async_query_executor</span>
  <span class='id identifier rubyid_create_pool'>create_pool</span> <span class='op'>=</span> <span class='const'>Proc</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Mongoid::Contextual::Mongo::DocumentsLoader.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_concurrency'>concurrency</span><span class='op'>|</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ThreadPoolExecutor</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Mongoid::Contextual::Mongo::DocumentsLoader.new (method)">new</a></span>(
      <span class='label'>min_threads:</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='label'>max_threads:</span> <span class='id identifier rubyid_concurrency'>concurrency</span><span class='comma'>,</span>
      <span class='label'>max_queue:</span> <span class='id identifier rubyid_concurrency'>concurrency</span> <span class='op'>*</span> <span class='int'>4</span><span class='comma'>,</span>
      <span class='label'>fallback_policy:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_caller_runs'>caller_runs</span>
    )
  <span class='kw'>end</span>
  <span class='id identifier rubyid_concurrency'>concurrency</span> <span class='op'>=</span> <span class='const'><a href="../../../Mongoid.html" title="Mongoid (module)">Mongoid</a></span>.<span class='id identifier rubyid_global_executor_concurrency'>global_executor_concurrency</span> <span class='op'>||</span> <span class='int'>4</span>
  <span class='cvar'>@@global_thread_pool_async_query_executor</span> <span class='op'>||=</span> <span class='id identifier rubyid_create_pool'>create_pool</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_concurrency'>concurrency</span>)
  <span class='kw'>if</span> <span class='cvar'>@@global_thread_pool_async_query_executor</span>.<span class='id identifier rubyid_max_length'>max_length</span> <span class='op'>!=</span> <span class='id identifier rubyid_concurrency'>concurrency</span>
    <span class='id identifier rubyid_old_pool'>old_pool</span> <span class='op'>=</span> <span class='cvar'>@@global_thread_pool_async_query_executor</span>
    <span class='cvar'>@@global_thread_pool_async_query_executor</span> <span class='op'>=</span> <span class='id identifier rubyid_create_pool'>create_pool</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_concurrency'>concurrency</span>)
    <span class='id identifier rubyid_old_pool'>old_pool</span>.<span class='id identifier rubyid_shutdown'>shutdown</span>
  <span class='kw'>end</span>
  <span class='cvar'>@@global_thread_pool_async_query_executor</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="immediate_executor-class_method">
  <h3 class='signature nodoc'>
    .<strong>immediate_executor</strong>  &#x21d2; <code>Concurrent::ImmediateExecutor</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns synchronous executor to be used when async_query_executor config option is set to <code>:immediate</code>. This executor runs all operations on the current thread, blocking as necessary.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Concurrent::ImmediateExecutor</code>)</span>
&mdash;    <div class='inline'>
<p>The executor to be used to execute document loading tasks.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L22-L24'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='22' data-end='24'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 22</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_immediate_executor'>immediate_executor</span>
  <span class='cvar'>@@immediate_executor</span> <span class='op'>||=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ImmediateExecutor</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Mongoid::Contextual::Mongo::DocumentsLoader.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="criteria-instance_method">
  <h3 class='signature rw  nodoc first'>
    #<strong>criteria</strong>  &#x21d2; <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Mongoid::Criteria</a>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../Criteria.html" title="Mongoid::Criteria (class)">Mongoid::Criteria</a>)</span>
&mdash;    <div class='inline'>
<p><a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> that specifies which documents should be loaded. Exposed here because <code>eager_loadable?</code> method from <a href="../../Association/EagerLoadable.html" title="Mongoid::Association::EagerLoadable (module)"><code>::Mongoid::Association::EagerLoadable</code></a> expects this to be available.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L75-L75'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='75' data-end='75'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 75</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_criteria'>criteria</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pending?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>pending?</strong>  &#x21d2; <code>true</code> | <code>false</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns false or true whether the loader is in pending state.</p>

<p>Pending state means that the loader execution has been scheduled, but has not been started yet.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>true if the loader is in pending state, otherwise false.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L107-L111'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='107' data-end='111'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 107</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pending?'>pending?</span>
  <span class='ivar'>@mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@state</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pending'>pending</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="started?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>started?</strong>  &#x21d2; <code>true</code> | <code>false</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns false or true whether the loader is in started state.</p>

<p>Started state means that the loader execution has been started. Note that the loader stays in this state even after the execution completed (successfully or failed).</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>true if the loader is in started state, otherwise false.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L121-L125'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='121' data-end='125'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 121</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_started?'>started?</span>
  <span class='ivar'>@mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@state</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_started'>started</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="execute-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>execute</strong>  &#x21d2; <a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../Document.html" title="Mongoid::Document (module)">Mongoid::Document</a>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Loads records specified by <code>@criteria</code> from the database, and convert them to <a href="../../../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> documents of <code>@klass</code> type.</p>

<p>This method is called by the task (possibly asynchronous) scheduled when creating an instance of the loader. However, this method can be called directly, if it is desired to execute loading on the caller thread immediately.</p>

<p>Calling this method does not change the state of the loader.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../Document.html" title="Mongoid::Document (module)">Mongoid::Document</a>&gt;)</span>
&mdash;    <div class='inline'>
<p><a href="../../../Array.html" title="Array (class)"><code>::Array</code></a> of document loaded from the database.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L152-L158'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='152' data-end='158'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 152</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span>
  <span class='id identifier rubyid_documents'>documents</span> <span class='op'>=</span> <span class='ivar'>@view</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_doc'>doc</span><span class='op'>|</span>
    <span class='const'><a href="../../Factory.html" title="Mongoid::Factory (module)">Factory</a></span>.<span class='id identifier rubyid_from_db'><a href="../../Factory.html#from_db-instance_method" title="Mongoid::Factory#from_db (method)">from_db</a></span>(<span class='ivar'>@klass</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span><span class='comma'>,</span> <span class='ivar'>@criteria</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_eager_load'>eager_load</span>(<span class='id identifier rubyid_documents'>documents</span>) <span class='kw'>if</span> <span class='id identifier rubyid_eager_loadable?'>eager_loadable?</span>
  <span class='id identifier rubyid_documents'>documents</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>start</strong>  &#x21d2; <code>true</code> | <code>false</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Mark the loader as started if possible.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the state was changed to <code>:started</code>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L165-L174'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='165' data-end='174'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 165</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start'>start</span>
  <span class='ivar'>@mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='ivar'>@state</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pending'>pending</span>
      <span class='ivar'>@state</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_started'>started</span>
      <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unschedule-instance_method">
  <h3 class='signature nodoc'>
    #<strong>unschedule</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Mark the loader as unscheduled.</p>

<p>If the loader is marked unscheduled, it will not be executed. The only option to load the documents is to call <a href="#execute-instance_method" title="Mongoid::Contextual::Mongo::DocumentsLoader#execute (method)">#execute</a> method directly.</p>

<p>Please note that if execution of a task has been already started, unscheduling does not have any effect.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/contextual/mongo/documents_loader.rb#L134-L138'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='134' data-end='138'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/contextual/mongo/documents_loader.rb', line 134</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unschedule'>unschedule</span>
  <span class='ivar'>@mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@state</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_cancelled'>cancelled</span> <span class='kw'>unless</span> <span class='ivar'>@state</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_started'>started</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>