<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Mongoid::Threaded &mdash; Mongoid master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongoid::Threaded",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Mongoid master</a> &raquo; 
      <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../Mongoid.html" title="Mongoid (module)">Mongoid</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Threaded&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Mongoid::Threaded</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="Threaded/Lifecycle.html" title="Mongoid::Threaded::Lifecycle (module)"><code>Lifecycle</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L8'>lib/mongoid/threaded.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded/lifecycle.rb#L5'>lib/mongoid/threaded/lifecycle.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>This module contains logic for easy access to objects that have a lifecycle on the current thread.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='ASSIGN-constant' class='summary_signature'>ASSIGN =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded/lifecycle.rb#L7-L7'># File 'lib/mongoid/threaded/lifecycle.rb', line 7</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>assign</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='AUTOSAVES_KEY-constant' class='summary_signature'>AUTOSAVES_KEY =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L20-L20'># File 'lib/mongoid/threaded.rb', line 20</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:autosaves</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='BIND-constant' class='summary_signature'>BIND =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded/lifecycle.rb#L6-L6'># File 'lib/mongoid/threaded/lifecycle.rb', line 6</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bind</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='BUILD-constant' class='summary_signature'>BUILD =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded/lifecycle.rb#L8-L8'># File 'lib/mongoid/threaded/lifecycle.rb', line 8</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>build</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='CLIENTS_KEY-constant' class='summary_signature'>CLIENTS_KEY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Constant for the key to store clients.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L12-L12'># File 'lib/mongoid/threaded.rb', line 12</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:clients</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='CLIENT_OVERRIDE_KEY-constant' class='summary_signature'>CLIENT_OVERRIDE_KEY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The key to override the client.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L15-L15'># File 'lib/mongoid/threaded.rb', line 15</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:client-override</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='CREATE-constant' class='summary_signature'>CREATE =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded/lifecycle.rb#L10-L10'># File 'lib/mongoid/threaded/lifecycle.rb', line 10</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>create</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='CURRENT_SCOPE_KEY-constant' class='summary_signature'>CURRENT_SCOPE_KEY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The key for the current thread’s scope stack.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L18-L18'># File 'lib/mongoid/threaded.rb', line 18</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:current-scope</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='DATABASE_OVERRIDE_KEY-constant' class='summary_signature'>DATABASE_OVERRIDE_KEY =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L9-L9'># File 'lib/mongoid/threaded.rb', line 9</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:db-override</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='EXECUTE_CALLBACKS-constant' class='summary_signature'>EXECUTE_CALLBACKS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The key storing the default value for whether or not callbacks are executed on documents.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L35-L35'># File 'lib/mongoid/threaded.rb', line 35</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:execute-callbacks</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='LOAD-constant' class='summary_signature'>LOAD =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded/lifecycle.rb#L9-L9'># File 'lib/mongoid/threaded/lifecycle.rb', line 9</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>load</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='MODIFIED_DOCUMENTS_KEY-constant' class='summary_signature'>MODIFIED_DOCUMENTS_KEY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The key for storing documents modified inside transactions.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L31-L31'># File 'lib/mongoid/threaded.rb', line 31</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:modified-documents</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='SESSIONS_KEY-constant' class='summary_signature'>SESSIONS_KEY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The key for the current thread’s sessions.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L28-L28'># File 'lib/mongoid/threaded.rb', line 28</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:sessions</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='STACK_KEYS-constant' class='summary_signature'>STACK_KEYS =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L23-L25'># File 'lib/mongoid/threaded.rb', line 23</a>    <pre class='code ruby'><span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span>.<span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
  <span class='id identifier rubyid_hash'>hash</span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[mongoid]:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>-stack</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
  </li>
  <li>
    <span id='VALIDATIONS_KEY-constant' class='summary_signature'>VALIDATIONS_KEY =</span>
    <br/>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L21-L21'># File 'lib/mongoid/threaded.rb', line 21</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[mongoid]:validations</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#client_override-instance_method" title="#client_override (instance method)">#<strong>client_override</strong>  &#x21d2; String | Symbol </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the global client override.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#client_override=-instance_method" title="#client_override= (instance method)">#<strong>client_override=</strong>(name)  &#x21d2; String | Symbol </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the global client override.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#database_override-instance_method" title="#database_override (instance method)">#<strong>database_override</strong>  &#x21d2; String | Symbol </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the global database override.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#database_override=-instance_method" title="#database_override= (instance method)">#<strong>database_override=</strong>(name)  &#x21d2; String | Symbol </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the global database override.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#execute_callbacks=-instance_method" title="#execute_callbacks= (instance method)">#<strong>execute_callbacks=</strong>(flag)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates whether document callbacks should be invoked by default for the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#execute_callbacks%3F-instance_method" title="#execute_callbacks? (instance method)">#<strong>execute_callbacks?</strong>  &#x21d2; true | false </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Queries whether document callbacks should be executed by default for the current thread.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#add_modified_document-instance_method" title="#add_modified_document (instance method)">#<strong>add_modified_document</strong>(session, document)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Store a reference to the document that was modified inside a transaction associated with the session.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#autosaved%3F-instance_method" title="#autosaved? (instance method)">#<strong>autosaved?</strong>(document)  &#x21d2; true | false </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Is the document autosaved on the current thread?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#autosaves-instance_method" title="#autosaves (instance method)">#<strong>autosaves</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get all autosaves on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#autosaves_for-instance_method" title="#autosaves_for (instance method)">#<strong>autosaves_for</strong>(klass)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get all autosaves on the current thread for the class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#begin_autosave-instance_method" title="#begin_autosave (instance method)">#<strong>begin_autosave</strong>(document)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Begin autosaving a document on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#begin_execution-instance_method" title="#begin_execution (instance method)">#<strong>begin_execution</strong>(name)  &#x21d2; true </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Begin entry into a named thread local stack.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#begin_validate-instance_method" title="#begin_validate (instance method)">#<strong>begin_validate</strong>(document)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Begin validating a document on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#begin_without_default_scope-instance_method" title="#begin_without_default_scope (instance method)">#<strong>begin_without_default_scope</strong>(klass)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Begin suppressing default scopes for given model on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear_modified_documents-instance_method" title="#clear_modified_documents (instance method)">#<strong>clear_modified_documents</strong>(session)  &#x21d2; Set&lt;Mongoid::Document&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Clears the set of modified documents for the given session, and return the content of the set before the clearance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear_session-instance_method" title="#clear_session (instance method)">#<strong>clear_session</strong>(client: nil)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Clear the cached session for this thread for a client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#current_scope-instance_method" title="#current_scope (instance method)">#<strong>current_scope</strong>(klass = nil)  &#x21d2; Criteria </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the current <a href="../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> scope.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#current_scope=-instance_method" title="#current_scope= (instance method)">#<strong>current_scope=</strong>(scope)  &#x21d2; Criteria </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the current <a href="../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> scope.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#executing%3F-instance_method" title="#executing? (instance method)">#<strong>executing?</strong>(name)  &#x21d2; true </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Are in the middle of executing the named stack.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exit_autosave-instance_method" title="#exit_autosave (instance method)">#<strong>exit_autosave</strong>(document)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Exit autosaving a document on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exit_execution-instance_method" title="#exit_execution (instance method)">#<strong>exit_execution</strong>(name)  &#x21d2; true </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Exit from a named thread local stack.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exit_validate-instance_method" title="#exit_validate (instance method)">#<strong>exit_validate</strong>(document)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Exit validating a document on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#exit_without_default_scope-instance_method" title="#exit_without_default_scope (instance method)">#<strong>exit_without_default_scope</strong>(klass)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Exit suppressing default scopes for given model on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_session-instance_method" title="#get_session (instance method)">#<strong>get_session</strong>(client: nil)  &#x21d2; Mongo::Session | nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the cached session for this thread for a client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#modified_documents-instance_method" title="#modified_documents (instance method)">#<strong>modified_documents</strong>  &#x21d2; Hash&lt;Mongo::Session, Set&lt;Mongoid::Document&gt;&gt; </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the thread store of modified documents.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#sessions-instance_method" title="#sessions (instance method)">#<strong>sessions</strong>  &#x21d2; Hash&lt;Integer, Set&gt; </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the thread store of sessions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_current_scope-instance_method" title="#set_current_scope (instance method)">#<strong>set_current_scope</strong>(scope, klass)  &#x21d2; Criteria </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the current <a href="../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> scope.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_session-instance_method" title="#set_session (instance method)">#<strong>set_session</strong>(session, client: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Cache a session for this thread for a client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stack-instance_method" title="#stack (instance method)">#<strong>stack</strong>(name)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the named stack.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#validated%3F-instance_method" title="#validated? (instance method)">#<strong>validated?</strong>(document)  &#x21d2; true | false </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Is the document validated on the current thread?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#validations-instance_method" title="#validations (instance method)">#<strong>validations</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get all validations on the current thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#validations_for-instance_method" title="#validations_for (instance method)">#<strong>validations_for</strong>(klass)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get all validations on the current thread for the class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#without_default_scope%3F-instance_method" title="#without_default_scope? (instance method)">#<strong>without_default_scope?</strong>(klass)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Is the given klass’ default scope suppressed on the current thread?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#unset_current_scope-instance_method" title="#unset_current_scope (instance method)">#<strong>unset_current_scope</strong>(klass)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the given klass from the current scope, and tidies the current scope list.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="client_override-instance_method">
  <h3 class='signature rw first'>
    #<strong>client_override</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the global client override.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the global client override.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_client_override'>client_override</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The override.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L179-L181'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='179' data-end='181'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 179</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_client_override'>client_override</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CLIENT_OVERRIDE_KEY-constant" title="Mongoid::Threaded::CLIENT_OVERRIDE_KEY (constant)">CLIENT_OVERRIDE_KEY</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="client_override=-instance_method">
  <h3 class='signature rw'>
    #<strong>client_override=</strong>(name)  &#x21d2; <a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the global client override.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the global client override.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_client_override'><a href="#client_override-instance_method" title="Mongoid::Threaded#client_override (method)">client_override</a></span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_testing'>testing</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The global override name.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The override.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L191-L193'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='191' data-end='193'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 191</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_client_override='>client_override=</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CLIENT_OVERRIDE_KEY-constant" title="Mongoid::Threaded::CLIENT_OVERRIDE_KEY (constant)">CLIENT_OVERRIDE_KEY</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="database_override-instance_method">
  <h3 class='signature rw'>
    #<strong>database_override</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the global database override.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the global database override.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_database_override'>database_override</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The override.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L57-L59'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='57' data-end='59'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 57</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_database_override'>database_override</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#DATABASE_OVERRIDE_KEY-constant" title="Mongoid::Threaded::DATABASE_OVERRIDE_KEY (constant)">DATABASE_OVERRIDE_KEY</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="database_override=-instance_method">
  <h3 class='signature rw'>
    #<strong>database_override=</strong>(name)  &#x21d2; <a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the global database override.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the global database override.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_database_override'><a href="#database_override-instance_method" title="Mongoid::Threaded#database_override (method)">database_override</a></span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_testing'>testing</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The global override name.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../String.html" title="String (class)">String</a> | <a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The override.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L69-L71'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='69' data-end='71'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 69</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_database_override='>database_override=</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#DATABASE_OVERRIDE_KEY-constant" title="Mongoid::Threaded::DATABASE_OVERRIDE_KEY (constant)">DATABASE_OVERRIDE_KEY</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execute_callbacks=-instance_method">
  <h3 class='signature rw'>
    #<strong>execute_callbacks=</strong>(flag)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Indicates whether document callbacks should be invoked by default for the current thread. Individual documents may further override the callback behavior, but this will be used for the default behavior.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>flag</span>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>Whether or not document callbacks should be executed by default.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L406-L408'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='406' data-end='408'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 406</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_callbacks='>execute_callbacks=</span>(<span class='id identifier rubyid_flag'>flag</span>)
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#EXECUTE_CALLBACKS-constant" title="Mongoid::Threaded::EXECUTE_CALLBACKS (constant)">EXECUTE_CALLBACKS</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_flag'>flag</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execute_callbacks?-instance_method">
  <h3 class='signature rw'>
    #<strong>execute_callbacks?</strong>  &#x21d2; <code>true</code> | <code>false</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Queries whether document callbacks should be executed by default for the current thread.</p>

<p>Unless otherwise indicated (by #execute_callbacks=), this will return true.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>Whether or not document callbacks should be executed by default.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L392-L398'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='392' data-end='398'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 392</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_callbacks?'>execute_callbacks?</span>
  <span class='kw'>if</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='const'><a href="#EXECUTE_CALLBACKS-constant" title="Mongoid::Threaded::EXECUTE_CALLBACKS (constant)">EXECUTE_CALLBACKS</a></span>)
    <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#EXECUTE_CALLBACKS-constant" title="Mongoid::Threaded::EXECUTE_CALLBACKS (constant)">EXECUTE_CALLBACKS</a></span>]
  <span class='kw'>else</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="add_modified_document-instance_method">
  <h3 class='signature  first'>
    #<strong>add_modified_document</strong>(session, document)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Store a reference to the document that was modified inside a transaction associated with the session.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>session</span>
    <span class='type'>(<code>Mongo::Session</code>)</span>
&mdash;    <div class='inline'>
<p>Session in scope of which the document was modified.</p>
</div>
  </li>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="Document.html" title="Mongoid::Document (module)">Mongoid::Document</a>)</span>
&mdash;    <div class='inline'>
<p><a href="../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> document that was modified.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L365-L369'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='365' data-end='369'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 365</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_modified_document'>add_modified_document</span>(<span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='id identifier rubyid_document'>document</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_session'>session</span><span class='op'>&amp;.</span><span class='id identifier rubyid_in_transaction?'>in_transaction?</span>

  <span class='id identifier rubyid_modified_documents'><a href="#modified_documents-instance_method" title="Mongoid::Threaded#modified_documents (method)">modified_documents</a></span>[<span class='id identifier rubyid_session'>session</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_document'>document</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="autosaved?-instance_method">
  <h3 class='signature '>
    #<strong>autosaved?</strong>(document)  &#x21d2; <code>true</code> | <code>false</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Is the document autosaved on the current thread?</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Is the document autosaved?</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_autosaved?'>autosaved?</span>(<span class='id identifier rubyid_doc'>doc</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>If the document is autosaved.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L264-L266'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='264' data-end='266'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 264</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_autosaved?'>autosaved?</span>(<span class='id identifier rubyid_document'>document</span>)
  <span class='id identifier rubyid_autosaves_for'><a href="#autosaves_for-instance_method" title="Mongoid::Threaded#autosaves_for (method)">autosaves_for</a></span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid_class'>class</span>).<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid__id'>_id</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="autosaves-instance_method">
  <h3 class='signature '>
    #<strong>autosaves</strong>  &#x21d2; <a href="../Hash.html" title="Hash (class)">Hash</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get all autosaves on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get all autosaves.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_autosaves'>autosaves</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The current autosaves.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L286-L288'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='286' data-end='288'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 286</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_autosaves'>autosaves</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#AUTOSAVES_KEY-constant" title="Mongoid::Threaded::AUTOSAVES_KEY (constant)">AUTOSAVES_KEY</a></span>] <span class='op'>||=</span> {}
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="autosaves_for-instance_method">
  <h3 class='signature '>
    #<strong>autosaves_for</strong>(klass)  &#x21d2; <a href="../Array.html" title="Array (class)">Array</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get all autosaves on the current thread for the class.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get all autosaves.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_autosaves_for'>autosaves_for</span>(<span class='const'>Person</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>The class to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Array.html" title="Array (class)">Array</a>)</span>
&mdash;    <div class='inline'>
<p>The current autosaves.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L308-L310'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='308' data-end='310'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 308</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_autosaves_for'>autosaves_for</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='id identifier rubyid_autosaves'><a href="#autosaves-instance_method" title="Mongoid::Threaded#autosaves (method)">autosaves</a></span>[<span class='id identifier rubyid_klass'>klass</span>] <span class='op'>||=</span> []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="begin_autosave-instance_method">
  <h3 class='signature '>
    #<strong>begin_autosave</strong>(document)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Begin autosaving a document on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Begin autosave.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_begin_autosave'>begin_autosave</span>(<span class='id identifier rubyid_doc'>doc</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document to autosave.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L115-L117'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='115' data-end='117'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 115</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_autosave'>begin_autosave</span>(<span class='id identifier rubyid_document'>document</span>)
  <span class='id identifier rubyid_autosaves_for'><a href="#autosaves_for-instance_method" title="Mongoid::Threaded#autosaves_for (method)">autosaves_for</a></span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid_class'>class</span>).<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid__id'>_id</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="begin_execution-instance_method">
  <h3 class='signature '>
    #<strong>begin_execution</strong>(name)  &#x21d2; <code>true</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Begin entry into a named thread local stack.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Begin entry into the stack.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_begin_execution'>begin_execution</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_create'>create</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the stack</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>)</span>
&mdash;    <div class='inline'>
<p>True.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L47-L49'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='47' data-end='49'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 47</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_execution'>begin_execution</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_stack'><a href="#stack-instance_method" title="Mongoid::Threaded#stack (method)">stack</a></span>(<span class='id identifier rubyid_name'>name</span>).<span class='id identifier rubyid_push'>push</span>(<span class='kw'>true</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="begin_validate-instance_method">
  <h3 class='signature '>
    #<strong>begin_validate</strong>(document)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Begin validating a document on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Begin validation.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_begin_validate'>begin_validate</span>(<span class='id identifier rubyid_doc'>doc</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document to validate.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L125-L127'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='125' data-end='127'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 125</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_validate'>begin_validate</span>(<span class='id identifier rubyid_document'>document</span>)
  <span class='id identifier rubyid_validations_for'><a href="#validations_for-instance_method" title="Mongoid::Threaded#validations_for (method)">validations_for</a></span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid_class'>class</span>).<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid__id'>_id</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="begin_without_default_scope-instance_method">
  <h3 class='signature nodoc'>
    #<strong>begin_without_default_scope</strong>(klass)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Begin suppressing default scopes for given model on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Begin without default scope stack.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_begin_without_default_scope'>begin_without_default_scope</span>(<span class='id identifier rubyid_klass'>klass</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>The model to suppress default scoping on.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L157-L159'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='157' data-end='159'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 157</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_without_default_scope'>begin_without_default_scope</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='id identifier rubyid_stack'><a href="#stack-instance_method" title="Mongoid::Threaded#stack (method)">stack</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_without_default_scope'>without_default_scope</span>).<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_klass'>klass</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_modified_documents-instance_method">
  <h3 class='signature '>
    #<strong>clear_modified_documents</strong>(session)  &#x21d2; <a href="../Set.html" title="Set (class)">Set</a>&lt;<a href="Document.html" title="Mongoid::Document (module)">Mongoid::Document</a>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Clears the set of modified documents for the given session, and return the content of the set before the clearance.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>session</span>
    <span class='type'>(<code>Mongo::Session</code>)</span>
&mdash;    <div class='inline'>
<p>Session for which the modified documents set should be cleared.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Set.html" title="Set (class)">Set</a>&lt;<a href="Document.html" title="Mongoid::Document (module)">Mongoid::Document</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>Collection of modified documents before it was cleared.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L378-L382'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='378' data-end='382'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 378</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_modified_documents'>clear_modified_documents</span>(<span class='id identifier rubyid_session'>session</span>)
  <span class='id identifier rubyid_modified_documents'><a href="#modified_documents-instance_method" title="Mongoid::Threaded#modified_documents (method)">modified_documents</a></span>[<span class='id identifier rubyid_session'>session</span>].<span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_modified_documents'><a href="#modified_documents-instance_method" title="Mongoid::Threaded#modified_documents (method)">modified_documents</a></span>[<span class='id identifier rubyid_session'>session</span>].<span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_session-instance_method">
  <h3 class='signature '>
    #<strong>clear_session</strong>(client: nil)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>For backward compatibility it is allowed to call this method without</p>
</div>
  </div>


<p>Clear the cached session for this thread for a client.</p>

<p>specifying ‘client` parameter.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>client</span>
    <span class='type'>(<code>Mongo::Client</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>The client to clear the session for.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L355-L357'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='355' data-end='357'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 355</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_session'>clear_session</span>(<span class='label'>client:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_sessions'><a href="#sessions-instance_method" title="Mongoid::Threaded#sessions (method)">sessions</a></span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_client'><a href="../Mongoid.html#client-instance_method" title="Mongoid#client (method)">client</a></span>)<span class='op'>&amp;.</span><span class='id identifier rubyid_end_session'>end_session</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="current_scope-instance_method">
  <h3 class='signature '>
    #<strong>current_scope</strong>(klass = nil)  &#x21d2; <a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the current <a href="../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> scope.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the scope.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_current_scope'>current_scope</span>(<span class='id identifier rubyid_klass'>klass</span>)
<span class='const'>Threaded</span>.<span class='id identifier rubyid_current_scope'>current_scope</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Klass</code>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>The class type of the scope.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>)</span>
&mdash;    <div class='inline'>
<p>The scope.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L204-L212'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='204' data-end='212'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 204</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_current_scope'>current_scope</span>(<span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>&amp;&amp;</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>].<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_keys'>keys</span>)
    <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>][
        <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>].<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_find'>find</span> { <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_klass'>klass</span> }
    ]
  <span class='kw'>else</span>
    <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>]
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="current_scope=-instance_method">
  <h3 class='signature '>
    #<strong>current_scope=</strong>(scope)  &#x21d2; <a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the current <a href="../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> scope.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the scope.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_current_scope'><a href="#current_scope-instance_method" title="Mongoid::Threaded#current_scope (method)">current_scope</a></span> <span class='op'>=</span> <span class='id identifier rubyid_scope'>scope</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>scope</span>
    <span class='type'>(<a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>)</span>
&mdash;    <div class='inline'>
<p>The current scope.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>)</span>
&mdash;    <div class='inline'>
<p>The scope.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L222-L224'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='222' data-end='224'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 222</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_current_scope='>current_scope=</span>(<span class='id identifier rubyid_scope'>scope</span>)
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_scope'>scope</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="executing?-instance_method">
  <h3 class='signature '>
    #<strong>executing?</strong>(name)  &#x21d2; <code>true</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Are in the middle of executing the named stack</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Are we in the stack execution?</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_executing?'>executing?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_create'>create</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the stack</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>)</span>
&mdash;    <div class='inline'>
<p>If the stack is being executed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L81-L83'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='81' data-end='83'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 81</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_executing?'>executing?</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='op'>!</span><span class='id identifier rubyid_stack'><a href="#stack-instance_method" title="Mongoid::Threaded#stack (method)">stack</a></span>(<span class='id identifier rubyid_name'>name</span>).<span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exit_autosave-instance_method">
  <h3 class='signature '>
    #<strong>exit_autosave</strong>(document)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Exit autosaving a document on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Exit autosave.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_exit_autosave'>exit_autosave</span>(<span class='id identifier rubyid_doc'>doc</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document to autosave.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L135-L137'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='135' data-end='137'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 135</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exit_autosave'>exit_autosave</span>(<span class='id identifier rubyid_document'>document</span>)
  <span class='id identifier rubyid_autosaves_for'><a href="#autosaves_for-instance_method" title="Mongoid::Threaded#autosaves_for (method)">autosaves_for</a></span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid_class'>class</span>).<span class='id identifier rubyid_delete_one'>delete_one</span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid__id'>_id</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exit_execution-instance_method">
  <h3 class='signature '>
    #<strong>exit_execution</strong>(name)  &#x21d2; <code>true</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Exit from a named thread local stack.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Exit from the stack.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_exit_execution'>exit_execution</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_create'>create</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the stack</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>)</span>
&mdash;    <div class='inline'>
<p>True.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L93-L95'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='93' data-end='95'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 93</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exit_execution'>exit_execution</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_stack'><a href="#stack-instance_method" title="Mongoid::Threaded#stack (method)">stack</a></span>(<span class='id identifier rubyid_name'>name</span>).<span class='id identifier rubyid_pop'>pop</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exit_validate-instance_method">
  <h3 class='signature '>
    #<strong>exit_validate</strong>(document)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Exit validating a document on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Exit validation.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_exit_validate'>exit_validate</span>(<span class='id identifier rubyid_doc'>doc</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document to validate.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L145-L147'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='145' data-end='147'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 145</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exit_validate'>exit_validate</span>(<span class='id identifier rubyid_document'>document</span>)
  <span class='id identifier rubyid_validations_for'><a href="#validations_for-instance_method" title="Mongoid::Threaded#validations_for (method)">validations_for</a></span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid_class'>class</span>).<span class='id identifier rubyid_delete_one'>delete_one</span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid__id'>_id</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exit_without_default_scope-instance_method">
  <h3 class='signature nodoc'>
    #<strong>exit_without_default_scope</strong>(klass)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Exit suppressing default scopes for given model on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Exit without default scope stack.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_exit_without_default_scope'>exit_without_default_scope</span>(<span class='id identifier rubyid_klass'>klass</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>The model to unsuppress default scoping on.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L169-L171'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='169' data-end='171'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 169</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exit_without_default_scope'>exit_without_default_scope</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='id identifier rubyid_stack'><a href="#stack-instance_method" title="Mongoid::Threaded#stack (method)">stack</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_without_default_scope'>without_default_scope</span>).<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_klass'>klass</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_session-instance_method">
  <h3 class='signature '>
    #<strong>get_session</strong>(client: nil)  &#x21d2; <code>Mongo::Session</code> | <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>For backward compatibility it is allowed to call this method without</p>
</div>
  </div>


<p>Get the cached session for this thread for a client.</p>

<p>specifying ‘client` parameter.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>client</span>
    <span class='type'>(<code>Mongo::Client</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>The client to cache the session for.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Mongo::Session</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>The session cached on this thread or nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L343-L345'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='343' data-end='345'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 343</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_session'>get_session</span>(<span class='label'>client:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_sessions'><a href="#sessions-instance_method" title="Mongoid::Threaded#sessions (method)">sessions</a></span>[<span class='id identifier rubyid_client'><a href="../Mongoid.html#client-instance_method" title="Mongoid#client (method)">client</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="modified_documents-instance_method">
  <h3 class='signature nodoc'>
    #<strong>modified_documents</strong>  &#x21d2; <a href="../Hash.html" title="Hash (class)">Hash</a>&lt;<code>Mongo::Session</code>, <a href="../Set.html" title="Set (class)">Set</a>&lt;<a href="Document.html" title="Mongoid::Document (module)">Mongoid::Document</a>&gt;&gt; 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the thread store of modified documents.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Hash.html" title="Hash (class)">Hash</a>&lt;<code>Mongo::Session</code>, <a href="../Set.html" title="Set (class)">Set</a>&lt;<a href="Document.html" title="Mongoid::Document (module)">Mongoid::Document</a>&gt;&gt;)</span>
&mdash;    <div class='inline'>
<p>The modified documents indexed by session.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L425-L429'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='425' data-end='429'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 425</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_modified_documents'>modified_documents</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#MODIFIED_DOCUMENTS_KEY-constant" title="Mongoid::Threaded::MODIFIED_DOCUMENTS_KEY (constant)">MODIFIED_DOCUMENTS_KEY</a></span>] <span class='op'>||=</span> <span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span>.<span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='id identifier rubyid_h'>h</span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>=</span> <span class='const'><a href="../Set.html" title="Set (class)">Set</a></span>.<span class='id identifier rubyid_new'>new</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sessions-instance_method">
  <h3 class='signature nodoc'>
    #<strong>sessions</strong>  &#x21d2; <a href="../Hash.html" title="Hash (class)">Hash</a>&lt;<a href="../Integer.html" title="Integer (class)">Integer</a>, <a href="../Set.html" title="Set (class)">Set</a>&gt; 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the thread store of sessions.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Hash.html" title="Hash (class)">Hash</a>&lt;<a href="../Integer.html" title="Integer (class)">Integer</a>, <a href="../Set.html" title="Set (class)">Set</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>The sessions indexed by client object ID.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L415-L417'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='415' data-end='417'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 415</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sessions'>sessions</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#SESSIONS_KEY-constant" title="Mongoid::Threaded::SESSIONS_KEY (constant)">SESSIONS_KEY</a></span>] <span class='op'>||=</span> {}.<span class='id identifier rubyid_compare_by_identity'>compare_by_identity</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_current_scope-instance_method">
  <h3 class='signature '>
    #<strong>set_current_scope</strong>(scope, klass)  &#x21d2; <a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the current <a href="../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> scope. Safe for multi-model scope chaining.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p><a href="../Set.html" title="Set (class)"><code>::Set</code></a> the scope.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_current_scope'><a href="#current_scope-instance_method" title="Mongoid::Threaded#current_scope (method)">current_scope</a></span>(<span class='id identifier rubyid_scope'>scope</span><span class='comma'>,</span> <span class='id identifier rubyid_klass'>klass</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>scope</span>
    <span class='type'>(<a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>)</span>
&mdash;    <div class='inline'>
<p>The current scope.</p>
</div>
  </li>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>The current model class.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>)</span>
&mdash;    <div class='inline'>
<p>The scope.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L235-L242'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='235' data-end='242'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 235</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_current_scope'>set_current_scope</span>(<span class='id identifier rubyid_scope'>scope</span><span class='comma'>,</span> <span class='id identifier rubyid_klass'>klass</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_scope'>scope</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_unset_current_scope'><a href="#unset_current_scope-instance_method" title="Mongoid::Threaded#unset_current_scope (method)">unset_current_scope</a></span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='kw'>else</span>
    <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>] <span class='op'>||=</span> {}
    <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>][<span class='id identifier rubyid_klass'>klass</span>] <span class='op'>=</span> <span class='id identifier rubyid_scope'>scope</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_session-instance_method">
  <h3 class='signature '>
    #<strong>set_session</strong>(session, client: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>For backward compatibility it is allowed to call this method without</p>
</div>
  </div>


<p>Cache a session for this thread for a client.</p>

<p>specifying ‘client` parameter.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>session</span>
    <span class='type'>(<code>Mongo::Session</code>)</span>
&mdash;    <div class='inline'>
<p>The session to save.</p>
</div>
  </li>
  <li>
    <span class='name'>client</span>
    <span class='type'>(<code>Mongo::Client</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>The client to cache the session for.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L331-L333'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='331' data-end='333'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 331</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_session'>set_session</span>(<span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_sessions'><a href="#sessions-instance_method" title="Mongoid::Threaded#sessions (method)">sessions</a></span>[<span class='id identifier rubyid_client'><a href="../Mongoid.html#client-instance_method" title="Mongoid#client (method)">client</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stack-instance_method">
  <h3 class='signature '>
    #<strong>stack</strong>(name)  &#x21d2; <a href="../Array.html" title="Array (class)">Array</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the named stack.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get a stack by name</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_stack'>stack</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_create'>create</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<a href="../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The name of the stack</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Array.html" title="Array (class)">Array</a>)</span>
&mdash;    <div class='inline'>
<p>The stack.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L105-L107'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='105' data-end='107'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 105</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stack'>stack</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#STACK_KEYS-constant" title="Mongoid::Threaded::STACK_KEYS (constant)">STACK_KEYS</a></span>[<span class='id identifier rubyid_name'>name</span>]] <span class='op'>||=</span> []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unset_current_scope-instance_method">
  <h3 class='signature priv'>
    #<strong>unset_current_scope</strong>(klass)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the given klass from the current scope, and tidies the current scope list.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>the class to remove from the current scope.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L437-L442'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='437' data-end='442'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 437</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unset_current_scope'>unset_current_scope</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>]

  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>].<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>] <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#CURRENT_SCOPE_KEY-constant" title="Mongoid::Threaded::CURRENT_SCOPE_KEY (constant)">CURRENT_SCOPE_KEY</a></span>].<span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validated?-instance_method">
  <h3 class='signature '>
    #<strong>validated?</strong>(document)  &#x21d2; <code>true</code> | <code>false</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Is the document validated on the current thread?</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Is the document validated?</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_validated?'>validated?</span>(<span class='id identifier rubyid_doc'>doc</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>If the document is validated.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L276-L278'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='276' data-end='278'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 276</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validated?'>validated?</span>(<span class='id identifier rubyid_document'>document</span>)
  <span class='id identifier rubyid_validations_for'><a href="#validations_for-instance_method" title="Mongoid::Threaded#validations_for (method)">validations_for</a></span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid_class'>class</span>).<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_document'>document</span>.<span class='id identifier rubyid__id'>_id</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validations-instance_method">
  <h3 class='signature '>
    #<strong>validations</strong>  &#x21d2; <a href="../Hash.html" title="Hash (class)">Hash</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get all validations on the current thread.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get all validations.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_validations'>validations</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The current validations.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L296-L298'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='296' data-end='298'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 296</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validations'>validations</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='const'><a href="#VALIDATIONS_KEY-constant" title="Mongoid::Threaded::VALIDATIONS_KEY (constant)">VALIDATIONS_KEY</a></span>] <span class='op'>||=</span> {}
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validations_for-instance_method">
  <h3 class='signature '>
    #<strong>validations_for</strong>(klass)  &#x21d2; <a href="../Array.html" title="Array (class)">Array</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get all validations on the current thread for the class.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get all validations.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_validations_for'>validations_for</span>(<span class='const'>Person</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>The class to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Array.html" title="Array (class)">Array</a>)</span>
&mdash;    <div class='inline'>
<p>The current validations.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L320-L322'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='320' data-end='322'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 320</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validations_for'>validations_for</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='id identifier rubyid_validations'><a href="#validations-instance_method" title="Mongoid::Threaded#validations (method)">validations</a></span>[<span class='id identifier rubyid_klass'>klass</span>] <span class='op'>||=</span> []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="without_default_scope?-instance_method">
  <h3 class='signature nodoc'>
    #<strong>without_default_scope?</strong>(klass)  &#x21d2; <a href="Boolean.html" title="Mongoid::Boolean (class)">Boolean</a> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Is the given klass’ default scope suppressed on the current thread?</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Is the given klass’ default scope suppressed?</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Threaded</span>.<span class='id identifier rubyid_without_default_scope?'>without_default_scope?</span>(<span class='id identifier rubyid_klass'>klass</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>klass</span>
    <span class='type'>(<code>Class</code>)</span>
&mdash;    <div class='inline'>
<p>The model to check for default scope suppression.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/threaded.rb#L252-L254'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='252' data-end='254'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/threaded.rb', line 252</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_without_default_scope?'>without_default_scope?</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='id identifier rubyid_stack'><a href="#stack-instance_method" title="Mongoid::Threaded#stack (method)">stack</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_without_default_scope'>without_default_scope</span>).<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_klass'>klass</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>