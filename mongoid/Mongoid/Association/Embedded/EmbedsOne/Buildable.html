<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Mongoid::Association::Embedded::EmbedsOne::Buildable &mdash; Mongoid master</title>

<link rel='stylesheet'  type='text/css' href='../../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongoid::Association::Embedded::EmbedsOne::Buildable",
    relpath = '../../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../../'>Mongoid master</a> &raquo; 
      <a href='../../../../_index.html#alpha_B'>Index (B)</a> &raquo; 
        <a href="../../../../Mongoid.html" title="Mongoid (module)">Mongoid</a> &raquo; 
        <a href="../../../Association.html" title="Mongoid::Association (module)">Association</a> &raquo; 
        <a href="../../Embedded.html" title="Mongoid::Association::Embedded (module)">Embedded</a> &raquo; 
        <a href="../EmbedsOne.html" title="Mongoid::Association::Embedded::EmbedsOne (class)">EmbedsOne</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Buildable&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Mongoid::Association::Embedded::EmbedsOne::Buildable</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="../EmbedsOne.html" title="Mongoid::Association::Embedded::EmbedsOne (class)"><code>::Mongoid::Association::Embedded::EmbedsOne</code></a>
      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="../../../Threaded/Lifecycle.html" title="Mongoid::Threaded::Lifecycle (module)"><code>::Mongoid::Threaded::Lifecycle</code></a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/association/embedded/embeds_one/buildable.rb#L10'>lib/mongoid/association/embedded/embeds_one/buildable.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Builder class for embeds_one associations.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="../../../Threaded/Lifecycle.html" title="Mongoid::Threaded::Lifecycle (module)"><code>::Mongoid::Threaded::Lifecycle</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_assigning-instance_method" title="Mongoid::Threaded::Lifecycle#_assigning (method)">#_assigning</a></td>
      <td><div class='inline'><p>Begin the assignment of attributes.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_assigning%3F-instance_method" title="Mongoid::Threaded::Lifecycle#_assigning? (method)">#_assigning?</a></td>
      <td><div class='inline'><p>Is the current thread in assigning mode?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_binding-instance_method" title="Mongoid::Threaded::Lifecycle#_binding (method)">#_binding</a></td>
      <td><div class='inline'><p>Execute a block in binding mode.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_binding%3F-instance_method" title="Mongoid::Threaded::Lifecycle#_binding? (method)">#_binding?</a></td>
      <td><div class='inline'><p>Is the current thread in binding mode?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_building-instance_method" title="Mongoid::Threaded::Lifecycle#_building (method)">#_building</a></td>
      <td><div class='inline'><p>Execute a block in building mode.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_building%3F-instance_method" title="Mongoid::Threaded::Lifecycle#_building? (method)">#_building?</a></td>
      <td><div class='inline'><p>Is the current thread in building mode?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_creating%3F-instance_method" title="Mongoid::Threaded::Lifecycle#_creating? (method)">#_creating?</a></td>
      <td><div class='inline'><p>Is the current thread in creating mode?</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_loading-instance_method" title="Mongoid::Threaded::Lifecycle#_loading (method)">#_loading</a></td>
      <td><div class='inline'><p>Execute a block in loading mode.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="../../../Threaded/Lifecycle.html#_loading%3F-instance_method" title="Mongoid::Threaded::Lifecycle#_loading? (method)">#_loading?</a></td>
      <td><div class='inline'><p>Is the current thread in loading mode?</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#build-instance_method" title="#build (instance method)">#<strong>build</strong>(base, object, _type = nil, selected_fields = nil)  &#x21d2; Document </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Builds the document out of the attributes using the provided association metadata on the association.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#clear_associated-instance_method" title="#clear_associated (instance method)">#<strong>clear_associated</strong>(doc)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="build-instance_method">
  <h3 class='signature  first'>
    #<strong>build</strong>(base, object, _type = nil, selected_fields = nil)  &#x21d2; <a href="../../../Document.html" title="Mongoid::Document (module)">Document</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Builds the document out of the attributes using the provided association metadata on the association. Instantiates through the factory in order to make sure subclasses and allocation are used if fitting.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Build the document.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Builder</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_meta'>meta</span><span class='comma'>,</span> <span class='id identifier rubyid_attrs'>attrs</span>).<span class='id identifier rubyid_build'>build</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>base</span>
    <span class='type'>(<a href="../../../Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document this association hangs off of.</p>
</div>
  </li>
  <li>
    <span class='name'>object</span>
    <span class='type'>(<a href="../../../Document.html" title="Mongoid::Document (module)">Document</a> | <a href="../../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The related document.</p>
</div>
  </li>
  <li>
    <span class='name'>_type</span>
    <span class='type'>(<a href="../../../../String.html" title="String (class)">String</a>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>Not used in this context.</p>
</div>
  </li>
  <li>
    <span class='name'>selected_fields</span>
    <span class='type'>(<a href="../../../../Hash.html" title="Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p><a href="../../../Fields.html" title="Mongoid::Fields (module)"><code>::Mongoid::Fields</code></a> which were retrieved via #only. If selected_fields are specified, fields not listed in it will not be accessible in the built document.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>A single document.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/association/embedded/embeds_one/buildable.rb#L28-L39'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='28' data-end='39'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/association/embedded/embeds_one/buildable.rb', line 28</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build'>build</span>(<span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='id identifier rubyid__type'>_type</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_selected_fields'>selected_fields</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../../../Hash.html" title="Hash (class)">Hash</a></span>)
    <span class='kw'>if</span> <span class='id identifier rubyid__loading?'>_loading?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_persisted?'>persisted?</span>
      <span class='const'><a href="../../../Factory.html" title="Mongoid::Factory (module)">Factory</a></span>.<span class='id identifier rubyid_execute_from_db'><a href="../../../Factory.html#execute_from_db-instance_method" title="Mongoid::Factory#execute_from_db (method)">execute_from_db</a></span>(<span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_selected_fields'>selected_fields</span><span class='comma'>,</span> <span class='label'>execute_callbacks:</span> <span class='kw'>false</span>)
    <span class='kw'>else</span>
      <span class='const'><a href="../../../Factory.html" title="Mongoid::Factory (module)">Factory</a></span>.<span class='id identifier rubyid_build'><a href="../../../Factory.html#build-instance_method" title="Mongoid::Factory#build (method)">build</a></span>(<span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_object'>object</span>)
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_clear_associated'><a href="#clear_associated-instance_method" title="Mongoid::Association::Embedded::EmbedsOne::Buildable#clear_associated (method)">clear_associated</a></span>(<span class='id identifier rubyid_object'>object</span>)
    <span class='id identifier rubyid_object'>object</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_associated-instance_method">
  <h3 class='signature priv'>
    #<strong>clear_associated</strong>(doc)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/association/embedded/embeds_one/buildable.rb#L43-L49'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='43' data-end='49'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/association/embedded/embeds_one/buildable.rb', line 43</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_associated'>clear_associated</span>(<span class='id identifier rubyid_doc'>doc</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_doc'>doc</span> <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_inv'>inv</span> <span class='op'>=</span> <span class='id identifier rubyid_inverse'>inverse</span>(<span class='id identifier rubyid_doc'>doc</span>))
    <span class='kw'>if</span> <span class='id identifier rubyid_associated'>associated</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span>.<span class='id identifier rubyid_ivar'>ivar</span>(<span class='id identifier rubyid_inv'>inv</span>)
      <span class='id identifier rubyid_associated'>associated</span>.<span class='id identifier rubyid_substitute'>substitute</span>(<span class='kw'>nil</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>