<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Mongoid::Criteria::Queryable::Selectable &mdash; Mongoid master</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongoid::Criteria::Queryable::Selectable",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Mongoid master</a> &raquo; 
      <a href='../../../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../../../Mongoid.html" title="Mongoid (module)">Mongoid</a> &raquo; 
        <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> &raquo; 
        <a href="../Queryable.html" title="Mongoid::Criteria::Queryable (module)">Queryable</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Selectable&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Mongoid::Criteria::Queryable::Selectable</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="Macroable.html" title="Mongoid::Criteria::Queryable::Macroable (module)"><code>Macroable</code></a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L11'>lib/mongoid/criteria/queryable/selectable.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>An queryable selectable is selectable, in that it has the ability to select document from the database. The selectable module brings all functionality to the selectable that has to do with building MongoDB selectors.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='LINE_STRING-constant' class='summary_signature'>LINE_STRING =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Constant for a LineString $geometry.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L15-L15'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 15</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LineString</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='POINT-constant' class='summary_signature'>POINT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Constant for a Point $geometry.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L18-L18'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 18</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Point</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='POLYGON-constant' class='summary_signature'>POLYGON =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Constant for a Polygon $geometry.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L21-L21'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 21</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Polygon</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#forwardables-class_method" title=".forwardables (class method)">.<strong>forwardables</strong>  &#x21d2; Array&lt;Symbol&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the methods on the selectable that can be forwarded to from a model.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Macroable.html" title="Mongoid::Criteria::Queryable::Macroable (module)"><code>Macroable</code></a> - Extended</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Macroable.html#key-instance_method" title="Mongoid::Criteria::Queryable::Macroable#key (method)">key</a></td>
      <td><div class='inline'><p>Adds a method on <a href="../../../Symbol.html" title="Symbol (class)"><code>::Symbol</code></a> for convenience in where queries for the provided operators.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#negating-instance_method" title="#negating (instance method)">#<strong>negating</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#negating+If+the+next+expression+is+negated%2E-instance_method" title="#negating If the next expression is negated. (instance method)">#<strong>negating If the next expression is negated.</strong>(If the next expression is negated.)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#negating%3F-instance_method" title="#negating? (instance method)">#<strong>negating?</strong>  &#x21d2; true | false </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Is the current selectable negating the next selection?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#selector-instance_method" title="#selector (instance method)">#<strong>selector</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#selector+The+query+selector%2E-instance_method" title="#selector The query selector. (instance method)">#<strong>selector The query selector.</strong>(The query selector.)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#all-instance_method" title="#all (instance method)">#<strong>all</strong>(*criteria)  &#x21d2; Selectable </a>
      (also: #all_in)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $all criterion.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#all_in-instance_method" title="#all_in (instance method)">#<strong>all_in</strong>(*criteria)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#all-instance_method" title="Mongoid::Criteria::Queryable::Selectable#all (method)">#all</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#all_of-instance_method" title="#all_of (instance method)">#<strong>all_of</strong>(*criteria)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#and-instance_method" title="Mongoid::Criteria::Queryable::Selectable#and (method)">#and</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#and-instance_method" title="#and (instance method)">#<strong>and</strong>(*criteria)  &#x21d2; Selectable </a>
      (also: #all_of)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $and criterion.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#any_in-instance_method" title="#any_in (instance method)">#<strong>any_in</strong>(condition)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#in-instance_method" title="Mongoid::Criteria::Queryable::Selectable#in (method)">#in</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#any_of-instance_method" title="#any_of (instance method)">#<strong>any_of</strong>(*criteria)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds a disjunction of the arguments as an additional constraint to the criteria already existing in the receiver.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#between-instance_method" title="#between (instance method)">#<strong>between</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the range selection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#elem_match-instance_method" title="#elem_match (instance method)">#<strong>elem_match</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Select with an $elemMatch.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eq-instance_method" title="#eq (instance method)">#<strong>eq</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $eq criterion to the selector.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#excludes-instance_method" title="#excludes (instance method)">#<strong>excludes</strong>(criterion)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#ne-instance_method" title="Mongoid::Criteria::Queryable::Selectable#ne (method)">#ne</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exists-instance_method" title="#exists (instance method)">#<strong>exists</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $exists selection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#geo_spatial-instance_method" title="#geo_spatial (instance method)">#<strong>geo_spatial</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add a $geoIntersects or $geoWithin selection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gt-instance_method" title="#gt (instance method)">#<strong>gt</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $gt criterion to the selector.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gte-instance_method" title="#gte (instance method)">#<strong>gte</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $gte criterion to the selector.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#in-instance_method" title="#in (instance method)">#<strong>in</strong>(condition)  &#x21d2; Selectable </a>
      (also: #any_in)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds the $in selection to the selectable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lt-instance_method" title="#lt (instance method)">#<strong>lt</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $lt criterion to the selector.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lte-instance_method" title="#lte (instance method)">#<strong>lte</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add the $lte criterion to the selector.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#max_distance-instance_method" title="#max_distance (instance method)">#<strong>max_distance</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add a $maxDistance selection to the selectable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mod-instance_method" title="#mod (instance method)">#<strong>mod</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds $mod selection to the selectable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ne-instance_method" title="#ne (instance method)">#<strong>ne</strong>(criterion)  &#x21d2; Selectable </a>
      (also: #excludes)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds $ne selection to the selectable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#near-instance_method" title="#near (instance method)">#<strong>near</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds a $near criterion to a geo selection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#near_sphere-instance_method" title="#near_sphere (instance method)">#<strong>near_sphere</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds a $nearSphere criterion to a geo selection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#nin-instance_method" title="#nin (instance method)">#<strong>nin</strong>(condition)  &#x21d2; Selectable </a>
      (also: #not_in)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds the $nin selection to the selectable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#none_of-instance_method" title="#none_of (instance method)">#<strong>none_of</strong>(*criteria)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Negate the arguments, constraining the query to only those documents that do NOT match the arguments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#nor-instance_method" title="#nor (instance method)">#<strong>nor</strong>(*criteria)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds $nor selection to the selectable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#not-instance_method" title="#not (instance method)">#<strong>not</strong>(*criteria)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Negate the arguments, or the next selection if no arguments are given.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#not_in-instance_method" title="#not_in (instance method)">#<strong>not_in</strong>(condition)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#nin-instance_method" title="Mongoid::Criteria::Queryable::Selectable#nin (method)">#nin</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#or-instance_method" title="#or (instance method)">#<strong>or</strong>(*criteria)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a disjunction using $or from the existing criteria in the receiver and the provided arguments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#text_search-instance_method" title="#text_search (instance method)">#<strong>text_search</strong>(terms, opts = nil)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Construct a text search selector.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#where-instance_method" title="#where (instance method)">#<strong>where</strong>(*criteria)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>This is the general entry point for most MongoDB queries.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#with_size-instance_method" title="#with_size (instance method)">#<strong>with_size</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Add a $size selection for array fields.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#with_type-instance_method" title="#with_type (instance method)">#<strong>with_type</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds a $type selection to the selectable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#expr_query-instance_method" title="#expr_query (instance method)">#<strong>expr_query</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds the specified expression to the query.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#js_query-instance_method" title="#js_query (instance method)">#<strong>js_query</strong>(criterion)  &#x21d2; Selectable </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a javascript selection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#selection-instance_method" title="#selection (instance method)">#<strong>selection</strong>(criterion = nil)  &#x21d2; Selectable </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Take the provided criterion and store it as a selection in the query selector.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#typed_override-instance_method" title="#typed_override (instance method)">#<strong>typed_override</strong>(criterion, operator)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Force the values of the criterion to be evolved.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="forwardables-class_method">
  <h3 class='signature  first'>
    .<strong>forwardables</strong>  &#x21d2; <a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../../Symbol.html" title="Symbol (class)">Symbol</a>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the methods on the selectable that can be forwarded to from a model.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the forwardable methods.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Selectable</span>.<span class='id identifier rubyid_forwardables'>forwardables</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../../Symbol.html" title="Symbol (class)">Symbol</a>&gt;)</span>
&mdash;    <div class='inline'>
<p>The names of the forwardable methods.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L945-L948'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='945' data-end='948'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 945</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_forwardables'>forwardables</span>
  <span class='id identifier rubyid_public_instance_methods'>public_instance_methods</span>(<span class='kw'>false</span>) <span class='op'>-</span>
    [ <span class='symbeg'>:</span><span class='id identifier rubyid_negating'><a href="#negating-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating (method)">negating</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_negating='><a href="#negating=-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating= (method)">negating=</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_negating?'><a href="#negating%3F-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating? (method)">negating?</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selector='><a href="#selector=-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector= (method)">selector=</a></span> ]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="negating-instance_method">
  <h3 class='signature rw first'>
    #<strong>negating</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L25-L25'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='25' data-end='25'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_negating'>negating</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="negating If the next expression is negated.-instance_method">
  <h3 class='signature rw'>
    #<strong>negating If the next expression is negated.</strong>(If the next expression is negated.)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L25-L25'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='25' data-end='25'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_negating'><a href="#negating-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating (method)">negating</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="negating?-instance_method">
  <h3 class='signature rw'>
    #<strong>negating?</strong>  &#x21d2; <code>true</code> | <code>false</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Is the current selectable negating the next selection?</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Is the selectable negating?</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_negating?'>negating?</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code> | <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>If the selectable is negating.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L535-L537'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='535' data-end='537'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 535</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_negating?'>negating?</span>
  <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_negating'><a href="#negating-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating (method)">negating</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="selector-instance_method">
  <h3 class='signature rw'>
    #<strong>selector</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L25-L25'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='25' data-end='25'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_negating'><a href="#negating-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating (method)">negating</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selector'>selector</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="selector The query selector.-instance_method">
  <h3 class='signature rw'>
    #<strong>selector The query selector.</strong>(The query selector.)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L25-L25'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='25' data-end='25'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_negating'><a href="#negating-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating (method)">negating</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="all-instance_method">
  <h3 class='signature  first'>
    #<strong>all</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
    <span class='aliases'>Also known as: <span class='names'>#all_in</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $all criterion.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_all'>all</span>(<span class='label'>field:</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span> ])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $all in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_all'>all</span> <span class='op'>=&gt;</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span> ])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criteria</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>...)</span>
&mdash;    <div class='inline'>
<p>The key value pair(s) for $all matching.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L38-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='38' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 38</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_all'>all</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_clone'>clone</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='op'>|</span>
      <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_inject'>inject</span>(<span class='id identifier rubyid_clone'>clone</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_condition'>condition</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_condition'>condition</span>.<span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_condition'>condition</span> <span class='op'>=</span> <span class='id identifier rubyid_expand_condition_to_array_values'>expand_condition_to_array_values</span>(<span class='id identifier rubyid_condition'>condition</span>)

    <span class='kw'>if</span> <span class='id identifier rubyid_strategy'>strategy</span>
      <span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_strategy'>strategy</span><span class='comma'>,</span> <span class='id identifier rubyid_condition'>condition</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$all</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_condition'>condition</span>.<span class='id identifier rubyid_inject'>inject</span>(<span class='id identifier rubyid_query'>query</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__query'>_query</span><span class='comma'>,</span> (<span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)<span class='op'>|</span>
        <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$all</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_value'>value</span>}
        <span class='kw'>if</span> <span class='id identifier rubyid_negating?'><a href="#negating%3F-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating? (method)">negating?</a></span>
          <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$not</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_v'>v</span>}
        <span class='kw'>end</span>
        <span class='id identifier rubyid__query'>_query</span>.<span class='id identifier rubyid_add_field_expression'>add_field_expression</span>(<span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="all_in-instance_method">
  <h3 class='signature '>
    #<strong>all_in</strong>(*criteria)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#all-instance_method" title="Mongoid::Criteria::Queryable::Selectable#all (method)">#all</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L65-L65'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='65' data-end='65'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 65</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all_in'>all_in</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all'><a href="#all-instance_method" title="Mongoid::Criteria::Queryable::Selectable#all (method)">all</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="all_of-instance_method">
  <h3 class='signature '>
    #<strong>all_of</strong>(*criteria)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#and-instance_method" title="Mongoid::Criteria::Queryable::Selectable#and (method)">#and</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L111-L111'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='111' data-end='111'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 111</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all_of'>all_of</span> <span class='symbeg'>:</span><span class='kw'>and</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="and-instance_method">
  <h3 class='signature '>
    #<strong>and</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
    <span class='aliases'>Also known as: <span class='names'>#all_of</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $and criterion.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_and'>and</span>({ <span class='label'>field:</span> <span class='id identifier rubyid_value'>value</span> }<span class='comma'>,</span> { <span class='label'>other:</span> <span class='id identifier rubyid_value'>value</span> })</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criteria</span>
    <span class='type'>([ <a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> | <a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>&gt; ]...)</span>
&mdash;    <div class='inline'>
<p>Multiple key/value pair matches or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects that all must match to return results.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The new selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L78-L110'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='78' data-end='110'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 78</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>and</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='id identifier rubyid__mongoid_flatten_arrays'>_mongoid_flatten_arrays</span>(<span class='id identifier rubyid_criteria'>criteria</span>).<span class='id identifier rubyid_inject'>inject</span>(<span class='kw'>self</span>.<span class='id identifier rubyid_clone'>clone</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_new_s'>new_s</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_new_s'>new_s</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Selectable</span>)
      <span class='id identifier rubyid_new_s'>new_s</span> <span class='op'>=</span> <span class='id identifier rubyid_new_s'>new_s</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_normalized'>normalized</span> <span class='op'>=</span> <span class='id identifier rubyid__mongoid_expand_keys'>_mongoid_expand_keys</span>(<span class='id identifier rubyid_new_s'>new_s</span>)
    <span class='id identifier rubyid_normalized'>normalized</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='id identifier rubyid_k'>k</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_to_s'>to_s</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>[<span class='id identifier rubyid_k'>k</span>]
        <span class='comment'># There is already a condition on k.
</span>        <span class='comment'># If v is an operator, and all existing conditions are
</span>        <span class='comment'># also operators, and v isn&#39;t present in existing conditions,
</span>        <span class='comment'># we can add to existing conditions.
</span>        <span class='comment'># Otherwise use $and.
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>) <span class='op'>&amp;&amp;</span>
          <span class='id identifier rubyid_v'>v</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span>
          (<span class='id identifier rubyid_new_k'>new_k</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_first'>first</span>).<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>&amp;&amp;</span>
          (<span class='id identifier rubyid_existing_kv'>existing_kv</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>[<span class='id identifier rubyid_k'>k</span>]).<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>) <span class='op'>&amp;&amp;</span>
          <span class='op'>!</span><span class='id identifier rubyid_existing_kv'>existing_kv</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_new_k'>new_k</span>) <span class='op'>&amp;&amp;</span>
          <span class='id identifier rubyid_existing_kv'>existing_kv</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_all?'>all?</span> { <span class='op'>|</span><span class='id identifier rubyid_sub_k'>sub_k</span><span class='op'>|</span> <span class='id identifier rubyid_sub_k'>sub_k</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span>) }
        <span class='kw'>then</span>
          <span class='id identifier rubyid_merged_v'>merged_v</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>[<span class='id identifier rubyid_k'>k</span>].<span class='id identifier rubyid_merge'><a href="../../Criteria.html#merge-instance_method" title="Mongoid::Criteria#merge (method)">merge</a></span>(<span class='id identifier rubyid_v'>v</span>)
          <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>.<span class='id identifier rubyid_store'>store</span>(<span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_merged_v'>merged_v</span>)
        <span class='kw'>else</span>
          <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid___multi__'>__multi__</span><span class='comma'>,</span> [<span class='id identifier rubyid_k'>k</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_v'>v</span>]<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$and</span><span class='tstring_end'>&#39;</span></span>)
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>.<span class='id identifier rubyid_store'>store</span>(<span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_c'>c</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="any_in-instance_method">
  <h3 class='signature '>
    #<strong>any_in</strong>(condition)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#in-instance_method" title="Mongoid::Criteria::Queryable::Selectable#in (method)">#in</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L339-L339'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='339' data-end='339'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 339</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_any_in'>any_in</span> <span class='symbeg'>:</span><span class='kw'>in</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="any_of-instance_method">
  <h3 class='signature '>
    #<strong>any_of</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds a disjunction of the arguments as an additional constraint to the criteria already existing in the receiver.</p>

<p>Use <code>or</code> to make the receiver one of the disjunction operands.</p>

<p>Each argument can be a <a href="../../../Hash.html" title="Hash (class)"><code>::Hash</code></a>, a <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> object, an array of <a href="../../../Hash.html" title="Hash (class)"><code>::Hash</code></a> or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects, or a nested array. Nested arrays will be flattened and can be of any depth. Passing arrays is deprecated.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $or selection where both fields must have the specified values.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_any_of'>any_of</span>(<span class='label'>field:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>field:</span> <span class='int'>2</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add the $or selection where either value match is sufficient.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_any_of'>any_of</span>({<span class='label'>field:</span> <span class='int'>1</span>}<span class='comma'>,</span> {<span class='label'>field:</span> <span class='int'>2</span>})</code></pre>
        <p class='example_title'><div class='inline'>
<p>Same as previous example but using the deprecated array wrap.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_any_of'>any_of</span>([{<span class='label'>field:</span> <span class='int'>1</span>}<span class='comma'>,</span> {<span class='label'>field:</span> <span class='int'>2</span>}])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Same as previous example, also deprecated.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_any_of'>any_of</span>([{<span class='label'>field:</span> <span class='int'>1</span>}]<span class='comma'>,</span> [{<span class='label'>field:</span> <span class='int'>2</span>}])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criteria</span>
    <span class='type'>([ <a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> | <a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>&gt; ]...)</span>
&mdash;    <div class='inline'>
<p>Multiple key/value pair matches or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects, or arrays thereof. Passing arrays is deprecated.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The new selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L674-L702'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='674' data-end='702'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 674</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_any_of'>any_of</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='id identifier rubyid_criteria'>criteria</span> <span class='op'>=</span> <span class='id identifier rubyid__mongoid_flatten_arrays'>_mongoid_flatten_arrays</span>(<span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_length'>length</span>
  <span class='kw'>when</span> <span class='int'>0</span>
    <span class='id identifier rubyid_clone'>clone</span>
  <span class='kw'>when</span> <span class='int'>1</span>
    <span class='comment'># When we have a single criteria, any_of behaves like and.
</span>    <span class='comment'># Note: criteria can be a Query object, which #where method does
</span>    <span class='comment'># not support.
</span>    <span class='kw'>self</span>.<span class='id identifier rubyid_and'><a href="#and-instance_method" title="Mongoid::Criteria::Queryable::Selectable#and (method)">and</a></span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='kw'>else</span>
    <span class='comment'># When we have multiple criteria, combine them all with $or
</span>    <span class='comment'># and add the result to self.
</span>    <span class='id identifier rubyid_exprs'>exprs</span> <span class='op'>=</span> <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_criterion'>criterion</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Selectable</span>)
        <span class='id identifier rubyid__mongoid_expand_keys'>_mongoid_expand_keys</span>(<span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>)
      <span class='kw'>else</span>
        <span class='const'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>[<span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../../Symbol.html" title="Symbol (class)">Symbol</a></span>)
            [<span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>]
          <span class='kw'>else</span>
            [<span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>]
          <span class='kw'>end</span>
        <span class='kw'>end</span>]
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_and'><a href="#and-instance_method" title="Mongoid::Criteria::Queryable::Selectable#and (method)">and</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$or</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exprs'>exprs</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="between-instance_method">
  <h3 class='signature '>
    #<strong>between</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the range selection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Match on results within a single range.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_between'>between</span>(<span class='label'>field:</span> <span class='int'>1</span><span class='op'>..</span><span class='int'>2</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Match on results between multiple ranges.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_between'>between</span>(<span class='label'>field:</span> <span class='int'>1</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span> <span class='label'>other:</span> <span class='int'>5</span><span class='op'>..</span><span class='int'>7</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>Multiple key/range pairs.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L124-L135'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='124' data-end='135'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 124</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_between'>between</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_between'>between</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_selection'><a href="#selection-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selection (method)">selection</a></span>(<span class='id identifier rubyid_criterion'>criterion</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span><span class='comma'>,</span> <span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>.<span class='id identifier rubyid_store'>store</span>(
      <span class='id identifier rubyid_field'>field</span><span class='comma'>,</span>
      { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$gte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$lte</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_max'>max</span> }
    )
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="elem_match-instance_method">
  <h3 class='signature '>
    #<strong>elem_match</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Select with an $elemMatch.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add criterion for a single match.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_elem_match'>elem_match</span>(<span class='label'>field:</span> { <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value</span><span class='tstring_end'>&quot;</span></span> })</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add criterion for multiple matches.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_elem_match'>elem_match</span>(
  <span class='label'>field:</span> { <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value</span><span class='tstring_end'>&quot;</span></span> }<span class='comma'>,</span>
  <span class='label'>other:</span> { <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value</span><span class='tstring_end'>&quot;</span></span>}
)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $elemMatch in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_elem_match'>elem_match</span> <span class='op'>=&gt;</span> { <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value</span><span class='tstring_end'>&quot;</span></span> })</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/match pairs.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L154-L160'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='154' data-end='160'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 154</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_elem_match'>elem_match</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_elem_match'>elem_match</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$elemMatch</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eq-instance_method">
  <h3 class='signature '>
    #<strong>eq</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $eq criterion to the selector.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $eq criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_eq'>eq</span>(<span class='label'>age:</span> <span class='int'>60</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $eq in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_eq'>eq</span> <span class='op'>=&gt;</span> <span class='int'>10</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value pairs to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L257-L263'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='257' data-end='263'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 257</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_eq'>eq</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_eq'>eq</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$eq</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="excludes-instance_method">
  <h3 class='signature '>
    #<strong>excludes</strong>(criterion)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#ne-instance_method" title="Mongoid::Criteria::Queryable::Selectable#ne (method)">#ne</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L437-L437'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='437' data-end='437'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 437</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_excludes'>excludes</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ne'><a href="#ne-instance_method" title="Mongoid::Criteria::Queryable::Selectable#ne (method)">ne</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exists-instance_method">
  <h3 class='signature '>
    #<strong>exists</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $exists selection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add a single selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_exists'>exists</span>(<span class='label'>field:</span> <span class='kw'>true</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add multiple selections.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_exists'>exists</span>(<span class='label'>field:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>other:</span> <span class='kw'>false</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $exists in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_exists'>exists</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/boolean existence checks.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L177-L185'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='177' data-end='185'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 177</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exists'>exists</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_exists'>exists</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_typed_override'><a href="#typed_override-instance_method" title="Mongoid::Criteria::Queryable::Selectable#typed_override (method)">typed_override</a></span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$exists</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='const'><a href="../../../Mongoid.html" title="Mongoid (module)">Mongoid</a></span><span class='op'>::</span><span class='const'><a href="../../Boolean.html" title="Mongoid::Boolean (class)">Boolean</a></span>.<span class='id identifier rubyid_evolve'>evolve</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expr_query-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>expr_query</strong>(criterion)  &#x21d2; <code>Selectable</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds the specified expression to the query.</p>

<p>Criterion must be a hash in one of the following forms:</p>
<ul><li>
<p><code>value</code></p>
</li><li>
<p><code>=&gt; value</code></p>
</li><li>
<p><code>value</code></p>
</li><li>
<p><code>=&gt; operator_value_expression</code></p>
</li></ul>

<p>Field name and operator may be given as either strings or symbols.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Create the selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_expr_query'>expr_query</span>(<span class='label'>age:</span> <span class='int'>50</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value pairs.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L852-L873'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='852' data-end='873'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 852</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expr_query'>expr_query</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Criterion cannot be nil here</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='const'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span> <span class='op'>===</span> <span class='id identifier rubyid_criterion'>criterion</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/InvalidQuery.html" title="Mongoid::Errors::InvalidQuery (class)">InvalidQuery</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expression must be a Hash: </span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/InvalidQuery.html" title="Mongoid::Errors::InvalidQuery (class)">InvalidQuery</a></span>.<span class='id identifier rubyid_truncate_expr'><a href="../../Errors/InvalidQuery.html#truncate_expr-class_method" title="Mongoid::Errors::InvalidQuery.truncate_expr (method)">truncate_expr</a></span>(<span class='id identifier rubyid_criterion'>criterion</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_normalized'>normalized</span> <span class='op'>=</span> <span class='id identifier rubyid__mongoid_expand_keys'>_mongoid_expand_keys</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='id identifier rubyid_clone'>clone</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='op'>|</span>
    <span class='id identifier rubyid_normalized'>normalized</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='id identifier rubyid_field_s'>field_s</span> <span class='op'>=</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_to_s'>to_s</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_field_s'>field_s</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span>)
        <span class='comment'># Query expression-level operator, like $and or $where
</span>        <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_add_operator_expression'>add_operator_expression</span>(<span class='id identifier rubyid_field_s'>field_s</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
      <span class='kw'>else</span>
        <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_add_field_expression'>add_field_expression</span>(<span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="geo_spatial-instance_method">
  <h3 class='signature '>
    #<strong>geo_spatial</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The only valid geometry shapes for a $geoIntersects are: <code>:intersects_line</code>, <code>:intersects_point</code>, and <code>:intersects_polygon</code>.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The only valid options for a $geoWithin query are the geometry shape <code>:within_polygon</code> and the operator <code>:within_box</code>.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The <code>:within_box</code> operator for the $geoWithin query expects the lower left (south west) coordinate pair as the first argument and the upper right (north east) as the second argument. Important: When latitude and longitude are passed, longitude is expected as the first element of the coordinate pair. Source: <a href="https://www.mongodb.com/docs/manual/reference/operator/query/box">www.mongodb.com/docs/manual/reference/operator/query/box</a>/</p>
</div>
  </div>


<p>Add a $geoIntersects or $geoWithin selection. <a href="../../../Symbol.html" title="Symbol (class)"><code>::Symbol</code></a> operators must be used as shown in the examples to expand the criteria.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add a geo intersect criterion for a line.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_geo_spatial'>geo_spatial</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_intersects_line'>intersects_line</span> <span class='op'>=&gt;</span> [[ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span> ]<span class='comma'>,</span> [ <span class='int'>2</span><span class='comma'>,</span> <span class='int'>10</span> ]])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add a geo intersect criterion for a point.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_geo_spatial'>geo_spatial</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_intersects_point'>intersects_point</span> <span class='op'>=&gt;</span> [[ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span> ]])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add a geo intersect criterion for a polygon.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_geo_spatial'>geo_spatial</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_intersects_polygon'>intersects_polygon</span> <span class='op'>=&gt;</span> [[ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span> ]<span class='comma'>,</span> [ <span class='int'>2</span><span class='comma'>,</span> <span class='int'>10</span> ]<span class='comma'>,</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span> ]])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add a geo within criterion for a polygon.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_geo_spatial'>geo_spatial</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_within_polygon'>within_polygon</span> <span class='op'>=&gt;</span> [[ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span> ]<span class='comma'>,</span> [ <span class='int'>2</span><span class='comma'>,</span> <span class='int'>10</span> ]<span class='comma'>,</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span> ]])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add a geo within criterion for a box.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_geo_spatial'>geo_spatial</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_within_box'>within_box</span> <span class='op'>=&gt;</span> [[ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>10</span> ]<span class='comma'>,</span> [ <span class='int'>2</span><span class='comma'>,</span> <span class='int'>10</span> ])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The criterion.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L224-L230'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='224' data-end='230'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 224</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_geo_spatial'>geo_spatial</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_geo_spatial'>geo_spatial</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid___merge__'>__merge__</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gt-instance_method">
  <h3 class='signature '>
    #<strong>gt</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $gt criterion to the selector.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $gt criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_gt'>gt</span>(<span class='label'>age:</span> <span class='int'>60</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $gt in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_gt'>gt</span> <span class='op'>=&gt;</span> <span class='int'>10</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value pairs to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L277-L283'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='277' data-end='283'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 277</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gt'>gt</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gt'>gt</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$gt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gte-instance_method">
  <h3 class='signature '>
    #<strong>gte</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $gte criterion to the selector.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $gte criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_gte'>gte</span>(<span class='label'>age:</span> <span class='int'>60</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $gte in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_gte'>gte</span> <span class='op'>=&gt;</span> <span class='int'>10</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value pairs to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L297-L303'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='297' data-end='303'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 297</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gte'>gte</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gte'>gte</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$gte</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="in-instance_method">
  <h3 class='signature '>
    #<strong>in</strong>(condition)  &#x21d2; <code>Selectable</code> 
    <span class='aliases'>Also known as: <span class='names'>#any_in</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds the $in selection to the selectable.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add $in selection on an array.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_in'>in</span>(<span class='label'>age:</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span> ])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add $in selection on a range.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_in'>in</span>(<span class='label'>age:</span> <span class='int'>18</span><span class='op'>..</span><span class='int'>24</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $in in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span> ])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>condition</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value criterion pairs.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L320-L338'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='320' data-end='338'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 320</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>in</span>(<span class='id identifier rubyid_condition'>condition</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_condition'>condition</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>in</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_condition'>condition</span> <span class='op'>=</span> <span class='id identifier rubyid_expand_condition_to_array_values'>expand_condition_to_array_values</span>(<span class='id identifier rubyid_condition'>condition</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_strategy'>strategy</span>
    <span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_strategy'>strategy</span><span class='comma'>,</span> <span class='id identifier rubyid_condition'>condition</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$in</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_condition'>condition</span>.<span class='id identifier rubyid_inject'>inject</span>(<span class='id identifier rubyid_clone'>clone</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> (<span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)<span class='op'>|</span>
      <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$in</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_value'>value</span>}
      <span class='kw'>if</span> <span class='id identifier rubyid_negating?'><a href="#negating%3F-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating? (method)">negating?</a></span>
        <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$not</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_v'>v</span>}
      <span class='kw'>end</span>
      <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_add_field_expression'>add_field_expression</span>(<span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>)
    <span class='kw'>end</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="js_query-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>js_query</strong>(criterion)  &#x21d2; <code>Selectable</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a javascript selection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Create the javascript selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_js_query'>js_query</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>this.age == 50</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>The javascript as a string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L904-L914'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='904' data-end='914'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 904</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_js_query'>js_query</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='id identifier rubyid_clone'>clone</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_negating?'><a href="#negating%3F-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating? (method)">negating?</a></span>
      <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_add_operator_expression'>add_operator_expression</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$and</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        [{<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$nor</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> [{<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$where</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_criterion'>criterion</span>}]}])
    <span class='kw'>else</span>
      <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_add_operator_expression'>add_operator_expression</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$where</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_criterion'>criterion</span>)
    <span class='kw'>end</span>
    <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lt-instance_method">
  <h3 class='signature '>
    #<strong>lt</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $lt criterion to the selector.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $lt criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_lt'>lt</span>(<span class='label'>age:</span> <span class='int'>60</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $lt in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_lt'>lt</span> <span class='op'>=&gt;</span> <span class='int'>10</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value pairs to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L353-L359'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='353' data-end='359'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 353</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lt'>lt</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lt'>lt</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$lt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lte-instance_method">
  <h3 class='signature '>
    #<strong>lte</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add the $lte criterion to the selector.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $lte criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_lte'>lte</span>(<span class='label'>age:</span> <span class='int'>60</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $lte in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_lte'>lte</span> <span class='op'>=&gt;</span> <span class='int'>10</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value pairs to check.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L373-L379'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='373' data-end='379'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 373</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lte'>lte</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lte'>lte</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$lte</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="max_distance-instance_method">
  <h3 class='signature '>
    #<strong>max_distance</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Add a $maxDistance selection to the selectable.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $maxDistance selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_max_distance'>max_distance</span>(<span class='label'>location:</span> <span class='int'>10</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/distance pairs.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L390-L397'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='390' data-end='397'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 390</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_max_distance'>max_distance</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_max_distance'>max_distance</span>
  <span class='kw'>end</span>

  <span class='comment'># $maxDistance must be given together with $near
</span>  <span class='id identifier rubyid___add__'>__add__</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$maxDistance</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mod-instance_method">
  <h3 class='signature '>
    #<strong>mod</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds $mod selection to the selectable.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $mod selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_mod'>mod</span>(<span class='label'>field:</span> [ <span class='int'>10</span><span class='comma'>,</span> <span class='int'>1</span> ])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $mod in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_mod'>mod</span> <span class='op'>=&gt;</span> [ <span class='int'>10</span><span class='comma'>,</span> <span class='int'>1</span> ])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/mod selections.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L410-L416'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='410' data-end='416'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 410</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mod'>mod</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mod'>mod</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$mod</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ne-instance_method">
  <h3 class='signature '>
    #<strong>ne</strong>(criterion)  &#x21d2; <code>Selectable</code> 
    <span class='aliases'>Also known as: <span class='names'>#excludes</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds $ne selection to the selectable.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Query for a value $ne to something.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_ne'>ne</span>(<span class='label'>field:</span> <span class='int'>10</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $ne in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_ne'>ne</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/ne selections.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L430-L436'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='430' data-end='436'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 430</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ne'>ne</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ne'>ne</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$ne</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="near-instance_method">
  <h3 class='signature '>
    #<strong>near</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds a $near criterion to a geo selection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $near selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_near'>near</span>(<span class='label'>location:</span> [ <span class='float'>23.1</span><span class='comma'>,</span> <span class='float'>12.1</span> ])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $near in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_near'>near</span> <span class='op'>=&gt;</span> [ <span class='float'>23.2</span><span class='comma'>,</span> <span class='float'>12.1</span> ])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/location pair.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L451-L457'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='451' data-end='457'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 451</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_near'>near</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_near'>near</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$near</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="near_sphere-instance_method">
  <h3 class='signature '>
    #<strong>near_sphere</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds a $nearSphere criterion to a geo selection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $nearSphere selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_near_sphere'>near_sphere</span>(<span class='label'>location:</span> [ <span class='float'>23.1</span><span class='comma'>,</span> <span class='float'>12.1</span> ])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $nearSphere in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_near_sphere'>near_sphere</span> <span class='op'>=&gt;</span> [ <span class='float'>10.11</span><span class='comma'>,</span> <span class='float'>3.22</span> ])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/location pair.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L471-L477'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='471' data-end='477'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 471</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_near_sphere'>near_sphere</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_near_sphere'>near_sphere</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_and_with_operator'>and_with_operator</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$nearSphere</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="nin-instance_method">
  <h3 class='signature '>
    #<strong>nin</strong>(condition)  &#x21d2; <code>Selectable</code> 
    <span class='aliases'>Also known as: <span class='names'>#not_in</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds the $nin selection to the selectable.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add $nin selection on an array.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_nin'>nin</span>(<span class='label'>age:</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span> ])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add $nin selection on a range.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_nin'>nin</span>(<span class='label'>age:</span> <span class='int'>18</span><span class='op'>..</span><span class='int'>24</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $nin in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_nin'>nin</span> <span class='op'>=&gt;</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span> ])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>condition</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/value criterion pairs.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L494-L512'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='494' data-end='512'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 494</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_nin'>nin</span>(<span class='id identifier rubyid_condition'>condition</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_condition'>condition</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_nin'>nin</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_condition'>condition</span> <span class='op'>=</span> <span class='id identifier rubyid_expand_condition_to_array_values'>expand_condition_to_array_values</span>(<span class='id identifier rubyid_condition'>condition</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_strategy'>strategy</span>
    <span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_strategy'>strategy</span><span class='comma'>,</span> <span class='id identifier rubyid_condition'>condition</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$nin</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_condition'>condition</span>.<span class='id identifier rubyid_inject'>inject</span>(<span class='id identifier rubyid_clone'>clone</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> (<span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)<span class='op'>|</span>
      <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$nin</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_value'>value</span>}
      <span class='kw'>if</span> <span class='id identifier rubyid_negating?'><a href="#negating%3F-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating? (method)">negating?</a></span>
        <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$not</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_v'>v</span>}
      <span class='kw'>end</span>
      <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_add_field_expression'>add_field_expression</span>(<span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>)
    <span class='kw'>end</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="none_of-instance_method">
  <h3 class='signature '>
    #<strong>none_of</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Negate the arguments, constraining the query to only those documents that do NOT match the arguments.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Exclude a single criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_none_of'>none_of</span>(<span class='label'>name:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Bob</span><span class='regexp_end'>/</span></span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Exclude multiple criteria.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_none_of'>none_of</span>(<span class='label'>name:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Bob</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>USA</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Exclude multiple criteria as an array.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_none_of'>none_of</span>([{ <span class='label'>name:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Bob</span><span class='regexp_end'>/</span></span> }<span class='comma'>,</span> { <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>USA</span><span class='tstring_end'>&quot;</span></span> }])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criteria</span>
    <span class='type'>([ <a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> ]...)</span>
&mdash;    <div class='inline'>
<p>The key/value pair matches or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects to negate.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The new selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L601-L612'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='601' data-end='612'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 601</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_none_of'>none_of</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='id identifier rubyid_criteria'>criteria</span> <span class='op'>=</span> <span class='id identifier rubyid__mongoid_flatten_arrays'>_mongoid_flatten_arrays</span>(<span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_dup'>dup</span> <span class='kw'>if</span> <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_exprs'>exprs</span> <span class='op'>=</span> <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_criterion'>criterion</span><span class='op'>|</span>
    <span class='id identifier rubyid__mongoid_expand_keys'>_mongoid_expand_keys</span>(
        <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Selectable</span>) <span class='op'>?</span>
          <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span> <span class='op'>:</span> <span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>end</span>

  <span class='kw'>self</span>.<span class='id identifier rubyid_and'><a href="#and-instance_method" title="Mongoid::Criteria::Queryable::Selectable#and (method)">and</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$nor</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exprs'>exprs</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="nor-instance_method">
  <h3 class='signature '>
    #<strong>nor</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds $nor selection to the selectable.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $nor selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_nor'>nor</span>(<span class='label'>field:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>field:</span> <span class='int'>2</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criteria</span>
    <span class='type'>([ <a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> | <a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>&gt; ]...)</span>
&mdash;    <div class='inline'>
<p>Multiple key/value pair matches or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The new selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L525-L527'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='525' data-end='527'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 525</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_nor'>nor</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='id identifier rubyid__mongoid_add_top_level_operation'>_mongoid_add_top_level_operation</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$nor</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_criteria'>criteria</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="not-instance_method">
  <h3 class='signature '>
    #<strong>not</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Negate the arguments, or the next selection if no arguments are given.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Negate the next selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_not'>not</span>.<span class='id identifier rubyid_in'><a href="#in-instance_method" title="Mongoid::Criteria::Queryable::Selectable#in (method)">in</a></span>(<span class='label'>field:</span> [ <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span> ])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add the $not criterion.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_not'>not</span>(<span class='label'>name:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Bob</span><span class='regexp_end'>/</span></span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute a $not in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_not'>not</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Bob</span><span class='regexp_end'>/</span></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criteria</span>
    <span class='type'>([ <a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> ]...)</span>
&mdash;    <div class='inline'>
<p>The key/value pair matches or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects to negate.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The new selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L554-L582'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='554' data-end='582'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 554</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>not</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_tap'>tap</span> { <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='op'>|</span> <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_negating'><a href="#negating-instance_method" title="Mongoid::Criteria::Queryable::Selectable#negating (method)">negating</a></span> <span class='op'>=</span> <span class='kw'>true</span> }
  <span class='kw'>else</span>
    <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_compact'>compact</span>.<span class='id identifier rubyid_inject'>inject</span>(<span class='kw'>self</span>.<span class='id identifier rubyid_clone'>clone</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_new_s'>new_s</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_new_s'>new_s</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Selectable</span>)
        <span class='id identifier rubyid_new_s'>new_s</span> <span class='op'>=</span> <span class='id identifier rubyid_new_s'>new_s</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid__mongoid_expand_keys'>_mongoid_expand_keys</span>(<span class='id identifier rubyid_new_s'>new_s</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
        <span class='id identifier rubyid_k'>k</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_to_s'>to_s</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>||</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span>)
          <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid___multi__'>__multi__</span><span class='comma'>,</span> [{<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$nor</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> [{<span class='id identifier rubyid_k'>k</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_v'>v</span>}]}]<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$and</span><span class='tstring_end'>&#39;</span></span>)
        <span class='kw'>else</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span>)
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid___multi__'>__multi__</span><span class='comma'>,</span> [{<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$nor</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> [{<span class='id identifier rubyid_k'>k</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_v'>v</span>}]}]<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$and</span><span class='tstring_end'>&#39;</span></span>)
          <span class='kw'>else</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../../Regexp.html" title="Regexp (class)">Regexp</a></span>)
              <span class='id identifier rubyid_negated_operator'>negated_operator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$not</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>else</span>
              <span class='id identifier rubyid_negated_operator'>negated_operator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$ne</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid___override__'>__override__</span><span class='comma'>,</span> {<span class='id identifier rubyid_k'>k</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_v'>v</span>}<span class='comma'>,</span> <span class='id identifier rubyid_negated_operator'>negated_operator</span>)
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_c'>c</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="not_in-instance_method">
  <h3 class='signature '>
    #<strong>not_in</strong>(condition)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#nin-instance_method" title="Mongoid::Criteria::Queryable::Selectable#nin (method)">#nin</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L513-L513'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='513' data-end='513'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 513</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_not_in'>not_in</span> <span class='symbeg'>:</span><span class='id identifier rubyid_nin'><a href="#nin-instance_method" title="Mongoid::Criteria::Queryable::Selectable#nin (method)">nin</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="or-instance_method">
  <h3 class='signature '>
    #<strong>or</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a disjunction using $or from the existing criteria in the receiver and the provided arguments.</p>

<p>This behavior (receiver becoming one of the disjunction operands) matches ActiveRecord’s <code>or</code> behavior.</p>

<p>Use <code>any_of</code> to add a disjunction of the arguments as an additional constraint to the criteria already existing in the receiver.</p>

<p>Each argument can be a <a href="../../../Hash.html" title="Hash (class)"><code>::Hash</code></a>, a <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> object, an array of <a href="../../../Hash.html" title="Hash (class)"><code>::Hash</code></a> or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects, or a nested array. Nested arrays will be flattened and can be of any depth. Passing arrays is deprecated.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $or selection where both fields must have the specified values.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_or'>or</span>(<span class='label'>field:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>field:</span> <span class='int'>2</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add the $or selection where either value match is sufficient.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_or'>or</span>({<span class='label'>field:</span> <span class='int'>1</span>}<span class='comma'>,</span> {<span class='label'>field:</span> <span class='int'>2</span>})</code></pre>
        <p class='example_title'><div class='inline'>
<p>Same as previous example but using the deprecated array wrap.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_or'>or</span>([{<span class='label'>field:</span> <span class='int'>1</span>}<span class='comma'>,</span> {<span class='label'>field:</span> <span class='int'>2</span>}])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Same as previous example, also deprecated.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_or'>or</span>([{<span class='label'>field:</span> <span class='int'>1</span>}]<span class='comma'>,</span> [{<span class='label'>field:</span> <span class='int'>2</span>}])</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criteria</span>
    <span class='type'>([ <a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a> | <a href="../../../Array.html" title="Array (class)">Array</a>&lt;<a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../Criteria.html" title="Mongoid::Criteria (class)">Criteria</a>&gt; ]...)</span>
&mdash;    <div class='inline'>
<p>Multiple key/value pair matches or <a href="../../Criteria.html" title="Mongoid::Criteria (class)"><code>::Mongoid::Criteria</code></a> objects, or arrays thereof. Passing arrays is deprecated.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The new selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L644-L646'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='644' data-end='646'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 644</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>or</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='id identifier rubyid__mongoid_add_top_level_operation'>_mongoid_add_top_level_operation</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$or</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_criteria'>criteria</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="selection-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>selection</strong>(criterion = nil)  &#x21d2; <code>Selectable</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Take the provided criterion and store it as a selection in the query selector.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Store the selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_selection'>selection</span>({ <span class='label'>field:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value</span><span class='tstring_end'>&quot;</span></span> })</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>The selection to store.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L926-L935'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='926' data-end='935'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 926</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_selection'>selection</span>(<span class='id identifier rubyid_criterion'>criterion</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_clone'>clone</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>
      <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
        <span class='kw'>yield</span>(<span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span><span class='comma'>,</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="Key.html" title="Mongoid::Criteria::Queryable::Key (class)">Key</a></span>) <span class='op'>?</span> <span class='id identifier rubyid_field'>field</span> <span class='op'>:</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="text_search-instance_method">
  <h3 class='signature '>
    #<strong>text_search</strong>(terms, opts = nil)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Per <a href="https://www.mongodb.com/docs/manual/reference/operator/query/text">www.mongodb.com/docs/manual/reference/operator/query/text</a>/ it is not currently possible to supply multiple text search conditions in a query. <a href="../../../Mongoid.html" title="Mongoid (module)"><code>::Mongoid</code></a> will build such a query but the server will return an error when trying to execute it.</p>
</div>
  </div>


<p>Construct a text search selector.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Construct a text search selector.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_text_search'>text_search</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testing</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Construct a text search selector with options.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_text_search'>text_search</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testing</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='gvar'>$language</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fr</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>terms</span>
    <span class='type'>(<a href="../../../String.html" title="String (class)">String</a> | <a href="../../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>A string of terms that MongoDB parses and uses to query the text index.</p>
</div>
  </li>
  <li>
    <span class='name'>opts</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>Text search options. See MongoDB documentation for options.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L776-L796'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='776' data-end='796'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 776</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_text_search'>text_search</span>(<span class='id identifier rubyid_terms'>terms</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_terms'>terms</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_terms'>terms</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_clone'>clone</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='op'>|</span>
    <span class='id identifier rubyid_criterion'>criterion</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$text</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> { <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$search</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_terms'>terms</span> }}
    <span class='id identifier rubyid_criterion'>criterion</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$text</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_merge!'><a href="../../Criteria.html#merge!-instance_method" title="Mongoid::Criteria#merge! (method)">merge!</a></span>(<span class='id identifier rubyid_opts'>opts</span>) <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$text</span><span class='tstring_end'>&#39;</span></span>]
      <span class='comment'># Per https://www.mongodb.com/docs/manual/reference/operator/query/text/
</span>      <span class='comment'># multiple $text expressions are not currently supported by
</span>      <span class='comment'># MongoDB server, but build the query correctly instead of
</span>      <span class='comment'># overwriting previous text search condition with the currently
</span>      <span class='comment'># given one.
</span>      <span class='const'><a href="../../../Mongoid.html" title="Mongoid (module)">Mongoid</a></span>.<span class='id identifier rubyid_logger'><a href="../../Loggable.html#logger-instance_method" title="Mongoid::Loggable#logger (method)">logger</a></span>.<span class='id identifier rubyid_warn'>warn</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Multiple $text expressions per query are not currently supported by the server</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$and</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> [<span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>]}.<span class='id identifier rubyid_merge'><a href="../../Criteria.html#merge-instance_method" title="Mongoid::Criteria#merge (method)">merge</a></span>(<span class='id identifier rubyid_criterion'>criterion</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span> <span class='op'>=</span> <span class='id identifier rubyid_query'>query</span>.<span class='id identifier rubyid_selector'><a href="#selector-instance_method" title="Mongoid::Criteria::Queryable::Selectable#selector (method)">selector</a></span>.<span class='id identifier rubyid_merge'><a href="../../Criteria.html#merge-instance_method" title="Mongoid::Criteria#merge (method)">merge</a></span>(<span class='id identifier rubyid_criterion'>criterion</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="typed_override-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>typed_override</strong>(criterion, operator)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Force the values of the criterion to be evolved.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Force values to booleans.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_force_typing'>force_typing</span>(<span class='id identifier rubyid_criterion'>criterion</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_val'>val</span><span class='op'>|</span>
  <span class='const'><a href="../../Boolean.html" title="Mongoid::Boolean (class)">Boolean</a></span>.<span class='id identifier rubyid_evolve'>evolve</span>(<span class='id identifier rubyid_val'>val</span>)
<span class='kw'>end</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The criterion.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L885-L892'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='885' data-end='892'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 885</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_typed_override'>typed_override</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='id identifier rubyid_operator'>operator</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>
    <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_transform_values!'>transform_values!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='kw'>yield</span>(<span class='id identifier rubyid_value'>value</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid___override__'>__override__</span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='id identifier rubyid_operator'>operator</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="where-instance_method">
  <h3 class='signature '>
    #<strong>where</strong>(*criteria)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This is the general entry point for most MongoDB queries. This either creates a standard field: value selection, and expanded selection with the use of hash methods, or a $where selection if a string is provided.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add a standard selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'>where</span>(<span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>syd</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Add a javascript selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'>where</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>this.name == &#39;syd&#39;</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>*criterion</span>
    <span class='type'>([ <a href="../../../Hash.html" title="Hash (class)">Hash</a> | <a href="../../../String.html" title="String (class)">String</a> ]...)</span>
&mdash;    <div class='inline'>
<p>The standard selection or javascript string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L812-L831'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='812' data-end='831'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 812</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_where'>where</span>(<span class='op'>*</span><span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_inject'>inject</span>(<span class='id identifier rubyid_clone'>clone</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_criterion'>criterion</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_where'>where</span>
    <span class='kw'>end</span>

    <span class='comment'># We need to save the criterion in an instance variable so
</span>    <span class='comment'># Modifiable methods know how to create a polymorphic object.
</span>    <span class='comment'># Note that this method in principle accepts multiple criteria,
</span>    <span class='comment'># but only the first one will be stored in @criterion. This
</span>    <span class='comment'># works out to be fine because first_or_create etc. methods
</span>    <span class='comment'># only ever specify one criterion to #where.
</span>    <span class='ivar'>@criterion</span> <span class='op'>=</span> <span class='id identifier rubyid_criterion'>criterion</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../../String.html" title="String (class)">String</a></span>)
      <span class='id identifier rubyid_js_query'><a href="#js_query-instance_method" title="Mongoid::Criteria::Queryable::Selectable#js_query (method)">js_query</a></span>(<span class='id identifier rubyid_criterion'>criterion</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_expr_query'><a href="#expr_query-instance_method" title="Mongoid::Criteria::Queryable::Selectable#expr_query (method)">expr_query</a></span>(<span class='id identifier rubyid_criterion'>criterion</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_reset_strategies!'>reset_strategies!</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="with_size-instance_method">
  <h3 class='signature '>
    #<strong>with_size</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method is named #with_size not to conflict with any existing #size method on enumerables or symbols.</p>
</div>
  </div>


<p>Add a $size selection for array fields.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $size selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_with_size'>with_size</span>(<span class='label'>field:</span> <span class='int'>5</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $size in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_with_size'>with_size</span> <span class='op'>=&gt;</span> <span class='int'>10</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/size pairs criterion.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L718-L726'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='718' data-end='726'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 718</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_with_size'>with_size</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_with_size'>with_size</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_typed_override'><a href="#typed_override-instance_method" title="Mongoid::Criteria::Queryable::Selectable#typed_override (method)">typed_override</a></span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$size</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='op'>::</span><span class='const'><a href="../../../Integer.html" title="Integer (class)">Integer</a></span>.<span class='id identifier rubyid_evolve'>evolve</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="with_type-instance_method">
  <h3 class='signature '>
    #<strong>with_type</strong>(criterion)  &#x21d2; <code>Selectable</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p><a href="http://vurl.me/PGOU">vurl.me/PGOU</a> contains a list of all types.</p>
</div>
  </div>


<p>Adds a $type selection to the selectable.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Add the $type selection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_with_type'>with_type</span>(<span class='label'>field:</span> <span class='int'>15</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Execute an $type in a where query.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_selectable'>selectable</span>.<span class='id identifier rubyid_where'><a href="#where-instance_method" title="Mongoid::Criteria::Queryable::Selectable#where (method)">where</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_with_type'>with_type</span> <span class='op'>=&gt;</span> <span class='int'>15</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>criterion</span>
    <span class='type'>(<a href="../../../Hash.html" title="Hash (class)">Hash</a>)</span>
&mdash;    <div class='inline'>
<p>The field/type pairs.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Selectable</code>)</span>
&mdash;    <div class='inline'>
<p>The cloned selectable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/criteria/queryable/selectable.rb#L744-L752'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='744' data-end='752'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/criteria/queryable/selectable.rb', line 744</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_with_type'>with_type</span>(<span class='id identifier rubyid_criterion'>criterion</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_criterion'>criterion</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../Errors.html" title="Mongoid::Errors (module)">Errors</a></span><span class='op'>::</span><span class='const'><a href="../../Errors/CriteriaArgumentRequired.html" title="Mongoid::Errors::CriteriaArgumentRequired (class)">CriteriaArgumentRequired</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_with_type'>with_type</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_typed_override'><a href="#typed_override-instance_method" title="Mongoid::Criteria::Queryable::Selectable#typed_override (method)">typed_override</a></span>(<span class='id identifier rubyid_criterion'>criterion</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$type</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='op'>::</span><span class='const'><a href="../../../Integer.html" title="Integer (class)">Integer</a></span>.<span class='id identifier rubyid_evolve'>evolve</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>