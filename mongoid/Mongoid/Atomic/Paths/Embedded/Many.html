<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Mongoid::Atomic::Paths::Embedded::Many &mdash; Mongoid master</title>

<link rel='stylesheet'  type='text/css' href='../../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongoid::Atomic::Paths::Embedded::Many",
    relpath = '../../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../../'>Mongoid master</a> &raquo; 
      <a href='../../../../_index.html#alpha_M'>Index (M)</a> &raquo; 
        <a href="../../../../Mongoid.html" title="Mongoid (module)">Mongoid</a> &raquo; 
        <a href="../../../Atomic.html" title="Mongoid::Atomic (module)">Atomic</a> &raquo; 
        <a href="../../Paths.html" title="Mongoid::Atomic::Paths (module)">Paths</a> &raquo; 
        <a href="../Embedded.html" title="Mongoid::Atomic::Paths::Embedded (module)">Embedded</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Many&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Mongoid::Atomic::Paths::Embedded::Many</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="../Embedded.html" title="Mongoid::Atomic::Paths::Embedded (module)"><code>::Mongoid::Atomic::Paths::Embedded</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/atomic/paths/embedded/many.rb#L11'>lib/mongoid/atomic/paths/embedded/many.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>This class encapsulates behavior for locating and updating documents that are defined as an embedded 1-n.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(document)  &#x21d2; Many </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create the new path utility.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#position_without_document-class_method" title=".position_without_document (class method)">.<strong>position_without_document</strong>(parent, association)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the position of where the document would go for the given association.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="../Embedded.html" title="Mongoid::Atomic::Paths::Embedded (module)"><code>::Mongoid::Atomic::Paths::Embedded</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="../Embedded.html#delete_modifier-instance_method" title="Mongoid::Atomic::Paths::Embedded#delete_modifier (method)">#delete_modifier</a>,
        <a class='i_m ro' href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">#document</a>,
        <a class='i_m ro' href="../Embedded.html#insert_modifier-instance_method" title="Mongoid::Atomic::Paths::Embedded#insert_modifier (method)">#insert_modifier</a>,
        <a class='i_m ro' href="../Embedded.html#parent-instance_method" title="Mongoid::Atomic::Paths::Embedded#parent (method)">#parent</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#position-instance_method" title="#position (instance method)">#<strong>position</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the position of the document in the hierarchy.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="../Embedded.html" title="Mongoid::Atomic::Paths::Embedded (module)"><code>::Mongoid::Atomic::Paths::Embedded</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../Embedded.html#path-instance_method" title="Mongoid::Atomic::Paths::Embedded#path (method)">#path</a></td>
      <td><div class='inline'><p>Get the path to the document in the hierarchy.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(document)  &#x21d2; <code>Many</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create the new path utility.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Create the path util.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>Many</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_document'><a href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">document</a></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>document</span>
    <span class='type'>(<a href="../../../Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The document to generate the paths for.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/atomic/paths/embedded/many.rb#L20-L23'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='20' data-end='23'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/atomic/paths/embedded/many.rb', line 20</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_document'><a href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">document</a></span>)
  <span class='ivar'>@document</span><span class='comma'>,</span> <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_document'><a href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">document</a></span><span class='comma'>,</span> <span class='id identifier rubyid_document'><a href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">document</a></span>.<span class='id identifier rubyid__parent'>_parent</span>
  <span class='ivar'>@insert_modifier</span><span class='comma'>,</span> <span class='ivar'>@delete_modifier</span> <span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$push</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$pull</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="position_without_document-class_method">
  <h3 class='signature  first'>
    .<strong>position_without_document</strong>(parent, association)  &#x21d2; <a href="../../../../String.html" title="String (class)">String</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the position of where the document would go for the given association. The use case for this function is when trying to persist an empty list for an embedded association. All of the existing functions for getting the position to store a document require passing in a document to store, which we don’t have when trying to store the empty list.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>parent</span>
    <span class='type'>(<a href="../../../Document.html" title="Mongoid::Document (module)">Document</a>)</span>
&mdash;    <div class='inline'>
<p>The parent document to store in.</p>
</div>
  </li>
  <li>
    <span class='name'>association</span>
    <span class='type'>(<a href="../../../Association/Relatable.html" title="Mongoid::Association::Relatable (module)">Mongoid::Association::Relatable</a>)</span>
&mdash;    <div class='inline'>
<p>The association metadata.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>The position string.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/atomic/paths/embedded/many.rb#L52-L55'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='52' data-end='55'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/atomic/paths/embedded/many.rb', line 52</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_position_without_document'>position_without_document</span>(<span class='id identifier rubyid_parent'><a href="../Embedded.html#parent-instance_method" title="Mongoid::Atomic::Paths::Embedded#parent (method)">parent</a></span><span class='comma'>,</span> <span class='id identifier rubyid_association'>association</span>)
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_parent'><a href="../Embedded.html#parent-instance_method" title="Mongoid::Atomic::Paths::Embedded#parent (method)">parent</a></span>.<span class='id identifier rubyid_atomic_position'>atomic_position</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pos'>pos</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_pos'>pos</span>.<span class='id identifier rubyid_blank?'>blank?</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_association'>association</span>.<span class='id identifier rubyid_store_as'>store_as</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="position-instance_method">
  <h3 class='signature  first'>
    #<strong>position</strong>  &#x21d2; <a href="../../../../String.html" title="String (class)">String</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the position of the document in the hierarchy. This will include indexes of 1-n embedded associations that may sit above the embedded many.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the position.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_many'>many</span>.<span class='id identifier rubyid_position'>position</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../../../String.html" title="String (class)">String</a>)</span>
&mdash;    <div class='inline'>
<p>The position of the document.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongoid/blob/master/lib/mongoid/atomic/paths/embedded/many.rb#L33-L37'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='33' data-end='37'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongoid/atomic/paths/embedded/many.rb', line 33</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_position'>position</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_parent'><a href="../Embedded.html#parent-instance_method" title="Mongoid::Atomic::Paths::Embedded#parent (method)">parent</a></span>.<span class='id identifier rubyid_atomic_position'>atomic_position</span>
  <span class='id identifier rubyid_locator'>locator</span> <span class='op'>=</span> <span class='id identifier rubyid_document'><a href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">document</a></span>.<span class='id identifier rubyid_new_record?'>new_record?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_document'><a href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">document</a></span>.<span class='id identifier rubyid__index'>_index</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pos'>pos</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_pos'>pos</span>.<span class='id identifier rubyid_blank?'>blank?</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_document'><a href="../Embedded.html#document-instance_method" title="Mongoid::Atomic::Paths::Embedded#document (method)">document</a></span>.<span class='id identifier rubyid__association'>_association</span>.<span class='id identifier rubyid_store_as'>store_as</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_locator'>locator</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>