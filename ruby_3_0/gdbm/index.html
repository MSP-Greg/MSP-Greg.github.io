<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: GDBM &mdash; gdbm</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "GDBM",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.0.6</a> &raquo; 
      <a href='.'>gdbm</a> &raquo; 
      <a href='_index.html#alpha_G'>Index (G)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>GDBM&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: GDBM</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Enumerable
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1227'>ext/gdbm/gdbm.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L74'>ext/gdbm/gdbm.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-Summary">Summary</h3>

<p>Ruby extension for GNU dbm (gdbm) – a simple database engine for storing key-value pairs on disk.</p>

<h3 id="label-Description">Description</h3>

<p>GNU dbm is a library for simple databases. A database is a file that stores key-value pairs. Gdbm allows the user to store, retrieve, and delete data by key. It furthermore allows a non-sorted traversal of all key-value pairs. A gdbm database thus provides the same functionality as a hash. As with objects of the Hash class, elements can be accessed with <a href="#[]-instance_method" title="GDBM#[] (method)">#[]</a>. Furthermore, <code>GDBM</code> mixes in the Enumerable module, thus providing convenient methods such as <code>#find</code>, <code>#collect</code>, <code>#map</code>, etc.</p>

<p>A process is allowed to open several different databases at the same time. A process can open a database as a “reader” or a “writer”. Whereas a reader has only read-access to the database, a writer has read- and write-access. A database can be accessed either by any number of readers or by exactly one writer at the same time.</p>

<h3 id="label-Examples">Examples</h3>
<ol><li>
<p>Opening/creating a database, and filling it with some entries:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_gdbm'>gdbm</span> <span class='op'>=</span> <span class='const'>GDBM</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="GDBM.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fruitstore.db</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_gdbm'>gdbm</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ananas</span><span class='tstring_end'>&quot;</span></span>]    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gdbm'>gdbm</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>banana</span><span class='tstring_end'>&quot;</span></span>]    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>8</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gdbm'>gdbm</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cranberry</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>4909</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gdbm'>gdbm</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="GDBM#close (method)">close</a></span></code></pre>
</li><li>
<p>Reading out a database:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_gdbm'>gdbm</span> <span class='op'>=</span> <span class='const'>GDBM</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="GDBM.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fruitstore.db</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_gdbm'>gdbm</span>.<span class='id identifier rubyid_each_pair'><a href="#each_pair-instance_method" title="GDBM#each_pair (method)">each_pair</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'><a href="#key-instance_method" title="GDBM#key (method)">key</a></span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'><a href="#key-instance_method" title="GDBM#key (method)">key</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_gdbm'>gdbm</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="GDBM#close (method)">close</a></span></code></pre>

<p>produces</p>

<pre class="code ruby"><code class="ruby">banana: 8
ananas: 3
cranberry: 4909</code></pre>
</li></ol>

<h3 id="label-Links">Links</h3>
<ul><li>
<p><a href="http://www.gnu.org/software/gdbm">www.gnu.org/software/gdbm</a>/</p>
</li></ul>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='FAST-constant' class='summary_signature'>FAST =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>flag for <code>#new</code> and <code>#open</code>. this flag is obsolete for gdbm &gt;= 1.8</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1291'># File 'ext/gdbm/gdbm.c', line 1291</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>GDBM_FAST</span>)</pre>
  </li>
  <li>
    <span id='NEWDB-constant' class='summary_signature'>NEWDB =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>open database as a writer; overwrite any existing databases</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1288'># File 'ext/gdbm/gdbm.c', line 1288</a>    <pre class='code c'>flag for #new and #open</pre>
  </li>
  <li>
    <span id='NOLOCK-constant' class='summary_signature'>NOLOCK =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>flag for <code>#new</code> and <code>#open</code></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1302'># File 'ext/gdbm/gdbm.c', line 1302</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>GDBM_NOLOCK</span>)</pre>
  </li>
  <li>
    <span id='READER-constant' class='summary_signature'>READER =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>open database as a reader</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1282'># File 'ext/gdbm/gdbm.c', line 1282</a>    <pre class='code c'>flag for #new and #open</pre>
  </li>
  <li>
    <span id='SYNC-constant' class='summary_signature'>SYNC =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>flag for <code>#new</code> and <code>#open</code>. only for gdbm &gt;= 1.8</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1298'># File 'ext/gdbm/gdbm.c', line 1298</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>GDBM_SYNC</span>)</pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>version of the gdbm library</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1305'># File 'ext/gdbm/gdbm.c', line 1305</a>    <pre class='code c'><span class='id identifier rubyid_rb_str_new2'>rb_str_new2</span>(<span class='id identifier rubyid_gdbm_version'>gdbm_version</span>)</pre>
  </li>
  <li>
    <span id='WRCREAT-constant' class='summary_signature'>WRCREAT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>open database as a writer; if the database does not exist, create a new one</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1286'># File 'ext/gdbm/gdbm.c', line 1286</a>    <pre class='code c'>flag for #new and #open</pre>
  </li>
  <li>
    <span id='WRITER-constant' class='summary_signature'>WRITER =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>open database as a writer</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1284'># File 'ext/gdbm/gdbm.c', line 1284</a>    <pre class='code c'>flag for #new and #open</pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(filename, mode = 0666, flags = nil)  </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new <code>GDBM</code> instance by opening a gdbm file named <em>filename</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename, mode = 0666, flags = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If called without a block, this is synonymous to <a href="#new-class_method" title="GDBM.new (method)">.new</a>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature wo'>
      <a href="#cachesize=-instance_method" title="#cachesize= (instance method)">#<strong>cachesize=</strong>(size)  &#x21d2; size </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the size of the internal bucket cache to <em>size</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true if the associated database file has been closed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true if the database is empty.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#fastmode=-instance_method" title="#fastmode= (instance method)">#<strong>fastmode=</strong>(boolean)  &#x21d2; Boolean </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Turns the database’s fast mode on or off.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#syncmode=-instance_method" title="#syncmode= (instance method)">#<strong>syncmode=</strong>(boolean)  &#x21d2; Boolean </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Turns the database’s synchronization mode on or off.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(key)  &#x21d2; value </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Retrieves the <em>value</em> corresponding to <em>key</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#[]=-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(key, value)  &#x21d2; value </a>
      (also: #store)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Associates the value <em>value</em> with the specified <em>key</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>  &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes all the key-value pairs within <em>gdbm</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(key)  &#x21d2; value<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the key-value-pair with the specified <em>key</em> from this database and returns the corresponding <em>value</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_if-instance_method" title="#delete_if (instance method)">#<strong>delete_if</strong> {|key, value| ... } &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#reject!-instance_method" title="GDBM#reject! (method)">#reject!</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_pair-instance_method" title="#each_pair (instance method)">#<strong>each_pair</strong> {|key, value| ... } &#x21d2; GDBM </a>
      (also: #each_pair)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Executes <em>block</em> for each key in the database, passing the <em>key</em> and the corresponding <em>value</em> as a parameter.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_key-instance_method" title="#each_key (instance method)">#<strong>each_key</strong> {|key| ... } &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Executes <em>block</em> for each key in the database, passing the <em>key</em> as a parameter.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_pair-instance_method" title="#each_pair (instance method)">#<strong>each_pair</strong> {|key, value| ... } &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#each-instance_method" title="GDBM#each (method)">#each</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_value-instance_method" title="#each_value (instance method)">#<strong>each_value</strong> {|value| ... } &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Executes <em>block</em> for each key in the database, passing the corresponding <em>value</em> as a parameter.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(key [, default])  &#x21d2; value </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Retrieves the <em>value</em> corresponding to <em>key</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#has_key%3F-instance_method" title="#has_key? (instance method)">#<strong>has_key?</strong>(k)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#has_value%3F-instance_method" title="#has_value? (instance method)">#<strong>has_value?</strong>(v)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#value%3F-instance_method" title="GDBM#value? (method)">#value?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#include%3F-instance_method" title="#include? (instance method)">#<strong>include?</strong>(k)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#invert-instance_method" title="#invert (instance method)">#<strong>invert</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash created by using <em>gdbm</em>’s values as keys, and the keys as values.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#key-instance_method" title="#key (instance method)">#<strong>key</strong>(value)  &#x21d2; key </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <em>key</em> for a given <em>value</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#key%3F-instance_method" title="#key? (instance method)">#<strong>key?</strong>(k)  &#x21d2; Boolean </a>
      (also: #include?, #has_key?, #member?)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true if the given key <em>k</em> exists within the database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#keys-instance_method" title="#keys (instance method)">#<strong>keys</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of all keys of this database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#length-instance_method" title="#length (instance method)">#<strong>length</strong>  &#x21d2; Fixnum </a>
      (also: #size)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the number of key-value pairs in this database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#member%3F-instance_method" title="#member? (instance method)">#<strong>member?</strong>(k)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reject-instance_method" title="#reject (instance method)">#<strong>reject</strong> {|key, value| ... } &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash copy of <em>gdbm</em> where all key-value pairs from <em>gdbm</em> for which <em>block</em> evaluates to true are removed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reject!-instance_method" title="#reject! (instance method)">#<strong>reject!</strong> {|key, value| ... } &#x21d2; GDBM </a>
      (also: #delete_if)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes every key-value pair from <em>gdbm</em> for which <em>block</em> evaluates to true.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reorganize-instance_method" title="#reorganize (instance method)">#<strong>reorganize</strong>  &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reorganizes the database file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#replace-instance_method" title="#replace (instance method)">#<strong>replace</strong>(other)  &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Replaces the content of <em>gdbm</em> with the key-value pairs of <em>other</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#select-instance_method" title="#select (instance method)">#<strong>select</strong> {|key, value| ... } &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new array of all key-value pairs of the database for which <em>block</em> evaluates to true.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#shift-instance_method" title="#shift (instance method)">#<strong>shift</strong>  &#x21d2; (key, value)<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes a key-value-pair from this database and returns it as a two-item array [ <em>key</em>, <em>value</em> ].</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Fixnum </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#length-instance_method" title="GDBM#length (method)">#length</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#store-instance_method" title="#store (instance method)">#<strong>store</strong>(key, value)  &#x21d2; value </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#[]=-instance_method" title="GDBM#[]= (method)">#[]=</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sync-instance_method" title="#sync (instance method)">#<strong>sync</strong>  &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Unless the <em>gdbm</em> object has been opened with the <strong>SYNC</strong> flag, it is not guaranteed that database modification operations are immediately applied to the database file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of all key-value pairs contained in the database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_hash-instance_method" title="#to_hash (instance method)">#<strong>to_hash</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash of all key-value pairs contained in the database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong>(other)  &#x21d2; GDBM </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds the key-value pairs of <em>other</em> to <em>gdbm</em>, overwriting entries with duplicate keys with those from <em>other</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#value%3F-instance_method" title="#value? (instance method)">#<strong>value?</strong>(v)  &#x21d2; Boolean </a>
      (also: #has_value?)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true if the given value <em>v</em> exists within the database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#values-instance_method" title="#values (instance method)">#<strong>values</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of all values of this database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(key, ...)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of the values associated with each specified <em>key</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#index-instance_method" title="#index (instance method)">#<strong>index</strong>(value)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(filename, mode = 0666, flags = nil)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new <code>GDBM</code> instance by opening a gdbm file named <em>filename</em>. If the file does not exist, a new file with file mode <em>mode</em> will be created. <em>flags</em> may be one of the following:</p>
<ul><li>
<p><strong>READER</strong>  - open as a reader</p>
</li><li>
<p><strong>WRITER</strong>  - open as a writer</p>
</li><li>
<p><strong>WRCREAT</strong> - open as a writer; if the database does not exist, create a new one</p>
</li><li>
<p><strong>NEWDB</strong>   - open as a writer; overwrite any existing databases</p>
</li></ul>

<p>The values <strong>WRITER</strong>, <strong>WRCREAT</strong> and <strong>NEWDB</strong> may be combined with the following values by bitwise or:</p>
<ul><li>
<p><strong>SYNC</strong>    - cause all database operations to be synchronized to the disk</p>
</li><li>
<p><strong>NOLOCK</strong>  - do not lock the database file</p>
</li></ul>

<p>If no <em>flags</em> are specified, the <code>GDBM</code> object will try to open the database file as a writer and will create it if it does not already exist (cf. flag <a href="#WRCREAT-constant" title="GDBM::WRCREAT (constant)">WRCREAT</a>). If this fails (for instance, if another process has already opened the database as a reader), it will try to open the database file as a reader (cf. flag <a href="#READER-constant" title="GDBM::READER (constant)">READER</a>).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L210-L278'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='210' data-end='278'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 210</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_initialize(int argc, VALUE *argv, VALUE obj)
{
    VALUE file, vmode, vflags;
    GDBM_FILE dbm;
    struct dbmdata *dbmp;
    int mode, flags = 0;

    TypedData_Get_Struct(obj, struct dbmdata, &amp;dbm_type, dbmp);
    if (rb_scan_args(argc, argv, &quot;12&quot;, &amp;file, &amp;vmode, &amp;vflags) == 1) {
        mode = 0666;            /* default value */
    }
    else if (NIL_P(vmode)) {
        mode = -1;              /* return nil if DB does not exist */
    }
    else {
        mode = NUM2INT(vmode);
    }

    if (!NIL_P(vflags))
        flags = NUM2INT(vflags);

    FilePathValue(file);

#ifdef GDBM_CLOEXEC
    /* GDBM_CLOEXEC is available since gdbm 1.10. */
    flags |= GDBM_CLOEXEC;
#endif

    if (flags &amp; RUBY_GDBM_RW_BIT) {
        flags &amp;= ~RUBY_GDBM_RW_BIT;
        dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                        flags, mode, MY_FATAL_FUNC);
    }
    else {
        dbm = 0;
        if (mode &gt;= 0)
            dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                            GDBM_WRCREAT|flags, mode, MY_FATAL_FUNC);
        if (!dbm)
            dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                            GDBM_WRITER|flags, 0, MY_FATAL_FUNC);
        if (!dbm)
            dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                            GDBM_READER|flags, 0, MY_FATAL_FUNC);
    }

    if (dbm) {
        rb_fd_fix_cloexec(gdbm_fdesc(dbm));
    }

    if (!dbm) {
        if (mode == -1) return Qnil;

        if (gdbm_errno == GDBM_FILE_OPEN_ERROR ||
            gdbm_errno == GDBM_CANT_BE_READER ||
            gdbm_errno == GDBM_CANT_BE_WRITER)
            rb_sys_fail_str(file);
        else
            rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }

    if (dbmp-&gt;di_dbm)
	gdbm_close(dbmp-&gt;di_dbm);
    dbmp-&gt;di_dbm = dbm;
    dbmp-&gt;di_size = -1;

    return obj;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="open-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>open</strong>(filename, mode = 0666, flags = nil)  </span>
      <span class='overload'>.<strong>open</strong>(filename, mode = 0666, flags = nil) {|gdbm| ... } </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If called without a block, this is synonymous to <a href="#new-class_method" title="GDBM.new (method)">.new</a>. If a block is given, the new <code>GDBM</code> instance will be passed to the block as a parameter, and the corresponding database file will be closed after the execution of the block code has been finished.</p>

<p>Example for an open call with a block:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gdbm</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>GDBM</span>.<span class='id identifier rubyid_open'>open</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fruitstore.db</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_gdbm'>gdbm</span><span class='op'>|</span>
  <span class='id identifier rubyid_gdbm'>gdbm</span>.<span class='id identifier rubyid_each_pair'><a href="#each_pair-instance_method" title="GDBM#each_pair (method)">each_pair</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'><a href="#key-instance_method" title="GDBM#key (method)">key</a></span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'><a href="#key-instance_method" title="GDBM#key (method)">key</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L299-L313'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='299' data-end='313'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 299</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_s_open(int argc, VALUE *argv, VALUE klass)
{
    VALUE obj = fgdbm_s_alloc(klass);

    if (NIL_P(fgdbm_initialize(argc, argv, obj))) {
        return Qnil;
    }

    if (rb_block_given_p()) {
        return rb_ensure(rb_yield, obj, fgdbm_close, obj);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="cachesize=-instance_method">
  <h3 class='signature wo first'>
    #<strong>cachesize=</strong>(size)  &#x21d2; <a href="#size-instance_method" title="GDBM#size (method)">size</a>  <span class="extras">(<span class='writeonly'>writeonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the size of the internal bucket cache to <em>size</em>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1108-L1121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1108' data-end='1121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1108</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_set_cachesize(VALUE obj, VALUE val)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int optval;

    GetDBM2(obj, dbmp, dbm);
    optval = FIX2INT(val);
    if (gdbm_setopt(dbm, GDBM_CACHESIZE, &amp;optval, sizeof(optval)) == -1) {
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }
    return val;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="closed?-instance_method">
  <h3 class='signature ro'>
    #<strong>closed?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true if the associated database file has been closed.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L167-L177'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='167' data-end='177'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 167</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_closed(VALUE obj)
{
    struct dbmdata *dbmp;

    TypedData_Get_Struct(obj, struct dbmdata, &amp;dbm_type, dbmp);
    if (dbmp-&gt;di_dbm == 0)
        return Qtrue;

    return Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="empty?-instance_method">
  <h3 class='signature ro'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true if the database is empty.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L821-L842'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='821' data-end='842'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 821</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_empty_p(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    GetDBM(obj, dbmp);
    if (dbmp-&gt;di_size &lt; 0) {
        dbm = dbmp-&gt;di_dbm;

        key = gdbm_firstkey(dbm);
        if (key.dptr) {
            free(key.dptr);
            return Qfalse;
        }
        return Qtrue;
    }

    if (dbmp-&gt;di_size == 0) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fastmode=-instance_method">
  <h3 class='signature wo'>
    #<strong>fastmode=</strong>(boolean)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='writeonly'>writeonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Turns the database’s fast mode on or off. If fast mode is turned on, gdbm does not wait for writes to be flushed to the disk before continuing.</p>

<p>This option is obsolete for gdbm &gt;= 1.8 since fast mode is turned on by default. See also: <a href="#syncmode=-instance_method" title="GDBM#syncmode= (method)">#syncmode=</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1133-L1149'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1133' data-end='1149'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1133</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_set_fastmode(VALUE obj, VALUE val)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int optval;

    GetDBM2(obj, dbmp, dbm);
    optval = 0;
    if (RTEST(val))
        optval = 1;

    if (gdbm_setopt(dbm, GDBM_FASTMODE, &amp;optval, sizeof(optval)) == -1) {
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }
    return val;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="syncmode=-instance_method">
  <h3 class='signature wo'>
    #<strong>syncmode=</strong>(boolean)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='writeonly'>writeonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Turns the database’s synchronization mode on or off. If the synchronization mode is turned on, the database’s in-memory state will be synchronized to disk after every database modification operation. If the synchronization mode is turned off, <code>GDBM</code> does not wait for writes to be flushed to the disk before continuing.</p>

<p>This option is only available for gdbm &gt;= 1.8 where syncmode is turned off by default. See also: <a href="#fastmode=-instance_method" title="GDBM#fastmode= (method)">#fastmode=</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1164-L1185'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1164' data-end='1185'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1164</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_set_syncmode(VALUE obj, VALUE val)
{
#if !defined(GDBM_SYNCMODE)
    fgdbm_set_fastmode(obj, RTEST(val) ? Qfalse : Qtrue);
    return val;
#else
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int optval;

    GetDBM2(obj, dbmp, dbm);
    optval = 0;
    if (RTEST(val))
        optval = 1;

    if (gdbm_setopt(dbm, GDBM_FASTMODE, &amp;optval, sizeof(optval)) == -1) {
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }
    return val;
#endif
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="[]-instance_method">
  <h3 class='signature  first'>
    #<strong>[]</strong>(key)  &#x21d2; <code>value</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Retrieves the <em>value</em> corresponding to <em>key</em>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L410-L414'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='410' data-end='414'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 410</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_aref(VALUE obj, VALUE keystr)
{
    return rb_gdbm_fetch3(obj, keystr);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="[]=-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>[]=</strong>(key, value)  &#x21d2; <code>value</code> </span>
      <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <code>value</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#store</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Associates the value <em>value</em> with the specified <em>key</em>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L717-L742'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='717' data-end='742'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 717</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_store(VALUE obj, VALUE keystr, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    ExportStringValue(keystr);
    ExportStringValue(valstr);

    key.dptr = RSTRING_PTR(keystr);
    key.dsize = RSTRING_LENINT(keystr);

    val.dptr = RSTRING_PTR(valstr);
    val.dsize = RSTRING_LENINT(valstr);

    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;
    if (gdbm_store(dbm, key, val, GDBM_REPLACE)) {
        if (errno == EPERM) rb_sys_fail(0);
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }

    return valstr;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear-instance_method">
  <h3 class='signature '>
    #<strong>clear</strong>  &#x21d2; <code>GDBM</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes all the key-value pairs within <em>gdbm</em>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L648-L683'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='648' data-end='683'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 648</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_clear(VALUE obj)
{
    datum key, nextkey;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;

#if 0
    while (key = gdbm_firstkey(dbm), key.dptr) {
        if (gdbm_delete(dbm, key)) {
            free(key.dptr);
            rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
        }
        free(key.dptr);
    }
#else
    while (key = gdbm_firstkey(dbm), key.dptr) {
        for (; key.dptr; key = nextkey) {
            nextkey = gdbm_nextkey(dbm, key);
            if (gdbm_delete(dbm, key)) {
                free(key.dptr);
                if (nextkey.dptr) free(nextkey.dptr);
                rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
            }
            free(key.dptr);
        }
    }
#endif
    dbmp-&gt;di_size = 0;

    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close-instance_method">
  <h3 class='signature '>
    #<strong>close</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L149-L159'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='149' data-end='159'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 149</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_close(VALUE obj)
{
    struct dbmdata *dbmp;

    GetDBM(obj, dbmp);
    gdbm_close(dbmp-&gt;di_dbm);
    dbmp-&gt;di_dbm = 0;

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete-instance_method">
  <h3 class='signature '>
    #<strong>delete</strong>(key)  &#x21d2; <code>value</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the key-value-pair with the specified <em>key</em> from this database and returns the corresponding <em>value</em>. Returns nil if the database is empty.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L566-L574'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='566' data-end='574'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 566</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_delete(VALUE obj, VALUE keystr)
{
    VALUE valstr;

    valstr = fgdbm_fetch(obj, keystr, Qnil);
    rb_gdbm_delete(obj, keystr);
    return valstr;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_if-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <code>GDBM</code> </span>
      <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <code>GDBM</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#reject!-instance_method" title="GDBM#reject! (method)">#reject!</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="each-instance_method">
  <h3 class='signature '>
    #<strong>each_pair</strong> {|key, value| ... } &#x21d2; <code>GDBM</code>     <span class='aliases'>Also known as: <span class='names'>#each_pair</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Executes <em>block</em> for each key in the database, passing the <em>key</em> and the corresponding <em>value</em> as a parameter.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L903-L921'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='903' data-end='921'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 903</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_each_pair(VALUE obj)
{
    GDBM_FILE dbm;
    struct dbmdata *dbmp;
    VALUE keystr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_yield(rb_assoc_new(keystr, rb_gdbm_fetch2(dbm, keystr)));
        GetDBM2(obj, dbmp, dbm);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_key-instance_method">
  <h3 class='signature '>
    #<strong>each_key</strong> {|key| ... } &#x21d2; <code>GDBM</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Executes <em>block</em> for each key in the database, passing the <em>key</em> as a parameter.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L877-L894'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='877' data-end='894'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 877</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_each_key(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_yield(keystr);
        GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_pair-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } &#x21d2; <code>GDBM</code> </span>
      <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } &#x21d2; <code>GDBM</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#each-instance_method" title="GDBM#each (method)">#each</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="each_value-instance_method">
  <h3 class='signature '>
    #<strong>each_value</strong> {|value| ... } &#x21d2; <code>GDBM</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Executes <em>block</em> for each key in the database, passing the corresponding <em>value</em> as a parameter.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L851-L868'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='851' data-end='868'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 851</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_each_value(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_yield(rb_gdbm_fetch2(dbm, keystr));
        GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch-instance_method">
  <h3 class='signature '>
    #<strong>fetch</strong>(key [, default])  &#x21d2; <code>value</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Retrieves the <em>value</em> corresponding to <em>key</em>. If there is no value associated with <em>key</em>, <em>default</em> will be returned instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L423-L434'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='423' data-end='434'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 423</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_fetch_m(int argc, VALUE *argv, VALUE obj)
{
    VALUE keystr, valstr, ifnone;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;keystr, &amp;ifnone);
    valstr = fgdbm_fetch(obj, keystr, ifnone);
    if (argc == 1 &amp;&amp; !rb_block_given_p() &amp;&amp; NIL_P(valstr))
        rb_raise(rb_eIndexError, &quot;key not found&quot;);

    return valstr;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="has_key?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="has_value?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>has_value?</strong>(v)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>value?</strong>(v)  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#value%3F-instance_method" title="GDBM#value? (method)">#value?</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="include?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="index-instance_method">
  <h3 class='signature nodoc'>
    #<strong>index</strong>(value)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L467-L472'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='467' data-end='472'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 467</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_index(VALUE obj, VALUE value)
{
    rb_warn(&quot;GDBM#index is deprecated; use GDBM#key&quot;);
    return fgdbm_key(obj, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="invert-instance_method">
  <h3 class='signature '>
    #<strong>invert</strong>  &#x21d2; <code>Hash</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash created by using <em>gdbm</em>’s values as keys, and the keys as values.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L692-L708'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='692' data-end='708'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 692</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_invert(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr;
    VALUE hash = rb_hash_new();

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {
        valstr = rb_gdbm_fetch2(dbm, keystr);

        rb_hash_aset(hash, valstr, keystr);
    }
    return hash;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="key-instance_method">
  <h3 class='signature '>
    #<strong>key</strong>(value)  &#x21d2; key   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <em>key</em> for a given <em>value</em>. If several keys may map to the same value, the key that is found first will be returned.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L443-L464'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='443' data-end='464'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 443</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_key(VALUE obj, VALUE valstr)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr2;

    ExportStringValue(valstr);
    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        valstr2 = rb_gdbm_fetch2(dbm, keystr);
        if (!NIL_P(valstr2) &amp;&amp;
            (int)RSTRING_LEN(valstr) == (int)RSTRING_LEN(valstr2) &amp;&amp;
            memcmp(RSTRING_PTR(valstr), RSTRING_PTR(valstr2),
                   (int)RSTRING_LEN(valstr)) == 0) {
            return keystr;
        }
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="key?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#include?, #has_key?, #member?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true if the given key <em>k</em> exists within the database. Returns false otherwise.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L983-L1001'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='983' data-end='1001'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 983</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_has_key(VALUE obj, VALUE keystr)
{
    datum key;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    long len;

    ExportStringValue(keystr);
    len = RSTRING_LENINT(keystr);
    if (TOO_LONG(len)) return Qfalse;
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = (int)len;

    GetDBM2(obj, dbmp, dbm);
    if (gdbm_exists(dbm, key))
        return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="keys-instance_method">
  <h3 class='signature '>
    #<strong>keys</strong>  &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of all keys of this database.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L929-L945'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='929' data-end='945'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 929</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_keys(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_ary_push(ary, keystr);
    }

    return ary;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="length-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>length</strong>  &#x21d2; <code>Fixnum</code> </span>
      <span class='overload'>#<strong>size</strong>  &#x21d2; <code>Fixnum</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#size</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the number of key-value pairs in this database.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L794-L813'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='794' data-end='813'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 794</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_length(VALUE obj)
{
    datum key, nextkey;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int i = 0;

    GetDBM2(obj, dbmp, dbm);
    if (dbmp-&gt;di_size &gt; 0) return INT2FIX(dbmp-&gt;di_size);

    for (key = gdbm_firstkey(dbm); key.dptr; key = nextkey) {
        nextkey = gdbm_nextkey(dbm, key);
        free(key.dptr);
        i++;
    }
    dbmp-&gt;di_size = i;

    return INT2FIX(i);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="member?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="reject-instance_method">
  <h3 class='signature '>
    #<strong>reject</strong> {|key, value| ... } &#x21d2; <code>Hash</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash copy of <em>gdbm</em> where all key-value pairs from <em>gdbm</em> for which <em>block</em> evaluates to true are removed. See also: <a href="#delete_if-instance_method" title="GDBM#delete_if (method)">#delete_if</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1218-L1222'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1218' data-end='1222'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1218</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_reject(VALUE obj)
{
    return rb_hash_delete_if(fgdbm_to_hash(obj));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reject!-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <code>GDBM</code> </span>
      <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <code>GDBM</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#delete_if</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes every key-value pair from <em>gdbm</em> for which <em>block</em> evaluates to true.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L607-L640'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='607' data-end='640'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 607</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_delete_if(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr;
    VALUE ret, ary = rb_ary_tmp_new(0);
    long i;
    int status = 0, n;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    n = dbmp-&gt;di_size;
    dbmp-&gt;di_size = -1;

    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

	OBJ_FREEZE(keystr);
        valstr = rb_gdbm_fetch2(dbm, keystr);
        ret = rb_protect(rb_yield, rb_assoc_new(rb_str_dup(keystr), valstr), &amp;status);
        if (status != 0) break;
        if (RTEST(ret)) rb_ary_push(ary, keystr);
        GetDBM2(obj, dbmp, dbm);
    }

    for (i = 0; i &lt; RARRAY_LEN(ary); i++)
        rb_gdbm_delete(obj, RARRAY_AREF(ary, i));
    if (status) rb_jump_tag(status);
    if (n &gt; 0) dbmp-&gt;di_size = n - (int)RARRAY_LEN(ary);
    rb_ary_clear(ary);

    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reorganize-instance_method">
  <h3 class='signature '>
    #<strong>reorganize</strong>  &#x21d2; <code>GDBM</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reorganizes the database file. This operation removes reserved space of elements that have already been deleted. It is only useful after a lot of deletions in the database.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1067-L1078'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1067' data-end='1078'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1067</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_reorganize(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    gdbm_reorganize(dbm);
    rb_fd_fix_cloexec(gdbm_fdesc(dbm));
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="replace-instance_method">
  <h3 class='signature '>
    #<strong>replace</strong>(other)  &#x21d2; <code>GDBM</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Replaces the content of <em>gdbm</em> with the key-value pairs of <em>other</em>. <em>other</em> must have an each_pair method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L779-L785'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='779' data-end='785'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 779</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_replace(VALUE obj, VALUE other)
{
    fgdbm_clear(obj);
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="select-instance_method">
  <h3 class='signature '>
    #<strong>select</strong> {|key, value| ... } &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new array of all key-value pairs of the database for which <em>block</em> evaluates to true.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L481-L502'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='481' data-end='502'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 481</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_select(VALUE obj)
{
    VALUE new = rb_ary_new();
    GDBM_FILE dbm;
    struct dbmdata *dbmp;
    VALUE keystr;

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {
        VALUE assoc = rb_assoc_new(keystr, rb_gdbm_fetch2(dbm, keystr));
        VALUE v = rb_yield(assoc);

        if (RTEST(v)) {
            rb_ary_push(new, assoc);
        }
        GetDBM2(obj, dbmp, dbm);
    }

    return new;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="shift-instance_method">
  <h3 class='signature '>
    #<strong>shift</strong>  &#x21d2; (<a href="#key-instance_method" title="GDBM#key (method)">key</a>, <code>value</code>)<sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes a key-value-pair from this database and returns it as a two-item array [ <em>key</em>, <em>value</em> ]. Returns nil if the database is empty.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L583-L598'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='583' data-end='598'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 583</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_shift(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    keystr = rb_gdbm_firstkey(dbm);
    if (NIL_P(keystr)) return Qnil;
    valstr = rb_gdbm_fetch2(dbm, keystr);
    rb_gdbm_delete(obj, keystr);

    return rb_assoc_new(keystr, valstr);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="size-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>length</strong>  &#x21d2; <code>Fixnum</code> </span>
      <span class='overload'>#<strong>size</strong>  &#x21d2; <code>Fixnum</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#length-instance_method" title="GDBM#length (method)">#length</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="store-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>[]=</strong>(key, value)  &#x21d2; <code>value</code> </span>
      <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <code>value</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#[]=-instance_method" title="GDBM#[]= (method)">#[]=</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="sync-instance_method">
  <h3 class='signature '>
    #<strong>sync</strong>  &#x21d2; <code>GDBM</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Unless the <em>gdbm</em> object has been opened with the <strong>SYNC</strong> flag, it is not guaranteed that database modification operations are immediately applied to the database file. This method ensures that all recent modifications to the database are written to the file. Blocks until all writing operations to the disk have been finished.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1090-L1100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1090' data-end='1100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1090</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_sync(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    gdbm_sync(dbm);
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_a-instance_method">
  <h3 class='signature '>
    #<strong>to_a</strong>  &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of all key-value pairs contained in the database.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1041-L1057'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1041' data-end='1057'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1041</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_to_a(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_ary_push(ary, rb_assoc_new(keystr, rb_gdbm_fetch2(dbm, keystr)));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_hash-instance_method">
  <h3 class='signature '>
    #<strong>to_hash</strong>  &#x21d2; <code>Hash</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash of all key-value pairs contained in the database.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1193-L1209'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1193' data-end='1209'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1193</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_to_hash(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, hash;

    GetDBM2(obj, dbmp, dbm);
    hash = rb_hash_new();
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_hash_aset(hash, keystr, rb_gdbm_fetch2(dbm, keystr));
    }

    return hash;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="update-instance_method">
  <h3 class='signature '>
    #<strong>update</strong>(other)  &#x21d2; <code>GDBM</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds the key-value pairs of <em>other</em> to <em>gdbm</em>, overwriting entries with duplicate keys with those from <em>other</em>. <em>other</em> must have an each_pair method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L765-L770'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='765' data-end='770'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 765</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_update(VALUE obj, VALUE other)
{
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="value?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>has_value?</strong>(v)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>value?</strong>(v)  &#x21d2; <code>Boolean</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#has_value?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true if the given value <em>v</em> exists within the database. Returns false otherwise.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L1011-L1033'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1011' data-end='1033'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1011</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_has_value(VALUE obj, VALUE valstr)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr2;

    ExportStringValue(valstr);
    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        valstr2 = rb_gdbm_fetch2(dbm, keystr);

        if (!NIL_P(valstr2) &amp;&amp;
            (int)RSTRING_LEN(valstr) == (int)RSTRING_LEN(valstr2) &amp;&amp;
            memcmp(RSTRING_PTR(valstr), RSTRING_PTR(valstr2),
                   (int)RSTRING_LEN(valstr)) == 0) {
            return Qtrue;
        }
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="values-instance_method">
  <h3 class='signature '>
    #<strong>values</strong>  &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of all values of this database.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L953-L971'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='953' data-end='971'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 953</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_values(VALUE obj)
{
    datum key, nextkey;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE valstr, ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (key = gdbm_firstkey(dbm); key.dptr; key = nextkey) {
        nextkey = gdbm_nextkey(dbm, key);
        valstr = rb_gdbm_fetch(dbm, key);
        free(key.dptr);
        rb_ary_push(ary, valstr);
    }

    return ary;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="values_at-instance_method">
  <h3 class='signature '>
    #<strong>values_at</strong>(key, ...)  &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of the values associated with each specified <em>key</em>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_6/ext/gdbm/gdbm.c#L510-L521'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='510' data-end='521'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 510</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_values_at(int argc, VALUE *argv, VALUE obj)
{
    VALUE new = rb_ary_new2(argc);
    int i;

    for (i=0; i&lt;argc; i++) {
        rb_ary_push(new, rb_gdbm_fetch3(obj, argv[i]));
    }

    return new;
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>