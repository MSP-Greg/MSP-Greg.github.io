<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Thread::Backtrace::Location &mdash; Core Ruby-3.0.7 p220</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Thread::Backtrace::Location",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Ruby-3.0.7</a> &raquo; 
      <a href='../../'>Core</a> &raquo; 
      <a href='../../_index.html#alpha_L'>Index (L)</a> &raquo; 
        <a href="../../Thread.html" title="Thread (class)">Thread</a> &raquo; 
        <a href="../Backtrace.html" title="Thread::Backtrace (class)">Backtrace</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Location&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Thread::Backtrace::Location</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L1301'>vm_backtrace.c</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>An object representation of a stack frame, initialized by <a href="../../Kernel.html#caller_locations-class_method" title="Kernel.caller_locations (method)">Kernel.caller_locations</a>.</p>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># caller_locations.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_a'>a</span>(<span class='id identifier rubyid_skip'>skip</span>)
  <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='id identifier rubyid_skip'>skip</span>)
<span class='kw'>end</span>
<span class='kw'>def</span> <span class='id identifier rubyid_b'>b</span>(<span class='id identifier rubyid_skip'>skip</span>)
  <span class='id identifier rubyid_a'>a</span>(<span class='id identifier rubyid_skip'>skip</span>)
<span class='kw'>end</span>
<span class='kw'>def</span> <span class='id identifier rubyid_c'>c</span>(<span class='id identifier rubyid_skip'>skip</span>)
  <span class='id identifier rubyid_b'>b</span>(<span class='id identifier rubyid_skip'>skip</span>)
<span class='kw'>end</span>

<span class='id identifier rubyid_c'>c</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>).<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_call'>call</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_call'>call</span>.<span class='id identifier rubyid_to_s'><a href="#to_s-instance_method" title="Thread::Backtrace::Location#to_s (method)">to_s</a></span>
<span class='kw'>end</span></code></pre>

<p>Running <code>ruby caller_locations.rb</code> will produce:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_caller_locations'>caller_locations</span>.<span class='id identifier rubyid_rb'>rb</span><span class='symbeg'>:</span><span class='int'>2</span><span class='symbeg'>:</span><span class='kw'>in</span> <span class='backtick'>`</span><span class='tstring_content'>a&#39;
caller_locations.rb:5:in </span><span class='tstring_end'>`</span></span><span class='id identifier rubyid_b'>b</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>
caller_locations.rb:8:in `c</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>Hereâ€™s another example with a slightly different result:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># foo.rb
</span><span class='kw'>class</span> <span class='const'>Foo</span>
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_locations'>locations</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="../../Thread.html#initialize-instance_method" title="Thread#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_skip'>skip</span>)
    <span class='ivar'>@locations</span> <span class='op'>=</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='id identifier rubyid_skip'>skip</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'>Foo</span>.<span class='id identifier rubyid_new'><a href="../../Thread.html#new-class_method" title="Thread.new (method)">new</a></span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>2</span>).<span class='id identifier rubyid_locations'>locations</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_call'>call</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_call'>call</span>.<span class='id identifier rubyid_to_s'><a href="#to_s-instance_method" title="Thread::Backtrace::Location#to_s (method)">to_s</a></span>
<span class='kw'>end</span></code></pre>

<p>Now run <code>ruby foo.rb</code> and you should see:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_init'>init</span>.<span class='id identifier rubyid_rb'>rb</span><span class='symbeg'>:</span><span class='int'>4</span><span class='symbeg'>:</span><span class='kw'>in</span> <span class='backtick'>`</span><span class='tstring_content'>initialize&#39;
init.rb:8:in </span><span class='tstring_end'>`</span></span><span class='id identifier rubyid_new'><a href="../../Thread.html#new-class_method" title="Thread.new (method)">new</a></span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>
init.rb:8:in `&lt;main&gt;</span><span class='tstring_end'>&#39;</span></span></code></pre>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#absolute_path-instance_method" title="#absolute_path (instance method)">#<strong>absolute_path</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the full file path of this frame.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#base_label-instance_method" title="#base_label (instance method)">#<strong>base_label</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the base label of this frame.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the same as calling <code>inspect</code> on the string representation of <code>#to_str</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#label-instance_method" title="#label (instance method)">#<strong>label</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the label of this frame.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the line number of this frame.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the file name of this frame.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a <a href="../../Kernel.html#caller-class_method" title="Kernel.caller (method)">Kernel.caller</a> style string representing this frame.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="absolute_path-instance_method">
  <h3 class='signature  first'>
    #<strong>absolute_path</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the full file path of this frame.</p>

<p>Same as <a href="#path-instance_method" title="Thread::Backtrace::Location#path (method)">#path</a>, except that it will return absolute path even if the frame is in the main script.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L323-L327'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='323' data-end='327'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'vm_backtrace.c', line 323</span></pre>
<pre class='code cpp'>

static VALUE
location_absolute_path_m(VALUE self)
{
    return location_realpath(location_ptr(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="base_label-instance_method">
  <h3 class='signature '>
    #<strong>base_label</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the base label of this frame.</p>

<p>Usually same as <a href="#label-instance_method" title="Thread::Backtrace::Location#label (method)">#label</a>, without decoration.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L259-L263'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='259' data-end='263'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'vm_backtrace.c', line 259</span></pre>
<pre class='code cpp'>

static VALUE
location_base_label_m(VALUE self)
{
    return location_base_label(location_ptr(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the same as calling <code>inspect</code> on the string representation of <code>#to_str</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L396-L400'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='396' data-end='400'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'vm_backtrace.c', line 396</span></pre>
<pre class='code cpp'>

static VALUE
location_inspect_m(VALUE self)
{
    return rb_str_inspect(location_to_str(location_ptr(self)));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="label-instance_method">
  <h3 class='signature '>
    #<strong>label</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the label of this frame.</p>

<p>Usually consists of method, class, module, etc names with decoration.</p>

<p>Consider the following example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_foo'>foo</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='int'>0</span>).<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_label'>label</span>

  <span class='int'>1</span>.<span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='int'>0</span>).<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_label'>label</span>

    <span class='int'>1</span>.<span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='int'>0</span>).<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_label'>label</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The result of calling <code>foo</code> is this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_label'>label</span><span class='op'>:</span> <span class='id identifier rubyid_foo'>foo</span>
<span class='id identifier rubyid_label'>label</span><span class='op'>:</span> <span class='id identifier rubyid_block'>block</span> <span class='kw'>in</span> <span class='id identifier rubyid_foo'>foo</span>
<span class='id identifier rubyid_label'>label</span><span class='op'>:</span> <span class='id identifier rubyid_block'>block</span> (<span class='int'>2</span> <span class='id identifier rubyid_levels'>levels</span>) <span class='kw'>in</span> <span class='id identifier rubyid_foo'>foo</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L233-L237'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='233' data-end='237'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'vm_backtrace.c', line 233</span></pre>
<pre class='code cpp'>

static VALUE
location_label_m(VALUE self)
{
    return location_label(location_ptr(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lineno-instance_method">
  <h3 class='signature '>
    #<strong>lineno</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the line number of this frame.</p>

<p>For example, using <code>caller_locations.rb</code> from <code>Location</code></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_loc'>loc</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>1</span>).<span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_loc'>loc</span>.<span class='id identifier rubyid_lineno'>lineno</span> <span class='comment'>#=&gt; 2</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L185-L189'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='185' data-end='189'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'vm_backtrace.c', line 185</span></pre>
<pre class='code cpp'>

static VALUE
location_lineno_m(VALUE self)
{
    return INT2FIX(location_lineno(location_ptr(self)));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="path-instance_method">
  <h3 class='signature '>
    #<strong>path</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the file name of this frame. This will generally be an absolute path, unless the frame is in the main script, in which case it will be the script location passed on the command line.</p>

<p>For example, using <code>caller_locations.rb</code> from <code>Location</code></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_loc'>loc</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span>(<span class='int'>0</span><span class='op'>..</span><span class='int'>1</span>).<span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_loc'>loc</span>.<span class='id identifier rubyid_path'>path</span> <span class='comment'>#=&gt; caller_locations.rb</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L293-L297'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='293' data-end='297'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'vm_backtrace.c', line 293</span></pre>
<pre class='code cpp'>

static VALUE
location_path_m(VALUE self)
{
    return location_path(location_ptr(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_s-instance_method">
  <h3 class='signature '>
    #<strong>to_s</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a <a href="../../Kernel.html#caller-class_method" title="Kernel.caller (method)">Kernel.caller</a> style string representing this frame.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_0_7/vm_backtrace.c#L386-L390'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='386' data-end='390'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'vm_backtrace.c', line 386</span></pre>
<pre class='code cpp'>

static VALUE
location_to_str_m(VALUE self)
{
    return location_to_str(location_ptr(self));
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>