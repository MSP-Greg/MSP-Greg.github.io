<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: CHANGELOG &mdash; SimpleCovÂ main</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>SimpleCovÂ main</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h1>0.22.0 (2022-12-23)</h1>

<h2>Enhancements</h2>

<ul>
<li>On Ruby 3.2+, you can now use the new Coverage library feature for <code>eval</code> - See <a href="https://github.com/simplecov-ruby/simplecov/pull/1037">https://github.com/simplecov-ruby/simplecov/pull/1037</a>. Thanks <a href="https://github.com/mame">@mame</a>!</li>
</ul>

<h2>Bugfixes</h2>

<ul>
<li>Fix for making the test suite pass against the upcoming Ruby 3.2 - See <a href="https://github.com/simplecov-ruby/simplecov/pull/1035">https://github.com/simplecov-ruby/simplecov/pull/1035</a>. Thanks <a href="https://github.com/mame">@mame</a></li>
</ul>

<h1>0.21.2 (2021-01-09)</h1>

<h2>Bugfixes</h2>

<ul>
<li><code>maximum_coverage_drop</code> won&#39;t fail any more if <code>.last_run.json</code> is still in the old format. Thanks <a href="https://github.com/petertellgren">@petertellgren</a></li>
<li><code>maximum_coverage_drop</code> won&#39;t fail if an expectation is specified for a previous unrecorded criterion, it will just pass (there&#39;s nothing, so nothing to drop)</li>
<li>fixed bug in <code>maximum_coverage_drop</code> calculation that could falsely report it had dropped for minimal differences</li>
</ul>

<h1>0.21.1 (2021-01-04)</h1>

<h2>Bugfixes</h2>

<ul>
<li><code>minimum_coverage_by_file</code> works again as expected (errored out before ðŸ˜±)</li>
</ul>

<h1>0.21.0 (2021-01-03)</h1>

<p>The &quot;Collate++&quot; release making it more viable for big CI setups by limiting memory consumption. Also includes some nice new additions for branch coverage settings.</p>

<h2>Enhancements</h2>

<ul>
<li>Performance of <a href="SimpleCov.html#collate-class_method" title="SimpleCov.collate (method)">SimpleCov.collate</a> improved - it should both run faster and consume much less memory esp. when run with many files (memory consumption should not increase with number of files any more)</li>
<li>Can now define the minimum_coverage_by_file, maximum_coverage_drop and refuse_coverage_drop by branch as well as line coverage. Thanks to <a href="https://github.com/jemmaissroff">@jemmaissroff</a></li>
<li>Can set primary coverage to something other than line by setting <code>primary_coverage :branch</code> in <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> Configuration. Thanks to <a href="https://github.com/jemmaissroff">@jemmaissroff</a></li>
</ul>

<h2>Misc</h2>

<ul>
<li>reduce gem size by splitting Changelog into <code>Changelog.md</code> and a pre 0.18 <code>Changelog.old.md</code>, the latter of which is not included in the gem</li>
<li>The interface of <code>ResultMeger.merge_and_store</code> is changed to support the <code>collate</code> performance improvements mentioned above. It&#39;s not considered an official API, hence this is not in the breaking section. For people using it to merge results from different machines, it&#39;s recommended to migrate to <a href="https://github.com/simplecov-ruby/simplecov#merging-test-runs-under-different-execution-environments">collate</a>.</li>
</ul>

<h1>0.20.0 (2020-11-29)</h1>

<p>The &quot;JSON formatter&quot; release. Starting now a JSON formatter is included by default in the release. This is mostly done for Code Climate reasons, you can find more details <a href="https://github.com/codeclimate/test-reporter/issues/413">in this issue</a>.
Shipping with so much by default is sub-optimal, we know. It&#39;s the long term plan to also provide <code>simplecov-core</code> without the HTML or JSON formatters for those who don&#39;t need them/for other formatters to rely on.</p>

<h2>Enhancements</h2>

<ul>
<li><code>simplecov_json_formatter</code> included by default (<a href="https://github.com/simplecov-ruby/simplecov#json-formatter">docs</a>), this should enable the Code Climate test reporter to work again once it&#39;s updated</li>
<li>invalidate internal cache after switching <code>SimpleCov.root</code>, should help with some bugs</li>
</ul>

<h1>0.19.1 (2020-10-25)</h1>

<h2>Bugfixes</h2>

<ul>
<li>No more warnings triggered by <code>enable_for_subprocesses</code>. Thanks to <a href="https://github.com/mame">@mame</a></li>
<li>Avoid trying to patch <a href="Process.html#fork-class_method" title="Process.fork (method)">Process.fork</a> when it isn&#39;t available. Thanks to <a href="https://github.com/MSP-Greg">@MSP-Greg</a></li>
</ul>

<h1>0.19.0 (2020-08-16)</h1>

<h2>Breaking Changes</h2>

<ul>
<li>Dropped support for Ruby 2.4, it reached EOL</li>
</ul>

<h2>Enhancements</h2>

<ul>
<li>observe forked processes (enable with <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a>.enable_for_subprocesses). See <a href="https://github.com/simplecov-ruby/simplecov/pull/881">#881</a>, thanks to <a href="https://github.com/robotdana">@robotdana</a></li>
<li><a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> distinguishes better that it stopped processing because of a previous error vs. <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> is the originator of said error due to coverage requirements.</li>
</ul>

<h2>Bugfixes</h2>

<ul>
<li>Changing the <code>SimpleCov.root</code> combined with the root filtering didn&#39;t work. Now they do! Thanks to <a href="https://github.com/deivid-rodriguez">@deivid-rodriguez</a> and see <a href="https://github.com/simplecov-ruby/simplecov/pull/894">#894</a></li>
<li>in parallel test execution it could happen that the last coverage result was written to disk when it didn&#39;t complete yet, changed to only write it once it&#39;s the final result</li>
<li>if you run parallel tests only the final process will report violations of the configured test coverage, not all previous processes</li>
<li>changed the parallel_tests merging mechanisms to do the waiting always in the last process, should reduce race conditions</li>
</ul>

<h2>Noteworthy</h2>

<ul>
<li>The repo has moved to <a href="https://github.com/simplecov-ruby/simplecov">https://github.com/simplecov-ruby/simplecov</a> - everything stays the same, redirects should work but you might wanna update anyhow</li>
<li>The primary development branch is now <code>main</code>, not <code>master</code> anymore. If you get simplecov directly from github change your reference. For a while <code>master</code> will still be occasionally updated but that&#39;s no long term solion.</li>
</ul>

<h1>0.18.5 (2020-02-25)</h1>

<p>Can you guess? Another bugfix release!</p>

<h2>Bugfixes</h2>

<ul>
<li>minitest won&#39;t crash if <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> isn&#39;t loaded - aka don&#39;t execute <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> code in the minitest plugin if <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> isn&#39;t loaded. Thanks to <a href="https://github.com/edariedl">@edariedl</a> for the report of the peculiar problem in <a href="https://github.com/simplecov-ruby/simplecov/issues/877">#877</a>.</li>
</ul>

<h1>0.18.4 (2020-02-24)</h1>

<p>Another small bugfix release ðŸ™ˆ Fixes SimpleCov running with rspec-rails, which was broken due to our fixed minitest integration.</p>

<h2>Bugfixes</h2>

<ul>
<li><a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> will run again correctly when used with rspec-rails. The excellent bug report <a href="https://github.com/simplecov-ruby/simplecov/issues/873">#873</a> by <a href="https://github.com/odlp">@odlp</a> perfectly details what went wrong. Thanks to <a href="https://github.com/adam12">@adam12</a> for the fix <a href="https://github.com/simplecov-ruby/simplecov/pull/874">#874</a>.</li>
</ul>

<h1>0.18.3 (2020-02-23)</h1>

<p>Small bugfix release. It&#39;s especially recommended to upgrade simplecov-html as well because of bugs in the 0.12.0 release.</p>

<h2>Bugfixes</h2>

<ul>
<li>Fix a regression related to file encodings as special characters were missing. Furthermore we now respect the magic <code># encoding: ...</code> comment and read files in the right encoding. Thanks (<a href="https://github.com/Tietew">@Tietew</a>) - see <a href="https://github.com/simplecov-ruby/simplecov/pull/866">#866</a></li>
<li>Use <code>Minitest.after_run</code> hook to trigger post-run hooks if <a href="Minitest.html" title="Minitest (module)"><code>Minitest</code></a> is present. See <a href="https://github.com/simplecov-ruby/simplecov/pull/756">#756</a> and <a href="https://github.com/simplecov-ruby/simplecov/pull/855">#855</a> thanks (<a href="https://github.com/adam12">@adam12</a>)</li>
</ul>

<h1>0.18.2 (2020-02-12)</h1>

<p>Small release just to allow you to use the new simplecov-html.</p>

<h2>Enhancements</h2>

<ul>
<li>Relax simplecov-html requirement so that you&#39;re able to use [0.12.0]#0120-2020-02-12)</li>
</ul>

<h1>0.18.1 (2020-01-31)</h1>

<p>Small Bugfix release.</p>

<h2>Bugfixes</h2>

<ul>
<li>Just putting <code># :nocov:</code> on top of a file or having an uneven number of them in general works again and acts as if ignoring until the end of the file. See <a href="https://github.com/simplecov-ruby/simplecov/issues/846">#846</a> and thanks <a href="https://github.com/DannyBen">@DannyBen</a> for the report.</li>
</ul>

<h1>0.18.0 (2020-01-28)</h1>

<p>Huge release! Highlights are support for branch coverage (Ruby 2.5+) and dropping support for EOL&#39;ed Ruby versions (&lt; 2.4).
Please also read the other beta patch notes.</p>

<p>You can run with branch coverage by putting <code>enable_coverage :branch</code> into your <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> configuration (like the <code>SimpleCov.start do .. end</code> block)</p>

<h2>Enhancements</h2>

<ul>
<li>You can now define the minimum expected coverage by criterion like <code>minimum_coverage line: 90, branch: 80</code></li>
<li>Memoized some internal data structures that didn&#39;t change to reduce <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> overhead</li>
<li>Both <code>FileList</code> and <code>SourceFile</code> now have a <code>coverage</code> method that returns a hash that points from a coverage criterion to a <code>CoverageStatistics</code> object for uniform access to overall coverage statistics for both line and branch coverage</li>
</ul>

<h2>Bugfixes</h2>

<ul>
<li>we were losing precision by rounding the covered strength early, that has been removed. <strong>For Formatters</strong> this also means that you may need to round it yourself now.</li>
<li>Removed an inconsistency in how we treat skipped vs. irrelevant lines (see <a href="https://github.com/simplecov-ruby/simplecov/issues/565">#565</a>) - SimpleCov&#39;s definition of 100% is now &quot;You covered everything that you could&quot; so if coverage is 0/0 that&#39;s counted as a 100% no matter if the lines were irrelevant or ignored/skipped</li>
</ul>

<h2>Noteworthy</h2>

<ul>
<li><code>FileList</code> stopped inheriting from Array, it includes Enumerable so if you didn&#39;t use Array specific methods on it in formatters you should be fine</li>
<li>We needed to change an internal file format, which we use for merging across processes, to accommodate branch coverage. Sadly CodeClimate chose to use this file to report test coverage. Until a resolution is found the code climate test reporter won&#39;t work with <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> for 0.18+, see <a href="https://github.com/codeclimate/test-reporter/issues/413">this issue on the test reporter</a>.</li>
</ul>

<h1>0.18.0.beta3 (2020-01-20)</h1>

<h2>Enhancements</h2>

<ul>
<li>Instead of ignoring old <code>.resultset.json</code>s that are inside the merge timeout, adapt and respect them</li>
</ul>

<h2>Bugfixes</h2>

<ul>
<li>Remove the constant warning printing if you still have a <code>.resultset.json</code> in pre 0.18 layout that is within your merge timeout</li>
</ul>

<h1>0.18.0.beta2 (2020-01-19)</h1>

<h2>Enhancements</h2>

<ul>
<li>only turn on the requested coverage criteria (when activating branch coverage before <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> would also instruct Ruby to take Method coverage)</li>
<li>Change how branch coverage is displayed, now it&#39;s <code>branch_type: hit_count</code> which should be more self explanatory. See <a href="https://github.com/simplecov-ruby/simplecov/pull/830">#830</a> for an example and feel free to give feedback!</li>
<li>Allow early running exit tasks and avoid the <code>at_exit</code> hook through the <a href="SimpleCov.html#run_exit_tasks!-class_method" title="SimpleCov.run_exit_tasks! (method)">SimpleCov.run_exit_tasks!</a> method. (thanks <a href="https://github.com/macumber">@macumber</a>)</li>
<li>Allow manual collation of result sets through the <a href="SimpleCov.html#collate-class_method" title="SimpleCov.collate (method)">SimpleCov.collate</a> entrypoint. See the README for more details (thanks <a href="https://github.com/ticky">@ticky</a>)</li>
<li>Within <code>case</code>, even if there is no <code>else</code> branch declared show missing coverage for it (aka no branch of it). See <a href="https://github.com/simplecov-ruby/simplecov/pull/825">#825</a></li>
<li>Stop symbolizing all keys when loading cache (should lead to be faster and consume less memory)</li>
<li>Cache whether we can use/are using branch coverage (should be slightly faster)</li>
</ul>

<h2>Bugfixes</h2>

<ul>
<li>Fix a crash that happened when an old version of our internal cache file <code>.resultset.json</code> was still present</li>
</ul>

<h1>0.18.0.beta1 (2020-01-05)</h1>

<p>This is a huge release highlighted by changing our support for ruby versions to 2.4+ (so things that aren&#39;t EOL&#39;ed) and finally adding branch coverage support!</p>

<p>This release is still beta because we&#39;d love for you to test out branch coverage and get your feedback before doing a full release.</p>

<p>On a personal note from <a href="https://github.com/PragTob/">@PragTob</a> thanks to <a href="https://rubytogether.org/">ruby together</a> for sponsoring this work on <a href="SimpleCov.html" title="SimpleCov (module)"><code>SimpleCov</code></a> making it possible to deliver this and subsequent releases.</p>

<h2>Breaking</h2>

<ul>
<li>Dropped support for all EOL&#39;ed rubies meaning we only support 2.4+. Simplecov can no longer be installed on older rubies, but older simplecov releases should still work. (thanks <a href="https://github.com/deivid-rodriguez">@deivid-rodriguez</a>)</li>
<li>Dropped the <code>rake simplecov</code> task that &quot;magically&quot; integreated with rails. It was always undocumented, caused some issues and <a href="https://github.com/simplecov-ruby/simplecov/issues/689#issuecomment-561572327">had some issues</a>. Use the integration as described in the README please :)</li>
</ul>

<h2>Enhancements</h2>

<ul>
<li>Branch coverage is here! Please try it out and test it! You can activate it with <code>enable_coverage :branch</code>. See the README for more details. This is thanks to a bunch of people most notably <a href="https://github.com/som4ik">@som4ik</a>, <a href="https://github.com/tycooon">@tycooon</a>, <a href="https://github.com/stepozer">@stepozer</a>,  <a href="https://github.com/klyonrad">@klyonrad</a> and your humble maintainers also contributed ;)</li>
<li>If the minimum coverage is set to be greater than 100, a warning will be shown. See <a href="https://github.com/simplecov-ruby/simplecov/pull/737">#737</a> (thanks <a href="https://github.com/belfazt">@belfazt</a>)</li>
<li>Add a configuration option to disable the printing of non-successful exit statuses. See <a href="https://github.com/simplecov-ruby/simplecov/pull/746">#747</a> (thanks <a href="https://github.com/JacobEvelyn">@JacobEvelyn</a>)</li>
<li>Calculating 100% coverage is now stricter, so 100% means 100%. See <a href="https://github.com/simplecov-ruby/simplecov/pull/680">#680</a> thanks <a href="https://github.com/gleseur">@gleseur</a></li>
</ul>

<h2>Bugfixes</h2>

<ul>
<li>Add new instance of <a href="Minitest.html" title="Minitest (module)"><code>Minitest</code></a> constant. The <code>MiniTest</code> constant (with the capital T) will be removed in the next major release of <a href="Minitest.html" title="Minitest (module)"><code>Minitest</code></a>. See <a href="https://github.com/simplecov-ruby/simplecov/pull/757">#757</a> (thanks <a href="https://github.com/adam12">@adam12</a>)</li>
</ul>

<h1>Older Changelogs</h1>

<p>Looking for older changelogs? Please check the [old Changelog])</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>