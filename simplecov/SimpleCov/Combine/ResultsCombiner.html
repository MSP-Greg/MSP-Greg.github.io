<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: SimpleCov::Combine::ResultsCombiner &mdash; SimpleCov main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "SimpleCov::Combine::ResultsCombiner",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>SimpleCov main</a> &raquo; 
      <a href='../../_index.html#alpha_R'>Index (R)</a> &raquo; 
        <a href="../../SimpleCov.html" title="SimpleCov (module)">SimpleCov</a> &raquo; 
        <a href="../Combine.html" title="SimpleCov::Combine (module)">Combine</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ResultsCombiner&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: SimpleCov::Combine::ResultsCombiner</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/colszowka/simplecov/blob/main/lib/simplecov/combine/results_combiner.rb#L10'>lib/simplecov/combine/results_combiner.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>There might be reports from different kinds of tests, e.g. RSpec and Cucumber. We need to combine their results into unified one. This class does that. To unite the results on file basis, it leverages the combine of lines and branches inside each file within given results.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature mf'>
      <a href="#combine-class_method" title=".combine (class method)">.<strong>combine</strong>(*results)  &#x21d2; Hash </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Combine.html" title="SimpleCov::Combine (module)"><code>::SimpleCov::Combine</code></a> process explanation =&gt; ResultCombiner: define all present files between results and start combine on file level.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#combine_file_coverage-class_method" title=".combine_file_coverage (class method)">.<strong>combine_file_coverage</strong>(coverage_a, coverage_b)  &#x21d2; Hash </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Combine.html" title="SimpleCov::Combine (module)"><code>::SimpleCov::Combine</code></a> two files coverage results.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#combine_result_sets-class_method" title=".combine_result_sets (class method)">.<strong>combine_result_sets</strong>(combined_results, result)  &#x21d2; Hash </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Manage combining results on files level.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="combine-class_method">
  <h3 class='signature private first'>
    .<strong>combine</strong>(*results)  &#x21d2; <code>Hash</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../Combine.html" title="SimpleCov::Combine (module)"><code>::SimpleCov::Combine</code></a> process explanation</p>

<h1 id="label-3E+ResultCombiner-3A+define+all+present+files+between+results+and+start+combine+on+file+level.">&gt; ResultCombiner: define all present files between results and start combine on file level.</h1>

<h2 id="label-3E+FileCombiner-3A+collect+result+of+next+combine+levels+lines+and+branches.">&gt; FileCombiner: collect result of next combine levels lines and branches.</h2>

<h3 id="label-3E+LinesCombiner-3A+combine+lines+results.">&gt; LinesCombiner: combine lines results.</h3>

<h3 id="label-3E+BranchesCombiner-3A+combine+branches+results.">&gt; BranchesCombiner: combine branches results.</h3>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/colszowka/simplecov/blob/main/lib/simplecov/combine/results_combiner.rb#L22-L26'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='22' data-end='26'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/simplecov/combine/results_combiner.rb', line 22</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_combine'>combine</span>(<span class='op'>*</span><span class='id identifier rubyid_results'>results</span>)
  <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_reduce'>reduce</span>({}) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_combined_results'>combined_results</span><span class='comma'>,</span> <span class='id identifier rubyid_next_result'>next_result</span><span class='op'>|</span>
    <span class='id identifier rubyid_combine_result_sets'><a href="#combine_result_sets-class_method" title="SimpleCov::Combine::ResultsCombiner.combine_result_sets (method)">combine_result_sets</a></span>(<span class='id identifier rubyid_combined_results'>combined_results</span><span class='comma'>,</span> <span class='id identifier rubyid_next_result'>next_result</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="combine_file_coverage-class_method">
  <h3 class='signature private'>
    .<strong>combine_file_coverage</strong>(coverage_a, coverage_b)  &#x21d2; <code>Hash</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../Combine.html" title="SimpleCov::Combine (module)"><code>::SimpleCov::Combine</code></a> two files coverage results</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>coverage_a</span>
    <span class='type'>(<code>Hash</code>)</span>
  </li>
  <li>
    <span class='name'>coverage_b</span>
    <span class='type'>(<code>Hash</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/colszowka/simplecov/blob/main/lib/simplecov/combine/results_combiner.rb#L55-L57'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='55' data-end='57'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/simplecov/combine/results_combiner.rb', line 55</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_combine_file_coverage'>combine_file_coverage</span>(<span class='id identifier rubyid_coverage_a'>coverage_a</span><span class='comma'>,</span> <span class='id identifier rubyid_coverage_b'>coverage_b</span>)
  <span class='const'><a href="../Combine.html" title="SimpleCov::Combine (module)">Combine</a></span>.<span class='id identifier rubyid_combine'><a href="../Combine.html#combine-class_method" title="SimpleCov::Combine.combine (method)">combine</a></span>(<span class='const'><a href="../Combine.html" title="SimpleCov::Combine (module)">Combine</a></span><span class='op'>::</span><span class='const'><a href="FilesCombiner.html" title="SimpleCov::Combine::FilesCombiner (module)">FilesCombiner</a></span><span class='comma'>,</span> <span class='id identifier rubyid_coverage_a'>coverage_a</span><span class='comma'>,</span> <span class='id identifier rubyid_coverage_b'>coverage_b</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="combine_result_sets-class_method">
  <h3 class='signature private'>
    .<strong>combine_result_sets</strong>(combined_results, result)  &#x21d2; <code>Hash</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Manage combining results on files level</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>combined_results</span>
    <span class='type'>(<code>Hash</code>)</span>
  </li>
  <li>
    <span class='name'>result</span>
    <span class='type'>(<code>Hash</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/colszowka/simplecov/blob/main/lib/simplecov/combine/results_combiner.rb#L36-L45'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='36' data-end='45'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/simplecov/combine/results_combiner.rb', line 36</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_combine_result_sets'>combine_result_sets</span>(<span class='id identifier rubyid_combined_results'>combined_results</span><span class='comma'>,</span> <span class='id identifier rubyid_result'><a href="../../SimpleCov.html#result-class_method" title="SimpleCov.result (method)">result</a></span>)
  <span class='id identifier rubyid_results_files'>results_files</span> <span class='op'>=</span> <span class='id identifier rubyid_combined_results'>combined_results</span>.<span class='id identifier rubyid_keys'>keys</span> <span class='op'>|</span> <span class='id identifier rubyid_result'><a href="../../SimpleCov.html#result-class_method" title="SimpleCov.result (method)">result</a></span>.<span class='id identifier rubyid_keys'>keys</span>

  <span class='id identifier rubyid_results_files'>results_files</span>.<span class='id identifier rubyid_each_with_object'>each_with_object</span>({}) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file_name'>file_name</span><span class='comma'>,</span> <span class='id identifier rubyid_file_combination'>file_combination</span><span class='op'>|</span>
    <span class='id identifier rubyid_file_combination'>file_combination</span>[<span class='id identifier rubyid_file_name'>file_name</span>] <span class='op'>=</span> <span class='id identifier rubyid_combine_file_coverage'><a href="#combine_file_coverage-class_method" title="SimpleCov::Combine::ResultsCombiner.combine_file_coverage (method)">combine_file_coverage</a></span>(
      <span class='id identifier rubyid_combined_results'>combined_results</span>[<span class='id identifier rubyid_file_name'>file_name</span>]<span class='comma'>,</span>
      <span class='id identifier rubyid_result'><a href="../../SimpleCov.html#result-class_method" title="SimpleCov.result (method)">result</a></span>[<span class='id identifier rubyid_file_name'>file_name</span>]
    )
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>