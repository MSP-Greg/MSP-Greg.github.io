<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Timezone::Zone &mdash; Timezone master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Timezone::Zone",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Timezone master</a> &raquo; 
      <a href='../_index.html#alpha_Z'>Index (Z)</a> &raquo; 
        <a href="../Timezone.html" title="Timezone (module)">Timezone</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Zone&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Timezone::Zone</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Zone/RuleSet.html" title="Timezone::Zone::RuleSet (class)"><code>RuleSet</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Comparable
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L14'>lib/timezone/zone.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>This object represents a real-world timezone. Each instance provides methods for converting UTC times to the local timezone and local times to UTC for any historical, present or future times.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DST_BIT-constant' class='summary_signature priv'>DST_BIT =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L38-L38'># File 'lib/timezone/zone.rb', line 38</a>    <pre class='code ruby'><span class='int'>2</span></pre>
  </li>
  <li>
    <span id='NAME_BIT-constant' class='summary_signature priv'>NAME_BIT =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L36-L36'># File 'lib/timezone/zone.rb', line 36</a>    <pre class='code ruby'><span class='int'>1</span></pre>
  </li>
  <li>
    <span id='OFFSET_BIT-constant' class='summary_signature priv'>OFFSET_BIT =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L40-L40'># File 'lib/timezone/zone.rb', line 40</a>    <pre class='code ruby'><span class='int'>3</span></pre>
  </li>
  <li>
    <span id='SOURCE_BIT-constant' class='summary_signature priv'>SOURCE_BIT =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L34-L34'># File 'lib/timezone/zone.rb', line 34</a>    <pre class='code ruby'><span class='int'>0</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(name)  &#x21d2; Timezone::Zone </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new timezone object using the timezone name.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; String </a>
      (also: #to_s)
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#name-instance_method" title="Timezone::Zone#name (method)">#name</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#valid%3F-instance_method" title="#valid? (instance method)">#<strong>valid?</strong>  &#x21d2; true </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>If this is a valid timezone.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<=>-instance_method" title="#&lt;=&gt; (instance method)">#<strong>&lt;=&gt;</strong>(other)  &#x21d2; -1, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Compare one timezone with another based on current UTC offset.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#abbr-instance_method" title="#abbr (instance method)">#<strong>abbr</strong>(time)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The timezone abbreviation, at the given time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dst%3F-instance_method" title="#dst? (instance method)">#<strong>dst?</strong>(time)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If, at the given time, the timezone was observing Daylight Savings.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#local_to_utc-instance_method" title="#local_to_utc (instance method)">#<strong>local_to_utc</strong>(time)  &#x21d2; Time </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Converts the given local time to the UTC equivalent.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#time-instance_method" title="#time (instance method)">#<strong>time</strong>(time)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#utc_to_local-instance_method" title="Timezone::Zone#utc_to_local (method)">#utc_to_local</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#time_with_offset-instance_method" title="#time_with_offset (instance method)">#<strong>time_with_offset</strong>(time)  &#x21d2; Time </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Converts the given time to the local timezone and includes the UTC offset in the result.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#utc_offset-instance_method" title="#utc_offset (instance method)">#<strong>utc_offset</strong>(time = nil)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the UTC offset (in seconds) for the given time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#utc_to_local-instance_method" title="#utc_to_local (instance method)">#<strong>utc_to_local</strong>(time)  &#x21d2; Time </a>
      (also: #time)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Converts the given time to the local timezone and does not include a UTC offset in the result.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#binary_search-instance_method" title="#binary_search (instance method)">#<strong>binary_search</strong>(rules, time, from = 0, to = nil, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Find the first rule that matches using binary search.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#match%3F-instance_method" title="#match? (instance method)">#<strong>match?</strong>(seconds, rule)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Does the given time (in seconds) match this rule?</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#rule_for_local-instance_method" title="#rule_for_local (instance method)">#<strong>rule_for_local</strong>(local)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#rule_for_utc-instance_method" title="#rule_for_utc (instance method)">#<strong>rule_for_utc</strong>(time)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#sanitize-instance_method" title="#sanitize (instance method)">#<strong>sanitize</strong>(time)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(name)  &#x21d2; <code>Zone</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new timezone object using the timezone name.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>the timezone name</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L47-L49'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='47' data-end='49'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 47</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_name'><a href="#name-instance_method" title="Timezone::Zone#name (method)">name</a></span>)
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="Timezone::Zone#name (method)">name</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="name-instance_method">
  <h3 class='signature ro first'>
    #<strong>name</strong>  &#x21d2; <code>String</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#to_s</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>the timezone name</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L18-L18'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='18' data-end='18'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 18</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_s-instance_method">
  <h3 class='signature ro'>
    #<strong>to_s</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#name-instance_method" title="Timezone::Zone#name (method)">#name</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L20-L20'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='20' data-end='20'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 20</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_to_s'>to_s</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="Timezone::Zone#name (method)">name</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="valid?-instance_method">
  <h3 class='signature ro'>
    #<strong>valid?</strong>  &#x21d2; <code>true</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If this is a valid timezone.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>)</span>
&mdash;    <div class='inline'>
<p>if this is a valid timezone</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L30-L32'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='30' data-end='32'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 30</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_valid?'>valid?</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<=>-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;=&gt;</strong>(other)  &#x21d2; -<code>1</code>, ... 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Compare one timezone with another based on current UTC offset.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>other</span>
    <span class='type'>(<code>Zone</code>)</span>
&mdash;    <div class='inline'>
<p>the other timezone</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(-<code>1</code>, <code>0</code>, <code>1</code>, <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>comparison based on current ‘utc_offset`.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L173-L177'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='173' data-end='177'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 173</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>&lt;=&gt;</span>(<span class='id identifier rubyid_other'>other</span>)
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_utc_offset'><a href="#utc_offset-instance_method" title="Timezone::Zone#utc_offset (method)">utc_offset</a></span>)

  <span class='id identifier rubyid_utc_offset'><a href="#utc_offset-instance_method" title="Timezone::Zone#utc_offset (method)">utc_offset</a></span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_utc_offset'><a href="#utc_offset-instance_method" title="Timezone::Zone#utc_offset (method)">utc_offset</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="abbr-instance_method">
  <h3 class='signature '>
    #<strong>abbr</strong>(time)  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The timezone abbreviation, at the given time.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>time</span>
    <span class='type'>(#<code>to_time</code>)</span>
&mdash;    <div class='inline'>
<p>the source time</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>the timezone abbreviation, at the given time</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L140-L144'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='140' data-end='144'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 140</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_abbr'>abbr</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='id identifier rubyid_sanitize'><a href="#sanitize-instance_method" title="Timezone::Zone#sanitize (method)">sanitize</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)

  <span class='id identifier rubyid_rule_for_utc'><a href="#rule_for_utc-instance_method" title="Timezone::Zone#rule_for_utc (method)">rule_for_utc</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)[<span class='const'><a href="#NAME_BIT-constant" title="Timezone::Zone::NAME_BIT (constant)">NAME_BIT</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="binary_search-instance_method">
  <h3 class='signature priv'>
    #<strong>binary_search</strong>(rules, time, from = 0, to = nil, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Find the first rule that matches using binary search.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L253-L269'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='253' data-end='269'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 253</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_binary_search'>binary_search</span>(<span class='id identifier rubyid_rules'>rules</span><span class='comma'>,</span> <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='id identifier rubyid_rules'>rules</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_to'>to</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_from'>from</span> <span class='kw'>if</span> <span class='id identifier rubyid_from'>from</span> <span class='op'>==</span> <span class='id identifier rubyid_to'>to</span>

  <span class='id identifier rubyid_mid'>mid</span> <span class='op'>=</span> (<span class='id identifier rubyid_from'>from</span> <span class='op'>+</span> <span class='id identifier rubyid_to'>to</span>).<span class='id identifier rubyid_div'>div</span>(<span class='int'>2</span>)

  <span class='kw'>unless</span> <span class='kw'>yield</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span><span class='comma'>,</span> <span class='id identifier rubyid_rules'>rules</span>[<span class='id identifier rubyid_mid'>mid</span>])
    <span class='kw'>return</span> <span class='id identifier rubyid_binary_search'>binary_search</span>(<span class='id identifier rubyid_rules'>rules</span><span class='comma'>,</span> <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span><span class='comma'>,</span> <span class='id identifier rubyid_mid'>mid</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_mid'>mid</span> <span class='kw'>if</span> <span class='id identifier rubyid_mid'>mid</span>.<span class='id identifier rubyid_zero?'>zero?</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_mid'>mid</span> <span class='kw'>unless</span> <span class='kw'>yield</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span><span class='comma'>,</span> <span class='id identifier rubyid_rules'>rules</span>[<span class='id identifier rubyid_mid'>mid</span> <span class='op'>-</span> <span class='int'>1</span>])

  <span class='id identifier rubyid_binary_search'>binary_search</span>(<span class='id identifier rubyid_rules'>rules</span><span class='comma'>,</span> <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span><span class='comma'>,</span> <span class='id identifier rubyid_mid'>mid</span> <span class='op'>-</span> <span class='int'>1</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dst?-instance_method">
  <h3 class='signature '>
    #<strong>dst?</strong>(time)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If, at the given time, the timezone was observing Daylight Savings.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>time</span>
    <span class='type'>(#<code>to_time</code>)</span>
&mdash;    <div class='inline'>
<p>the source time</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>whether the timezone, at the given time, was observing Daylight Savings Time</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L151-L155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='151' data-end='155'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 151</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dst?'>dst?</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='id identifier rubyid_sanitize'><a href="#sanitize-instance_method" title="Timezone::Zone#sanitize (method)">sanitize</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)

  <span class='id identifier rubyid_rule_for_utc'><a href="#rule_for_utc-instance_method" title="Timezone::Zone#rule_for_utc (method)">rule_for_utc</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)[<span class='const'><a href="#DST_BIT-constant" title="Timezone::Zone::DST_BIT (constant)">DST_BIT</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>a developer friendly representation of the object</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L23-L25'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='23' data-end='25'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 23</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;Timezone::Zone name: \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'><a href="#name-instance_method" title="Timezone::Zone#name (method)">name</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="local_to_utc-instance_method">
  <h3 class='signature '>
    #<strong>local_to_utc</strong>(time)  &#x21d2; <code>Time</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The UTC equivalent is a “best guess”. There are cases where local times do not map to UTC at all (during a time skip forward). There are also cases where local times map to two distinct UTC times (during a fall back). All of these cases are approximated in this method and the first possible result is used instead.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>A note about the handling of time arguments.</p>

<p>Because the UTC offset of a ‘Time` object in Ruby is not equivalent to a single timezone, the <a href="#time-instance_method" title="Timezone::Zone#time (method)">#time</a> argument in this method is first converted to a UTC equivalent before being used as a local time.</p>

<p>This prevents confusion between historical UTC offsets and the UTC offset that the ‘Time` object provides. For instance, if I pass a “local” time with offset <code>+8</code> but the timezone actually had an offset of <code>+9</code> at the given historical time, there is an inconsistency that must be resolved.</p>

<p>Did the user make a mistake; or is the offset intentional?</p>

<p>One approach to solving this problem would be to raise an error, but this means that the user then needs to calculate the appropriate local offset and append that to a UTC time to satisfy the function. This is impractical because the offset can already be calculated by this library. The user should only need to provide a time without an offset!</p>

<p>To resolve this inconsistency, the solution I chose was to scrub the offset. In the case where an offset is provided, the time is just converted to the UTC equivalent (without an offset). The resulting time is used as the local reference time.</p>

<p>For example, if the time ‘08:00 +2` is passed to this function, the local time is assumed to be <code>06:00</code>.</p>
</div>
  </div>


<p>Converts the given local time to the UTC equivalent.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>time</span>
    <span class='type'>(#<code>to_time</code>)</span>
&mdash;    <div class='inline'>
<p>the local time</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Time</code>)</span>
&mdash;    <div class='inline'>
<p>the time in UTC</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L108-L112'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='108' data-end='112'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 108</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_local_to_utc'>local_to_utc</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='id identifier rubyid_sanitize'><a href="#sanitize-instance_method" title="Timezone::Zone#sanitize (method)">sanitize</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)

  (<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>-</span> <span class='id identifier rubyid_rule_for_local'><a href="#rule_for_local-instance_method" title="Timezone::Zone#rule_for_local (method)">rule_for_local</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>).<span class='id identifier rubyid_rules'>rules</span>.<span class='id identifier rubyid_first'>first</span>[<span class='const'><a href="#OFFSET_BIT-constant" title="Timezone::Zone::OFFSET_BIT (constant)">OFFSET_BIT</a></span>]).<span class='id identifier rubyid_utc'>utc</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match?-instance_method">
  <h3 class='signature priv'>
    #<strong>match?</strong>(seconds, rule)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Does the given time (in seconds) match this rule?</p>

<p>Each rule has a SOURCE bit which is the number of seconds, since the Epoch, up to which the rule is valid.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L189-L191'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='189' data-end='191'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 189</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_seconds'>seconds</span><span class='comma'>,</span> <span class='id identifier rubyid_rule'>rule</span>) <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_seconds'>seconds</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_rule'>rule</span>[<span class='const'><a href="#SOURCE_BIT-constant" title="Timezone::Zone::SOURCE_BIT (constant)">SOURCE_BIT</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rule_for_local-instance_method">
  <h3 class='signature priv'>
    #<strong>rule_for_local</strong>(local)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L196-L243'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='196' data-end='243'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 196</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_for_local'>rule_for_local</span>(<span class='id identifier rubyid_local'>local</span>)
  <span class='id identifier rubyid_local'>local</span> <span class='op'>=</span> <span class='id identifier rubyid_local'>local</span>.<span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='const'><a href="Loader.html" title="Timezone::Loader (module)">Loader</a></span>.<span class='id identifier rubyid_load'><a href="Loader.html#load-class_method" title="Timezone::Loader.load (method)">load</a></span>(<span class='id identifier rubyid_name'><a href="#name-instance_method" title="Timezone::Zone#name (method)">name</a></span>)

  <span class='comment'># For each rule, convert the local time into the UTC equivalent for
</span>  <span class='comment'># that rule offset, and then check if the UTC time matches the rule.
</span>  <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span>
    <span class='id identifier rubyid_binary_search'><a href="#binary_search-instance_method" title="Timezone::Zone#binary_search (method)">binary_search</a></span>(<span class='id identifier rubyid_rules'>rules</span><span class='comma'>,</span> <span class='id identifier rubyid_local'>local</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_r'>r</span><span class='op'>|</span>
      <span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Timezone::Zone#match? (method)">match?</a></span>(<span class='id identifier rubyid_t'>t</span> <span class='op'>-</span> <span class='id identifier rubyid_r'>r</span>[<span class='const'><a href="#OFFSET_BIT-constant" title="Timezone::Zone::OFFSET_BIT (constant)">OFFSET_BIT</a></span>]<span class='comma'>,</span> <span class='id identifier rubyid_r'>r</span>)
    <span class='kw'>end</span>
  <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_rules'>rules</span>[<span class='id identifier rubyid_index'>index</span>]

  <span class='id identifier rubyid_utc'>utc</span> <span class='op'>=</span> <span class='id identifier rubyid_local'>local</span> <span class='op'>-</span> <span class='id identifier rubyid_match'>match</span>[<span class='const'><a href="#OFFSET_BIT-constant" title="Timezone::Zone::OFFSET_BIT (constant)">OFFSET_BIT</a></span>]

  <span class='comment'># If the UTC rule for the calculated UTC time does not map back to the
</span>  <span class='comment'># same rule, then we have a skip in time and there is no applicable rule.
</span>  <span class='kw'>return</span> <span class='const'><a href="Zone/RuleSet.html" title="Timezone::Zone::RuleSet (class)">RuleSet</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Timezone::Zone.new (method)">new</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_missing'>missing</span><span class='comma'>,</span> [<span class='id identifier rubyid_match'>match</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_rule_for_utc'><a href="#rule_for_utc-instance_method" title="Timezone::Zone#rule_for_utc (method)">rule_for_utc</a></span>(<span class='id identifier rubyid_utc'>utc</span>) <span class='op'>!=</span> <span class='id identifier rubyid_match'>match</span>

  <span class='comment'># If the match is the last rule, then return it.
</span>  <span class='kw'>return</span> <span class='const'><a href="Zone/RuleSet.html" title="Timezone::Zone::RuleSet (class)">RuleSet</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Timezone::Zone.new (method)">new</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_single'>single</span><span class='comma'>,</span> [<span class='id identifier rubyid_match'>match</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>==</span> <span class='id identifier rubyid_rules'>rules</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span>

  <span class='comment'># If the UTC equivalent time falls within the last hour(s) of the time
</span>  <span class='comment'># change which were replayed during a fall-back in time, then return
</span>  <span class='comment'># the matched rule and the next one.
</span>  <span class='comment'>#
</span>  <span class='comment'># Example:
</span>  <span class='comment'>#
</span>  <span class='comment'>#     rules = [
</span>  <span class='comment'>#       [ 8:00 UTC, -1 ], # UTC-1 up to and including 8:00 UTC
</span>  <span class='comment'>#       [ 14:00 UTC, -2 ], # UTC-2 up to and including 14:00 UTC
</span>  <span class='comment'>#     ]
</span>  <span class='comment'>#
</span>  <span class='comment'>#     6:50 local (7:50 UTC) by the first rule
</span>  <span class='comment'>#     6:50 local (8:50 UTC) by the second rule
</span>  <span class='comment'>#
</span>  <span class='comment'>#     Since both rules provide valid mappings for the local time,
</span>  <span class='comment'>#     we need to return both values.
</span>  <span class='id identifier rubyid_last_hour'>last_hour</span> <span class='op'>=</span>
    <span class='id identifier rubyid_match'>match</span>[<span class='const'><a href="#SOURCE_BIT-constant" title="Timezone::Zone::SOURCE_BIT (constant)">SOURCE_BIT</a></span>] <span class='op'>-</span>
    <span class='id identifier rubyid_match'>match</span>[<span class='const'><a href="#OFFSET_BIT-constant" title="Timezone::Zone::OFFSET_BIT (constant)">OFFSET_BIT</a></span>] <span class='op'>+</span>
    <span class='id identifier rubyid_rules'>rules</span>[<span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span>][<span class='const'><a href="#OFFSET_BIT-constant" title="Timezone::Zone::OFFSET_BIT (constant)">OFFSET_BIT</a></span>]

  <span class='kw'>if</span> <span class='id identifier rubyid_utc'>utc</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_last_hour'>last_hour</span>
    <span class='const'><a href="Zone/RuleSet.html" title="Timezone::Zone::RuleSet (class)">RuleSet</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Timezone::Zone.new (method)">new</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_double'>double</span><span class='comma'>,</span> <span class='id identifier rubyid_rules'>rules</span>[<span class='id identifier rubyid_index'>index</span><span class='op'>..</span>(<span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span>)])
  <span class='kw'>else</span>
    <span class='const'><a href="Zone/RuleSet.html" title="Timezone::Zone::RuleSet (class)">RuleSet</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Timezone::Zone.new (method)">new</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_single'>single</span><span class='comma'>,</span> [<span class='id identifier rubyid_match'>match</span>])
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rule_for_utc-instance_method">
  <h3 class='signature priv'>
    #<strong>rule_for_utc</strong>(time)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L245-L250'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='245' data-end='250'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 245</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_for_utc'>rule_for_utc</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>.<span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='const'><a href="Loader.html" title="Timezone::Loader (module)">Loader</a></span>.<span class='id identifier rubyid_load'><a href="Loader.html#load-class_method" title="Timezone::Loader.load (method)">load</a></span>(<span class='id identifier rubyid_name'><a href="#name-instance_method" title="Timezone::Zone#name (method)">name</a></span>)

  <span class='id identifier rubyid_rules'>rules</span>[<span class='id identifier rubyid_binary_search'><a href="#binary_search-instance_method" title="Timezone::Zone#binary_search (method)">binary_search</a></span>(<span class='id identifier rubyid_rules'>rules</span><span class='comma'>,</span> <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>) { <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Timezone::Zone#match? (method)">match?</a></span>(<span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_r'>r</span>) }]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sanitize-instance_method">
  <h3 class='signature priv'>
    #<strong>sanitize</strong>(time)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L181-L183'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='181' data-end='183'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 181</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sanitize'>sanitize</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>.<span class='id identifier rubyid_to_time'>to_time</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="time-instance_method">
  <h3 class='signature '>
    #<strong>time</strong>(time)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#utc_to_local-instance_method" title="Timezone::Zone#utc_to_local (method)">#utc_to_local</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L66-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='66' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 66</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_time'>time</span> <span class='id identifier rubyid_utc_to_local'><a href="#utc_to_local-instance_method" title="Timezone::Zone#utc_to_local (method)">utc_to_local</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="time_with_offset-instance_method">
  <h3 class='signature '>
    #<strong>time_with_offset</strong>(time)  &#x21d2; <code>Time</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Converts the given time to the local timezone and includes the UTC offset in the result.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>time</span>
    <span class='type'>(#<code>to_time</code>)</span>
&mdash;    <div class='inline'>
<p>the source time</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Time</code>)</span>
&mdash;    <div class='inline'>
<p>the time in the local timezone with the UTC offset</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L119-L134'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='119' data-end='134'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 119</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_time_with_offset'>time_with_offset</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='id identifier rubyid_sanitize'><a href="#sanitize-instance_method" title="Timezone::Zone#sanitize (method)">sanitize</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)

  <span class='id identifier rubyid_utc'>utc</span> <span class='op'>=</span> <span class='id identifier rubyid_utc_to_local'><a href="#utc_to_local-instance_method" title="Timezone::Zone#utc_to_local (method)">utc_to_local</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_utc_offset'><a href="#utc_offset-instance_method" title="Timezone::Zone#utc_offset (method)">utc_offset</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)

  <span class='const'>Time</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Timezone::Zone.new (method)">new</a></span>(
    <span class='id identifier rubyid_utc'>utc</span>.<span class='id identifier rubyid_year'>year</span><span class='comma'>,</span>
    <span class='id identifier rubyid_utc'>utc</span>.<span class='id identifier rubyid_month'>month</span><span class='comma'>,</span>
    <span class='id identifier rubyid_utc'>utc</span>.<span class='id identifier rubyid_day'>day</span><span class='comma'>,</span>
    <span class='id identifier rubyid_utc'>utc</span>.<span class='id identifier rubyid_hour'>hour</span><span class='comma'>,</span>
    <span class='id identifier rubyid_utc'>utc</span>.<span class='id identifier rubyid_min'>min</span><span class='comma'>,</span>
    <span class='id identifier rubyid_utc'>utc</span>.<span class='id identifier rubyid_sec'>sec</span> <span class='op'>+</span> <span class='id identifier rubyid_utc'>utc</span>.<span class='id identifier rubyid_subsec'>subsec</span><span class='comma'>,</span>
    <span class='id identifier rubyid_offset'>offset</span>
  )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="utc_offset-instance_method">
  <h3 class='signature '>
    #<strong>utc_offset</strong>(time = nil)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the UTC offset (in seconds) for the given time.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>time</span>
    <span class='type'>(#<code>to_time</code>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>(Time.now) the source time</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>the UTC offset (in seconds) in the local timezone</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L161-L166'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='161' data-end='166'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 161</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_utc_offset'>utc_offset</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>||=</span> <span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='id identifier rubyid_sanitize'><a href="#sanitize-instance_method" title="Timezone::Zone#sanitize (method)">sanitize</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)

  <span class='id identifier rubyid_rule_for_utc'><a href="#rule_for_utc-instance_method" title="Timezone::Zone#rule_for_utc (method)">rule_for_utc</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)[<span class='const'><a href="#OFFSET_BIT-constant" title="Timezone::Zone::OFFSET_BIT (constant)">OFFSET_BIT</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="utc_to_local-instance_method">
  <h3 class='signature '>
    #<strong>utc_to_local</strong>(time)  &#x21d2; <code>Time</code> 
    <span class='aliases'>Also known as: <span class='names'>#time</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The resulting time is always a UTC time. If you would  like a time with the appropriate offset, use ‘#time_with_offset` instead.</p>
</div>
  </div>


<p>Converts the given time to the local timezone and does not include a UTC offset in the result.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>time</span>
    <span class='type'>(#<code>to_time</code>)</span>
&mdash;    <div class='inline'>
<p>the source time</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Time</code>)</span>
&mdash;    <div class='inline'>
<p>the time in the local timezone</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/panthomakos/timezone/blob/master/lib/timezone/zone.rb#L60-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/timezone/zone.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_utc_to_local'>utc_to_local</span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)
  <span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>=</span> <span class='id identifier rubyid_sanitize'><a href="#sanitize-instance_method" title="Timezone::Zone#sanitize (method)">sanitize</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)

  (<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span> <span class='op'>+</span> <span class='id identifier rubyid_utc_offset'><a href="#utc_offset-instance_method" title="Timezone::Zone#utc_offset (method)">utc_offset</a></span>(<span class='id identifier rubyid_time'><a href="#time-instance_method" title="Timezone::Zone#time (method)">time</a></span>)).<span class='id identifier rubyid_utc'>utc</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>