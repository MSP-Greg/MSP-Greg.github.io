<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveSupport::Cache::Store &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveSupport::Cache::Store",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails main</a> &raquo; 
      <a href='../../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a> &raquo; 
        <a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Store&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActiveSupport::Cache::Store</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="FileStore.html" title="ActiveSupport::Cache::FileStore (class)">FileStore</a>, <a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)">MemCacheStore</a>, <a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a>, <a href="NullStore.html" title="ActiveSupport::Cache::NullStore (class)">NullStore</a>, <a href="RedisCacheStore.html" title="ActiveSupport::Cache::RedisCacheStore (class)">RedisCacheStore</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L190'>activesupport/lib/active_support/cache.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>An abstract cache store class. There are multiple cache store implementations, each having its own additional features. See the classes under the <a href="../Cache.html" title="ActiveSupport::Cache (module)"><code>::ActiveSupport::Cache</code></a> module, e.g. <a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)"><code>MemCacheStore</code></a>. <a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)"><code>MemCacheStore</code></a> is currently the most popular cache store for large production websites.</p>

<p>Some implementations may not support all methods beyond the basic cache methods of <a href="#fetch-instance_method" title="ActiveSupport::Cache::Store#fetch (method)">#fetch</a>, <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a>, <a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">#read</a>, <a href="#exist%3F-instance_method" title="ActiveSupport::Cache::Store#exist? (method)">#exist?</a>, and <a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">#delete</a>.</p>

<p><code>Store</code> can store any Ruby object that is supported by its <code>coder</code>‘s <code>dump</code> and <code>load</code> methods.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span>.<span class='id identifier rubyid_new'><a href="MemoryStore.html#new-class_method" title="ActiveSupport::Cache::MemoryStore.new (method)">new</a></span>

<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Duckburgh</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;Duckburgh&quot;
</span>
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not serializable</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Proc</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span> {}) <span class='comment'># =&gt; TypeError</span></code></pre>

<p>Keys are always translated into Strings and are case sensitive. When an object is specified as a key and has a <code>cache_key</code> method defined, this method will be called to define the key.  Otherwise, the <code>to_param</code> method will be called. Hashes and Arrays can also be used as keys. The elements will be delimited by slashes, and the elements within a <a href="../../Hash.html" title="Hash (class)"><code>::Hash</code></a> will be sorted by key so they are consistent.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>==</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_city'>city</span>)   <span class='comment'># =&gt; true</span></code></pre>

<p>Nil values can be cached.</p>

<p>If your cache is on a shared infrastructure, you can define a namespace for your cache entries. If a namespace is defined, it will be prefixed on to every key. The namespace can be either a static value or a Proc. If it is a Proc, it will be invoked when each key is evaluated so that you can use application logic to invalidate keys.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='ivar'>@last_mod_time</span> }  <span class='comment'># Set the namespace to a variable
</span><span class='ivar'>@last_mod_time</span> <span class='op'>=</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span>  <span class='comment'># Invalidate the entire cache by changing namespace</span></code></pre>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DEFAULT_POOL_OPTIONS-constant' class='summary_signature'>DEFAULT_POOL_OPTIONS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default <code>ConnectionPool</code> options</p>

  </div>
</div>
    <a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L192-L192'># File 'activesupport/lib/active_support/cache.rb', line 192</a>    <pre class='code ruby'>{ <span class='label'>size:</span> <span class='int'>5</span><span class='comma'>,</span> <span class='label'>timeout:</span> <span class='int'>5</span> }.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='MAX_KEY_SIZE-constant' class='summary_signature'>MAX_KEY_SIZE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Keys are truncated with the Active Support digest if they exceed the limit.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L195-L195'># File 'activesupport/lib/active_support/cache.rb', line 195</a>    <pre class='code ruby'><span class='int'>250</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#logger-class_method" title=".logger (class method)">.<strong>logger</strong>  </a>
      (also: #logger)
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#raise_on_invalid_cache_expiration_time-class_method" title=".raise_on_invalid_cache_expiration_time (class method)">.<strong>raise_on_invalid_cache_expiration_time</strong>  </a>
      (also: #raise_on_invalid_cache_expiration_time)
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(options = nil)  &#x21d2; Store </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#retrieve_pool_options-class_method" title=".retrieve_pool_options (class method)">.<strong>retrieve_pool_options</strong>(options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#logger-instance_method" title="#logger (instance method)">#<strong>logger</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#namespace-instance_method" title="#namespace (instance method)">#<strong>namespace</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the current namespace.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#namespace=-instance_method" title="#namespace= (instance method)">#<strong>namespace=</strong>(namespace)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the current namespace.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#raise_on_invalid_cache_expiration_time-instance_method" title="#raise_on_invalid_cache_expiration_time (instance method)">#<strong>raise_on_invalid_cache_expiration_time</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#silence%3F-instance_method" title="#silence? (instance method)">#<strong>silence?</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#silence-instance_method" title="ActiveSupport::Cache::Store#silence (method)">#silence</a>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#cleanup-instance_method" title="#cleanup (instance method)">#<strong>cleanup</strong>(options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Cleans up the cache by removing expired entries.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>(options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Clears the entire cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#decrement-instance_method" title="#decrement (instance method)">#<strong>decrement</strong>(name, amount = 1, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Decrements an integer value in the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(name, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes an entry in the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_matched-instance_method" title="#delete_matched (instance method)">#<strong>delete_matched</strong>(matcher, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes all entries with keys matching the pattern.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_multi-instance_method" title="#delete_multi (instance method)">#<strong>delete_multi</strong>(names, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes multiple entries in the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exist%3F-instance_method" title="#exist? (instance method)">#<strong>exist?</strong>(name, options = nil)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the cache contains an entry for the given key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(name, options = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Fetches data from the cache, using the given key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fetch_multi-instance_method" title="#fetch_multi (instance method)">#<strong>fetch_multi</strong>(*names)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Fetches data from the cache, using the given keys.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#increment-instance_method" title="#increment (instance method)">#<strong>increment</strong>(name, amount = 1, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Increments an integer value in the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mute-instance_method" title="#mute (instance method)">#<strong>mute</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Silences the logger within a block.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(name, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads data from the cache, using the given key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read_counter-instance_method" title="#read_counter (instance method)">#<strong>read_counter</strong>(name, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a counter that was set by <a href="#increment-instance_method" title="ActiveSupport::Cache::Store#increment (method)">#increment</a> / <a href="#decrement-instance_method" title="ActiveSupport::Cache::Store#decrement (method)">#decrement</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read_multi-instance_method" title="#read_multi (instance method)">#<strong>read_multi</strong>(*names)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads multiple values at once from the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#silence-instance_method" title="#silence (instance method)">#<strong>silence</strong>  </a>
      (also: #silence?)
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#silence!-instance_method" title="#silence! (instance method)">#<strong>silence!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Silences the logger.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(name, value, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the value to the cache with the key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_counter-instance_method" title="#write_counter (instance method)">#<strong>write_counter</strong>(name, value, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes a counter that can then be modified by <a href="#increment-instance_method" title="ActiveSupport::Cache::Store#increment (method)">#increment</a> / <a href="#decrement-instance_method" title="ActiveSupport::Cache::Store#decrement (method)">#decrement</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_multi-instance_method" title="#write_multi (instance method)">#<strong>write_multi</strong>(hash, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><a href="../Cache.html" title="ActiveSupport::Cache (module)"><code>::ActiveSupport::Cache</code></a> Storage API to write multiple values at once.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#_instrument-instance_method" title="#_instrument (instance method)">#<strong>_instrument</strong>(operation, multi: false, options: nil, **payload, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#default_serializer-instance_method" title="#default_serializer (instance method)">#<strong>default_serializer</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#delete_entry-instance_method" title="#delete_entry (instance method)">#<strong>delete_entry</strong>(key, **options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes an entry from the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#delete_multi_entries-instance_method" title="#delete_multi_entries (instance method)">#<strong>delete_multi_entries</strong>(entries, **options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes multiples entries in the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#deserialize_entry-instance_method" title="#deserialize_entry (instance method)">#<strong>deserialize_entry</strong>(payload)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#expand_and_namespace_key-instance_method" title="#expand_and_namespace_key (instance method)">#<strong>expand_and_namespace_key</strong>(key, options = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#expanded_key-instance_method" title="#expanded_key (instance method)">#<strong>expanded_key</strong>(key)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Expands key to be a consistent string value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#expanded_version-instance_method" title="#expanded_version (instance method)">#<strong>expanded_version</strong>(key)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#get_entry_value-instance_method" title="#get_entry_value (instance method)">#<strong>get_entry_value</strong>(entry, name, options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#handle_expired_entry-instance_method" title="#handle_expired_entry (instance method)">#<strong>handle_expired_entry</strong>(entry, key, options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#handle_invalid_expires_in-instance_method" title="#handle_invalid_expires_in (instance method)">#<strong>handle_invalid_expires_in</strong>(message)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#instrument-instance_method" title="#instrument (instance method)">#<strong>instrument</strong>(operation, key, options = nil, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#instrument_multi-instance_method" title="#instrument_multi (instance method)">#<strong>instrument_multi</strong>(operation, keys, options = nil, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#key_matcher-instance_method" title="#key_matcher (instance method)">#<strong>key_matcher</strong>(pattern, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds the namespace defined in the options to a pattern designed to match keys.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#merged_options-instance_method" title="#merged_options (instance method)">#<strong>merged_options</strong>(call_options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Merges the default options with ones specific to a method call.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#namespace_key-instance_method" title="#namespace_key (instance method)">#<strong>namespace_key</strong>(key, call_options = nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Prefix the key with a namespace string:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_key-instance_method" title="#normalize_key (instance method)">#<strong>normalize_key</strong>(key, options = nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Expands, namespaces and truncates the cache key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_options-instance_method" title="#normalize_options (instance method)">#<strong>normalize_options</strong>(options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Normalize aliased options to their canonical form.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_version-instance_method" title="#normalize_version (instance method)">#<strong>normalize_version</strong>(key, options = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#read_entry-instance_method" title="#read_entry (instance method)">#<strong>read_entry</strong>(key, **options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads an entry from the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#read_multi_entries-instance_method" title="#read_multi_entries (instance method)">#<strong>read_multi_entries</strong>(names, **options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads multiple entries from the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#save_block_result_to_cache-instance_method" title="#save_block_result_to_cache (instance method)">#<strong>save_block_result_to_cache</strong>(name, key, options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#serialize_entry-instance_method" title="#serialize_entry (instance method)">#<strong>serialize_entry</strong>(entry, **options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#truncate_key-instance_method" title="#truncate_key (instance method)">#<strong>truncate_key</strong>(key)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#validate_options-instance_method" title="#validate_options (instance method)">#<strong>validate_options</strong>(options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#write_entry-instance_method" title="#write_entry (instance method)">#<strong>write_entry</strong>(key, entry, **options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes an entry to the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#write_multi_entries-instance_method" title="#write_multi_entries (instance method)">#<strong>write_multi_entries</strong>(hash, **options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes multiple entries to the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new_entry-instance_method" title="#new_entry (instance method)">#<strong>new_entry</strong>(value, options = nil)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(options = nil)  &#x21d2; <code>Store</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new cache.</p>

<h4 id="label-Options">Options</h4>
<dl class="rdoc-list label-list"><dt><code>:namespace</code></dt>
<dd>
<p>Sets the namespace for the cache. This option is especially useful if your application shares a cache with other applications.</p>
</dd><dt><code>:serializer</code></dt>
<dd>
<p>The serializer for cached values. Must respond to <code>dump</code> and <code>load</code>.</p>

<p>The default serializer depends on the cache format version (set via <code>config.active_support.cache_format_version</code> when using Rails). The default serializer for each format version includes a fallback mechanism to deserialize values from any format version. This behavior makes it easy to migrate between format versions without invalidating the entire cache.</p>

<p>You can also specify <code>serializer: :message_pack</code> to use a preconfigured serializer based on ActiveSupport::MessagePack. The <code>:message_pack</code> serializer includes the same deserialization fallback mechanism, allowing easy migration from (or to) the default serializer. The <code>:message_pack</code> serializer may improve performance, but it requires the <code>msgpack</code> gem.</p>
</dd><dt><code>:compressor</code></dt>
<dd>
<p>The compressor for serialized cache values. Must respond to <code>deflate</code> and <code>inflate</code>.</p>

<p>The default compressor is <code>Zlib</code>. To define a new custom compressor that also decompresses old cache entries, you can check compressed values for Zlib’s <code>&quot;\x78&quot;</code> signature:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>MyCompressor</span>
  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_deflate'>deflate</span>(<span class='id identifier rubyid_dumped'>dumped</span>)
    <span class='comment'># compression logic... (make sure result does not start with &quot;\x78&quot;!)
</span>  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_inflate'>inflate</span>(<span class='id identifier rubyid_compressed'>compressed</span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_compressed'>compressed</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x78</span><span class='tstring_end'>&quot;</span></span>)
      <span class='const'>Zlib</span>.<span class='id identifier rubyid_inflate'>inflate</span>(<span class='id identifier rubyid_compressed'>compressed</span>)
    <span class='kw'>else</span>
      <span class='comment'># decompression logic...
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span>.<span class='id identifier rubyid_lookup_store'><a href="../Cache.html#lookup_store-class_method" title="ActiveSupport::Cache.lookup_store (method)">lookup_store</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_redis_cache_store'>redis_cache_store</span><span class='comma'>,</span> <span class='label'>compressor:</span> <span class='const'>MyCompressor</span>)</code></pre>
</dd><dt><code>:coder</code></dt>
<dd>
<p>The coder for serializing and (optionally) compressing cache entries. Must respond to <code>dump</code> and <code>load</code>.</p>

<p>The default coder composes the serializer and compressor, and includes some performance optimizations. If you only need to override the serializer or compressor, you should specify the <code>:serializer</code> or <code>:compressor</code> options instead.</p>

<p>If the store can handle cache entries directly, you may also specify <code>coder: nil</code> to omit the serializer, compressor, and coder. For example, if you are using ActiveSupport::Cache::MemoryStore and can guarantee that cache values will not be mutated, you can specify <code>coder: nil</code> to avoid the overhead of safeguarding against mutation.</p>

<p>The <code>:coder</code> option is mutually exclusive with the <code>:serializer</code> and <code>:compressor</code> options. Specifying them together will raise an <code>ArgumentError</code>.</p>
</dd></dl>

<p>Any other specified options are treated as default options for the relevant cache operations, such as <a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">#read</a>, <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a>, and <a href="#fetch-instance_method" title="ActiveSupport::Cache::Store#fetch (method)">#fetch</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L300-L321'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='300' data-end='321'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 300</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>?</span> <span class='id identifier rubyid_validate_options'><a href="#validate_options-instance_method" title="ActiveSupport::Cache::Store#validate_options (method)">validate_options</a></span>(<span class='id identifier rubyid_normalize_options'><a href="#normalize_options-instance_method" title="ActiveSupport::Cache::Store#normalize_options (method)">normalize_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)) <span class='op'>:</span> {}

  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_compress'>compress</span>] <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='ivar'>@options</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_compress'>compress</span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_compress_threshold'>compress_threshold</span>] <span class='op'>||=</span> <span class='const'><a href="../Cache.html#DEFAULT_COMPRESS_LIMIT-constant" title="ActiveSupport::Cache::DEFAULT_COMPRESS_LIMIT (constant)">DEFAULT_COMPRESS_LIMIT</a></span>

  <span class='ivar'>@max_key_size</span> <span class='op'>=</span> <span class='ivar'>@options</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_max_key_size'>max_key_size</span>)
  <span class='ivar'>@max_key_size</span> <span class='op'>=</span> <span class='const'><a href="#MAX_KEY_SIZE-constant" title="ActiveSupport::Cache::Store::MAX_KEY_SIZE (constant)">MAX_KEY_SIZE</a></span> <span class='kw'>if</span> <span class='ivar'>@max_key_size</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='comment'># allow &#39;false&#39; as a value
</span>
  <span class='ivar'>@coder</span> <span class='op'>=</span> <span class='ivar'>@options</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_coder'>coder</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_legacy_serializer'>legacy_serializer</span> <span class='op'>=</span> <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span>.<span class='id identifier rubyid_format_version'><a href="../Cache.html#format_version-class_method" title="ActiveSupport::Cache.format_version (method)">format_version</a></span> <span class='op'>&lt;</span> <span class='float'>7.1</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_serializer'>serializer</span>]
    <span class='id identifier rubyid_serializer'>serializer</span> <span class='op'>=</span> <span class='ivar'>@options</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_serializer'>serializer</span>) <span class='op'>||</span> <span class='id identifier rubyid_default_serializer'><a href="#default_serializer-instance_method" title="ActiveSupport::Cache::Store#default_serializer (method)">default_serializer</a></span>
    <span class='id identifier rubyid_serializer'>serializer</span> <span class='op'>=</span> <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="SerializerWithFallback.html" title="ActiveSupport::Cache::SerializerWithFallback (module)">SerializerWithFallback</a></span>[<span class='id identifier rubyid_serializer'>serializer</span>] <span class='kw'>if</span> <span class='id identifier rubyid_serializer'>serializer</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>)
    <span class='id identifier rubyid_compressor'>compressor</span> <span class='op'>=</span> <span class='ivar'>@options</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_compressor'>compressor</span>) { <span class='const'>Zlib</span> }

    <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="Coder.html" title="ActiveSupport::Cache::Coder (class)">Coder</a></span>.<span class='id identifier rubyid_new'><a href="Coder.html#new-class_method" title="ActiveSupport::Cache::Coder.new (method)">new</a></span>(<span class='id identifier rubyid_serializer'>serializer</span><span class='comma'>,</span> <span class='id identifier rubyid_compressor'>compressor</span><span class='comma'>,</span> <span class='label'>legacy_serializer:</span> <span class='id identifier rubyid_legacy_serializer'>legacy_serializer</span>)
  <span class='kw'>end</span>

  <span class='ivar'>@coder</span> <span class='op'>||=</span> <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="SerializerWithFallback.html" title="ActiveSupport::Cache::SerializerWithFallback (module)">SerializerWithFallback</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_passthrough'>passthrough</span>]

  <span class='ivar'>@coder_supports_compression</span> <span class='op'>=</span> <span class='ivar'>@coder</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_dump_compressed'>dump_compressed</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="logger-class_method">
  <h3 class='signature rw first'>
    .<strong>logger</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#logger</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L197-L197'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='197' data-end='197'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 197</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_on_invalid_cache_expiration_time-class_method">
  <h3 class='signature rw'>
    .<strong>raise_on_invalid_cache_expiration_time</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#raise_on_invalid_cache_expiration_time</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L198-L198'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='198' data-end='198'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 198</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_raise_on_invalid_cache_expiration_time'>raise_on_invalid_cache_expiration_time</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="retrieve_pool_options-class_method">
  <h3 class='signature priv first'>
    .<strong>retrieve_pool_options</strong>(options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L205-L226'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='205' data-end='226'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 205</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_retrieve_pool_options'>retrieve_pool_options</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pool'>pool</span>)
    <span class='id identifier rubyid_pool_options'>pool_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pool'>pool</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pool_options'>pool_options</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_pool_options'>pool_options</span>
  <span class='kw'>when</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>when</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_pool_options'>pool_options</span> <span class='op'>=</span> <span class='const'><a href="#DEFAULT_POOL_OPTIONS-constant" title="ActiveSupport::Cache::Store::DEFAULT_POOL_OPTIONS (constant)">DEFAULT_POOL_OPTIONS</a></span>
  <span class='kw'>when</span> <span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>
    <span class='id identifier rubyid_pool_options'>pool_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_size'>size</span>] <span class='op'>=</span> <span class='const'><a href="../../Integer.html" title="Integer (class)">Integer</a></span>(<span class='id identifier rubyid_pool_options'>pool_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_size'>size</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_pool_options'>pool_options</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_size'>size</span>)
    <span class='id identifier rubyid_pool_options'>pool_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_timeout'>timeout</span>] <span class='op'>=</span> <span class='const'><a href="../../Float.html" title="Float (class)">Float</a></span>(<span class='id identifier rubyid_pool_options'>pool_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_timeout'>timeout</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_pool_options'>pool_options</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_timeout'>timeout</span>)
    <span class='id identifier rubyid_pool_options'>pool_options</span> <span class='op'>=</span> <span class='const'><a href="#DEFAULT_POOL_OPTIONS-constant" title="ActiveSupport::Cache::Store::DEFAULT_POOL_OPTIONS (constant)">DEFAULT_POOL_OPTIONS</a></span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_pool_options'>pool_options</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid :pool argument, expected Hash, got: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pool_options'>pool_options</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_pool_options'>pool_options</span> <span class='kw'>unless</span> <span class='id identifier rubyid_pool_options'>pool_options</span>.<span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="logger-instance_method">
  <h3 class='signature rw first'>
    #<strong>logger</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L197-L197'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='197' data-end='197'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 197</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="namespace-instance_method">
  <h3 class='signature rw'>
    #<strong>namespace</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the current namespace</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L800-L802'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='800' data-end='802'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 800</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_namespace'>namespace</span>
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'>namespace</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="namespace=-instance_method">
  <h3 class='signature rw'>
    #<strong>namespace=</strong>(namespace)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the current namespace. Note, this will be ignored if custom options are passed to cache wills with a namespace key.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L806-L808'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='806' data-end='808'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 806</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_namespace='>namespace=</span>(<span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>)
  <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="options-instance_method">
  <h3 class='signature ro'>
    #<strong>options</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L200-L200'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='200' data-end='200'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 200</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence'><a href="#silence-instance_method" title="ActiveSupport::Cache::Store#silence (method)">silence</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_options'>options</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_on_invalid_cache_expiration_time-instance_method">
  <h3 class='signature rw'>
    #<strong>raise_on_invalid_cache_expiration_time</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L198-L198'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='198' data-end='198'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 198</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_raise_on_invalid_cache_expiration_time'>raise_on_invalid_cache_expiration_time</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="silence?-instance_method">
  <h3 class='signature ro'>
    #<strong>silence?</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#silence-instance_method" title="ActiveSupport::Cache::Store#silence (method)">#silence</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L201-L201'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='201' data-end='201'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 201</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence?'>silence?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence'><a href="#silence-instance_method" title="ActiveSupport::Cache::Store#silence (method)">silence</a></span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="_instrument-instance_method">
  <h3 class='signature priv first'>
    #<strong>_instrument</strong>(operation, multi: false, options: nil, **payload, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1074-L1093'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1074' data-end='1093'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1074</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__instrument'>_instrument</span>(<span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='label'>multi:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_logger'><a href="#logger-class_method" title="ActiveSupport::Cache::Store.logger (method)">logger</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_logger'><a href="#logger-class_method" title="ActiveSupport::Cache::Store.logger (method)">logger</a></span>.<span class='id identifier rubyid_debug?'>debug?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_silence?'><a href="#silence%3F-instance_method" title="ActiveSupport::Cache::Store#silence? (method)">silence?</a></span>
    <span class='id identifier rubyid_debug_key'>debug_key</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_multi'>multi</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span>].<span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> key(s) specified</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span>]
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

    <span class='id identifier rubyid_debug_options'>debug_options</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_blank?'>blank?</span>

    <span class='id identifier rubyid_logger'><a href="#logger-class_method" title="ActiveSupport::Cache::Store.logger (method)">logger</a></span>.<span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cache </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_operation'>operation</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_debug_key'>debug_key</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_debug_options'>debug_options</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_store'>store</span>] <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_payload'>payload</span>.<span class='id identifier rubyid_merge!'>merge!</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>)
  <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Notifications.html" title="ActiveSupport::Notifications (module)">Notifications</a></span>.<span class='id identifier rubyid_instrument'><a href="../Notifications.html#instrument-class_method" title="ActiveSupport::Notifications.instrument (method)">instrument</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cache_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_operation'>operation</span><span class='embexpr_end'>}</span><span class='tstring_content'>.active_support</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_payload'>payload</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_block'>block</span><span class='op'>&amp;.</span><span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_payload'>payload</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cleanup-instance_method">
  <h3 class='signature '>
    #<strong>cleanup</strong>(options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Cleans up the cache by removing expired entries.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>Some implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L785-L787'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='785' data-end='787'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 785</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cleanup'>cleanup</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support cleanup</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear-instance_method">
  <h3 class='signature '>
    #<strong>clear</strong>(options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Clears the entire cache. Be careful with this method since it could affect other processes if shared cache is being used.</p>

<p>The options hash is passed to the underlying cache implementation.</p>

<p>Some implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L795-L797'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='795' data-end='797'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 795</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear'>clear</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support clear</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="decrement-instance_method">
  <h3 class='signature '>
    #<strong>decrement</strong>(name, amount = 1, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Decrements an integer value in the cache.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>Some implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L750-L752'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='750' data-end='752'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 750</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_decrement'>decrement</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support decrement</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_serializer-instance_method">
  <h3 class='signature priv'>
    #<strong>default_serializer</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L811-L820'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='811' data-end='820'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 811</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_serializer'>default_serializer</span>
  <span class='kw'>case</span> <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span>.<span class='id identifier rubyid_format_version'><a href="../Cache.html#format_version-class_method" title="ActiveSupport::Cache.format_version (method)">format_version</a></span>
  <span class='kw'>when</span> <span class='float'>7.0</span>
    <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="SerializerWithFallback.html" title="ActiveSupport::Cache::SerializerWithFallback (module)">SerializerWithFallback</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_marshal_7_0'>marshal_7_0</span>]
  <span class='kw'>when</span> <span class='float'>7.1</span>
    <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="SerializerWithFallback.html" title="ActiveSupport::Cache::SerializerWithFallback (module)">SerializerWithFallback</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_marshal_7_1'>marshal_7_1</span>]
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unrecognized ActiveSupport::Cache.format_version: </span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span>.<span class='id identifier rubyid_format_version'><a href="../Cache.html#format_version-class_method" title="ActiveSupport::Cache.format_version (method)">format_version</a></span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete-instance_method">
  <h3 class='signature '>
    #<strong>delete</strong>(name, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes an entry in the cache. Returns <code>true</code> if an entry is deleted and <code>false</code> otherwise.</p>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L686-L693'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='686' data-end='693'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 686</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

  <span class='id identifier rubyid_instrument'><a href="#instrument-instance_method" title="ActiveSupport::Cache::Store#instrument (method)">instrument</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_delete'>delete</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_delete_entry'><a href="#delete_entry-instance_method" title="ActiveSupport::Cache::Store#delete_entry (method)">delete_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>delete_entry</strong>(key, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes an entry from the cache implementation. Subclasses must implement this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L897-L899'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='897' data-end='899'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 897</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_entry'>delete_entry</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_matched-instance_method">
  <h3 class='signature '>
    #<strong>delete_matched</strong>(matcher, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes all entries with keys matching the pattern.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>Some implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L732-L734'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='732' data-end='734'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 732</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_matched'>delete_matched</span>(<span class='id identifier rubyid_matcher'>matcher</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support delete_matched</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_multi-instance_method">
  <h3 class='signature '>
    #<strong>delete_multi</strong>(names, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes multiple entries in the cache. Returns the number of deleted entries.</p>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L699-L708'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='699' data-end='708'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 699</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_multi'>delete_multi</span>(<span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>return</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_map!'>map!</span> { <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) }

  <span class='id identifier rubyid_instrument_multi'><a href="#instrument_multi-instance_method" title="ActiveSupport::Cache::Store#instrument_multi (method)">instrument_multi</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_delete_multi'>delete_multi</span><span class='comma'>,</span> <span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_delete_multi_entries'><a href="#delete_multi_entries-instance_method" title="ActiveSupport::Cache::Store#delete_multi_entries (method)">delete_multi_entries</a></span>(<span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_multi_entries-instance_method">
  <h3 class='signature priv'>
    #<strong>delete_multi_entries</strong>(entries, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes multiples entries in the cache implementation. Subclasses MAY implement this method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L903-L905'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='903' data-end='905'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 903</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_multi_entries'>delete_multi_entries</span>(<span class='id identifier rubyid_entries'>entries</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_entries'>entries</span>.<span class='id identifier rubyid_count'>count</span> { <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_delete_entry'><a href="#delete_entry-instance_method" title="ActiveSupport::Cache::Store#delete_entry (method)">delete_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deserialize_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>deserialize_entry</strong>(payload)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L862-L866'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='862' data-end='866'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 862</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deserialize_entry'>deserialize_entry</span>(<span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='op'>**</span>)
  <span class='id identifier rubyid_payload'>payload</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='ivar'>@coder</span>.<span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_payload'>payload</span>)
<span class='kw'>rescue</span> <span class='const'><a href="../Cache.html#DeserializationError-constant" title="ActiveSupport::Cache::DeserializationError (constant)">DeserializationError</a></span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exist?-instance_method">
  <h3 class='signature '>
    #<strong>exist?</strong>(name, options = nil)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the cache contains an entry for the given key.</p>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L713-L721'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='713' data-end='721'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 713</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

  <span class='id identifier rubyid_instrument'><a href="#instrument-instance_method" title="ActiveSupport::Cache::Store#instrument (method)">instrument</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_exist?'>exist?</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'><a href="#read_entry-instance_method" title="ActiveSupport::Cache::Store#read_entry (method)">read_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>event:</span> <span class='id identifier rubyid_payload'>payload</span>)
    (<span class='id identifier rubyid_entry'>entry</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_expired?'>expired?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_mismatched?'>mismatched?</span>(<span class='id identifier rubyid_normalize_version'><a href="#normalize_version-instance_method" title="ActiveSupport::Cache::Store#normalize_version (method)">normalize_version</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>))) <span class='op'>||</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expand_and_namespace_key-instance_method">
  <h3 class='signature priv'>
    #<strong>expand_and_namespace_key</strong>(key, options = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L984-L989'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='984' data-end='989'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 984</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expand_and_namespace_key'>expand_and_namespace_key</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_str_key'>str_key</span> <span class='op'>=</span> <span class='id identifier rubyid_expanded_key'><a href="#expanded_key-instance_method" title="ActiveSupport::Cache::Store#expanded_key (method)">expanded_key</a></span>(<span class='id identifier rubyid_key'>key</span>)
  <span class='id identifier rubyid_raise'>raise</span>(<span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>key cannot be blank</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_str_key'>str_key</span> <span class='op'>||</span> <span class='id identifier rubyid_str_key'>str_key</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_namespace_key'><a href="#namespace_key-instance_method" title="ActiveSupport::Cache::Store#namespace_key (method)">namespace_key</a></span> <span class='id identifier rubyid_str_key'>str_key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expanded_key-instance_method">
  <h3 class='signature priv'>
    #<strong>expanded_key</strong>(key)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Expands key to be a consistent string value. Invokes <code>cache_key</code> if object responds to <code>cache_key</code>. Otherwise, <code>to_param</code> method will be called. If the key is a <a href="../../Hash.html" title="Hash (class)"><code>::Hash</code></a>, then keys will be sorted alphabetically.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1037-L1052'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1037' data-end='1052'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1037</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expanded_key'>expanded_key</span>(<span class='id identifier rubyid_key'>key</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_cache_key'>cache_key</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_cache_key'>cache_key</span>)

  <span class='kw'>case</span> <span class='id identifier rubyid_key'>key</span>
  <span class='kw'>when</span> <span class='const'><a href="../../Array.html" title="Array (class)">Array</a></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_collect'>collect</span> { <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span> <span class='id identifier rubyid_expanded_key'>expanded_key</span>(<span class='id identifier rubyid_element'>element</span>) }
    <span class='kw'>else</span>
      <span class='id identifier rubyid_expanded_key'>expanded_key</span>(<span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_first'>first</span>)
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>
    <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_collect'>collect</span> { <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'>v</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> }.<span class='id identifier rubyid_sort!'>sort!</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_key'>key</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_to_param'>to_param</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expanded_version-instance_method">
  <h3 class='signature priv'>
    #<strong>expanded_version</strong>(key)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1058-L1064'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1058' data-end='1064'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1058</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expanded_version'>expanded_version</span>(<span class='id identifier rubyid_key'>key</span>)
  <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_cache_version'>cache_version</span>) <span class='kw'>then</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_cache_version'>cache_version</span>.<span class='id identifier rubyid_to_param'>to_param</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Array.html" title="Array (class)">Array</a></span>)                <span class='kw'>then</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span> <span class='id identifier rubyid_expanded_version'>expanded_version</span>(<span class='id identifier rubyid_element'>element</span>) }.<span class='id identifier rubyid_tap'>tap</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_compact!'>compact!</span>).<span class='id identifier rubyid_to_param'>to_param</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_to_a'>to_a</span>)          <span class='kw'>then</span> <span class='id identifier rubyid_expanded_version'>expanded_version</span>(<span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_to_a'>to_a</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch-instance_method">
  <h3 class='signature '>
    #<strong>fetch</strong>(name, options = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Fetches data from the cache, using the given key. If there is data in the cache with the given key, then that data is returned.</p>

<p>If there is no such data in the cache (a cache miss), then <code>nil</code> will be returned. However, if a block has been passed, that block will be passed the key and executed in the event of a cache miss. The return value of the block will be written to the cache under the given cache key, and that return value will be returned.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Monday</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;Monday&quot;
</span>
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Duckburgh</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;Duckburgh&quot;</span></code></pre>

<h4 id="label-Options">Options</h4>

<p>Internally, <code>fetch</code> calls <a href="#read_entry-instance_method" title="ActiveSupport::Cache::Store#read_entry (method)">#read_entry</a>, and calls <a href="#write_entry-instance_method" title="ActiveSupport::Cache::Store#write_entry (method)">#write_entry</a> on a cache miss. Thus, <code>fetch</code> supports the same options as <a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">#read</a> and <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a>. Additionally, <code>fetch</code> supports the following options:</p>
<ul><li>
<p><code>force: true</code> - Forces a cache “miss,” meaning we treat the cache value as missing even if it’s present. Passing a block is required when <code>force</code> is true so this always results in a cache write.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Monday</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span>) { <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Tuesday</span><span class='tstring_end'>&#39;</span></span> } <span class='comment'># =&gt; &#39;Tuesday&#39;
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; ArgumentError</span></code></pre>

<p>The <code>:force</code> option is useful when you’re calling some other method to ask whether you should force a cache write. Otherwise, it’s clearer to just call <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a>.</p>
</li><li>
<p><code>skip_nil: true</code> - Prevents caching a nil result:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) { <span class='kw'>nil</span> }
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>skip_nil:</span> <span class='kw'>true</span>) { <span class='kw'>nil</span> }
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="ActiveSupport::Cache::Store#exist? (method)">exist?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="ActiveSupport::Cache::Store#exist? (method)">exist?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false</span></code></pre>
</li><li>
<p><code>:race_condition_ttl</code> - Specifies the number of seconds during which an expired value can be reused while a new value is being generated. This can be used to prevent race conditions when cache entries expire, by preventing multiple processes from simultaneously regenerating the same entry (also known as the dog pile effect).</p>

<p>When a process encounters a cache entry that has expired less than <code>:race_condition_ttl</code> seconds ago, it will bump the expiration time by <code>:race_condition_ttl</code> seconds before generating a new value. During this extended time window, while the process generates a new value, other processes will continue to use the old value. After the first process writes the new value, other processes will then use it.</p>

<p>If the first process errors out while generating a new value, another process can try to generate a new value after the extended time window has elapsed.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Set all values to expire after one second.
</span><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span>.<span class='id identifier rubyid_new'><a href="MemoryStore.html#new-class_method" title="ActiveSupport::Cache::MemoryStore.new (method)">new</a></span>(<span class='label'>expires_in:</span> <span class='int'>1</span>)

<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>original value</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_val_1'>val_1</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id identifier rubyid_val_2'>val_2</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;original value&quot;
</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span> <span class='comment'># wait until the cache expires
</span>
<span class='id identifier rubyid_t1'>t1</span> <span class='op'>=</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span> <span class='kw'>do</span>
  <span class='comment'># fetch does the following:
</span>  <span class='comment'># 1. gets an recent expired entry
</span>  <span class='comment'># 2. extends the expiry by 2 seconds (race_condition_ttl)
</span>  <span class='comment'># 3. regenerates the new value
</span>  <span class='id identifier rubyid_val_1'>val_1</span> <span class='op'>=</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>race_condition_ttl:</span> <span class='int'>2</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new value 1</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># Wait until t1 extends the expiry of the entry
</span><span class='comment'># but before generating the new value
</span><span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.1</span>

<span class='id identifier rubyid_val_2'>val_2</span> <span class='op'>=</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>race_condition_ttl:</span> <span class='int'>2</span>) <span class='kw'>do</span>
  <span class='comment'># This block won&#39;t be executed because t1 extended the expiry
</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new value 2</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_t1'>t1</span>.<span class='id identifier rubyid_join'>join</span>

<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_val_1'>val_1</span> <span class='comment'># =&gt; &quot;new value 1&quot;
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_val_2'>val_2</span> <span class='comment'># =&gt; &quot;original value&quot;
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;new value 1&quot;
</span>
<span class='comment'># The entry requires 3 seconds to expire (expires_in + race_condition_ttl)
</span><span class='comment'># We have waited 2 seconds already (sleep(1) + t1.join) thus we need to wait 1
</span><span class='comment'># more second to see the entry expire.
</span><span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span>

<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>
</li></ul>

<h4 id="label-Dynamic+Options">Dynamic Options</h4>

<p>In some cases it may be necessary to dynamically compute options based on the cached value. To support this, an <a href="WriteOptions.html" title="ActiveSupport::Cache::WriteOptions (class)"><code>WriteOptions</code></a> instance is passed as the second argument to the block. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>authentication-token:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='id identifier rubyid_authenticate_to_service'>authenticate_to_service</span>
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_expires_at'>expires_at</span> <span class='op'>=</span> <span class='id identifier rubyid_token'>token</span>.<span class='id identifier rubyid_expires_at'>expires_at</span>
  <span class='id identifier rubyid_token'>token</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L452-L488'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='452' data-end='488'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 452</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch'>fetch</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span>]
      <span class='id identifier rubyid_instrument'><a href="#instrument-instance_method" title="ActiveSupport::Cache::Store#instrument (method)">instrument</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
        <span class='id identifier rubyid_cached_entry'>cached_entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'><a href="#read_entry-instance_method" title="ActiveSupport::Cache::Store#read_entry (method)">read_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>event:</span> <span class='id identifier rubyid_payload'>payload</span>)
        <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_handle_expired_entry'><a href="#handle_expired_entry-instance_method" title="ActiveSupport::Cache::Store#handle_expired_entry (method)">handle_expired_entry</a></span>(<span class='id identifier rubyid_cached_entry'>cached_entry</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_mismatched?'>mismatched?</span>(<span class='id identifier rubyid_normalize_version'><a href="#normalize_version-instance_method" title="ActiveSupport::Cache::Store#normalize_version (method)">normalize_version</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>))
            <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='kw'>nil</span>
          <span class='kw'>else</span>
            <span class='kw'>begin</span>
              <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_value'>value</span>
            <span class='kw'>rescue</span> <span class='const'><a href="../Cache.html#DeserializationError-constant" title="ActiveSupport::Cache::DeserializationError (constant)">DeserializationError</a></span>
              <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_super_operation'>super_operation</span>] <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fetch'>fetch</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
        <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span>] <span class='op'>=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_entry'>entry</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='id identifier rubyid_get_entry_value'><a href="#get_entry_value-instance_method" title="ActiveSupport::Cache::Store#get_entry_value (method)">get_entry_value</a></span>(<span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_save_block_result_to_cache'><a href="#save_block_result_to_cache-instance_method" title="ActiveSupport::Cache::Store#save_block_result_to_cache (method)">save_block_result_to_cache</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing block: Calling `Cache#fetch` with `force: true` requires a block.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch_multi-instance_method">
  <h3 class='signature '>
    #<strong>fetch_multi</strong>(*names)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Fetches data from the cache, using the given keys. If there is data in the cache with the given keys, then that data is returned. Otherwise, the supplied block is called for each key for which there was no data, and the result will be written to the cache and returned. Therefore, you need to pass a block that returns the data to be written to the cache. If you do not want to write the cache when the cache is not found, use <a href="#read_multi-instance_method" title="ActiveSupport::Cache::Store#read_multi (method)">#read_multi</a>.</p>

<p>Returns a hash with the data for each of the names. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bim</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bam</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch_multi'>fetch_multi</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bim</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown_key</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fallback value for key: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='comment'># =&gt; { &quot;bim&quot; =&gt; &quot;bam&quot;,
</span><span class='comment'>#      &quot;unknown_key&quot; =&gt; &quot;Fallback value for key: unknown_key&quot; }</span></code></pre>

<p>You may also specify additional options via the <a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">#options</a> argument. See <a href="#fetch-instance_method" title="ActiveSupport::Cache::Store#fetch (method)">#fetch</a> for details. Other options are passed to the underlying cache implementation. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_fetch_multi'>fetch_multi</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fizz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>expires_in:</span> <span class='int'>5</span>.<span class='id identifier rubyid_seconds'>seconds</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>buzz</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='comment'># =&gt; {&quot;fizz&quot;=&gt;&quot;buzz&quot;}
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fizz</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; &quot;buzz&quot;
</span><span class='id identifier rubyid_sleep'>sleep</span>(<span class='int'>6</span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fizz</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L603-L632'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='603' data-end='632'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 603</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_multi'>fetch_multi</span>(<span class='op'>*</span><span class='id identifier rubyid_names'>names</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing block: `Cache#fetch_multi` requires a block.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>return</span> {} <span class='kw'>if</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_extract_options!'>extract_options!</span>
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_keys'>keys</span>    <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) }
  <span class='id identifier rubyid_writes'>writes</span>  <span class='op'>=</span> {}
  <span class='id identifier rubyid_ordered'>ordered</span> <span class='op'>=</span> <span class='id identifier rubyid_instrument_multi'><a href="#instrument_multi-instance_method" title="ActiveSupport::Cache::Store#instrument_multi (method)">instrument_multi</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_read_multi'><a href="#read_multi-instance_method" title="ActiveSupport::Cache::Store#read_multi (method)">read_multi</a></span><span class='comma'>,</span> <span class='id identifier rubyid_keys'>keys</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span>]
      <span class='id identifier rubyid_reads'>reads</span> <span class='op'>=</span> {}
    <span class='kw'>else</span>
      <span class='id identifier rubyid_reads'>reads</span> <span class='op'>=</span> <span class='id identifier rubyid_read_multi_entries'><a href="#read_multi_entries-instance_method" title="ActiveSupport::Cache::Store#read_multi_entries (method)">read_multi_entries</a></span>(<span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
    <span class='kw'>end</span>

    <span class='id identifier rubyid_ordered'>ordered</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_index_with'>index_with</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
      <span class='id identifier rubyid_reads'>reads</span>.<span class='id identifier rubyid_fetch'><a href="#fetch-instance_method" title="ActiveSupport::Cache::Store#fetch (method)">fetch</a></span>(<span class='id identifier rubyid_name'>name</span>) { <span class='id identifier rubyid_writes'>writes</span>[<span class='id identifier rubyid_name'>name</span>] <span class='op'>=</span> <span class='kw'>yield</span>(<span class='id identifier rubyid_name'>name</span>) }
    <span class='kw'>end</span>
    <span class='id identifier rubyid_writes'>writes</span>.<span class='id identifier rubyid_compact!'>compact!</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_skip_nil'>skip_nil</span>]

    <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hits'>hits</span>] <span class='op'>=</span> <span class='id identifier rubyid_reads'>reads</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) }
    <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_super_operation'>super_operation</span>] <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fetch_multi'>fetch_multi</span>

    <span class='id identifier rubyid_ordered'>ordered</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_write_multi'><a href="#write_multi-instance_method" title="ActiveSupport::Cache::Store#write_multi (method)">write_multi</a></span>(<span class='id identifier rubyid_writes'>writes</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

  <span class='id identifier rubyid_ordered'>ordered</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_entry_value-instance_method">
  <h3 class='signature priv'>
    #<strong>get_entry_value</strong>(entry, name, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1111-L1114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1111' data-end='1114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1111</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_entry_value'>get_entry_value</span>(<span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_instrument'><a href="#instrument-instance_method" title="ActiveSupport::Cache::Store#instrument (method)">instrument</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_fetch_hit'>fetch_hit</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="handle_expired_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>handle_expired_entry</strong>(entry, key, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1095-L1109'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1095' data-end='1109'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1095</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_handle_expired_entry'>handle_expired_entry</span>(<span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_expired?'>expired?</span>
    <span class='id identifier rubyid_race_ttl'>race_ttl</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_race_condition_ttl'>race_condition_ttl</span>].<span class='id identifier rubyid_to_i'>to_i</span>
    <span class='kw'>if</span> (<span class='id identifier rubyid_race_ttl'>race_ttl</span> <span class='op'>&gt;</span> <span class='int'>0</span>) <span class='op'>&amp;&amp;</span> (<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>-</span> <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_expires_at'>expires_at</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_race_ttl'>race_ttl</span>)
      <span class='comment'># When an entry has a positive :race_condition_ttl defined, put the stale entry back into the cache
</span>      <span class='comment'># for a brief period while the entry is being recalculated.
</span>      <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_expires_at'>expires_at</span> <span class='op'>=</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>+</span> <span class='id identifier rubyid_race_ttl'>race_ttl</span>
      <span class='id identifier rubyid_write_entry'><a href="#write_entry-instance_method" title="ActiveSupport::Cache::Store#write_entry (method)">write_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>expires_in:</span> <span class='id identifier rubyid_race_ttl'>race_ttl</span> <span class='op'>*</span> <span class='int'>2</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_delete_entry'><a href="#delete_entry-instance_method" title="ActiveSupport::Cache::Store#delete_entry (method)">delete_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
    <span class='kw'>end</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_entry'>entry</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="handle_invalid_expires_in-instance_method">
  <h3 class='signature priv'>
    #<strong>handle_invalid_expires_in</strong>(message)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L937-L945'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='937' data-end='945'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 937</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_handle_invalid_expires_in'>handle_invalid_expires_in</span>(<span class='id identifier rubyid_message'>message</span>)
  <span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='id identifier rubyid_message'>message</span>)
  <span class='kw'>if</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'>Store</span>.<span class='id identifier rubyid_raise_on_invalid_cache_expiration_time'><a href="#raise_on_invalid_cache_expiration_time-class_method" title="ActiveSupport::Cache::Store.raise_on_invalid_cache_expiration_time (method)">raise_on_invalid_cache_expiration_time</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_error'>error</span>
  <span class='kw'>else</span>
    <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span>.<span class='id identifier rubyid_error_reporter'><a href="../../ActiveSupport.html#error_reporter-instance_method" title="ActiveSupport#error_reporter (method)">error_reporter</a></span><span class='op'>&amp;.</span><span class='id identifier rubyid_report'>report</span>(<span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='label'>handled:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>severity:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_warning'>warning</span>)
    <span class='id identifier rubyid_logger'><a href="#logger-class_method" title="ActiveSupport::Cache::Store.logger (method)">logger</a></span>.<span class='id identifier rubyid_error'>error</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span>.<span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_logger'><a href="#logger-class_method" title="ActiveSupport::Cache::Store.logger (method)">logger</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="increment-instance_method">
  <h3 class='signature '>
    #<strong>increment</strong>(name, amount = 1, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Increments an integer value in the cache.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>Some implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L741-L743'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='741' data-end='743'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 741</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_increment'>increment</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support increment</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instrument-instance_method">
  <h3 class='signature priv'>
    #<strong>instrument</strong>(operation, key, options = nil, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1066-L1068'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1066' data-end='1068'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1066</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instrument'>instrument</span>(<span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid__instrument'><a href="#_instrument-instance_method" title="ActiveSupport::Cache::Store#_instrument (method)">_instrument</a></span>(<span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='label'>key:</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instrument_multi-instance_method">
  <h3 class='signature priv'>
    #<strong>instrument_multi</strong>(operation, keys, options = nil, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1070-L1072'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1070' data-end='1072'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1070</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instrument_multi'>instrument_multi</span>(<span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_keys'>keys</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid__instrument'><a href="#_instrument-instance_method" title="ActiveSupport::Cache::Store#_instrument (method)">_instrument</a></span>(<span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='label'>multi:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>key:</span> <span class='id identifier rubyid_keys'>keys</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="key_matcher-instance_method">
  <h3 class='signature priv'>
    #<strong>key_matcher</strong>(pattern, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds the namespace defined in the options to a pattern designed to match keys. Implementations that support delete_matched should call this method to translate a pattern that matches names into one that matches namespaced keys.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L826-L839'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='826' data-end='839'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 826</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_key_matcher'>key_matcher</span>(<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='comment'># :doc:
</span>  <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>].<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Proc</span>) <span class='op'>?</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>].<span class='id identifier rubyid_call'>call</span> <span class='op'>:</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>]
  <span class='kw'>if</span> <span class='id identifier rubyid_prefix'>prefix</span>
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_source'>source</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^</span><span class='tstring_end'>&quot;</span></span>)
      <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>[<span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_length'>length</span>]
    <span class='kw'>else</span>
      <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.*</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_source'>source</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_length'>length</span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='const'><a href="../../Regexp.html" title="Regexp (class)">Regexp</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../Regexp.html" title="Regexp (class)">Regexp</a></span>.<span class='id identifier rubyid_escape'>escape</span>(<span class='id identifier rubyid_prefix'>prefix</span>)<span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_source'>source</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pattern'>pattern</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="merged_options-instance_method">
  <h3 class='signature priv'>
    #<strong>merged_options</strong>(call_options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Merges the default options with ones specific to a method call.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L908-L935'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='908' data-end='935'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 908</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merged_options'>merged_options</span>(<span class='id identifier rubyid_call_options'>call_options</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_call_options'>call_options</span>
    <span class='id identifier rubyid_call_options'>call_options</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_options'><a href="#normalize_options-instance_method" title="ActiveSupport::Cache::Store#normalize_options (method)">normalize_options</a></span>(<span class='id identifier rubyid_call_options'>call_options</span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_call_options'>call_options</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_expires_in'>expires_in</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_call_options'>call_options</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_expires_at'>expires_at</span>)
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Either :expires_in or :expires_at can be supplied, but not both</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_expires_at'>expires_at</span> <span class='op'>=</span> <span class='id identifier rubyid_call_options'>call_options</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_expires_at'>expires_at</span>)
    <span class='id identifier rubyid_call_options'>call_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_expires_in'>expires_in</span>] <span class='op'>=</span> (<span class='id identifier rubyid_expires_at'>expires_at</span> <span class='op'>-</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span>) <span class='kw'>if</span> <span class='id identifier rubyid_expires_at'>expires_at</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_call_options'>call_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_expires_in'>expires_in</span>].<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span>)
      <span class='id identifier rubyid_expires_in'>expires_in</span> <span class='op'>=</span> <span class='id identifier rubyid_call_options'>call_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_expires_in'>expires_in</span>]
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expires_in parameter should not be a Time. Did you mean to use expires_at? Got: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expires_in'>expires_in</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_call_options'>call_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_expires_in'>expires_in</span>]<span class='op'>&amp;.</span><span class='id identifier rubyid_negative?'>negative?</span>
      <span class='id identifier rubyid_expires_in'>expires_in</span> <span class='op'>=</span> <span class='id identifier rubyid_call_options'>call_options</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">delete</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_expires_in'>expires_in</span>)
      <span class='id identifier rubyid_handle_invalid_expires_in'><a href="#handle_invalid_expires_in-instance_method" title="ActiveSupport::Cache::Store#handle_invalid_expires_in (method)">handle_invalid_expires_in</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cache expiration time is invalid, cannot be negative: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expires_in'>expires_in</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_call_options'>call_options</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_call_options'>call_options</span>)
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mute-instance_method">
  <h3 class='signature '>
    #<strong>mute</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Silences the logger within a block.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L330-L335'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='330' data-end='335'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 330</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mute'>mute</span>
  <span class='id identifier rubyid_previous_silence'>previous_silence</span><span class='comma'>,</span> <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='ivar'>@silence</span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_silence'>previous_silence</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="namespace_key-instance_method">
  <h3 class='signature priv'>
    #<strong>namespace_key</strong>(key, call_options = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Prefix the key with a namespace string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace_key'>namespace_key</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>namespace:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cache</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># =&gt; &#39;cache:foo&#39;</span></code></pre>

<p>With a namespace block:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace_key'>namespace_key</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>namespace:</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cache</span><span class='tstring_end'>&#39;</span></span> }
<span class='comment'># =&gt; &#39;cache:foo&#39;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1012-L1032'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1012' data-end='1032'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1012</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_namespace_key'>namespace_key</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_call_options'>call_options</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_call_options'>call_options</span><span class='op'>&amp;.</span><span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>)
    <span class='id identifier rubyid_call_options'>call_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>]
  <span class='kw'>else</span>
    <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>]
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_call'>call</span>)
    <span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>.<span class='id identifier rubyid_call'>call</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>!=</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span>)
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="ActiveSupport::Cache::Store#namespace (method)">namespace</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_key'>key</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new_entry-instance_method">
  <h3 class='signature nodoc'>
    #<strong>new_entry</strong>(value, options = nil)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L723-L725'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='723' data-end='725'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 723</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new_entry'>new_entry</span>(<span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>) <span class='comment'># :nodoc:
</span>  <span class='const'><a href="Entry.html" title="ActiveSupport::Cache::Entry (class)">Entry</a></span>.<span class='id identifier rubyid_new'><a href="Entry.html#new-class_method" title="ActiveSupport::Cache::Entry.new (method)">new</a></span>(<span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_key-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_key</strong>(key, options = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Expands, namespaces and truncates the cache key. Raises an exception when the key is <code>nil</code> or an empty string. May be overridden by cache stores to do additional normalization.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L979-L982'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='979' data-end='982'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 979</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_key'>normalize_key</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_expand_and_namespace_key'><a href="#expand_and_namespace_key-instance_method" title="ActiveSupport::Cache::Store#expand_and_namespace_key (method)">expand_and_namespace_key</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_truncate_key'><a href="#truncate_key-instance_method" title="ActiveSupport::Cache::Store#truncate_key (method)">truncate_key</a></span>(<span class='id identifier rubyid_key'>key</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_options-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_options</strong>(options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Normalize aliased options to their canonical form</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L948-L957'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='948' data-end='957'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 948</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_options'>normalize_options</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='const'><a href="../Cache.html#OPTION_ALIASES-constant" title="ActiveSupport::Cache::OPTION_ALIASES (constant)">OPTION_ALIASES</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_canonical_name'>canonical_name</span><span class='comma'>,</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='op'>|</span>
    <span class='id identifier rubyid_alias_key'>alias_key</span> <span class='op'>=</span> <span class='id identifier rubyid_aliases'>aliases</span>.<span class='id identifier rubyid_detect'>detect</span> { <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_key'>key</span>) }
    <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='id identifier rubyid_canonical_name'>canonical_name</span>] <span class='op'>||=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='id identifier rubyid_alias_key'>alias_key</span>] <span class='kw'>if</span> <span class='id identifier rubyid_alias_key'>alias_key</span>
    <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_except!'>except!</span>(<span class='op'>*</span><span class='id identifier rubyid_aliases'>aliases</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_version-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_version</strong>(key, options = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1054-L1056'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1054' data-end='1056'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1054</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_version'>normalize_version</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  (<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_version'><a href="../../ActiveSupport.html#version-class_method" title="ActiveSupport.version (method)">version</a></span>].<span class='id identifier rubyid_try'>try</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_to_param'>to_param</span>)) <span class='op'>||</span> <span class='id identifier rubyid_expanded_version'><a href="#expanded_version-instance_method" title="ActiveSupport::Cache::Store#expanded_version (method)">expanded_version</a></span>(<span class='id identifier rubyid_key'>key</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-instance_method">
  <h3 class='signature '>
    #<strong>read</strong>(name, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads data from the cache, using the given key. If there is data in the cache with the given key, then that data is returned. Otherwise, <code>nil</code> is returned.</p>

<p>Note, if data was written with the <code>:expires_in</code> or <code>:version</code> options, both of these conditions are applied before the data is returned.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p><code>:namespace</code> - Replace the store namespace for this call.</p>
</li><li>
<p><code>:version</code> - Specifies a version for the cache entry. If the cached version does not match the requested version, the read will be treated as a cache miss. This feature is used to support recyclable cache keys.</p>
</li></ul>

<p>Other options will be handled by the specific cache store implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L506-L536'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='506' data-end='536'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 506</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_key'>key</span>     <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_version'><a href="../../ActiveSupport.html#version-class_method" title="ActiveSupport.version (method)">version</a></span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_version'><a href="#normalize_version-instance_method" title="ActiveSupport::Cache::Store#normalize_version (method)">normalize_version</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

  <span class='id identifier rubyid_instrument'><a href="#instrument-instance_method" title="ActiveSupport::Cache::Store#instrument (method)">instrument</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_read'>read</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'><a href="#read_entry-instance_method" title="ActiveSupport::Cache::Store#read_entry (method)">read_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>event:</span> <span class='id identifier rubyid_payload'>payload</span>)

    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_expired?'>expired?</span>
        <span class='id identifier rubyid_delete_entry'><a href="#delete_entry-instance_method" title="ActiveSupport::Cache::Store#delete_entry (method)">delete_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
        <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span>] <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
        <span class='kw'>nil</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_mismatched?'>mismatched?</span>(<span class='id identifier rubyid_version'><a href="../../ActiveSupport.html#version-class_method" title="ActiveSupport.version (method)">version</a></span>)
        <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span>] <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
        <span class='kw'>nil</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span>] <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
        <span class='kw'>begin</span>
          <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_value'>value</span>
        <span class='kw'>rescue</span> <span class='const'><a href="../Cache.html#DeserializationError-constant" title="ActiveSupport::Cache::DeserializationError (constant)">DeserializationError</a></span>
          <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span>] <span class='op'>=</span> <span class='kw'>false</span>
          <span class='kw'>nil</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span>] <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
      <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_counter-instance_method">
  <h3 class='signature '>
    #<strong>read_counter</strong>(name, **options)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a counter that was set by <a href="#increment-instance_method" title="ActiveSupport::Cache::Store#increment (method)">#increment</a> / <a href="#decrement-instance_method" title="ActiveSupport::Cache::Store#decrement (method)">#decrement</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write_counter'><a href="#write_counter-instance_method" title="ActiveSupport::Cache::Store#write_counter (method)">write_counter</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read_counter'>read_counter</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_increment'><a href="#increment-instance_method" title="ActiveSupport::Cache::Store#increment (method)">increment</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read_counter'>read_counter</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 2</span></code></pre>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L762-L765'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='762' data-end='765'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 762</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_counter'>read_counter</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>).<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>raw:</span> <span class='kw'>true</span>)
  <span class='id identifier rubyid_read'><a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">read</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)<span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>read_entry</strong>(key, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads an entry from the cache implementation. Subclasses must implement this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L843-L845'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='843' data-end='845'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 843</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_entry'>read_entry</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_multi-instance_method">
  <h3 class='signature '>
    #<strong>read_multi</strong>(*names)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads multiple values at once from the cache. Options can be passed in the last argument.</p>

<p>Some cache implementation may optimize this method.</p>

<p>Returns a hash mapping the names provided to the values found.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L544-L556'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='544' data-end='556'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 544</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_multi'>read_multi</span>(<span class='op'>*</span><span class='id identifier rubyid_names'>names</span>)
  <span class='kw'>return</span> {} <span class='kw'>if</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_extract_options!'>extract_options!</span>
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_keys'>keys</span>    <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) }

  <span class='id identifier rubyid_instrument_multi'><a href="#instrument_multi-instance_method" title="ActiveSupport::Cache::Store#instrument_multi (method)">instrument_multi</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_read_multi'>read_multi</span><span class='comma'>,</span> <span class='id identifier rubyid_keys'>keys</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
    <span class='id identifier rubyid_read_multi_entries'><a href="#read_multi_entries-instance_method" title="ActiveSupport::Cache::Store#read_multi_entries (method)">read_multi_entries</a></span>(<span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>event:</span> <span class='id identifier rubyid_payload'>payload</span>).<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_results'>results</span><span class='op'>|</span>
      <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hits'>hits</span>] <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) }
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_multi_entries-instance_method">
  <h3 class='signature priv'>
    #<strong>read_multi_entries</strong>(names, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads multiple entries from the cache implementation. Subclasses MAY implement this method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L870-L885'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='870' data-end='885'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 870</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_multi_entries'>read_multi_entries</span>(<span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_each_with_object'>each_with_object</span>({}) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_results'>results</span><span class='op'>|</span>
    <span class='id identifier rubyid_key'>key</span>   <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'><a href="#read_entry-instance_method" title="ActiveSupport::Cache::Store#read_entry (method)">read_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_entry'>entry</span>

    <span class='id identifier rubyid_version'><a href="../../ActiveSupport.html#version-class_method" title="ActiveSupport.version (method)">version</a></span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_version'><a href="#normalize_version-instance_method" title="ActiveSupport::Cache::Store#normalize_version (method)">normalize_version</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_expired?'>expired?</span>
      <span class='id identifier rubyid_delete_entry'><a href="#delete_entry-instance_method" title="ActiveSupport::Cache::Store#delete_entry (method)">delete_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_mismatched?'>mismatched?</span>(<span class='id identifier rubyid_version'><a href="../../ActiveSupport.html#version-class_method" title="ActiveSupport.version (method)">version</a></span>)
      <span class='id identifier rubyid_results'>results</span>[<span class='id identifier rubyid_name'>name</span>] <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span>.<span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="save_block_result_to_cache-instance_method">
  <h3 class='signature priv'>
    #<strong>save_block_result_to_cache</strong>(name, key, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L1116-L1125'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1116' data-end='1125'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 1116</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_save_block_result_to_cache'>save_block_result_to_cache</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_dup'>dup</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_instrument'><a href="#instrument-instance_method" title="ActiveSupport::Cache::Store#instrument (method)">instrument</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_generate'>generate</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>do</span>
    <span class='kw'>yield</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='const'><a href="WriteOptions.html" title="ActiveSupport::Cache::WriteOptions (class)">WriteOptions</a></span>.<span class='id identifier rubyid_new'><a href="WriteOptions.html#new-class_method" title="ActiveSupport::Cache::WriteOptions.new (method)">new</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>))
  <span class='kw'>end</span>

  <span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_skip_nil'>skip_nil</span>]
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="serialize_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>serialize_entry</strong>(entry, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L853-L860'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='853' data-end='860'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 853</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_serialize_entry'>serialize_entry</span>(<span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>if</span> <span class='ivar'>@coder_supports_compression</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_compress'>compress</span>]
    <span class='ivar'>@coder</span>.<span class='id identifier rubyid_dump_compressed'>dump_compressed</span>(<span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_compress_threshold'>compress_threshold</span>])
  <span class='kw'>else</span>
    <span class='ivar'>@coder</span>.<span class='id identifier rubyid_dump'>dump</span>(<span class='id identifier rubyid_entry'>entry</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="silence-instance_method">
  <h3 class='signature ro'>
    #<strong>silence</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#silence?</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L200-L200'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='200' data-end='200'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 200</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence'>silence</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="silence!-instance_method">
  <h3 class='signature '>
    #<strong>silence!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Silences the logger.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L324-L327'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='324' data-end='327'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 324</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_silence!'>silence!</span>
  <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="truncate_key-instance_method">
  <h3 class='signature priv'>
    #<strong>truncate_key</strong>(key)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L991-L1001'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='991' data-end='1001'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 991</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_truncate_key'>truncate_key</span>(<span class='id identifier rubyid_key'>key</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@max_key_size</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='ivar'>@max_key_size</span>
    <span class='id identifier rubyid_suffix'>suffix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:hash:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Digest.html" title="ActiveSupport::Digest (class)">Digest</a></span>.<span class='id identifier rubyid_hexdigest'><a href="../Digest.html#hexdigest-class_method" title="ActiveSupport::Digest.hexdigest (method)">hexdigest</a></span>(<span class='id identifier rubyid_key'>key</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_truncate_at'>truncate_at</span> <span class='op'>=</span> <span class='ivar'>@max_key_size</span> <span class='op'>-</span> <span class='id identifier rubyid_suffix'>suffix</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_truncate_at'>truncate_at</span>)
    <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_scrub!'>scrub!</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_suffix'>suffix</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_key'>key</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_options-instance_method">
  <h3 class='signature priv'>
    #<strong>validate_options</strong>(options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L959-L974'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='959' data-end='974'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 959</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_options'>validate_options</span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_coder'>coder</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_serializer'>serializer</span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot specify :serializer and :coder options together</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_coder'>coder</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_compressor'>compressor</span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot specify :compressor and :coder options together</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span>.<span class='id identifier rubyid_format_version'><a href="../Cache.html#format_version-class_method" title="ActiveSupport::Cache.format_version (method)">format_version</a></span> <span class='op'>&lt;</span> <span class='float'>7.1</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_serializer'>serializer</span>] <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_compressor'>compressor</span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot specify :compressor option when using</span><span class='tstring_end'>&quot;</span></span> \
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> default serializer and cache format version is &lt; 7.1</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write-instance_method">
  <h3 class='signature '>
    #<strong>write</strong>(name, value, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the value to the cache with the key. The value must be supported by the <code>coder</code>‘s <code>dump</code> and <code>load</code> methods.</p>

<p>Returns <code>true</code> if the write succeeded, <code>nil</code> if there was an error talking to the cache backend, or <code>false</code> if the write failed for another reason.</p>

<p>By default, cache entries larger than 1kB are compressed. Compression allows more data to be stored in the same memory footprint, leading to fewer cache evictions and higher hit rates.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p><code>compress: false</code> - Disables compression of the cache entry.</p>
</li><li>
<p><code>:compress_threshold</code> - The compression threshold, specified in bytes. Cache entries larger than this threshold will be compressed. Defaults to <code>1.kilobyte</code>.</p>
</li><li>
<p><code>:expires_in</code> - Sets a relative expiration time for the cache entry, specified in seconds. <code>:expire_in</code> and <code>:expired_in</code> are aliases for <code>:expires_in</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span>.<span class='id identifier rubyid_new'><a href="MemoryStore.html#new-class_method" title="ActiveSupport::Cache::MemoryStore.new (method)">new</a></span>(<span class='label'>expires_in:</span> <span class='int'>5</span>.<span class='id identifier rubyid_minutes'>minutes</span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='label'>expires_in:</span> <span class='int'>1</span>.<span class='id identifier rubyid_minute'>minute</span>) <span class='comment'># Set a lower value for one entry</span></code></pre>
</li><li>
<p><code>:expires_at</code> - Sets an absolute expiration time for the cache entry.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span>.<span class='id identifier rubyid_new'><a href="MemoryStore.html#new-class_method" title="ActiveSupport::Cache::MemoryStore.new (method)">new</a></span>
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='label'>expires_at:</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_at_end_of_hour'>at_end_of_hour</span>)</code></pre>
</li><li>
<p><code>:version</code> - Specifies a version for the cache entry. When reading from the cache, if the cached version does not match the requested version, the read will be treated as a cache miss. This feature is used to support recyclable cache keys.</p>
</li><li>
<p><code>:unless_exist</code> - Prevents overwriting an existing cache entry.</p>
</li></ul>

<p>Other options will be handled by the specific cache store implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L672-L680'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='672' data-end='680'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 672</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)

  <span class='id identifier rubyid_instrument'><a href="#instrument-instance_method" title="ActiveSupport::Cache::Store#instrument (method)">instrument</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_write'>write</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='const'><a href="Entry.html" title="ActiveSupport::Cache::Entry (class)">Entry</a></span>.<span class='id identifier rubyid_new'><a href="Entry.html#new-class_method" title="ActiveSupport::Cache::Entry.new (method)">new</a></span>(<span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>version:</span> <span class='id identifier rubyid_normalize_version'><a href="#normalize_version-instance_method" title="ActiveSupport::Cache::Store#normalize_version (method)">normalize_version</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>))
    <span class='id identifier rubyid_write_entry'><a href="#write_entry-instance_method" title="ActiveSupport::Cache::Store#write_entry (method)">write_entry</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_counter-instance_method">
  <h3 class='signature '>
    #<strong>write_counter</strong>(name, value, **options)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes a counter that can then be modified by <a href="#increment-instance_method" title="ActiveSupport::Cache::Store#increment (method)">#increment</a> / <a href="#decrement-instance_method" title="ActiveSupport::Cache::Store#decrement (method)">#decrement</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_write_counter'>write_counter</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read_counter'><a href="#read_counter-instance_method" title="ActiveSupport::Cache::Store#read_counter (method)">read_counter</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_increment'><a href="#increment-instance_method" title="ActiveSupport::Cache::Store#increment (method)">increment</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_read_counter'><a href="#read_counter-instance_method" title="ActiveSupport::Cache::Store#read_counter (method)">read_counter</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 2</span></code></pre>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L775-L778'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='775' data-end='778'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 775</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_counter'>write_counter</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>).<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>raw:</span> <span class='kw'>true</span>)
  <span class='id identifier rubyid_write'><a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">write</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>write_entry</strong>(key, entry, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes an entry to the cache implementation. Subclasses must implement this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L849-L851'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='849' data-end='851'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 849</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_entry'>write_entry</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveSupport::Cache::Store.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_multi-instance_method">
  <h3 class='signature '>
    #<strong>write_multi</strong>(hash, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../Cache.html" title="ActiveSupport::Cache (module)"><code>::ActiveSupport::Cache</code></a> Storage API to write multiple values at once.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L559-L572'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='559' data-end='572'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 559</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_multi'>write_multi</span>(<span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_hash'>hash</span> <span class='kw'>if</span> <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'><a href="#merged_options-instance_method" title="ActiveSupport::Cache::Store#merged_options (method)">merged_options</a></span>(<span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_normalized_hash'>normalized_hash</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_transform_keys'>transform_keys</span> { <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>) }

  <span class='id identifier rubyid_instrument_multi'><a href="#instrument_multi-instance_method" title="ActiveSupport::Cache::Store#instrument_multi (method)">instrument_multi</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_write_multi'>write_multi</span><span class='comma'>,</span> <span class='id identifier rubyid_normalized_hash'>normalized_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
    <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_each_with_object'>each_with_object</span>({}) <span class='kw'>do</span> <span class='op'>|</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)<span class='comma'>,</span> <span class='id identifier rubyid_memo'>memo</span><span class='op'>|</span>
      <span class='id identifier rubyid_memo'>memo</span>[<span class='id identifier rubyid_normalize_key'><a href="#normalize_key-instance_method" title="ActiveSupport::Cache::Store#normalize_key (method)">normalize_key</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)] <span class='op'>=</span> <span class='const'><a href="Entry.html" title="ActiveSupport::Cache::Entry (class)">Entry</a></span>.<span class='id identifier rubyid_new'><a href="Entry.html#new-class_method" title="ActiveSupport::Cache::Entry.new (method)">new</a></span>(<span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>version:</span> <span class='id identifier rubyid_normalize_version'><a href="#normalize_version-instance_method" title="ActiveSupport::Cache::Store#normalize_version (method)">normalize_version</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>))
    <span class='kw'>end</span>

    <span class='id identifier rubyid_write_multi_entries'><a href="#write_multi_entries-instance_method" title="ActiveSupport::Cache::Store#write_multi_entries (method)">write_multi_entries</a></span> <span class='id identifier rubyid_entries'>entries</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_multi_entries-instance_method">
  <h3 class='signature priv'>
    #<strong>write_multi_entries</strong>(hash, **options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes multiple entries to the cache implementation. Subclasses MAY implement this method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/cache.rb#L889-L893'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='889' data-end='893'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 889</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_multi_entries'>write_multi_entries</span>(<span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>)
  <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
    <span class='id identifier rubyid_write_entry'><a href="#write_entry-instance_method" title="ActiveSupport::Cache::Store#write_entry (method)">write_entry</a></span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'><a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">options</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>