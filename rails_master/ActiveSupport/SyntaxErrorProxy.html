<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Exception: ActiveSupport::SyntaxErrorProxy &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveSupport::SyntaxErrorProxy",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails main</a> &raquo; 
      <a href='../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>SyntaxErrorProxy&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Exception: ActiveSupport::SyntaxErrorProxy</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This class is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="SyntaxErrorProxy/BacktraceLocation.html" title="ActiveSupport::SyntaxErrorProxy::BacktraceLocation (class)"><code>BacktraceLocation</code></a>,
        <a class='nodoc' href="SyntaxErrorProxy/BacktraceLocationProxy.html" title="ActiveSupport::SyntaxErrorProxy::BacktraceLocationProxy (class)"><code>BacktraceLocationProxy</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          SyntaxError
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          SyntaxError
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>SyntaxError</span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'>SyntaxError</li>
          <li class='next'>ActiveSupport::SyntaxErrorProxy</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/syntax_error_proxy.rb#L10'>activesupport/lib/active_support/syntax_error_proxy.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>This is a class for wrapping syntax errors.  The purpose of this class is to enhance the backtraces on SyntaxError exceptions to include the source location of the syntax error.  That way we can display the error source on error pages in development.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#backtrace-instance_method" title="#backtrace (instance method)">#<strong>backtrace</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#backtrace_locations-instance_method" title="#backtrace_locations (instance method)">#<strong>backtrace_locations</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#parse_message_for_trace-instance_method" title="#parse_message_for_trace (instance method)">#<strong>parse_message_for_trace</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="backtrace-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>backtrace</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/syntax_error_proxy.rb#L11-L13'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11' data-end='13'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/syntax_error_proxy.rb', line 11</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_backtrace'>backtrace</span>
  <span class='id identifier rubyid_parse_message_for_trace'><a href="#parse_message_for_trace-instance_method" title="ActiveSupport::SyntaxErrorProxy#parse_message_for_trace (method)">parse_message_for_trace</a></span> <span class='op'>+</span> <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="backtrace_locations-instance_method">
  <h3 class='signature nodoc'>
    #<strong>backtrace_locations</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/syntax_error_proxy.rb#L37-L47'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='37' data-end='47'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/syntax_error_proxy.rb', line 37</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_backtrace_locations'>backtrace_locations</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='kw'>super</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_parse_message_for_trace'><a href="#parse_message_for_trace-instance_method" title="ActiveSupport::SyntaxErrorProxy#parse_message_for_trace (method)">parse_message_for_trace</a></span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_trace'>trace</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_trace'>trace</span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(.?):(\d).*$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_captures'>captures</span>) <span class='op'>||</span> <span class='id identifier rubyid_trace'>trace</span>
    <span class='const'><a href="SyntaxErrorProxy/BacktraceLocation.html" title="ActiveSupport::SyntaxErrorProxy::BacktraceLocation (class)">BacktraceLocation</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='id identifier rubyid_trace'>trace</span>)
    <span class='comment'># We have to wrap these backtrace locations because we need the
</span>    <span class='comment'># spot information to come from the originating exception, not the
</span>    <span class='comment'># proxy object that&#39;s generating these
</span>  } <span class='op'>+</span> <span class='kw'>super</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_loc'>loc</span><span class='op'>|</span> <span class='const'><a href="SyntaxErrorProxy/BacktraceLocationProxy.html" title="ActiveSupport::SyntaxErrorProxy::BacktraceLocationProxy (class)">BacktraceLocationProxy</a></span>.<span class='id identifier rubyid_new'><a href="SyntaxErrorProxy/BacktraceLocationProxy.html#new-class_method" title="ActiveSupport::SyntaxErrorProxy::BacktraceLocationProxy.new (method)">new</a></span>(<span class='id identifier rubyid_loc'>loc</span><span class='comma'>,</span> <span class='kw'>self</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_message_for_trace-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>parse_message_for_trace</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activesupport/lib/active_support/syntax_error_proxy.rb#L50-L61'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='50' data-end='61'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/syntax_error_proxy.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_message_for_trace'>parse_message_for_trace</span>
  <span class='kw'>if</span> <span class='id identifier rubyid___getobj__'>__getobj__</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(eval</span><span class='tstring_end'>&quot;</span></span>)
    <span class='comment'># If the exception is coming from a call to eval, we need to keep
</span>    <span class='comment'># the path of the file in which eval was called to ensure we can
</span>    <span class='comment'># return the right source fragment to show the location of the
</span>    <span class='comment'># error
</span>    <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='id identifier rubyid___getobj__'>__getobj__</span>.<span class='id identifier rubyid_backtrace_locations'><a href="#backtrace_locations-instance_method" title="ActiveSupport::SyntaxErrorProxy#backtrace_locations (method)">backtrace_locations</a></span>[<span class='int'>0</span>]
    [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_lineno'>lineno</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___getobj__'>__getobj__</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>]
  <span class='kw'>else</span>
    <span class='id identifier rubyid___getobj__'>__getobj__</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>