<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActionView::Helpers::CaptureHelper &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActionView::Helpers::CaptureHelper",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails main</a> &raquo; 
      <a href='../../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../../ActionView.html" title="ActionView (module)">ActionView</a> &raquo; 
        <a class='nodoc' href="../Helpers.html" title="ActionView::Helpers (module)">Helpers</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>CaptureHelper&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActionView::Helpers::CaptureHelper</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a class='nodoc' href="../../ActionDispatch/DebugView.html" title="ActionDispatch::DebugView (class)"><code>::ActionDispatch::DebugView</code></a>,
          <a href="../Base.html" title="ActionView::Base (class)"><code>::ActionView::Base</code></a>,
          <a class='nodoc' href="../Helpers.html" title="ActionView::Helpers (module)"><code>::ActionView::Helpers</code></a>,
          <a href="AssetTagHelper.html" title="ActionView::Helpers::AssetTagHelper (module)"><code>AssetTagHelper</code></a>,
          <a class='nodoc' href="DateTimeSelector.html" title="ActionView::Helpers::DateTimeSelector (class)"><code>DateTimeSelector</code></a>,
          <a href="DebugHelper.html" title="ActionView::Helpers::DebugHelper (module)"><code>DebugHelper</code></a>,
          <a href="FormHelper.html" title="ActionView::Helpers::FormHelper (module)"><code>FormHelper</code></a>,
          <a href="FormOptionsHelper.html" title="ActionView::Helpers::FormOptionsHelper (module)"><code>FormOptionsHelper</code></a>,
          <a href="FormTagHelper.html" title="ActionView::Helpers::FormTagHelper (module)"><code>FormTagHelper</code></a>,
          <a href="TagHelper.html" title="ActionView::Helpers::TagHelper (module)"><code>TagHelper</code></a>,
          <a class='nodoc' href="TagHelper/TagBuilder.html" title="ActionView::Helpers::TagHelper::TagBuilder (class)"><code>TagHelper::TagBuilder</code></a>,
          <a class='nodoc' href="Tags/Base.html" title="ActionView::Helpers::Tags::Base (class)"><code>Tags::Base</code></a>,
          <a class='nodoc' href="Tags/CheckBox.html" title="ActionView::Helpers::Tags::CheckBox (class)"><code>Tags::CheckBox</code></a>,
          <a class='nodoc' href="Tags/CollectionCheckBoxes.html" title="ActionView::Helpers::Tags::CollectionCheckBoxes (class)"><code>Tags::CollectionCheckBoxes</code></a>,
          <a class='nodoc' href="Tags/CollectionRadioButtons.html" title="ActionView::Helpers::Tags::CollectionRadioButtons (class)"><code>Tags::CollectionRadioButtons</code></a>,
          <a class='nodoc' href="Tags/CollectionSelect.html" title="ActionView::Helpers::Tags::CollectionSelect (class)"><code>Tags::CollectionSelect</code></a>,
          <a class='nodoc' href="Tags/ColorField.html" title="ActionView::Helpers::Tags::ColorField (class)"><code>Tags::ColorField</code></a>,
          <a class='nodoc' href="Tags/DateField.html" title="ActionView::Helpers::Tags::DateField (class)"><code>Tags::DateField</code></a>,
          <a class='nodoc' href="Tags/DateSelect.html" title="ActionView::Helpers::Tags::DateSelect (class)"><code>Tags::DateSelect</code></a>,
          <a class='nodoc' href="Tags/DatetimeField.html" title="ActionView::Helpers::Tags::DatetimeField (class)"><code>Tags::DatetimeField</code></a>,
          <a class='nodoc' href="Tags/DatetimeLocalField.html" title="ActionView::Helpers::Tags::DatetimeLocalField (class)"><code>Tags::DatetimeLocalField</code></a>,
          <a class='nodoc' href="Tags/DatetimeSelect.html" title="ActionView::Helpers::Tags::DatetimeSelect (class)"><code>Tags::DatetimeSelect</code></a>,
          <a class='nodoc' href="Tags/EmailField.html" title="ActionView::Helpers::Tags::EmailField (class)"><code>Tags::EmailField</code></a>,
          <a class='nodoc' href="Tags/FileField.html" title="ActionView::Helpers::Tags::FileField (class)"><code>Tags::FileField</code></a>,
          <a class='nodoc' href="Tags/GroupedCollectionSelect.html" title="ActionView::Helpers::Tags::GroupedCollectionSelect (class)"><code>Tags::GroupedCollectionSelect</code></a>,
          <a class='nodoc' href="Tags/HiddenField.html" title="ActionView::Helpers::Tags::HiddenField (class)"><code>Tags::HiddenField</code></a>,
          <a class='nodoc' href="Tags/Label.html" title="ActionView::Helpers::Tags::Label (class)"><code>Tags::Label</code></a>,
          <a class='nodoc' href="Tags/MonthField.html" title="ActionView::Helpers::Tags::MonthField (class)"><code>Tags::MonthField</code></a>,
          <a class='nodoc' href="Tags/NumberField.html" title="ActionView::Helpers::Tags::NumberField (class)"><code>Tags::NumberField</code></a>,
          <a class='nodoc' href="Tags/PasswordField.html" title="ActionView::Helpers::Tags::PasswordField (class)"><code>Tags::PasswordField</code></a>,
          <a class='nodoc' href="Tags/RadioButton.html" title="ActionView::Helpers::Tags::RadioButton (class)"><code>Tags::RadioButton</code></a>,
          <a class='nodoc' href="Tags/RangeField.html" title="ActionView::Helpers::Tags::RangeField (class)"><code>Tags::RangeField</code></a>,
          <a class='nodoc' href="Tags/SearchField.html" title="ActionView::Helpers::Tags::SearchField (class)"><code>Tags::SearchField</code></a>,
          <a class='nodoc' href="Tags/Select.html" title="ActionView::Helpers::Tags::Select (class)"><code>Tags::Select</code></a>,
          <a class='nodoc' href="Tags/TelField.html" title="ActionView::Helpers::Tags::TelField (class)"><code>Tags::TelField</code></a>,
          <a class='nodoc' href="Tags/TextArea.html" title="ActionView::Helpers::Tags::TextArea (class)"><code>Tags::TextArea</code></a>,
          <a class='nodoc' href="Tags/TextField.html" title="ActionView::Helpers::Tags::TextField (class)"><code>Tags::TextField</code></a>,
          <a class='nodoc' href="Tags/TimeField.html" title="ActionView::Helpers::Tags::TimeField (class)"><code>Tags::TimeField</code></a>,
          <a class='nodoc' href="Tags/TimeSelect.html" title="ActionView::Helpers::Tags::TimeSelect (class)"><code>Tags::TimeSelect</code></a>,
          <a class='nodoc' href="Tags/TimeZoneSelect.html" title="ActionView::Helpers::Tags::TimeZoneSelect (class)"><code>Tags::TimeZoneSelect</code></a>,
          <a class='nodoc' href="Tags/UrlField.html" title="ActionView::Helpers::Tags::UrlField (class)"><code>Tags::UrlField</code></a>,
          <a class='nodoc' href="Tags/WeekField.html" title="ActionView::Helpers::Tags::WeekField (class)"><code>Tags::WeekField</code></a>,
          <a class='nodoc' href="Tags/WeekdaySelect.html" title="ActionView::Helpers::Tags::WeekdaySelect (class)"><code>Tags::WeekdaySelect</code></a>,
          <a href="TextHelper.html" title="ActionView::Helpers::TextHelper (module)"><code>TextHelper</code></a>,
          <a href="TranslationHelper.html" title="ActionView::Helpers::TranslationHelper (module)"><code>TranslationHelper</code></a>,
          <a href="UrlHelper.html" title="ActionView::Helpers::UrlHelper (module)"><code>UrlHelper</code></a>,
          <a href="../TestCase.html" title="ActionView::TestCase (class)"><code>::ActionView::TestCase</code></a>,
          <a href="../TestCase/Behavior.html" title="ActionView::TestCase::Behavior (module)"><code>::ActionView::TestCase::Behavior</code></a>
      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/actionview/lib/action_view/helpers/capture_helper.rb#L17'>actionview/lib/action_view/helpers/capture_helper.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-Action+View+Capture+Helpers">Action View Capture Helpers</h3>

<p>CaptureHelper exposes methods to let you extract generated markup which can be used in other parts of a template or layout file.</p>

<p>It provides a method to capture blocks into variables through <a href="#capture-instance_method" title="ActionView::Helpers::CaptureHelper#capture (method)">#capture</a> and a way to capture a block of markup for use in a layout through <a href="#content_for-instance_method" title="ActionView::Helpers::CaptureHelper#content_for (method)">#content_for</a>.</p>

<p>As well as provides a method when using streaming responses through <a href="#provide-instance_method" title="ActionView::Helpers::CaptureHelper#provide (method)">#provide</a>. See <a href="../../ActionController/Streaming.html" title="ActionController::Streaming (module)"><code>::ActionController::Streaming</code></a> for more information.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#capture-instance_method" title="#capture (instance method)">#<strong>capture</strong>(*args, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The capture method extracts part of a template as a string object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#content_for-instance_method" title="#content_for (instance method)">#<strong>content_for</strong>(name, content = nil, options = {}, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calling <code>content_for</code> stores a block of markup in an identifier for later use.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#content_for%3F-instance_method" title="#content_for? (instance method)">#<strong>content_for?</strong>(name)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><code>content_for?</code> checks whether any content has been captured yet using <a href="#content_for-instance_method" title="ActionView::Helpers::CaptureHelper#content_for (method)">#content_for</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#provide-instance_method" title="#provide (instance method)">#<strong>provide</strong>(name, content = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The same as <a href="#content_for-instance_method" title="ActionView::Helpers::CaptureHelper#content_for (method)">#content_for</a> but when used with streaming flushes straight back to the layout.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#with_output_buffer-instance_method" title="#with_output_buffer (instance method)">#<strong>with_output_buffer</strong>(buf = nil)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Use an alternate output buffer for the duration of the block.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="capture-instance_method">
  <h3 class='signature  first'>
    #<strong>capture</strong>(*args, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The capture method extracts part of a template as a string object. You can then use this object anywhere in your templates, layout, or helpers.</p>

<p>The capture method can be used in ERB templates…</p>

<pre class="code xml"><code class="xml">&lt;% @greeting = capture do %&gt;
  Welcome to my shiny new web page!  The date and time is
  &lt;%= Time.now %&gt;
&lt;% end %&gt;
</code></pre>

<p>…and Builder (RXML) templates.</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@timestamp</span> <span class='op'>=</span> <span class='id identifier rubyid_capture'>capture</span> <span class='kw'>do</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The current timestamp is </span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>You can then use that variable anywhere else. For example:</p>

<pre class="code xml"><code class="xml">&lt;html&gt;
&lt;head&gt;&lt;title&gt;&lt;%= @greeting %&gt;&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;b&gt;&lt;%= @greeting %&gt;&lt;/b&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The return of capture is the string generated by the block. For Example:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@greeting</span> <span class='comment'># =&gt; &quot;Welcome to my shiny new web page! The date and time is 2018-09-06 11:09:16 -0500&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/actionview/lib/action_view/helpers/capture_helper.rb#L47-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='47' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/helpers/capture_helper.rb', line 47</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_capture'>capture</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@output_buffer</span> <span class='op'>||=</span> <span class='const'><a href="../../ActionView.html" title="ActionView (module)">ActionView</a></span><span class='op'>::</span><span class='const'><a href="../OutputBuffer.html" title="ActionView::OutputBuffer (class)">OutputBuffer</a></span>.<span class='id identifier rubyid_new'><a href="../OutputBuffer.html#new-class_method" title="ActionView::OutputBuffer.new (method)">new</a></span>
  <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='ivar'>@output_buffer</span>.<span class='id identifier rubyid_capture'>capture</span> { <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>yield</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>) }

  <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='ivar'>@output_buffer</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_value'>value</span>)
    <span class='id identifier rubyid_buffer'>buffer</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_buffer'>buffer</span>.<span class='id identifier rubyid_presence'>presence</span> <span class='op'>||</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_string'>string</span>
  <span class='kw'>when</span> <span class='const'><a href="../OutputBuffer.html" title="ActionView::OutputBuffer (class)">OutputBuffer</a></span>
    <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>when</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../../ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>
    <span class='id identifier rubyid_string'>string</span>
  <span class='kw'>when</span> <span class='const'><a href="../../String.html" title="String (class)">String</a></span>
    <span class='const'><a href="../../ERB.html" title="ERB (class)">ERB</a></span><span class='op'>::</span><span class='const'><a href="../../ERB/Util.html" title="ERB::Util (module)">Util</a></span>.<span class='id identifier rubyid_html_escape'><a href="../../ActiveSupport/CoreExt/ERBUtil.html#html_escape-instance_method" title="ActiveSupport::CoreExt::ERBUtil#html_escape (method)">html_escape</a></span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="content_for-instance_method">
  <h3 class='signature '>
    #<strong>content_for</strong>(name, content = nil, options = {}, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calling <code>content_for</code> stores a block of markup in an identifier for later use. In order to access this stored content in other templates, helper modules or the layout, you would pass the identifier as an argument to <code>content_for</code>.</p>

<p>Note: <code>yield</code> can still be used to retrieve the stored content, but calling <code>yield</code> doesn’t work in helper modules, while <code>content_for</code> does.</p>

<pre class="code xml"><code class="xml">&lt;% content_for :not_authorized do %&gt;
  alert(&#39;You are not authorized to do that!&#39;)
&lt;% end %&gt;
</code></pre>

<p>You can then use <code>content_for :not_authorized</code> anywhere in your templates.</p>

<pre class="code xml"><code class="xml">&lt;%= content_for :not_authorized if current_user.nil? %&gt;
</code></pre>

<p>This is equivalent to:</p>

<pre class="code xml"><code class="xml">&lt;%= yield :not_authorized if current_user.nil? %&gt;
</code></pre>

<p><code>content_for</code>, however, can also be used in helper modules.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>StorageHelper</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_stored_content'>stored_content</span>
    <span class='id identifier rubyid_content_for'>content_for</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_storage'>storage</span>) <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Your storage is empty</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>This helper works just like normal helpers.</p>

<pre class="code xml"><code class="xml">&lt;%= stored_content %&gt;
</code></pre>

<p>You can also use the <code>yield</code> syntax alongside an existing call to <code>yield</code> in a layout. For example:</p>

<pre class="code xml"><code class="xml">&lt;%# This is the layout %&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;title&gt;My Website&lt;/title&gt;
  &lt;%= yield :script %&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;%= yield %&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>And now, we’ll create a view that has a <code>content_for</code> call that creates the <code>script</code> identifier.</p>

<pre class="code xml"><code class="xml">&lt;%# This is our view %&gt;
Please login!

&lt;% content_for :script do %&gt;
  &lt;script&gt;alert(&#39;You are not authorized to view this page!&#39;)&lt;/script&gt;
&lt;% end %&gt;
</code></pre>

<p>Then, in another view, you could to do something like this:</p>

<pre class="code xml"><code class="xml">&lt;%= link_to &#39;Logout&#39;, action: &#39;logout&#39;, remote: true %&gt;

&lt;% content_for :script do %&gt;
  &lt;%= javascript_include_tag :defaults %&gt;
&lt;% end %&gt;
</code></pre>

<p>That will place <code>script</code> tags for your default set of JavaScript files on the page; this technique is useful if you’ll only be using these scripts in a few views.</p>

<p>Note that <code>content_for</code> concatenates (default) the blocks it is given for a particular identifier in order. For example:</p>

<pre class="code xml"><code class="xml">&lt;% content_for :navigation do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Home&#39;, action: &#39;index&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;
</code></pre>

<p>And in another place:</p>

<pre class="code xml"><code class="xml">&lt;% content_for :navigation do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Login&#39;, action: &#39;login&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;
</code></pre>

<p>Then, in another template or layout, this code would render both links in order:</p>

<pre class="code xml"><code class="xml">&lt;ul&gt;&lt;%= content_for :navigation %&gt;&lt;/ul&gt;
</code></pre>

<p>If the flush parameter is <code>true</code> <code>content_for</code> replaces the blocks it is given. For example:</p>

<pre class="code xml"><code class="xml">&lt;% content_for :navigation do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Home&#39;, action: &#39;index&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;

&lt;%# Add some other content, or use a different template: %&gt;

&lt;% content_for :navigation, flush: true do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Login&#39;, action: &#39;login&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;
</code></pre>

<p>Then, in another template or layout, this code would render only the last link:</p>

<pre class="code xml"><code class="xml">&lt;ul&gt;&lt;%= content_for :navigation %&gt;&lt;/ul&gt;
</code></pre>

<p>Lastly, simple content can be passed as a parameter:</p>

<pre class="code xml"><code class="xml">&lt;% content_for :script, javascript_include_tag(:defaults) %&gt;
</code></pre>

<p>WARNING: <code>content_for</code> is ignored in caches. So you shouldn’t use it for elements that will be fragment cached.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/actionview/lib/action_view/helpers/capture_helper.rb#L172-L185'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='172' data-end='185'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/helpers/capture_helper.rb', line 172</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_content_for'>content_for</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>||</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span> <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span>
      <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_capture'><a href="#capture-instance_method" title="ActionView::Helpers::CaptureHelper#capture (method)">capture</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span>
      <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_flush'>flush</span>] <span class='op'>?</span> <span class='ivar'>@view_flow</span>.<span class='id identifier rubyid_set'>set</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span>) <span class='op'>:</span> <span class='ivar'>@view_flow</span>.<span class='id identifier rubyid_append'>append</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span>)
    <span class='kw'>end</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='ivar'>@view_flow</span>.<span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_name'>name</span>).<span class='id identifier rubyid_presence'>presence</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="content_for?-instance_method">
  <h3 class='signature '>
    #<strong>content_for?</strong>(name)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>content_for?</code> checks whether any content has been captured yet using <a href="#content_for-instance_method" title="ActionView::Helpers::CaptureHelper#content_for (method)">#content_for</a>.</p>

<p>Useful to render parts of your layout differently based on what is in your views.</p>

<pre class="code xml"><code class="xml">&lt;%# This is the layout %&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;title&gt;My Website&lt;/title&gt;
  &lt;%= yield :script %&gt;
&lt;/head&gt;
&lt;body class=&quot;&lt;%= content_for?(:right_col) ? &#39;two-column&#39; : &#39;one-column&#39; %&gt;&quot;&gt;
  &lt;%= yield %&gt;
  &lt;%= yield :right_col %&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/actionview/lib/action_view/helpers/capture_helper.rb#L215-L217'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='215' data-end='217'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/helpers/capture_helper.rb', line 215</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_content_for?'>content_for?</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='ivar'>@view_flow</span>.<span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_name'>name</span>).<span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="provide-instance_method">
  <h3 class='signature '>
    #<strong>provide</strong>(name, content = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The same as <a href="#content_for-instance_method" title="ActionView::Helpers::CaptureHelper#content_for (method)">#content_for</a> but when used with streaming flushes straight back to the layout. In other words, if you want to concatenate several times to the same buffer when rendering a given template, you should use <a href="#content_for-instance_method" title="ActionView::Helpers::CaptureHelper#content_for (method)">#content_for</a>, if not, use <code>provide</code> to tell the layout to stop looking for more contents.</p>

<p>See <a href="../../ActionController/Streaming.html" title="ActionController::Streaming (module)"><code>::ActionController::Streaming</code></a> for more information.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/actionview/lib/action_view/helpers/capture_helper.rb#L194-L198'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='194' data-end='198'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/helpers/capture_helper.rb', line 194</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_provide'>provide</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_capture'><a href="#capture-instance_method" title="ActionView::Helpers::CaptureHelper#capture (method)">capture</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='ivar'>@view_flow</span>.<span class='id identifier rubyid_append!'>append!</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_content'>content</span>) <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span>
  <span class='id identifier rubyid_result'>result</span> <span class='kw'>unless</span> <span class='id identifier rubyid_content'>content</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="with_output_buffer-instance_method">
  <h3 class='signature nodoc'>
    #<strong>with_output_buffer</strong>(buf = nil)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Use an alternate output buffer for the duration of the block. Defaults to a new empty string.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/actionview/lib/action_view/helpers/capture_helper.rb#L221-L233'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='221' data-end='233'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/helpers/capture_helper.rb', line 221</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_with_output_buffer'>with_output_buffer</span>(<span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='kw'>nil</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_buf'>buf</span>
    <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='const'><a href="../../ActionView.html" title="ActionView (module)">ActionView</a></span><span class='op'>::</span><span class='const'><a href="../OutputBuffer.html" title="ActionView::OutputBuffer (class)">OutputBuffer</a></span>.<span class='id identifier rubyid_new'><a href="../OutputBuffer.html#new-class_method" title="ActionView::OutputBuffer.new (method)">new</a></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_output_buffer'>output_buffer</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_output_buffer'>output_buffer</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>)
      <span class='id identifier rubyid_buf'>buf</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_output_buffer'>output_buffer</span>.<span class='id identifier rubyid_encoding'>encoding</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_output_buffer'>output_buffer</span><span class='comma'>,</span> <span class='id identifier rubyid_old_buffer'>old_buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_buf'>buf</span><span class='comma'>,</span> <span class='id identifier rubyid_output_buffer'>output_buffer</span>
  <span class='kw'>yield</span>
  <span class='id identifier rubyid_output_buffer'>output_buffer</span>
<span class='kw'>ensure</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_output_buffer'>output_buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_old_buffer'>old_buffer</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>