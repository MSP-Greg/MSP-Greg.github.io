<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveJob::TestHelper &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveJob::TestHelper",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails main</a> &raquo; 
      <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../ActiveJob.html" title="ActiveJob (module)">ActiveJob</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>TestHelper&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveJob::TestHelper</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="TestHelper/TestQueueAdapter.html" title="ActiveJob::TestHelper::TestQueueAdapter (module)"><code>TestQueueAdapter</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="../ActionMailer/TestCase.html" title="ActionMailer::TestCase (class)"><code>::ActionMailer::TestCase</code></a>,
          <a href="../ActionMailer/TestCase/Behavior.html" title="ActionMailer::TestCase::Behavior (module)"><code>::ActionMailer::TestCase::Behavior</code></a>,
          <a href="../ActionMailer/TestHelper.html" title="ActionMailer::TestHelper (module)"><code>::ActionMailer::TestHelper</code></a>,
          <a href="TestCase.html" title="ActiveJob::TestCase (class)"><code>TestCase</code></a>
      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="../ActiveSupport/Testing/Assertions.html" title="ActiveSupport::Testing::Assertions (module)"><code>::ActiveSupport::Testing::Assertions</code></a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L8'>activejob/lib/active_job/test_helper.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Provides helper methods for testing Active Job</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
  <h3 class='inherited'><a href="../ActiveSupport/Testing/Assertions.html" title="ActiveSupport::Testing::Assertions (module)"><code>::ActiveSupport::Testing::Assertions</code></a> - Included</h3>
  <p  class='inherited'>
    <a class='nodoc' href="../ActiveSupport/Testing/Assertions.html#UNTRACKED-constant" title="ActiveSupport::Testing::Assertions::UNTRACKED (constant)">UNTRACKED</a>
  </p>
</div>

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#enqueued_jobs-instance_method" title="#enqueued_jobs (instance method)">#<strong>enqueued_jobs</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#performed_jobs-instance_method" title="#performed_jobs (instance method)">#<strong>performed_jobs</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#using_test_adapter%3F-instance_method" title="#using_test_adapter? (instance method)">#<strong>using_test_adapter?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#assert_enqueued_jobs-instance_method" title="#assert_enqueued_jobs (instance method)">#<strong>assert_enqueued_jobs</strong>(number, only: nil, except: nil, queue: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Asserts that the number of enqueued jobs matches the given number.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_enqueued_with-instance_method" title="#assert_enqueued_with (instance method)">#<strong>assert_enqueued_with</strong>(job: nil, args: nil, at: nil, queue: nil, priority: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Asserts that the job has been enqueued with the given arguments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_no_enqueued_jobs-instance_method" title="#assert_no_enqueued_jobs (instance method)">#<strong>assert_no_enqueued_jobs</strong>(only: nil, except: nil, queue: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Asserts that no jobs have been enqueued.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_no_performed_jobs-instance_method" title="#assert_no_performed_jobs (instance method)">#<strong>assert_no_performed_jobs</strong>(only: nil, except: nil, queue: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Asserts that no jobs have been performed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_performed_jobs-instance_method" title="#assert_performed_jobs (instance method)">#<strong>assert_performed_jobs</strong>(number, only: nil, except: nil, queue: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Asserts that the number of performed jobs matches the given number.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#assert_performed_with-instance_method" title="#assert_performed_with (instance method)">#<strong>assert_performed_with</strong>(job: nil, args: nil, at: nil, queue: nil, priority: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Asserts that the job has been performed with the given arguments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#perform_enqueued_jobs-instance_method" title="#perform_enqueued_jobs (instance method)">#<strong>perform_enqueued_jobs</strong>(only: nil, except: nil, queue: nil, at: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Performs all enqueued jobs.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#queue_adapter-instance_method" title="#queue_adapter (instance method)">#<strong>queue_adapter</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Accesses the queue_adapter set by <a href="Base.html" title="ActiveJob::Base (class)"><code>Base</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#queue_adapter_for_test-instance_method" title="#queue_adapter_for_test (instance method)">#<strong>queue_adapter_for_test</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a queue adapter instance to use with all Active Job test helpers.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#clear_enqueued_jobs-instance_method" title="#clear_enqueued_jobs (instance method)">#<strong>clear_enqueued_jobs</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#clear_performed_jobs-instance_method" title="#clear_performed_jobs (instance method)">#<strong>clear_performed_jobs</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#deserialize_args_for_assertion-instance_method" title="#deserialize_args_for_assertion (instance method)">#<strong>deserialize_args_for_assertion</strong>(job)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#enqueued_jobs_with-instance_method" title="#enqueued_jobs_with (instance method)">#<strong>enqueued_jobs_with</strong>(only: nil, except: nil, queue: nil, at: nil, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#filter_as_proc-instance_method" title="#filter_as_proc (instance method)">#<strong>filter_as_proc</strong>(filter)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#flush_enqueued_jobs-instance_method" title="#flush_enqueued_jobs (instance method)">#<strong>flush_enqueued_jobs</strong>(only: nil, except: nil, queue: nil, at: nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#instantiate_job-instance_method" title="#instantiate_job (instance method)">#<strong>instantiate_job</strong>(payload, skip_deserialize_arguments: false)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#jobs_with-instance_method" title="#jobs_with (instance method)">#<strong>jobs_with</strong>(jobs, only: nil, except: nil, queue: nil, at: nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#performed_jobs_with-instance_method" title="#performed_jobs_with (instance method)">#<strong>performed_jobs_with</strong>(only: nil, except: nil, queue: nil, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#prepare_args_for_assertion-instance_method" title="#prepare_args_for_assertion (instance method)">#<strong>prepare_args_for_assertion</strong>(args)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#queue_adapter_changed_jobs-instance_method" title="#queue_adapter_changed_jobs (instance method)">#<strong>queue_adapter_changed_jobs</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#validate_option-instance_method" title="#validate_option (instance method)">#<strong>validate_option</strong>(only: nil, except: nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#after_teardown-instance_method" title="#after_teardown (instance method)">#<strong>after_teardown</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#before_setup-instance_method" title="#before_setup (instance method)">#<strong>before_setup</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="../ActiveSupport/Testing/Assertions.html" title="ActiveSupport::Testing::Assertions (module)"><code>::ActiveSupport::Testing::Assertions</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_changes-instance_method" title="ActiveSupport::Testing::Assertions#assert_changes (method)">#assert_changes</a></td>
      <td><div class='inline'><p>Assertion that the result of evaluating an expression is changed before and after invoking the passed in block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_difference-instance_method" title="ActiveSupport::Testing::Assertions#assert_difference (method)">#assert_difference</a></td>
      <td><div class='inline'><p>Test numeric difference between the return value of an expression as a result of what is evaluated in the yielded block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_no_changes-instance_method" title="ActiveSupport::Testing::Assertions#assert_no_changes (method)">#assert_no_changes</a></td>
      <td><div class='inline'><p>Assertion that the result of evaluating an expression is not changed before and after invoking the passed in block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_no_difference-instance_method" title="ActiveSupport::Testing::Assertions#assert_no_difference (method)">#assert_no_difference</a></td>
      <td><div class='inline'><p>Assertion that the numeric result of evaluating an expression is not changed before and after invoking the passed in block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_not-instance_method" title="ActiveSupport::Testing::Assertions#assert_not (method)">#assert_not</a></td>
      <td><div class='inline'><p>Asserts that an expression is not truthy.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_nothing_raised-instance_method" title="ActiveSupport::Testing::Assertions#assert_nothing_raised (method)">#assert_nothing_raised</a></td>
      <td><div class='inline'><p>Assertion that the block should not raise an exception.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_raise-instance_method" title="ActiveSupport::Testing::Assertions#assert_raise (method)">#assert_raise</a></td>
      <td><div class='inline'><p>Alias for <a href="../ActiveSupport/Testing/Assertions.html#assert_raises-instance_method" title="ActiveSupport::Testing::Assertions#assert_raises (method)">ActiveSupport::Testing::Assertions#assert_raises</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Testing/Assertions.html#assert_raises-instance_method" title="ActiveSupport::Testing::Assertions#assert_raises (method)">#assert_raises</a></td>
      <td><div class='inline'><p>Asserts that a block raises one of <code>exp</code>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="../ActiveSupport/Testing/Assertions.html#_assert_nothing_raised_or_warn-instance_method" title="ActiveSupport::Testing::Assertions#_assert_nothing_raised_or_warn (method)">#_assert_nothing_raised_or_warn</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="enqueued_jobs-instance_method">
  <h3 class='signature rw first'>
    #<strong>enqueued_jobs</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L9-L11'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9' data-end='11'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_enqueued_jobs'>enqueued_jobs</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_enqueued_jobs='><a href="#enqueued_jobs=-instance_method" title="ActiveJob::TestHelper#enqueued_jobs= (method)">enqueued_jobs=</a></span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_performed_jobs='><a href="#performed_jobs=-instance_method" title="ActiveJob::TestHelper#performed_jobs= (method)">performed_jobs=</a></span><span class='comma'>,</span>
  <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="performed_jobs-instance_method">
  <h3 class='signature rw'>
    #<strong>performed_jobs</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L9-L11'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9' data-end='11'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_enqueued_jobs'><a href="#enqueued_jobs-instance_method" title="ActiveJob::TestHelper#enqueued_jobs (method)">enqueued_jobs</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_enqueued_jobs='><a href="#enqueued_jobs=-instance_method" title="ActiveJob::TestHelper#enqueued_jobs= (method)">enqueued_jobs=</a></span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_performed_jobs'>performed_jobs</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_performed_jobs='><a href="#performed_jobs=-instance_method" title="ActiveJob::TestHelper#performed_jobs= (method)">performed_jobs=</a></span><span class='comma'>,</span>
  <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="using_test_adapter?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>using_test_adapter?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L649-L651'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='649' data-end='651'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 649</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_using_test_adapter?'>using_test_adapter?</span>
  <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../ActiveJob.html" title="ActiveJob (module)">ActiveJob</a></span><span class='op'>::</span><span class='const'><a href="QueueAdapters.html" title="ActiveJob::QueueAdapters (module)">QueueAdapters</a></span><span class='op'>::</span><span class='const'><a href="QueueAdapters/TestAdapter.html" title="ActiveJob::QueueAdapters::TestAdapter (class)">TestAdapter</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="after_teardown-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>after_teardown</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L53-L57'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='53' data-end='57'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 53</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after_teardown'>after_teardown</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>super</span>

  <span class='id identifier rubyid_queue_adapter_changed_jobs'><a href="#queue_adapter_changed_jobs-instance_method" title="ActiveJob::TestHelper#queue_adapter_changed_jobs (method)">queue_adapter_changed_jobs</a></span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_klass'>klass</span><span class='op'>|</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_disable_test_adapter'>disable_test_adapter</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_enqueued_jobs-instance_method">
  <h3 class='signature '>
    #<strong>assert_enqueued_jobs</strong>(number, only: nil, except: nil, queue: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Asserts that the number of enqueued jobs matches the given number.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs'>test_jobs</span>
  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>0</span>
  <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>david</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>1</span>
  <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abdelkader</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>2</span>
<span class='kw'>end</span></code></pre>

<p>If a block is passed, asserts that the block will cause the specified number of jobs to be enqueued.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs_again'>test_jobs_again</span>
  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>1</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cristian</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>2</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aaron</span><span class='tstring_end'>&#39;</span></span>)
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rafael</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Asserts the number of times a specific job was enqueued by passing <code>:only</code> option.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_logging_job'>test_logging_job</span>
  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='const'>LoggingJob</span> <span class='kw'>do</span>
    <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Asserts the number of times a job except specific class was enqueued by passing <code>:except</code> option.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_logging_job'>test_logging_job</span>
  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='const'>HelloJob</span> <span class='kw'>do</span>
    <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p><code>:only</code> and <code>:except</code> options accept <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, <a href="../Array.html" title="Array (class)"><code>::Array</code></a> of <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, or Proc. When passed a Proc, a hash containing the job’s class and it’s argument are passed as argument.</p>

<p>Asserts the number of times a job is enqueued to a specific queue by passing <code>:queue</code> option.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_logging_job'>test_logging_job</span>
  <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
    <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>elfassy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L120-L134'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='120' data-end='134'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 120</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_enqueued_jobs'>assert_enqueued_jobs</span>(<span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_original_jobs'>original_jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_enqueued_jobs_with'><a href="#enqueued_jobs_with-instance_method" title="ActiveJob::TestHelper#enqueued_jobs_with (method)">enqueued_jobs_with</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span>)

    <span class='id identifier rubyid__assert_nothing_raised_or_warn'>_assert_nothing_raised_or_warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>assert_enqueued_jobs</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)

    <span class='id identifier rubyid_new_jobs'>new_jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_enqueued_jobs_with'><a href="#enqueued_jobs_with-instance_method" title="ActiveJob::TestHelper#enqueued_jobs_with (method)">enqueued_jobs_with</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span>)

    <span class='id identifier rubyid_actual_count'>actual_count</span> <span class='op'>=</span> (<span class='id identifier rubyid_new_jobs'>new_jobs</span> <span class='op'>-</span> <span class='id identifier rubyid_original_jobs'>original_jobs</span>).<span class='id identifier rubyid_count'>count</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_actual_count'>actual_count</span> <span class='op'>=</span> <span class='id identifier rubyid_enqueued_jobs_with'><a href="#enqueued_jobs_with-instance_method" title="ActiveJob::TestHelper#enqueued_jobs_with (method)">enqueued_jobs_with</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span>).<span class='id identifier rubyid_count'>count</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='id identifier rubyid_actual_count'>actual_count</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_number'>number</span><span class='embexpr_end'>}</span><span class='tstring_content'> jobs expected, but </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_actual_count'>actual_count</span><span class='embexpr_end'>}</span><span class='tstring_content'> were enqueued</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_enqueued_with-instance_method">
  <h3 class='signature '>
    #<strong>assert_enqueued_with</strong>(job: nil, args: nil, at: nil, queue: nil, priority: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Asserts that the job has been enqueued with the given arguments.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_enqueued_with'>test_assert_enqueued_with</span>
  <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>)
  <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>args:</span> [<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>])

  <span class='const'>MyJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>wait_until:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_queue</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_perform_later'>perform_later</span>
  <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>at:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_queue</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span></code></pre>

<p>For keyword arguments, specify them as a hash inside an array:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_enqueued_with_keyword_arguments'>test_assert_enqueued_with_keyword_arguments</span>
  <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='label'>arg1:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>value1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>arg2:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>value2</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>args:</span> [{ <span class='label'>arg1:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>value1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>arg2:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>value2</span><span class='tstring_end'>&#39;</span></span> }])
<span class='kw'>end</span></code></pre>

<p>The given arguments may also be specified as matcher procs that return a boolean value indicating whether a job’s attribute meets certain criteria.</p>

<p>For example, a proc can be used to match a range of times:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_enqueued_with'>test_assert_enqueued_with</span>
  <span class='id identifier rubyid_at_matcher'>at_matcher</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_job_at'>job_at</span>) <span class='tlambeg'>{</span> (<span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_yesterday'><a href="../Date.html#yesterday-class_method" title="Date.yesterday (method)">yesterday</a></span><span class='op'>..</span><span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'>tomorrow</span>).<span class='id identifier rubyid_cover?'>cover?</span>(<span class='id identifier rubyid_job_at'>job_at</span>) }

  <span class='const'>MyJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>wait_until:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_today'>today</span>.<span class='id identifier rubyid_noon'>noon</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>

  <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_at_matcher'>at_matcher</span>)
<span class='kw'>end</span></code></pre>

<p>A proc can also be used to match a subset of a job’s args:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_enqueued_with'>test_assert_enqueued_with</span>
  <span class='id identifier rubyid_args_matcher'>args_matcher</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_job_args'>job_args</span>) <span class='tlambeg'>{</span> <span class='id identifier rubyid_job_args'>job_args</span>[<span class='int'>0</span>].<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>) }

  <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='label'>foo:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>other_arg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No need to check in the test</span><span class='tstring_end'>&quot;</span></span>)

  <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='id identifier rubyid_args_matcher'>args_matcher</span>)
<span class='kw'>end</span></code></pre>

<p>If a block is passed, asserts that the block will cause the job to be enqueued with the given arguments.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_enqueued_with'>test_assert_enqueued_with</span>
  <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>args:</span> [<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>]) <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span>) <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>wait_until:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L396-L440'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='396' data-end='440'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 396</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_enqueued_with'>assert_enqueued_with</span>(<span class='label'>job:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> { <span class='label'>job:</span> <span class='id identifier rubyid_job'>job</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_at'>at</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='id identifier rubyid_priority'>priority</span> }.<span class='id identifier rubyid_compact'>compact</span>
  <span class='id identifier rubyid_expected_args'>expected_args</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_args_for_assertion'><a href="#prepare_args_for_assertion-instance_method" title="ActiveJob::TestHelper#prepare_args_for_assertion (method)">prepare_args_for_assertion</a></span>(<span class='id identifier rubyid_expected'>expected</span>)
  <span class='id identifier rubyid_potential_matches'>potential_matches</span> <span class='op'>=</span> []

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_original_enqueued_jobs'>original_enqueued_jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_enqueued_jobs'><a href="#enqueued_jobs-instance_method" title="ActiveJob::TestHelper#enqueued_jobs (method)">enqueued_jobs</a></span>.<span class='id identifier rubyid_dup'>dup</span>

    <span class='id identifier rubyid__assert_nothing_raised_or_warn'>_assert_nothing_raised_or_warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>assert_enqueued_with</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)

    <span class='id identifier rubyid_jobs'>jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_enqueued_jobs'><a href="#enqueued_jobs-instance_method" title="ActiveJob::TestHelper#enqueued_jobs (method)">enqueued_jobs</a></span> <span class='op'>-</span> <span class='id identifier rubyid_original_enqueued_jobs'>original_enqueued_jobs</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_jobs'>jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_enqueued_jobs'><a href="#enqueued_jobs-instance_method" title="ActiveJob::TestHelper#enqueued_jobs (method)">enqueued_jobs</a></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matching_job'>matching_job</span> <span class='op'>=</span> <span class='id identifier rubyid_jobs'>jobs</span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enqueued_job'>enqueued_job</span><span class='op'>|</span>
    <span class='id identifier rubyid_deserialized_job'>deserialized_job</span> <span class='op'>=</span> <span class='id identifier rubyid_deserialize_args_for_assertion'><a href="#deserialize_args_for_assertion-instance_method" title="ActiveJob::TestHelper#deserialize_args_for_assertion (method)">deserialize_args_for_assertion</a></span>(<span class='id identifier rubyid_enqueued_job'>enqueued_job</span>)
    <span class='id identifier rubyid_potential_matches'>potential_matches</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_deserialized_job'>deserialized_job</span>

    <span class='id identifier rubyid_expected_args'>expected_args</span>.<span class='id identifier rubyid_all?'>all?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_call'>call</span>)
        <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_deserialized_job'>deserialized_job</span>[<span class='id identifier rubyid_key'>key</span>])
      <span class='kw'>else</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='id identifier rubyid_deserialized_job'>deserialized_job</span>[<span class='id identifier rubyid_key'>key</span>]
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matching_class'>matching_class</span> <span class='op'>=</span> <span class='id identifier rubyid_potential_matches'>potential_matches</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enqueued_job'>enqueued_job</span><span class='op'>|</span>
    <span class='id identifier rubyid_enqueued_job'>enqueued_job</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>job_class</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>==</span> <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No enqueued job found with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected'>expected</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_potential_matches'>potential_matches</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\nNo jobs were enqueued</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_matching_class'>matching_class</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\nNo jobs of class </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected'>expected</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_job'>job</span>]<span class='embexpr_end'>}</span><span class='tstring_content'> were enqueued, job classes enqueued: </span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_potential_matches'>potential_matches</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_job'>job</span><span class='op'>|</span> <span class='id identifier rubyid_job'>job</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>job_class</span><span class='tstring_end'>&quot;</span></span>] }.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\nPotential matches: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_matching_class'>matching_class</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert'>assert</span> <span class='id identifier rubyid_matching_job'>matching_job</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span>
  <span class='id identifier rubyid_instantiate_job'><a href="#instantiate_job-instance_method" title="ActiveJob::TestHelper#instantiate_job (method)">instantiate_job</a></span>(<span class='id identifier rubyid_matching_job'>matching_job</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_no_enqueued_jobs-instance_method">
  <h3 class='signature '>
    #<strong>assert_no_enqueued_jobs</strong>(only: nil, except: nil, queue: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Asserts that no jobs have been enqueued.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs'>test_jobs</span>
  <span class='id identifier rubyid_assert_no_enqueued_jobs'>assert_no_enqueued_jobs</span>
  <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_assert_enqueued_jobs'><a href="#assert_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#assert_enqueued_jobs (method)">assert_enqueued_jobs</a></span> <span class='int'>1</span>
<span class='kw'>end</span></code></pre>

<p>If a block is passed, asserts that the block will not cause any job to be enqueued.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs_again'>test_jobs_again</span>
  <span class='id identifier rubyid_assert_no_enqueued_jobs'>assert_no_enqueued_jobs</span> <span class='kw'>do</span>
    <span class='comment'># No job should be enqueued from this block
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Asserts that no jobs of a specific kind are enqueued by passing <code>:only</code> option.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_no_logging'>test_no_logging</span>
  <span class='id identifier rubyid_assert_no_enqueued_jobs'>assert_no_enqueued_jobs</span> <span class='label'>only:</span> <span class='const'>LoggingJob</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Asserts that no jobs except specific class are enqueued by passing <code>:except</code> option.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_no_logging'>test_no_logging</span>
  <span class='id identifier rubyid_assert_no_enqueued_jobs'>assert_no_enqueued_jobs</span> <span class='label'>except:</span> <span class='const'>HelloJob</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p><code>:only</code> and <code>:except</code> options accept <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, <a href="../Array.html" title="Array (class)"><code>::Array</code></a> of <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, or Proc. When passed a Proc, a hash containing the job’s class and it’s argument are passed as argument.</p>

<p>Asserts that no jobs are enqueued to a specific queue by passing <code>:queue</code> option</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_no_logging'>test_no_logging</span>
  <span class='id identifier rubyid_assert_no_enqueued_jobs'>assert_no_enqueued_jobs</span> <span class='label'>queue:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
    <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_some_queue'>some_queue</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Note: This assertion is simply a shortcut for:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_assert_enqueued_jobs'><a href="#assert_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#assert_enqueued_jobs (method)">assert_enqueued_jobs</a></span> <span class='int'>0</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L182-L184'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='182' data-end='184'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 182</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_no_enqueued_jobs'>assert_no_enqueued_jobs</span>(<span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_assert_enqueued_jobs'><a href="#assert_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#assert_enqueued_jobs (method)">assert_enqueued_jobs</a></span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_no_performed_jobs-instance_method">
  <h3 class='signature '>
    #<strong>assert_no_performed_jobs</strong>(only: nil, except: nil, queue: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Asserts that no jobs have been performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs'>test_jobs</span>
  <span class='id identifier rubyid_assert_no_performed_jobs'>assert_no_performed_jobs</span>

  <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>matthew</span><span class='tstring_end'>&#39;</span></span>)
    <span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>If a block is passed, asserts that the block will not cause any job to be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs_again'>test_jobs_again</span>
  <span class='id identifier rubyid_assert_no_performed_jobs'>assert_no_performed_jobs</span> <span class='kw'>do</span>
    <span class='comment'># No job should be performed from this block
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The block form supports filtering. If the <code>:only</code> option is specified, then only the listed job(s) will not be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_no_logging'>test_no_logging</span>
  <span class='id identifier rubyid_assert_no_performed_jobs'>assert_no_performed_jobs</span> <span class='label'>only:</span> <span class='const'>LoggingJob</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Also if the <code>:except</code> option is specified, then the job(s) except specific class will not be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_no_logging'>test_no_logging</span>
  <span class='id identifier rubyid_assert_no_performed_jobs'>assert_no_performed_jobs</span> <span class='label'>except:</span> <span class='const'>HelloJob</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p><code>:only</code> and <code>:except</code> options accept <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, <a href="../Array.html" title="Array (class)"><code>::Array</code></a> of <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, or Proc. When passed a Proc, an instance of the job will be passed as argument.</p>

<p>If the <code>:queue</code> option is specified, then only the job(s) enqueued to a specific queue will not be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_no_performed_jobs_with_queue_option'>test_assert_no_performed_jobs_with_queue_option</span>
  <span class='id identifier rubyid_assert_no_performed_jobs'>assert_no_performed_jobs</span> <span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_some_queue'>some_queue</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_other_queue'>other_queue</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Note: This assertion is simply a shortcut for:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>0</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L340-L342'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='340' data-end='342'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 340</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_no_performed_jobs'>assert_no_performed_jobs</span>(<span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_performed_jobs-instance_method">
  <h3 class='signature '>
    #<strong>assert_performed_jobs</strong>(number, only: nil, except: nil, queue: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Asserts that the number of performed jobs matches the given number. If no block is passed, <a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">#perform_enqueued_jobs</a> must be called around or after the job call.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs'>test_jobs</span>
  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>0</span>

  <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xavier</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>1</span>

  <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>yves</span><span class='tstring_end'>&#39;</span></span>)

  <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span>

  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>2</span>
<span class='kw'>end</span></code></pre>

<p>If a block is passed, asserts that the block will cause the specified number of jobs to be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs_again'>test_jobs_again</span>
  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>1</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>robin</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>2</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>carlos</span><span class='tstring_end'>&#39;</span></span>)
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sean</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>This method also supports filtering. If the <code>:only</code> option is specified, then only the listed job(s) will be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_hello_job'>test_hello_job</span>
  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='const'>HelloJob</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
    <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Also if the <code>:except</code> option is specified, then the job(s) except specific class will be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_hello_job'>test_hello_job</span>
  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='const'>LoggingJob</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
    <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>An array may also be specified, to support testing multiple jobs.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_hello_and_logging_jobs'>test_hello_and_logging_jobs</span>
  <span class='id identifier rubyid_assert_nothing_raised'>assert_nothing_raised</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>only:</span> [<span class='const'>HelloJob</span><span class='comma'>,</span> <span class='const'>LoggingJob</span>] <span class='kw'>do</span>
      <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
      <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stewie</span><span class='tstring_end'>&#39;</span></span>)
      <span class='const'>RescueJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>david</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>A proc may also be specified. When passed a Proc, the job’s instance will be passed as argument.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_hello_and_logging_jobs'>test_hello_and_logging_jobs</span>
  <span class='id identifier rubyid_assert_nothing_raised'>assert_nothing_raised</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_job'>job</span>) <span class='tlambeg'>{</span> <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>HelloJob</span>) }) <span class='kw'>do</span>
      <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&#39;</span></span>)
      <span class='const'>LoggingJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stewie</span><span class='tstring_end'>&#39;</span></span>)
      <span class='const'>RescueJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>david</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>If the <code>:queue</code> option is specified, then only the job(s) enqueued to a specific queue will be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_performed_jobs_with_queue_option'>test_assert_performed_jobs_with_queue_option</span>
  <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_some_queue'>some_queue</span> <span class='kw'>do</span>
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_some_queue'>some_queue</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jeremy</span><span class='tstring_end'>&quot;</span></span>)
    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_other_queue'>other_queue</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bogdan</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L272-L286'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='272' data-end='286'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 272</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_performed_jobs'>assert_performed_jobs</span>(<span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_original_count'>original_count</span> <span class='op'>=</span> <span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span>.<span class='id identifier rubyid_size'>size</span>

    <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)

    <span class='id identifier rubyid_new_count'>new_count</span> <span class='op'>=</span> <span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span>.<span class='id identifier rubyid_size'>size</span>

    <span class='id identifier rubyid_performed_jobs_size'>performed_jobs_size</span> <span class='op'>=</span> <span class='id identifier rubyid_new_count'>new_count</span> <span class='op'>-</span> <span class='id identifier rubyid_original_count'>original_count</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_performed_jobs_size'>performed_jobs_size</span> <span class='op'>=</span> <span class='id identifier rubyid_performed_jobs_with'><a href="#performed_jobs_with-instance_method" title="ActiveJob::TestHelper#performed_jobs_with (method)">performed_jobs_with</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span>).<span class='id identifier rubyid_count'>count</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='id identifier rubyid_performed_jobs_size'>performed_jobs_size</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_number'>number</span><span class='embexpr_end'>}</span><span class='tstring_content'> jobs expected, but </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_performed_jobs_size'>performed_jobs_size</span><span class='embexpr_end'>}</span><span class='tstring_content'> were performed</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="assert_performed_with-instance_method">
  <h3 class='signature '>
    #<strong>assert_performed_with</strong>(job: nil, args: nil, at: nil, queue: nil, priority: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Asserts that the job has been performed with the given arguments.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_performed_with'>test_assert_performed_with</span>
  <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>)

  <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span>

  <span class='id identifier rubyid_assert_performed_with'>assert_performed_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>args:</span> [<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>])

  <span class='const'>MyJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>wait_until:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_queue</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_perform_later'>perform_later</span>

  <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span>

  <span class='id identifier rubyid_assert_performed_with'>assert_performed_with</span>(<span class='label'>at:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_queue</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span></code></pre>

<p>The given arguments may also be specified as matcher procs that return a boolean value indicating whether a job’s attribute meets certain criteria.</p>

<p>For example, a proc can be used to match a range of times:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_performed_with'>test_assert_performed_with</span>
  <span class='id identifier rubyid_at_matcher'>at_matcher</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_job_at'>job_at</span>) <span class='tlambeg'>{</span> (<span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_yesterday'><a href="../Date.html#yesterday-class_method" title="Date.yesterday (method)">yesterday</a></span><span class='op'>..</span><span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'>tomorrow</span>).<span class='id identifier rubyid_cover?'>cover?</span>(<span class='id identifier rubyid_job_at'>job_at</span>) }

  <span class='const'>MyJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>wait_until:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_today'>today</span>.<span class='id identifier rubyid_noon'>noon</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>

  <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span>

  <span class='id identifier rubyid_assert_performed_with'>assert_performed_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_at_matcher'>at_matcher</span>)
<span class='kw'>end</span></code></pre>

<p>A proc can also be used to match a subset of a job’s args:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_performed_with'>test_assert_performed_with</span>
  <span class='id identifier rubyid_args_matcher'>args_matcher</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_job_args'>job_args</span>) <span class='tlambeg'>{</span> <span class='id identifier rubyid_job_args'>job_args</span>[<span class='int'>0</span>].<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>) }

  <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='label'>foo:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>other_arg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No need to check in the test</span><span class='tstring_end'>&quot;</span></span>)

  <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span>

  <span class='id identifier rubyid_assert_performed_with'>assert_performed_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='id identifier rubyid_args_matcher'>args_matcher</span>)
<span class='kw'>end</span></code></pre>

<p>If a block is passed, that block performs all of the jobs that were enqueued throughout the duration of the block and asserts that the job has been performed with the given arguments in the block.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_performed_with'>test_assert_performed_with</span>
  <span class='id identifier rubyid_assert_performed_with'>assert_performed_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>args:</span> [<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>]) <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert_performed_with'>assert_performed_with</span>(<span class='label'>job:</span> <span class='const'>MyJob</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span>) <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>wait_until:</span> <span class='const'><a href="../Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_tomorrow'><a href="../Date.html#tomorrow-class_method" title="Date.tomorrow (method)">tomorrow</a></span>.<span class='id identifier rubyid_noon'>noon</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L498-L543'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='498' data-end='543'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 498</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_performed_with'>assert_performed_with</span>(<span class='label'>job:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> { <span class='label'>job:</span> <span class='id identifier rubyid_job'>job</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_at'>at</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='id identifier rubyid_priority'>priority</span> }.<span class='id identifier rubyid_compact'>compact</span>
  <span class='id identifier rubyid_expected_args'>expected_args</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_args_for_assertion'><a href="#prepare_args_for_assertion-instance_method" title="ActiveJob::TestHelper#prepare_args_for_assertion (method)">prepare_args_for_assertion</a></span>(<span class='id identifier rubyid_expected'>expected</span>)
  <span class='id identifier rubyid_potential_matches'>potential_matches</span> <span class='op'>=</span> []

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_original_performed_jobs_count'>original_performed_jobs_count</span> <span class='op'>=</span> <span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span>.<span class='id identifier rubyid_count'>count</span>

    <span class='id identifier rubyid_perform_enqueued_jobs'><a href="#perform_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#perform_enqueued_jobs (method)">perform_enqueued_jobs</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)

    <span class='id identifier rubyid_jobs'>jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span>.<span class='id identifier rubyid_drop'>drop</span>(<span class='id identifier rubyid_original_performed_jobs_count'>original_performed_jobs_count</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_jobs'>jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matching_job'>matching_job</span> <span class='op'>=</span> <span class='id identifier rubyid_jobs'>jobs</span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enqueued_job'>enqueued_job</span><span class='op'>|</span>
    <span class='id identifier rubyid_deserialized_job'>deserialized_job</span> <span class='op'>=</span> <span class='id identifier rubyid_deserialize_args_for_assertion'><a href="#deserialize_args_for_assertion-instance_method" title="ActiveJob::TestHelper#deserialize_args_for_assertion (method)">deserialize_args_for_assertion</a></span>(<span class='id identifier rubyid_enqueued_job'>enqueued_job</span>)
    <span class='id identifier rubyid_potential_matches'>potential_matches</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_deserialized_job'>deserialized_job</span>

    <span class='id identifier rubyid_expected_args'>expected_args</span>.<span class='id identifier rubyid_all?'>all?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_call'>call</span>)
        <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_deserialized_job'>deserialized_job</span>[<span class='id identifier rubyid_key'>key</span>])
      <span class='kw'>else</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='id identifier rubyid_deserialized_job'>deserialized_job</span>[<span class='id identifier rubyid_key'>key</span>]
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_matching_class'>matching_class</span> <span class='op'>=</span> <span class='id identifier rubyid_potential_matches'>potential_matches</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_enqueued_job'>enqueued_job</span><span class='op'>|</span>
    <span class='id identifier rubyid_enqueued_job'>enqueued_job</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>job_class</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>==</span> <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No performed job found with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected'>expected</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_potential_matches'>potential_matches</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\nNo jobs were performed</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_matching_class'>matching_class</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\nNo jobs of class </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected'>expected</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_job'>job</span>]<span class='embexpr_end'>}</span><span class='tstring_content'> were performed, job classes performed: </span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_potential_matches'>potential_matches</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_job'>job</span><span class='op'>|</span> <span class='id identifier rubyid_job'>job</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>job_class</span><span class='tstring_end'>&quot;</span></span>] }.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\nPotential matches: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_matching_class'>matching_class</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_assert'>assert</span> <span class='id identifier rubyid_matching_job'>matching_job</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span>

  <span class='id identifier rubyid_instantiate_job'><a href="#instantiate_job-instance_method" title="ActiveJob::TestHelper#instantiate_job (method)">instantiate_job</a></span>(<span class='id identifier rubyid_matching_job'>matching_job</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="before_setup-instance_method">
  <h3 class='signature nodoc'>
    #<strong>before_setup</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L41-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='41' data-end='51'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 41</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_before_setup'>before_setup</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_test_adapter'>test_adapter</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_adapter_for_test'><a href="#queue_adapter_for_test-instance_method" title="ActiveJob::TestHelper#queue_adapter_for_test (method)">queue_adapter_for_test</a></span>

  <span class='id identifier rubyid_queue_adapter_changed_jobs'><a href="#queue_adapter_changed_jobs-instance_method" title="ActiveJob::TestHelper#queue_adapter_changed_jobs (method)">queue_adapter_changed_jobs</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klass'>klass</span><span class='op'>|</span>
    <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_enable_test_adapter'>enable_test_adapter</span>(<span class='id identifier rubyid_test_adapter'>test_adapter</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_clear_enqueued_jobs'><a href="#clear_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#clear_enqueued_jobs (method)">clear_enqueued_jobs</a></span>
  <span class='id identifier rubyid_clear_performed_jobs'><a href="#clear_performed_jobs-instance_method" title="ActiveJob::TestHelper#clear_performed_jobs (method)">clear_performed_jobs</a></span>
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_enqueued_jobs-instance_method">
  <h3 class='signature priv'>
    #<strong>clear_enqueued_jobs</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L653-L655'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='653' data-end='655'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 653</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_enqueued_jobs'>clear_enqueued_jobs</span>
  <span class='id identifier rubyid_enqueued_jobs'><a href="#enqueued_jobs-instance_method" title="ActiveJob::TestHelper#enqueued_jobs (method)">enqueued_jobs</a></span>.<span class='id identifier rubyid_clear'>clear</span> <span class='kw'>if</span> <span class='id identifier rubyid_using_test_adapter?'><a href="#using_test_adapter%3F-instance_method" title="ActiveJob::TestHelper#using_test_adapter? (method)">using_test_adapter?</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_performed_jobs-instance_method">
  <h3 class='signature priv'>
    #<strong>clear_performed_jobs</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L657-L659'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='657' data-end='659'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 657</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_performed_jobs'>clear_performed_jobs</span>
  <span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span>.<span class='id identifier rubyid_clear'>clear</span> <span class='kw'>if</span> <span class='id identifier rubyid_using_test_adapter?'><a href="#using_test_adapter%3F-instance_method" title="ActiveJob::TestHelper#using_test_adapter? (method)">using_test_adapter?</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deserialize_args_for_assertion-instance_method">
  <h3 class='signature priv'>
    #<strong>deserialize_args_for_assertion</strong>(job)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L722-L727'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='722' data-end='727'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 722</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deserialize_args_for_assertion'>deserialize_args_for_assertion</span>(<span class='id identifier rubyid_job'>job</span>)
  <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_new_job'>new_job</span><span class='op'>|</span>
    <span class='id identifier rubyid_new_job'>new_job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>] <span class='op'>=</span> <span class='const'><a href="../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_new_job'>new_job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_new_job'>new_job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>]
    <span class='id identifier rubyid_new_job'>new_job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_args'>args</span>] <span class='op'>=</span> <span class='const'><a href="../ActiveJob.html" title="ActiveJob (module)">ActiveJob</a></span><span class='op'>::</span><span class='const'><a href="Arguments.html" title="ActiveJob::Arguments (module)">Arguments</a></span>.<span class='id identifier rubyid_deserialize'><a href="Arguments.html#deserialize-instance_method" title="ActiveJob::Arguments#deserialize (method)">deserialize</a></span>(<span class='id identifier rubyid_new_job'>new_job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_args'>args</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_new_job'>new_job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_args'>args</span>]
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enqueued_jobs_with-instance_method">
  <h3 class='signature priv'>
    #<strong>enqueued_jobs_with</strong>(only: nil, except: nil, queue: nil, at: nil, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L693-L695'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='693' data-end='695'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 693</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_enqueued_jobs_with'>enqueued_jobs_with</span>(<span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_jobs_with'><a href="#jobs_with-instance_method" title="ActiveJob::TestHelper#jobs_with (method)">jobs_with</a></span>(<span class='id identifier rubyid_enqueued_jobs'><a href="#enqueued_jobs-instance_method" title="ActiveJob::TestHelper#enqueued_jobs (method)">enqueued_jobs</a></span><span class='comma'>,</span> <span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_at'>at</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filter_as_proc-instance_method">
  <h3 class='signature priv'>
    #<strong>filter_as_proc</strong>(filter)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L687-L691'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='687' data-end='691'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 687</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_filter_as_proc'>filter_as_proc</span>(<span class='id identifier rubyid_filter'>filter</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_filter'>filter</span> <span class='kw'>if</span> <span class='id identifier rubyid_filter'>filter</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Proc</span>)

  <span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_job'>job</span>) <span class='tlambeg'>{</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>(<span class='id identifier rubyid_filter'>filter</span>).<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_job'>job</span>)) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="flush_enqueued_jobs-instance_method">
  <h3 class='signature priv'>
    #<strong>flush_enqueued_jobs</strong>(only: nil, except: nil, queue: nil, at: nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L701-L707'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='701' data-end='707'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 701</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_flush_enqueued_jobs'>flush_enqueued_jobs</span>(<span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_enqueued_jobs_with'><a href="#enqueued_jobs_with-instance_method" title="ActiveJob::TestHelper#enqueued_jobs_with (method)">enqueued_jobs_with</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_at'>at</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_enqueued_jobs'><a href="#enqueued_jobs-instance_method" title="ActiveJob::TestHelper#enqueued_jobs (method)">enqueued_jobs</a></span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_payload'>payload</span>)
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_payload'>payload</span>
    <span class='id identifier rubyid_instantiate_job'><a href="#instantiate_job-instance_method" title="ActiveJob::TestHelper#instantiate_job (method)">instantiate_job</a></span>(<span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='label'>skip_deserialize_arguments:</span> <span class='kw'>true</span>).<span class='id identifier rubyid_perform_now'>perform_now</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instantiate_job-instance_method">
  <h3 class='signature priv'>
    #<strong>instantiate_job</strong>(payload, skip_deserialize_arguments: false)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L729-L734'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='729' data-end='734'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 729</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instantiate_job'>instantiate_job</span>(<span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='label'>skip_deserialize_arguments:</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_job'>job</span> <span class='op'>=</span> <span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_job'>job</span>].<span class='id identifier rubyid_deserialize'>deserialize</span>(<span class='id identifier rubyid_payload'>payload</span>)
  <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_scheduled_at'>scheduled_at</span> <span class='op'>=</span> <span class='const'><a href="../Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>)
  <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_deserialize_arguments_if_needed'>deserialize_arguments_if_needed</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_skip_deserialize_arguments'>skip_deserialize_arguments</span>
  <span class='id identifier rubyid_job'>job</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="jobs_with-instance_method">
  <h3 class='signature priv'>
    #<strong>jobs_with</strong>(jobs, only: nil, except: nil, queue: nil, at: nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L661-L685'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='661' data-end='685'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 661</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_jobs_with'>jobs_with</span>(<span class='id identifier rubyid_jobs'>jobs</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_validate_option'><a href="#validate_option-instance_method" title="ActiveJob::TestHelper#validate_option (method)">validate_option</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span>)

  <span class='id identifier rubyid_jobs'>jobs</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_job'>job</span><span class='op'>|</span>
    <span class='id identifier rubyid_job_class'>job_class</span> <span class='op'>=</span> <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_job'>job</span>)

    <span class='kw'>if</span> <span class='id identifier rubyid_only'>only</span>
      <span class='kw'>next</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_filter_as_proc'><a href="#filter_as_proc-instance_method" title="ActiveJob::TestHelper#filter_as_proc (method)">filter_as_proc</a></span>(<span class='id identifier rubyid_only'>only</span>).<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_job'>job</span>)
    <span class='kw'>elsif</span> <span class='id identifier rubyid_except'>except</span>
      <span class='kw'>next</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_filter_as_proc'><a href="#filter_as_proc-instance_method" title="ActiveJob::TestHelper#filter_as_proc (method)">filter_as_proc</a></span>(<span class='id identifier rubyid_except'>except</span>).<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_job'>job</span>)
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_queue'>queue</span>
      <span class='kw'>next</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_queue'>queue</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_job'>job</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='id identifier rubyid_job_class'>job_class</span>.<span class='id identifier rubyid_queue_name'>queue_name</span>)
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_at'>at</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_job'>job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>]
      <span class='kw'>next</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_job'>job</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>] <span class='op'>&gt;</span> <span class='id identifier rubyid_at'>at</span>.<span class='id identifier rubyid_to_f'>to_f</span>
    <span class='kw'>end</span>

    <span class='kw'>yield</span> <span class='id identifier rubyid_job'>job</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="perform_enqueued_jobs-instance_method">
  <h3 class='signature '>
    #<strong>perform_enqueued_jobs</strong>(only: nil, except: nil, queue: nil, at: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Performs all enqueued jobs. If a block is given, performs all of the jobs that were enqueued throughout the duration of the block. If a block is not given, performs all of the enqueued jobs up to this point in the test.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_perform_enqueued_jobs'>test_perform_enqueued_jobs</span>
  <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span> <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>1</span>
<span class='kw'>end</span>

<span class='kw'>def</span> <span class='id identifier rubyid_test_perform_enqueued_jobs_without_block'>test_perform_enqueued_jobs_without_block</span>
  <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>)

  <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span>

  <span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>1</span>
<span class='kw'>end</span></code></pre>

<p>This method also supports filtering. If the <code>:only</code> option is specified, then only the listed job(s) will be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_perform_enqueued_jobs_with_only'>test_perform_enqueued_jobs_with_only</span>
  <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span>(<span class='label'>only:</span> <span class='const'>MyJob</span>) <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># will be performed
</span>    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># will not be performed
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>1</span>
<span class='kw'>end</span></code></pre>

<p>Also if the <code>:except</code> option is specified, then the job(s) except specific class will be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_perform_enqueued_jobs_with_except'>test_perform_enqueued_jobs_with_except</span>
  <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span>(<span class='label'>except:</span> <span class='const'>HelloJob</span>) <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># will be performed
</span>    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># will not be performed
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>1</span>
<span class='kw'>end</span></code></pre>

<p><code>:only</code> and <code>:except</code> options accept <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, <a href="../Array.html" title="Array (class)"><code>::Array</code></a> of <a href="../Class.html" title="Class (class)"><code>::Class</code></a>, or Proc. When passed a Proc, an instance of the job will be passed as argument.</p>

<p>If the <code>:queue</code> option is specified, then only the job(s) enqueued to a specific queue will be performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_perform_enqueued_jobs_with_queue'>test_perform_enqueued_jobs_with_queue</span>
  <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span> <span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_some_queue'>some_queue</span> <span class='kw'>do</span>
    <span class='const'>MyJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_some_queue'>some_queue</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># will be performed
</span>    <span class='const'>HelloJob</span>.<span class='id identifier rubyid_set'>set</span>(<span class='label'>queue:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_other_queue'>other_queue</span>).<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># will not be performed
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_assert_performed_jobs'><a href="#assert_performed_jobs-instance_method" title="ActiveJob::TestHelper#assert_performed_jobs (method)">assert_performed_jobs</a></span> <span class='int'>1</span>
<span class='kw'>end</span></code></pre>

<p>If the <code>:at</code> option is specified, then only jobs that have been enqueued to run at or before the given time will be performed. This includes jobs that have been enqueued without a time.</p>

<p>If queue_adapter_for_test is overridden to return a different adapter, <code>perform_enqueued_jobs</code> will merely execute the block.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L606-L637'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='606' data-end='637'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 606</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span>(<span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_flush_enqueued_jobs'><a href="#flush_enqueued_jobs-instance_method" title="ActiveJob::TestHelper#flush_enqueued_jobs (method)">flush_enqueued_jobs</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='label'>at:</span> <span class='id identifier rubyid_at'>at</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='kw'>return</span> <span class='id identifier rubyid__assert_nothing_raised_or_warn'>_assert_nothing_raised_or_warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>perform_enqueued_jobs</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_using_test_adapter?'><a href="#using_test_adapter%3F-instance_method" title="ActiveJob::TestHelper#using_test_adapter? (method)">using_test_adapter?</a></span>

  <span class='id identifier rubyid_validate_option'><a href="#validate_option-instance_method" title="ActiveJob::TestHelper#validate_option (method)">validate_option</a></span>(<span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span>)

  <span class='id identifier rubyid_old_perform_enqueued_jobs'>old_perform_enqueued_jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span>
  <span class='id identifier rubyid_old_perform_enqueued_at_jobs'>old_perform_enqueued_at_jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_perform_enqueued_at_jobs'>perform_enqueued_at_jobs</span>
  <span class='id identifier rubyid_old_filter'>old_filter</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_filter'>filter</span>
  <span class='id identifier rubyid_old_reject'>old_reject</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_reject'>reject</span>
  <span class='id identifier rubyid_old_queue'>old_queue</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_queue'>queue</span>
  <span class='id identifier rubyid_old_at'>old_at</span> <span class='op'>=</span> <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_at'>at</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_perform_enqueued_at_jobs'>perform_enqueued_at_jobs</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='id identifier rubyid_only'>only</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_reject'>reject</span> <span class='op'>=</span> <span class='id identifier rubyid_except'>except</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_queue'>queue</span> <span class='op'>=</span> <span class='id identifier rubyid_queue'>queue</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_at'>at</span> <span class='op'>=</span> <span class='id identifier rubyid_at'>at</span>

    <span class='id identifier rubyid__assert_nothing_raised_or_warn'>_assert_nothing_raised_or_warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>perform_enqueued_jobs</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_old_perform_enqueued_jobs'>old_perform_enqueued_jobs</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_perform_enqueued_at_jobs'>perform_enqueued_at_jobs</span> <span class='op'>=</span> <span class='id identifier rubyid_old_perform_enqueued_at_jobs'>old_perform_enqueued_at_jobs</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='id identifier rubyid_old_filter'>old_filter</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_reject'>reject</span> <span class='op'>=</span> <span class='id identifier rubyid_old_reject'>old_reject</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_queue'>queue</span> <span class='op'>=</span> <span class='id identifier rubyid_old_queue'>old_queue</span>
    <span class='id identifier rubyid_queue_adapter'><a href="#queue_adapter-instance_method" title="ActiveJob::TestHelper#queue_adapter (method)">queue_adapter</a></span>.<span class='id identifier rubyid_at'>at</span> <span class='op'>=</span> <span class='id identifier rubyid_old_at'>old_at</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="performed_jobs_with-instance_method">
  <h3 class='signature priv'>
    #<strong>performed_jobs_with</strong>(only: nil, except: nil, queue: nil, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L697-L699'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='697' data-end='699'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 697</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_performed_jobs_with'>performed_jobs_with</span>(<span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_jobs_with'><a href="#jobs_with-instance_method" title="ActiveJob::TestHelper#jobs_with (method)">jobs_with</a></span>(<span class='id identifier rubyid_performed_jobs'><a href="#performed_jobs-instance_method" title="ActiveJob::TestHelper#performed_jobs (method)">performed_jobs</a></span><span class='comma'>,</span> <span class='label'>only:</span> <span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='id identifier rubyid_except'>except</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_queue'>queue</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prepare_args_for_assertion-instance_method">
  <h3 class='signature priv'>
    #<strong>prepare_args_for_assertion</strong>(args)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L709-L720'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='709' data-end='720'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 709</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_args_for_assertion'>prepare_args_for_assertion</span>(<span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arguments'>arguments</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_arguments'>arguments</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_queue'>queue</span>].<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../Symbol.html" title="Symbol (class)">Symbol</a></span>)
      <span class='id identifier rubyid_arguments'>arguments</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_queue'>queue</span>] <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_queue'>queue</span>].<span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_arguments'>arguments</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>].<span class='id identifier rubyid_acts_like?'>acts_like?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_time'>time</span>)
      <span class='id identifier rubyid_at_range'>at_range</span> <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>] <span class='op'>-</span> <span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_arguments'>arguments</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>] <span class='op'>+</span> <span class='int'>1</span>
      <span class='id identifier rubyid_arguments'>arguments</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_at'>at</span>] <span class='op'>=</span> <span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_at'>at</span>) <span class='tlambeg'>{</span> <span class='id identifier rubyid_at_range'>at_range</span>.<span class='id identifier rubyid_cover?'>cover?</span>(<span class='id identifier rubyid_at'>at</span>) }
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="queue_adapter-instance_method">
  <h3 class='signature '>
    #<strong>queue_adapter</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Accesses the queue_adapter set by <a href="Base.html" title="ActiveJob::Base (class)"><code>Base</code></a>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_assert_job_has_custom_queue_adapter_set'>test_assert_job_has_custom_queue_adapter_set</span>
  <span class='id identifier rubyid_assert_instance_of'>assert_instance_of</span> <span class='const'>CustomQueueAdapter</span><span class='comma'>,</span> <span class='const'>HelloJob</span>.<span class='id identifier rubyid_queue_adapter'>queue_adapter</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L644-L646'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='644' data-end='646'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 644</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_queue_adapter'>queue_adapter</span>
  <span class='const'><a href="../ActiveJob.html" title="ActiveJob (module)">ActiveJob</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveJob::Base (class)">Base</a></span>.<span class='id identifier rubyid_queue_adapter'><a href="Base.html#queue_adapter-instance_method" title="ActiveJob::Base#queue_adapter (method)">queue_adapter</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="queue_adapter_changed_jobs-instance_method">
  <h3 class='signature priv'>
    #<strong>queue_adapter_changed_jobs</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L736-L741'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='736' data-end='741'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 736</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_queue_adapter_changed_jobs'>queue_adapter_changed_jobs</span>
  (<span class='const'><a href="../ActiveJob.html" title="ActiveJob (module)">ActiveJob</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveJob::Base (class)">Base</a></span>.<span class='id identifier rubyid_descendants'>descendants</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="../ActiveJob.html" title="ActiveJob (module)">ActiveJob</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveJob::Base (class)">Base</a></span>).<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klass'>klass</span><span class='op'>|</span>
    <span class='comment'># only override explicitly set adapters, a quirk of `class_attribute`
</span>    <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_singleton_class'>singleton_class</span>.<span class='id identifier rubyid_public_instance_methods'>public_instance_methods</span>(<span class='kw'>false</span>).<span class='id identifier rubyid_include?'>include?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid__queue_adapter'>_queue_adapter</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="queue_adapter_for_test-instance_method">
  <h3 class='signature '>
    #<strong>queue_adapter_for_test</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a queue adapter instance to use with all Active Job test helpers. By default, returns an instance of <a href="QueueAdapters/TestAdapter.html" title="ActiveJob::QueueAdapters::TestAdapter (class)"><code>QueueAdapters::TestAdapter</code></a>. Override this method to specify a different adapter. The adapter must implement the same interface as <a href="QueueAdapters/TestAdapter.html" title="ActiveJob::QueueAdapters::TestAdapter (class)"><code>QueueAdapters::TestAdapter</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L63-L65'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='63' data-end='65'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 63</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_queue_adapter_for_test'>queue_adapter_for_test</span>
  <span class='const'><a href="../ActiveJob.html" title="ActiveJob (module)">ActiveJob</a></span><span class='op'>::</span><span class='const'><a href="QueueAdapters.html" title="ActiveJob::QueueAdapters (module)">QueueAdapters</a></span><span class='op'>::</span><span class='const'><a href="QueueAdapters/TestAdapter.html" title="ActiveJob::QueueAdapters::TestAdapter (class)">TestAdapter</a></span>.<span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_option-instance_method">
  <h3 class='signature priv'>
    #<strong>validate_option</strong>(only: nil, except: nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activejob/lib/active_job/test_helper.rb#L743-L745'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='743' data-end='745'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activejob/lib/active_job/test_helper.rb', line 743</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_option'>validate_option</span>(<span class='label'>only:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot specify both `:only` and `:except` options.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_only'>only</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_except'>except</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>