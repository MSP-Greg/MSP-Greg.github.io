<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActionDispatch::Http::URL::DomainExtractor &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActionDispatch::Http::URL::DomainExtractor",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>Rails main</a> &raquo; 
      <a href='../../../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../../../ActionDispatch.html" title="ActionDispatch (module)">ActionDispatch</a> &raquo; 
        <a href="../../Http.html" title="ActionDispatch::Http (module)">Http</a> &raquo; 
        <a href="../URL.html" title="ActionDispatch::Http::URL (module)">URL</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>DomainExtractor&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActionDispatch::Http::URL::DomainExtractor</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/actionpack/lib/action_dispatch/http/url.rb#L28'>actionpack/lib/action_dispatch/http/url.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>DomainExtractor</code> provides utility methods for extracting domain and subdomain information from host strings. This module is used internally by Action Dispatch to parse host names and separate the domain from subdomains based on the top-level domain (TLD) length.</p>

<p>The module assumes a standard domain structure where domains consist of:</p>
<ul><li>
<p>Subdomains (optional, can be multiple levels)</p>
</li><li>
<p>Domain name</p>
</li><li>
<p>Top-level domain (TLD, can be multiple levels like <code>.co</code>.uk)</p>
</li></ul>

<p>For example, in “api.staging.example.co.uk”:</p>
<ul><li>
<p>Subdomains: [“api”, “staging”]</p>
</li><li>
<p>Domain: “example.co.uk” (with tld_length=2)</p>
</li><li>
<p>TLD: “co.uk”</p>
</li></ul>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#domain_from-instance_method" title="#domain_from (instance method)">#<strong>domain_from</strong>(host, tld_length)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Extracts the domain part from a host string, including the specified number of top-level domain components.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#subdomains_from-instance_method" title="#subdomains_from (instance method)">#<strong>subdomains_from</strong>(host, tld_length)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Extracts the subdomain components from a host string as an <a href="../../../Array.html" title="Array (class)"><code>::Array</code></a>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="domain_from-instance_method">
  <h3 class='signature  first'>
    #<strong>domain_from</strong>(host, tld_length)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Extracts the domain part from a host string, including the specified number of top-level domain components.</p>

<p>The domain includes the main domain name plus the TLD components. The <a href="../URL.html#tld_length-class_method" title="ActionDispatch::Http::URL.tld_length (method)">ActionDispatch::Http::URL.tld_length</a> parameter specifies how many components from the right should be considered part of the TLD.</p>

<h4 id="label-Parameters">Parameters</h4>
<dl class="rdoc-list label-list"><dt><code>host</code></dt>
<dd>
<p>The host string to extract the domain from.</p>
</dd><dt><code>tld_length</code></dt>
<dd>
<p>The number of domain components that make up the TLD. For example, use 1 for “.com” or 2 for “.co.uk”.</p>
</dd></dl>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='comment'># Standard TLD (tld_length = 1)
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_domain_from'>domain_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>www.example.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='comment'># =&gt; &quot;example.com&quot;
</span>
<span class='comment'># Country-code TLD (tld_length = 2)
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_domain_from'>domain_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>www.example.co.uk</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>)
<span class='comment'># =&gt; &quot;example.co.uk&quot;
</span>
<span class='comment'># Multiple subdomains
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_domain_from'>domain_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api.staging.myapp.herokuapp.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='comment'># =&gt; &quot;herokuapp.com&quot;
</span>
<span class='comment'># Single component (returns the host itself)
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_domain_from'>domain_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='comment'># =&gt; &quot;localhost&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/actionpack/lib/action_dispatch/http/url.rb#L64-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='64' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/http/url.rb', line 64</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_domain_from'>domain_from</span>(<span class='id identifier rubyid_host'><a href="../URL.html#host-instance_method" title="ActionDispatch::Http::URL#host (method)">host</a></span><span class='comma'>,</span> <span class='id identifier rubyid_tld_length'><a href="../URL.html#tld_length-class_method" title="ActionDispatch::Http::URL.tld_length (method)">tld_length</a></span>)
  <span class='id identifier rubyid_host'><a href="../URL.html#host-instance_method" title="ActionDispatch::Http::URL#host (method)">host</a></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span>(<span class='int'>1</span> <span class='op'>+</span> <span class='id identifier rubyid_tld_length'><a href="../URL.html#tld_length-class_method" title="ActionDispatch::Http::URL.tld_length (method)">tld_length</a></span>).<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="subdomains_from-instance_method">
  <h3 class='signature '>
    #<strong>subdomains_from</strong>(host, tld_length)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Extracts the subdomain components from a host string as an <a href="../../../Array.html" title="Array (class)"><code>::Array</code></a>.</p>

<p>Returns all the components that come before the domain and TLD parts. The <a href="../URL.html#tld_length-class_method" title="ActionDispatch::Http::URL.tld_length (method)">ActionDispatch::Http::URL.tld_length</a> parameter is used to determine where the domain begins so that everything before it is considered a subdomain.</p>

<h4 id="label-Parameters">Parameters</h4>
<dl class="rdoc-list label-list"><dt><code>host</code></dt>
<dd>
<p>The host string to extract subdomains from.</p>
</dd><dt><code>tld_length</code></dt>
<dd>
<p>The number of domain components that make up the TLD. This affects where the domain boundary is calculated.</p>
</dd></dl>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='comment'># Standard TLD (tld_length = 1)
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_subdomains_from'>subdomains_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>www.example.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='comment'># =&gt; [&quot;www&quot;]
</span>
<span class='comment'># Country-code TLD (tld_length = 2)
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_subdomains_from'>subdomains_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api.staging.example.co.uk</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>)
<span class='comment'># =&gt; [&quot;api&quot;, &quot;staging&quot;]
</span>
<span class='comment'># No subdomains
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_subdomains_from'>subdomains_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>example.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='comment'># =&gt; []
</span>
<span class='comment'># Single subdomain with complex TLD
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_subdomains_from'>subdomains_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>www.mysite.co.uk</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>)
<span class='comment'># =&gt; [&quot;www&quot;]
</span>
<span class='comment'># Multiple levels of subdomains
</span><span class='const'>DomainExtractor</span>.<span class='id identifier rubyid_subdomains_from'>subdomains_from</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dev.api.staging.example.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)
<span class='comment'># =&gt; [&quot;dev&quot;, &quot;api&quot;, &quot;staging&quot;]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/actionpack/lib/action_dispatch/http/url.rb#L104-L107'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='104' data-end='107'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/http/url.rb', line 104</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_subdomains_from'>subdomains_from</span>(<span class='id identifier rubyid_host'><a href="../URL.html#host-instance_method" title="ActionDispatch::Http::URL#host (method)">host</a></span><span class='comma'>,</span> <span class='id identifier rubyid_tld_length'><a href="../URL.html#tld_length-class_method" title="ActionDispatch::Http::URL.tld_length (method)">tld_length</a></span>)
  <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_host'><a href="../URL.html#host-instance_method" title="ActionDispatch::Http::URL#host (method)">host</a></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_parts'>parts</span>[<span class='int'>0</span><span class='op'>..</span><span class='op'>-</span>(<span class='id identifier rubyid_tld_length'><a href="../URL.html#tld_length-class_method" title="ActionDispatch::Http::URL.tld_length (method)">tld_length</a></span> <span class='op'>+</span> <span class='int'>2</span>)]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>