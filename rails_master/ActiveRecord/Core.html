<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveRecord::Core &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::Core",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails main</a> &raquo; 
      <a href='../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Core&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveRecord::Core</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="Core/ClassMethods.html" title="ActiveRecord::Core::ClassMethods (module)"><code>ClassMethods</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Core/InspectionMask.html" title="ActiveRecord::Core::InspectionMask (class)"><code>InspectionMask</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="Base.html" title="ActiveRecord::Base (class)"><code>Base</code></a>
      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)"><code>::ActiveSupport::Concern</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a class='nodoc' href="../ActiveModel/Access.html" title="ActiveModel::Access (module)"><code>::ActiveModel::Access</code></a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L9'>activerecord/lib/active_record/core.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)"><code>::ActiveSupport::Concern</code></a> - Extended</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Concern.html#class_methods-instance_method" title="ActiveSupport::Concern#class_methods (method)">class_methods</a></td>
      <td><div class='inline'><p>Define class methods from given block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">included</a></td>
      <td><div class='inline'><p>Evaluate given block in context of base class, so that you can write class macros here.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Concern.html#prepended-instance_method" title="ActiveSupport::Concern#prepended (method)">prepended</a></td>
      <td><div class='inline'><p>Evaluate given block in context of base class, so that you can write class macros here.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="../ActiveSupport/Concern.html#append_features-instance_method" title="ActiveSupport::Concern#append_features (method)">append_features</a>,
        <a class='i_m nodoc' href="../ActiveSupport/Concern.html#prepend_features-instance_method" title="ActiveSupport::Concern#prepend_features (method)">prepend_features</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#frozen%3F-instance_method" title="#frozen? (instance method)">#<strong>frozen?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the attributes hash has been frozen.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#readonly%3F-instance_method" title="#readonly? (instance method)">#<strong>readonly?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the record is read only.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#strict_loading%3F-instance_method" title="#strict_loading? (instance method)">#<strong>strict_loading?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the record is in strict_loading mode.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#strict_loading_all%3F-instance_method" title="#strict_loading_all? (instance method)">#<strong>strict_loading_all?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the record uses strict_loading with <code>:all</code> mode enabled.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#strict_loading_mode-instance_method" title="#strict_loading_mode (instance method)">#<strong>strict_loading_mode</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#strict_loading_n_plus_one_only%3F-instance_method" title="#strict_loading_n_plus_one_only? (instance method)">#<strong>strict_loading_n_plus_one_only?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the record uses strict_loading with <code>:n_plus_one_only</code> mode enabled.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#custom_inspect_method_defined%3F-instance_method" title="#custom_inspect_method_defined? (instance method)">#<strong>custom_inspect_method_defined?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#blank%3F-instance_method" title="#blank? (instance method)">#<strong>blank?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#present%3F-instance_method" title="#present? (instance method)">#<strong>present?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<=>-instance_method" title="#&lt;=&gt; (instance method)">#<strong>&lt;=&gt;</strong>(other_object)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Allows sort on objects.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#==-instance_method" title="#== (instance method)">#<strong>==</strong>(comparison_object)  </a>
      (also: #eql?)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true if <code>comparison_object</code> is the same exact object, or <code>comparison_object</code> is of the same type and <code>self</code> has an ID and it is equal to <code>comparison_object.id</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#all_attributes_for_inspect-instance_method" title="#all_attributes_for_inspect (instance method)">#<strong>all_attributes_for_inspect</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#attributes_for_inspect-instance_method" title="#attributes_for_inspect (instance method)">#<strong>attributes_for_inspect</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clone-instance_method" title="#clone (instance method)">#<strong>clone</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Identical to Ruby’s clone method.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#connection_handler-instance_method" title="#connection_handler (instance method)">#<strong>connection_handler</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dup-instance_method" title="#dup (instance method)">#<strong>dup</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Duped objects have no id assigned and are treated as new records.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encode_with-instance_method" title="#encode_with (instance method)">#<strong>encode_with</strong>(coder)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Populate <code>coder</code> with attributes about this record that should be serialized.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eql%3F-instance_method" title="#eql? (instance method)">#<strong>eql?</strong>(comparison_object)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#==-instance_method" title="ActiveRecord::Core#== (method)">#==</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#freeze-instance_method" title="#freeze (instance method)">#<strong>freeze</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Clone and freeze the attributes hash such that associations are still accessible, even on destroyed records, but cloned models will not be frozen.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#full_inspect-instance_method" title="#full_inspect (instance method)">#<strong>full_inspect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns all attributes of the record as a nicely formatted string, ignoring <a href="#attributes_for_inspect-instance_method" title="ActiveRecord::Core#attributes_for_inspect (method)">#attributes_for_inspect</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hash-instance_method" title="#hash (instance method)">#<strong>hash</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Delegates to id in order to allow two records of the same type and id to work with something like:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#init_with-instance_method" title="#init_with (instance method)">#<strong>init_with</strong>(coder, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize an empty model object from <code>coder</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(attributes = nil) {|_self| ... } </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>New objects can be instantiated as either empty (pass no construction parameter) or pre-set with attributes but not yet saved (pass a hash with key names matching the associated table column names).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the attributes of the record as a nicely formatted string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect_with_attributes-instance_method" title="#inspect_with_attributes (instance method)">#<strong>inspect_with_attributes</strong>(attributes_to_list)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspection_filter-instance_method" title="#inspection_filter (instance method)">#<strong>inspection_filter</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pretty_print-instance_method" title="#pretty_print (instance method)">#<strong>pretty_print</strong>(pp)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes a PP and prettily prints this record to it, allowing you to get a nice result from <code>pp record</code> when pp is required.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readonly!-instance_method" title="#readonly! (instance method)">#<strong>readonly!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Prevents records from being written to the database:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#slice-instance_method" title="#slice (instance method)">#<strong>slice</strong>(*methods)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash of the given methods with their names as keys and returned values as values.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#strict_loading!-instance_method" title="#strict_loading! (instance method)">#<strong>strict_loading!</strong>(value = true, mode: :all)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the record to strict_loading mode.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(*methods)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of the values returned by the given methods.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#init_internals-instance_method" title="#init_internals (instance method)">#<strong>init_internals</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#initialize_internals_callback-instance_method" title="#initialize_internals_callback (instance method)">#<strong>initialize_internals_callback</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#to_ary-instance_method" title="#to_ary (instance method)">#<strong>to_ary</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p><code>Array#flatten</code> will call <a href="#to_ary-instance_method" title="ActiveRecord::Core#to_ary (method)">#to_ary</a> (recursively) on each of the elements of the array, and then rescues from the possible <code>NoMethodError</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#init_attributes-instance_method" title="#init_attributes (instance method)">#<strong>init_attributes</strong>(_)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#init_with_attributes-instance_method" title="#init_with_attributes (instance method)">#<strong>init_with_attributes</strong>(attributes, new_record = false) {|_self| ... } </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize an empty model object from <code>attributes</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#initialize_dup-instance_method" title="#initialize_dup (instance method)">#<strong>initialize_dup</strong>(other)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited nodoc'><a href="../ActiveModel/Access.html" title="ActiveModel::Access (module)"><code>::ActiveModel::Access</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="../ActiveModel/Access.html#slice-instance_method" title="ActiveModel::Access#slice (method)">#slice</a>,
        <a class='i_m nodoc' href="../ActiveModel/Access.html#values_at-instance_method" title="ActiveModel::Access#values_at (method)">#values_at</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>DSL Calls</h2>
<section class='method_details first' id="included-dslcall">
<h3 class='signature'><strong>included</strong></h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L13-L262'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 13</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_included'>included</span> <span class='kw'>do</span>
  <span class='comment'>##
</span>  <span class='comment'># :singleton-method:
</span>  <span class='comment'>#
</span>  <span class='comment'># Accepts a logger conforming to the interface of Log4r or the default
</span>  <span class='comment'># Ruby Logger class, which is then passed on to any new database
</span>  <span class='comment'># connections made. You can retrieve this logger by calling logger on
</span>  <span class='comment'># either an Active Record model class or an Active Record model instance.
</span>  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid__destroy_association_async_job'>_destroy_association_async_job</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ActiveRecord::DestroyAssociationAsyncJob</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># The job class used to destroy associations in the background.
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_destroy_association_async_job'>destroy_association_async_job</span>
    <span class='kw'>if</span> <span class='id identifier rubyid__destroy_association_async_job'>_destroy_association_async_job</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../String.html" title="String (class)">String</a></span>)
      <span class='kw'>self</span>.<span class='id identifier rubyid__destroy_association_async_job'>_destroy_association_async_job</span> <span class='op'>=</span> <span class='id identifier rubyid__destroy_association_async_job'>_destroy_association_async_job</span>.<span class='id identifier rubyid_constantize'>constantize</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid__destroy_association_async_job'>_destroy_association_async_job</span>
  <span class='kw'>rescue</span> <span class='const'><a href="../NameError.html" title="NameError (class)">NameError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../NameError.html" title="NameError (class)">NameError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to load destroy_association_async_job: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span>.<span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_singleton_class'>singleton_class</span>.<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_destroy_association_async_job='>destroy_association_async_job=</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid__destroy_association_async_job='>_destroy_association_async_job=</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_destroy_association_async_job'>destroy_association_async_job</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='kw'>class</span>

  <span class='comment'>##
</span>  <span class='comment'># :singleton-method:
</span>  <span class='comment'>#
</span>  <span class='comment'># Specifies the maximum number of records that will be destroyed in a
</span>  <span class='comment'># single background job by the &lt;tt&gt;dependent: :destroy_async&lt;/tt&gt;
</span>  <span class='comment'># association option. When nil (default), all dependent records will be
</span>  <span class='comment'># destroyed in a single background job. If specified, the records to be
</span>  <span class='comment'># destroyed will be split into multiple background jobs.
</span>  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_destroy_association_async_batch_size'>destroy_association_async_batch_size</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>instance_predicate:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span>

  <span class='comment'>##
</span>  <span class='comment'># Contains the database configuration - as is typically stored in config/database.yml -
</span>  <span class='comment'># as an ActiveRecord::DatabaseConfigurations object.
</span>  <span class='comment'>#
</span>  <span class='comment'># For example, the following database.yml...
</span>  <span class='comment'>#
</span>  <span class='comment'>#   development:
</span>  <span class='comment'>#     adapter: sqlite3
</span>  <span class='comment'>#     database: storage/development.sqlite3
</span>  <span class='comment'>#
</span>  <span class='comment'>#   production:
</span>  <span class='comment'>#     adapter: sqlite3
</span>  <span class='comment'>#     database: storage/production.sqlite3
</span>  <span class='comment'>#
</span>  <span class='comment'># ...would result in ActiveRecord::Base.configurations to look like this:
</span>  <span class='comment'>#
</span>  <span class='comment'>#   #&lt;ActiveRecord::DatabaseConfigurations:0x00007fd1acbdf800 @configurations=[
</span>  <span class='comment'>#     #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbded10 @env_name=&quot;development&quot;,
</span>  <span class='comment'>#       @name=&quot;primary&quot;, @config={adapter: &quot;sqlite3&quot;, database: &quot;storage/development.sqlite3&quot;}&gt;,
</span>  <span class='comment'>#     #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbdea90 @env_name=&quot;production&quot;,
</span>  <span class='comment'>#       @name=&quot;primary&quot;, @config={adapter: &quot;sqlite3&quot;, database: &quot;storage/production.sqlite3&quot;}&gt;
</span>  <span class='comment'>#   ]&gt;
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_configurations='>configurations=</span>(<span class='id identifier rubyid_config'>config</span>)
    <span class='cvar'>@@configurations</span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="DatabaseConfigurations.html" title="ActiveRecord::DatabaseConfigurations (class)">DatabaseConfigurations</a></span>.<span class='id identifier rubyid_new'><a href="DatabaseConfigurations.html#new-class_method" title="ActiveRecord::DatabaseConfigurations.new (method)">new</a></span>(<span class='id identifier rubyid_config'>config</span>)
  <span class='kw'>end</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_configurations'>configurations</span> <span class='op'>=</span> {}

  <span class='comment'># Returns a fully resolved ActiveRecord::DatabaseConfigurations object.
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_configurations'>configurations</span>
    <span class='cvar'>@@configurations</span>
  <span class='kw'>end</span>

  <span class='comment'>##
</span>  <span class='comment'># :singleton-method:
</span>  <span class='comment'># Force enumeration of all columns in SELECT statements.
</span>  <span class='comment'># e.g. &lt;tt&gt;SELECT first_name, last_name FROM ...&lt;/tt&gt; instead of &lt;tt&gt;SELECT * FROM ...&lt;/tt&gt;
</span>  <span class='comment'># This avoids PreparedStatementCacheExpired errors when a column is added
</span>  <span class='comment'># to the database while the app is running.
</span>  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_enumerate_columns_in_select_statements'>enumerate_columns_in_select_statements</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_belongs_to_required_by_default'>belongs_to_required_by_default</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_strict_loading_by_default'>strict_loading_by_default</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_strict_loading_mode'><a href="#strict_loading_mode-instance_method" title="ActiveRecord::Core#strict_loading_mode (method)">strict_loading_mode</a></span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_has_many_inversing'>has_many_inversing</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_run_commit_callbacks_on_first_saved_instances_in_transaction'>run_commit_callbacks_on_first_saved_instances_in_transaction</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_default_connection_handler'>default_connection_handler</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_default_role'>default_role</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_default_shard'>default_shard</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_shard_selector'>shard_selector</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span>

  <span class='comment'>##
</span>  <span class='comment'># :singleton-method:
</span>  <span class='comment'>#
</span>  <span class='comment'># Specifies the attributes that will be included in the output of the
</span>  <span class='comment'># #inspect method:
</span>  <span class='comment'>#
</span>  <span class='comment'>#   Post.attributes_for_inspect = [:id, :title]
</span>  <span class='comment'>#   Post.first.inspect #=&gt; &quot;#&lt;Post id: 1, title: &quot;Hello, World!&quot;&gt;&quot;
</span>  <span class='comment'>#
</span>  <span class='comment'># When set to :all inspect will list all the record&#39;s attributes:
</span>  <span class='comment'>#
</span>  <span class='comment'>#   Post.attributes_for_inspect = :all
</span>  <span class='comment'>#   Post.first.inspect #=&gt; &quot;#&lt;Post id: 1, title: &quot;Hello, World!&quot;, published_at: &quot;2023-10-23 14:28:11 +0000&quot;&gt;&quot;
</span>  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_attributes_for_inspect'><a href="#attributes_for_inspect-instance_method" title="ActiveRecord::Core#attributes_for_inspect (method)">attributes_for_inspect</a></span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_application_record_class?'>application_record_class?</span> <span class='comment'># :nodoc:
</span>    <span class='kw'>if</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_application_record_class'><a href="../ActiveRecord.html#application_record_class-instance_method" title="ActiveRecord#application_record_class (method)">application_record_class</a></span>
      <span class='kw'>self</span> <span class='op'>==</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_application_record_class'><a href="../ActiveRecord.html#application_record_class-instance_method" title="ActiveRecord#application_record_class (method)">application_record_class</a></span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>ApplicationRecord</span>) <span class='op'>&amp;&amp;</span> <span class='kw'>self</span> <span class='op'>==</span> <span class='const'>ApplicationRecord</span>
        <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>.<span class='id identifier rubyid_filter_attributes'>filter_attributes</span> <span class='op'>=</span> []

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_connection_handler'><a href="#connection_handler-instance_method" title="ActiveRecord::Core#connection_handler (method)">connection_handler</a></span>
    <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/IsolatedExecutionState.html" title="ActiveSupport::IsolatedExecutionState (module)">IsolatedExecutionState</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_active_record_connection_handler'>active_record_connection_handler</span>] <span class='op'>||</span> <span class='id identifier rubyid_default_connection_handler'>default_connection_handler</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_connection_handler='>connection_handler=</span>(<span class='id identifier rubyid_handler'>handler</span>)
    <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/IsolatedExecutionState.html" title="ActiveSupport::IsolatedExecutionState (module)">IsolatedExecutionState</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_active_record_connection_handler'>active_record_connection_handler</span>] <span class='op'>=</span> <span class='id identifier rubyid_handler'>handler</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_asynchronous_queries_session'>asynchronous_queries_session</span> <span class='comment'># :nodoc:
</span>    <span class='id identifier rubyid_asynchronous_queries_tracker'>asynchronous_queries_tracker</span>.<span class='id identifier rubyid_current_session'>current_session</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_asynchronous_queries_tracker'>asynchronous_queries_tracker</span> <span class='comment'># :nodoc:
</span>    <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/IsolatedExecutionState.html" title="ActiveSupport::IsolatedExecutionState (module)">IsolatedExecutionState</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_active_record_asynchronous_queries_tracker'>active_record_asynchronous_queries_tracker</span>] <span class='op'>||=</span> \
      <span class='const'><a href="AsynchronousQueriesTracker.html" title="ActiveRecord::AsynchronousQueriesTracker (class)">AsynchronousQueriesTracker</a></span>.<span class='id identifier rubyid_new'><a href="AsynchronousQueriesTracker.html#new-class_method" title="ActiveRecord::AsynchronousQueriesTracker.new (method)">new</a></span>
  <span class='kw'>end</span>

  <span class='comment'># Returns the symbol representing the current connected role.
</span>  <span class='comment'>#
</span>  <span class='comment'>#   ActiveRecord::Base.connected_to(role: :writing) do
</span>  <span class='comment'>#     ActiveRecord::Base.current_role #=&gt; :writing
</span>  <span class='comment'>#   end
</span>  <span class='comment'>#
</span>  <span class='comment'>#   ActiveRecord::Base.connected_to(role: :reading) do
</span>  <span class='comment'>#     ActiveRecord::Base.current_role #=&gt; :reading
</span>  <span class='comment'>#   end
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_current_role'>current_role</span>
    <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span>.<span class='id identifier rubyid_reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span><span class='op'>|</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_role'>role</span>] <span class='kw'>if</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_role'>role</span>] <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>)
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_role'>role</span>] <span class='kw'>if</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_role'>role</span>] <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_connection_class_for_self'>connection_class_for_self</span>)
    <span class='kw'>end</span>

    <span class='id identifier rubyid_default_role'>default_role</span>
  <span class='kw'>end</span>

  <span class='comment'># Returns the symbol representing the current connected shard.
</span>  <span class='comment'>#
</span>  <span class='comment'>#   ActiveRecord::Base.connected_to(role: :reading) do
</span>  <span class='comment'>#     ActiveRecord::Base.current_shard #=&gt; :default
</span>  <span class='comment'>#   end
</span>  <span class='comment'>#
</span>  <span class='comment'>#   ActiveRecord::Base.connected_to(role: :writing, shard: :one) do
</span>  <span class='comment'>#     ActiveRecord::Base.current_shard #=&gt; :one
</span>  <span class='comment'>#   end
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_current_shard'>current_shard</span>
    <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span>.<span class='id identifier rubyid_reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span><span class='op'>|</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_shard'>shard</span>] <span class='kw'>if</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_shard'>shard</span>] <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>)
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_shard'>shard</span>] <span class='kw'>if</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_shard'>shard</span>] <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_connection_class_for_self'>connection_class_for_self</span>)
    <span class='kw'>end</span>

    <span class='id identifier rubyid_default_shard'>default_shard</span>
  <span class='kw'>end</span>

  <span class='comment'># Returns the symbol representing the current setting for
</span>  <span class='comment'># preventing writes.
</span>  <span class='comment'>#
</span>  <span class='comment'>#   ActiveRecord::Base.connected_to(role: :reading) do
</span>  <span class='comment'>#     ActiveRecord::Base.current_preventing_writes #=&gt; true
</span>  <span class='comment'>#   end
</span>  <span class='comment'>#
</span>  <span class='comment'>#   ActiveRecord::Base.connected_to(role: :writing) do
</span>  <span class='comment'>#     ActiveRecord::Base.current_preventing_writes #=&gt; false
</span>  <span class='comment'>#   end
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_current_preventing_writes'>current_preventing_writes</span>
    <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span>.<span class='id identifier rubyid_reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span><span class='op'>|</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>] <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>].<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>)
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>] <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>].<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_connection_class_for_self'>connection_class_for_self</span>)
    <span class='kw'>end</span>

    <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># Intended to behave like `.current_preventing_writes` given the class name as input.
</span>  <span class='comment'># See PoolConfig and ConnectionHandler::ConnectionDescriptor.
</span>  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_preventing_writes?'>preventing_writes?</span>(<span class='id identifier rubyid_class_name'>class_name</span>) <span class='comment'># :nodoc:
</span>    <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span>.<span class='id identifier rubyid_reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span><span class='op'>|</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>] <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>].<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>)
      <span class='kw'>return</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>] <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prevent_writes'>prevent_writes</span>].<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_hash'><a href="#hash-instance_method" title="ActiveRecord::Core#hash (method)">hash</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_klasses'>klasses</span>].<span class='id identifier rubyid_any?'>any?</span> { <span class='op'>|</span><span class='id identifier rubyid_klass'>klass</span><span class='op'>|</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_class_name'>class_name</span> }
    <span class='kw'>end</span>

    <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span> <span class='comment'># :nodoc:
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span> <span class='op'>=</span> <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/IsolatedExecutionState.html" title="ActiveSupport::IsolatedExecutionState (module)">IsolatedExecutionState</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_active_record_connected_to_stack'>active_record_connected_to_stack</span>]
      <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>.<span class='id identifier rubyid_new'>new</span>
      <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/IsolatedExecutionState.html" title="ActiveSupport::IsolatedExecutionState (module)">IsolatedExecutionState</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_active_record_connected_to_stack'>active_record_connected_to_stack</span>] <span class='op'>=</span> <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span>
      <span class='id identifier rubyid_connected_to_stack'>connected_to_stack</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_connection_class='>connection_class=</span>(<span class='id identifier rubyid_b'>b</span>) <span class='comment'># :nodoc:
</span>    <span class='ivar'>@connection_class</span> <span class='op'>=</span> <span class='id identifier rubyid_b'>b</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_connection_class'>connection_class</span> <span class='comment'># :nodoc:
</span>    <span class='ivar'>@connection_class</span> <span class='op'>||=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_connection_class?'>connection_class?</span> <span class='comment'># :nodoc:
</span>    <span class='kw'>self</span>.<span class='id identifier rubyid_connection_class'>connection_class</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_connection_class_for_self'>connection_class_for_self</span> <span class='comment'># :nodoc:
</span>    <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='kw'>self</span>

    <span class='kw'>until</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>==</span> <span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_connection_class?'>connection_class?</span>
      <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_superclass'>superclass</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_klass'>klass</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>.<span class='id identifier rubyid_default_connection_handler'>default_connection_handler</span> <span class='op'>=</span> <span class='const'><a href="ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a></span><span class='op'>::</span><span class='const'><a href="ConnectionAdapters/ConnectionHandler.html" title="ActiveRecord::ConnectionAdapters::ConnectionHandler (class)">ConnectionHandler</a></span>.<span class='id identifier rubyid_new'><a href="ConnectionAdapters/ConnectionHandler.html#new-class_method" title="ActiveRecord::ConnectionAdapters::ConnectionHandler.new (method)">new</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_default_role'>default_role</span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_writing_role'><a href="../ActiveRecord.html#writing_role-instance_method" title="ActiveRecord#writing_role (method)">writing_role</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_default_shard'>default_shard</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_default'>default</span>

  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_strict_loading_violation!'>strict_loading_violation!</span>(<span class='label'>owner:</span><span class='comma'>,</span> <span class='label'>reflection:</span>) <span class='comment'># :nodoc:
</span>    <span class='kw'>case</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_action_on_strict_loading_violation'><a href="../ActiveRecord.html#action_on_strict_loading_violation-class_method" title="ActiveRecord.action_on_strict_loading_violation (method)">action_on_strict_loading_violation</a></span>
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_raise'>raise</span>
      <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_reflection'>reflection</span>.<span class='id identifier rubyid_strict_loading_violation_message'>strict_loading_violation_message</span>(<span class='id identifier rubyid_owner'>owner</span>)
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="StrictLoadingViolationError.html" title="ActiveRecord::StrictLoadingViolationError (class)">StrictLoadingViolationError</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_message'>message</span>)
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_log'>log</span>
      <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>strict_loading_violation.active_record</span><span class='tstring_end'>&quot;</span></span>
      <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/Notifications.html" title="ActiveSupport::Notifications (module)">Notifications</a></span>.<span class='id identifier rubyid_instrument'><a href="../ActiveSupport/Notifications.html#instrument-class_method" title="ActiveSupport::Notifications.instrument (method)">instrument</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>owner:</span> <span class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span class='label'>reflection:</span> <span class='id identifier rubyid_reflection'>reflection</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="blank?-instance_method">
  <h3 class='signature ro  nodoc first'>
    #<strong>blank?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L678-L680'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='678' data-end='680'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 678</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_blank?'>blank?</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="custom_inspect_method_defined?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>custom_inspect_method_defined?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L857-L859'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='857' data-end='859'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 857</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_custom_inspect_method_defined?'>custom_inspect_method_defined?</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_instance_method'>instance_method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="ActiveRecord::Core#inspect (method)">inspect</a></span>).<span class='id identifier rubyid_owner'>owner</span> <span class='op'>!=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>.<span class='id identifier rubyid_instance_method'>instance_method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="ActiveRecord::Core#inspect (method)">inspect</a></span>).<span class='id identifier rubyid_owner'>owner</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="frozen?-instance_method">
  <h3 class='signature ro'>
    #<strong>frozen?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the attributes hash has been frozen.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L661-L663'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='661' data-end='663'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 661</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_frozen?'>frozen?</span>
  <span class='ivar'>@attributes</span>.<span class='id identifier rubyid_frozen?'>frozen?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="present?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>present?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L674-L676'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='674' data-end='676'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 674</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_present?'>present?</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readonly?-instance_method">
  <h3 class='signature ro'>
    #<strong>readonly?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the record is read only.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L683-L685'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='683' data-end='685'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 683</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_readonly?'>readonly?</span>
  <span class='ivar'>@readonly</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strict_loading?-instance_method">
  <h3 class='signature ro'>
    #<strong>strict_loading?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the record is in strict_loading mode.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L688-L690'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='688' data-end='690'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 688</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_strict_loading?'>strict_loading?</span>
  <span class='ivar'>@strict_loading</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strict_loading_all?-instance_method">
  <h3 class='signature ro'>
    #<strong>strict_loading_all?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the record uses strict_loading with <code>:all</code> mode enabled.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L740-L742'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='740' data-end='742'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 740</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_strict_loading_all?'>strict_loading_all?</span>
  <span class='ivar'>@strict_loading_mode</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strict_loading_mode-instance_method">
  <h3 class='signature ro'>
    #<strong>strict_loading_mode</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L732-L732'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='732' data-end='732'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 732</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_strict_loading_mode'>strict_loading_mode</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strict_loading_n_plus_one_only?-instance_method">
  <h3 class='signature ro'>
    #<strong>strict_loading_n_plus_one_only?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the record uses strict_loading with <code>:n_plus_one_only</code> mode enabled.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L735-L737'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='735' data-end='737'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 735</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_strict_loading_n_plus_one_only?'>strict_loading_n_plus_one_only?</span>
  <span class='ivar'>@strict_loading_mode</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_n_plus_one_only'>n_plus_one_only</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<=>-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;=&gt;</strong>(other_object)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Allows sort on objects</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L666-L672'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='666' data-end='672'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 666</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>&lt;=&gt;</span>(<span class='id identifier rubyid_other_object'>other_object</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_other_object'>other_object</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>)
    <span class='id identifier rubyid_to_key'>to_key</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other_object'>other_object</span>.<span class='id identifier rubyid_to_key'>to_key</span>
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="==-instance_method">
  <h3 class='signature '>
    #<strong>==</strong>(comparison_object)  
    <span class='aliases'>Also known as: <span class='names'>#eql?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true if <code>comparison_object</code> is the same exact object, or <code>comparison_object</code> is of the same type and <code>self</code> has an ID and it is equal to <code>comparison_object.id</code>.</p>

<p>Note that new records are different from any other record by definition, unless the other record is the receiver itself. Besides, if you fetch existing records with <code>select</code> and leave the ID out, you’re on your own, this predicate will return false.</p>

<p>Note also that destroying a record preserves its ID in the model instance, so deleted models are still comparable.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L632-L637'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='632' data-end='637'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 632</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>==</span>(<span class='id identifier rubyid_comparison_object'>comparison_object</span>)
  <span class='kw'>super</span> <span class='op'>||</span>
    <span class='id identifier rubyid_comparison_object'>comparison_object</span>.<span class='id identifier rubyid_instance_of?'>instance_of?</span>(<span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>) <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_primary_key_values_present?'>primary_key_values_present?</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_comparison_object'>comparison_object</span>.<span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="all_attributes_for_inspect-instance_method">
  <h3 class='signature '>
    #<strong>all_attributes_for_inspect</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L891-L895'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='891' data-end='895'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 891</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_all_attributes_for_inspect'>all_attributes_for_inspect</span>
  <span class='kw'>return</span> [] <span class='kw'>unless</span> <span class='ivar'>@attributes</span>

  <span class='id identifier rubyid_attribute_names'>attribute_names</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attributes_for_inspect-instance_method">
  <h3 class='signature '>
    #<strong>attributes_for_inspect</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L887-L889'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='887' data-end='889'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 887</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attributes_for_inspect'>attributes_for_inspect</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_attributes_for_inspect'>attributes_for_inspect</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span> <span class='op'>?</span> <span class='id identifier rubyid_all_attributes_for_inspect'><a href="#all_attributes_for_inspect-instance_method" title="ActiveRecord::Core#all_attributes_for_inspect (method)">all_attributes_for_inspect</a></span> <span class='op'>:</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_attributes_for_inspect'>attributes_for_inspect</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clone-instance_method">
  <h3 class='signature '>
    #<strong>clone</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Identical to Ruby’s clone method.  This is a “shallow” copy.  Be warned that your attributes are not copied. That means that modifying attributes of the clone will modify the original, since they will both point to the same attributes hash. If you need a copy of your attributes hash, please use the <a href="#dup-instance_method" title="ActiveRecord::Core#dup (method)">#dup</a> method.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>User</span>.<span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_new_user'>new_user</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_clone'>clone</span>
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_name'>name</span>               <span class='comment'># =&gt; &quot;Bob&quot;
</span><span class='id identifier rubyid_new_user'>new_user</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Joe</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_name'>name</span>               <span class='comment'># =&gt; &quot;Joe&quot;
</span>
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_object_id'>object_id</span> <span class='op'>==</span> <span class='id identifier rubyid_new_user'>new_user</span>.<span class='id identifier rubyid_object_id'>object_id</span>            <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_object_id'>object_id</span> <span class='op'>==</span> <span class='id identifier rubyid_new_user'>new_user</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_object_id'>object_id</span>  <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_object_id'>object_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_dup'><a href="#dup-instance_method" title="ActiveRecord::Core#dup (method)">dup</a></span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_object_id'>object_id</span>  <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L524-L524'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='524' data-end='524'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 524</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_rdoc_method'>rdoc_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_method'>method</span><span class='op'>:</span> <span class='id identifier rubyid_clone'>clone</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="connection_handler-instance_method">
  <h3 class='signature '>
    #<strong>connection_handler</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L771-L773'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='771' data-end='773'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 771</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_connection_handler'>connection_handler</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_connection_handler'>connection_handler</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dup-instance_method">
  <h3 class='signature '>
    #<strong>dup</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Duped objects have no id assigned and are treated as new records. Note that this is a “shallow” copy as it copies the object’s attributes only, not its associations. The extent of a “deep” copy is application specific and is therefore left to the application to implement according to its need. The dup method does not preserve the timestamps (created|updated)_(at|on) and locking column.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L541-L541'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='541' data-end='541'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 541</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_rdoc_method'>rdoc_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_method'>method</span><span class='op'>:</span> <span class='id identifier rubyid_dup'>dup</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encode_with-instance_method">
  <h3 class='signature '>
    #<strong>encode_with</strong>(coder)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Populate <code>coder</code> with attributes about this record that should be serialized. The structure of <code>coder</code> defined in this method is guaranteed to match the structure of <code>coder</code> passed to the <a href="#init_with-instance_method" title="ActiveRecord::Core#init_with (method)">#init_with</a> method.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_coder'>coder</span> <span class='op'>=</span> {}
<span class='const'>Post</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_encode_with'>encode_with</span>(<span class='id identifier rubyid_coder'>coder</span>)
<span class='id identifier rubyid_coder'>coder</span> <span class='comment'># =&gt; {&quot;attributes&quot; =&gt; {&quot;id&quot; =&gt; nil, ... }}</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L588-L592'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='588' data-end='592'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 588</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_encode_with'>encode_with</span>(<span class='id identifier rubyid_coder'>coder</span>)
  <span class='const'><a href="../ActiveModel.html" title="ActiveModel (module)">ActiveModel</a></span><span class='op'>::</span><span class='const'><a href="../ActiveModel/AttributeSet.html" title="ActiveModel::AttributeSet (class)">AttributeSet</a></span><span class='op'>::</span><span class='const'><a href="../ActiveModel/AttributeSet/YAMLEncoder.html" title="ActiveModel::AttributeSet::YAMLEncoder (module)">YAMLEncoder</a></span>.<span class='id identifier rubyid_encode'><a href="../ActiveModel/AttributeSet/YAMLEncoder.html#encode-instance_method" title="ActiveModel::AttributeSet::YAMLEncoder#encode (method)">encode</a></span>(<span class='ivar'>@attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_coder'>coder</span><span class='comma'>,</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_attribute_types'>attribute_types</span>)
  <span class='id identifier rubyid_coder'>coder</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new_record</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
  <span class='id identifier rubyid_coder'>coder</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>active_record_yaml_version</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='int'>2</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eql?-instance_method">
  <h3 class='signature '>
    #<strong>eql?</strong>(comparison_object)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#==-instance_method" title="ActiveRecord::Core#== (method)">#==</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L638-L638'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='638' data-end='638'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 638</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_eql?'>eql?</span> <span class='symbeg'>:</span><span class='op'>==</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="freeze-instance_method">
  <h3 class='signature '>
    #<strong>freeze</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Clone and freeze the attributes hash such that associations are still accessible, even on destroyed records, but cloned models will not be frozen.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L655-L658'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='655' data-end='658'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 655</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_freeze'>freeze</span>
  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='ivar'>@attributes</span>.<span class='id identifier rubyid_clone'><a href="#clone-instance_method" title="ActiveRecord::Core#clone (method)">clone</a></span>.<span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="full_inspect-instance_method">
  <h3 class='signature '>
    #<strong>full_inspect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns all attributes of the record as a nicely formatted string, ignoring <a href="#attributes_for_inspect-instance_method" title="ActiveRecord::Core#attributes_for_inspect (method)">#attributes_for_inspect</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Post</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_full_inspect'>full_inspect</span>
<span class='comment'>#=&gt; &quot;#&lt;Post id: 1, title: &quot;Hello, World!&quot;, published_at: &quot;2023-10-23 14:28:11 +0000&quot;&gt;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L795-L797'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='795' data-end='797'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 795</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_full_inspect'>full_inspect</span>
  <span class='id identifier rubyid_inspect_with_attributes'><a href="#inspect_with_attributes-instance_method" title="ActiveRecord::Core#inspect_with_attributes (method)">inspect_with_attributes</a></span>(<span class='id identifier rubyid_all_attributes_for_inspect'><a href="#all_attributes_for_inspect-instance_method" title="ActiveRecord::Core#all_attributes_for_inspect (method)">all_attributes_for_inspect</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="hash-instance_method">
  <h3 class='signature '>
    #<strong>hash</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Delegates to id in order to allow two records of the same type and id to work with something like:</p>

<pre class="code ruby"><code class="ruby">[ <span class='const'>Person</span>.<span class='id identifier rubyid_find'>find</span>(<span class='int'>1</span>)<span class='comma'>,</span> <span class='const'>Person</span>.<span class='id identifier rubyid_find'>find</span>(<span class='int'>2</span>)<span class='comma'>,</span> <span class='const'>Person</span>.<span class='id identifier rubyid_find'>find</span>(<span class='int'>3</span>) ] <span class='op'>&amp;</span> [ <span class='const'>Person</span>.<span class='id identifier rubyid_find'>find</span>(<span class='int'>1</span>)<span class='comma'>,</span> <span class='const'>Person</span>.<span class='id identifier rubyid_find'>find</span>(<span class='int'>4</span>) ] <span class='comment'># =&gt; [ Person.find(1) ]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L642-L650'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='642' data-end='650'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 642</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_hash'>hash</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_id'>id</span>

  <span class='kw'>if</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_composite_primary_key?'>composite_primary_key?</span> <span class='op'>?</span> <span class='id identifier rubyid_primary_key_values_present?'>primary_key_values_present?</span> <span class='op'>:</span> <span class='id identifier rubyid_id'>id</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_hash'>hash</span> <span class='op'>^</span> <span class='id identifier rubyid_id'>id</span>.<span class='id identifier rubyid_hash'>hash</span>
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="init_attributes-instance_method">
  <h3 class='signature nodoc'>
    #<strong>init_attributes</strong>(_)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L564-L574'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='564' data-end='574'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 564</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_init_attributes'>init_attributes</span>(<span class='id identifier rubyid__'>_</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='ivar'>@attributes</span>.<span class='id identifier rubyid_deep_dup'>deep_dup</span>

  <span class='kw'>if</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_composite_primary_key?'>composite_primary_key?</span>
    <span class='ivar'>@primary_key</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_attrs'>attrs</span>.<span class='id identifier rubyid_reset'>reset</span>(<span class='id identifier rubyid_key'>key</span>) }
  <span class='kw'>else</span>
    <span class='id identifier rubyid_attrs'>attrs</span>.<span class='id identifier rubyid_reset'>reset</span>(<span class='ivar'>@primary_key</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_attrs'>attrs</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="init_internals-instance_method">
  <h3 class='signature priv'>
    #<strong>init_internals</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L837-L852'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='837' data-end='852'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 837</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_init_internals'>init_internals</span>
  <span class='ivar'>@readonly</span>                 <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@previously_new_record</span>    <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@destroyed</span>                <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@marked_for_destruction</span>   <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@destroyed_by_association</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@_start_transaction_state</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>

  <span class='ivar'>@primary_key</span>         <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_primary_key'>primary_key</span>
  <span class='ivar'>@strict_loading</span>      <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_strict_loading_by_default'>strict_loading_by_default</span>
  <span class='ivar'>@strict_loading_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_strict_loading_mode'><a href="#strict_loading_mode-instance_method" title="ActiveRecord::Core#strict_loading_mode (method)">strict_loading_mode</a></span>

  <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_define_attribute_methods'>define_attribute_methods</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="init_with-instance_method">
  <h3 class='signature '>
    #<strong>init_with</strong>(coder, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize an empty model object from <code>coder</code>. <code>coder</code> should be the result of previously encoding an Active Record model, using <a href="#encode_with-instance_method" title="ActiveRecord::Core#encode_with (method)">#encode_with</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_old_post'>old_post</span> <span class='op'>=</span> <span class='const'>Post</span>.<span class='id identifier rubyid_new'>new</span>(<span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello world</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_coder'>coder</span> <span class='op'>=</span> {}
<span class='id identifier rubyid_old_post'>old_post</span>.<span class='id identifier rubyid_encode_with'><a href="#encode_with-instance_method" title="ActiveRecord::Core#encode_with (method)">encode_with</a></span>(<span class='id identifier rubyid_coder'>coder</span>)

<span class='id identifier rubyid_post'>post</span> <span class='op'>=</span> <span class='const'>Post</span>.<span class='id identifier rubyid_allocate'>allocate</span>
<span class='id identifier rubyid_post'>post</span>.<span class='id identifier rubyid_init_with'>init_with</span>(<span class='id identifier rubyid_coder'>coder</span>)
<span class='id identifier rubyid_post'>post</span>.<span class='id identifier rubyid_title'>title</span> <span class='comment'># =&gt; &#39;hello world&#39;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L499-L503'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='499' data-end='503'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 499</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_init_with'>init_with</span>(<span class='id identifier rubyid_coder'>coder</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_coder'>coder</span> <span class='op'>=</span> <span class='const'><a href="LegacyYamlAdapter.html" title="ActiveRecord::LegacyYamlAdapter (module)">LegacyYamlAdapter</a></span>.<span class='id identifier rubyid_convert'><a href="LegacyYamlAdapter.html#convert-class_method" title="ActiveRecord::LegacyYamlAdapter.convert (method)">convert</a></span>(<span class='id identifier rubyid_coder'>coder</span>)
  <span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span> <span class='const'><a href="../ActiveModel.html" title="ActiveModel (module)">ActiveModel</a></span><span class='op'>::</span><span class='const'><a href="../ActiveModel/AttributeSet.html" title="ActiveModel::AttributeSet (class)">AttributeSet</a></span><span class='op'>::</span><span class='const'><a href="../ActiveModel/AttributeSet/YAMLEncoder.html" title="ActiveModel::AttributeSet::YAMLEncoder (module)">YAMLEncoder</a></span>.<span class='id identifier rubyid_decode'><a href="../ActiveModel/AttributeSet/YAMLEncoder.html#decode-instance_method" title="ActiveModel::AttributeSet::YAMLEncoder#decode (method)">decode</a></span>(<span class='id identifier rubyid_coder'>coder</span><span class='comma'>,</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_attribute_types'>attribute_types</span>)
  <span class='id identifier rubyid_init_with_attributes'><a href="#init_with_attributes-instance_method" title="ActiveRecord::Core#init_with_attributes (method)">init_with_attributes</a></span>(<span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_coder'>coder</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new_record</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="init_with_attributes-instance_method">
  <h3 class='signature nodoc'>
    #<strong>init_with_attributes</strong>(attributes, new_record = false) {|_self| ... } 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize an empty model object from <code>attributes</code>. <code>attributes</code> should be an attributes object, and unlike the <a href="#initialize-instance_method" title="ActiveRecord::Core#initialize (method)">#initialize</a> method, no assignment calls are made per attribute.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<code>_self</code>)</span>
  </li>
</ul>
<p class='tag_title'>Yield Parameters:</p>
<ul class='yieldparam'>
  <li>
    <span class='name'>_self</span>
    <span class='type'>(<code>Core</code>)</span>
&mdash;    <div class='inline'>
<p>the object that the method was called on</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L509-L521'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='509' data-end='521'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 509</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_init_with_attributes'>init_with_attributes</span>(<span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_new_record'>new_record</span> <span class='op'>=</span> <span class='kw'>false</span>) <span class='comment'># :nodoc:
</span>  <span class='ivar'>@new_record</span> <span class='op'>=</span> <span class='id identifier rubyid_new_record'>new_record</span>
  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_attributes'>attributes</span>

  <span class='id identifier rubyid_init_internals'><a href="#init_internals-instance_method" title="ActiveRecord::Core#init_internals (method)">init_internals</a></span>

  <span class='kw'>yield</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='id identifier rubyid__run_find_callbacks'>_run_find_callbacks</span>
  <span class='id identifier rubyid__run_initialize_callbacks'>_run_initialize_callbacks</span>

  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize-instance_method">
  <h3 class='signature '>
    #<strong>initialize</strong>(attributes = nil) {|_self| ... } 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>New objects can be instantiated as either empty (pass no construction parameter) or pre-set with attributes but not yet saved (pass a hash with key names matching the associated table column names). In both instances, valid attribute keys are determined by the column names of the associated table – hence you can’t have attributes that aren’t part of the table columns.</p>

<h4 id="label-Example">Example</h4>

<pre class="code ruby"><code class="ruby"><span class='comment'># Instantiates a single new object
</span><span class='const'>User</span>.<span class='id identifier rubyid_new'>new</span>(<span class='label'>first_name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Jamie</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<code>_self</code>)</span>
  </li>
</ul>
<p class='tag_title'>Yield Parameters:</p>
<ul class='yieldparam'>
  <li>
    <span class='name'>_self</span>
    <span class='type'>(<code>Core</code>)</span>
&mdash;    <div class='inline'>
<p>the object that the method was called on</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L472-L483'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='472' data-end='483'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 472</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='ivar'>@new_record</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid__default_attributes'>_default_attributes</span>.<span class='id identifier rubyid_deep_dup'>deep_dup</span>

  <span class='id identifier rubyid_init_internals'><a href="#init_internals-instance_method" title="ActiveRecord::Core#init_internals (method)">init_internals</a></span>
  <span class='id identifier rubyid_initialize_internals_callback'><a href="#initialize_internals_callback-instance_method" title="ActiveRecord::Core#initialize_internals_callback (method)">initialize_internals_callback</a></span>

  <span class='kw'>super</span>

  <span class='kw'>yield</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid__run_initialize_callbacks'>_run_initialize_callbacks</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_dup-instance_method">
  <h3 class='signature nodoc'>
    #<strong>initialize_dup</strong>(other)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L551-L562'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='551' data-end='562'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 551</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_dup'>initialize_dup</span>(<span class='id identifier rubyid_other'>other</span>) <span class='comment'># :nodoc:
</span>  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_init_attributes'><a href="#init_attributes-instance_method" title="ActiveRecord::Core#init_attributes (method)">init_attributes</a></span>(<span class='id identifier rubyid_other'>other</span>)

  <span class='id identifier rubyid__run_initialize_callbacks'>_run_initialize_callbacks</span>

  <span class='ivar'>@new_record</span>               <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@previously_new_record</span>    <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@destroyed</span>                <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@_start_transaction_state</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_internals_callback-instance_method">
  <h3 class='signature priv'>
    #<strong>initialize_internals_callback</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L854-L855'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='854' data-end='855'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 854</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_internals_callback'>initialize_internals_callback</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the attributes of the record as a nicely formatted string.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Post</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'>#=&gt; &quot;#&lt;Post id: 1, title: &quot;Hello, World!&quot;, published_at: &quot;2023-10-23 14:28:11 +0000&quot;&gt;&quot;</span></code></pre>

<p>The attributes can be limited by setting <a href="#attributes_for_inspect-instance_method" title="ActiveRecord::Core#attributes_for_inspect (method)">#attributes_for_inspect</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Post</span>.<span class='id identifier rubyid_attributes_for_inspect'><a href="#attributes_for_inspect-instance_method" title="ActiveRecord::Core#attributes_for_inspect (method)">attributes_for_inspect</a></span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_title'>title</span>]
<span class='const'>Post</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'>#=&gt; &quot;#&lt;Post id: 1, title: &quot;Hello, World!&quot;&gt;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L785-L787'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='785' data-end='787'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 785</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_inspect_with_attributes'><a href="#inspect_with_attributes-instance_method" title="ActiveRecord::Core#inspect_with_attributes (method)">inspect_with_attributes</a></span>(<span class='id identifier rubyid_attributes_for_inspect'><a href="#attributes_for_inspect-instance_method" title="ActiveRecord::Core#attributes_for_inspect (method)">attributes_for_inspect</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect_with_attributes-instance_method">
  <h3 class='signature '>
    #<strong>inspect_with_attributes</strong>(attributes_to_list)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L872-L885'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='872' data-end='885'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 872</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect_with_attributes'>inspect_with_attributes</span>(<span class='id identifier rubyid_attributes_to_list'>attributes_to_list</span>)
  <span class='id identifier rubyid_inspection'>inspection</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='ivar'>@attributes</span>
    <span class='id identifier rubyid_attributes_to_list'>attributes_to_list</span>.<span class='id identifier rubyid_filter_map'>filter_map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
      <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span>
      <span class='kw'>if</span> <span class='id identifier rubyid__has_attribute?'>_has_attribute?</span>(<span class='id identifier rubyid_name'>name</span>)
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attribute_for_inspect'>attribute_for_inspect</span>(<span class='id identifier rubyid_name'>name</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not initialized</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_inspection'>inspection</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspection_filter-instance_method">
  <h3 class='signature '>
    #<strong>inspection_filter</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L868-L870'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='868' data-end='870'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 868</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspection_filter'>inspection_filter</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_inspection_filter'>inspection_filter</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pretty_print-instance_method">
  <h3 class='signature '>
    #<strong>pretty_print</strong>(pp)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes a PP and prettily prints this record to it, allowing you to get a nice result from <code>pp record</code> when pp is required.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L801-L822'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='801' data-end='822'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 801</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pretty_print'>pretty_print</span>(<span class='id identifier rubyid_pp'>pp</span>)
  <span class='kw'>return</span> <span class='kw'>super</span> <span class='kw'>if</span> <span class='id identifier rubyid_custom_inspect_method_defined?'><a href="#custom_inspect_method_defined%3F-instance_method" title="ActiveRecord::Core#custom_inspect_method_defined? (method)">custom_inspect_method_defined?</a></span>
  <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_object_address_group'>object_address_group</span>(<span class='kw'>self</span>) <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='ivar'>@attributes</span>
      <span class='id identifier rubyid_attr_names'>attr_names</span> <span class='op'>=</span> <span class='id identifier rubyid_attributes_for_inspect'><a href="#attributes_for_inspect-instance_method" title="ActiveRecord::Core#attributes_for_inspect (method)">attributes_for_inspect</a></span>.<span class='id identifier rubyid_select'>select</span> { <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid__has_attribute?'>_has_attribute?</span>(<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span>) }
      <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_seplist'>seplist</span>(<span class='id identifier rubyid_attr_names'>attr_names</span><span class='comma'>,</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span> }) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span>
        <span class='id identifier rubyid_attr_name'>attr_name</span> <span class='op'>=</span> <span class='id identifier rubyid_attr_name'>attr_name</span>.<span class='id identifier rubyid_to_s'>to_s</span>
        <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_breakable'>breakable</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_group'>group</span>(<span class='int'>1</span>) <span class='kw'>do</span>
          <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_text'>text</span> <span class='id identifier rubyid_attr_name'>attr_name</span>
          <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_breakable'>breakable</span>
          <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute_for_inspect'>attribute_for_inspect</span>(<span class='id identifier rubyid_attr_name'>attr_name</span>)
          <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_text'>text</span> <span class='id identifier rubyid_value'>value</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_breakable'>breakable</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_pp'>pp</span>.<span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not initialized</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readonly!-instance_method">
  <h3 class='signature '>
    #<strong>readonly!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Prevents records from being written to the database:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span>.<span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_readonly!'>readonly!</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_save'>save</span> <span class='comment'># raises ActiveRecord::ReadOnlyRecord
</span>
<span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span>.<span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_readonly!'>readonly!</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_update'>update</span>(<span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>New Name</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># raises ActiveRecord::ReadOnlyRecord</span></code></pre>

<p>Read-only records cannot be deleted from the database either:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span>.<span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_readonly!'>readonly!</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_destroy'>destroy</span> <span class='comment'># raises ActiveRecord::ReadOnlyRecord</span></code></pre>

<p>Please, note that the objects themselves are still mutable in memory:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_customer'>customer</span> <span class='op'>=</span> <span class='const'>Customer</span>.<span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_readonly!'>readonly!</span>
<span class='id identifier rubyid_customer'>customer</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>New Name</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># OK</span></code></pre>

<p>but you won’t be able to persist the changes.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L767-L769'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='767' data-end='769'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 767</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_readonly!'>readonly!</span>
  <span class='ivar'>@readonly</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="slice-instance_method">
  <h3 class='signature '>
    #<strong>slice</strong>(*methods)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash of the given methods with their names as keys and returned values as values.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_topic'>topic</span> <span class='op'>=</span> <span class='const'>Topic</span>.<span class='id identifier rubyid_new'>new</span>(<span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Budget</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>author_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jason</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_topic'>topic</span>.<span class='id identifier rubyid_slice'>slice</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_author_name'>author_name</span>)
<span class='comment'># =&gt; { &quot;title&quot; =&gt; &quot;Budget&quot;, &quot;author_name&quot; =&gt; &quot;Jason&quot; }</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L595-L595'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='595' data-end='595'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 595</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_rdoc_method'>rdoc_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_method'>method</span><span class='op'>:</span> <span class='id identifier rubyid_slice'>slice</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strict_loading!-instance_method">
  <h3 class='signature '>
    #<strong>strict_loading!</strong>(value = true, mode: :all)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the record to strict_loading mode. This will raise an error if the record tries to lazily load an association.</p>

<p>NOTE: Strict loading is disabled during validation in order to let the record validate its association.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>User</span>.<span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_strict_loading!'>strict_loading!</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_address'>address</span>.<span class='id identifier rubyid_city'>city</span>
<span class='comment'># =&gt; ActiveRecord::StrictLoadingViolationError
</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_comments'>comments</span>.<span class='id identifier rubyid_to_a'>to_a</span>
<span class='comment'># =&gt; ActiveRecord::StrictLoadingViolationError</span></code></pre>

<h4 id="label-Parameters">Parameters</h4>
<ul><li>
<p><code>value</code> - Boolean specifying whether to enable or disable strict loading.</p>
</li><li>
<p><code>:mode</code> - <a href="../Symbol.html" title="Symbol (class)"><code>::Symbol</code></a> specifying strict loading mode. Defaults to <code>:all</code>. Using :n_plus_one_only mode will only raise an error if an association that will lead to an n plus one query is lazily loaded.</p>
</li></ul>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>User</span>.<span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_strict_loading!'>strict_loading!</span>(<span class='kw'>false</span>) <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_address'>address</span>.<span class='id identifier rubyid_city'>city</span> <span class='comment'># =&gt; &quot;Tatooine&quot;
</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_comments'>comments</span>.<span class='id identifier rubyid_to_a'>to_a</span> <span class='comment'># =&gt; [#&lt;Comment:0x00...]
</span>
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_strict_loading!'>strict_loading!</span>(<span class='label'>mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_n_plus_one_only'>n_plus_one_only</span>)
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_address'>address</span>.<span class='id identifier rubyid_city'>city</span> <span class='comment'># =&gt; &quot;Tatooine&quot;
</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_comments'>comments</span>.<span class='id identifier rubyid_to_a'>to_a</span> <span class='comment'># =&gt; [#&lt;Comment:0x00...]
</span><span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_comments'>comments</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_ratings'>ratings</span>.<span class='id identifier rubyid_to_a'>to_a</span>
<span class='comment'># =&gt; ActiveRecord::StrictLoadingViolationError</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L723-L730'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='723' data-end='730'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 723</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_strict_loading!'>strict_loading!</span>(<span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span>)
  <span class='kw'>unless</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_n_plus_one_only'>n_plus_one_only</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_mode'>mode</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The :mode option must be one of [:all, :n_plus_one_only] but </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="ActiveRecord::Core#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> was provided.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@strict_loading_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_mode'>mode</span>
  <span class='ivar'>@strict_loading</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_ary-instance_method">
  <h3 class='signature priv'>
    #<strong>to_ary</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>Array#flatten</code> will call <code>#to_ary</code> (recursively) on each of the elements of the array, and then rescues from the possible <code>NoMethodError</code>. If those elements are <a href="Base.html" title="ActiveRecord::Base (class)"><code>Base</code></a>‘s, then this triggers the various <code>method_missing</code>’s that we have, which significantly impacts upon performance.</p>

<p>So we can avoid the <code>method_missing</code> hit by explicitly defining <code>#to_ary</code> as <code>nil</code> here.</p>

<p>See also <a href="https://tenderlovemaking.com/2011/06/28/til-its-ok-to-return-nil-from-to_ary.html">tenderlovemaking.com/2011/06/28/til-its-ok-to-return-nil-from-to_ary.html</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L833-L835'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='833' data-end='835'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 833</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_ary'>to_ary</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="values_at-instance_method">
  <h3 class='signature '>
    #<strong>values_at</strong>(*methods)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of the values returned by the given methods.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_topic'>topic</span> <span class='op'>=</span> <span class='const'>Topic</span>.<span class='id identifier rubyid_new'>new</span>(<span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Budget</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>author_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jason</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_topic'>topic</span>.<span class='id identifier rubyid_values_at'>values_at</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_author_name'>author_name</span>)
<span class='comment'># =&gt; [&quot;Budget&quot;, &quot;Jason&quot;]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/core.rb#L610-L610'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='610' data-end='610'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/core.rb', line 610</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_rdoc_method'>rdoc_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_method'>method</span><span class='op'>:</span> <span class='id identifier rubyid_values_at'>values_at</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>