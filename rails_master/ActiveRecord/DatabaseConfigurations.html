<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveRecord::DatabaseConfigurations &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::DatabaseConfigurations",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails main</a> &raquo; 
      <a href='../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>DatabaseConfigurations&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActiveRecord::DatabaseConfigurations</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="DatabaseConfigurations/ConnectionUrlResolver.html" title="ActiveRecord::DatabaseConfigurations::ConnectionUrlResolver (class)"><code>ConnectionUrlResolver</code></a>,
        <a class='nodoc' href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfig</code></a>,
        <a href="DatabaseConfigurations/HashConfig.html" title="ActiveRecord::DatabaseConfigurations::HashConfig (class)"><code>HashConfig</code></a>,
        <a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)"><code>UrlConfig</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="DatabaseConfigurations/InvalidConfigurationError.html" title="ActiveRecord::DatabaseConfigurations::InvalidConfigurationError (class)"><code>InvalidConfigurationError</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L23'>activerecord/lib/active_record/database_configurations.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations/connection_url_resolver.rb#L8'>activerecord/lib/active_record/database_configurations/connection_url_resolver.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations/database_config.rb#L4'>activerecord/lib/active_record/database_configurations/database_config.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations/hash_config.rb#L6'>activerecord/lib/active_record/database_configurations/hash_config.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations/url_config.rb#L4'>activerecord/lib/active_record/database_configurations/url_config.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>DatabaseConfigurations</code> returns an array of <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfig</code></a> objects that are constructed from the application’s database configuration hash or URL string.</p>

<p>The array of <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfig</code></a> objects in an application default to either a <a href="DatabaseConfigurations/HashConfig.html" title="ActiveRecord::DatabaseConfigurations::HashConfig (class)"><code>HashConfig</code></a> or <a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)"><code>UrlConfig</code></a>. You can retrieve your application’s config by using <a href="Base.html#configurations-class_method" title="ActiveRecord::Base.configurations (method)">Base.configurations</a>.</p>

<p>If you register a custom handler, objects will be created according to the conditions of the handler. See <a href="#register_db_config_handler-class_method" title="ActiveRecord::DatabaseConfigurations.register_db_config_handler (method)">.register_db_config_handler</a> for more on registering custom handlers.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(configurations = {})  &#x21d2; DatabaseConfigurations </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#register_db_config_handler-class_method" title=".register_db_config_handler (class method)">.<strong>register_db_config_handler</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Allows an application to register a custom handler for database configuration objects.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#blank%3F-instance_method" title="#blank? (instance method)">#<strong>blank?</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#empty%3F-instance_method" title="ActiveRecord::DatabaseConfigurations#empty? (method)">#empty?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#configurations-instance_method" title="#configurations (instance method)">#<strong>configurations</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
      (also: #blank?)
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks if the application’s configurations are empty.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#db_config_handlers-instance_method" title="#db_config_handlers (instance method)">#<strong>db_config_handlers</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#any%3F-instance_method" title="#any? (instance method)">#<strong>any?</strong>  &#x21d2; Boolean </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#configs_for-instance_method" title="#configs_for (instance method)">#<strong>configs_for</strong>(env_name: nil, name: nil, config_key: nil, include_hidden: false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Collects the configs for the environment and optionally the specification name passed in.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#find_db_config-instance_method" title="#find_db_config (instance method)">#<strong>find_db_config</strong>(env)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a single <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfig</code></a> object based on the requested environment.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_configs-instance_method" title="#build_configs (instance method)">#<strong>build_configs</strong>(configs)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_configuration_sentence-instance_method" title="#build_configuration_sentence (instance method)">#<strong>build_configuration_sentence</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_db_config_from_hash-instance_method" title="#build_db_config_from_hash (instance method)">#<strong>build_db_config_from_hash</strong>(env_name, name, config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_db_config_from_raw_config-instance_method" title="#build_db_config_from_raw_config (instance method)">#<strong>build_db_config_from_raw_config</strong>(env_name, name, config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_db_config_from_string-instance_method" title="#build_db_config_from_string (instance method)">#<strong>build_db_config_from_string</strong>(env_name, name, config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#default_env-instance_method" title="#default_env (instance method)">#<strong>default_env</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#env_with_configs-instance_method" title="#env_with_configs (instance method)">#<strong>env_with_configs</strong>(env = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#environment_url_config-instance_method" title="#environment_url_config (instance method)">#<strong>environment_url_config</strong>(env, name, config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#environment_value_for-instance_method" title="#environment_value_for (instance method)">#<strong>environment_value_for</strong>(name)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#merge_db_environment_variables-instance_method" title="#merge_db_environment_variables (instance method)">#<strong>merge_db_environment_variables</strong>(current_env, configs)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#resolve_symbol_connection-instance_method" title="#resolve_symbol_connection (instance method)">#<strong>resolve_symbol_connection</strong>(name)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#walk_configs-instance_method" title="#walk_configs (instance method)">#<strong>walk_configs</strong>(env_name, config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#primary%3F-instance_method" title="#primary? (instance method)">#<strong>primary?</strong>(name)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>A primary configuration is one that is named primary or if there is no primary, the first configuration for an environment will be treated as primary.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#resolve-instance_method" title="#resolve (instance method)">#<strong>resolve</strong>(config)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns fully resolved connection, accepts hash, string or symbol.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(configurations = {})  &#x21d2; <code>DatabaseConfigurations</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L75-L77'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='75' data-end='77'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 75</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span> <span class='op'>=</span> {})
  <span class='ivar'>@configurations</span> <span class='op'>=</span> <span class='id identifier rubyid_build_configs'><a href="#build_configs-instance_method" title="ActiveRecord::DatabaseConfigurations#build_configs (method)">build_configs</a></span>(<span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="register_db_config_handler-class_method">
  <h3 class='signature  first'>
    .<strong>register_db_config_handler</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Allows an application to register a custom handler for database configuration objects. This is useful for creating a custom handler that responds to methods your application needs but Active Record doesn’t implement. For example if you are using Vitess, you may want your Vitess configurations to respond to <code>sharded?</code>. To implement this define the following in an initializer:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span>.<span class='id identifier rubyid_on_load'><a href="../ActiveSupport/LazyLoadHooks.html#on_load-instance_method" title="ActiveSupport::LazyLoadHooks#on_load (method)">on_load</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_active_record_database_configurations'>active_record_database_configurations</span>) <span class='kw'>do</span>
  <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>DatabaseConfigurations</span>.<span class='id identifier rubyid_register_db_config_handler'>register_db_config_handler</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_vitess'>vitess</span>)
    <span class='const'>VitessConfig</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::DatabaseConfigurations.new (method)">new</a></span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Note: applications must handle the condition in which custom config should be created in your handler registration otherwise all objects will use the custom handler.</p>

<p>Then define your <code>VitessConfig</code> to respond to the methods your application needs. It is recommended that you inherit from one of the existing database config classes to avoid having to reimplement all methods. Custom config handlers should only implement methods Active Record does not.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>VitessConfig</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>DatabaseConfigurations</span><span class='op'>::</span><span class='const'><a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)">UrlConfig</a></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_sharded?'>sharded?</span>
    <span class='id identifier rubyid_configuration_hash'>configuration_hash</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sharded</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>For configs that have a <code>:vitess</code> key, a <code>VitessConfig</code> object will be created instead of a <a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)"><code>DatabaseConfigurations::UrlConfig</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L63-L65'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='63' data-end='65'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 63</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_register_db_config_handler'>register_db_config_handler</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_db_config_handlers'><a href="#db_config_handlers-instance_method" title="ActiveRecord::DatabaseConfigurations#db_config_handlers (method)">db_config_handlers</a></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="blank?-instance_method">
  <h3 class='signature ro first'>
    #<strong>blank?</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#empty%3F-instance_method" title="ActiveRecord::DatabaseConfigurations#empty? (method)">#empty?</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L155-L155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='155' data-end='155'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 155</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_empty?'><a href="#empty%3F-instance_method" title="ActiveRecord::DatabaseConfigurations#empty? (method)">empty?</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="configurations-instance_method">
  <h3 class='signature ro'>
    #<strong>configurations</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L26-L26'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='26' data-end='26'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 26</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_configurations'>configurations</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="db_config_handlers-instance_method">
  <h3 class='signature rw  nodoc'>
    #<strong>db_config_handlers</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L29-L29'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='29' data-end='29'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 29</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_singleton_class'>singleton_class</span>.<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_db_config_handlers'>db_config_handlers</span> <span class='comment'># :nodoc:</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="empty?-instance_method">
  <h3 class='signature ro'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#blank?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Checks if the application’s configurations are empty.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L152-L154'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='152' data-end='154'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 152</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>.<span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="any?-instance_method">
  <h3 class='signature  first'>
    #<strong>any?</strong>  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L27-L27'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='27' data-end='27'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 27</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_any?'>any?</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_configs-instance_method">
  <h3 class='signature priv'>
    #<strong>build_configs</strong>(configs)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L202-L219'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='202' data-end='219'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 202</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_configs'>build_configs</span>(<span class='id identifier rubyid_configs'>configs</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>DatabaseConfigurations</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_configs'>configs</span> <span class='kw'>if</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>)

  <span class='id identifier rubyid_db_configs'>db_configs</span> <span class='op'>=</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_flat_map'>flat_map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_all?'>all?</span>(<span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span>)
      <span class='id identifier rubyid_walk_configs'><a href="#walk_configs-instance_method" title="ActiveRecord::DatabaseConfigurations#walk_configs (method)">walk_configs</a></span>(<span class='id identifier rubyid_env_name'>env_name</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_build_db_config_from_raw_config'><a href="#build_db_config_from_raw_config-instance_method" title="ActiveRecord::DatabaseConfigurations#build_db_config_from_raw_config (method)">build_db_config_from_raw_config</a></span>(<span class='id identifier rubyid_env_name'>env_name</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_find'>find</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_for_current_env?'>for_current_env?</span>)
    <span class='id identifier rubyid_db_configs'>db_configs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_environment_url_config'><a href="#environment_url_config-instance_method" title="ActiveRecord::DatabaseConfigurations#environment_url_config (method)">environment_url_config</a></span>(<span class='id identifier rubyid_default_env'><a href="#default_env-instance_method" title="ActiveRecord::DatabaseConfigurations#default_env (method)">default_env</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> {})
  <span class='kw'>end</span>

  <span class='id identifier rubyid_merge_db_environment_variables'><a href="#merge_db_environment_variables-instance_method" title="ActiveRecord::DatabaseConfigurations#merge_db_environment_variables (method)">merge_db_environment_variables</a></span>(<span class='id identifier rubyid_default_env'><a href="#default_env-instance_method" title="ActiveRecord::DatabaseConfigurations#default_env (method)">default_env</a></span><span class='comma'>,</span> <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_compact'>compact</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_configuration_sentence-instance_method">
  <h3 class='signature priv'>
    #<strong>build_configuration_sentence</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L241-L252'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='241' data-end='252'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 241</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_configuration_sentence'>build_configuration_sentence</span>
  <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::DatabaseConfigurations#configs_for (method)">configs_for</a></span>(<span class='label'>include_hidden:</span> <span class='kw'>true</span>)

  <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_group_by'>group_by</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_env_name'>env_name</span>).<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='op'>|</span>
    <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env'>env</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_names'>names</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_env'>env</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_db_config_from_hash-instance_method">
  <h3 class='signature priv'>
    #<strong>build_db_config_from_hash</strong>(env_name, name, config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L275-L286'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='275' data-end='286'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 275</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_db_config_from_hash'>build_db_config_from_hash</span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_url'>url</span>]
  <span class='id identifier rubyid_config_without_url'>config_without_url</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_config_without_url'>config_without_url</span>.<span class='id identifier rubyid_delete'>delete</span> <span class='symbeg'>:</span><span class='id identifier rubyid_url'>url</span>

  <span class='const'>DatabaseConfigurations</span>.<span class='id identifier rubyid_db_config_handlers'><a href="#db_config_handlers-instance_method" title="ActiveRecord::DatabaseConfigurations#db_config_handlers (method)">db_config_handlers</a></span>.<span class='id identifier rubyid_reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_handler'>handler</span><span class='op'>|</span>
    <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_config_without_url'>config_without_url</span>)
    <span class='kw'>return</span> <span class='id identifier rubyid_config'>config</span> <span class='kw'>if</span> <span class='id identifier rubyid_config'>config</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_db_config_from_raw_config-instance_method">
  <h3 class='signature priv'>
    #<strong>build_db_config_from_raw_config</strong>(env_name, name, config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L254-L263'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='254' data-end='263'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 254</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_db_config_from_raw_config'>build_db_config_from_raw_config</span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_config'>config</span>
  <span class='kw'>when</span> <span class='const'><a href="../String.html" title="String (class)">String</a></span>
    <span class='id identifier rubyid_build_db_config_from_string'><a href="#build_db_config_from_string-instance_method" title="ActiveRecord::DatabaseConfigurations#build_db_config_from_string (method)">build_db_config_from_string</a></span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='kw'>when</span> <span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span>
    <span class='id identifier rubyid_build_db_config_from_hash'><a href="#build_db_config_from_hash-instance_method" title="ActiveRecord::DatabaseConfigurations#build_db_config_from_hash (method)">build_db_config_from_hash</a></span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_symbolize_keys'>symbolize_keys</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="DatabaseConfigurations/InvalidConfigurationError.html" title="ActiveRecord::DatabaseConfigurations::InvalidConfigurationError (class)">InvalidConfigurationError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;{ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_name'>env_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_config'>config</span><span class='embexpr_end'>}</span><span class='tstring_content'> }&#39; is not a valid configuration. Expected &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_config'>config</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; to be a URL string or a Hash.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_db_config_from_string-instance_method">
  <h3 class='signature priv'>
    #<strong>build_db_config_from_string</strong>(env_name, name, config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L265-L273'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='265' data-end='273'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 265</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_db_config_from_string'>build_db_config_from_string</span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='const'>URI</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_url'>url</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_uri'>uri</span>.<span class='id identifier rubyid_scheme'>scheme</span>
    <span class='const'><a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)">UrlConfig</a></span>.<span class='id identifier rubyid_new'><a href="DatabaseConfigurations/UrlConfig.html#new-class_method" title="ActiveRecord::DatabaseConfigurations::UrlConfig.new (method)">new</a></span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="DatabaseConfigurations/InvalidConfigurationError.html" title="ActiveRecord::DatabaseConfigurations::InvalidConfigurationError (class)">InvalidConfigurationError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;{ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_name'>env_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_config'>config</span><span class='embexpr_end'>}</span><span class='tstring_content'> }&#39; is not a valid configuration. Expected &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_config'>config</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; to be a URL string or a Hash.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="configs_for-instance_method">
  <h3 class='signature '>
    #<strong>configs_for</strong>(env_name: nil, name: nil, config_key: nil, include_hidden: false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Collects the configs for the environment and optionally the specification name passed in. To include replica configurations pass <code>include_hidden: true</code>.</p>

<p>If a name is provided a single <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> object will be returned, otherwise an array of <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> objects will be returned that corresponds with the environment and type requested.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p><code>env_name:</code> The environment name. Defaults to <code>nil</code> which will collect configs for all environments.</p>
</li><li>
<p><code>name:</code> The db config name (i.e. primary, animals, etc.). Defaults to <code>nil</code>. If no <code>env_name</code> is specified the config for the default env and the passed <code>name</code> will be returned.</p>
</li><li>
<p><code>config_key:</code> Selects configs that contain a particular key in the configuration hash. Useful for selecting configs that use a custom db config handler or finding configs with hashes that contain a particular key.</p>
</li><li>
<p><code>include_hidden:</code> Determines whether to include replicas and configurations hidden by <code>database_tasks: false</code> in the returned list. Most of the time we’re only iterating over the primary connections (i.e. migrations don’t need to run for the write and read connection). Defaults to <code>false</code>.</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L100-L123'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='100' data-end='123'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_configs_for'>configs_for</span>(<span class='label'>env_name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>config_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>include_hidden:</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>||=</span> <span class='id identifier rubyid_default_env'><a href="#default_env-instance_method" title="ActiveRecord::DatabaseConfigurations#default_env (method)">default_env</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='id identifier rubyid_env_with_configs'><a href="#env_with_configs-instance_method" title="ActiveRecord::DatabaseConfigurations#env_with_configs (method)">env_with_configs</a></span>(<span class='id identifier rubyid_env_name'>env_name</span>)

  <span class='kw'>unless</span> <span class='id identifier rubyid_include_hidden'>include_hidden</span>
    <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database_tasks?'>database_tasks?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_config_key'>config_key</span>
    <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_configuration_hash'>configuration_hash</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_config_key'>config_key</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_configs'>configs</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_env-instance_method">
  <h3 class='signature priv'>
    #<strong>default_env</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L190-L192'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='190' data-end='192'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 190</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_env'>default_env</span>
  <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ConnectionHandling.html" title="ActiveRecord::ConnectionHandling (module)">ConnectionHandling</a></span><span class='op'>::</span><span class='const'><a href="ConnectionHandling.html#DEFAULT_ENV-constant" title="ActiveRecord::ConnectionHandling::DEFAULT_ENV (constant)">DEFAULT_ENV</a></span>.<span class='id identifier rubyid_call'>call</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="env_with_configs-instance_method">
  <h3 class='signature priv'>
    #<strong>env_with_configs</strong>(env = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L194-L200'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='194' data-end='200'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 194</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_env_with_configs'>env_with_configs</span>(<span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_env'>env</span>
    <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>.<span class='id identifier rubyid_select'>select</span> { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>==</span> <span class='id identifier rubyid_env'>env</span> }
  <span class='kw'>else</span>
    <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="environment_url_config-instance_method">
  <h3 class='signature priv'>
    #<strong>environment_url_config</strong>(env, name, config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L297-L302'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='297' data-end='302'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 297</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_environment_url_config'>environment_url_config</span>(<span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_environment_value_for'><a href="#environment_value_for-instance_method" title="ActiveRecord::DatabaseConfigurations#environment_value_for (method)">environment_value_for</a></span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_url'>url</span>

  <span class='const'><a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)">UrlConfig</a></span>.<span class='id identifier rubyid_new'><a href="DatabaseConfigurations/UrlConfig.html#new-class_method" title="ActiveRecord::DatabaseConfigurations::UrlConfig.new (method)">new</a></span>(<span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="environment_value_for-instance_method">
  <h3 class='signature priv'>
    #<strong>environment_value_for</strong>(name)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L304-L309'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='304' data-end='309'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 304</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_environment_value_for'>environment_value_for</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_name_env_key'>name_env_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>_DATABASE_URL</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='id identifier rubyid_name_env_key'>name_env_key</span>]
  <span class='id identifier rubyid_url'>url</span> <span class='op'>||=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATABASE_URL</span><span class='tstring_end'>&quot;</span></span>] <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_url'>url</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="find_db_config-instance_method">
  <h3 class='signature '>
    #<strong>find_db_config</strong>(env)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a single <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> object based on the requested environment.</p>

<p>If the application has multiple databases <code>find_db_config</code> will return the first <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> for the environment.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L129-L136'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='129' data-end='136'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 129</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_find_db_config'>find_db_config</span>(<span class='id identifier rubyid_env'>env</span>)
  <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_for_current_env?'>for_current_env?</span> <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>==</span> <span class='id identifier rubyid_env'>env</span> <span class='op'>||</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_env'>env</span>)
  <span class='kw'>end</span> <span class='op'>||</span> <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>==</span> <span class='id identifier rubyid_env'>env</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="merge_db_environment_variables-instance_method">
  <h3 class='signature priv'>
    #<strong>merge_db_environment_variables</strong>(current_env, configs)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L288-L295'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='288' data-end='295'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 288</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_db_environment_variables'>merge_db_environment_variables</span>(<span class='id identifier rubyid_current_env'>current_env</span><span class='comma'>,</span> <span class='id identifier rubyid_configs'>configs</span>)
  <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_config'>config</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='id identifier rubyid_config'>config</span> <span class='kw'>if</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)">UrlConfig</a></span>) <span class='op'>||</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>!=</span> <span class='id identifier rubyid_current_env'>current_env</span>

    <span class='id identifier rubyid_url_config'>url_config</span> <span class='op'>=</span> <span class='id identifier rubyid_environment_url_config'><a href="#environment_url_config-instance_method" title="ActiveRecord::DatabaseConfigurations#environment_url_config (method)">environment_url_config</a></span>(<span class='id identifier rubyid_current_env'>current_env</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_configuration_hash'>configuration_hash</span>)
    <span class='id identifier rubyid_url_config'>url_config</span> <span class='op'>||</span> <span class='id identifier rubyid_config'>config</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="primary?-instance_method">
  <h3 class='signature nodoc'>
    #<strong>primary?</strong>(name)  &#x21d2; <code>Boolean</code> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>A primary configuration is one that is named primary or if there is no primary, the first configuration for an environment will be treated as primary. This is used as the “default” configuration and is used when the application needs to treat one configuration differently. For example, when <a href="../Rails.html" title="Rails (module)"><code>::Rails</code></a> dumps the schema, the primary configuration’s schema file will be named <code>schema.rb</code> instead of <code>primary_schema.rb</code>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L144-L149'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='144' data-end='149'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 144</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_primary?'>primary?</span>(<span class='id identifier rubyid_name'>name</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_first_config'>first_config</span> <span class='op'>=</span> <span class='id identifier rubyid_find_db_config'><a href="#find_db_config-instance_method" title="ActiveRecord::DatabaseConfigurations#find_db_config (method)">find_db_config</a></span>(<span class='id identifier rubyid_default_env'><a href="#default_env-instance_method" title="ActiveRecord::DatabaseConfigurations#default_env (method)">default_env</a></span>)
  <span class='id identifier rubyid_first_config'>first_config</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_first_config'>first_config</span>.<span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="resolve-instance_method">
  <h3 class='signature nodoc'>
    #<strong>resolve</strong>(config)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns fully resolved connection, accepts hash, string or symbol. Always returns a <code>DatabaseConfiguration::DatabaseConfig</code></p>

<h4 id="label-Examples">Examples</h4>

<p><a href="../Symbol.html" title="Symbol (class)"><code>::Symbol</code></a> representing current environment.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>DatabaseConfigurations</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::DatabaseConfigurations.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>production</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> {}).<span class='id identifier rubyid_resolve'>resolve</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_production'>production</span>)
<span class='comment'># =&gt; DatabaseConfigurations::HashConfig.new(env_name: &quot;production&quot;, config: {})</span></code></pre>

<p>One layer deep hash of connection values.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>DatabaseConfigurations</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::DatabaseConfigurations.new (method)">new</a></span>({}).<span class='id identifier rubyid_resolve'>resolve</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adapter</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sqlite3</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; DatabaseConfigurations::HashConfig.new(config: {&quot;adapter&quot; =&gt; &quot;sqlite3&quot;})</span></code></pre>

<p>Connection URL.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>DatabaseConfigurations</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::DatabaseConfigurations.new (method)">new</a></span>({}).<span class='id identifier rubyid_resolve'>resolve</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>postgresql://localhost/foo</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; DatabaseConfigurations::UrlConfig.new(config: {&quot;adapter&quot; =&gt; &quot;postgresql&quot;, &quot;host&quot; =&gt; &quot;localhost&quot;, &quot;database&quot; =&gt; &quot;foo&quot;})</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L176-L187'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='176' data-end='187'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 176</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_resolve'>resolve</span>(<span class='id identifier rubyid_config'>config</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_config'>config</span> <span class='kw'>if</span> <span class='const'>DatabaseConfigurations</span><span class='op'>::</span><span class='const'><a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)">DatabaseConfig</a></span> <span class='op'>===</span> <span class='id identifier rubyid_config'>config</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_config'>config</span>
  <span class='kw'>when</span> <span class='const'><a href="../Symbol.html" title="Symbol (class)">Symbol</a></span>
    <span class='id identifier rubyid_resolve_symbol_connection'><a href="#resolve_symbol_connection-instance_method" title="ActiveRecord::DatabaseConfigurations#resolve_symbol_connection (method)">resolve_symbol_connection</a></span>(<span class='id identifier rubyid_config'>config</span>)
  <span class='kw'>when</span> <span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span><span class='comma'>,</span> <span class='const'><a href="../String.html" title="String (class)">String</a></span>
    <span class='id identifier rubyid_build_db_config_from_raw_config'><a href="#build_db_config_from_raw_config-instance_method" title="ActiveRecord::DatabaseConfigurations#build_db_config_from_raw_config (method)">build_db_config_from_raw_config</a></span>(<span class='id identifier rubyid_default_env'><a href="#default_env-instance_method" title="ActiveRecord::DatabaseConfigurations#default_env (method)">default_env</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid type for configuration. Expected Symbol, String, or Hash. Got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="resolve_symbol_connection-instance_method">
  <h3 class='signature priv'>
    #<strong>resolve_symbol_connection</strong>(name)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L227-L239'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='227' data-end='239'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 227</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_resolve_symbol_connection'>resolve_symbol_connection</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_find_db_config'><a href="#find_db_config-instance_method" title="ActiveRecord::DatabaseConfigurations#find_db_config (method)">find_db_config</a></span>(<span class='id identifier rubyid_name'>name</span>)
    <span class='id identifier rubyid_db_config'>db_config</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="AdapterNotSpecified.html" title="ActiveRecord::AdapterNotSpecified (class)">AdapterNotSpecified</a></span><span class='comma'>,</span> <span class='heredoc_beg'>&lt;&lt;~MSG</span>
<span class='ignored_sp'>      </span><span class='tstring_content'>The `</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>` database is not configured for the `</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_default_env'><a href="#default_env-instance_method" title="ActiveRecord::DatabaseConfigurations#default_env (method)">default_env</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>` environment.
</span><span class='tstring_content'>
</span><span class='ignored_sp'>      </span><span class='tstring_content'>  Available database configurations are:
</span><span class='tstring_content'>
</span><span class='ignored_sp'>      </span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_build_configuration_sentence'><a href="#build_configuration_sentence-instance_method" title="ActiveRecord::DatabaseConfigurations#build_configuration_sentence (method)">build_configuration_sentence</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>    MSG
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="walk_configs-instance_method">
  <h3 class='signature priv'>
    #<strong>walk_configs</strong>(env_name, config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/database_configurations.rb#L221-L225'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='221' data-end='225'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 221</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_walk_configs'>walk_configs</span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
  <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_sub_config'>sub_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_build_db_config_from_raw_config'><a href="#build_db_config_from_raw_config-instance_method" title="ActiveRecord::DatabaseConfigurations#build_db_config_from_raw_config (method)">build_db_config_from_raw_config</a></span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_sub_config'>sub_config</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>