<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveRecord::ModelSchema::ClassMethods &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::ModelSchema::ClassMethods",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails main</a> &raquo; 
      <a href='../../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
        <a href="../ModelSchema.html" title="ActiveRecord::ModelSchema (module)">ModelSchema</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ClassMethods&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveRecord::ModelSchema::ClassMethods</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L200'>activerecord/lib/active_record/model_schema.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#ignored_columns-instance_method" title="#ignored_columns (instance method)">#<strong>ignored_columns</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>The list of columns names the model should ignore.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#ignored_columns=-instance_method" title="#ignored_columns= (instance method)">#<strong>ignored_columns=</strong>(columns)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the columns names the model should ignore.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#prefetch_primary_key%3F-instance_method" title="#prefetch_primary_key? (instance method)">#<strong>prefetch_primary_key?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Determines if the primary key values should be selected from their corresponding sequence before the insert statement.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#protected_environments-instance_method" title="#protected_environments (instance method)">#<strong>protected_environments</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>The array of names of environments where destructive actions should be prohibited.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#protected_environments=-instance_method" title="#protected_environments= (instance method)">#<strong>protected_environments=</strong>(environments)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets an array of names of environments where destructive actions should be prohibited.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#sequence_name-instance_method" title="#sequence_name (instance method)">#<strong>sequence_name</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#sequence_name=-instance_method" title="#sequence_name= (instance method)">#<strong>sequence_name=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the name of the sequence to use when generating ids to the given value, or (if the value is <code>nil</code> or <code>false</code>) to the value returned by the given block.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#table_exists%3F-instance_method" title="#table_exists? (instance method)">#<strong>table_exists?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates whether the table associated with this class exists.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#table_name-instance_method" title="#table_name (instance method)">#<strong>table_name</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Guesses the table name (in forced lower-case) based on the name of the class in the inheritance hierarchy descending directly from <a href="../Base.html" title="ActiveRecord::Base (class)"><code>::ActiveRecord::Base</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#table_name=-instance_method" title="#table_name= (instance method)">#<strong>table_name=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the table name explicitly.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#schema_loaded%3F-instance_method" title="#schema_loaded? (instance method)">#<strong>schema_loaded?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo nodoc'>
      <a href="#real_inheritance_column=-instance_method" title="#real_inheritance_column= (instance method)">#<strong>real_inheritance_column=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#column_defaults-instance_method" title="#column_defaults (instance method)">#<strong>column_defaults</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash where the keys are column names and the values are default values when instantiating the Active Record object for this table.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#column_for_attribute-instance_method" title="#column_for_attribute (instance method)">#<strong>column_for_attribute</strong>(name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the column object for the named attribute.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#column_names-instance_method" title="#column_names (instance method)">#<strong>column_names</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of column names as strings.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#columns-instance_method" title="#columns (instance method)">#<strong>columns</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#content_columns-instance_method" title="#content_columns (instance method)">#<strong>content_columns</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of column objects where the primary id, all columns ending in “_id” or “_count”, and columns used for single table inheritance have been removed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#next_sequence_value-instance_method" title="#next_sequence_value (instance method)">#<strong>next_sequence_value</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the next value that will be used as the primary key on an insert statement.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#quoted_table_name-instance_method" title="#quoted_table_name (instance method)">#<strong>quoted_table_name</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a quoted version of the table name, used to construct SQL statements.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset_column_information-instance_method" title="#reset_column_information (instance method)">#<strong>reset_column_information</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Resets all the cached information about columns, which will cause them to be reloaded on the next request.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#initialize_load_schema_monitor-instance_method" title="#initialize_load_schema_monitor (instance method)">#<strong>initialize_load_schema_monitor</strong>  </a>
    </span>
    <span class='note title protected'>protected</span>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#reload_schema_from_cache-instance_method" title="#reload_schema_from_cache (instance method)">#<strong>reload_schema_from_cache</strong>(recursive = true)  </a>
    </span>
    <span class='note title protected'>protected</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#compute_table_name-instance_method" title="#compute_table_name (instance method)">#<strong>compute_table_name</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Computes and returns a table name according to default conventions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#inherited-instance_method" title="#inherited (instance method)">#<strong>inherited</strong>(child_class)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#load_schema!-instance_method" title="#load_schema! (instance method)">#<strong>load_schema!</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#type_for_column-instance_method" title="#type_for_column (instance method)">#<strong>type_for_column</strong>(connection, column)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#undecorated_table_name-instance_method" title="#undecorated_table_name (instance method)">#<strong>undecorated_table_name</strong>(model_name)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Guesses the table name, but does not decorate it with prefix and suffix information.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#_returning_columns_for_insert-instance_method" title="#_returning_columns_for_insert (instance method)">#<strong>_returning_columns_for_insert</strong>(connection)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#attributes_builder-instance_method" title="#attributes_builder (instance method)">#<strong>attributes_builder</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#columns_hash-instance_method" title="#columns_hash (instance method)">#<strong>columns_hash</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#full_table_name_prefix-instance_method" title="#full_table_name_prefix (instance method)">#<strong>full_table_name_prefix</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#full_table_name_suffix-instance_method" title="#full_table_name_suffix (instance method)">#<strong>full_table_name_suffix</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#load_schema-instance_method" title="#load_schema (instance method)">#<strong>load_schema</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#reset_sequence_name-instance_method" title="#reset_sequence_name (instance method)">#<strong>reset_sequence_name</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#reset_table_name-instance_method" title="#reset_table_name (instance method)">#<strong>reset_table_name</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Computes the table name, (re)sets it internally, and returns it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#symbol_column_to_string-instance_method" title="#symbol_column_to_string (instance method)">#<strong>symbol_column_to_string</strong>(name_symbol)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#yaml_encoder-instance_method" title="#yaml_encoder (instance method)">#<strong>yaml_encoder</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="ignored_columns-instance_method">
  <h3 class='signature rw first'>
    #<strong>ignored_columns</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The list of columns names the model should ignore. Ignored columns won’t have attribute accessors defined, and won’t be referenced in SQL queries.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L332-L334'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='332' data-end='334'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 332</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ignored_columns'>ignored_columns</span>
  <span class='ivar'>@ignored_columns</span> <span class='op'>||</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_ignored_columns'>ignored_columns</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ignored_columns=-instance_method">
  <h3 class='signature rw'>
    #<strong>ignored_columns=</strong>(columns)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the columns names the model should ignore. Ignored columns won’t have attribute accessors defined, and won’t be referenced in SQL queries.</p>

<p>A common usage pattern for this method is to ensure all references to an attribute have been removed and deployed, before a migration to drop the column from the database has been deployed and run. Using this two step approach to dropping columns ensures there is no code that raises errors due to having a cached schema in memory at the time the schema migration is run.</p>

<p>For example, given a model where you want to drop the “category” attribute, first mark it as ignored:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Project</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='comment'># schema:
</span>  <span class='comment'>#   id         :bigint
</span>  <span class='comment'>#   name       :string, limit: 255
</span>  <span class='comment'>#   category   :string, limit: 255
</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_ignored_columns'><a href="#ignored_columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#ignored_columns (method)">ignored_columns</a></span> <span class='op'>+=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_category'>category</span>]
<span class='kw'>end</span></code></pre>

<p>The schema still contains “category”, but now the model omits it, so any meta-driven code or schema caching will not attempt to use the column:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Project</span>.<span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>category</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=&gt;</span> <span class='kw'>nil</span></code></pre>

<p>You will get an error if accessing that attribute directly, so ensure all usages of the column are removed (automated tests can help you find any usages).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>Project</span>.<span class='id identifier rubyid_create!'>create!</span>(<span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First Project</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_category'>category</span> <span class='comment'># =&gt; raises NoMethodError</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L367-L370'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='367' data-end='370'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 367</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ignored_columns='>ignored_columns=</span>(<span class='id identifier rubyid_columns'><a href="#columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns (method)">columns</a></span>)
  <span class='id identifier rubyid_reload_schema_from_cache'><a href="#reload_schema_from_cache-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#reload_schema_from_cache (method)">reload_schema_from_cache</a></span>
  <span class='ivar'>@ignored_columns</span> <span class='op'>=</span> <span class='id identifier rubyid_columns'><a href="#columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns (method)">columns</a></span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_s'>to_s</span>).<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prefetch_primary_key?-instance_method">
  <h3 class='signature ro'>
    #<strong>prefetch_primary_key?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Determines if the primary key values should be selected from their corresponding sequence before the insert statement.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L406-L408'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='406' data-end='408'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 406</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prefetch_primary_key?'>prefetch_primary_key?</span>
  <span class='id identifier rubyid_with_connection'>with_connection</span> { <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_prefetch_primary_key?'>prefetch_primary_key?</span>(<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="protected_environments-instance_method">
  <h3 class='signature rw'>
    #<strong>protected_environments</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The array of names of environments where destructive actions should be prohibited. By default, the value is <code>[&quot;production&quot;]</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L313-L319'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='313' data-end='319'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 313</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_protected_environments'>protected_environments</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='ivar'>@protected_environments</span>)
    <span class='ivar'>@protected_environments</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_protected_environments'>protected_environments</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="protected_environments=-instance_method">
  <h3 class='signature rw'>
    #<strong>protected_environments=</strong>(environments)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets an array of names of environments where destructive actions should be prohibited.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L322-L324'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='322' data-end='324'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 322</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_protected_environments='>protected_environments=</span>(<span class='id identifier rubyid_environments'>environments</span>)
  <span class='ivar'>@protected_environments</span> <span class='op'>=</span> <span class='id identifier rubyid_environments'>environments</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_s'>to_s</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="real_inheritance_column=-instance_method">
  <h3 class='signature wo  nodoc'>
    #<strong>real_inheritance_column=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L326-L328'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='326' data-end='328'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 326</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_real_inheritance_column='>real_inheritance_column=</span>(<span class='id identifier rubyid_value'>value</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>self</span>.<span class='id identifier rubyid__inheritance_column'>_inheritance_column</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="schema_loaded?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>schema_loaded?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L583-L585'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='583' data-end='585'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 583</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_schema_loaded?'>schema_loaded?</span>
  <span class='ivar'>@schema_loaded</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sequence_name-instance_method">
  <h3 class='signature rw'>
    #<strong>sequence_name</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L372-L378'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='372' data-end='378'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 372</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sequence_name'>sequence_name</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_base_class?'>base_class?</span>
    <span class='ivar'>@sequence_name</span> <span class='op'>||=</span> <span class='id identifier rubyid_reset_sequence_name'><a href="#reset_sequence_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#reset_sequence_name (method)">reset_sequence_name</a></span>
  <span class='kw'>else</span>
    (<span class='ivar'>@sequence_name</span> <span class='op'>||=</span> <span class='kw'>nil</span>) <span class='op'>||</span> <span class='id identifier rubyid_base_class'>base_class</span>.<span class='id identifier rubyid_sequence_name'>sequence_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sequence_name=-instance_method">
  <h3 class='signature rw'>
    #<strong>sequence_name=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the name of the sequence to use when generating ids to the given value, or (if the value is <code>nil</code> or <code>false</code>) to the value returned by the given block. This is required for Oracle and is useful for any database which relies on sequences for primary key generation.</p>

<p>If a sequence name is not explicitly set when using Oracle, it will default to the commonly used pattern of: #<a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">#table_name</a>_seq</p>

<p>If a sequence name is not explicitly set when using PostgreSQL, it will discover the sequence corresponding to your primary key for you.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Project</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_sequence_name'><a href="#sequence_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#sequence_name (method)">sequence_name</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>projectseq</span><span class='tstring_end'>&quot;</span></span>   <span class='comment'># default would have been &quot;project_seq&quot;
</span><span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L399-L402'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='399' data-end='402'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 399</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sequence_name='>sequence_name=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='ivar'>@sequence_name</span>          <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='ivar'>@explicit_sequence_name</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="table_exists?-instance_method">
  <h3 class='signature ro'>
    #<strong>table_exists?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Indicates whether the table associated with this class exists</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L417-L419'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='417' data-end='419'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 417</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_table_exists?'>table_exists?</span>
  <span class='id identifier rubyid_schema_cache'>schema_cache</span>.<span class='id identifier rubyid_data_source_exists?'>data_source_exists?</span>(<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="table_name-instance_method">
  <h3 class='signature rw'>
    #<strong>table_name</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Guesses the table name (in forced lower-case) based on the name of the class in the inheritance hierarchy descending directly from <a href="../Base.html" title="ActiveRecord::Base (class)"><code>::ActiveRecord::Base</code></a>. So if the hierarchy looks like: Reply &lt; Message &lt; <a href="../Base.html" title="ActiveRecord::Base (class)"><code>::ActiveRecord::Base</code></a>, then Message is used to guess the table name even when called on Reply. The rules used to do the guess are handled by the Inflector class in Active Support, which knows almost all common English inflections. You can add new inflections in config/initializers/inflections.rb.</p>

<p>Nested classes are given table names prefixed by the singular form of the parent’s table name. Enclosing modules are not considered.</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Invoice</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_file'>file</span>                  <span class='kw'>class</span>               <span class='id identifier rubyid_table_name'>table_name</span>
<span class='id identifier rubyid_invoice'>invoice</span>.<span class='id identifier rubyid_rb'>rb</span>            <span class='const'>Invoice</span>             <span class='id identifier rubyid_invoices'>invoices</span>

<span class='kw'>class</span> <span class='const'>Invoice</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>class</span> <span class='const'>Lineitem</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_file'>file</span>                  <span class='kw'>class</span>               <span class='id identifier rubyid_table_name'>table_name</span>
<span class='id identifier rubyid_invoice'>invoice</span>.<span class='id identifier rubyid_rb'>rb</span>            <span class='const'>Invoice</span><span class='op'>::</span><span class='const'>Lineitem</span>   <span class='id identifier rubyid_invoice_lineitems'>invoice_lineitems</span>

<span class='kw'>module</span> <span class='const'>Invoice</span>
  <span class='kw'>class</span> <span class='const'>Lineitem</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_file'>file</span>                  <span class='kw'>class</span>               <span class='id identifier rubyid_table_name'>table_name</span>
<span class='id identifier rubyid_invoice'>invoice</span><span class='op'>/</span><span class='id identifier rubyid_lineitem'>lineitem</span>.<span class='id identifier rubyid_rb'>rb</span>   <span class='const'>Invoice</span><span class='op'>::</span><span class='const'>Lineitem</span>   <span class='id identifier rubyid_lineitems'>lineitems</span></code></pre>

<p>Additionally, the class-level <a href="../ModelSchema.html#table_name_prefix-class_method" title="ActiveRecord::ModelSchema.table_name_prefix (method)">ActiveRecord::ModelSchema.table_name_prefix</a> is prepended and the <a href="../ModelSchema.html#table_name_suffix-class_method" title="ActiveRecord::ModelSchema.table_name_suffix (method)">ActiveRecord::ModelSchema.table_name_suffix</a> is appended. So if you have “myapp_” as a prefix, the table name guess for an Invoice class becomes “myapp_invoices”. <code>Invoice::Lineitem</code> becomes “myapp_invoice_lineitems”.</p>

<p>Active Model Naming’s <code>model_name</code> is the base name used to guess the table name. In case a custom Active Model Name is defined, it will be used for the table name as well:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>PostRecord</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>class</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_model_name'>model_name</span>
      <span class='const'><a href="../../ActiveModel.html" title="ActiveModel (module)">ActiveModel</a></span><span class='op'>::</span><span class='const'><a href="../../ActiveModel/Name.html" title="ActiveModel::Name (class)">Name</a></span>.<span class='id identifier rubyid_new'><a href="../../ActiveModel/Name.html#new-class_method" title="ActiveModel::Name.new (method)">new</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Post</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'>PostRecord</span>.<span class='id identifier rubyid_table_name'>table_name</span>
<span class='comment'># =&gt; &quot;posts&quot;</span></code></pre>

<p>You can also set your own table name explicitly:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Mouse</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mice</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L260-L263'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='260' data-end='263'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 260</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_table_name'>table_name</span>
  <span class='id identifier rubyid_reset_table_name'><a href="#reset_table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#reset_table_name (method)">reset_table_name</a></span> <span class='kw'>unless</span> <span class='kw'>defined?</span>(<span class='ivar'>@table_name</span>)
  <span class='ivar'>@table_name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="table_name=-instance_method">
  <h3 class='signature rw'>
    #<strong>table_name=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the table name explicitly. Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Project</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>project</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L270-L283'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='270' data-end='283'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 270</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_table_name='>table_name=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_to_s'>to_s</span>

  <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='ivar'>@table_name</span>)
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='ivar'>@table_name</span>
    <span class='id identifier rubyid_reset_column_information'><a href="#reset_column_information-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#reset_column_information (method)">reset_column_information</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_connected?'>connected?</span>
  <span class='kw'>end</span>

  <span class='ivar'>@table_name</span>        <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
  <span class='ivar'>@quoted_table_name</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@arel_table</span>        <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@sequence_name</span>     <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='ivar'>@explicit_sequence_name</span>
  <span class='ivar'>@predicate_builder</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="_returning_columns_for_insert-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>_returning_columns_for_insert</strong>(connection)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L438-L446'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='438' data-end='446'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 438</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__returning_columns_for_insert'>_returning_columns_for_insert</span>(<span class='id identifier rubyid_connection'>connection</span>) <span class='comment'># :nodoc:
</span>  <span class='ivar'>@_returning_columns_for_insert</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_auto_populated_columns'>auto_populated_columns</span> <span class='op'>=</span> <span class='id identifier rubyid_columns'><a href="#columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns (method)">columns</a></span>.<span class='id identifier rubyid_filter_map'>filter_map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
      <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_name'>name</span> <span class='kw'>if</span> <span class='id identifier rubyid_connection'>connection</span>.<span class='id identifier rubyid_return_value_after_insert?'>return_value_after_insert?</span>(<span class='id identifier rubyid_c'>c</span>)
    <span class='kw'>end</span>

    <span class='id identifier rubyid_auto_populated_columns'>auto_populated_columns</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='const'><a href="../../Array.html" title="Array (class)">Array</a></span>(<span class='id identifier rubyid_primary_key'>primary_key</span>) <span class='op'>:</span> <span class='id identifier rubyid_auto_populated_columns'>auto_populated_columns</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attributes_builder-instance_method">
  <h3 class='signature nodoc'>
    #<strong>attributes_builder</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L421-L426'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='421' data-end='426'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 421</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attributes_builder'>attributes_builder</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@attributes_builder</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_defaults'>defaults</span> <span class='op'>=</span> <span class='id identifier rubyid__default_attributes'>_default_attributes</span>.<span class='id identifier rubyid_except'>except</span>(<span class='op'>*</span>(<span class='id identifier rubyid_column_names'><a href="#column_names-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#column_names (method)">column_names</a></span> <span class='op'>-</span> [<span class='id identifier rubyid_primary_key'>primary_key</span>]))
    <span class='const'><a href="../../ActiveModel.html" title="ActiveModel (module)">ActiveModel</a></span><span class='op'>::</span><span class='const'><a href="../../ActiveModel/AttributeSet.html" title="ActiveModel::AttributeSet (class)">AttributeSet</a></span><span class='op'>::</span><span class='const'><a href="../../ActiveModel/AttributeSet/Builder.html" title="ActiveModel::AttributeSet::Builder (class)">Builder</a></span>.<span class='id identifier rubyid_new'><a href="../../ActiveModel/AttributeSet/Builder.html#new-class_method" title="ActiveModel::AttributeSet::Builder.new (method)">new</a></span>(<span class='id identifier rubyid_attribute_types'>attribute_types</span><span class='comma'>,</span> <span class='id identifier rubyid_defaults'>defaults</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="column_defaults-instance_method">
  <h3 class='signature '>
    #<strong>column_defaults</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash where the keys are column names and the values are default values when instantiating the Active Record object for this table.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L474-L477'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='474' data-end='477'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 474</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_column_defaults'>column_defaults</span>
  <span class='id identifier rubyid_load_schema'><a href="#load_schema-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#load_schema (method)">load_schema</a></span>
  <span class='ivar'>@column_defaults</span> <span class='op'>||=</span> <span class='id identifier rubyid__default_attributes'>_default_attributes</span>.<span class='id identifier rubyid_deep_dup'>deep_dup</span>.<span class='id identifier rubyid_to_hash'>to_hash</span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="column_for_attribute-instance_method">
  <h3 class='signature '>
    #<strong>column_for_attribute</strong>(name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the column object for the named attribute. Returns an <a href="../ConnectionAdapters/NullColumn.html" title="ActiveRecord::ConnectionAdapters::NullColumn (class)"><code>::ActiveRecord::ConnectionAdapters::NullColumn</code></a> if the named attribute does not exist.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Person</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_person'>person</span> <span class='op'>=</span> <span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_person'>person</span>.<span class='id identifier rubyid_column_for_attribute'>column_for_attribute</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>) <span class='comment'># the result depends on the ConnectionAdapter
</span><span class='comment'># =&gt; #&lt;ActiveRecord::ConnectionAdapters::Column:0x007ff4ab083980 @name=&quot;name&quot;, @sql_type=&quot;varchar(255)&quot;, @null=true, ...&gt;
</span>
<span class='id identifier rubyid_person'>person</span>.<span class='id identifier rubyid_column_for_attribute'>column_for_attribute</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_nothing'>nothing</span>)
<span class='comment'># =&gt; #&lt;ActiveRecord::ConnectionAdapters::NullColumn:0xXXX @name=nil, @sql_type=nil, @cast_type=#&lt;Type::Value&gt;, ...&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L465-L470'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='465' data-end='470'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 465</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_column_for_attribute'>column_for_attribute</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='id identifier rubyid_name'>name</span>) <span class='kw'>do</span>
    <span class='const'><a href="../ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a></span><span class='op'>::</span><span class='const'><a href="../ConnectionAdapters/NullColumn.html" title="ActiveRecord::ConnectionAdapters::NullColumn (class)">NullColumn</a></span>.<span class='id identifier rubyid_new'><a href="../ConnectionAdapters/NullColumn.html#new-class_method" title="ActiveRecord::ConnectionAdapters::NullColumn.new (method)">new</a></span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="column_names-instance_method">
  <h3 class='signature '>
    #<strong>column_names</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of column names as strings.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L480-L482'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='480' data-end='482'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 480</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_column_names'>column_names</span>
  <span class='ivar'>@column_names</span> <span class='op'>||=</span> <span class='id identifier rubyid_columns'><a href="#columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns (method)">columns</a></span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>).<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="columns-instance_method">
  <h3 class='signature '>
    #<strong>columns</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L433-L436'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='433' data-end='436'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 433</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_columns'>columns</span>
  <span class='id identifier rubyid_load_schema'><a href="#load_schema-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#load_schema (method)">load_schema</a></span> <span class='kw'>unless</span> <span class='ivar'>@columns</span>
  <span class='ivar'>@columns</span> <span class='op'>||=</span> <span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span>.<span class='id identifier rubyid_values'>values</span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="columns_hash-instance_method">
  <h3 class='signature nodoc'>
    #<strong>columns_hash</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L428-L431'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='428' data-end='431'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 428</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_columns_hash'>columns_hash</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_load_schema'><a href="#load_schema-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#load_schema (method)">load_schema</a></span> <span class='kw'>unless</span> <span class='ivar'>@columns_hash</span>
  <span class='ivar'>@columns_hash</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compute_table_name-instance_method">
  <h3 class='signature priv'>
    #<strong>compute_table_name</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Computes and returns a table name according to default conventions.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L604-L618'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='604' data-end='618'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 604</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_compute_table_name'>compute_table_name</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_base_class?'>base_class?</span>
    <span class='comment'># Nested classes are prefixed with singular parent table name.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_module_parent'>module_parent</span> <span class='op'>&lt;</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_module_parent'>module_parent</span>.<span class='id identifier rubyid_abstract_class?'>abstract_class?</span>
      <span class='id identifier rubyid_contained'>contained</span> <span class='op'>=</span> <span class='id identifier rubyid_module_parent'>module_parent</span>.<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>
      <span class='id identifier rubyid_contained'>contained</span> <span class='op'>=</span> <span class='id identifier rubyid_contained'>contained</span>.<span class='id identifier rubyid_singularize'>singularize</span> <span class='kw'>if</span> <span class='id identifier rubyid_module_parent'>module_parent</span>.<span class='id identifier rubyid_pluralize_table_names'><a href="../ModelSchema.html#pluralize_table_names-class_method" title="ActiveRecord::ModelSchema.pluralize_table_names (method)">pluralize_table_names</a></span>
      <span class='id identifier rubyid_contained'>contained</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_full_table_name_prefix'><a href="#full_table_name_prefix-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#full_table_name_prefix (method)">full_table_name_prefix</a></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_contained'>contained</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_undecorated_table_name'><a href="#undecorated_table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#undecorated_table_name (method)">undecorated_table_name</a></span>(<span class='id identifier rubyid_model_name'>model_name</span>)<span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_full_table_name_suffix'><a href="#full_table_name_suffix-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#full_table_name_suffix (method)">full_table_name_suffix</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='comment'># STI subclasses always use their superclass&#39;s table.
</span>    <span class='id identifier rubyid_base_class'>base_class</span>.<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="content_columns-instance_method">
  <h3 class='signature '>
    #<strong>content_columns</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of column objects where the primary id, all columns ending in “_id” or “_count”, and columns used for single table inheritance have been removed.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L491-L497'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='491' data-end='497'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 491</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_content_columns'>content_columns</span>
  <span class='ivar'>@content_columns</span> <span class='op'>||=</span> <span class='id identifier rubyid_columns'><a href="#columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns (method)">columns</a></span>.<span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
    <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_primary_key'>primary_key</span> <span class='op'>||</span>
    <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_inheritance_column'><a href="../ModelSchema.html#inheritance_column-class_method" title="ActiveRecord::ModelSchema.inheritance_column (method)">inheritance_column</a></span> <span class='op'>||</span>
    <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_count</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="full_table_name_prefix-instance_method">
  <h3 class='signature nodoc'>
    #<strong>full_table_name_prefix</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L303-L305'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='303' data-end='305'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 303</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_full_table_name_prefix'>full_table_name_prefix</span> <span class='comment'># :nodoc:
</span>  (<span class='id identifier rubyid_module_parents'>module_parents</span>.<span class='id identifier rubyid_detect'>detect</span> { <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_table_name_prefix'><a href="../ModelSchema.html#table_name_prefix-class_method" title="ActiveRecord::ModelSchema.table_name_prefix (method)">table_name_prefix</a></span>) } <span class='op'>||</span> <span class='kw'>self</span>).<span class='id identifier rubyid_table_name_prefix'><a href="../ModelSchema.html#table_name_prefix-class_method" title="ActiveRecord::ModelSchema.table_name_prefix (method)">table_name_prefix</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="full_table_name_suffix-instance_method">
  <h3 class='signature nodoc'>
    #<strong>full_table_name_suffix</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L307-L309'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='307' data-end='309'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 307</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_full_table_name_suffix'>full_table_name_suffix</span> <span class='comment'># :nodoc:
</span>  (<span class='id identifier rubyid_module_parents'>module_parents</span>.<span class='id identifier rubyid_detect'>detect</span> { <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_table_name_suffix'><a href="../ModelSchema.html#table_name_suffix-class_method" title="ActiveRecord::ModelSchema.table_name_suffix (method)">table_name_suffix</a></span>) } <span class='op'>||</span> <span class='kw'>self</span>).<span class='id identifier rubyid_table_name_suffix'><a href="../ModelSchema.html#table_name_suffix-class_method" title="ActiveRecord::ModelSchema.table_name_suffix (method)">table_name_suffix</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inherited-instance_method">
  <h3 class='signature priv'>
    #<strong>inherited</strong>(child_class)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L574-L581'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='574' data-end='581'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 574</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inherited'>inherited</span>(<span class='id identifier rubyid_child_class'>child_class</span>)
  <span class='kw'>super</span>
  <span class='id identifier rubyid_child_class'>child_class</span>.<span class='id identifier rubyid_initialize_load_schema_monitor'><a href="#initialize_load_schema_monitor-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#initialize_load_schema_monitor (method)">initialize_load_schema_monitor</a></span>
  <span class='id identifier rubyid_child_class'>child_class</span>.<span class='id identifier rubyid_reload_schema_from_cache'><a href="#reload_schema_from_cache-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#reload_schema_from_cache (method)">reload_schema_from_cache</a></span>(<span class='kw'>false</span>)
  <span class='id identifier rubyid_child_class'>child_class</span>.<span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span>
    <span class='ivar'>@ignored_columns</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_load_schema_monitor-instance_method">
  <h3 class='signature prot'>
    #<strong>initialize_load_schema_monitor</strong>   <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L549-L551'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='549' data-end='551'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 549</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_load_schema_monitor'>initialize_load_schema_monitor</span>
  <span class='ivar'>@load_schema_monitor</span> <span class='op'>=</span> <span class='const'>Monitor</span>.<span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_schema-instance_method">
  <h3 class='signature nodoc'>
    #<strong>load_schema</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L534-L546'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='534' data-end='546'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 534</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_schema'>load_schema</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_schema_loaded?'><a href="#schema_loaded%3F-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#schema_loaded? (method)">schema_loaded?</a></span>
  <span class='ivar'>@load_schema_monitor</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_schema_loaded?'><a href="#schema_loaded%3F-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#schema_loaded? (method)">schema_loaded?</a></span>

    <span class='id identifier rubyid_load_schema!'><a href="#load_schema!-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#load_schema! (method)">load_schema!</a></span>

    <span class='ivar'>@schema_loaded</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>rescue</span>
    <span class='id identifier rubyid_reload_schema_from_cache'><a href="#reload_schema_from_cache-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#reload_schema_from_cache (method)">reload_schema_from_cache</a></span> <span class='comment'># If the schema loading failed half way through, we must reset the state.
</span>    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_schema!-instance_method">
  <h3 class='signature priv'>
    #<strong>load_schema!</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L587-L595'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='587' data-end='595'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 587</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_schema!'>load_schema!</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../TableNotSpecified.html" title="ActiveRecord::TableNotSpecified (class)">TableNotSpecified</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'> has no table configured. Set one with </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'>.table_name=</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span> <span class='op'>=</span> <span class='id identifier rubyid_schema_cache'>schema_cache</span>.<span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span>(<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>)
  <span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span> <span class='op'>=</span> <span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span>.<span class='id identifier rubyid_except'>except</span>(<span class='op'>*</span><span class='id identifier rubyid_ignored_columns'><a href="#ignored_columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#ignored_columns (method)">ignored_columns</a></span>) <span class='kw'>unless</span> <span class='id identifier rubyid_ignored_columns'><a href="#ignored_columns-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#ignored_columns (method)">ignored_columns</a></span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='ivar'>@columns_hash</span> <span class='op'>=</span> <span class='id identifier rubyid_columns_hash'><a href="#columns_hash-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#columns_hash (method)">columns_hash</a></span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="next_sequence_value-instance_method">
  <h3 class='signature '>
    #<strong>next_sequence_value</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the next value that will be used as the primary key on an insert statement.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L412-L414'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='412' data-end='414'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 412</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_next_sequence_value'>next_sequence_value</span>
  <span class='id identifier rubyid_with_connection'>with_connection</span> { <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_next_sequence_value'>next_sequence_value</span>(<span class='id identifier rubyid_sequence_name'><a href="#sequence_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#sequence_name (method)">sequence_name</a></span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quoted_table_name-instance_method">
  <h3 class='signature '>
    #<strong>quoted_table_name</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a quoted version of the table name, used to construct SQL statements.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L286-L288'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='286' data-end='288'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 286</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quoted_table_name'>quoted_table_name</span>
  <span class='ivar'>@quoted_table_name</span> <span class='op'>||=</span> <span class='id identifier rubyid_adapter_class'>adapter_class</span>.<span class='id identifier rubyid_quote_table_name'>quote_table_name</span>(<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reload_schema_from_cache-instance_method">
  <h3 class='signature prot'>
    #<strong>reload_schema_from_cache</strong>(recursive = true)   <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L553-L571'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='553' data-end='571'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 553</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reload_schema_from_cache'>reload_schema_from_cache</span>(<span class='id identifier rubyid_recursive'>recursive</span> <span class='op'>=</span> <span class='kw'>true</span>)
  <span class='ivar'>@_returning_columns_for_insert</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@arel_table</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@column_names</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@symbol_column_to_string_name_hash</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@content_columns</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@column_defaults</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@attributes_builder</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@columns</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@columns_hash</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@schema_loaded</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@attribute_names</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@yaml_encoder</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_recursive'>recursive</span>
    <span class='id identifier rubyid_subclasses'>subclasses</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_descendant'>descendant</span><span class='op'>|</span>
      <span class='id identifier rubyid_descendant'>descendant</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_reload_schema_from_cache'>reload_schema_from_cache</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset_column_information-instance_method">
  <h3 class='signature '>
    #<strong>reset_column_information</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Resets all the cached information about columns, which will cause them to be reloaded on the next request.</p>

<p>The most common usage pattern for this method is probably in a migration, when just after creating a table you want to populate it with some default values, e.g.:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>CreateJobLevels</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>[<span class='float'>7.2</span>]
  <span class='kw'>def</span> <span class='id identifier rubyid_up'>up</span>
    <span class='id identifier rubyid_create_table'>create_table</span> <span class='symbeg'>:</span><span class='id identifier rubyid_job_levels'>job_levels</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
      <span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_integer'>integer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_string'>string</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>

      <span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_timestamps'>timestamps</span>
    <span class='kw'>end</span>

    <span class='const'>JobLevel</span>.<span class='id identifier rubyid_reset_column_information'>reset_column_information</span>
    <span class='qwords'><span class='qwords_beg'>%w{</span><span class='tstring_content'>assistant</span><span class='words_sep'> </span><span class='tstring_content'>executive</span><span class='words_sep'> </span><span class='tstring_content'>manager</span><span class='words_sep'> </span><span class='tstring_content'>director</span><span class='tstring_end'>}</span></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='op'>|</span>
      <span class='const'>JobLevel</span>.<span class='id identifier rubyid_create'>create</span>(<span class='label'>name:</span> <span class='id identifier rubyid_type'>type</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_down'>down</span>
    <span class='id identifier rubyid_drop_table'>drop_table</span> <span class='symbeg'>:</span><span class='id identifier rubyid_job_levels'>job_levels</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L525-L532'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='525' data-end='532'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 525</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_column_information'>reset_column_information</span>
  <span class='id identifier rubyid_connection_pool'>connection_pool</span>.<span class='id identifier rubyid_active_connection'>active_connection</span><span class='op'>&amp;.</span><span class='id identifier rubyid_clear_cache!'>clear_cache!</span>
  ([<span class='kw'>self</span>] <span class='op'>+</span> <span class='id identifier rubyid_descendants'>descendants</span>).<span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_undefine_attribute_methods'>undefine_attribute_methods</span>)
  <span class='id identifier rubyid_schema_cache'>schema_cache</span>.<span class='id identifier rubyid_clear_data_source_cache!'>clear_data_source_cache!</span>(<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>)

  <span class='id identifier rubyid_reload_schema_from_cache'><a href="#reload_schema_from_cache-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#reload_schema_from_cache (method)">reload_schema_from_cache</a></span>
  <span class='id identifier rubyid_initialize_find_by_cache'>initialize_find_by_cache</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset_sequence_name-instance_method">
  <h3 class='signature nodoc'>
    #<strong>reset_sequence_name</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L380-L383'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='380' data-end='383'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 380</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_sequence_name'>reset_sequence_name</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@explicit_sequence_name</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@sequence_name</span>          <span class='op'>=</span> <span class='id identifier rubyid_with_connection'>with_connection</span> { <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_default_sequence_name'>default_sequence_name</span>(<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span><span class='comma'>,</span> <span class='id identifier rubyid_primary_key'>primary_key</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset_table_name-instance_method">
  <h3 class='signature nodoc'>
    #<strong>reset_table_name</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Computes the table name, (re)sets it internally, and returns it.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L291-L301'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='291' data-end='301'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 291</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_table_name'>reset_table_name</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>self</span>.<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span> <span class='op'>=</span> <span class='kw'>if</span> <span class='kw'>self</span> <span class='op'>==</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
    <span class='kw'>nil</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_abstract_class?'>abstract_class?</span>
    <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_abstract_class?'>abstract_class?</span>
    <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span> <span class='op'>||</span> <span class='id identifier rubyid_compute_table_name'><a href="#compute_table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#compute_table_name (method)">compute_table_name</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_compute_table_name'><a href="#compute_table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#compute_table_name (method)">compute_table_name</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="symbol_column_to_string-instance_method">
  <h3 class='signature nodoc'>
    #<strong>symbol_column_to_string</strong>(name_symbol)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L484-L487'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='484' data-end='487'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 484</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_symbol_column_to_string'>symbol_column_to_string</span>(<span class='id identifier rubyid_name_symbol'>name_symbol</span>) <span class='comment'># :nodoc:
</span>  <span class='ivar'>@symbol_column_to_string_name_hash</span> <span class='op'>||=</span> <span class='id identifier rubyid_column_names'><a href="#column_names-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#column_names (method)">column_names</a></span>.<span class='id identifier rubyid_index_by'>index_by</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_sym'>to_sym</span>)
  <span class='ivar'>@symbol_column_to_string_name_hash</span>[<span class='id identifier rubyid_name_symbol'>name_symbol</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="type_for_column-instance_method">
  <h3 class='signature priv'>
    #<strong>type_for_column</strong>(connection, column)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L620-L628'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='620' data-end='628'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 620</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_type_for_column'>type_for_column</span>(<span class='id identifier rubyid_connection'>connection</span><span class='comma'>,</span> <span class='id identifier rubyid_column'>column</span>)
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_connection'>connection</span>.<span class='id identifier rubyid_lookup_cast_type_from_column'>lookup_cast_type_from_column</span>(<span class='id identifier rubyid_column'>column</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_immutable_strings_by_default'>immutable_strings_by_default</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_to_immutable_string'>to_immutable_string</span>)
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_to_immutable_string'>to_immutable_string</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_type'>type</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="undecorated_table_name-instance_method">
  <h3 class='signature priv'>
    #<strong>undecorated_table_name</strong>(model_name)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Guesses the table name, but does not decorate it with prefix and suffix information.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L598-L601'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='598' data-end='601'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 598</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_undecorated_table_name'>undecorated_table_name</span>(<span class='id identifier rubyid_model_name'>model_name</span>)
  <span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span> <span class='op'>=</span> <span class='id identifier rubyid_model_name'>model_name</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_demodulize'>demodulize</span>.<span class='id identifier rubyid_underscore'>underscore</span>
  <span class='id identifier rubyid_pluralize_table_names'><a href="../ModelSchema.html#pluralize_table_names-class_method" title="ActiveRecord::ModelSchema.pluralize_table_names (method)">pluralize_table_names</a></span> <span class='op'>?</span> <span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>.<span class='id identifier rubyid_pluralize'>pluralize</span> <span class='op'>:</span> <span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::ModelSchema::ClassMethods#table_name (method)">table_name</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="yaml_encoder-instance_method">
  <h3 class='signature nodoc'>
    #<strong>yaml_encoder</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/model_schema.rb#L448-L450'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='448' data-end='450'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/model_schema.rb', line 448</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_yaml_encoder'>yaml_encoder</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@yaml_encoder</span> <span class='op'>||=</span> <span class='const'><a href="../../ActiveModel.html" title="ActiveModel (module)">ActiveModel</a></span><span class='op'>::</span><span class='const'><a href="../../ActiveModel/AttributeSet.html" title="ActiveModel::AttributeSet (class)">AttributeSet</a></span><span class='op'>::</span><span class='const'><a href="../../ActiveModel/AttributeSet/YAMLEncoder.html" title="ActiveModel::AttributeSet::YAMLEncoder (class)">YAMLEncoder</a></span>.<span class='id identifier rubyid_new'><a href="../../ActiveModel/AttributeSet/YAMLEncoder.html#new-class_method" title="ActiveModel::AttributeSet::YAMLEncoder.new (method)">new</a></span>(<span class='id identifier rubyid_attribute_types'>attribute_types</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>