<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveRecord::FixtureSet &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::FixtureSet",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails main</a> &raquo; 
      <a href='../_index.html#alpha_F'>Index (F)</a> &raquo; 
        <a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>FixtureSet&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActiveRecord::FixtureSet</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="FixtureSet/File.html" title="ActiveRecord::FixtureSet::File (class)"><code>File</code></a>,
        <a class='nodoc' href="FixtureSet/ModelMetadata.html" title="ActiveRecord::FixtureSet::ModelMetadata (class)"><code>ModelMetadata</code></a>,
        <a class='nodoc' href="FixtureSet/RenderContext.html" title="ActiveRecord::FixtureSet::RenderContext (class)"><code>RenderContext</code></a>,
        <a class='nodoc' href="FixtureSet/TableRow.html" title="ActiveRecord::FixtureSet::TableRow (class)"><code>TableRow</code></a>,
        <a class='nodoc' href="FixtureSet/TableRows.html" title="ActiveRecord::FixtureSet::TableRows (class)"><code>TableRows</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L527'>activerecord/lib/active_record/fixtures.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixture_set/file.rb#L6'>activerecord/lib/active_record/fixture_set/file.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixture_set/model_metadata.rb#L4'>activerecord/lib/active_record/fixture_set/model_metadata.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixture_set/table_row.rb#L4'>activerecord/lib/active_record/fixture_set/table_row.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixture_set/table_rows.rb#L7'>activerecord/lib/active_record/fixture_set/table_rows.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-Active+Record+Fixtures">Active Record Fixtures</h3>

<p>Fixtures are a way of organizing data that you want to test against; in short, sample data.</p>

<p>They are stored in YAML files, one file per model, which are by default placed in either <code>&lt;your-rails-app&gt;/test/fixtures/</code> or in the <code>test/fixtures</code> folder under any of your application’s engines.</p>

<p>The location can also be changed with <a href="../ActiveSupport/TestCase.html#fixture_paths=-class_method" title="ActiveSupport::TestCase.fixture_paths= (method)">ActiveSupport::TestCase.fixture_paths=</a>, once you have <code>require &quot;rails/test_help&quot;</code> in your <code>test_helper.rb</code>.</p>

<p>The fixture file ends with the <code>.yml</code> file extension, for example: <code>&lt;your-rails-app&gt;/test/fixtures/web_sites.yml</code>).</p>

<p>The format of a fixture file looks like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rubyonrails'>rubyonrails</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>Ruby</span> <span class='id identifier rubyid_on'>on</span> <span class='const'><a href="../Rails.html" title="Rails (module)">Rails</a></span>
  <span class='id identifier rubyid_url'>url</span><span class='op'>:</span> <span class='id identifier rubyid_http'>http</span><span class='symbeg'>:</span><span class='op'>/</span><span class='op'>/</span><span class='id identifier rubyid_www'>www</span>.<span class='id identifier rubyid_rubyonrails'>rubyonrails</span>.<span class='id identifier rubyid_org'>org</span>

<span class='id identifier rubyid_google'>google</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>2</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>Google</span>
  <span class='id identifier rubyid_url'>url</span><span class='op'>:</span> <span class='id identifier rubyid_http'>http</span><span class='symbeg'>:</span><span class='op'>/</span><span class='op'>/</span><span class='id identifier rubyid_www'>www</span>.<span class='id identifier rubyid_google'>google</span>.<span class='id identifier rubyid_com'>com</span></code></pre>

<p>This fixture file includes two fixtures. Each YAML fixture (i.e. record) is given a name and is followed by an indented list of key/value pairs in the “key: value” format. Records are separated by a blank line for your viewing pleasure.</p>

<h4 id="label-Ordering">Ordering</h4>

<p>Fixtures by default are unordered. This is because the maps in YAML are unordered.</p>

<p>If you want ordered fixtures, use the omap YAML type. See <a href="https://yaml.org/type/omap.html">yaml.org/type/omap.html</a> for the specification.</p>

<p>You will need ordered fixtures when you have foreign key constraints on keys in the same table. This is commonly needed for tree structures.</p>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span> <span class='op'>!</span><span class='id identifier rubyid_omap'>omap</span>
<span class='op'>-</span> <span class='id identifier rubyid_parent'>parent</span><span class='op'>:</span>
    <span class='id identifier rubyid_id'>id</span><span class='op'>:</span>         <span class='int'>1</span>
    <span class='id identifier rubyid_parent_id'>parent_id</span><span class='op'>:</span>  <span class='const'>NULL</span>
    <span class='id identifier rubyid_title'>title</span><span class='op'>:</span>      <span class='const'>Parent</span>
<span class='op'>-</span> <span class='id identifier rubyid_child'>child</span><span class='op'>:</span>
    <span class='id identifier rubyid_id'>id</span><span class='op'>:</span>         <span class='int'>2</span>
    <span class='id identifier rubyid_parent_id'>parent_id</span><span class='op'>:</span>  <span class='int'>1</span>
    <span class='id identifier rubyid_title'>title</span><span class='op'>:</span>      <span class='const'>Child</span></code></pre>

<h4 id="label-Using+Fixtures+in+Test+Cases">Using Fixtures in Test Cases</h4>

<p>Since fixtures are a testing construct, we use them in our unit and functional tests. There are two ways to use the fixtures, but first let’s take a look at a sample unit test:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test_helper</span><span class='tstring_end'>&quot;</span></span>

<span class='kw'>class</span> <span class='const'>WebSiteTest</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/TestCase.html" title="ActiveSupport::TestCase (class)">TestCase</a></span>
  <span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>web_site_count</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='int'>2</span><span class='comma'>,</span> <span class='const'>WebSite</span>.<span class='id identifier rubyid_count'>count</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>By default, <code>test_helper.rb</code> will load all of your fixtures into your test database, so this test will succeed.</p>

<p>The testing environment will automatically load all the fixtures into the database before each test. To ensure consistent data, the environment deletes the fixtures before running the load.</p>

<p>In addition to being available in the database, the fixture’s data may also be accessed by using a special dynamic method, which has the same name as the model.</p>

<p>Passing in a fixture name to this dynamic method returns the fixture matching this name:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find one</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby on Rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_web_sites'>web_sites</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_rubyonrails'>rubyonrails</span>).<span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span>
<span class='kw'>end</span></code></pre>

<p>Passing in multiple fixture names returns all fixtures matching these names:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find all by name</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_web_sites'>web_sites</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_rubyonrails'>rubyonrails</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_google'>google</span>).<span class='id identifier rubyid_length'>length</span>
<span class='kw'>end</span></code></pre>

<p>Passing in no arguments returns all fixtures:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find all</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_web_sites'>web_sites</span>.<span class='id identifier rubyid_length'>length</span>
<span class='kw'>end</span></code></pre>

<p>Passing in any fixture name that does not exist will raise <code>StandardError</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find by name that does not exist</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_assert_raise'>assert_raise</span>(<span class='const'>StandardError</span>) { <span class='id identifier rubyid_web_sites'>web_sites</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_reddit'>reddit</span>) }
<span class='kw'>end</span></code></pre>

<p>If the model names conflicts with a <code>TestCase</code> methods, you can use the generic <code>fixture</code> accessor</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>generic find</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby on Rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_fixture'>fixture</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_web_sites'>web_sites</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rubyonrails'>rubyonrails</span>).<span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span>
<span class='kw'>end</span></code></pre>

<p>Alternatively, you may enable auto-instantiation of the fixture data. For instance, take the following tests:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find_alt_method_1</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby on Rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@web_sites</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rubyonrails</span><span class='tstring_end'>&#39;</span></span>][<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span>]
<span class='kw'>end</span>

<span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find_alt_method_2</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby on Rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@rubyonrails</span>.<span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span>
<span class='kw'>end</span></code></pre>

<p>In order to use these methods to access fixtured data within your test cases, you must specify one of the following in your ActiveSupport::TestCase-derived class:</p>
<ul><li>
<p>to fully enable instantiated fixtures (enable alternate methods <code>#1</code> and <code>#2</code> above)</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>self</span>.<span class='id identifier rubyid_use_instantiated_fixtures'>use_instantiated_fixtures</span> <span class='op'>=</span> <span class='kw'>true</span></code></pre>
</li><li>
<p>create only the hash for the fixtures, do not ‘find’ each instance (enable alternate method <code>#1</code> only)</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>self</span>.<span class='id identifier rubyid_use_instantiated_fixtures'>use_instantiated_fixtures</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_no_instances'>no_instances</span></code></pre>
</li></ul>

<p>Using either of these alternate methods incurs a performance hit, as the fixtured data must be fully traversed in the database to create the fixture hash and/or instance variables. This is expensive for large sets of fixtured data.</p>

<h4 id="label-Dynamic+fixtures+with+ERB">Dynamic fixtures with ERB</h4>

<p>Sometimes you don’t care about the content of the fixtures as much as you care about the volume. In these cases, you can mix <a href="../ERB.html" title="ERB (class)"><code>::ERB</code></a> in with your YAML fixtures to create a bunch of fixtures for load testing, like:</p>

<pre class="code xml"><code class="xml">&lt;% 1.upto(1000) do |i| %&gt;
fix_&lt;%= i %&gt;:
  id: &lt;%= i %&gt;
  name: guy_&lt;%= i %&gt;
&lt;% end %&gt;
</code></pre>

<p>This will create 1000 very simple fixtures.</p>

<p>Using ERB, you can also inject dynamic values into your fixtures with inserts like <code>&lt;%= {Date.today}.strftime(&quot;%Y-%m-%d&quot;) %&gt;</code>. This is however a feature to be used with some caution. The point of fixtures are that they’re stable units of predictable sample data. If you feel that you need to inject dynamic values, then perhaps you should reexamine whether your application is properly testable. Hence, dynamic values in fixtures are to be considered a code smell.</p>

<p>Helper methods defined in a fixture will not be available in other fixtures, to prevent against unwanted inter-test dependencies. Methods used by multiple fixtures should be defined in a module that is included in <a href="#context_class-class_method" title="ActiveRecord::FixtureSet.context_class (method)">.context_class</a>.</p>
<ul><li>
<p>define a helper method in <code>test_helper.rb</code></p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>FixtureFileHelpers</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_file_sha'>file_sha</span>(<span class='id identifier rubyid_path'>path</span>)
    <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'><a href="../Digest.html" title="Digest (module)">Digest</a></span><span class='op'>::</span><span class='const'>SHA256</span>.<span class='id identifier rubyid_hexdigest'>hexdigest</span>(<span class='const'><a href="FixtureSet/File.html" title="ActiveRecord::FixtureSet::File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='const'><a href="../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_root'><a href="../Rails.html#root-class_method" title="Rails.root (method)">root</a></span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test/fixtures</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>)))
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>FixtureSet</span>.<span class='id identifier rubyid_context_class'><a href="#context_class-class_method" title="ActiveRecord::FixtureSet.context_class (method)">context_class</a></span>.<span class='id identifier rubyid_include'>include</span> <span class='const'>FixtureFileHelpers</span></code></pre>
</li><li>
<p>use the helper method in a fixture</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_photo'>photo</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_kitten'>kitten</span>.<span class='id identifier rubyid_png'>png</span>
  <span class='id identifier rubyid_sha'>sha</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%=</span><span class='tstring_content'> file_sha &#39;files/kitten.png&#39; %&gt;</span></code></pre>
</li></ul>

<h4 id="label-Transactional+Tests">Transactional Tests</h4>

<p>Test cases can use begin+rollback to isolate their changes to the database instead of having to delete+insert for every test case.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>FooTest</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/TestCase.html" title="ActiveSupport::TestCase (class)">TestCase</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_use_transactional_tests'>use_transactional_tests</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>godzilla</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_assert_not_empty'>assert_not_empty</span> <span class='const'>Foo</span>.<span class='id identifier rubyid_all'>all</span>
    <span class='const'>Foo</span>.<span class='id identifier rubyid_destroy_all'>destroy_all</span>
    <span class='id identifier rubyid_assert_empty'>assert_empty</span> <span class='const'>Foo</span>.<span class='id identifier rubyid_all'>all</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>godzilla aftermath</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_assert_not_empty'>assert_not_empty</span> <span class='const'>Foo</span>.<span class='id identifier rubyid_all'>all</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>If you preload your test database with all fixture data (probably by running <code>bin/rails db:fixtures:load</code>) and use transactional tests, then you may omit all fixtures declarations in your test cases since all the data’s already there and every case rolls back its changes.</p>

<p>In order to use instantiated fixtures with preloaded data, set <code>self.pre_loaded_fixtures</code> to true. This will provide access to fixture data for every table that has been loaded through fixtures (depending on the value of <code>use_instantiated_fixtures</code>).</p>

<p>When <strong>not</strong> to use transactional tests:</p>
<ol><li>
<p>You’re testing whether a transaction works correctly. Nested transactions don’t commit until all parent transactions commit, particularly, the fixtures transaction which is begun in setup and rolled back in teardown. Thus, you won’t be able to verify the results of your transaction until Active Record supports nested transactions or savepoints (in progress).</p>
</li><li>
<p>Your database does not support transactions. Every Active Record database supports transactions except MySQL MyISAM. Use InnoDB, MaxDB, or NDB instead.</p>
</li></ol>

<h4 id="label-Advanced+Fixtures">Advanced Fixtures</h4>

<p>Fixtures that don’t specify an ID get some extra features:</p>
<ul><li>
<p>Stable, autogenerated IDs</p>
</li><li>
<p>Label references for associations (belongs_to, has_one, has_many)</p>
</li><li>
<p>HABTM associations as inline lists</p>
</li></ul>

<p>There are some more advanced features available even if the id is specified:</p>
<ul><li>
<p>Autofilled timestamp columns</p>
</li><li>
<p><a href="Fixture.html" title="ActiveRecord::Fixture (class)"><code>Fixture</code></a> label interpolation</p>
</li><li>
<p>Support for YAML defaults</p>
</li></ul>

<h5 id="label-Stable-2C+Autogenerated+IDs">Stable, Autogenerated IDs</h5>

<p>Here, have a monkey fixture:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_george'>george</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>George</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Monkey</span>

<span class='id identifier rubyid_reginald'>reginald</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>2</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>Reginald</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Pirate</span></code></pre>

<p>Each of these fixtures has two unique identifiers: one for the database and one for the humans. Why don’t we generate the primary key instead? Hashing each fixture’s label yields a consistent ID:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_george'>george</span><span class='op'>:</span> <span class='comment'># generated id: 380982691
</span>  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>George</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Monkey</span>

<span class='id identifier rubyid_reginald'>reginald</span><span class='op'>:</span> <span class='comment'># generated id: 41001176
</span>  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>Reginald</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Pirate</span></code></pre>

<p>Active Record looks at the fixture’s model class, discovers the correct primary key, and generates it right before inserting the fixture into the database.</p>

<p>The generated ID for a given label is constant, so we can discover any fixture’s ID without loading anything, as long as we know the label.</p>

<h5 id="label-Label+references+for+associations+-28-7Bbelongs_to-7D-2C+-7Bhas_one-7D-2C+-7Bhas_many-7D-29">Label references for associations (<code>belongs_to</code>, <code>has_one</code>, <code>has_many</code>)</h5>

<p>Specifying foreign keys in fixtures can be very fragile, not to mention difficult to read. Since Active Record can figure out the ID of any fixture from its label, you can specify FK’s by label instead of ID.</p>

<h6 id="label-7Bbelongs_to-7D"><code>belongs_to</code></h6>

<p>Let’s break out some more monkeys and pirates.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in pirates.yml
</span>
<span class='id identifier rubyid_reginald'>reginald</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>Reginald</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Pirate</span>
  <span class='id identifier rubyid_monkey_id'>monkey_id</span><span class='op'>:</span> <span class='int'>1</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in monkeys.yml
</span>
<span class='id identifier rubyid_george'>george</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>George</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Monkey</span>
  <span class='id identifier rubyid_pirate_id'>pirate_id</span><span class='op'>:</span> <span class='int'>1</span></code></pre>

<p>Add a few more monkeys and pirates and break this into multiple files, and it gets pretty hard to keep track of what’s going on. Let’s use labels instead of IDs:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in pirates.yml
</span>
<span class='id identifier rubyid_reginald'>reginald</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>Reginald</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Pirate</span>
  <span class='id identifier rubyid_monkey'>monkey</span><span class='op'>:</span> <span class='id identifier rubyid_george'>george</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in monkeys.yml
</span>
<span class='id identifier rubyid_george'>george</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>George</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Monkey</span>
  <span class='id identifier rubyid_pirate'>pirate</span><span class='op'>:</span> <span class='id identifier rubyid_reginald'>reginald</span></code></pre>

<p>Pow! All is made clear. Active Record reflects on the fixture’s model class, finds all the <code>belongs_to</code> associations, and allows you to specify a target <strong>label</strong> for the <strong>association</strong> (monkey: george) rather than a target <strong>id</strong> for the <strong>FK</strong> (<code>monkey_id: 1</code>).</p>

<h6 id="label-Polymorphic+-7Bbelongs_to-7D">Polymorphic <code>belongs_to</code></h6>

<p>Supporting polymorphic relationships is a little bit more complicated, since Active Record needs to know what type your association is pointing at. Something like this should look familiar:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in fruit.rb
</span>
<span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_eater'>eater</span><span class='comma'>,</span> <span class='label'>polymorphic:</span> <span class='kw'>true</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in fruits.yml
</span>
<span class='id identifier rubyid_apple'>apple</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_apple'>apple</span>
  <span class='id identifier rubyid_eater_id'>eater_id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_eater_type'>eater_type</span><span class='op'>:</span> <span class='const'>Monkey</span></code></pre>

<p>Can we do better? You bet!</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_apple'>apple</span><span class='op'>:</span>
  <span class='id identifier rubyid_eater'>eater</span><span class='op'>:</span> <span class='id identifier rubyid_george'>george</span> (<span class='const'>Monkey</span>)</code></pre>

<p>Just provide the polymorphic target type and Active Record will take care of the rest.</p>

<h6 id="label-7Bhas_and_belongs_to_many-7D+or+has_many+-3Athrough"><code>has_and_belongs_to_many</code> or <code>has_many :through</code></h6>

<p>Time to give our monkey some fruit.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in monkeys.yml
</span>
<span class='id identifier rubyid_george'>george</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>George</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Monkey</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in fruits.yml
</span>
<span class='id identifier rubyid_apple'>apple</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_apple'>apple</span>

<span class='id identifier rubyid_orange'>orange</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>2</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_orange'>orange</span>

<span class='id identifier rubyid_grape'>grape</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>3</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_grape'>grape</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in fruits_monkeys.yml
</span>
<span class='id identifier rubyid_apple_george'>apple_george</span><span class='op'>:</span>
  <span class='id identifier rubyid_fruit_id'>fruit_id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_monkey_id'>monkey_id</span><span class='op'>:</span> <span class='int'>1</span>

<span class='id identifier rubyid_orange_george'>orange_george</span><span class='op'>:</span>
  <span class='id identifier rubyid_fruit_id'>fruit_id</span><span class='op'>:</span> <span class='int'>2</span>
  <span class='id identifier rubyid_monkey_id'>monkey_id</span><span class='op'>:</span> <span class='int'>1</span>

<span class='id identifier rubyid_grape_george'>grape_george</span><span class='op'>:</span>
  <span class='id identifier rubyid_fruit_id'>fruit_id</span><span class='op'>:</span> <span class='int'>3</span>
  <span class='id identifier rubyid_monkey_id'>monkey_id</span><span class='op'>:</span> <span class='int'>1</span></code></pre>

<p>Let’s make the HABTM fixture go away.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in monkeys.yml
</span>
<span class='id identifier rubyid_george'>george</span><span class='op'>:</span>
  <span class='id identifier rubyid_id'>id</span><span class='op'>:</span> <span class='int'>1</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>George</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>Monkey</span>
  <span class='id identifier rubyid_fruits'>fruits</span><span class='op'>:</span> <span class='id identifier rubyid_apple'>apple</span><span class='comma'>,</span> <span class='id identifier rubyid_orange'>orange</span><span class='comma'>,</span> <span class='id identifier rubyid_grape'>grape</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>### in fruits.yml
</span>
<span class='id identifier rubyid_apple'>apple</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_apple'>apple</span>

<span class='id identifier rubyid_orange'>orange</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_orange'>orange</span>

<span class='id identifier rubyid_grape'>grape</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='id identifier rubyid_grape'>grape</span></code></pre>

<p>Zap! No more fruits_monkeys.yml file. We’ve specified the list of fruits on George’s fixture, but we could’ve just as easily specified a list of monkeys on each fruit. As with <code>belongs_to</code>, Active Record reflects on the fixture’s model class and discovers the <code>has_and_belongs_to_many</code> associations.</p>

<h5 id="label-Autofilled+Timestamp+Columns">Autofilled Timestamp Columns</h5>

<p>If your table/model specifies any of Active Record’s standard timestamp columns (<code>created_at</code>, <code>created_on</code>, <code>updated_at</code>, <code>updated_on</code>), they will automatically be set to <code>Time.now</code>.</p>

<p>If you’ve set specific values, they’ll be left alone.</p>

<h5 id="label-Fixture+label+interpolation">Fixture label interpolation</h5>

<p>The label of the current fixture is always available as a column value:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_geeksomnia'>geeksomnia</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>Geeksomnia</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s Account
  subdomain: $LABEL
  email: $LABEL@email.com</span></code></pre>

<p>Also, sometimes (like when porting older join table fixtures) you’ll need to be able to get a hold of the identifier for a given label. <a href="../ERB.html" title="ERB (class)"><code>::ERB</code></a> to the rescue:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_george_reginald'>george_reginald</span><span class='op'>:</span>
  <span class='id identifier rubyid_monkey_id'>monkey_id</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%=</span><span class='tstring_content'> ActiveRecord::FixtureSet.identify(:reginald) %&gt;
  pirate_id: &lt;%</span><span class='tstring_end'>=</span></span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>FixtureSet</span>.<span class='id identifier rubyid_identify'><a href="#identify-class_method" title="ActiveRecord::FixtureSet.identify (method)">identify</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_george'>george</span>) <span class='op'>%</span><span class='op'>&gt;</span></code></pre>

<p>If the model uses UUID values for identifiers, add the <code>:uuid</code> argument:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>FixtureSet</span>.<span class='id identifier rubyid_identify'><a href="#identify-class_method" title="ActiveRecord::FixtureSet.identify (method)">identify</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_boaty_mcboatface'>boaty_mcboatface</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_uuid'>uuid</span>)</code></pre>

<h5 id="label-Support+for+YAML+defaults">Support for YAML defaults</h5>

<p>You can set and reuse defaults in your fixtures YAML file. This is the same technique used in the <code>database.yml</code> file to specify defaults:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>DEFAULTS</span><span class='op'>:</span> <span class='op'>&amp;</span><span class='const'>DEFAULTS</span>
  <span class='id identifier rubyid_created_on'>created_on</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%=</span><span class='tstring_content'> 3.weeks.ago.to_fs(:db) %&gt;

first:
  name: Smurf
  &lt;&lt;: *DEFAULTS

second:
  name: Fraggle
  &lt;&lt;: *DEFAULTS</span></code></pre>

<p>Any fixture labeled “DEFAULTS” is safely ignored.</p>

<p>Besides using “DEFAULTS”, you can also specify what fixtures will be ignored by setting “ignore” in “_fixture” section.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># users.yml
</span><span class='id identifier rubyid__fixture'>_fixture</span><span class='op'>:</span>
  <span class='id identifier rubyid_ignore'>ignore</span><span class='op'>:</span>
    <span class='op'>-</span> <span class='id identifier rubyid_base'>base</span>
  <span class='comment'># or use &quot;ignore: base&quot; when there is only one fixture that needs to be ignored.
</span>
<span class='id identifier rubyid_base'>base</span><span class='op'>:</span> <span class='op'>&amp;</span><span class='id identifier rubyid_base'>base</span>
  <span class='id identifier rubyid_admin'>admin</span><span class='op'>:</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_introduction'>introduction</span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is a default description</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_admin'>admin</span><span class='op'>:</span>
  <span class='op'>&lt;&lt;</span><span class='op'>:</span> <span class='op'>*</span><span class='id identifier rubyid_base'>base</span>
  <span class='id identifier rubyid_admin'>admin</span><span class='op'>:</span> <span class='kw'>true</span>

<span class='id identifier rubyid_visitor'>visitor</span><span class='op'>:</span>
  <span class='op'>&lt;&lt;</span><span class='op'>:</span> <span class='op'>*</span><span class='id identifier rubyid_base'>base</span></code></pre>

<p>In the above example, ‘base’ will be ignored when creating fixtures. This can be used for common attributes inheriting.</p>

<h4 id="label-Composite+Primary+Key+Fixtures">Composite Primary Key Fixtures</h4>

<p>Fixtures for composite primary key tables are fairly similar to normal tables. When using an id column, the column may be omitted as usual:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># app/models/book.rb
</span><span class='kw'>class</span> <span class='const'>Book</span> <span class='op'>&lt;</span> <span class='const'>ApplicationRecord</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_primary_key'>primary_key</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_author_id'>author_id</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>]
  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_author'>author</span>
<span class='kw'>end</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># books.yml
</span><span class='id identifier rubyid_alices_adventure_in_wonderland'>alices_adventure_in_wonderland</span><span class='op'>:</span>
  <span class='id identifier rubyid_author_id'>author_id</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%=</span><span class='tstring_content'> ActiveRecord::FixtureSet.identify(:lewis_carroll) %&gt;
  title: &quot;Alice&#39;s Adventures in Wonderland&quot;</span></code></pre>

<p>However, in order to support composite primary key relationships, you must use the <a href="#composite_identify-class_method" title="ActiveRecord::FixtureSet.composite_identify (method)">.composite_identify</a> method:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># app/models/book_orders.rb
</span><span class='kw'>class</span> <span class='const'>BookOrder</span> <span class='op'>&lt;</span> <span class='const'>ApplicationRecord</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_primary_key'>primary_key</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_shop_id'>shop_id</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>]
  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_order'>order</span><span class='comma'>,</span> <span class='label'>foreign_key:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_shop_id'>shop_id</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_order_id'>order_id</span>]
  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_book'>book</span><span class='comma'>,</span> <span class='label'>foreign_key:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_author_id'>author_id</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_book_id'>book_id</span>]
<span class='kw'>end</span></code></pre>

<p></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># book_orders.yml
</span><span class='id identifier rubyid_alices_adventure_in_wonderland_in_books'>alices_adventure_in_wonderland_in_books</span><span class='op'>:</span>
  <span class='id identifier rubyid_author'>author</span><span class='op'>:</span> <span class='id identifier rubyid_lewis_carroll'>lewis_carroll</span>
  <span class='id identifier rubyid_book_id'>book_id</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='tstring'><span class='tstring_beg'>%=</span><span class='tstring_content'> ActiveRecord::FixtureSet.composite_identify(
               :alices_adventure_in_wonderland, Book.primary_key)[:id] %&gt;
  shop: book_store
  order_id: &lt;%</span><span class='tstring_end'>=</span></span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>FixtureSet</span>.<span class='id identifier rubyid_composite_identify'><a href="#composite_identify-class_method" title="ActiveRecord::FixtureSet.composite_identify (method)">composite_identify</a></span>(
               <span class='symbeg'>:</span><span class='id identifier rubyid_books'>books</span><span class='comma'>,</span> <span class='const'>Order</span>.<span class='id identifier rubyid_primary_key'>primary_key</span>)[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>] <span class='op'>%</span><span class='op'>&gt;</span></code></pre>

<h4 id="label-Configure+the+fixture+model+class">Configure the fixture model class</h4>

<p>It’s possible to set the fixture’s model class directly in the YAML file. This is helpful when fixtures are loaded outside tests and <code>set_fixture_class</code> is not available (e.g. when running <code>bin/rails db:fixtures:load</code>).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid__fixture'>_fixture</span><span class='op'>:</span>
  <span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='op'>:</span> <span class='const'>User</span>
<span class='id identifier rubyid_david'>david</span><span class='op'>:</span>
  <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='op'>:</span> <span class='const'>David</span></code></pre>

<p>Any fixtures labeled “_fixture” are safely ignored.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='MAX_ID-constant' class='summary_signature'>MAX_ID =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L537-L537'># File 'activerecord/lib/active_record/fixtures.rb', line 537</a>    <pre class='code ruby'><span class='int'>2</span><span class='op'>**</span><span class='int'>30</span> <span class='op'>-</span> <span class='int'>1</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#all_loaded_fixtures-class_method" title=".all_loaded_fixtures (class method)">.<strong>all_loaded_fixtures</strong>  </a>
      (also: #all_loaded_fixtures)
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#cache_fixtures-class_method" title=".cache_fixtures (class method)">.<strong>cache_fixtures</strong>(connection_pool, fixtures_map)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cache_for_connection_pool-class_method" title=".cache_for_connection_pool (class method)">.<strong>cache_for_connection_pool</strong>(connection_pool)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cached_fixtures-class_method" title=".cached_fixtures (class method)">.<strong>cached_fixtures</strong>(connection_pool, keys_to_fetch = nil)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#composite_identify-class_method" title=".composite_identify (class method)">.<strong>composite_identify</strong>(label, key)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a consistent, platform-independent hash representing a mapping between the label and the subcomponents of the provided composite key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#context_class-class_method" title=".context_class (class method)">.<strong>context_class</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Superclass for the evaluation contexts used by ERB fixtures.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create_fixtures-class_method" title=".create_fixtures (class method)">.<strong>create_fixtures</strong>(fixtures_directories, fixture_set_names, class_names = {}, config = ActiveRecord::Base)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fixture_is_cached%3F-class_method" title=".fixture_is_cached? (class method)">.<strong>fixture_is_cached?</strong>(connection_pool, table_name)  &#x21d2; Boolean </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#identify-class_method" title=".identify (class method)">.<strong>identify</strong>(label, column_type = :integer)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a consistent, platform-independent identifier for <code>label</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#instantiate_all_loaded_fixtures-class_method" title=".instantiate_all_loaded_fixtures (class method)">.<strong>instantiate_all_loaded_fixtures</strong>(object, load_instances = true)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#instantiate_fixtures-class_method" title=".instantiate_fixtures (class method)">.<strong>instantiate_fixtures</strong>(object, fixture_set, load_instances = true)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(_, name, class_name, path, config = ActiveRecord::Base)  &#x21d2; FixtureSet </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset_cache-class_method" title=".reset_cache (class method)">.<strong>reset_cache</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#check_all_foreign_keys_valid!-class_method" title=".check_all_foreign_keys_valid! (class method)">.<strong>check_all_foreign_keys_valid!</strong>(conn)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#default_fixture_model_name-class_method" title=".default_fixture_model_name (class method)">.<strong>default_fixture_model_name</strong>(fixture_set_name, config = ActiveRecord::Base)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#default_fixture_table_name-class_method" title=".default_fixture_table_name (class method)">.<strong>default_fixture_table_name</strong>(fixture_set_name, config = ActiveRecord::Base)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#insert-class_method" title=".insert (class method)">.<strong>insert</strong>(fixture_sets, connection_pool)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#read_and_insert-class_method" title=".read_and_insert (class method)">.<strong>read_and_insert</strong>(fixtures_directories, fixture_files, class_names, connection_pool)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#update_all_loaded_fixtures-class_method" title=".update_all_loaded_fixtures (class method)">.<strong>update_all_loaded_fixtures</strong>(fixtures_map)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#all_loaded_fixtures-instance_method" title="#all_loaded_fixtures (instance method)">#<strong>all_loaded_fixtures</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#config-instance_method" title="#config (instance method)">#<strong>config</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#fixtures-instance_method" title="#fixtures (instance method)">#<strong>fixtures</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#ignored_fixtures-instance_method" title="#ignored_fixtures (instance method)">#<strong>ignored_fixtures</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#model_class-instance_method" title="#model_class (instance method)">#<strong>model_class</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#table_name-instance_method" title="#table_name (instance method)">#<strong>table_name</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature rw priv'>
      <a href="#ignored_fixtures=-instance_method" title="#ignored_fixtures= (instance method)">#<strong>ignored_fixtures=</strong>(base)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature rw priv'>
      <a href="#model_class=-instance_method" title="#model_class= (instance method)">#<strong>model_class=</strong>(class_name)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(x)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#[]=-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(k, v)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>(&amp;block)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#table_rows-instance_method" title="#table_rows (instance method)">#<strong>table_rows</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash of rows to be inserted.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#default_fixture_model_class-instance_method" title="#default_fixture_model_class (instance method)">#<strong>default_fixture_model_class</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#read_fixture_files-instance_method" title="#read_fixture_files (instance method)">#<strong>read_fixture_files</strong>(path)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Loads the fixtures from the YAML file at <code>path</code>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(_, name, class_name, path, config = ActiveRecord::Base)  &#x21d2; <code>FixtureSet</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L713-L722'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='713' data-end='722'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 713</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='comma'>,</span> <span class='id identifier rubyid_class_name'>class_name</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>)
  <span class='ivar'>@name</span>     <span class='op'>=</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span>
  <span class='ivar'>@path</span>     <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='ivar'>@config</span>   <span class='op'>=</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>

  <span class='kw'>self</span>.<span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span> <span class='op'>=</span> <span class='id identifier rubyid_class_name'>class_name</span>
  <span class='ivar'>@fixtures</span> <span class='op'>=</span> <span class='id identifier rubyid_read_fixture_files'><a href="#read_fixture_files-instance_method" title="ActiveRecord::FixtureSet#read_fixture_files (method)">read_fixture_files</a></span>(<span class='id identifier rubyid_path'>path</span>)

  <span class='ivar'>@table_name</span> <span class='op'>=</span> <span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='op'>&amp;.</span><span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span> <span class='op'>||</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_default_fixture_table_name'><a href="#default_fixture_table_name-class_method" title="ActiveRecord::FixtureSet.default_fixture_table_name (method)">default_fixture_table_name</a></span>(<span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='comma'>,</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="all_loaded_fixtures-class_method">
  <h3 class='signature rw first'>
    .<strong>all_loaded_fixtures</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#all_loaded_fixtures</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L541-L541'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='541' data-end='541'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 541</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all_loaded_fixtures'>all_loaded_fixtures</span><span class='comma'>,</span> <span class='label'>default:</span> {}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="cache_fixtures-class_method">
  <h3 class='signature  first'>
    .<strong>cache_fixtures</strong>(connection_pool, fixtures_map)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L576-L578'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='576' data-end='578'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 576</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cache_fixtures'>cache_fixtures</span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='comma'>,</span> <span class='id identifier rubyid_fixtures_map'>fixtures_map</span>)
  <span class='id identifier rubyid_cache_for_connection_pool'><a href="#cache_for_connection_pool-class_method" title="ActiveRecord::FixtureSet.cache_for_connection_pool (method)">cache_for_connection_pool</a></span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span>).<span class='id identifier rubyid_update'>update</span>(<span class='id identifier rubyid_fixtures_map'>fixtures_map</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cache_for_connection_pool-class_method">
  <h3 class='signature '>
    .<strong>cache_for_connection_pool</strong>(connection_pool)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L560-L562'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='560' data-end='562'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 560</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cache_for_connection_pool'>cache_for_connection_pool</span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span>)
  <span class='cvar'>@@all_cached_fixtures</span>[<span class='id identifier rubyid_connection_pool'>connection_pool</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cached_fixtures-class_method">
  <h3 class='signature '>
    .<strong>cached_fixtures</strong>(connection_pool, keys_to_fetch = nil)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L568-L574'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='568' data-end='574'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 568</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cached_fixtures'>cached_fixtures</span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='comma'>,</span> <span class='id identifier rubyid_keys_to_fetch'>keys_to_fetch</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_keys_to_fetch'>keys_to_fetch</span>
    <span class='id identifier rubyid_cache_for_connection_pool'><a href="#cache_for_connection_pool-class_method" title="ActiveRecord::FixtureSet.cache_for_connection_pool (method)">cache_for_connection_pool</a></span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span>).<span class='id identifier rubyid_values_at'>values_at</span>(<span class='op'>*</span><span class='id identifier rubyid_keys_to_fetch'>keys_to_fetch</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cache_for_connection_pool'><a href="#cache_for_connection_pool-class_method" title="ActiveRecord::FixtureSet.cache_for_connection_pool (method)">cache_for_connection_pool</a></span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span>).<span class='id identifier rubyid_values'>values</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_all_foreign_keys_valid!-class_method">
  <h3 class='signature priv'>
    .<strong>check_all_foreign_keys_valid!</strong>(conn)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L696-L704'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='696' data-end='704'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 696</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_all_foreign_keys_valid!'>check_all_foreign_keys_valid!</span>(<span class='id identifier rubyid_conn'>conn</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_verify_foreign_keys_for_fixtures'><a href="../ActiveRecord.html#verify_foreign_keys_for_fixtures-class_method" title="ActiveRecord.verify_foreign_keys_for_fixtures (method)">verify_foreign_keys_for_fixtures</a></span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_conn'>conn</span>.<span class='id identifier rubyid_check_all_foreign_keys_valid!'>check_all_foreign_keys_valid!</span>
  <span class='kw'>rescue</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)">StatementInvalid</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Foreign key violations found in your fixture data. Ensure you aren&#39;t referring to labels that don&#39;t exist on associations. Error from database:\n\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="composite_identify-class_method">
  <h3 class='signature '>
    .<strong>composite_identify</strong>(label, key)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a consistent, platform-independent hash representing a mapping between the label and the subcomponents of the provided composite key.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_composite_identify'>composite_identify</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>label</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_c'>c</span>]) <span class='comment'># =&gt; { a: hash_1, b: hash_2, c: hash_3 }</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L633-L638'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='633' data-end='638'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 633</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_composite_identify'>composite_identify</span>(<span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span>)
  <span class='id identifier rubyid_key'>key</span>
    .<span class='id identifier rubyid_index_with'>index_with</span>
    .<span class='id identifier rubyid_with_index'>with_index</span> { <span class='op'>|</span><span class='id identifier rubyid_sub_key'>sub_key</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span> (<span class='id identifier rubyid_identify'><a href="#identify-class_method" title="ActiveRecord::FixtureSet.identify (method)">identify</a></span>(<span class='id identifier rubyid_label'>label</span>) <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_index'>index</span>) <span class='op'>%</span> <span class='const'><a href="#MAX_ID-constant" title="ActiveRecord::FixtureSet::MAX_ID (constant)">MAX_ID</a></span> }
    .<span class='id identifier rubyid_with_indifferent_access'>with_indifferent_access</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="context_class-class_method">
  <h3 class='signature '>
    .<strong>context_class</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Superclass for the evaluation contexts used by ERB fixtures.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L641-L643'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='641' data-end='643'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 641</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_context_class'>context_class</span>
  <span class='ivar'>@context_class</span> <span class='op'>||=</span> <span class='const'><a href="../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::FixtureSet.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_fixtures-class_method">
  <h3 class='signature '>
    .<strong>create_fixtures</strong>(fixtures_directories, fixture_set_names, class_names = {}, config = ActiveRecord::Base)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L595-L614'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='595' data-end='614'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 595</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_fixtures'>create_fixtures</span>(<span class='id identifier rubyid_fixtures_directories'>fixtures_directories</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_set_names'>fixture_set_names</span><span class='comma'>,</span> <span class='id identifier rubyid_class_names'>class_names</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>)
  <span class='id identifier rubyid_fixture_set_names'>fixture_set_names</span> <span class='op'>=</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>(<span class='id identifier rubyid_fixture_set_names'>fixture_set_names</span>).<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_s'>to_s</span>)
  <span class='id identifier rubyid_class_names'>class_names</span>.<span class='id identifier rubyid_stringify_keys!'>stringify_keys!</span>

  <span class='id identifier rubyid_connection_pool'>connection_pool</span> <span class='op'>=</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>.<span class='id identifier rubyid_connection_pool'>connection_pool</span>
  <span class='id identifier rubyid_fixture_files_to_read'>fixture_files_to_read</span> <span class='op'>=</span> <span class='id identifier rubyid_fixture_set_names'>fixture_set_names</span>.<span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fs_name'>fs_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_fixture_is_cached?'><a href="#fixture_is_cached%3F-class_method" title="ActiveRecord::FixtureSet.fixture_is_cached? (method)">fixture_is_cached?</a></span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='comma'>,</span> <span class='id identifier rubyid_fs_name'>fs_name</span>)
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_fixture_files_to_read'>fixture_files_to_read</span>.<span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_fixtures_map'>fixtures_map</span> <span class='op'>=</span> <span class='id identifier rubyid_read_and_insert'><a href="#read_and_insert-class_method" title="ActiveRecord::FixtureSet.read_and_insert (method)">read_and_insert</a></span>(
      <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>(<span class='id identifier rubyid_fixtures_directories'>fixtures_directories</span>)<span class='comma'>,</span>
      <span class='id identifier rubyid_fixture_files_to_read'>fixture_files_to_read</span><span class='comma'>,</span>
      <span class='id identifier rubyid_class_names'>class_names</span><span class='comma'>,</span>
      <span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='comma'>,</span>
    )
    <span class='id identifier rubyid_cache_fixtures'><a href="#cache_fixtures-class_method" title="ActiveRecord::FixtureSet.cache_fixtures (method)">cache_fixtures</a></span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='comma'>,</span> <span class='id identifier rubyid_fixtures_map'>fixtures_map</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_cached_fixtures'><a href="#cached_fixtures-class_method" title="ActiveRecord::FixtureSet.cached_fixtures (method)">cached_fixtures</a></span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_set_names'>fixture_set_names</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_fixture_model_name-class_method">
  <h3 class='signature nodoc'>
    .<strong>default_fixture_model_name</strong>(fixture_set_name, config = ActiveRecord::Base)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L544-L548'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='544' data-end='548'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 544</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_fixture_model_name'>default_fixture_model_name</span>(<span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>.<span class='id identifier rubyid_pluralize_table_names'>pluralize_table_names</span> <span class='op'>?</span>
    <span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span>.<span class='id identifier rubyid_singularize'>singularize</span>.<span class='id identifier rubyid_camelize'>camelize</span> <span class='op'>:</span>
    <span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span>.<span class='id identifier rubyid_camelize'>camelize</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_fixture_table_name-class_method">
  <h3 class='signature nodoc'>
    .<strong>default_fixture_table_name</strong>(fixture_set_name, config = ActiveRecord::Base)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L550-L554'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='550' data-end='554'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 550</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_fixture_table_name'>default_fixture_table_name</span>(<span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>) <span class='comment'># :nodoc:
</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>.<span class='id identifier rubyid_table_name_prefix'>table_name_prefix</span> <span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>\
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>) <span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>\
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>.<span class='id identifier rubyid_table_name_suffix'>table_name_suffix</span> <span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_to_sym'>to_sym</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fixture_is_cached?-class_method">
  <h3 class='signature '>
    .<strong>fixture_is_cached?</strong>(connection_pool, table_name)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L564-L566'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='564' data-end='566'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 564</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fixture_is_cached?'>fixture_is_cached?</span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='comma'>,</span> <span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span>)
  <span class='id identifier rubyid_cache_for_connection_pool'><a href="#cache_for_connection_pool-class_method" title="ActiveRecord::FixtureSet.cache_for_connection_pool (method)">cache_for_connection_pool</a></span>(<span class='id identifier rubyid_connection_pool'>connection_pool</span>)[<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="identify-class_method">
  <h3 class='signature '>
    .<strong>identify</strong>(label, column_type = :integer)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a consistent, platform-independent identifier for <code>label</code>.</p>

<p>Integer identifiers are values less than 2^30. UUIDs are RFC 4122 version 5 SHA-1 hashes.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L619-L625'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='619' data-end='625'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 619</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_identify'>identify</span>(<span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_column_type'>column_type</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_column_type'>column_type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_uuid'>uuid</span>
    <span class='const'><a href="../Digest.html" title="Digest (module)">Digest</a></span><span class='op'>::</span><span class='const'><a href="../Digest/UUID.html" title="Digest::UUID (module)">UUID</a></span>.<span class='id identifier rubyid_uuid_v5'><a href="../Digest/UUID.html#uuid_v5-class_method" title="Digest::UUID.uuid_v5 (method)">uuid_v5</a></span>(<span class='const'><a href="../Digest.html" title="Digest (module)">Digest</a></span><span class='op'>::</span><span class='const'><a href="../Digest/UUID.html" title="Digest::UUID (module)">UUID</a></span><span class='op'>::</span><span class='const'><a href="../Digest/UUID.html#OID_NAMESPACE-constant" title="Digest::UUID::OID_NAMESPACE (constant)">OID_NAMESPACE</a></span><span class='comma'>,</span> <span class='id identifier rubyid_label'>label</span>.<span class='id identifier rubyid_to_s'>to_s</span>)
  <span class='kw'>else</span>
    <span class='const'>Zlib</span>.<span class='id identifier rubyid_crc32'>crc32</span>(<span class='id identifier rubyid_label'>label</span>.<span class='id identifier rubyid_to_s'>to_s</span>) <span class='op'>%</span> <span class='const'><a href="#MAX_ID-constant" title="ActiveRecord::FixtureSet::MAX_ID (constant)">MAX_ID</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="insert-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>insert</strong>(fixture_sets, connection_pool)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L665-L694'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='665' data-end='694'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 665</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_insert'>insert</span>(<span class='id identifier rubyid_fixture_sets'>fixture_sets</span><span class='comma'>,</span> <span class='id identifier rubyid_connection_pool'>connection_pool</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_fixture_sets_by_pool'>fixture_sets_by_pool</span> <span class='op'>=</span> <span class='id identifier rubyid_fixture_sets'>fixture_sets</span>.<span class='id identifier rubyid_group_by'>group_by</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fixture_set'>fixture_set</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_fixture_set'>fixture_set</span>.<span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span>
      <span class='id identifier rubyid_fixture_set'>fixture_set</span>.<span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span>.<span class='id identifier rubyid_connection_pool'>connection_pool</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_connection_pool'>connection_pool</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_fixture_sets_by_pool'>fixture_sets_by_pool</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="ActiveRecord::FixtureSet#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool'>pool</span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='op'>|</span>
    <span class='id identifier rubyid_table_rows_for_connection'>table_rows_for_connection</span> <span class='op'>=</span> <span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::FixtureSet.new (method)">new</a></span> { <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>=</span> [] }

    <span class='id identifier rubyid_set'>set</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="ActiveRecord::FixtureSet#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fixture_set'>fixture_set</span><span class='op'>|</span>
      <span class='id identifier rubyid_fixture_set'>fixture_set</span>.<span class='id identifier rubyid_table_rows'><a href="#table_rows-instance_method" title="ActiveRecord::FixtureSet#table_rows (method)">table_rows</a></span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="ActiveRecord::FixtureSet#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_rows'>rows</span><span class='op'>|</span>
        <span class='id identifier rubyid_table_rows_for_connection'>table_rows_for_connection</span>[<span class='id identifier rubyid_table'>table</span>].<span class='id identifier rubyid_unshift'>unshift</span>(<span class='op'>*</span><span class='id identifier rubyid_rows'>rows</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_with_connection'>with_connection</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_conn'>conn</span><span class='op'>|</span>
      <span class='id identifier rubyid_conn'>conn</span>.<span class='id identifier rubyid_insert_fixtures_set'>insert_fixtures_set</span>(<span class='id identifier rubyid_table_rows_for_connection'>table_rows_for_connection</span><span class='comma'>,</span> <span class='id identifier rubyid_table_rows_for_connection'>table_rows_for_connection</span>.<span class='id identifier rubyid_keys'>keys</span>)

      <span class='id identifier rubyid_check_all_foreign_keys_valid!'><a href="#check_all_foreign_keys_valid!-class_method" title="ActiveRecord::FixtureSet.check_all_foreign_keys_valid! (method)">check_all_foreign_keys_valid!</a></span>(<span class='id identifier rubyid_conn'>conn</span>)

      <span class='comment'># Cap primary key sequences to max(pk).
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_conn'>conn</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_reset_column_sequences!'>reset_column_sequences!</span>)
        <span class='id identifier rubyid_conn'>conn</span>.<span class='id identifier rubyid_reset_column_sequences!'>reset_column_sequences!</span>(<span class='id identifier rubyid_set'>set</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_fs'>fs</span><span class='op'>|</span> [<span class='id identifier rubyid_fs'>fs</span>.<span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span>] })
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instantiate_all_loaded_fixtures-class_method">
  <h3 class='signature '>
    .<strong>instantiate_all_loaded_fixtures</strong>(object, load_instances = true)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L589-L593'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='589' data-end='593'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 589</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instantiate_all_loaded_fixtures'>instantiate_all_loaded_fixtures</span>(<span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='id identifier rubyid_load_instances'>load_instances</span> <span class='op'>=</span> <span class='kw'>true</span>)
  <span class='id identifier rubyid_all_loaded_fixtures'><a href="#all_loaded_fixtures-class_method" title="ActiveRecord::FixtureSet.all_loaded_fixtures (method)">all_loaded_fixtures</a></span>.<span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fixture_set'>fixture_set</span><span class='op'>|</span>
    <span class='id identifier rubyid_instantiate_fixtures'><a href="#instantiate_fixtures-class_method" title="ActiveRecord::FixtureSet.instantiate_fixtures (method)">instantiate_fixtures</a></span>(<span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_set'>fixture_set</span><span class='comma'>,</span> <span class='id identifier rubyid_load_instances'>load_instances</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instantiate_fixtures-class_method">
  <h3 class='signature '>
    .<strong>instantiate_fixtures</strong>(object, fixture_set, load_instances = true)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L580-L587'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='580' data-end='587'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 580</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instantiate_fixtures'>instantiate_fixtures</span>(<span class='id identifier rubyid_object'>object</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_set'>fixture_set</span><span class='comma'>,</span> <span class='id identifier rubyid_load_instances'>load_instances</span> <span class='op'>=</span> <span class='kw'>true</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_load_instances'>load_instances</span>
  <span class='id identifier rubyid_fixture_set'>fixture_set</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="ActiveRecord::FixtureSet#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fixture_name'>fixture_name</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture'>fixture</span><span class='op'>|</span>
    <span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fixture_name'>fixture_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_fixture'>fixture</span>.<span class='id identifier rubyid_find'>find</span>
  <span class='kw'>rescue</span> <span class='const'><a href="FixtureClassNotFound.html" title="ActiveRecord::FixtureClassNotFound (class)">FixtureClassNotFound</a></span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_and_insert-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>read_and_insert</strong>(fixtures_directories, fixture_files, class_names, connection_pool)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L646-L663'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='646' data-end='663'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 646</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_and_insert'>read_and_insert</span>(<span class='id identifier rubyid_fixtures_directories'>fixtures_directories</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_files'>fixture_files</span><span class='comma'>,</span> <span class='id identifier rubyid_class_names'>class_names</span><span class='comma'>,</span> <span class='id identifier rubyid_connection_pool'>connection_pool</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_fixtures_map'>fixtures_map</span> <span class='op'>=</span> {}
  <span class='id identifier rubyid_directory_glob'>directory_glob</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fixtures_directories'>fixtures_directories</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_fixture_sets'>fixture_sets</span> <span class='op'>=</span> <span class='id identifier rubyid_fixture_files'>fixture_files</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='id identifier rubyid_class_names'>class_names</span>[<span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span>]
    <span class='id identifier rubyid_fixtures_map'>fixtures_map</span>[<span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span>] <span class='op'>=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::FixtureSet.new (method)">new</a></span>( <span class='comment'># ActiveRecord::FixtureSet.new
</span>      <span class='kw'>nil</span><span class='comma'>,</span>
      <span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span><span class='comma'>,</span>
      <span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span>
      <span class='op'>::</span><span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_directory_glob'>directory_glob</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_set_name'>fixture_set_name</span>)
    )
  <span class='kw'>end</span>
  <span class='id identifier rubyid_update_all_loaded_fixtures'><a href="#update_all_loaded_fixtures-class_method" title="ActiveRecord::FixtureSet.update_all_loaded_fixtures (method)">update_all_loaded_fixtures</a></span>(<span class='id identifier rubyid_fixtures_map'>fixtures_map</span>)

  <span class='id identifier rubyid_insert'><a href="#insert-class_method" title="ActiveRecord::FixtureSet.insert (method)">insert</a></span>(<span class='id identifier rubyid_fixture_sets'>fixture_sets</span><span class='comma'>,</span> <span class='id identifier rubyid_connection_pool'>connection_pool</span>)

  <span class='id identifier rubyid_fixtures_map'>fixtures_map</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset_cache-class_method">
  <h3 class='signature '>
    .<strong>reset_cache</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L556-L558'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='556' data-end='558'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 556</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_cache'>reset_cache</span>
  <span class='cvar'>@@all_cached_fixtures</span>.<span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="update_all_loaded_fixtures-class_method">
  <h3 class='signature priv  nodoc'>
    .<strong>update_all_loaded_fixtures</strong>(fixtures_map)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L706-L708'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='706' data-end='708'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 706</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_update_all_loaded_fixtures'>update_all_loaded_fixtures</span>(<span class='id identifier rubyid_fixtures_map'>fixtures_map</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_all_loaded_fixtures'><a href="#all_loaded_fixtures-class_method" title="ActiveRecord::FixtureSet.all_loaded_fixtures (method)">all_loaded_fixtures</a></span>.<span class='id identifier rubyid_update'>update</span>(<span class='id identifier rubyid_fixtures_map'>fixtures_map</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="all_loaded_fixtures-instance_method">
  <h3 class='signature rw first'>
    #<strong>all_loaded_fixtures</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L541-L541'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='541' data-end='541'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 541</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_all_loaded_fixtures'>all_loaded_fixtures</span><span class='comma'>,</span> <span class='label'>default:</span> {}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="config-instance_method">
  <h3 class='signature ro'>
    #<strong>config</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L711-L711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='711' data-end='711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 711</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'>config</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fixtures-instance_method">
  <h3 class='signature ro'>
    #<strong>fixtures</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L711-L711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='711' data-end='711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 711</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures'>fixtures</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ignored_fixtures-instance_method">
  <h3 class='signature rw'>
    #<strong>ignored_fixtures</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L711-L711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='711' data-end='711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 711</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ignored_fixtures'>ignored_fixtures</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ignored_fixtures=-instance_method">
  <h3 class='signature rw priv'>
    #<strong>ignored_fixtures=</strong>(base)   <span class="extras">(<span class='rw'>rw</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L762-L775'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='762' data-end='775'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 762</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ignored_fixtures='>ignored_fixtures=</span>(<span class='id identifier rubyid_base'>base</span>)
  <span class='ivar'>@ignored_fixtures</span> <span class='op'>=</span>
      <span class='kw'>case</span> <span class='id identifier rubyid_base'>base</span>
      <span class='kw'>when</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>
        <span class='id identifier rubyid_base'>base</span>
      <span class='kw'>when</span> <span class='const'><a href="../String.html" title="String (class)">String</a></span>
        [<span class='id identifier rubyid_base'>base</span>]
      <span class='kw'>else</span>
        []
      <span class='kw'>end</span>

  <span class='ivar'>@ignored_fixtures</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DEFAULTS</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='ivar'>@ignored_fixtures</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DEFAULTS</span><span class='tstring_end'>&quot;</span></span>)
  <span class='ivar'>@ignored_fixtures</span>.<span class='id identifier rubyid_compact'>compact</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="model_class-instance_method">
  <h3 class='signature rw'>
    #<strong>model_class</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L711-L711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='711' data-end='711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 711</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_model_class'>model_class</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="model_class=-instance_method">
  <h3 class='signature rw priv'>
    #<strong>model_class=</strong>(class_name)   <span class="extras">(<span class='rw'>rw</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L754-L760'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='754' data-end='760'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 754</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_model_class='>model_class=</span>(<span class='id identifier rubyid_class_name'>class_name</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_class_name'>class_name</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../Class.html" title="Class (class)">Class</a></span>) <span class='comment'># TODO: Should be an AR::Base type class, or any?
</span>    <span class='ivar'>@model_class</span> <span class='op'>=</span> <span class='id identifier rubyid_class_name'>class_name</span>
  <span class='kw'>else</span>
    <span class='ivar'>@model_class</span> <span class='op'>=</span> <span class='id identifier rubyid_class_name'>class_name</span>.<span class='id identifier rubyid_safe_constantize'>safe_constantize</span> <span class='kw'>if</span> <span class='id identifier rubyid_class_name'>class_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="name-instance_method">
  <h3 class='signature ro'>
    #<strong>name</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L711-L711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='711' data-end='711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 711</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="table_name-instance_method">
  <h3 class='signature ro'>
    #<strong>table_name</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L711-L711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='711' data-end='711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 711</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_table_name'>table_name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::FixtureSet#name (method)">name</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'><a href="#config-instance_method" title="ActiveRecord::FixtureSet#config (method)">config</a></span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="[]-instance_method">
  <h3 class='signature  first'>
    #<strong>[]</strong>(x)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L724-L726'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='724' data-end='726'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 724</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>[]</span>(<span class='id identifier rubyid_x'>x</span>)
  <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span>[<span class='id identifier rubyid_x'>x</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="[]=-instance_method">
  <h3 class='signature '>
    #<strong>[]=</strong>(k, v)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L728-L730'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='728' data-end='730'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 728</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>[]=</span>(<span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>)
  <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_fixture_model_class-instance_method">
  <h3 class='signature priv'>
    #<strong>default_fixture_model_class</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L800-L803'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='800' data-end='803'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 800</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_fixture_model_class'>default_fixture_model_class</span>
  <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>FixtureSet</span>.<span class='id identifier rubyid_default_fixture_model_name'><a href="#default_fixture_model_name-class_method" title="ActiveRecord::FixtureSet.default_fixture_model_name (method)">default_fixture_model_name</a></span>(<span class='ivar'>@name</span><span class='comma'>,</span> <span class='ivar'>@config</span>).<span class='id identifier rubyid_safe_constantize'>safe_constantize</span>
  <span class='id identifier rubyid_klass'>klass</span> <span class='kw'>if</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_klass'>klass</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each-instance_method">
  <h3 class='signature '>
    #<strong>each</strong>(&amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L732-L734'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='732' data-end='734'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 732</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span>.<span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_fixture_files-instance_method">
  <h3 class='signature priv'>
    #<strong>read_fixture_files</strong>(path)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Loads the fixtures from the YAML file at <code>path</code>. If the file sets the <a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">#model_class</a> and current instance value is not set, it uses the file value.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L781-L798'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='781' data-end='798'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 781</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_fixture_files'>read_fixture_files</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='id identifier rubyid_yaml_files'>yaml_files</span> <span class='op'>=</span> <span class='const'>Dir</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>{.yml,/{**,*}/*.yml}</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_select'>select</span> { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='op'>::</span><span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_file?'>file?</span>(<span class='id identifier rubyid_f'>f</span>)
  }

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No fixture files found for </span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_yaml_files'>yaml_files</span>.<span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_yaml_files'>yaml_files</span>.<span class='id identifier rubyid_each_with_object'>each_with_object</span>({}) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span><span class='op'>|</span>
    <span class='const'>FixtureSet</span><span class='op'>::</span><span class='const'><a href="FixtureSet/File.html" title="ActiveRecord::FixtureSet::File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="FixtureSet/File.html#open-class_method" title="ActiveRecord::FixtureSet::File.open (method)">open</a></span>(<span class='id identifier rubyid_file'>file</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fh'>fh</span><span class='op'>|</span>
      <span class='kw'>self</span>.<span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span> <span class='op'>||=</span> <span class='id identifier rubyid_fh'>fh</span>.<span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_fh'>fh</span>.<span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span>
      <span class='kw'>self</span>.<span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span> <span class='op'>||=</span> <span class='id identifier rubyid_default_fixture_model_class'><a href="#default_fixture_model_class-instance_method" title="ActiveRecord::FixtureSet#default_fixture_model_class (method)">default_fixture_model_class</a></span>
      <span class='kw'>self</span>.<span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span> <span class='op'>||=</span> <span class='id identifier rubyid_fh'>fh</span>.<span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span>
      <span class='id identifier rubyid_fh'>fh</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="ActiveRecord::FixtureSet#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fixture_name'>fixture_name</span><span class='comma'>,</span> <span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span>[<span class='id identifier rubyid_fixture_name'>fixture_name</span>] <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Fixture.html" title="ActiveRecord::Fixture (class)">Fixture</a></span>.<span class='id identifier rubyid_new'><a href="Fixture.html#new-class_method" title="ActiveRecord::Fixture.new (method)">new</a></span>(<span class='id identifier rubyid_row'>row</span><span class='comma'>,</span> <span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="size-instance_method">
  <h3 class='signature '>
    #<strong>size</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L736-L738'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='736' data-end='738'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 736</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_size'>size</span>
  <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span>.<span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="table_rows-instance_method">
  <h3 class='signature '>
    #<strong>table_rows</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash of rows to be inserted. The key is the table, the value is a list of rows to insert to that table.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/fixtures.rb#L742-L751'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='742' data-end='751'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 742</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_table_rows'>table_rows</span>
  <span class='comment'># allow specifying fixtures to be ignored by setting `ignore` in `_fixture` section
</span>  <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span>.<span class='id identifier rubyid_except!'>except!</span>(<span class='op'>*</span><span class='id identifier rubyid_ignored_fixtures'><a href="#ignored_fixtures-instance_method" title="ActiveRecord::FixtureSet#ignored_fixtures (method)">ignored_fixtures</a></span>)

  <span class='const'><a href="FixtureSet/TableRows.html" title="ActiveRecord::FixtureSet::TableRows (class)">TableRows</a></span>.<span class='id identifier rubyid_new'><a href="FixtureSet/TableRows.html#new-class_method" title="ActiveRecord::FixtureSet::TableRows.new (method)">new</a></span>(
    <span class='id identifier rubyid_table_name'><a href="#table_name-instance_method" title="ActiveRecord::FixtureSet#table_name (method)">table_name</a></span><span class='comma'>,</span>
    <span class='label'>model_class:</span> <span class='id identifier rubyid_model_class'><a href="#model_class-instance_method" title="ActiveRecord::FixtureSet#model_class (method)">model_class</a></span><span class='comma'>,</span>
    <span class='label'>fixtures:</span> <span class='id identifier rubyid_fixtures'><a href="#fixtures-instance_method" title="ActiveRecord::FixtureSet#fixtures (method)">fixtures</a></span><span class='comma'>,</span>
  ).<span class='id identifier rubyid_to_hash'><a href="FixtureSet/TableRows.html#to_hash-instance_method" title="ActiveRecord::FixtureSet::TableRows#to_hash (method)">to_hash</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>