<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveRecord::Associations::Preloader &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::Associations::Preloader",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails main</a> &raquo; 
      <a href='../../_index.html#alpha_P'>Index (P)</a> &raquo; 
        <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
        <a class='nodoc' href="../Associations.html" title="ActiveRecord::Associations (module)">Associations</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>Preloader&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActiveRecord::Associations::Preloader</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This class is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="Preloader/Association.html" title="ActiveRecord::Associations::Preloader::Association (class)"><code>Association</code></a>,
        <a class='nodoc' href="Preloader/Batch.html" title="ActiveRecord::Associations::Preloader::Batch (class)"><code>Batch</code></a>,
        <a class='nodoc' href="Preloader/Branch.html" title="ActiveRecord::Associations::Preloader::Branch (class)"><code>Branch</code></a>,
        <a class='nodoc' href="Preloader/ThroughAssociation.html" title="ActiveRecord::Associations::Preloader::ThroughAssociation (class)"><code>ThroughAssociation</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="../../ActiveSupport/Autoload.html" title="ActiveSupport::Autoload (module)"><code>::ActiveSupport::Autoload</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L46'>activerecord/lib/active_record/associations/preloader.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader/association.rb#L7'>activerecord/lib/active_record/associations/preloader/association.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader/batch.rb#L5'>activerecord/lib/active_record/associations/preloader/batch.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader/branch.rb#L5'>activerecord/lib/active_record/associations/preloader/branch.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader/through_association.rb#L5'>activerecord/lib/active_record/associations/preloader/through_association.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-Active+Record+Preloader">Active Record Preloader</h3>

<p>Implements the details of eager loading of Active Record associations.</p>

<p>Suppose that you have the following two Active Record models:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Author</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='comment'># columns: name, age
</span>  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbeg'>:</span><span class='id identifier rubyid_books'>books</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Book</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='comment'># columns: title, sales, author_id
</span><span class='kw'>end</span></code></pre>

<p>When you load an author with all associated books Active Record will make multiple queries like this:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Author</span>.<span class='id identifier rubyid_includes'>includes</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_books'>books</span>).<span class='id identifier rubyid_where'>where</span>(<span class='label'>name:</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bell hooks</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Homer</span><span class='tstring_end'>&#39;</span></span>]).<span class='id identifier rubyid_to_a'>to_a</span>

<span class='comment'># SELECT {authors}.* FROM {authors} WHERE {name} IN (&#39;bell hooks&#39;, &#39;Homer&#39;)
</span><span class='comment'># SELECT {books}.* FROM {books} WHERE {author_id} IN (2, 5)</span></code></pre>

<p>Active Record saves the ids of the records from the first query to use in the second. Depending on the number of associations involved there can be arbitrarily many SQL queries made.</p>

<p>However, if there is a WHERE clause that spans across tables Active Record will fall back to a slightly more resource-intensive single query:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Author</span>.<span class='id identifier rubyid_includes'>includes</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_books'>books</span>).<span class='id identifier rubyid_where'>where</span>(<span class='label'>books:</span> {<span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Illiad</span><span class='tstring_end'>&#39;</span></span>}).<span class='id identifier rubyid_to_a'>to_a</span>
<span class='comment'># SELECT {authors}.`id` AS t0_r0, {authors}.`name` AS t0_r1, {authors}.`age` AS t0_r2,
</span><span class='comment'>#        {books}.`id`   AS t1_r0, {books}.`title`  AS t1_r1, {books}.`sales` AS t1_r2
</span><span class='comment'># FROM {authors}
</span><span class='comment'># LEFT OUTER JOIN {books} ON {authors}.`id` =  {books}.`author_id`
</span><span class='comment'># WHERE {books}.`title` = &#39;Illiad&#39;</span></code></pre>

<p>This could result in many rows that contain redundant data and it performs poorly at scale and is therefore only used when necessary.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(records:, associations:, scope: nil, available_records: [], associate_by_default: true)  &#x21d2; Preloader </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Eager loads the named associations for the given Active Record record(s).</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="../../ActiveSupport/Autoload.html" title="ActiveSupport::Autoload (module)"><code>::ActiveSupport::Autoload</code></a> - Extended</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../../ActiveSupport/Autoload.html#autoload-instance_method" title="ActiveSupport::Autoload#autoload (method)">autoload</a>,
        <a class='i_m ' href="../../ActiveSupport/Autoload.html#autoload_at-instance_method" title="ActiveSupport::Autoload#autoload_at (method)">autoload_at</a>,
        <a class='i_m ' href="../../ActiveSupport/Autoload.html#autoload_under-instance_method" title="ActiveSupport::Autoload#autoload_under (method)">autoload_under</a>,
        <a class='i_m ' href="../../ActiveSupport/Autoload.html#eager_autoload-instance_method" title="ActiveSupport::Autoload#eager_autoload (method)">eager_autoload</a>,
        <a class='i_m ' href="../../ActiveSupport/Autoload.html#eager_load!-instance_method" title="ActiveSupport::Autoload#eager_load! (method)">eager_load!</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#associate_by_default-instance_method" title="#associate_by_default (instance method)">#<strong>associate_by_default</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#associations-instance_method" title="#associations (instance method)">#<strong>associations</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#records-instance_method" title="#records (instance method)">#<strong>records</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#scope-instance_method" title="#scope (instance method)">#<strong>scope</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#branches-instance_method" title="#branches (instance method)">#<strong>branches</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#loaders-instance_method" title="#loaders (instance method)">#<strong>loaders</strong>  </a>
    </span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>(records:, associations:, scope: nil, available_records: [], associate_by_default: true)  &#x21d2; <code>Preloader</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Eager loads the named associations for the given Active Record record(s).</p>

<p>In this description, ‘association name’ shall refer to the name passed to an association creation method. For example, a model that specifies <code>belongs_to :author</code>, <code>has_many :buyers</code> has association names <code>:author</code> and <code>:buyers</code>.</p>

<h4 id="label-Parameters">Parameters</h4>

<p><a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">#records</a> is an array of <a href="../Base.html" title="ActiveRecord::Base (class)"><code>::ActiveRecord::Base</code></a>. This array needs not be flat, i.e. <a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">#records</a> itself may also contain arrays of records. In any case, <code>preload_associations</code> will preload all associations records by flattening <a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">#records</a>.</p>

<p><a href="#associations-instance_method" title="ActiveRecord::Associations::Preloader#associations (method)">#associations</a> specifies one or more associations that you want to preload. It may be:</p>
<ul><li>
<p>a <a href="../../Symbol.html" title="Symbol (class)"><code>::Symbol</code></a> or a <a href="../../String.html" title="String (class)"><code>::String</code></a> which specifies a single association name. For example, specifying <code>:books</code> allows this method to preload all books for an Author.</p>
</li><li>
<p>an <a href="../../Array.html" title="Array (class)"><code>::Array</code></a> which specifies multiple association names. This array is processed recursively. For example, specifying <code>[:avatar, :books]</code> allows this method to preload an author’s avatar as well as all of their books.</p>
</li><li>
<p>a <a href="../../Hash.html" title="Hash (class)"><code>::Hash</code></a> which specifies multiple association names, as well as association names for the to-be-preloaded association objects. For example, specifying <code>{ author: :avatar }</code> will preload a book’s author, as well as that author’s avatar.</p>
</li></ul>

<p><code>:associations</code> has the same format as the arguments to <a href="../QueryMethods.html#includes-instance_method" title="ActiveRecord::QueryMethods#includes (method)">QueryMethods#includes</a>. So <a href="#associations-instance_method" title="ActiveRecord::Associations::Preloader#associations (method)">#associations</a> could look like this:</p>

<pre class="code ruby"><code class="ruby"><span class='symbeg'>:</span><span class='id identifier rubyid_books'>books</span>
[ <span class='symbeg'>:</span><span class='id identifier rubyid_books'>books</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_author'>author</span> ]
{ <span class='label'>author:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_avatar'>avatar</span> }
[ <span class='symbeg'>:</span><span class='id identifier rubyid_books'>books</span><span class='comma'>,</span> { <span class='label'>author:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_avatar'>avatar</span> } ]</code></pre>

<p><code>available_records</code> is an array of <a href="../Base.html" title="ActiveRecord::Base (class)"><code>::ActiveRecord::Base</code></a>. The Preloader will try to use the objects in this array to preload the requested associations before querying the database. This can save database queries by reusing in-memory objects. The optimization is only applied to single associations (i.e. <code>:belongs_to</code>, <code>:has_one</code>) with no scopes.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L99-L114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='99' data-end='114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 99</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='label'>records:</span><span class='comma'>,</span> <span class='label'>associations:</span><span class='comma'>,</span> <span class='label'>scope:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>available_records:</span> []<span class='comma'>,</span> <span class='label'>associate_by_default:</span> <span class='kw'>true</span>)
  <span class='ivar'>@records</span> <span class='op'>=</span> <span class='id identifier rubyid_records'><a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">records</a></span>
  <span class='ivar'>@associations</span> <span class='op'>=</span> <span class='id identifier rubyid_associations'><a href="#associations-instance_method" title="ActiveRecord::Associations::Preloader#associations (method)">associations</a></span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='id identifier rubyid_scope'><a href="#scope-instance_method" title="ActiveRecord::Associations::Preloader#scope (method)">scope</a></span>
  <span class='ivar'>@available_records</span> <span class='op'>=</span> <span class='id identifier rubyid_available_records'>available_records</span> <span class='op'>||</span> []
  <span class='ivar'>@associate_by_default</span> <span class='op'>=</span> <span class='id identifier rubyid_associate_by_default'><a href="#associate_by_default-instance_method" title="ActiveRecord::Associations::Preloader#associate_by_default (method)">associate_by_default</a></span>

  <span class='ivar'>@tree</span> <span class='op'>=</span> <span class='const'><a href="Preloader/Branch.html" title="ActiveRecord::Associations::Preloader::Branch (class)">Branch</a></span>.<span class='id identifier rubyid_new'><a href="Preloader/Branch.html#new-class_method" title="ActiveRecord::Associations::Preloader::Branch.new (method)">new</a></span>(
    <span class='label'>parent:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>association:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>children:</span> <span class='ivar'>@associations</span><span class='comma'>,</span>
    <span class='label'>associate_by_default:</span> <span class='ivar'>@associate_by_default</span><span class='comma'>,</span>
    <span class='label'>scope:</span> <span class='ivar'>@scope</span>
  )
  <span class='ivar'>@tree</span>.<span class='id identifier rubyid_preloaded_records'>preloaded_records</span> <span class='op'>=</span> <span class='ivar'>@records</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="associate_by_default-instance_method">
  <h3 class='signature ro  nodoc first'>
    #<strong>associate_by_default</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L56-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_records'><a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">records</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associations'><a href="#associations-instance_method" title="ActiveRecord::Associations::Preloader#associations (method)">associations</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_scope'><a href="#scope-instance_method" title="ActiveRecord::Associations::Preloader#scope (method)">scope</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associate_by_default'>associate_by_default</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="associations-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>associations</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L56-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_records'><a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">records</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associations'>associations</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_scope'><a href="#scope-instance_method" title="ActiveRecord::Associations::Preloader#scope (method)">scope</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associate_by_default'><a href="#associate_by_default-instance_method" title="ActiveRecord::Associations::Preloader#associate_by_default (method)">associate_by_default</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="empty?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L116-L118'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='116' data-end='118'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 116</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_associations'><a href="#associations-instance_method" title="ActiveRecord::Associations::Preloader#associations (method)">associations</a></span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_records'><a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">records</a></span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="records-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>records</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L56-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_records'>records</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associations'><a href="#associations-instance_method" title="ActiveRecord::Associations::Preloader#associations (method)">associations</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_scope'><a href="#scope-instance_method" title="ActiveRecord::Associations::Preloader#scope (method)">scope</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associate_by_default'><a href="#associate_by_default-instance_method" title="ActiveRecord::Associations::Preloader#associate_by_default (method)">associate_by_default</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scope-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>scope</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L56-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_records'><a href="#records-instance_method" title="ActiveRecord::Associations::Preloader#records (method)">records</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associations'><a href="#associations-instance_method" title="ActiveRecord::Associations::Preloader#associations (method)">associations</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_scope'>scope</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_associate_by_default'><a href="#associate_by_default-instance_method" title="ActiveRecord::Associations::Preloader#associate_by_default (method)">associate_by_default</a></span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="branches-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>branches</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L126-L128'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='126' data-end='128'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 126</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_branches'>branches</span>
  <span class='ivar'>@tree</span>.<span class='id identifier rubyid_children'>children</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="call-instance_method">
  <h3 class='signature nodoc'>
    #<strong>call</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L120-L124'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='120' data-end='124'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 120</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>
  <span class='const'><a href="Preloader/Batch.html" title="ActiveRecord::Associations::Preloader::Batch (class)">Batch</a></span>.<span class='id identifier rubyid_new'><a href="Preloader/Batch.html#new-class_method" title="ActiveRecord::Associations::Preloader::Batch.new (method)">new</a></span>([<span class='kw'>self</span>]<span class='comma'>,</span> <span class='label'>available_records:</span> <span class='ivar'>@available_records</span>).<span class='id identifier rubyid_call'><a href="Preloader/Batch.html#call-instance_method" title="ActiveRecord::Associations::Preloader::Batch#call (method)">call</a></span>

  <span class='id identifier rubyid_loaders'><a href="#loaders-instance_method" title="ActiveRecord::Associations::Preloader#loaders (method)">loaders</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="loaders-instance_method">
  <h3 class='signature nodoc'>
    #<strong>loaders</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/preloader.rb#L130-L132'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='130' data-end='132'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/associations/preloader.rb', line 130</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_loaders'>loaders</span>
  <span class='id identifier rubyid_branches'><a href="#branches-instance_method" title="ActiveRecord::Associations::Preloader#branches (method)">branches</a></span>.<span class='id identifier rubyid_flat_map'>flat_map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_loaders'>loaders</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>