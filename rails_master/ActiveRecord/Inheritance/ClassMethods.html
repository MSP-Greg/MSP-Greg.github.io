<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveRecord::Inheritance::ClassMethods &mdash; Rails main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::Inheritance::ClassMethods",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails main</a> &raquo; 
      <a href='../../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
        <a href="../Inheritance.html" title="ActiveRecord::Inheritance (module)">Inheritance</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ClassMethods&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveRecord::Inheritance::ClassMethods</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L52'>activerecord/lib/active_record/inheritance.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#abstract_class-instance_method" title="#abstract_class (instance method)">#<strong>abstract_class</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set this to <code>true</code> if this is an abstract class (see <a href="#abstract_class%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class? (method)">#abstract_class?</a>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#abstract_class%3F-instance_method" title="#abstract_class? (instance method)">#<strong>abstract_class?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether this class is an abstract class or not.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#base_class-instance_method" title="#base_class (instance method)">#<strong>base_class</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the first class in the inheritance hierarchy that descends from either an abstract class or from <a href="../Base.html" title="ActiveRecord::Base (class)"><code>::ActiveRecord::Base</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#base_class%3F-instance_method" title="#base_class? (instance method)">#<strong>base_class?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether the class is a base class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#descends_from_active_record%3F-instance_method" title="#descends_from_active_record? (instance method)">#<strong>descends_from_active_record?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if this does not need STI type condition.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#finder_needs_type_condition%3F-instance_method" title="#finder_needs_type_condition? (instance method)">#<strong>finder_needs_type_condition?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-instance_method" title="#new (instance method)">#<strong>new</strong>(attributes = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Determines if one of the attributes passed in is the inheritance column, and if the inheritance column is attr accessible, it initializes an instance of the given subclass instead of the base class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#polymorphic_class_for-instance_method" title="#polymorphic_class_for (instance method)">#<strong>polymorphic_class_for</strong>(name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the class for the provided <code>name</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#polymorphic_name-instance_method" title="#polymorphic_name (instance method)">#<strong>polymorphic_name</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value to be stored in the polymorphic type column for Polymorphic Associations.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#primary_abstract_class-instance_method" title="#primary_abstract_class (instance method)">#<strong>primary_abstract_class</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the application record class for Active Record.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sti_class_for-instance_method" title="#sti_class_for (instance method)">#<strong>sti_class_for</strong>(type_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the class for the provided <code>type_name</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sti_name-instance_method" title="#sti_name (instance method)">#<strong>sti_name</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value to be stored in the inheritance column for STI.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#compute_type-instance_method" title="#compute_type (instance method)">#<strong>compute_type</strong>(type_name)  </a>
    </span>
    <span class='note title protected'>protected</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the class type of the record using the current module as a prefix.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#discriminate_class_for_record-instance_method" title="#discriminate_class_for_record (instance method)">#<strong>discriminate_class_for_record</strong>(record)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Called by <code>instantiate</code> to decide which class to use for a new record instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#find_sti_class-instance_method" title="#find_sti_class (instance method)">#<strong>find_sti_class</strong>(type_name)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#inherited-instance_method" title="#inherited (instance method)">#<strong>inherited</strong>(subclass)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#subclass_from_attributes-instance_method" title="#subclass_from_attributes (instance method)">#<strong>subclass_from_attributes</strong>(attrs)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Detect the subclass from the inheritance column of attrs.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#type_condition-instance_method" title="#type_condition (instance method)">#<strong>type_condition</strong>(table = arel_table)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#using_single_table_inheritance%3F-instance_method" title="#using_single_table_inheritance? (instance method)">#<strong>using_single_table_inheritance?</strong>(record)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#dup-instance_method" title="#dup (instance method)">#<strong>dup</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#initialize_clone-instance_method" title="#initialize_clone (instance method)">#<strong>initialize_clone</strong>(other)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature prot nodoc'>
      <a href="#set_base_class-instance_method" title="#set_base_class (instance method)">#<strong>set_base_class</strong>  </a>
    </span>
    <span class='note title protected'>protected</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="abstract_class-instance_method">
  <h3 class='signature rw first'>
    #<strong>abstract_class</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set this to <code>true</code> if this is an abstract class (see <a href="#abstract_class%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class? (method)">#abstract_class?</a>). If you are using inheritance with Active Record and don’t want a class to be considered as part of the STI hierarchy, you must set this to true. <code>ApplicationRecord</code>, for example, is generated as an abstract class.</p>

<p>Consider the following default behavior:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Shape</span> <span class='op'>=</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>)
<span class='const'>Polygon</span> <span class='op'>=</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='const'>Shape</span>)
<span class='const'>Square</span> <span class='op'>=</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='const'>Polygon</span>)

<span class='const'>Shape</span>.<span class='id identifier rubyid_table_name'>table_name</span>   <span class='comment'># =&gt; &quot;shapes&quot;
</span><span class='const'>Polygon</span>.<span class='id identifier rubyid_table_name'>table_name</span> <span class='comment'># =&gt; &quot;shapes&quot;
</span><span class='const'>Square</span>.<span class='id identifier rubyid_table_name'>table_name</span>  <span class='comment'># =&gt; &quot;shapes&quot;
</span><span class='const'>Shape</span>.<span class='id identifier rubyid_create!'>create!</span>      <span class='comment'># =&gt; #&lt;Shape id: 1, type: nil&gt;
</span><span class='const'>Polygon</span>.<span class='id identifier rubyid_create!'>create!</span>    <span class='comment'># =&gt; #&lt;Polygon id: 2, type: &quot;Polygon&quot;&gt;
</span><span class='const'>Square</span>.<span class='id identifier rubyid_create!'>create!</span>     <span class='comment'># =&gt; #&lt;Square id: 3, type: &quot;Square&quot;&gt;</span></code></pre>

<p>However, when using <code>abstract_class</code>, <code>Shape</code> is omitted from the hierarchy:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Shape</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_abstract_class'>abstract_class</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
<span class='const'>Polygon</span> <span class='op'>=</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='const'>Shape</span>)
<span class='const'>Square</span> <span class='op'>=</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='const'>Polygon</span>)

<span class='const'>Shape</span>.<span class='id identifier rubyid_table_name'>table_name</span>   <span class='comment'># =&gt; nil
</span><span class='const'>Polygon</span>.<span class='id identifier rubyid_table_name'>table_name</span> <span class='comment'># =&gt; &quot;polygons&quot;
</span><span class='const'>Square</span>.<span class='id identifier rubyid_table_name'>table_name</span>  <span class='comment'># =&gt; &quot;polygons&quot;
</span><span class='const'>Shape</span>.<span class='id identifier rubyid_create!'>create!</span>      <span class='comment'># =&gt; NotImplementedError: Shape is an abstract class and cannot be instantiated.
</span><span class='const'>Polygon</span>.<span class='id identifier rubyid_create!'>create!</span>    <span class='comment'># =&gt; #&lt;Polygon id: 1, type: nil&gt;
</span><span class='const'>Square</span>.<span class='id identifier rubyid_create!'>create!</span>     <span class='comment'># =&gt; #&lt;Square id: 2, type: &quot;Square&quot;&gt;</span></code></pre>

<p>Note that in the above example, to disallow the creation of a plain <code>Polygon</code>, you should use <code>validates :type, presence: true</code>, instead of setting it as an abstract class. This way, <code>Polygon</code> will stay in the hierarchy, and Active Record will continue to correctly derive the table name.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L164-L164'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='164' data-end='164'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 164</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_abstract_class'>abstract_class</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="abstract_class?-instance_method">
  <h3 class='signature rw'>
    #<strong>abstract_class?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether this class is an abstract class or not.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L167-L169'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='167' data-end='169'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 167</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_abstract_class?'>abstract_class?</span>
  <span class='ivar'>@abstract_class</span> <span class='op'>==</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="base_class-instance_method">
  <h3 class='signature ro'>
    #<strong>base_class</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the first class in the inheritance hierarchy that descends from either an abstract class or from <a href="../Base.html" title="ActiveRecord::Base (class)"><code>::ActiveRecord::Base</code></a>.</p>

<p>Consider the following behavior:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationRecord</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_abstract_class'><a href="#abstract_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class (method)">abstract_class</a></span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
<span class='kw'>class</span> <span class='const'>Shape</span> <span class='op'>&lt;</span> <span class='const'>ApplicationRecord</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_abstract_class'><a href="#abstract_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class (method)">abstract_class</a></span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
<span class='const'>Polygon</span> <span class='op'>=</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='const'>Shape</span>)
<span class='const'>Square</span> <span class='op'>=</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='const'>Polygon</span>)

<span class='const'>ApplicationRecord</span>.<span class='id identifier rubyid_base_class'>base_class</span> <span class='comment'># =&gt; ApplicationRecord
</span><span class='const'>Shape</span>.<span class='id identifier rubyid_base_class'>base_class</span> <span class='comment'># =&gt; Shape
</span><span class='const'>Polygon</span>.<span class='id identifier rubyid_base_class'>base_class</span> <span class='comment'># =&gt; Polygon
</span><span class='const'>Square</span>.<span class='id identifier rubyid_base_class'>base_class</span> <span class='comment'># =&gt; Polygon</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L115-L115'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='115' data-end='115'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 115</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_base_class'>base_class</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="base_class?-instance_method">
  <h3 class='signature ro'>
    #<strong>base_class?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether the class is a base class. See <a href="#base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#base_class (method)">#base_class</a> for more information.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L119-L121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='119' data-end='121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 119</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_base_class?'>base_class?</span>
  <span class='id identifier rubyid_base_class'><a href="#base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#base_class (method)">base_class</a></span> <span class='op'>==</span> <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="descends_from_active_record?-instance_method">
  <h3 class='signature ro'>
    #<strong>descends_from_active_record?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if this does not need STI type condition. Returns <code>false</code> if STI type condition needs to be applied.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L82-L90'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='82' data-end='90'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 82</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_descends_from_active_record?'>descends_from_active_record?</span>
  <span class='kw'>if</span> <span class='kw'>self</span> <span class='op'>==</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
    <span class='kw'>false</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_abstract_class?'><a href="#abstract_class%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class? (method)">abstract_class?</a></span>
    <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_descends_from_active_record?'>descends_from_active_record?</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_superclass'>superclass</span> <span class='op'>==</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_columns_hash'>columns_hash</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="finder_needs_type_condition?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>finder_needs_type_condition?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L92-L95'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='92' data-end='95'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 92</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_finder_needs_type_condition?'>finder_needs_type_condition?</span> <span class='comment'># :nodoc:
</span>  <span class='comment'># This is like this because benchmarking justifies the strange :false stuff
</span>  <span class='symbeg'>:</span><span class='kw'>true</span> <span class='op'>==</span> (<span class='ivar'>@finder_needs_type_condition</span> <span class='op'>||=</span> <span class='id identifier rubyid_descends_from_active_record?'><a href="#descends_from_active_record%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#descends_from_active_record? (method)">descends_from_active_record?</a></span> <span class='op'>?</span> <span class='symbeg'>:</span><span class='kw'>false</span> <span class='op'>:</span> <span class='symbeg'>:</span><span class='kw'>true</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="compute_type-instance_method">
  <h3 class='signature prot first'>
    #<strong>compute_type</strong>(type_name)   <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the class type of the record using the current module as a prefix. So descendants of <code>MyApp::Business::Account</code> would appear as <code>MyApp::Business::AccountSubclass</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L242-L268'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='242' data-end='268'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 242</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_compute_type'>compute_type</span>(<span class='id identifier rubyid_type_name'>type_name</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_type_name'>type_name</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>::</span><span class='tstring_end'>&quot;</span></span>)
    <span class='comment'># If the type is prefixed with a scope operator then we assume that
</span>    <span class='comment'># the type_name is an absolute reference.
</span>    <span class='id identifier rubyid_type_name'>type_name</span>.<span class='id identifier rubyid_constantize'>constantize</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_type_candidate'>type_candidate</span> <span class='op'>=</span> <span class='ivar'>@_type_candidates_cache</span>[<span class='id identifier rubyid_type_name'>type_name</span>]
    <span class='kw'>if</span> <span class='id identifier rubyid_type_candidate'>type_candidate</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_type_constant'>type_constant</span> <span class='op'>=</span> <span class='id identifier rubyid_type_candidate'>type_candidate</span>.<span class='id identifier rubyid_safe_constantize'>safe_constantize</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_type_constant'>type_constant</span>
    <span class='kw'>end</span>

    <span class='comment'># Build a list of candidates to search for
</span>    <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> []
    <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>::|$</span><span class='regexp_end'>/</span></span>) { <span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_unshift'>unshift</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='backref'>$`</span><span class='embexpr_end'>}</span><span class='tstring_content'>::</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type_name'>type_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> }
    <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_type_name'>type_name</span>

    <span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_candidate'>candidate</span><span class='op'>|</span>
      <span class='id identifier rubyid_constant'>constant</span> <span class='op'>=</span> <span class='id identifier rubyid_candidate'>candidate</span>.<span class='id identifier rubyid_safe_constantize'>safe_constantize</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_candidate'>candidate</span> <span class='op'>==</span> <span class='id identifier rubyid_constant'>constant</span>.<span class='id identifier rubyid_to_s'>to_s</span>
        <span class='ivar'>@_type_candidates_cache</span>[<span class='id identifier rubyid_type_name'>type_name</span>] <span class='op'>=</span> <span class='id identifier rubyid_candidate'>candidate</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_constant'>constant</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../NameError.html" title="NameError (class)">NameError</a></span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uninitialized constant </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_first'>first</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="discriminate_class_for_record-instance_method">
  <h3 class='signature priv'>
    #<strong>discriminate_class_for_record</strong>(record)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Called by <code>instantiate</code> to decide which class to use for a new record instance. For single-table inheritance, we check the record for a <code>type</code> column and return the corresponding class.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L299-L305'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='299' data-end='305'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 299</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_discriminate_class_for_record'>discriminate_class_for_record</span>(<span class='id identifier rubyid_record'>record</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_using_single_table_inheritance?'><a href="#using_single_table_inheritance%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#using_single_table_inheritance? (method)">using_single_table_inheritance?</a></span>(<span class='id identifier rubyid_record'>record</span>)
    <span class='id identifier rubyid_find_sti_class'><a href="#find_sti_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#find_sti_class (method)">find_sti_class</a></span>(<span class='id identifier rubyid_record'>record</span>[<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>])
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dup-instance_method">
  <h3 class='signature nodoc'>
    #<strong>dup</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L226-L232'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='226' data-end='232'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 226</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dup'>dup</span> <span class='comment'># :nodoc:
</span>  <span class='comment'># `initialize_dup` / `initialize_copy` don&#39;t work when defined
</span>  <span class='comment'># in the `singleton_class`.
</span>  <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='kw'>super</span>
  <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_set_base_class'><a href="#set_base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#set_base_class (method)">set_base_class</a></span>
  <span class='id identifier rubyid_other'>other</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="find_sti_class-instance_method">
  <h3 class='signature priv'>
    #<strong>find_sti_class</strong>(type_name)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L311-L320'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='311' data-end='320'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 311</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_find_sti_class'>find_sti_class</span>(<span class='id identifier rubyid_type_name'>type_name</span>)
  <span class='id identifier rubyid_type_name'>type_name</span> <span class='op'>=</span> <span class='id identifier rubyid_base_class'><a href="#base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#base_class (method)">base_class</a></span>.<span class='id identifier rubyid_type_for_attribute'>type_for_attribute</span>(<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>).<span class='id identifier rubyid_cast'>cast</span>(<span class='id identifier rubyid_type_name'>type_name</span>)
  <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>=</span> <span class='id identifier rubyid_sti_class_for'><a href="#sti_class_for-instance_method" title="ActiveRecord::Inheritance::ClassMethods#sti_class_for (method)">sti_class_for</a></span>(<span class='id identifier rubyid_type_name'>type_name</span>)

  <span class='kw'>unless</span> <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>==</span> <span class='kw'>self</span> <span class='op'>||</span> <span class='id identifier rubyid_descendants'>descendants</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_subclass'>subclass</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../SubclassNotFound.html" title="ActiveRecord::SubclassNotFound (class)">SubclassNotFound</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid single-table inheritance type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a subclass of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_subclass'>subclass</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inherited-instance_method">
  <h3 class='signature priv'>
    #<strong>inherited</strong>(subclass)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L287-L294'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='287' data-end='294'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 287</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inherited'>inherited</span>(<span class='id identifier rubyid_subclass'>subclass</span>)
  <span class='kw'>super</span>
  <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_set_base_class'><a href="#set_base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#set_base_class (method)">set_base_class</a></span>
  <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span>(<span class='symbeg'>:</span><span class='ivar'>@_type_candidates_cache</span><span class='comma'>,</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Map</span>.<span class='id identifier rubyid_new'><a href="#new-instance_method" title="ActiveRecord::Inheritance::ClassMethods#new (method)">new</a></span>)
  <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span>
    <span class='ivar'>@finder_needs_type_condition</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_clone-instance_method">
  <h3 class='signature nodoc'>
    #<strong>initialize_clone</strong>(other)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L234-L237'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='234' data-end='237'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 234</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_clone'>initialize_clone</span>(<span class='id identifier rubyid_other'>other</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>super</span>
  <span class='id identifier rubyid_set_base_class'><a href="#set_base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#set_base_class (method)">set_base_class</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new-instance_method">
  <h3 class='signature '>
    #<strong>new</strong>(attributes = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Determines if one of the attributes passed in is the inheritance column, and if the inheritance column is attr accessible, it initializes an instance of the given subclass instead of the base class.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L56-L78'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='78'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_abstract_class?'><a href="#abstract_class%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class? (method)">abstract_class?</a></span> <span class='op'>||</span> <span class='kw'>self</span> <span class='op'>==</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'> is an abstract class and cannot be instantiated.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid__has_attribute?'>_has_attribute?</span>(<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>)
    <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>=</span> <span class='id identifier rubyid_subclass_from_attributes'><a href="#subclass_from_attributes-instance_method" title="ActiveRecord::Inheritance::ClassMethods#subclass_from_attributes (method)">subclass_from_attributes</a></span>(<span class='id identifier rubyid_attributes'>attributes</span>)

    <span class='kw'>if</span> <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_scope_attributes'>scope_attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_current_scope'>current_scope</span><span class='op'>&amp;.</span><span class='id identifier rubyid_scope_for_create'>scope_for_create</span>
      <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>=</span> <span class='id identifier rubyid_subclass_from_attributes'><a href="#subclass_from_attributes-instance_method" title="ActiveRecord::Inheritance::ClassMethods#subclass_from_attributes (method)">subclass_from_attributes</a></span>(<span class='id identifier rubyid_scope_attributes'>scope_attributes</span>)
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_base_class?'><a href="#base_class%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#base_class? (method)">base_class?</a></span>
      <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>=</span> <span class='id identifier rubyid_subclass_from_attributes'><a href="#subclass_from_attributes-instance_method" title="ActiveRecord::Inheritance::ClassMethods#subclass_from_attributes (method)">subclass_from_attributes</a></span>(<span class='id identifier rubyid_column_defaults'>column_defaults</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>!=</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_subclass'>subclass</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="polymorphic_class_for-instance_method">
  <h3 class='signature '>
    #<strong>polymorphic_class_for</strong>(name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the class for the provided <code>name</code>.</p>

<p>It is used to find the class correspondent to the value stored in the polymorphic type column.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L218-L224'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='218' data-end='224'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 218</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_polymorphic_class_for'>polymorphic_class_for</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_store_full_class_name'>store_full_class_name</span>
    <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_constantize'>constantize</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_compute_type'><a href="#compute_type-instance_method" title="ActiveRecord::Inheritance::ClassMethods#compute_type (method)">compute_type</a></span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="polymorphic_name-instance_method">
  <h3 class='signature '>
    #<strong>polymorphic_name</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value to be stored in the polymorphic type column for Polymorphic Associations.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L211-L213'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='211' data-end='213'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 211</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_polymorphic_name'>polymorphic_name</span>
  <span class='id identifier rubyid_store_full_class_name'>store_full_class_name</span> <span class='op'>?</span> <span class='id identifier rubyid_base_class'><a href="#base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#base_class (method)">base_class</a></span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>:</span> <span class='id identifier rubyid_base_class'><a href="#base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#base_class (method)">base_class</a></span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_demodulize'>demodulize</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="primary_abstract_class-instance_method">
  <h3 class='signature '>
    #<strong>primary_abstract_class</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the application record class for Active Record</p>

<p>This is useful if your application uses a different class than ApplicationRecord for your primary abstract class. This class will share a database connection with Active Record. It is the class that connects to your primary database.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L177-L184'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='177' data-end='184'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 177</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_primary_abstract_class'>primary_abstract_class</span>
  <span class='kw'>if</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_application_record_class'><a href="../../ActiveRecord.html#application_record_class-instance_method" title="ActiveRecord#application_record_class (method)">application_record_class</a></span> <span class='op'>&amp;&amp;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_application_record_class'><a href="../../ActiveRecord.html#application_record_class-instance_method" title="ActiveRecord#application_record_class (method)">application_record_class</a></span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>!=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The `primary_abstract_class` is already set to </span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_application_record_class'><a href="../../ActiveRecord.html#application_record_class-instance_method" title="ActiveRecord#application_record_class (method)">application_record_class</a></span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>. There can only be one `primary_abstract_class` in an application.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>.<span class='id identifier rubyid_abstract_class'><a href="#abstract_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class (method)">abstract_class</a></span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_application_record_class'><a href="../../ActiveRecord.html#application_record_class-instance_method" title="ActiveRecord#application_record_class (method)">application_record_class</a></span> <span class='op'>=</span> <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_base_class-instance_method">
  <h3 class='signature prot  nodoc'>
    #<strong>set_base_class</strong>   <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L270-L284'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='270' data-end='284'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 270</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_base_class'>set_base_class</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@base_class</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='kw'>self</span> <span class='op'>==</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
    <span class='kw'>self</span>
  <span class='kw'>else</span>
    <span class='kw'>unless</span> <span class='kw'>self</span> <span class='op'>&lt;</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../ActiveRecordError.html" title="ActiveRecord::ActiveRecordError (class)">ActiveRecordError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> doesn&#39;t belong in a hierarchy descending from ActiveRecord</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_superclass'>superclass</span> <span class='op'>==</span> <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span> <span class='op'>||</span> <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_abstract_class?'><a href="#abstract_class%3F-instance_method" title="ActiveRecord::Inheritance::ClassMethods#abstract_class? (method)">abstract_class?</a></span>
      <span class='kw'>self</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_superclass'>superclass</span>.<span class='id identifier rubyid_base_class'><a href="#base_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#base_class (method)">base_class</a></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sti_class_for-instance_method">
  <h3 class='signature '>
    #<strong>sti_class_for</strong>(type_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the class for the provided <code>type_name</code>.</p>

<p>It is used to find the class correspondent to the value stored in the inheritance column.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L194-L208'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='194' data-end='208'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 194</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sti_class_for'>sti_class_for</span>(<span class='id identifier rubyid_type_name'>type_name</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_store_full_sti_class'>store_full_sti_class</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_store_full_class_name'>store_full_class_name</span>
    <span class='id identifier rubyid_type_name'>type_name</span>.<span class='id identifier rubyid_constantize'>constantize</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_compute_type'><a href="#compute_type-instance_method" title="ActiveRecord::Inheritance::ClassMethods#compute_type (method)">compute_type</a></span>(<span class='id identifier rubyid_type_name'>type_name</span>)
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><a href="../../NameError.html" title="NameError (class)">NameError</a></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../SubclassNotFound.html" title="ActiveRecord::SubclassNotFound (class)">SubclassNotFound</a></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The single-table inheritance mechanism failed to locate the subclass: &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type_name'>type_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;. </span><span class='tstring_end'>&quot;</span></span> \
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This error is raised because the column &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_inheritance_column'>inheritance_column</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; is reserved for storing the class in case of inheritance. </span><span class='tstring_end'>&quot;</span></span> \
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Please rename this column if you didn&#39;t intend it to be used for storing the inheritance class </span><span class='tstring_end'>&quot;</span></span> \
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>or overwrite </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.inheritance_column to use another column for that information. </span><span class='tstring_end'>&quot;</span></span> \
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>If you wish to disable single-table inheritance for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> set </span><span class='tstring_end'>&quot;</span></span> \
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.inheritance_column to nil</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sti_name-instance_method">
  <h3 class='signature '>
    #<strong>sti_name</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value to be stored in the inheritance column for STI.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L187-L189'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='187' data-end='189'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 187</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sti_name'>sti_name</span>
  <span class='id identifier rubyid_store_full_sti_class'>store_full_sti_class</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_store_full_class_name'>store_full_class_name</span> <span class='op'>?</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>:</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_demodulize'>demodulize</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="subclass_from_attributes-instance_method">
  <h3 class='signature priv'>
    #<strong>subclass_from_attributes</strong>(attrs)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Detect the subclass from the inheritance column of attrs. If the inheritance column value is not self or a valid subclass, raises <a href="../SubclassNotFound.html" title="ActiveRecord::SubclassNotFound (class)"><code>::ActiveRecord::SubclassNotFound</code></a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L331-L340'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='331' data-end='340'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 331</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_subclass_from_attributes'>subclass_from_attributes</span>(<span class='id identifier rubyid_attrs'>attrs</span>)
  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span>.<span class='id identifier rubyid_to_h'>to_h</span> <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_permitted?'>permitted?</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>)
    <span class='id identifier rubyid_subclass_name'>subclass_name</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span>[<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>] <span class='op'>||</span> <span class='id identifier rubyid_attrs'>attrs</span>[<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>]

    <span class='kw'>if</span> <span class='id identifier rubyid_subclass_name'>subclass_name</span>.<span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_find_sti_class'><a href="#find_sti_class-instance_method" title="ActiveRecord::Inheritance::ClassMethods#find_sti_class (method)">find_sti_class</a></span>(<span class='id identifier rubyid_subclass_name'>subclass_name</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="type_condition-instance_method">
  <h3 class='signature priv'>
    #<strong>type_condition</strong>(table = arel_table)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L322-L327'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='322' data-end='327'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 322</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_type_condition'>type_condition</span>(<span class='id identifier rubyid_table'>table</span> <span class='op'>=</span> <span class='id identifier rubyid_arel_table'>arel_table</span>)
  <span class='id identifier rubyid_sti_column'>sti_column</span> <span class='op'>=</span> <span class='id identifier rubyid_table'>table</span>[<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>]
  <span class='id identifier rubyid_sti_names'>sti_names</span>  <span class='op'>=</span> ([<span class='kw'>self</span>] <span class='op'>+</span> <span class='id identifier rubyid_descendants'>descendants</span>).<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_sti_name'><a href="#sti_name-instance_method" title="ActiveRecord::Inheritance::ClassMethods#sti_name (method)">sti_name</a></span>)

  <span class='id identifier rubyid_predicate_builder'>predicate_builder</span>.<span class='id identifier rubyid_build'>build</span>(<span class='id identifier rubyid_sti_column'>sti_column</span><span class='comma'>,</span> <span class='id identifier rubyid_sti_names'>sti_names</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="using_single_table_inheritance?-instance_method">
  <h3 class='signature priv'>
    #<strong>using_single_table_inheritance?</strong>(record)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/main/activerecord/lib/active_record/inheritance.rb#L307-L309'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='307' data-end='309'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/inheritance.rb', line 307</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_using_single_table_inheritance?'>using_single_table_inheritance?</span>(<span class='id identifier rubyid_record'>record</span>)
  <span class='id identifier rubyid_record'>record</span>[<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>].<span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid__has_attribute?'>_has_attribute?</span>(<span class='id identifier rubyid_inheritance_column'>inheritance_column</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>