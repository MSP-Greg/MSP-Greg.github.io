<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: MonitorMixin &mdash; monitor Ruby-2.2.6 p342</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "MonitorMixin",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.2.6</a> &raquo; 
          <a href='index.html'>monitor</a> &raquo; 
          <a href='_index.html'>Index (M)</a> &raquo; 
          <span class='title'>MonitorMixin</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: MonitorMixin</h1>

<div class="box_info">


  <dl>
    <dt>Included in:</dt>
    <dd><a href="Monitor.html" title="Monitor (class)">Monitor</a></dd>
  </dl>

  <dl>
    <dt>Defined in:</dt>
    <dd>monitor.rb</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>In concurrent programming, a monitor is an object or module intended to be
used safely by more than one thread.  The defining characteristic of a
monitor is that its methods are executed with mutual exclusion.  That is,
at each point in time, at most one thread may be executing any of its
methods. This mutual exclusion greatly simplifies reasoning about the
implementation of monitors compared to reasoning about parallel code that
updates a data structure.</p>

<p>You can read more about the general principles on the Wikipedia page for <a
href="http://en.wikipedia.org/wiki/Monitor_%28synchronization%29">Monitors</a></p>

<h3 id="label-Examples">Examples</h3>

<h4 id="label-Simple+object.extend">Simple object.extend</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>monitor.rb</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_extend'>extend</span><span class='lparen'>(</span><span class='const'>MonitorMixin</span><span class='rparen'>)</span>
<span class='id identifier rubyid_empty_cond'>empty_cond</span> <span class='op'>=</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_new_cond'>new_cond</span>

<span class='comment'># consumer
</span><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_empty_cond'>empty_cond</span><span class='period'>.</span><span class='id identifier rubyid_wait_while'>wait_while</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># producer
</span><span class='kw'>while</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='const'>ARGF</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span>
  <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_empty_cond'>empty_cond</span><span class='period'>.</span><span class='id identifier rubyid_signal'>signal</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The consumer thread waits for the producer thread to push a line to buf
while <code>buf.empty?</code>.  The producer thread (main thread) reads a
line from ARGF and pushes it into buf then calls
<code>empty_cond.signal</code> to notify the consumer thread of new data.</p>

<h4 id="label-Simple+Class+include">Simple Class include</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>monitor</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>class</span> <span class='const'>SynchronizedArray</span> <span class='op'>&lt;</span> <span class='const'>Array</span>

  <span class='id identifier rubyid_include'>include</span> <span class='const'>MonitorMixin</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
    <span class='kw'>super</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>alias</span> <span class='symbol'>:old_shift</span> <span class='symbol'>:shift</span>
  <span class='kw'>alias</span> <span class='symbol'>:old_unshift</span> <span class='symbol'>:unshift</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_shift'>shift</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span><span class='op'>=</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_old_shift'>old_shift</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_old_unshift'>old_unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># other methods ...
</span><span class='kw'>end</span>
</code></pre>

<p><code>SynchronizedArray</code> implements an Array with synchronized access
to items. This Class is implemented as subclass of Array which includes the
MonitorMixin module.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2>Defined Under Namespace</h2>

  <p class='children'><strong class='classes'>Classes:</strong>
    <a href="MonitorMixin/ConditionVariable.html" title="MonitorMixin::ConditionVariable (class)">ConditionVariable</a>
  </p>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#extend_object-class_method" title=".extend_object (class method)">.<strong>extend_object</strong>(obj)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(*args)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Use <code>extend MonitorMixin</code> or <code>include MonitorMixin</code>
instead of this constructor.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_check_owner-instance_method" title="#mon_check_owner (instance method)">#<strong>mon_check_owner</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_enter-instance_method" title="#mon_enter (instance method)">#<strong>mon_enter</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enters exclusive section.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_enter_for_cond-instance_method" title="#mon_enter_for_cond (instance method)">#<strong>mon_enter_for_cond</strong>(count)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_exit-instance_method" title="#mon_exit (instance method)">#<strong>mon_exit</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Leaves exclusive section.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_exit_for_cond-instance_method" title="#mon_exit_for_cond (instance method)">#<strong>mon_exit_for_cond</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_initialize-instance_method" title="#mon_initialize (instance method)">#<strong>mon_initialize</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Initializes the MonitorMixin after being included in a class or when an
object has been extended with the MonitorMixin</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_synchronize-instance_method" title="#mon_synchronize (instance method)">#<strong>mon_synchronize</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enters exclusive section and executes the block.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mon_try_enter-instance_method" title="#mon_try_enter (instance method)">#<strong>mon_try_enter</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Attempts to enter exclusive section.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new_cond-instance_method" title="#new_cond (instance method)">#<strong>new_cond</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new <a href="MonitorMixin/ConditionVariable.html" title="MonitorMixin::ConditionVariable (class)">ConditionVariable</a> associated with the
receiver.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#synchronize-instance_method" title="#synchronize (instance method)">#<strong>synchronize</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enters exclusive section and executes the block.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#try_mon_enter-instance_method" title="#try_mon_enter (instance method)">#<strong>try_mon_enter</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Attempts to enter exclusive section.</p>
</div>
      </span>
    </li>
  </ul>

<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="extend_object-class_method">
  <h3 class='signature first'>
  .<strong>extend_object</strong>(obj)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


159
160
161
162</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 159</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_extend_object'>extend_object</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
    <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid___send__'>__send__</span><span class='lparen'>(</span><span class='symbol'>:mon_initialize</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="initialize-instance_method">
  <h3 class='signature first'>
  #<strong>initialize</strong>(*args)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Use <code>extend MonitorMixin</code> or <code>include MonitorMixin</code>
instead of this constructor.  Have look at the examples above to understand
how to use this module.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


231
232
233
234</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 231</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
    <span class='kw'>super</span>
    <span class='id identifier rubyid_mon_initialize'>mon_initialize</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_check_owner-instance_method">
  <h3 class='signature'>
  #<strong>mon_check_owner</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


244
245
246
247
248</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 244</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_check_owner'>mon_check_owner</span>
    <span class='kw'>if</span> <span class='ivar'>@mon_owner</span> <span class='op'>!=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ThreadError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current thread not owner</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_enter-instance_method">
  <h3 class='signature'>
  #<strong>mon_enter</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enters exclusive section.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


183
184
185
186
187
188
189</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_enter'>mon_enter</span>
    <span class='kw'>if</span> <span class='ivar'>@mon_owner</span> <span class='op'>!=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
      <span class='ivar'>@mon_mutex</span><span class='period'>.</span><span class='id identifier rubyid_lock'>lock</span>
      <span class='ivar'>@mon_owner</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
    <span class='kw'>end</span>
    <span class='ivar'>@mon_count</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_enter_for_cond-instance_method">
  <h3 class='signature'>
  #<strong>mon_enter_for_cond</strong>(count)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


250
251
252
253</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 250</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_enter_for_cond'>mon_enter_for_cond</span><span class='lparen'>(</span><span class='id identifier rubyid_count'>count</span><span class='rparen'>)</span>
    <span class='ivar'>@mon_owner</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
    <span class='ivar'>@mon_count</span> <span class='op'>=</span> <span class='id identifier rubyid_count'>count</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_exit-instance_method">
  <h3 class='signature'>
  #<strong>mon_exit</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Leaves exclusive section.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


194
195
196
197
198
199
200
201</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_exit'>mon_exit</span>
    <span class='id identifier rubyid_mon_check_owner'>mon_check_owner</span>
    <span class='ivar'>@mon_count</span> <span class='op'>-=</span><span class='int'>1</span>
    <span class='kw'>if</span> <span class='ivar'>@mon_count</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='ivar'>@mon_owner</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='ivar'>@mon_mutex</span><span class='period'>.</span><span class='id identifier rubyid_unlock'>unlock</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_exit_for_cond-instance_method">
  <h3 class='signature'>
  #<strong>mon_exit_for_cond</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


255
256
257
258
259
260</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_exit_for_cond'>mon_exit_for_cond</span>
    <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='ivar'>@mon_count</span>
    <span class='ivar'>@mon_owner</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@mon_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_count'>count</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_initialize-instance_method">
  <h3 class='signature'>
  #<strong>mon_initialize</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Initializes the MonitorMixin after being included in a class or when an
object has been extended with the MonitorMixin</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


238
239
240
241
242</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_initialize'>mon_initialize</span>
    <span class='ivar'>@mon_owner</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@mon_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@mon_mutex</span> <span class='op'>=</span> <span class='const'>Mutex</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_synchronize-instance_method">
  <h3 class='signature'>
  #<strong>mon_synchronize</strong>  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>synchronize</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enters exclusive section and executes the block.  Leaves the exclusive
section automatically when the block exits.  See example under
<a href="" title="MonitorMixin (module)">MonitorMixin</a>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


208
209
210
211
212
213
214
215</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 208</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_synchronize'>mon_synchronize</span>
    <span class='id identifier rubyid_mon_enter'>mon_enter</span>
    <span class='kw'>begin</span>
      <span class='kw'>yield</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_mon_exit'>mon_exit</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mon_try_enter-instance_method">
  <h3 class='signature'>
  #<strong>mon_try_enter</strong>  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>try_mon_enter</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Attempts to enter exclusive section.  Returns <code>false</code> if lock
fails.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


167
168
169
170
171
172
173
174
175
176</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mon_try_enter'>mon_try_enter</span>
    <span class='kw'>if</span> <span class='ivar'>@mon_owner</span> <span class='op'>!=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
      <span class='kw'>unless</span> <span class='ivar'>@mon_mutex</span><span class='period'>.</span><span class='id identifier rubyid_try_lock'>try_lock</span>
        <span class='kw'>return</span> <span class='kw'>false</span>
      <span class='kw'>end</span>
      <span class='ivar'>@mon_owner</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
    <span class='kw'>end</span>
    <span class='ivar'>@mon_count</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="new_cond-instance_method">
  <h3 class='signature'>
  #<strong>new_cond</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new <a href="MonitorMixin/ConditionVariable.html" title="MonitorMixin::ConditionVariable (class)">ConditionVariable</a> associated with the
receiver.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


222
223
224</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 222</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_cond'>new_cond</span>
    <span class='kw'>return</span> <span class='const'>ConditionVariable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="synchronize-instance_method">
  <h3 class='signature'>
  #<strong>synchronize</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enters exclusive section and executes the block.  Leaves the exclusive
section automatically when the block exits.  See example under
<a href="" title="MonitorMixin (module)">MonitorMixin</a>.</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


216</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 216</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='id identifier rubyid_mon_synchronize'>mon_synchronize</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="try_mon_enter-instance_method">
  <h3 class='signature'>
  #<strong>try_mon_enter</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Attempts to enter exclusive section.  Returns <code>false</code> if lock
fails. For backward compatibility</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


178</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'monitor.rb', line 178</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_try_mon_enter'>try_mon_enter</span> <span class='id identifier rubyid_mon_try_enter'>mon_try_enter</span></pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>