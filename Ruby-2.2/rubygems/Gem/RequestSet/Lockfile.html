<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Gem::RequestSet::Lockfile &mdash; rubygems Ruby-2.2.6 p344</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Gem::RequestSet::Lockfile",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Ruby-2.2.6</a> &raquo; 
          <a href='../../index.html'>rubygems</a> &raquo; 
          <a href='../../_index.html'>Index (L)</a> &raquo; 
          <a href="../../Gem.html" title="Gem (module)">Gem</a> &raquo; 
          <a href="../RequestSet.html" title="Gem::RequestSet (class)">RequestSet</a> &raquo; 
          <span class='title'>Lockfile</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Gem::RequestSet::Lockfile</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>Gem::RequestSet::Lockfile</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Child Exceptions:</td>
    <td>
      <a href="Lockfile/ParseError.html" title="Gem::RequestSet::Lockfile::ParseError (class)">ParseError</a>
    </td>
  </tr>




  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
<a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L8'>lib/rubygems/request_set/lockfile.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Parses a gem.deps.rb.lock file and constructs a LockSet containing the
dependencies found inside.  If the lock file is missing no LockSet is
constructed.</p>


  </div>
</div>
<div class="tags">
  
</div>


<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#platforms-instance_method" title="#platforms (instance method)">#<strong>platforms</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The platforms for this Lockfile</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(request_set, gem_deps_file, dependencies = nil)  &#x21d2; Lockfile </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new Lockfile for the given <code>request_set</code> and
<code>gem_deps_file</code> location.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#add_GIT-instance_method" title="#add_GIT (instance method)">#<strong>add_GIT</strong>(out)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#get-instance_method" title="#get (instance method)">#<strong>get</strong>(expected_types = nil, expected_value = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Gets the next token for a Lockfile</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#parse_dependency-instance_method" title="#parse_dependency (instance method)">#<strong>parse_dependency</strong>(name, op)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Parses the requirements following the dependency <code>name</code> and the
<code>op</code> for the first token of the requirements and returns a
<a href="../Dependency.html" title="Gem::Dependency (class)">Dependency</a> object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#peek-instance_method" title="#peek (instance method)">#<strong>peek</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Peeks at the next token for Lockfile</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The contents of the lock file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#token_pos-instance_method" title="#token_pos (instance method)">#<strong>token_pos</strong>(byte_offset)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Calculates the column (by byte) and the line of the current token based on
<code>byte_offset</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tokenize-instance_method" title="#tokenize (instance method)">#<strong>tokenize</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Converts a lock file into an Array of tokens.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unget-instance_method" title="#unget (instance method)">#<strong>unget</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Ungets the last token retrieved by <a href="#get-instance_method" title="Gem::RequestSet::Lockfile#get (method)">#get</a></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Writes the lock file alongside the gem dependencies file</p>
</div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(request_set, gem_deps_file, dependencies = nil)  &#x21d2; <tt><a href="" title="Gem::RequestSet::Lockfile (class)">Lockfile</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new Lockfile for the given <code>request_set</code> and
<code>gem_deps_file</code> location.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L52'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


52
53
54
55
56
57
58
59
60
61
62
63
64
65</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span> <span class='id identifier rubyid_request_set'>request_set</span><span class='comma'>,</span> <span class='id identifier rubyid_gem_deps_file'>gem_deps_file</span><span class='comma'>,</span> <span class='id identifier rubyid_dependencies'>dependencies</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@set</span>           <span class='op'>=</span> <span class='id identifier rubyid_request_set'>request_set</span>
  <span class='ivar'>@dependencies</span>  <span class='op'>=</span> <span class='id identifier rubyid_dependencies'>dependencies</span>
  <span class='ivar'>@gem_deps_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_deps_file'>gem_deps_file</span><span class='rparen'>)</span>
  <span class='ivar'>@gem_deps_dir</span>  <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='ivar'>@gem_deps_file</span><span class='rparen'>)</span>

  <span class='ivar'>@gem_deps_file</span><span class='period'>.</span><span class='id identifier rubyid_untaint'>untaint</span> <span class='kw'>unless</span> <span class='id identifier rubyid_gem_deps_file'>gem_deps_file</span><span class='period'>.</span><span class='id identifier rubyid_tainted?'>tainted?</span>

  <span class='ivar'>@current_token</span>  <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@line</span>           <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@line_pos</span>       <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@platforms</span>      <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@tokens</span>         <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="platforms-instance_method">
  <h3 class='signature first'>
  #<strong>platforms</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The platforms for this Lockfile</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L46'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


46</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 46</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:platforms</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="add_GIT-instance_method">
  <h3 class='signature first'>
  #<strong>add_GIT</strong>(out)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L139'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 139</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_GIT'>add_GIT</span> <span class='id identifier rubyid_out'>out</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_git_requests'>git_requests</span> <span class='op'>=</span>
    <span class='ivar'>@spec_groups</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='const'><a href="../../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Resolver.html" title="Gem::Resolver (class)">Resolver</a></span><span class='op'>::</span><span class='const'><a href="../Resolver/GitSpecification.html" title="Gem::Resolver::GitSpecification (class)">GitSpecification</a></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_by_repository_revision'>by_repository_revision</span> <span class='op'>=</span> <span class='id identifier rubyid_git_requests'>git_requests</span><span class='period'>.</span><span class='id identifier rubyid_group_by'>group_by</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_source'>source</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_repository'>repository</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_rev_parse'>rev_parse</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GIT</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_by_repository_revision'>by_repository_revision</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id identifier rubyid_repository'>repository</span><span class='comma'>,</span> <span class='id identifier rubyid_revision'>revision</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_requests'>requests</span><span class='op'>|</span>
    <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  remote: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repository'>repository</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  revision: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_revision'>revision</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  specs:</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_requests'>requests</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>

      <span class='id identifier rubyid_dependencies'>dependencies</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_dependencies'>dependencies</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_dep'>dep</span><span class='op'>|</span> <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_dependencies'>dependencies</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dep'>dep</span><span class='op'>|</span>
        <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>      </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_requirement'>requirement</span><span class='period'>.</span><span class='id identifier rubyid_for_lockfile'>for_lockfile</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="get-instance_method">
  <h3 class='signature'>
  #<strong>get</strong>(expected_types = nil, expected_value = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Gets the next token for a Lockfile</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L215'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span> <span class='id identifier rubyid_expected_types'>expected_types</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_expected_value'>expected_value</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@current_token</span> <span class='op'>=</span> <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>

  <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='ivar'>@current_token</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_expected_types'>expected_types</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_expected_types'>expected_types</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_type'>type</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_unget'>unget</span>

    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unexpected token [</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>], </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected_types'>expected_types</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Lockfile/ParseError.html" title="Gem::RequestSet::Lockfile::ParseError (class)">ParseError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Lockfile/ParseError.html#new-class_method" title="Gem::RequestSet::Lockfile::ParseError.new (method)">new</a></span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_deps_file</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lock</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_expected_value'>expected_value</span> <span class='kw'>and</span> <span class='id identifier rubyid_expected_value'>expected_value</span> <span class='op'>!=</span> <span class='id identifier rubyid_value'>value</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_unget'>unget</span>

    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unexpected token [</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>], </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected [</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected_types'>expected_types</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected_value'>expected_value</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Lockfile/ParseError.html" title="Gem::RequestSet::Lockfile::ParseError (class)">ParseError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Lockfile/ParseError.html#new-class_method" title="Gem::RequestSet::Lockfile::ParseError.new (method)">new</a></span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_deps_file</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lock</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@current_token</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="parse_dependency-instance_method">
  <h3 class='signature'>
  #<strong>parse_dependency</strong>(name, op)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Parses the requirements following the dependency <code>name</code> and the
<code>op</code> for the first token of the requirements and returns a
<a href="../Dependency.html" title="Gem::Dependency (class)">Dependency</a> object.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L487'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 487</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_dependency'>parse_dependency</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_op'>op</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='const'><a href="../../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Dependency.html" title="Gem::Dependency (class)">Dependency</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../Dependency.html#new-class_method" title="Gem::Dependency.new (method)">new</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_op'>op</span> <span class='kw'>unless</span> <span class='id identifier rubyid_peek'>peek</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:text</span>

  <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='op'>=</span> <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:text</span>

  <span class='id identifier rubyid_requirements'>requirements</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_op'>op</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

  <span class='kw'>while</span> <span class='id identifier rubyid_peek'>peek</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:comma</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:comma</span>
    <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_op'>op</span><span class='comma'>,</span>      <span class='op'>=</span> <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:requirement</span>
    <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='op'>=</span> <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:text</span>

    <span class='id identifier rubyid_requirements'>requirements</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_op'>op</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='const'><a href="../../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="../Dependency.html" title="Gem::Dependency (class)">Dependency</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../Dependency.html#new-class_method" title="Gem::Dependency.new (method)">new</a></span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_requirements'>requirements</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="peek-instance_method">
  <h3 class='signature'>
  #<strong>peek</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Peeks at the next token for Lockfile</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L508'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


508
509
510</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 508</span>

<span class='kw'>def</span> <span class='id identifier rubyid_peek'>peek</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='symbol'>:EOF</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_s-instance_method">
  <h3 class='signature'>
  #<strong>to_s</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The contents of the lock file.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L530'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 530</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='ivar'>@set</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span>

  <span class='id identifier rubyid_out'>out</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='ivar'>@requests</span> <span class='op'>=</span> <span class='ivar'>@set</span><span class='period'>.</span><span class='id identifier rubyid_sorted_requests'>sorted_requests</span>

  <span class='ivar'>@spec_groups</span> <span class='op'>=</span> <span class='ivar'>@requests</span><span class='period'>.</span><span class='id identifier rubyid_group_by'>group_by</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
    <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_add_PATH'>add_PATH</span> <span class='id identifier rubyid_out'>out</span>

  <span class='id identifier rubyid_add_GIT'>add_GIT</span> <span class='id identifier rubyid_out'>out</span>

  <span class='id identifier rubyid_add_GEM'>add_GEM</span> <span class='id identifier rubyid_out'>out</span>

  <span class='id identifier rubyid_add_PLATFORMS'>add_PLATFORMS</span> <span class='id identifier rubyid_out'>out</span>

  <span class='id identifier rubyid_add_DEPENDENCIES'>add_DEPENDENCIES</span> <span class='id identifier rubyid_out'>out</span>

  <span class='id identifier rubyid_out'>out</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="token_pos-instance_method">
  <h3 class='signature'>
  #<strong>token_pos</strong>(byte_offset)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Calculates the column (by byte) and the line of the current token based on
<code>byte_offset</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L558'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


558
559
560</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 558</span>

<span class='kw'>def</span> <span class='id identifier rubyid_token_pos'>token_pos</span> <span class='id identifier rubyid_byte_offset'>byte_offset</span> <span class='comment'># :nodoc:
</span>  <span class='lbracket'>[</span><span class='id identifier rubyid_byte_offset'>byte_offset</span> <span class='op'>-</span> <span class='ivar'>@line_pos</span><span class='comma'>,</span> <span class='ivar'>@line</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="tokenize-instance_method">
  <h3 class='signature'>
  #<strong>tokenize</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Converts a lock file into an Array of tokens.  If the lock file is missing
an empty Array is returned.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L566'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 566</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tokenize'>tokenize</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@line</span>     <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@line_pos</span> <span class='op'>=</span> <span class='int'>0</span>

  <span class='ivar'>@platforms</span>     <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@tokens</span>        <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@current_token</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_lock_file'>lock_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_deps_file</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lock</span><span class='tstring_end'>&quot;</span></span>

  <span class='ivar'>@input</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='id identifier rubyid_lock_file'>lock_file</span>
  <span class='id identifier rubyid_s'>s</span>      <span class='op'>=</span> <span class='const'>StringScanner</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='ivar'>@input</span>

  <span class='kw'>until</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_eos?'>eos?</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span>

    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span> <span class='kw'>if</span> <span class='id identifier rubyid_leading_whitespace'>leading_whitespace</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> +</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&lt;|=&gt;]{7}</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>your </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lock_file'>lock_file</span><span class='embexpr_end'>}</span><span class='tstring_content'> contains merge conflict markers</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_token_pos'>token_pos</span> <span class='id identifier rubyid_pos'>pos</span>

      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Lockfile/ParseError.html" title="Gem::RequestSet::Lockfile::ParseError (class)">ParseError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Lockfile/ParseError.html#new-class_method" title="Gem::RequestSet::Lockfile::ParseError.new (method)">new</a></span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='id identifier rubyid_lock_file'>lock_file</span>
    <span class='kw'>end</span>

    <span class='ivar'>@tokens</span> <span class='op'>&lt;&lt;</span>
      <span class='kw'>case</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r?\n</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:newline</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
        <span class='ivar'>@line_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span>
        <span class='ivar'>@line</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_token'>token</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[A-Z]+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_leading_whitespace'>leading_whitespace</span> <span class='kw'>then</span>
          <span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span>
          <span class='id identifier rubyid_text'>text</span> <span class='op'>+=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^\s)]*</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'># in case of no match
</span>          <span class='lbracket'>[</span><span class='symbol'>:text</span><span class='comma'>,</span> <span class='id identifier rubyid_text'>text</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
          <span class='lbracket'>[</span><span class='symbol'>:section</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([a-z]+):\s</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>-=</span> <span class='int'>1</span> <span class='comment'># rewind for possible newline
</span>        <span class='lbracket'>[</span><span class='symbol'>:entry</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\(</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='lbracket'>[</span><span class='symbol'>:l_paren</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='lbracket'>[</span><span class='symbol'>:r_paren</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;=|&gt;=|=|~&gt;|&lt;|&gt;|!=</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='lbracket'>[</span><span class='symbol'>:requirement</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>,</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='lbracket'>[</span><span class='symbol'>:comma</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>!</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='lbracket'>[</span><span class='symbol'>:bang</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
      <span class='kw'>when</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^\s),!]*</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='lbracket'>[</span><span class='symbol'>:text</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BUG: can&#39;t create token for: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span><span class='lbracket'>[</span><span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@tokens</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
  <span class='ivar'>@tokens</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="unget-instance_method">
  <h3 class='signature'>
  #<strong>unget</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Ungets the last token retrieved by <a href="#get-instance_method" title="Gem::RequestSet::Lockfile#get (method)">#get</a></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L634'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


634
635
636</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 634</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unget'>unget</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span> <span class='ivar'>@current_token</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="write-instance_method">
  <h3 class='signature'>
  #<strong>write</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Writes the lock file alongside the gem dependencies file</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_2/lib/rubygems/request_set/lockfile.rb#L641'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


641
642
643
644
645
646
647</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rubygems/request_set/lockfile.rb', line 641</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write'>write</span>
  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_to_s'>to_s</span>

  <span class='id identifier rubyid_open'>open</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@gem_deps_file</span><span class='embexpr_end'>}</span><span class='tstring_content'>.lock</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_content'>content</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>