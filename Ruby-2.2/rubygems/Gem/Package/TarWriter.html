<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Gem::Package::TarWriter &mdash; rubygems Ruby-2.2.6 p344</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Gem::Package::TarWriter",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Ruby-2.2.6</a> &raquo; 
          <a href='../../index.html'>rubygems</a> &raquo; 
          <a href='../../_index.html'>Index (T)</a> &raquo; 
          <a href="../../Gem.html" title="Gem (module)">Gem</a> &raquo; 
          <a href="../Package.html" title="Gem::Package (class)">Package</a> &raquo; 
          <span class='title'>TarWriter</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Gem::Package::TarWriter</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>Gem::Package::TarWriter</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <a href="TarWriter/BoundedStream.html" title="Gem::Package::TarWriter::BoundedStream (class)">BoundedStream</a>,
    <a href="TarWriter/RestrictedStream.html" title="Gem::Package::TarWriter::RestrictedStream (class)">RestrictedStream</a>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Child Exceptions:</td>
    <td>
      <a href="TarWriter/FileOverflow.html" title="Gem::Package::TarWriter::FileOverflow (class)">FileOverflow</a>
    </td>
  </tr>




  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
rubygems/package/tar_writer.rb</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Allows writing of tar files</p>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(io)  &#x21d2; TarWriter </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new TarWriter, yielding it if a block is given</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#add_file-instance_method" title="#add_file (instance method)">#<strong>add_file</strong>(name, mode) {|RestrictedStream.new(@io)| ... } </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds file <code>name</code> with permissions <code>mode</code>, and yields
an IO for writing the file to</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#add_file_digest-instance_method" title="#add_file_digest (instance method)">#<strong>add_file_digest</strong>(name, mode, digest_algorithms)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds <code>name</code> with permissions <code>mode</code> to the tar,
yielding <code>io</code> for writing the file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#add_file_signed-instance_method" title="#add_file_signed (instance method)">#<strong>add_file_signed</strong>(name, mode, signer)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds <code>name</code> with permissions <code>mode</code> to the tar,
yielding <code>io</code> for writing the file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#add_file_simple-instance_method" title="#add_file_simple (instance method)">#<strong>add_file_simple</strong>(name, mode, size) {|os| ... } </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Add file <code>name</code> with permissions <code>mode</code>
<code>size</code> bytes long.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_closed-instance_method" title="#check_closed (instance method)">#<strong>check_closed</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Raises IOError if the TarWriter is closed</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Closes the TarWriter</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Is the TarWriter closed?</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Flushes the TarWriter&#39;s IO</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(io)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new TarWriter that will write to <code>io</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mkdir-instance_method" title="#mkdir (instance method)">#<strong>mkdir</strong>(name, mode)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new directory in the tar file <code>name</code> with
<code>mode</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#split_name-instance_method" title="#split_name (instance method)">#<strong>split_name</strong>(name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Splits <code>name</code> into a name and prefix that can fit in the
TarHeader</p>
</div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(io)  &#x21d2; <tt><a href="" title="Gem::Package::TarWriter (class)">TarWriter</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new TarWriter, yielding it if a block is given</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 79</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_writer'>writer</span> <span class='op'>=</span> <span class='kw'>super</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_writer'>writer</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='kw'>begin</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_writer'>writer</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_writer'>writer</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="add_file-instance_method">
  <h3 class='signature first'>
  #<strong>add_file</strong>(name, mode) {|RestrictedStream.new(@io)| ... } 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds file <code>name</code> with permissions <code>mode</code>, and yields
an IO for writing the file to</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<tt><a href="TarWriter/RestrictedStream.html" title="Gem::Package::TarWriter::RestrictedStream (class)">RestrictedStream</a>.<a href="#new-class_method" title="Gem::Package::TarWriter.new (method)">new</a>(@io)</tt>)</span>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt><a href="NonSeekableIO.html" title="Gem::Package::NonSeekableIO (class)">Gem::Package::NonSeekableIO</a></tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_file'>add_file</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='rparen'>)</span> <span class='comment'># :yields: io
</span>  <span class='id identifier rubyid_check_closed'>check_closed</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>NonSeekableIO</span> <span class='kw'>unless</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:pos=</span>

  <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_split_name'>split_name</span> <span class='id identifier rubyid_name'>name</span>

  <span class='id identifier rubyid_init_pos'>init_pos</span> <span class='op'>=</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span>
  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>512</span> <span class='comment'># placeholder for the header
</span>
  <span class='kw'>yield</span> <span class='const'>RestrictedStream</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@io</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>-</span> <span class='id identifier rubyid_init_pos'>init_pos</span> <span class='op'>-</span> <span class='int'>512</span>

  <span class='id identifier rubyid_remainder'>remainder</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>512</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span> <span class='op'>%</span> <span class='int'>512</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>512</span>
  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_remainder'>remainder</span>

  <span class='id identifier rubyid_final_pos'>final_pos</span> <span class='op'>=</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span>
  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_init_pos'>init_pos</span>

  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>TarHeader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbol'>:mode</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span>
                                       <span class='symbol'>:size</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='symbol'>:prefix</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span>
                                       <span class='symbol'>:mtime</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>

  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_header'>header</span>
  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_final_pos'>final_pos</span>

  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="add_file_digest-instance_method">
  <h3 class='signature'>
  #<strong>add_file_digest</strong>(name, mode, digest_algorithms)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds <code>name</code> with permissions <code>mode</code> to the tar,
yielding <code>io</code> for writing the file.  The
<code>digest_algorithm</code> is written to a read-only
<code>name</code>.sum file following the given file contents containing the
digest name and hexdigest separated by a tab.</p>

<p>The created digest object is returned.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_file_digest'>add_file_digest</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='id identifier rubyid_digest_algorithms'>digest_algorithms</span> <span class='comment'># :yields: io
</span>  <span class='id identifier rubyid_digests'>digests</span> <span class='op'>=</span> <span class='id identifier rubyid_digest_algorithms'>digest_algorithms</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_digest_algorithm'>digest_algorithm</span><span class='op'>|</span>
    <span class='id identifier rubyid_digest'>digest</span> <span class='op'>=</span> <span class='id identifier rubyid_digest_algorithm'>digest_algorithm</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_digest_name'>digest_name</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_digest'>digest</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:name</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_digest'>digest</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>::([^:]+)$</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_digest_algorithm'>digest_algorithm</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
        <span class='backref'>$1</span>
      <span class='kw'>end</span>

    <span class='lbracket'>[</span><span class='id identifier rubyid_digest_name'>digest_name</span><span class='comma'>,</span> <span class='id identifier rubyid_digest'>digest</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_digests'>digests</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='op'>*</span><span class='id identifier rubyid_digests'>digests</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_add_file'>add_file</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>DigestIO</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span> <span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_digests'>digests</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_digest_io'>digest_io</span><span class='op'>|</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_digest_io'>digest_io</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_digests'>digests</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="add_file_signed-instance_method">
  <h3 class='signature'>
  #<strong>add_file_signed</strong>(name, mode, signer)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds <code>name</code> with permissions <code>mode</code> to the tar,
yielding <code>io</code> for writing the file.  The <code>signer</code> is
used to add a digest file using its digest_algorithm per add_file_digest
and a cryptographic signature in <code>name</code>.sig.  If the signer has
no key only the checksum file is added.</p>

<p>Returns the digest.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 176</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_file_signed'>add_file_signed</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='id identifier rubyid_signer'>signer</span>
  <span class='id identifier rubyid_digest_algorithms'>digest_algorithms</span> <span class='op'>=</span> <span class='lbracket'>[</span>
    <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_digest_algorithm'>digest_algorithm</span><span class='comma'>,</span>
    <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA512</span><span class='comma'>,</span>
  <span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>

  <span class='id identifier rubyid_digests'>digests</span> <span class='op'>=</span> <span class='id identifier rubyid_add_file_digest'>add_file_digest</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='id identifier rubyid_digest_algorithms'>digest_algorithms</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_io'>io</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_signature_digest'>signature_digest</span> <span class='op'>=</span> <span class='id identifier rubyid_digests'>digests</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_digest'>digest</span><span class='op'>|</span>
    <span class='id identifier rubyid_digest_name'>digest_name</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_digest'>digest</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:name</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_digest'>digest</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>::([^:]+)$</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_digest'>digest</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
        <span class='backref'>$1</span>
      <span class='kw'>end</span>

    <span class='id identifier rubyid_digest_name'>digest_name</span> <span class='op'>==</span> <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_digest_name'>digest_name</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_signature'>signature</span> <span class='op'>=</span> <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_sign'>sign</span> <span class='id identifier rubyid_signature_digest'>signature_digest</span><span class='period'>.</span><span class='id identifier rubyid_digest'>digest</span>

    <span class='id identifier rubyid_add_file_simple'>add_file_simple</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.sig</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>0444</span><span class='comma'>,</span> <span class='id identifier rubyid_signature'>signature</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
      <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_signature'>signature</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_digests'>digests</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="add_file_simple-instance_method">
  <h3 class='signature'>
  #<strong>add_file_simple</strong>(name, mode, size) {|os| ... } 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Add file <code>name</code> with permissions <code>mode</code>
<code>size</code> bytes long.  Yields an IO to write the file to.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<tt>os</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_file_simple'>add_file_simple</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span> <span class='comment'># :yields: io
</span>  <span class='id identifier rubyid_check_closed'>check_closed</span>

  <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_split_name'>split_name</span> <span class='id identifier rubyid_name'>name</span>

  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>TarHeader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbol'>:mode</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span>
                                       <span class='symbol'>:size</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='symbol'>:prefix</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span>
                                       <span class='symbol'>:mtime</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_header'>header</span>
  <span class='id identifier rubyid_os'>os</span> <span class='op'>=</span> <span class='const'>BoundedStream</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='ivar'>@io</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span>

  <span class='kw'>yield</span> <span class='id identifier rubyid_os'>os</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='id identifier rubyid_min_padding'>min_padding</span> <span class='op'>=</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='id identifier rubyid_os'>os</span><span class='period'>.</span><span class='id identifier rubyid_written'>written</span>
  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_min_padding'>min_padding</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_remainder'>remainder</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>512</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span> <span class='op'>%</span> <span class='int'>512</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>512</span>
  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_remainder'>remainder</span><span class='rparen'>)</span>

  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="check_closed-instance_method">
  <h3 class='signature'>
  #<strong>check_closed</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Raises IOError if the TarWriter is closed</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>IOError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


239
240
241</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 239</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_closed'>check_closed</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>closed </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_closed?'>closed?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close-instance_method">
  <h3 class='signature'>
  #<strong>close</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Closes the TarWriter</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


246
247
248
249
250
251
252
253</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
  <span class='id identifier rubyid_check_closed'>check_closed</span>

  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>1024</span>
  <span class='id identifier rubyid_flush'>flush</span>

  <span class='ivar'>@closed</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="closed?-instance_method">
  <h3 class='signature'>
  #<strong>closed?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Is the TarWriter closed?</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


258
259
260</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_closed?'>closed?</span>
  <span class='ivar'>@closed</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="flush-instance_method">
  <h3 class='signature'>
  #<strong>flush</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Flushes the TarWriter&#39;s IO</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


265
266
267
268
269</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flush'>flush</span>
  <span class='id identifier rubyid_check_closed'>check_closed</span>

  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span> <span class='kw'>if</span> <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:flush</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="initialize-instance_method">
  <h3 class='signature'>
  #<strong>initialize</strong>(io)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new TarWriter that will write to <code>io</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


96
97
98
99</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='rparen'>)</span>
  <span class='ivar'>@io</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>
  <span class='ivar'>@closed</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="mkdir-instance_method">
  <h3 class='signature'>
  #<strong>mkdir</strong>(name, mode)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new directory in the tar file <code>name</code> with
<code>mode</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


274
275
276
277
278
279
280
281
282
283
284
285
286
287</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mkdir'>mkdir</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_closed'>check_closed</span>

  <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_split_name'>split_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>TarHeader</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbol'>:mode</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span>
                                       <span class='symbol'>:typeflag</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:size</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
                                       <span class='symbol'>:prefix</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span>
                                       <span class='symbol'>:mtime</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>

  <span class='ivar'>@io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_header'>header</span>

  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="split_name-instance_method">
  <h3 class='signature'>
  #<strong>split_name</strong>(name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Splits <code>name</code> into a name and prefix that can fit in the
TarHeader</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/package/tar_writer.rb', line 292</span>

<span class='kw'>def</span> <span class='id identifier rubyid_split_name'>split_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='int'>256</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>TooLongFileName</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>File \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; has a too long path (should be 256 or less)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&lt;=</span> <span class='int'>100</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_newname'>newname</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
    <span class='id identifier rubyid_nxt'>nxt</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_nxt'>nxt</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_newname'>newname</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>+</span> <span class='int'>1</span> <span class='op'>+</span> <span class='id identifier rubyid_nxt'>nxt</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='int'>100</span>
      <span class='id identifier rubyid_newname'>newname</span> <span class='op'>=</span> <span class='id identifier rubyid_nxt'>nxt</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_newname'>newname</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='id identifier rubyid_nxt'>nxt</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_newname'>newname</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='int'>100</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>TooLongFileName</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>File \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; has a too long name (should be 100 or less)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='int'>155</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Package</span><span class='op'>::</span><span class='const'>TooLongFileName</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>File \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; has a too long base path (should be 155 or less)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.0 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>