<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: WEBrick &mdash; webrick Ruby-2.2.6 p342</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "WEBrick",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.2.6</a> &raquo; 
          <a href='index.html'>webrick</a> &raquo; 
          <a href='_index.html'>Index (W)</a> &raquo; 
          <span class='title'>WEBrick</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: WEBrick</h1>

<div class="box_info">



  <dl>
    <dt>Defined in:</dt>
    <dd>webrick.rb<span class='defines'>,<br />
  webrick/accesslog.rb,<br /> webrick/cgi.rb,<br /> webrick/config.rb,<br /> webrick/cookie.rb,<br /> webrick/htmlutils.rb,<br /> webrick/httpauth.rb,<br /> webrick/httpproxy.rb,<br /> webrick/httprequest.rb,<br /> webrick/httpresponse.rb,<br /> webrick/https.rb,<br /> webrick/httpserver.rb,<br /> webrick/httpservlet.rb,<br /> webrick/httpstatus.rb,<br /> webrick/httputils.rb,<br /> webrick/httpversion.rb,<br /> webrick/log.rb,<br /> webrick/server.rb,<br /> webrick/ssl.rb,<br /> webrick/utils.rb,<br /> webrick/version.rb,<br /> webrick/httpauth/authenticator.rb,<br /> webrick/httpauth/basicauth.rb,<br /> webrick/httpauth/digestauth.rb,<br /> webrick/httpauth/htdigest.rb,<br /> webrick/httpauth/htgroup.rb,<br /> webrick/httpauth/htpasswd.rb,<br /> webrick/httpauth/userdb.rb,<br /> webrick/httpservlet/abstract.rb,<br /> webrick/httpservlet/cgihandler.rb,<br /> webrick/httpservlet/erbhandler.rb,<br /> webrick/httpservlet/filehandler.rb,<br /> webrick/httpservlet/prochandler.rb</span>
</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-WEB+server+toolkit.">WEB server toolkit.</h2>

<p>WEBrick is an HTTP server toolkit that can be configured as an HTTPS
server, a proxy server, and a virtual-host server.  WEBrick features
complete logging of both server operations and HTTP access.  WEBrick
supports both basic and digest authentication in addition to algorithms not
in RFC 2617.</p>

<p>A WEBrick server can be composed of multiple WEBrick servers or servlets to
provide differing behavior on a per-host or per-path basis.  WEBrick
includes servlets for handling CGI scripts, ERb pages, Ruby blocks and
directory listings.</p>

<p>WEBrick also includes tools for daemonizing a process and starting a
process at a higher privilege level and dropping permissions.</p>

<h3 id="label-Starting+an+HTTP+server">Starting an HTTP server</h3>

<p>To create a new <a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a> that will listen to connections on
port 8000 and serve documents from the current user&#39;s public_html
folder:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_root'>root</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~/public_html</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span><span class='comma'>,</span> <span class='symbol'>:DocumentRoot</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_root'>root</span>
</code></pre>

<p>To run the server you will need to provide a suitable shutdown hook as
starting the server blocks the current thread:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_trap'>trap</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INT</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span> <span class='kw'>end</span>

<span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>
</code></pre>

<h3 id="label-Custom+Behavior">Custom Behavior</h3>

<p>The easiest way to have a server perform custom operations is through
<a href="WEBrick/HTTPServer.html#mount_proc-instance_method" title="WEBrick::HTTPServer#mount_proc (method)">HTTPServer#mount_proc</a>.  The block given will be called with a
<a href="WEBrick/HTTPRequest.html" title="WEBrick::HTTPRequest (class)">HTTPRequest</a> with request info and a <a href="WEBrick/HTTPResponse.html" title="WEBrick::HTTPResponse (class)">HTTPResponse</a>
which must be filled in appropriately:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_mount_proc'>mount_proc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_res'>res</span><span class='op'>|</span>
  <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Remember that <code>server.mount_proc</code> must precede
<code>server.start</code>.</p>

<h3 id="label-Servlets">Servlets</h3>

<p>Advanced custom behavior can be obtained through mounting a subclass of
<a href="WEBrick/HTTPServlet/AbstractServlet.html" title="WEBrick::HTTPServlet::AbstractServlet (class)">HTTPServlet::AbstractServlet</a>.  Servlets provide more modularity
when writing an HTTP server than mount_proc allows.  Here is a simple
servlet:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Simple</span> <span class='op'>&lt;</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPServlet</span><span class='op'>::</span><span class='const'>AbstractServlet</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_do_GET'>do_GET</span> <span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span>
    <span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_content_type'>content_type</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_do_stuff_with'>do_stuff_with</span> <span class='id identifier rubyid_request'>request</span>

    <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='int'>200</span>
    <span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello, World!</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>To initialize the servlet you mount it on the server:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_mount'>mount</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/simple</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Simple</span>
</code></pre>

<p>See <a href="WEBrick/HTTPServlet/AbstractServlet.html" title="WEBrick::HTTPServlet::AbstractServlet (class)">HTTPServlet::AbstractServlet</a> for more details.</p>

<h3 id="label-Virtual+Hosts">Virtual Hosts</h3>

<p>A server can act as a virtual host for multiple host names.  After creating
the listening host, additional hosts that do not listen can be created and
attached as virtual hosts:</p>

<pre class="code ruby"><code class="ruby">server = WEBrick::HTTPServer.new # ...

vhost = WEBrick::HTTPServer.new :ServerName =&gt; &#39;vhost.example&#39;,
                                :DoNotListen =&gt; true, # ...
vhost.mount &#39;/&#39;, ...

server.virtual_host vhost</code></pre>

<p>If no <code>:DocumentRoot</code> is provided and no servlets or procs are
mounted on the main server it will return 404 for all URLs.</p>

<h3 id="label-HTTPS">HTTPS</h3>

<p>To create an HTTPS server you only need to enable SSL and provide an SSL
certificate name:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick/https</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_cert_name'>cert_name</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>CN</span><span class='words_sep'> </span><span class='tstring_content'>localhost</span><span class='words_sep'>]</span><span class='comma'>,</span>
<span class='rbracket'>]</span>

<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span><span class='comma'>,</span>
                                 <span class='symbol'>:SSLEnable</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                                 <span class='symbol'>:SSLCertName</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_cert_name'>cert_name</span><span class='rparen'>)</span>
</code></pre>

<p>This will start the server with a self-generated self-signed certificate.
The certificate will be changed every time the server is restarted.</p>

<p>To create a server with a pre-determined key and certificate you can
provide them:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick/https</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>openssl</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_cert'>cert</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Certificate</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/path/to/cert.pem</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_pkey'>pkey</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/path/to/pkey.pem</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span><span class='comma'>,</span>
                                 <span class='symbol'>:SSLEnable</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                                 <span class='symbol'>:SSLCertificate</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_cert'>cert</span><span class='comma'>,</span>
                                 <span class='symbol'>:SSLPrivateKey</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pkey'>pkey</span><span class='rparen'>)</span>
</code></pre>

<h3 id="label-Proxy+Server">Proxy Server</h3>

<p>WEBrick can act as a proxy server:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webrick/httpproxy</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_proxy'>proxy</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPProxyServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:Port</span> <span class='op'>=&gt;</span> <span class='int'>8000</span>

<span class='id identifier rubyid_trap'>trap</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INT</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='id identifier rubyid_proxy'>proxy</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span> <span class='kw'>end</span>
</code></pre>

<p>See HTTPProxy for further details including modifying proxied
responses.</p>

<h3 id="label-Basic+and+Digest+authentication">Basic and Digest authentication</h3>

<p>WEBrick provides both Basic and Digest authentication for regular and proxy
servers.  See <a href="WEBrick/HTTPAuth.html" title="WEBrick::HTTPAuth (module)">HTTPAuth</a>, <a href="WEBrick/HTTPAuth/BasicAuth.html" title="WEBrick::HTTPAuth::BasicAuth (class)">HTTPAuth::BasicAuth</a> and
<a href="WEBrick/HTTPAuth/DigestAuth.html" title="WEBrick::HTTPAuth::DigestAuth (class)">HTTPAuth::DigestAuth</a>.</p>

<h3 id="label-WEBrick+as+a+Production+Web+Server">WEBrick as a Production Web Server</h3>

<p>WEBrick can be run as a production server for small loads.</p>

<h4 id="label-Daemonizing">Daemonizing</h4>

<p>To start a WEBrick server as a daemon simple run <a href="WEBrick/Daemon.html" title="WEBrick::Daemon (class)">Daemon</a>.start
before starting the server.</p>

<h4 id="label-Dropping+Permissions">Dropping Permissions</h4>

<p>WEBrick can be started as one user to gain permission to bind to port 80 or
443 for serving HTTP or HTTPS traffic then can drop these permissions for
regular operation.  To listen on all interfaces for HTTP traffic:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_sockets'>sockets</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_create_listeners'>create_listeners</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='int'>80</span>
</code></pre>

<p>Then drop privileges:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_su'>su</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>www</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Then create a server that does not listen by default:</p>

<pre class="code ruby"><code class="ruby">server = WEBrick::HTTPServer.new :DoNotListen =&gt; true, # ...</code></pre>

<p>Then overwrite the listening sockets with the port 80 sockets:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_listeners'>listeners</span><span class='period'>.</span><span class='id identifier rubyid_replace'>replace</span> <span class='id identifier rubyid_sockets'>sockets</span>
</code></pre>

<h4 id="label-Logging">Logging</h4>

<p>WEBrick can separately log server operations and end-user access.  For
server operations:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_log_file'>log_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/var/log/webrick.log</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a+</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_log'>log</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>Log</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_log_file'>log_file</span>
</code></pre>

<p>For user access logging:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_access_log'>access_log</span> <span class='op'>=</span> <span class='lbracket'>[</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_log_file'>log_file</span><span class='comma'>,</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>AccessLog</span><span class='op'>::</span><span class='const'>COMBINED_LOG_FORMAT</span><span class='rbracket'>]</span><span class='comma'>,</span>
<span class='rbracket'>]</span>

<span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:Logger</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_log'>log</span><span class='comma'>,</span> <span class='symbol'>:AccessLog</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_access_log'>access_log</span>
</code></pre>

<p>See <a href="WEBrick/AccessLog.html" title="WEBrick::AccessLog (module)">AccessLog</a> for further log formats.</p>

<h4 id="label-Log+Rotation">Log Rotation</h4>

<p>To rotate logs in WEBrick on a HUP signal (like syslogd can send), open the
log file in &#39;a+&#39; mode (as above) and trap &#39;HUP&#39; to reopen
the log file:</p>

<pre class="code ruby"><code class="ruby">trap &#39;HUP&#39; do log_file.reopen &#39;/path/to/webrick.log&#39;, &#39;a+&#39;</code></pre>

<h3 id="label-Copyright">Copyright</h3>

<p>Author: IPR – Internet Programming with Ruby – writers</p>

<p>Copyright © 2000 TAKAHASHI Masayoshi, GOTOU YUUZOU Copyright © 2002
Internet Programming with Ruby writers. All rights reserved.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2>Defined Under Namespace</h2>

  <p class='children'><strong class='modules'>Modules:</strong>
    <a href="WEBrick/AccessLog.html" title="WEBrick::AccessLog (module)">AccessLog</a>,
    <a href="WEBrick/Config.html" title="WEBrick::Config (module)">Config</a>,
    <a href="WEBrick/HTMLUtils.html" title="WEBrick::HTMLUtils (module)">HTMLUtils</a>,
    <a href="WEBrick/HTTPAuth.html" title="WEBrick::HTTPAuth (module)">HTTPAuth</a>,
    <a href="WEBrick/HTTPServlet.html" title="WEBrick::HTTPServlet (module)">HTTPServlet</a>,
    <a href="WEBrick/HTTPStatus.html" title="WEBrick::HTTPStatus (module)">HTTPStatus</a>,
    <a href="WEBrick/HTTPUtils.html" title="WEBrick::HTTPUtils (module)">HTTPUtils</a>,
    <a href="WEBrick/Utils.html" title="WEBrick::Utils (module)">Utils</a>
  </p>
  <p class='children'><strong class='classes'>Classes:</strong>
    <a href="WEBrick/BasicLog.html" title="WEBrick::BasicLog (class)">BasicLog</a>,
    <a href="WEBrick/CGI.html" title="WEBrick::CGI (class)">CGI</a>,
    <a href="WEBrick/Cookie.html" title="WEBrick::Cookie (class)">Cookie</a>,
    <a href="WEBrick/Daemon.html" title="WEBrick::Daemon (class)">Daemon</a>,
    <a href="WEBrick/GenericServer.html" title="WEBrick::GenericServer (class)">GenericServer</a>,
    <a href="WEBrick/HTTPProxyServer.html" title="WEBrick::HTTPProxyServer (class)">HTTPProxyServer</a>,
    <a href="WEBrick/HTTPRequest.html" title="WEBrick::HTTPRequest (class)">HTTPRequest</a>,
    <a href="WEBrick/HTTPResponse.html" title="WEBrick::HTTPResponse (class)">HTTPResponse</a>,
    <a href="WEBrick/HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a>,
    <a href="WEBrick/HTTPVersion.html" title="WEBrick::HTTPVersion (class)">HTTPVersion</a>,
    <a href="WEBrick/Log.html" title="WEBrick::Log (class)">Log</a>,
    <a href="WEBrick/SimpleServer.html" title="WEBrick::SimpleServer (class)">SimpleServer</a>
  </p>
  <p class='children'><strong class='exceptions'>Exceptions:</strong>
    <a href="WEBrick/HTTPServerError.html" title="WEBrick::HTTPServerError (class)">HTTPServerError</a>,
    <a href="WEBrick/ServerError.html" title="WEBrick::ServerError (class)">ServerError</a>
  </p>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='CR-constant'>
      CR =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x0d</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='CRLF-constant'>
      CRLF =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x0d\x0a</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='FakeProxyURI-constant'>
      FakeProxyURI =
    </dt>
    <dd>
            <pre class='code'><span class='const'>Object</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></pre>
    </dd>
    <dt id='LF-constant'>
      LF =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x0a</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='NullReader-constant'>
      NullReader =
    </dt>
    <dd>
            <pre class='code'><span class='const'>Object</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></pre>
    </dd>
    <dt id='VERSION-constant'>
      VERSION =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>The WEBrick version</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.3.1</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
  </dl>







<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>