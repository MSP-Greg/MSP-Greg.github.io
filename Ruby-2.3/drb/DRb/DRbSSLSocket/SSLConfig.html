<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: DRb::DRbSSLSocket::SSLConfig &mdash; drb Ruby-2.3.2 p139</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "DRb::DRbSSLSocket::SSLConfig",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Ruby-2.3.2</a> &raquo; 
          <a href='../../index.html'>drb</a> &raquo; 
          <a href='../../_index.html'>Index (S)</a> &raquo; 
          <a href="../../DRb.html" title="DRb (module)">DRb</a> &raquo; 
          <a href="../DRbSSLSocket.html" title="DRb::DRbSSLSocket (class)">DRbSSLSocket</a> &raquo; 
          <span class='title'>SSLConfig</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: DRb::DRbSSLSocket::SSLConfig</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>DRb::DRbSSLSocket::SSLConfig</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>





  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
<a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L22'>lib/drb/ssl.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>SSLConfig handles the needed SSL information for establishing a
DRbSSLSocket connection, including generating the X509 / RSA pair.</p>

<p>An instance of this config can be passed to <a href="../DRbSSLSocket.html#new-class_method" title="DRb::DRbSSLSocket.new (method)">new</a>,
<a href="../DRbSSLSocket.html#open-class_method" title="DRb::DRbSSLSocket.open (method)">open</a> and <a href="../DRbSSLSocket.html#open_server-class_method" title="DRb::DRbSSLSocket.open_server (method)">open_server</a></p>

<p>See <a href="" title="DRb::DRbSSLSocket::SSLConfig (class)">SSLConfig</a>.new for more details</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='DEFAULT-constant'>
      DEFAULT =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Default values for a SSLConfig instance.</p>

<p>See <a href="" title="DRb::DRbSSLSocket::SSLConfig (class)">DRb::DRbSSLSocket::SSLConfig</a>.new for more details</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='lbrace'>{</span>
  <span class='symbol'>:SSLCertificate</span>       <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:SSLPrivateKey</span>        <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:SSLClientCA</span>          <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:SSLCACertificatePath</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:SSLCACertificateFile</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:SSLTmpDhCallback</span>     <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:SSLVerifyMode</span>        <span class='op'>=&gt;</span> <span class='op'>::</span><span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>VERIFY_NONE</span><span class='comma'>,</span>
  <span class='symbol'>:SSLVerifyDepth</span>       <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:SSLVerifyCallback</span>    <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>   <span class='comment'># custom verification
</span>  <span class='symbol'>:SSLCertificateStore</span>  <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='comment'># Must specify if you use auto generated certificate.
</span>  <span class='symbol'>:SSLCertName</span>          <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>   <span class='comment'># e.g. [[&quot;CN&quot;,&quot;fqdn.example.com&quot;]]
</span>  <span class='symbol'>:SSLCertComment</span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Generated by Ruby/OpenSSL</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span></pre>
    </dd>
  </dl>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(config)  &#x21d2; SSLConfig </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Create a new <a href="" title="DRb::DRbSSLSocket::SSLConfig (class)">SSLConfig</a> instance</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(key)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>A convenience method to access the values like a Hash</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#accept-instance_method" title="#accept (instance method)">#<strong>accept</strong>(tcp)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Accept connection to IO <code>tcp</code>, with context of the current
certificate configuration</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#connect-instance_method" title="#connect (instance method)">#<strong>connect</strong>(tcp)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Connect to IO <code>tcp</code>, with context of the current certificate
configuration</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#setup_certificate-instance_method" title="#setup_certificate (instance method)">#<strong>setup_certificate</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Ensures that :SSLCertificate and :SSLPrivateKey have been provided or that
a new certificate is generated with the other parameters provided.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#setup_ssl_context-instance_method" title="#setup_ssl_context (instance method)">#<strong>setup_ssl_context</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Establish the <code>OpenSSL::SSL::SSLContext</code> with the configuration parameters
provided.</p>
</div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(config)  &#x21d2; <tt><a href="" title="DRb::DRbSSLSocket::SSLConfig (class)">SSLConfig</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Create a new <a href="" title="DRb::DRbSSLSocket::SSLConfig (class)">DRb::DRbSSLSocket::SSLConfig</a> instance</p>

<p>The <a href="../DRbSSLSocket.html" title="DRb::DRbSSLSocket (class)">DRb::DRbSSLSocket</a> will take either a <code>config</code> Hash or an
instance of SSLConfig, and will setup the certificate for its session for
the configuration. If want it to generate a generic certificate, the bare
minimum is to provide the :SSLCertName</p>

<h3 id="label-Config+options">Config options</h3>

<p>From <code>config</code> Hash:</p>
<dl class="rdoc-list note-list"><dt>:SSLCertificate 
<dd>
<p>An instance of OpenSSL::X509::Certificate.  If this is not provided, then a
generic X509 is generated, with a correspond :SSLPrivateKey</p>
</dd><dt>:SSLPrivateKey 
<dd>
<p>A private key instance, like OpenSSL::PKey::RSA.  This key must be the key
that signed the :SSLCertificate</p>
</dd><dt>:SSLClientCA 
<dd>
<p>An OpenSSL::X509::Certificate, or Array of certificates that will used as
ClientCAs in the SSL Context</p>
</dd><dt>:SSLCACertificatePath 
<dd>
<p>A path to the directory of CA certificates.  The certificates must be in
PEM format.</p>
</dd><dt>:SSLCACertificateFile 
<dd>
<p>A path to a CA certificate file, in PEM format.</p>
</dd><dt>:SSLTmpDhCallback 
<dd>
<p>A DH callback. See OpenSSL::SSL::SSLContext.tmp_dh_callback</p>
</dd><dt>:SSLVerifyMode 
<dd>
<p>This is the SSL verification mode.  See OpenSSL::SSL::VERIFY_* for
available modes.  The default is OpenSSL::SSL::VERIFY_NONE</p>
</dd><dt>:SSLVerifyDepth 
<dd>
<p>Number of CA certificates to walk, when verifying a certificate chain.</p>
</dd><dt>:SSLVerifyCallback 
<dd>
<p>A callback to be used for additional verification.  See
OpenSSL::SSL::SSLContext.verify_callback</p>
</dd><dt>:SSLCertificateStore 
<dd>
<p>A OpenSSL::X509::Store used for verification of certificates</p>
</dd><dt>:SSLCertName 
<dd>
<p>Issuer name for the certificate.  This is required when generating the
certificate (if :SSLCertificate and :SSLPrivateKey were not given).  The
value of this is to be an Array of pairs:</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Raleigh</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ST</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>North Carolina</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
 <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fqdn.example.com</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span>
</code></pre>

<p>See also OpenSSL::X509::Name</p>
</dd><dt>:SSLCertComment 
<dd>
<p>A comment to be used for generating the certificate.  The default is
“Generated by Ruby/OpenSSL”</p>
</dd></dl>

<h3 id="label-Example">Example</h3>

<p>These values can be added after the fact, like a Hash.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drb/ssl</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'><a href="../../DRb.html" title="DRb (module)">DRb</a></span><span class='op'>::</span><span class='const'><a href="../DRbSSLSocket.html" title="DRb::DRbSSLSocket (class)">DRbSSLSocket</a></span><span class='op'>::</span><span class='const'><a href="" title="DRb::DRbSSLSocket::SSLConfig (class)">SSLConfig</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertificate</span><span class='rbracket'>]</span> <span class='op'>=</span>
  <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Certificate</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mycert.crt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='symbol'>:SSLPrivateKey</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mycert.key</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='symbol'>:SSLVerifyMode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>VERIFY_PEER</span>
<span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='symbol'>:SSLCACertificatePath</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/etc/ssl/certs/</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_setup_certificate'>setup_certificate</span>
</code></pre>

<p>or</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drb/ssl</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'><a href="../../DRb.html" title="DRb (module)">DRb</a></span><span class='op'>::</span><span class='const'><a href="../DRbSSLSocket.html" title="DRb::DRbSSLSocket (class)">DRbSSLSocket</a></span><span class='op'>::</span><span class='const'><a href="" title="DRb::DRbSSLSocket::SSLConfig (class)">SSLConfig</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbrace'>{</span>
        <span class='symbol'>:SSLCertName</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CN</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='const'><a href="../../DRb.html" title="DRb (module)">DRb</a></span><span class='op'>::</span><span class='const'><a href="../DRbSSLSocket.html" title="DRb::DRbSSLSocket (class)">DRbSSLSocket</a></span><span class='period'>.</span><span class='id identifier rubyid_getservername'><a href="../DRbTCPSocket.html#getservername-class_method" title="DRb::DRbTCPSocket.getservername (method)">getservername</a></span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_setup_certificate'>setup_certificate</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L127'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


127
128
129
130
131
132</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/drb/ssl.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span>  <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@cert</span>    <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertificate</span><span class='rbracket'>]</span>
  <span class='ivar'>@pkey</span>    <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLPrivateKey</span><span class='rbracket'>]</span>
  <span class='ivar'>@ssl_ctx</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="[]-instance_method">
  <h3 class='signature first'>
  #<strong>[]</strong>(key)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>A convenience method to access the values like a Hash</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L135'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


135
136
137</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/drb/ssl.rb', line 135</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span><span class='semicolon'>;</span>
  <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'><a href="#DEFAULT-constant" title="DRb::DRbSSLSocket::SSLConfig::DEFAULT (constant)">DEFAULT</a></span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="accept-instance_method">
  <h3 class='signature'>
  #<strong>accept</strong>(tcp)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Accept connection to IO <code>tcp</code>, with context of the current
certificate configuration</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L150'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


150
151
152
153
154
155</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/drb/ssl.rb', line 150</span>

<span class='kw'>def</span> <span class='id identifier rubyid_accept'>accept</span><span class='lparen'>(</span><span class='id identifier rubyid_tcp'>tcp</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssl'>ssl</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLSocket</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_tcp'>tcp</span><span class='comma'>,</span> <span class='ivar'>@ssl_ctx</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssl'>ssl</span><span class='period'>.</span><span class='id identifier rubyid_sync'>sync</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_ssl'>ssl</span><span class='period'>.</span><span class='id identifier rubyid_accept'>accept</span>
  <span class='id identifier rubyid_ssl'>ssl</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="connect-instance_method">
  <h3 class='signature'>
  #<strong>connect</strong>(tcp)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Connect to IO <code>tcp</code>, with context of the current certificate
configuration</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L141'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


141
142
143
144
145
146</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/drb/ssl.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_connect'>connect</span><span class='lparen'>(</span><span class='id identifier rubyid_tcp'>tcp</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssl'>ssl</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLSocket</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_tcp'>tcp</span><span class='comma'>,</span> <span class='ivar'>@ssl_ctx</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssl'>ssl</span><span class='period'>.</span><span class='id identifier rubyid_sync'>sync</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_ssl'>ssl</span><span class='period'>.</span><span class='id identifier rubyid_connect'>connect</span>
  <span class='id identifier rubyid_ssl'>ssl</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="setup_certificate-instance_method">
  <h3 class='signature'>
  #<strong>setup_certificate</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Ensures that :SSLCertificate and :SSLPrivateKey have been provided or that
a new certificate is generated with the other parameters provided.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L160'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/drb/ssl.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_certificate'>setup_certificate</span>
  <span class='kw'>if</span> <span class='ivar'>@cert</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@pkey</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_rsa'>rsa</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>1024</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_p'>p</span>
    <span class='kw'>when</span> <span class='int'>0</span><span class='semicolon'>;</span> <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_putc'>putc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># BN_generate_prime
</span>    <span class='kw'>when</span> <span class='int'>1</span><span class='semicolon'>;</span> <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_putc'>putc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># BN_generate_prime
</span>    <span class='kw'>when</span> <span class='int'>2</span><span class='semicolon'>;</span> <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_putc'>putc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># searching good prime,
</span>                              <span class='comment'># n = #of try,
</span>                              <span class='comment'># but also data from BN_generate_prime
</span>    <span class='kw'>when</span> <span class='int'>3</span><span class='semicolon'>;</span> <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_putc'>putc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># found good prime, n==0 - p, n==1 - q,
</span>                              <span class='comment'># but also data from BN_generate_prime
</span>    <span class='kw'>else</span><span class='semicolon'>;</span>   <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_putc'>putc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># BN_generate_prime
</span>    <span class='kw'>end</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_cert'>cert</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Certificate</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='int'>3</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_serial'>serial</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Name</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertName</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_issuer'>issuer</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_not_before'>not_before</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_not_after'>not_after</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='int'>365</span><span class='op'>*</span><span class='int'>24</span><span class='op'>*</span><span class='int'>60</span><span class='op'>*</span><span class='int'>60</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_public_key'>public_key</span> <span class='op'>=</span> <span class='id identifier rubyid_rsa'>rsa</span><span class='period'>.</span><span class='id identifier rubyid_public_key'>public_key</span>

  <span class='id identifier rubyid_ef'>ef</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>ExtensionFactory</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span><span class='id identifier rubyid_cert'>cert</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_extensions'>extensions</span> <span class='op'>=</span> <span class='lbracket'>[</span>
    <span class='id identifier rubyid_ef'>ef</span><span class='period'>.</span><span class='id identifier rubyid_create_extension'>create_extension</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>basicConstraints</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CA:FALSE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_ef'>ef</span><span class='period'>.</span><span class='id identifier rubyid_create_extension'>create_extension</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subjectKeyIdentifier</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hash</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbracket'>]</span>
  <span class='id identifier rubyid_ef'>ef</span><span class='period'>.</span><span class='id identifier rubyid_issuer_certificate'>issuer_certificate</span> <span class='op'>=</span> <span class='id identifier rubyid_cert'>cert</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_add_extension'>add_extension</span><span class='lparen'>(</span><span class='id identifier rubyid_ef'>ef</span><span class='period'>.</span><span class='id identifier rubyid_create_extension'>create_extension</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>authorityKeyIdentifier</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>keyid:always,issuer:always</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_comment'>comment</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertComment</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_add_extension'>add_extension</span><span class='lparen'>(</span><span class='id identifier rubyid_ef'>ef</span><span class='period'>.</span><span class='id identifier rubyid_create_extension'>create_extension</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nsComment</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_comment'>comment</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_cert'>cert</span><span class='period'>.</span><span class='id identifier rubyid_sign'>sign</span><span class='lparen'>(</span><span class='id identifier rubyid_rsa'>rsa</span><span class='comma'>,</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>

  <span class='ivar'>@cert</span> <span class='op'>=</span> <span class='id identifier rubyid_cert'>cert</span>
  <span class='ivar'>@pkey</span> <span class='op'>=</span> <span class='id identifier rubyid_rsa'>rsa</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="setup_ssl_context-instance_method">
  <h3 class='signature'>
  #<strong>setup_ssl_context</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Establish the <code>OpenSSL::SSL::SSLContext</code> with the configuration parameters
provided.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L207'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


207
208
209
210
211
212
213
214
215
216
217
218
219
220</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/drb/ssl.rb', line 207</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_ssl_context'>setup_ssl_context</span>
  <span class='id identifier rubyid_ctx'>ctx</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLContext</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_cert'>cert</span>            <span class='op'>=</span> <span class='ivar'>@cert</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span>             <span class='op'>=</span> <span class='ivar'>@pkey</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_client_ca'>client_ca</span>       <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLClientCA</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_ca_path'>ca_path</span>         <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLCACertificatePath</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_ca_file'>ca_file</span>         <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLCACertificateFile</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_tmp_dh_callback'>tmp_dh_callback</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLTmpDhCallback</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_verify_mode'>verify_mode</span>     <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLVerifyMode</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_verify_depth'>verify_depth</span>    <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLVerifyDepth</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_verify_callback'>verify_callback</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLVerifyCallback</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ctx'>ctx</span><span class='period'>.</span><span class='id identifier rubyid_cert_store'>cert_store</span>      <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertificateStore</span><span class='rbracket'>]</span>
  <span class='ivar'>@ssl_ctx</span> <span class='op'>=</span> <span class='id identifier rubyid_ctx'>ctx</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>