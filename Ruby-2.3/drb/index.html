<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: DRb &mdash; drb Ruby-2.3.2 p139</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "DRb",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.3.2</a> &raquo; 
          <a href='index.html'>drb</a> &raquo; 
          <a href='_index.html'>Index (D)</a> &raquo; 
          <span class='title'>DRb</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: DRb</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>

  <tr>
    <td class='box_1'>Child Modules:</td>
    <td>
      <div class='box_max'>
        <a href="DRb/DRbObservable.html" title="DRb::DRbObservable (module)">DRbObservable</a>,
    <a href="DRb/DRbProtocol.html" title="DRb::DRbProtocol (module)">DRbProtocol</a>,
    <a href="DRb/DRbUndumped.html" title="DRb::DRbUndumped (module)">DRbUndumped</a>
      </div>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <div class='box_max'>
        <a href="DRb/DRbArray.html" title="DRb::DRbArray (class)">DRbArray</a>,
    <a href="DRb/DRbConn.html" title="DRb::DRbConn (class)">DRbConn</a>,
    <a href="DRb/DRbIdConv.html" title="DRb::DRbIdConv (class)">DRbIdConv</a>,
    <a href="DRb/DRbMessage.html" title="DRb::DRbMessage (class)">DRbMessage</a>,
    <a href="DRb/DRbObject.html" title="DRb::DRbObject (class)">DRbObject</a>,
    <a href="DRb/DRbSSLSocket.html" title="DRb::DRbSSLSocket (class)">DRbSSLSocket</a>,
    <a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a>,
    <a href="DRb/DRbTCPSocket.html" title="DRb::DRbTCPSocket (class)">DRbTCPSocket</a>,
    <a href="DRb/DRbUNIXSocket.html" title="DRb::DRbUNIXSocket (class)">DRbUNIXSocket</a>,
    <a href="DRb/DRbURIOption.html" title="DRb::DRbURIOption (class)">DRbURIOption</a>,
    <a href="DRb/DRbUnknown.html" title="DRb::DRbUnknown (class)">DRbUnknown</a>,
    <a href="DRb/ExtServ.html" title="DRb::ExtServ (class)">ExtServ</a>,
    <a href="DRb/ExtServManager.html" title="DRb::ExtServManager (class)">ExtServManager</a>,
    <a href="DRb/GW.html" title="DRb::GW (class)">GW</a>,
    <a href="DRb/GWIdConv.html" title="DRb::GWIdConv (class)">GWIdConv</a>,
    <a href="DRb/TimerIdConv.html" title="DRb::TimerIdConv (class)">TimerIdConv</a>
      </div>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Child Exceptions:</td>
    <td>
      <div class='box_max'>
        <a href="DRb/DRbBadScheme.html" title="DRb::DRbBadScheme (class)">DRbBadScheme</a>,
    <a href="DRb/DRbBadURI.html" title="DRb::DRbBadURI (class)">DRbBadURI</a>,
    <a href="DRb/DRbConnError.html" title="DRb::DRbConnError (class)">DRbConnError</a>,
    <a href="DRb/DRbError.html" title="DRb::DRbError (class)">DRbError</a>,
    <a href="DRb/DRbRemoteError.html" title="DRb::DRbRemoteError (class)">DRbRemoteError</a>,
    <a href="DRb/DRbServerNotFound.html" title="DRb::DRbServerNotFound (class)">DRbServerNotFound</a>,
    <a href="DRb/DRbUnknownError.html" title="DRb::DRbUnknownError (class)">DRbUnknownError</a>
      </div>
    </td>
  </tr>




  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
<a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/eq.rb#L2'>lib/drb/eq.rb</a><span class='defines'>,<br /><a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L348'>lib/drb/drb.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/extserv.rb#L10'>lib/drb/extserv.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/extservm.rb#L11'>lib/drb/extservm.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/gw.rb#L5'>lib/drb/gw.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/invokemethod.rb#L4'>lib/drb/invokemethod.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/observer.rb#L4'>lib/drb/observer.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/ssl.rb#L7'>lib/drb/ssl.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/timeridconv.rb#L5'>lib/drb/timeridconv.rb</a>,<br/> <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/unix.rb#L8'>lib/drb/unix.rb</a></span>
</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>dRuby is a distributed object system for Ruby.  It is written in pure Ruby
and uses its own protocol.  No add-in services are needed beyond those
provided by the Ruby runtime, such as TCP sockets.  It does not rely on or
interoperate with other distributed object systems such as CORBA, RMI, or
.NET.</p>

<p>dRuby allows methods to be called in one Ruby process upon a Ruby object
located in another Ruby process, even on another machine. References to
objects can be passed between processes.  Method arguments and return
values are dumped and loaded in marshalled format.  All of this is done
transparently to both the caller of the remote method and the object that
it is called upon.</p>

<p>An object in a remote process is locally represented by a <a href="DRb/DRbObject.html" title="DRb::DRbObject (class)">DRbObject</a>
instance.  This acts as a sort of proxy for the remote object.  Methods
called upon this DRbObject instance are forwarded to its remote object. 
This is arranged dynamically at run time.  There are no statically declared
interfaces for remote objects, such as CORBA&#39;s IDL.</p>

<p>dRuby calls made into a process are handled by a <a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a> instance
within that process.  This reconstitutes the method call, invokes it upon
the specified local object, and returns the value to the remote caller. 
Any object can receive calls over dRuby.  There is no need to implement a
special interface, or mixin special functionality.  Nor, in the general
case, does an object need to explicitly register itself with a DRbServer in
order to receive dRuby calls.</p>

<p>One process wishing to make dRuby calls upon another process must somehow
obtain an initial reference to an object in the remote process by some
means other than as the return value of a remote method call, as there is
initially no remote object reference it can invoke a method upon.  This is
done by attaching to the server by URI.  Each DRbServer binds itself to a
URI such as &#39;druby://example.com:8787&#39;.  A DRbServer can have an
object attached to it that acts as the server&#39;s <strong>front</strong>
<strong>object</strong>.  A DRbObject can be explicitly created from the
server&#39;s URI.  This DRbObject&#39;s remote object will be the
server&#39;s front object.  This front object can then return references to
other Ruby objects in the DRbServer&#39;s process.</p>

<p>Method calls made over dRuby behave largely the same as normal Ruby method
calls made within a process.  Method calls with blocks are supported, as
are raising exceptions.  In addition to a method&#39;s standard errors, a
dRuby call may also raise one of the dRuby-specific errors, all of which
are subclasses of <a href="DRb/DRbError.html" title="DRb::DRbError (class)">DRbError</a>.</p>

<p>Any type of object can be passed as an argument to a dRuby call or returned
as its return value.  By default, such objects are dumped or marshalled at
the local end, then loaded or unmarshalled at the remote end.  The remote
end therefore receives a copy of the local object, not a distributed
reference to it; methods invoked upon this copy are executed entirely in
the remote process, not passed on to the local original.  This has
semantics similar to pass-by-value.</p>

<p>However, if an object cannot be marshalled, a dRuby reference to it is
passed or returned instead.  This will turn up at the remote end as a
DRbObject instance.  All methods invoked upon this remote proxy are
forwarded to the local object, as described in the discussion of
DRbObjects.  This has semantics similar to the normal Ruby
pass-by-reference.</p>

<p>The easiest way to signal that we want an otherwise marshallable object to
be passed or returned as a DRbObject reference, rather than marshalled and
sent as a copy, is to include the <a href="DRb/DRbUndumped.html" title="DRb::DRbUndumped (module)">DRbUndumped</a> mixin module.</p>

<p>dRuby supports calling remote methods with blocks.  As blocks (or rather
the Proc objects that represent them) are not marshallable, the block
executes in the local, not the remote, context.  Each value yielded to the
block is passed from the remote object to the local block, then the value
returned by each block invocation is passed back to the remote execution
context to be collected, before the collected values are finally returned
to the local context as the return value of the method invocation.</p>

<h3 id="label-Examples+of+usage">Examples of usage</h3>

<p>For more dRuby samples, see the <code>samples</code> directory in the full
dRuby distribution.</p>

<h4 id="label-dRuby+in+client-2Fserver+mode">dRuby in client/server mode</h4>

<p>This illustrates setting up a simple client-server drb system.  Run the
server and client code in different terminals, starting the server code
first.</p>

<h5 id="label-Server+code">Server code</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drb/drb</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># The URI for the server to connect to
</span><span class='const'>URI</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>druby://localhost:8787</span><span class='tstring_end'>&quot;</span></span>

<span class='kw'>class</span> <span class='const'>TimeServer</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_get_current_time'>get_current_time</span>
    <span class='kw'>return</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='kw'>end</span>

<span class='kw'>end</span>

<span class='comment'># The object that handles requests on the server
</span><span class='const'>FRONT_OBJECT</span><span class='op'>=</span><span class='const'>TimeServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='gvar'>$SAFE</span> <span class='op'>=</span> <span class='int'>1</span>   <span class='comment'># disable eval() and friends
</span>
<span class='const'>DRb</span><span class='period'>.</span><span class='id identifier rubyid_start_service'><a href="#start_service-class_method" title="DRb.start_service (method)">start_service</a></span><span class='lparen'>(</span><span class='const'>URI</span><span class='comma'>,</span> <span class='const'>FRONT_OBJECT</span><span class='rparen'>)</span>
<span class='comment'># Wait for the drb server thread to finish before exiting.
</span><span class='const'>DRb</span><span class='period'>.</span><span class='id identifier rubyid_thread'><a href="#thread-class_method" title="DRb.thread (method)">thread</a></span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
</code></pre>

<h5 id="label-Client+code">Client code</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drb/drb</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># The URI to connect to
</span><span class='const'>SERVER_URI</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>druby://localhost:8787</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Start a local DRbServer to handle callbacks.
</span><span class='comment'>#
</span><span class='comment'># Not necessary for this small example, but will be required
</span><span class='comment'># as soon as we pass a non-marshallable object as an argument
</span><span class='comment'># to a dRuby call.
</span><span class='comment'>#
</span><span class='comment'># Note: this must be called at least once per process to take any effect.
</span><span class='comment'># This is particularly important if your application forks.
</span><span class='const'>DRb</span><span class='period'>.</span><span class='id identifier rubyid_start_service'><a href="#start_service-class_method" title="DRb.start_service (method)">start_service</a></span>

<span class='id identifier rubyid_timeserver'>timeserver</span> <span class='op'>=</span> <span class='const'><a href="DRb/DRbObject.html" title="DRb::DRbObject (class)">DRbObject</a></span><span class='period'>.</span><span class='id identifier rubyid_new_with_uri'><a href="DRb/DRbObject.html#new_with_uri-class_method" title="DRb::DRbObject.new_with_uri (method)">new_with_uri</a></span><span class='lparen'>(</span><span class='const'>SERVER_URI</span><span class='rparen'>)</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_timeserver'>timeserver</span><span class='period'>.</span><span class='id identifier rubyid_get_current_time'>get_current_time</span>
</code></pre>

<h4 id="label-Remote+objects+under+dRuby">Remote objects under dRuby</h4>

<p>This example illustrates returning a reference to an object from a dRuby
call.  The Logger instances live in the server process.  References to them
are returned to the client process, where methods can be invoked upon them.
These methods are executed in the server process.</p>

<h5 id="label-Server+code">Server code</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drb/drb</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>URI</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>druby://localhost:8787</span><span class='tstring_end'>&quot;</span></span>

<span class='kw'>class</span> <span class='const'>Logger</span>

    <span class='comment'># Make dRuby send Logger instances as dRuby references,
</span>    <span class='comment'># not copies.
</span>    <span class='id identifier rubyid_include'>include</span> <span class='const'>DRb</span><span class='op'>::</span><span class='const'><a href="DRb/DRbUndumped.html" title="DRb::DRbUndumped (module)">DRbUndumped</a></span>

    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='rparen'>)</span>
        <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_n'>n</span>
        <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='id identifier rubyid_fname'>fname</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
            <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

<span class='kw'>end</span>

<span class='comment'># We have a central object for creating and retrieving loggers.
</span><span class='comment'># This retains a local reference to all loggers created.  This
</span><span class='comment'># is so an existing logger can be looked up by name, but also
</span><span class='comment'># to prevent loggers from being garbage collected.  A dRuby
</span><span class='comment'># reference to an object is not sufficient to prevent it being
</span><span class='comment'># garbage collected!
</span><span class='kw'>class</span> <span class='const'>LoggerFactory</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_bdir'>bdir</span><span class='rparen'>)</span>
        <span class='ivar'>@basedir</span> <span class='op'>=</span> <span class='id identifier rubyid_bdir'>bdir</span>
        <span class='ivar'>@loggers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_get_logger'>get_logger</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@loggers</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span> <span class='id identifier rubyid_name'>name</span>
            <span class='comment'># make the filename safe, then declare it to be so
</span>            <span class='id identifier rubyid_fname'>fname</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[.\/\\\:]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_untaint'>untaint</span>
            <span class='ivar'>@loggers</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='ivar'>@basedir</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_fname'>fname</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='kw'>return</span> <span class='ivar'>@loggers</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

<span class='kw'>end</span>

<span class='const'>FRONT_OBJECT</span><span class='op'>=</span><span class='const'>LoggerFactory</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/dlog</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='gvar'>$SAFE</span> <span class='op'>=</span> <span class='int'>1</span>   <span class='comment'># disable eval() and friends
</span>
<span class='const'>DRb</span><span class='period'>.</span><span class='id identifier rubyid_start_service'><a href="#start_service-class_method" title="DRb.start_service (method)">start_service</a></span><span class='lparen'>(</span><span class='const'>URI</span><span class='comma'>,</span> <span class='const'>FRONT_OBJECT</span><span class='rparen'>)</span>
<span class='const'>DRb</span><span class='period'>.</span><span class='id identifier rubyid_thread'><a href="#thread-class_method" title="DRb.thread (method)">thread</a></span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
</code></pre>

<h5 id="label-Client+code">Client code</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drb/drb</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>SERVER_URI</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>druby://localhost:8787</span><span class='tstring_end'>&quot;</span></span>

<span class='const'>DRb</span><span class='period'>.</span><span class='id identifier rubyid_start_service'><a href="#start_service-class_method" title="DRb.start_service (method)">start_service</a></span>

<span class='id identifier rubyid_log_service'>log_service</span><span class='op'>=</span><span class='const'>DRbObject</span><span class='period'>.</span><span class='id identifier rubyid_new_with_uri'>new_with_uri</span><span class='lparen'>(</span><span class='const'>SERVER_URI</span><span class='rparen'>)</span>

<span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>loga</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>logb</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>logc</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_logname'>logname</span><span class='op'>|</span>

    <span class='id identifier rubyid_logger'>logger</span><span class='op'>=</span><span class='id identifier rubyid_log_service'>log_service</span><span class='period'>.</span><span class='id identifier rubyid_get_logger'>get_logger</span><span class='lparen'>(</span><span class='id identifier rubyid_logname'>logname</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Goodbye, world!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=== EOT ===</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='kw'>end</span>
</code></pre>

<h3 id="label-Security">Security</h3>

<p>As with all network services, security needs to be considered when using
dRuby.  By allowing external access to a Ruby object, you are not only
allowing outside clients to call the methods you have defined for that
object, but by default to execute arbitrary Ruby code on your server. 
Consider the following:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># !!! UNSAFE CODE !!!
</span><span class='id identifier rubyid_ro'>ro</span> <span class='op'>=</span> <span class='const'><a href="DRb/DRbObject.html" title="DRb::DRbObject (class)">DRbObject</a></span><span class='op'>::</span><span class='id identifier rubyid_new_with_uri'><a href="DRb/DRbObject.html#new_with_uri-class_method" title="DRb::DRbObject.new_with_uri (method)">new_with_uri</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>druby://your.server.com:8989</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>class</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_ro'>ro</span>
  <span class='kw'>undef</span> <span class='symbol'>:instance_eval</span>  <span class='comment'># force call to be passed to remote object
</span><span class='kw'>end</span>
<span class='id identifier rubyid_ro'>ro</span><span class='period'>.</span><span class='id identifier rubyid_instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>`rm -rf *`</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>The dangers posed by instance_eval and friends are such that a DRbServer
should generally be run with $SAFE set to at least level 1.  This will
disable eval() and related calls on strings passed across the wire.  The
sample usage code given above follows this practice.</p>

<p>A DRbServer can be configured with an access control list to selectively
allow or deny access from specified IP addresses.  The main druby
distribution provides the ACL class for this purpose.  In general, this
mechanism should only be used alongside, rather than as a replacement for,
a good firewall.</p>

<h3 id="label-dRuby+internals">dRuby internals</h3>

<p>dRuby is implemented using three main components: a remote method call
marshaller/unmarshaller; a transport protocol; and an ID-to-object mapper. 
The latter two can be directly, and the first indirectly, replaced, in
order to provide different behaviour and capabilities.</p>

<p>Marshalling and unmarshalling of remote method calls is performed by a
<a href="DRb/DRbMessage.html" title="DRb::DRbMessage (class)">DRbMessage</a> instance.  This uses the Marshal module to dump the
method call before sending it over the transport layer, then reconstitute
it at the other end.  There is normally no need to replace this component,
and no direct way is provided to do so. However, it is possible to
implement an alternative marshalling scheme as part of an implementation of
the transport layer.</p>

<p>The transport layer is responsible for opening client and server network
connections and forwarding dRuby request across them. Normally, it uses
<a href="DRb/DRbMessage.html" title="DRb::DRbMessage (class)">DRbMessage</a> internally to manage marshalling and unmarshalling.  The
transport layer is managed by <a href="DRb/DRbProtocol.html" title="DRb::DRbProtocol (module)">DRbProtocol</a>.  Multiple protocols can
be installed in DRbProtocol at the one time; selection between them is
determined by the scheme of a dRuby URI.  The default transport protocol is
selected by the scheme &#39;druby:&#39;, and implemented by
<a href="DRb/DRbTCPSocket.html" title="DRb::DRbTCPSocket (class)">DRbTCPSocket</a>.  This uses plain TCP/IP sockets for communication.  An
alternative protocol, using UNIX domain sockets, is implemented by
<a href="DRb/DRbUNIXSocket.html" title="DRb::DRbUNIXSocket (class)">DRbUNIXSocket</a> in the file drb/unix.rb, and selected by the scheme
&#39;drbunix:&#39;.  A sample implementation over HTTP can be found in the
samples accompanying the main dRuby distribution.</p>

<p>The ID-to-object mapping component maps dRuby object ids to the objects
they refer to, and vice versa.  The implementation to use can be specified
as part of a DRb::DRbServer&#39;s configuration.  The default
implementation is provided by <a href="DRb/DRbIdConv.html" title="DRb::DRbIdConv (class)">DRbIdConv</a>.  It uses an object&#39;s
ObjectSpace id as its dRuby id.  This means that the dRuby reference to
that object only remains meaningful for the lifetime of the object&#39;s
process and the lifetime of the object within that process.  A modified
implementation is provided by <a href="DRb/TimerIdConv.html" title="DRb::TimerIdConv (class)">TimerIdConv</a> in the file
drb/timeridconv.rb.  This implementation retains a local reference to all
objects exported over dRuby for a configurable period of time (defaulting
to ten minutes), to prevent them being garbage-collected within this time. 
Another sample implementation is provided in sample/name.rb in the main
dRuby distribution.  This allows objects to specify their own id or “name”.
A dRuby reference can be made persistent across processes by having each
process register an object using the same dRuby name.</p>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#config-class_method" title=".config (class method)">.<strong>config</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Get the configuration of the current server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#current_server-class_method" title=".current_server (class method)">.<strong>current_server</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Get the &#39;current&#39; server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fetch_server-class_method" title=".fetch_server (class method)">.<strong>fetch_server</strong>(uri)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Retrieves the server with the given <code>uri</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#front-class_method" title=".front (class method)">.<strong>front</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Get the front object of the current server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#here%3F-class_method" title=".here? (class method)">.<strong>here?</strong>(uri)  &#x21d2; Boolean </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Is <code>uri</code> the URI for the current local server?</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#install_acl-class_method" title=".install_acl (class method)">.<strong>install_acl</strong>(acl)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Set the default ACL to <code>acl</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#install_id_conv-class_method" title=".install_id_conv (class method)">.<strong>install_id_conv</strong>(idconv)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Set the default id conversion object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#primary_server-class_method" title=".primary_server (class method)">.<strong>primary_server</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The primary local dRuby server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#primary_server%3D-class_method" title=".primary_server= (class method)">.<strong>primary_server=</strong>(value)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The primary local dRuby server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#regist_server-class_method" title=".regist_server (class method)">.<strong>regist_server</strong>(server)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Registers <code>server</code> with DRb.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#remove_server-class_method" title=".remove_server (class method)">.<strong>remove_server</strong>(server)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes <code>server</code> from the list of registered servers.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#start_service-class_method" title=".start_service (class method)">.<strong>start_service</strong>(uri = nil, front = nil, config = nil)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Start a dRuby server locally.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#stop_service-class_method" title=".stop_service (class method)">.<strong>stop_service</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Stop the local dRuby server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#thread-class_method" title=".thread (class method)">.<strong>thread</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Get the thread of the primary server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_id-class_method" title=".to_id (class method)">.<strong>to_id</strong>(obj)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Get a reference id for an object using the current server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_obj-class_method" title=".to_obj (class method)">.<strong>to_obj</strong>(ref)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Convert a reference into an object using the current server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#uri-class_method" title=".uri (class method)">.<strong>uri</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Get the URI defining the local dRuby space.</p>
</div>
      </span>
    </li>
  </ul>


<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="config-class_method">
  <h3 class='signature first'>
  .<strong>config</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get the configuration of the current server.</p>

<p>If there is no current server, this returns the default configuration. See
<a href="#current_server-instance_method" title="DRb#current_server (method)">#current_server</a> and <a href="DRb/DRbServer.html#make_config-class_method" title="DRb::DRbServer.make_config (method)">DRb::DRbServer.make_config</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1758'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1758
1759
1760
1761
1762</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1758</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span>
  <span class='id identifier rubyid_current_server'>current_server</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span>
<span class='kw'>rescue</span>
  <span class='const'><a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a></span><span class='period'>.</span><span class='id identifier rubyid_make_config'><a href="DRb/DRbServer.html#make_config-class_method" title="DRb::DRbServer.make_config (method)">make_config</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="current_server-class_method">
  <h3 class='signature'>
  .<strong>current_server</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get the &#39;current&#39; server.</p>

<p>In the context of execution taking place within the main thread of a dRuby
server (typically, as a result of a remote call on the server or one of its
objects), the current server is that server.  Otherwise, the current server
is the primary server.</p>

<p>If the above rule fails to find a server, a DRbServerNotFound error is
raised.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt><a href="DRb/DRbServerNotFound.html" title="DRb::DRbServerNotFound (class)">DRbServerNotFound</a></tt>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1715'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1715
1716
1717
1718
1719
1720</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1715</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_current_server'>current_server</span>
  <span class='id identifier rubyid_drb'>drb</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DRb</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_drb'>drb</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_drb'>drb</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>server</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_drb'>drb</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>server</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='ivar'>@primary_server</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="DRb/DRbServerNotFound.html" title="DRb::DRbServerNotFound (class)">DRbServerNotFound</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_server'>server</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_server'>server</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="fetch_server-class_method">
  <h3 class='signature'>
  .<strong>fetch_server</strong>(uri)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Retrieves the server with the given <code>uri</code>.</p>

<p>See also regist_server and remove_server.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1855'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1855
1856
1857</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1855</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_server'>fetch_server</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='ivar'>@server</span><span class='lbracket'>[</span><span class='id identifier rubyid_uri'>uri</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="front-class_method">
  <h3 class='signature'>
  .<strong>front</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get the front object of the current server.</p>

<p>This raises a DRbServerNotFound error if there is no current server. See
<a href="#current_server-instance_method" title="DRb#current_server (method)">#current_server</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1769'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1769
1770
1771</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1769</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_front'>front</span>
  <span class='id identifier rubyid_current_server'>current_server</span><span class='period'>.</span><span class='id identifier rubyid_front'>front</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="here?-class_method">
  <h3 class='signature'>
  .<strong>here?</strong>(uri)  &#x21d2; <tt>Boolean</tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Is <code>uri</code> the URI for the current local server?</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1748'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1748
1749
1750
1751</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1748</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_here?'>here?</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_server'>current_server</span><span class='period'>.</span><span class='id identifier rubyid_here?'>here?</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='kw'>false</span>
  <span class='comment'># (current_server.uri rescue nil) == uri
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="install_acl-class_method">
  <h3 class='signature'>
  .<strong>install_acl</strong>(acl)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Set the default ACL to <code>acl</code>.</p>

<p>See <a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a>.default_acl.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1814'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1814
1815
1816</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1814</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install_acl'>install_acl</span><span class='lparen'>(</span><span class='id identifier rubyid_acl'>acl</span><span class='rparen'>)</span>
  <span class='const'><a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a></span><span class='period'>.</span><span class='id identifier rubyid_default_acl'><a href="DRb/DRbServer.html#default_acl-class_method" title="DRb::DRbServer.default_acl (method)">default_acl</a></span><span class='lparen'>(</span><span class='id identifier rubyid_acl'>acl</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="install_id_conv-class_method">
  <h3 class='signature'>
  .<strong>install_id_conv</strong>(idconv)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Set the default id conversion object.</p>

<p>This is expected to be an instance such as <a href="DRb/DRbIdConv.html" title="DRb::DRbIdConv (class)">DRbIdConv</a> that responds
to <a href="#to_id-instance_method" title="DRb#to_id (method)">#to_id</a> and <a href="#to_obj-instance_method" title="DRb#to_obj (method)">#to_obj</a> that can convert objects to and from DRb
references.</p>

<p>See <a href="DRb/DRbServer.html#default_id_conv-class_method" title="DRb::DRbServer.default_id_conv (method)">DRb::DRbServer.default_id_conv</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1806'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1806
1807
1808</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1806</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install_id_conv'>install_id_conv</span><span class='lparen'>(</span><span class='id identifier rubyid_idconv'>idconv</span><span class='rparen'>)</span>
  <span class='const'><a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a></span><span class='period'>.</span><span class='id identifier rubyid_default_id_conv'><a href="DRb/DRbServer.html#default_id_conv-class_method" title="DRb::DRbServer.default_id_conv (method)">default_id_conv</a></span><span class='lparen'>(</span><span class='id identifier rubyid_idconv'>idconv</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="primary_server-class_method">
  <h3 class='signature'>
  .<strong>primary_server</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The primary local dRuby server.</p>

<p>This is the server created by the <a href="#start_service-instance_method" title="DRb#start_service (method)">#start_service</a> call.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1702'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1702</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1702</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:primary_server</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="primary_server=-class_method">
  <h3 class='signature'>
  .<strong>primary_server=</strong>(value)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The primary local dRuby server.</p>

<p>This is the server created by the <a href="#start_service-instance_method" title="DRb#start_service (method)">#start_service</a> call.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1702'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1702</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1702</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:primary_server</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="regist_server-class_method">
  <h3 class='signature'>
  .<strong>regist_server</strong>(server)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Registers <code>server</code> with DRb.</p>

<p>This is called when a new <a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a> is created.</p>

<p>If there is no primary server then <code>server</code> becomes the primary
server.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby">require &#39;drb&#39;

s = {DRb::DRbServer}.new # automatically calls regist_server
{DRb.fetch_server} s.uri #=&gt; {#&lt;}DRb::DRbServer:0x...&gt;</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1838'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1838
1839
1840
1841
1842
1843</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1838</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_regist_server'>regist_server</span><span class='lparen'>(</span><span class='id identifier rubyid_server'>server</span><span class='rparen'>)</span>
  <span class='ivar'>@server</span><span class='lbracket'>[</span><span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_uri'>uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_server'>server</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@primary_server</span> <span class='op'>=</span> <span class='id identifier rubyid_server'>server</span> <span class='kw'>unless</span> <span class='ivar'>@primary_server</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="remove_server-class_method">
  <h3 class='signature'>
  .<strong>remove_server</strong>(server)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes <code>server</code> from the list of registered servers.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1847'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1847
1848
1849</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1847</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_server'>remove_server</span><span class='lparen'>(</span><span class='id identifier rubyid_server'>server</span><span class='rparen'>)</span>
  <span class='ivar'>@server</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="start_service-class_method">
  <h3 class='signature'>
  .<strong>start_service</strong>(uri = nil, front = nil, config = nil)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Start a dRuby server locally.</p>

<p>The new dRuby server will become the primary server, even if another server
is currently the primary server.</p>

<p><code>uri</code> is the URI for the server to bind to.  If nil, the server
will bind to random port on the default local host name and use the default
dRuby protocol.</p>

<p><code>front</code> is the server&#39;s front object.  This may be nil.</p>

<p><code>config</code> is the configuration for the new server.  This may be
nil.</p>

<p>See <a href="DRb/DRbServer.html#new-class_method" title="DRb::DRbServer.new (method)">DRb::DRbServer.new</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1694'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1694
1695
1696</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1694</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_service'>start_service</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_front'>front</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@primary_server</span> <span class='op'>=</span> <span class='const'><a href="DRb/DRbServer.html" title="DRb::DRbServer (class)">DRbServer</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="DRb/DRbServer.html#new-class_method" title="DRb::DRbServer.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_front'>front</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="stop_service-class_method">
  <h3 class='signature'>
  .<strong>stop_service</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Stop the local dRuby server.</p>

<p>This operates on the primary server.  If there is no primary server
currently running, it is a noop.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1727'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1727
1728
1729
1730</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1727</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stop_service'>stop_service</span>
  <span class='ivar'>@primary_server</span><span class='period'>.</span><span class='id identifier rubyid_stop_service'>stop_service</span> <span class='kw'>if</span> <span class='ivar'>@primary_server</span>
  <span class='ivar'>@primary_server</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="thread-class_method">
  <h3 class='signature'>
  .<strong>thread</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get the thread of the primary server.</p>

<p>This returns nil if there is no primary server.  See <a href="#primary_server-instance_method" title="DRb#primary_server (method)">#primary_server</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1795'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1795
1796
1797</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1795</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_thread'>thread</span>
  <span class='ivar'>@primary_server</span> <span class='op'>?</span> <span class='ivar'>@primary_server</span><span class='period'>.</span><span class='id identifier rubyid_thread'>thread</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_id-class_method">
  <h3 class='signature'>
  .<strong>to_id</strong>(obj)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get a reference id for an object using the current server.</p>

<p>This raises a DRbServerNotFound error if there is no current server. See
<a href="#current_server-instance_method" title="DRb#current_server (method)">#current_server</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1786'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1786
1787
1788</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1786</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_id'>to_id</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_server'>current_server</span><span class='period'>.</span><span class='id identifier rubyid_to_id'>to_id</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_obj-class_method">
  <h3 class='signature'>
  .<strong>to_obj</strong>(ref)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Convert a reference into an object using the current server.</p>

<p>This raises a DRbServerNotFound error if there is no current server. See
<a href="#current_server-instance_method" title="DRb#current_server (method)">#current_server</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1778'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1778
1779
1780</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1778</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_obj'>to_obj</span><span class='lparen'>(</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_server'>current_server</span><span class='period'>.</span><span class='id identifier rubyid_to_obj'>to_obj</span><span class='lparen'>(</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="uri-class_method">
  <h3 class='signature'>
  .<strong>uri</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get the URI defining the local dRuby space.</p>

<p>This is the URI of the current server.  See <a href="#current_server-instance_method" title="DRb#current_server (method)">#current_server</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/drb/drb.rb#L1736'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1736
1737
1738
1739
1740
1741
1742
1743
1744</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1736</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uri'>uri</span>
  <span class='id identifier rubyid_drb'>drb</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DRb</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_drb'>drb</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_drb'>drb</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>client</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_client'>client</span>
    <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_uri'>uri</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_uri'>uri</span> <span class='kw'>if</span> <span class='id identifier rubyid_uri'>uri</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_current_server'>current_server</span><span class='period'>.</span><span class='id identifier rubyid_uri'>uri</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>