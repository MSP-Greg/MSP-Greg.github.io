<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Net::SMTP &mdash; net/smtp Ruby-2.3.2 p137</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Net::SMTP",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.3.2</a> &raquo; 
          <a href='../index.html'>net/smtp</a> &raquo; 
          <a href='../_index.html'>Index (S)</a> &raquo; 
        #  <a href="../Net.html" title="Net (module)">Net</a> &raquo; 
          <span class='title'>SMTP</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Net::SMTP</h1>

<div class="box_info">
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class='inheritName'>Object</span>
        <ul class='fullTree'>
          <li>Object</li>
            <li class='next'>Net::SMTP</li>
        </ul>
        <a href='#' class='inheritanceTree'>show all</a>
    </dd>
  </dl>



  <dl>
    <dt>Defined in:</dt>
    <dd>net/smtp.rb</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h3 id="label-What+is+This+Library-3F">What is This Library?</h3>

<p>This library provides functionality to send internet mail via SMTP, the
Simple Mail Transfer Protocol. For details of SMTP itself, see [RFC2821]
(<a
href="http://www.ietf.org/rfc/rfc2821.txt">www.ietf.org/rfc/rfc2821.txt</a>).</p>

<h3 id="label-What+is+This+Library+NOT-3F">What is This Library NOT?</h3>

<p>This library does NOT provide functions to compose internet mails. You must
create them by yourself. If you want better mail support, try RubyMail or
TMail or search for alternatives in <a
href="https://rubygems.org/">RubyGems.org</a> or <a
href="https://www.ruby-toolbox.com/">The Ruby Toolbox</a>.</p>

<p>FYI: the official documentation on internet mail is: [RFC2822] (<a
href="http://www.ietf.org/rfc/rfc2822.txt">www.ietf.org/rfc/rfc2822.txt</a>).</p>

<h3 id="label-Examples">Examples</h3>

<h4 id="label-Sending+Messages">Sending Messages</h4>

<p>You must open a connection to an SMTP server before sending messages. The
first argument is the address of your SMTP server, and the second argument
is the port number. Using <a href="#start-class_method" title="Net::SMTP.start (method)">SMTP.start</a> with a block is the simplest way to
do this. This way, the SMTP connection is closed automatically after the
block is executed.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>net/smtp</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='comment'># Use the SMTP object smtp only in this block.
</span><span class='kw'>end</span>
</code></pre>

<p>Replace &#39;your.smtp.server&#39; with your SMTP server. Normally your
system manager or internet provider supplies a server for you.</p>

<p>Then you can send messages.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_msgstr'>msgstr</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;END_OF_MESSAGE</span>
<span class='tstring_content'>From: Your Name &lt;your@mail.address&gt;
To: Destination Address &lt;someone@example.com&gt;
Subject: test message
Date: Sat, 23 Jun 2001 16:26:43 +0900
Message-Id: &lt;unique.message.id.string@example.com&gt;

This is a test message.
</span><span class='heredoc_end'>END_OF_MESSAGE
</span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>net/smtp</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your@mail.address</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>his_address@example.com</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<h4 id="label-Closing+the+Session">Closing the Session</h4>

<p>You MUST close the SMTP session after sending messages, by calling the
<a href="#finish-instance_method" title="Net::SMTP#finish (method)">#finish</a> method:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># using SMTP#finish
</span><span class='id identifier rubyid_smtp'>smtp</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span>
<span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@address</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>to@address</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_finish'>finish</span>
</code></pre>

<p>You can also use the block form of SMTP.start/SMTP#start.  This closes the
SMTP session automatically:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># using block form of SMTP.start
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@address</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>to@address</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>I strongly recommend this scheme.  This form is simpler and more robust.</p>

<h4 id="label-HELO+domain">HELO domain</h4>

<p>In almost all situations, you must provide a third argument to
SMTP.start/SMTP#start. This is the domain name which you are on (the host
to send mail from). It is called the “HELO domain”. The SMTP server will
judge whether it should send or reject the SMTP session by inspecting the
HELO domain.</p>

<pre class="code ruby"><code class="ruby">Net::SMTP.start(&#39;your.smtp.server&#39;, 25,
                &#39;mail.from.domain&#39;) { |smtp| ... }</code></pre>

<h4 id="label-SMTP+Authentication">SMTP Authentication</h4>

<p>The <a href="" title="Net::SMTP (class)">SMTP</a> class supports three authentication schemes; PLAIN, LOGIN
and CRAM MD5.  (SMTP Authentication: [RFC2554]) To use SMTP authentication,
pass extra arguments to SMTP.start/SMTP#start.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># PLAIN
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.from.domain</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Your Account</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Your Password</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:plain</span><span class='rparen'>)</span>
<span class='comment'># LOGIN
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.from.domain</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Your Account</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Your Password</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:login</span><span class='rparen'>)</span>

<span class='comment'># CRAM MD5
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.from.domain</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Your Account</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Your Password</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:cram_md5</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
<h2>Defined Under Namespace</h2>

  <p class='children'><strong class='classes'>Classes:</strong>
    <a href="SMTP/Response.html" title="Net::SMTP::Response (class)">Response</a>
  </p>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='CRAM_BUFSIZE-constant'>
      CRAM_BUFSIZE =
    </dt>
    <dd>
            <pre class='code'><span class='int'>64</span></pre>
    </dd>
    <dt id='DEFAULT_AUTH_TYPE-constant'>
      DEFAULT_AUTH_TYPE =
    </dt>
    <dd>
            <pre class='code'><span class='symbol'>:plain</span></pre>
    </dd>
    <dt id='IMASK-constant'>
      IMASK =
    </dt>
    <dd>
            <pre class='code'><span class='int'>0x36</span></pre>
    </dd>
    <dt id='OMASK-constant'>
      OMASK =
    </dt>
    <dd>
            <pre class='code'><span class='int'>0x5c</span></pre>
    </dd>
    <dt id='Revision-constant'>
      Revision =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>%q$</span><span class='tstring_content'>Revision</span><span class='tstring_end'>$</span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span></pre>
    </dd>
  </dl>



<h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#address-instance_method" title="#address (instance method)">#<strong>address</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The address of the SMTP server to connect to.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#esmtp-instance_method" title="#esmtp (instance method)">#<strong>esmtp</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Set whether to use ESMTP or not.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#open_timeout-instance_method" title="#open_timeout (instance method)">#<strong>open_timeout</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Seconds to wait while attempting to open a connection.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#port-instance_method" title="#port (instance method)">#<strong>port</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The port number of the SMTP server to connect to.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#read_timeout-instance_method" title="#read_timeout (instance method)">#<strong>read_timeout</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Seconds to wait while reading one block (by one read(2) call).</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#default_port-class_method" title=".default_port (class method)">.<strong>default_port</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The default SMTP port number, 25.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#default_ssl_context-class_method" title=".default_ssl_context (class method)">.<strong>default_ssl_context</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#default_ssl_port-class_method" title=".default_ssl_port (class method)">.<strong>default_ssl_port</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The default SMTPS port number, 465.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#default_submission_port-class_method" title=".default_submission_port (class method)">.<strong>default_submission_port</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The default mail submission port number, 587.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#default_tls_port-class_method" title=".default_tls_port (class method)">.<strong>default_tls_port</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The default SMTPS port number, 465.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(address, port = nil)  &#x21d2; SMTP </a>
      </span>
      <span class='note title constructor'>constructor</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new <a href="" title="Net::SMTP (class)">SMTP</a> object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#start-class_method" title=".start (class method)">.<strong>start</strong>(address, port = nil, helo = &#39;localhost&#39;, user = nil, secret = nil, authtype = nil, &amp;block)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new <a href="" title="Net::SMTP (class)">SMTP</a> object and connects to the server.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#auth_capable%3F-instance_method" title="#auth_capable? (instance method)">#<strong>auth_capable?</strong>(type)  &#x21d2; Boolean </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#auth_cram_md5-instance_method" title="#auth_cram_md5 (instance method)">#<strong>auth_cram_md5</strong>(user, secret)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#auth_login-instance_method" title="#auth_login (instance method)">#<strong>auth_login</strong>(user, secret)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#auth_method-instance_method" title="#auth_method (instance method)">#<strong>auth_method</strong>(type)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#auth_plain-instance_method" title="#auth_plain (instance method)">#<strong>auth_plain</strong>(user, secret)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#authenticate-instance_method" title="#authenticate (instance method)">#<strong>authenticate</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#base64_encode-instance_method" title="#base64_encode (instance method)">#<strong>base64_encode</strong>(str)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#capable%3F-instance_method" title="#capable? (instance method)">#<strong>capable?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#capable_auth_types-instance_method" title="#capable_auth_types (instance method)">#<strong>capable_auth_types</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns supported authentication methods on this server.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#capable_cram_md5_auth%3F-instance_method" title="#capable_cram_md5_auth? (instance method)">#<strong>capable_cram_md5_auth?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if server advertises AUTH CRAM-MD5.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#capable_login_auth%3F-instance_method" title="#capable_login_auth? (instance method)">#<strong>capable_login_auth?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if server advertises AUTH LOGIN.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#capable_plain_auth%3F-instance_method" title="#capable_plain_auth? (instance method)">#<strong>capable_plain_auth?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if server advertises AUTH PLAIN.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#capable_starttls%3F-instance_method" title="#capable_starttls? (instance method)">#<strong>capable_starttls?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if server advertises STARTTLS.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_auth_args-instance_method" title="#check_auth_args (instance method)">#<strong>check_auth_args</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_auth_continue-instance_method" title="#check_auth_continue (instance method)">#<strong>check_auth_continue</strong>(res)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_auth_method-instance_method" title="#check_auth_method (instance method)">#<strong>check_auth_method</strong>(type)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_auth_response-instance_method" title="#check_auth_response (instance method)">#<strong>check_auth_response</strong>(res)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_continue-instance_method" title="#check_continue (instance method)">#<strong>check_continue</strong>(res)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_response-instance_method" title="#check_response (instance method)">#<strong>check_response</strong>(res)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#cram_md5_response-instance_method" title="#cram_md5_response (instance method)">#<strong>cram_md5_response</strong>(secret, challenge)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>CRAM-MD5: [RFC2195]</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#cram_secret-instance_method" title="#cram_secret (instance method)">#<strong>cram_secret</strong>(secret, mask)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#critical-instance_method" title="#critical (instance method)">#<strong>critical</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#data-instance_method" title="#data (instance method)">#<strong>data</strong>(msgstr = nil, &amp;block)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>This method sends a message.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#debug_output%3D-instance_method" title="#debug_output= (instance method)">#<strong>debug_output=</strong>(arg)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>WARNING: This method causes serious security holes.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#disable_ssl-instance_method" title="#disable_ssl (instance method)">#<strong>disable_ssl</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Disables SMTP/TLS for this object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#disable_starttls-instance_method" title="#disable_starttls (instance method)">#<strong>disable_starttls</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Disables SMTP/TLS (STARTTLS) for this object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#disable_tls-instance_method" title="#disable_tls (instance method)">#<strong>disable_tls</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Disables SMTP/TLS for this object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#do_finish-instance_method" title="#do_finish (instance method)">#<strong>do_finish</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#do_helo-instance_method" title="#do_helo (instance method)">#<strong>do_helo</strong>(helo_domain)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#do_start-instance_method" title="#do_start (instance method)">#<strong>do_start</strong>(helo_domain, user, secret, authtype)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ehlo-instance_method" title="#ehlo (instance method)">#<strong>ehlo</strong>(domain)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#enable_ssl-instance_method" title="#enable_ssl (instance method)">#<strong>enable_ssl</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for this object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#enable_starttls-instance_method" title="#enable_starttls (instance method)">#<strong>enable_starttls</strong>(context = SMTP.default_ssl_context)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enables SMTP/TLS (STARTTLS) for this object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#enable_starttls_auto-instance_method" title="#enable_starttls_auto (instance method)">#<strong>enable_starttls_auto</strong>(context = SMTP.default_ssl_context)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enables SMTP/TLS (STARTTLS) for this object if server accepts.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#enable_tls-instance_method" title="#enable_tls (instance method)">#<strong>enable_tls</strong>(context = SMTP.default_ssl_context)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for this object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#esmtp%3F-instance_method" title="#esmtp? (instance method)">#<strong>esmtp?</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Set whether to use ESMTP or not.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#finish-instance_method" title="#finish (instance method)">#<strong>finish</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Finishes the SMTP session and closes TCP connection.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#get_response-instance_method" title="#get_response (instance method)">#<strong>get_response</strong>(reqline)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getok-instance_method" title="#getok (instance method)">#<strong>getok</strong>(reqline)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#helo-instance_method" title="#helo (instance method)">#<strong>helo</strong>(domain)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Provide human-readable stringification of class state.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#logging-instance_method" title="#logging (instance method)">#<strong>logging</strong>(msg)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mailfrom-instance_method" title="#mailfrom (instance method)">#<strong>mailfrom</strong>(from_addr)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new_internet_message_io-instance_method" title="#new_internet_message_io (instance method)">#<strong>new_internet_message_io</strong>(s)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#open_message_stream-instance_method" title="#open_message_stream (instance method)">#<strong>open_message_stream</strong>(from_addr, *to_addrs, &amp;block)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Opens a message writer stream and gives it to the block.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#quit-instance_method" title="#quit (instance method)">#<strong>quit</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#rcptto-instance_method" title="#rcptto (instance method)">#<strong>rcptto</strong>(to_addr)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#rcptto_list-instance_method" title="#rcptto_list (instance method)">#<strong>rcptto_list</strong>(to_addrs)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ready-instance_method" title="#ready (instance method)">#<strong>ready</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Opens a message writer stream and gives it to the block.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#recv_response-instance_method" title="#recv_response (instance method)">#<strong>recv_response</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#rset-instance_method" title="#rset (instance method)">#<strong>rset</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Aborts the current mail transaction</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_mail-instance_method" title="#send_mail (instance method)">#<strong>send_mail</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sends <code>msgstr</code> as a message.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_message-instance_method" title="#send_message (instance method)">#<strong>send_message</strong>(msgstr, from_addr, *to_addrs)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sends <code>msgstr</code> as a message.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sendmail-instance_method" title="#sendmail (instance method)">#<strong>sendmail</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sends <code>msgstr</code> as a message.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#set_debug_output-instance_method" title="#set_debug_output (instance method)">#<strong>set_debug_output</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>WARNING: This method causes serious security holes.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ssl%3F-instance_method" title="#ssl? (instance method)">#<strong>ssl?</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if this object uses SMTP/TLS (SMTPS).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ssl_socket-instance_method" title="#ssl_socket (instance method)">#<strong>ssl_socket</strong>(socket, context)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#start-instance_method" title="#start (instance method)">#<strong>start</strong>(helo = &#39;localhost&#39;, user = nil, secret = nil, authtype = nil)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Opens a TCP connection and starts the SMTP session.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#started%3F-instance_method" title="#started? (instance method)">#<strong>started?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p><code>true</code> if the SMTP session has been started.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#starttls-instance_method" title="#starttls (instance method)">#<strong>starttls</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#starttls%3F-instance_method" title="#starttls? (instance method)">#<strong>starttls?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns truth value if this object uses STARTTLS.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#starttls_always%3F-instance_method" title="#starttls_always? (instance method)">#<strong>starttls_always?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if this object uses STARTTLS.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#starttls_auto%3F-instance_method" title="#starttls_auto? (instance method)">#<strong>starttls_auto?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if this object uses STARTTLS when server advertises STARTTLS.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tcp_socket-instance_method" title="#tcp_socket (instance method)">#<strong>tcp_socket</strong>(address, port)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tls%3F-instance_method" title="#tls? (instance method)">#<strong>tls?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>true if this object uses SMTP/TLS (SMTPS).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tlsconnect-instance_method" title="#tlsconnect (instance method)">#<strong>tlsconnect</strong>(s)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>

<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(address, port = nil)  &#x21d2; <tt><a href="" title="Net::SMTP (class)">SMTP</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new <a href="" title="Net::SMTP (class)">Net::SMTP</a> object.</p>

<p><code>address</code> is the hostname or ip address of your SMTP server. 
<code>port</code> is the port to connect to; it defaults to port 25.</p>

<p>This method does not open the TCP connection.  You can use <a href="#start-class_method" title="Net::SMTP.start (method)">start</a>
instead of <a href="#new-class_method" title="Net::SMTP.new (method)">new</a> if you want to do everything at once.  Otherwise,
follow <a href="#new-class_method" title="Net::SMTP.new (method)">new</a> with <a href="#start-instance_method" title="Net::SMTP#start (method)">#start</a>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


211
212
213
214
215
216
217
218
219
220
221
222
223
224
225</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 211</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
      <span class='ivar'>@address</span> <span class='op'>=</span> <span class='id identifier rubyid_address'>address</span>
      <span class='ivar'>@port</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_port'>port</span> <span class='op'>||</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_port'>default_port</span><span class='rparen'>)</span>
      <span class='ivar'>@esmtp</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='ivar'>@started</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@open_timeout</span> <span class='op'>=</span> <span class='int'>30</span>
      <span class='ivar'>@read_timeout</span> <span class='op'>=</span> <span class='int'>60</span>
      <span class='ivar'>@error_occurred</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@debug_output</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='ivar'>@tls</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="address-instance_method">
  <h3 class='signature first'>
  #<strong>address</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The address of the SMTP server to connect to.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


360</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 360</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:address</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="esmtp-instance_method">
  <h3 class='signature'>
  #<strong>esmtp</strong>  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>esmtp?</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Set whether to use ESMTP or not.  This should be done before calling
<a href="#start-instance_method" title="Net::SMTP#start (method)">#start</a>.  Note that if <a href="#start-instance_method" title="Net::SMTP#start (method)">#start</a> is called in ESMTP mode, and the
connection fails due to a ProtocolError, the SMTP object will automatically
switch to plain SMTP mode and retry (but not vice versa).</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


239</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 239</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:esmtp</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="open_timeout-instance_method">
  <h3 class='signature'>
  #<strong>open_timeout</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Seconds to wait while attempting to open a connection. If the connection
cannot be opened within this time, a OpenTimeout is raised. The
default value is 30 seconds.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


368</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 368</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:open_timeout</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="port-instance_method">
  <h3 class='signature'>
  #<strong>port</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The port number of the SMTP server to connect to.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


363</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 363</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:port</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="read_timeout-instance_method">
  <h3 class='signature'>
  #<strong>read_timeout</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Seconds to wait while reading one block (by one read(2) call). If the
read(2) call does not complete within this time, a ReadTimeout is
raised. The default value is 60 seconds.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


373</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 373</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:read_timeout</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="default_port-class_method">
  <h3 class='signature first'>
  .<strong>default_port</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The default SMTP port number, 25.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


178
179
180</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 178</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_port'>default_port</span>
      <span class='int'>25</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="default_ssl_context-class_method">
  <h3 class='signature'>
  .<strong>default_ssl_context</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


196
197
198</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 196</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_ssl_context'>default_ssl_context</span>
      <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLContext</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="default_ssl_port-class_method">
  <h3 class='signature'>
  .<strong>default_ssl_port</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The default SMTPS port number, 465.</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


193</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 193</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_default_ssl_port'>default_ssl_port</span> <span class='id identifier rubyid_default_tls_port'>default_tls_port</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="default_submission_port-class_method">
  <h3 class='signature'>
  .<strong>default_submission_port</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The default mail submission port number, 587.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


183
184
185</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 183</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_submission_port'>default_submission_port</span>
      <span class='int'>587</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="default_tls_port-class_method">
  <h3 class='signature'>
  .<strong>default_tls_port</strong>  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>default_ssl_port</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The default SMTPS port number, 465.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


188
189
190</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 188</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_tls_port'>default_tls_port</span>
      <span class='int'>465</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="start-class_method">
  <h3 class='signature'>
  .<strong>start</strong>(address, port = nil, helo = &#39;localhost&#39;, user = nil, secret = nil, authtype = nil, &amp;block)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new <a href="" title="Net::SMTP (class)">Net::SMTP</a> object and connects to the server.</p>

<p>This method is equivalent to:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid_helo_domain'>helo_domain</span><span class='comma'>,</span> <span class='id identifier rubyid_account'>account</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span><span class='rparen'>)</span>
</code></pre>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Block+Usage">Block Usage</h3>

<p>If called with a block, the newly-opened <a href="" title="Net::SMTP (class)">Net::SMTP</a> object is yielded to
the block, and automatically closed when the block finishes.  If called
without a block, the newly-opened <a href="" title="Net::SMTP (class)">Net::SMTP</a> object is returned to the
caller, and it is the caller&#39;s responsibility to close it when
finished.</p>

<h6 id="label-Parameters-3A">Parameters:</h6>

<p><code>address</code> is the hostname or ip address of your smtp server.</p>

<p><code>port</code> is the port to connect to; it defaults to port 25.</p>

<p><code>helo</code> is the <em>HELO</em> <em>domain</em> provided by the
client to the server (see overview comments); it defaults to
&#39;localhost&#39;.</p>

<p>The remaining arguments are used for SMTP authentication, if required or
desired.  <code>user</code> is the account name; <code>secret</code> is
your password or other authentication token; and <code>authtype</code> is
the authentication type, one of :plain, :login, or :cram_md5.  See the
discussion of SMTP Authentication in the overview notes.</p>

<h3 id="label-Errors">Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p><a href="SMTPAuthenticationError.html" title="Net::SMTPAuthenticationError (class)">Net::SMTPAuthenticationError</a></p>
</li><li>
<p><a href="SMTPServerBusy.html" title="Net::SMTPServerBusy (class)">Net::SMTPServerBusy</a></p>
</li><li>
<p><a href="SMTPSyntaxError.html" title="Net::SMTPSyntaxError (class)">Net::SMTPSyntaxError</a></p>
</li><li>
<p><a href="SMTPFatalError.html" title="Net::SMTPFatalError (class)">Net::SMTPFatalError</a></p>
</li><li>
<p><a href="SMTPUnknownError.html" title="Net::SMTPUnknownError (class)">Net::SMTPUnknownError</a></p>
</li><li>
<p>OpenTimeout</p>
</li><li>
<p>ReadTimeout</p>
</li><li>
<p>IOError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


455
456
457
458
459</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 455</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_helo'>helo</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                   <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
                   <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>   <span class='comment'># :yield: smtp
</span>      <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid_helo'>helo</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="auth_capable?-instance_method">
  <h3 class='signature first'>
  #<strong>auth_capable?</strong>(type)  &#x21d2; <tt>Boolean</tt>  <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


274
275
276
277
278</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auth_capable?'>auth_capable?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='ivar'>@capabilities</span>
      <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='ivar'>@capabilities</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AUTH</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
      <span class='ivar'>@capabilities</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AUTH</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="auth_cram_md5-instance_method">
  <h3 class='signature'>
  #<strong>auth_cram_md5</strong>(user, secret)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


756
757
758
759
760
761
762
763
764
765
766</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 756</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auth_cram_md5'>auth_cram_md5</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_check_auth_args'>check_auth_args</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_critical'>critical</span> <span class='lbrace'>{</span>
        <span class='id identifier rubyid_res0'>res0</span> <span class='op'>=</span> <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AUTH CRAM-MD5</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_check_auth_continue'>check_auth_continue</span> <span class='id identifier rubyid_res0'>res0</span>
        <span class='id identifier rubyid_crammed'>crammed</span> <span class='op'>=</span> <span class='id identifier rubyid_cram_md5_response'>cram_md5_response</span><span class='lparen'>(</span><span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_res0'>res0</span><span class='period'>.</span><span class='id identifier rubyid_cram_md5_challenge'>cram_md5_challenge</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='id identifier rubyid_base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_crammed'>crammed</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      <span class='id identifier rubyid_check_auth_response'>check_auth_response</span> <span class='id identifier rubyid_res'>res</span>
      <span class='id identifier rubyid_res'>res</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="auth_login-instance_method">
  <h3 class='signature'>
  #<strong>auth_login</strong>(user, secret)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


745
746
747
748
749
750
751
752
753
754</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 745</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auth_login'>auth_login</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_check_auth_args'>check_auth_args</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_critical'>critical</span> <span class='lbrace'>{</span>
        <span class='id identifier rubyid_check_auth_continue'>check_auth_continue</span> <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AUTH LOGIN</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_check_auth_continue'>check_auth_continue</span> <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='id identifier rubyid_base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='id identifier rubyid_base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='id identifier rubyid_secret'>secret</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      <span class='id identifier rubyid_check_auth_response'>check_auth_response</span> <span class='id identifier rubyid_res'>res</span>
      <span class='id identifier rubyid_res'>res</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="auth_method-instance_method">
  <h3 class='signature'>
  #<strong>auth_method</strong>(type)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


776
777
778</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 776</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auth_method'>auth_method</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>auth_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_intern'>intern</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="auth_plain-instance_method">
  <h3 class='signature'>
  #<strong>auth_plain</strong>(user, secret)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


736
737
738
739
740
741
742
743</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 736</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auth_plain'>auth_plain</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_check_auth_args'>check_auth_args</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_critical'>critical</span> <span class='lbrace'>{</span>
        <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AUTH PLAIN </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='embexpr_end'>}</span><span class='tstring_content'>\0</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_secret'>secret</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      <span class='id identifier rubyid_check_auth_response'>check_auth_response</span> <span class='id identifier rubyid_res'>res</span>
      <span class='id identifier rubyid_res'>res</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="authenticate-instance_method">
  <h3 class='signature'>
  #<strong>authenticate</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


730
731
732
733
734</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 730</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authenticate'>authenticate</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span> <span class='op'>=</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_check_auth_method'>check_auth_method</span> <span class='id identifier rubyid_authtype'>authtype</span>
      <span class='id identifier rubyid_check_auth_args'>check_auth_args</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span>
      <span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_auth_method'>auth_method</span><span class='lparen'>(</span><span class='id identifier rubyid_authtype'>authtype</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="base64_encode-instance_method">
  <h3 class='signature'>
  #<strong>base64_encode</strong>(str)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


789
790
791
792</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 789</span>

<span class='kw'>def</span> <span class='id identifier rubyid_base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
      <span class='comment'># expects &quot;str&quot; may not become too long
</span>      <span class='lbracket'>[</span><span class='id identifier rubyid_str'>str</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="capable?-instance_method">
  <h3 class='signature'>
  #<strong>capable?</strong>(key)  &#x21d2; <tt>Boolean</tt>  <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


250
251
252
253</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 250</span>

<span class='kw'>def</span> <span class='id identifier rubyid_capable?'>capable?</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='ivar'>@capabilities</span>
      <span class='ivar'>@capabilities</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="capable_auth_types-instance_method">
  <h3 class='signature'>
  #<strong>capable_auth_types</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns supported authentication methods on this server. You cannot get
valid value before opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


283
284
285
286
287</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_capable_auth_types'>capable_auth_types</span>
      <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='ivar'>@capabilities</span>
      <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='ivar'>@capabilities</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AUTH</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
      <span class='ivar'>@capabilities</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AUTH</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="capable_cram_md5_auth?-instance_method">
  <h3 class='signature'>
  #<strong>capable_cram_md5_auth?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if server advertises AUTH CRAM-MD5. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


270
271
272</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 270</span>

<span class='kw'>def</span> <span class='id identifier rubyid_capable_cram_md5_auth?'>capable_cram_md5_auth?</span>
      <span class='id identifier rubyid_auth_capable?'>auth_capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CRAM-MD5</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="capable_login_auth?-instance_method">
  <h3 class='signature'>
  #<strong>capable_login_auth?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if server advertises AUTH LOGIN. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


264
265
266</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 264</span>

<span class='kw'>def</span> <span class='id identifier rubyid_capable_login_auth?'>capable_login_auth?</span>
      <span class='id identifier rubyid_auth_capable?'>auth_capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="capable_plain_auth?-instance_method">
  <h3 class='signature'>
  #<strong>capable_plain_auth?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if server advertises AUTH PLAIN. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


258
259
260</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_capable_plain_auth?'>capable_plain_auth?</span>
      <span class='id identifier rubyid_auth_capable?'>auth_capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="capable_starttls?-instance_method">
  <h3 class='signature'>
  #<strong>capable_starttls?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if server advertises STARTTLS. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


246
247
248</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_capable_starttls?'>capable_starttls?</span>
      <span class='id identifier rubyid_capable?'>capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>STARTTLS</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="check_auth_args-instance_method">
  <h3 class='signature'>
  #<strong>check_auth_args</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


780
781
782
783
784
785
786
787</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 780</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_auth_args'>check_auth_args</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span> <span class='op'>=</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_user'>user</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SMTP-AUTH requested but missing user name</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_secret'>secret</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SMTP-AUTH requested but missing secret phrase</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="check_auth_continue-instance_method">
  <h3 class='signature'>
  #<strong>check_auth_continue</strong>(res)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


981
982
983
984
985</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 981</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_auth_continue'>check_auth_continue</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_continue?'>continue?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_exception_class'>exception_class</span><span class='comma'>,</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="check_auth_method-instance_method">
  <h3 class='signature'>
  #<strong>check_auth_method</strong>(type)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


770
771
772
773
774</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 770</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_auth_method'>check_auth_method</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_auth_method'>auth_method</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wrong authentication type </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="check_auth_response-instance_method">
  <h3 class='signature'>
  #<strong>check_auth_response</strong>(res)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


975
976
977
978
979</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 975</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_auth_response'>check_auth_response</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>SMTPAuthenticationError</span><span class='comma'>,</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="check_continue-instance_method">
  <h3 class='signature'>
  #<strong>check_continue</strong>(res)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


969
970
971
972
973</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 969</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_continue'>check_continue</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_continue?'>continue?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>SMTPUnknownError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>could not get 3xx (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="check_response-instance_method">
  <h3 class='signature'>
  #<strong>check_response</strong>(res)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


963
964
965
966
967</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 963</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_response'>check_response</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_exception_class'>exception_class</span><span class='comma'>,</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="cram_md5_response-instance_method">
  <h3 class='signature'>
  #<strong>cram_md5_response</strong>(secret, challenge)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>CRAM-MD5: [RFC2195]</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


798
799
800
801</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 798</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cram_md5_response'>cram_md5_response</span><span class='lparen'>(</span><span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_challenge'>challenge</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_tmp'>tmp</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id identifier rubyid_digest'>digest</span><span class='lparen'>(</span><span class='id identifier rubyid_cram_secret'>cram_secret</span><span class='lparen'>(</span><span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='const'>IMASK</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_challenge'>challenge</span><span class='rparen'>)</span>
      <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_cram_secret'>cram_secret</span><span class='lparen'>(</span><span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='const'>OMASK</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_tmp'>tmp</span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="cram_secret-instance_method">
  <h3 class='signature'>
  #<strong>cram_secret</strong>(secret, mask)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


805
806
807
808
809
810
811
812</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 805</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cram_secret'>cram_secret</span><span class='lparen'>(</span><span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_mask'>mask</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_secret'>secret</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id identifier rubyid_digest'>digest</span><span class='lparen'>(</span><span class='id identifier rubyid_secret'>secret</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_secret'>secret</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='const'>CRAM_BUFSIZE</span>
      <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='id identifier rubyid_secret'>secret</span><span class='period'>.</span><span class='id identifier rubyid_ljust'>ljust</span><span class='lparen'>(</span><span class='const'>CRAM_BUFSIZE</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_buf'>buf</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_buf'>buf</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span> <span class='op'>^</span> <span class='id identifier rubyid_mask'>mask</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_buf'>buf</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="critical-instance_method">
  <h3 class='signature'>
  #<strong>critical</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


953
954
955
956
957
958
959
960
961</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 953</span>

<span class='kw'>def</span> <span class='id identifier rubyid_critical'>critical</span>
      <span class='kw'>return</span> <span class='const'>Response</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>200 dummy reply code</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@error_occurred</span>
      <span class='kw'>begin</span>
        <span class='kw'>return</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span> <span class='const'>Exception</span>
        <span class='ivar'>@error_occurred</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_raise'>raise</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="data-instance_method">
  <h3 class='signature'>
  #<strong>data</strong>(msgstr = nil, &amp;block)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>This method sends a message. If <code>msgstr</code> is given, sends it as a
message. If block is given, yield a message writer stream. You must write
message before the block is closed.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Example 1 (by string)
</span><span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;EndMessage</span><span class='rparen'>)</span>
<span class='tstring_content'>From: john@example.com
To: betty@example.com
Subject: I found a bug

Check vm.c:58879.
</span><span class='heredoc_end'>EndMessage
</span>
<span class='comment'># Example 2 (by block)
</span><span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>From: john@example.com</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>To: betty@example.com</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Subject: I found a bug</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Check vm.c:58879.</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 896</span>

<span class='kw'>def</span> <span class='id identifier rubyid_data'>data</span><span class='lparen'>(</span><span class='id identifier rubyid_msgstr'>msgstr</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>   <span class='comment'>#:yield: stream
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_msgstr'>msgstr</span> <span class='kw'>and</span> <span class='id identifier rubyid_block'>block</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>message and block are exclusive</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_msgstr'>msgstr</span> <span class='kw'>or</span> <span class='id identifier rubyid_block'>block</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>message or block is required</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_critical'>critical</span> <span class='lbrace'>{</span>
        <span class='id identifier rubyid_check_continue'>check_continue</span> <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DATA</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_socket_sync_bak'>socket_sync_bak</span> <span class='op'>=</span> <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_sync'>sync</span>
        <span class='kw'>begin</span>
          <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_sync'>sync</span> <span class='op'>=</span> <span class='kw'>false</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_msgstr'>msgstr</span>
            <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_write_message'>write_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span>
          <span class='kw'>else</span>
            <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_write_message_by_block'>write_message_by_block</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>ensure</span>
          <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
          <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_sync'>sync</span> <span class='op'>=</span> <span class='id identifier rubyid_socket_sync_bak'>socket_sync_bak</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      <span class='id identifier rubyid_check_response'>check_response</span> <span class='id identifier rubyid_res'>res</span>
      <span class='id identifier rubyid_res'>res</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="debug_output=-instance_method">
  <h3 class='signature'>
  #<strong>debug_output=</strong>(arg)  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>set_debug_output</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>WARNING: This method causes serious security holes. Use this method for
only debugging.</p>

<p>Set an output stream for debug logging. You must call this before <a href="#start-instance_method" title="Net::SMTP#start (method)">#start</a>.</p>

<pre class="code ruby"><code class="ruby"># example
smtp = Net::SMTP.new(addr, port)
smtp.set_debug_output $stderr
smtp.start do |smtp|
  ....
end</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


396
397
398</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 396</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug_output='>debug_output=</span><span class='lparen'>(</span><span class='id identifier rubyid_arg'>arg</span><span class='rparen'>)</span>
      <span class='ivar'>@debug_output</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="disable_ssl-instance_method">
  <h3 class='signature'>
  #<strong>disable_ssl</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Disables SMTP/TLS for this object.  Must be called before the connection is
established to have any effect.</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


315</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 315</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_disable_ssl'>disable_ssl</span> <span class='id identifier rubyid_disable_tls'>disable_tls</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="disable_starttls-instance_method">
  <h3 class='signature'>
  #<strong>disable_starttls</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Disables SMTP/TLS (STARTTLS) for this object.  Must be called before the
connection is established to have any effect.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


354
355
356
357</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 354</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disable_starttls'>disable_starttls</span>
      <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="disable_tls-instance_method">
  <h3 class='signature'>
  #<strong>disable_tls</strong>  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>disable_ssl</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Disables SMTP/TLS for this object.  Must be called before the connection is
established to have any effect.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


310
311
312
313</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disable_tls'>disable_tls</span>
      <span class='ivar'>@tls</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="do_finish-instance_method">
  <h3 class='signature'>
  #<strong>do_finish</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


616
617
618
619
620
621
622
623</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 616</span>

<span class='kw'>def</span> <span class='id identifier rubyid_do_finish'>do_finish</span>
      <span class='id identifier rubyid_quit'>quit</span> <span class='kw'>if</span> <span class='ivar'>@socket</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='ivar'>@error_occurred</span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@started</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@error_occurred</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span> <span class='kw'>if</span> <span class='ivar'>@socket</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>
      <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="do_helo-instance_method">
  <h3 class='signature'>
  #<strong>do_helo</strong>(helo_domain)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


604
605
606
607
608
609
610
611
612
613
614</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 604</span>

<span class='kw'>def</span> <span class='id identifier rubyid_do_helo'>do_helo</span><span class='lparen'>(</span><span class='id identifier rubyid_helo_domain'>helo_domain</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='ivar'>@esmtp</span> <span class='op'>?</span> <span class='id identifier rubyid_ehlo'>ehlo</span><span class='lparen'>(</span><span class='id identifier rubyid_helo_domain'>helo_domain</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_helo'>helo</span><span class='lparen'>(</span><span class='id identifier rubyid_helo_domain'>helo_domain</span><span class='rparen'>)</span>
      <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_capabilities'>capabilities</span>
    <span class='kw'>rescue</span> <span class='const'>SMTPError</span>
      <span class='kw'>if</span> <span class='ivar'>@esmtp</span>
        <span class='ivar'>@esmtp</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='ivar'>@error_occurred</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='kw'>retry</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_raise'>raise</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="do_start-instance_method">
  <h3 class='signature'>
  #<strong>do_start</strong>(helo_domain, user, secret, authtype)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 545</span>

<span class='kw'>def</span> <span class='id identifier rubyid_do_start'>do_start</span><span class='lparen'>(</span><span class='id identifier rubyid_helo_domain'>helo_domain</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SMTP session already started</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='ivar'>@started</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span> <span class='kw'>or</span> <span class='id identifier rubyid_secret'>secret</span>
        <span class='id identifier rubyid_check_auth_method'>check_auth_method</span><span class='lparen'>(</span><span class='id identifier rubyid_authtype'>authtype</span> <span class='op'>||</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_check_auth_args'>check_auth_args</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>Timeout</span><span class='period'>.</span><span class='id identifier rubyid_timeout'>timeout</span><span class='lparen'>(</span><span class='ivar'>@open_timeout</span><span class='comma'>,</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>OpenTimeout</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_tcp_socket'>tcp_socket</span><span class='lparen'>(</span><span class='ivar'>@address</span><span class='comma'>,</span> <span class='ivar'>@port</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_logging'>logging</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Connection opened: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@address</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='id identifier rubyid_new_internet_message_io'>new_internet_message_io</span><span class='lparen'>(</span><span class='id identifier rubyid_tls?'>tls?</span> <span class='op'>?</span> <span class='id identifier rubyid_tlsconnect'>tlsconnect</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_check_response'>check_response</span> <span class='id identifier rubyid_critical'>critical</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_do_helo'>do_helo</span> <span class='id identifier rubyid_helo_domain'>helo_domain</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_starttls_always?'>starttls_always?</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='id identifier rubyid_capable_starttls?'>capable_starttls?</span> <span class='kw'>and</span> <span class='id identifier rubyid_starttls_auto?'>starttls_auto?</span><span class='rparen'>)</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_capable_starttls?'>capable_starttls?</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='const'>SMTPUnsupportedCommand</span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STARTTLS is not supported on this server</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_starttls'>starttls</span>
        <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='id identifier rubyid_new_internet_message_io'>new_internet_message_io</span><span class='lparen'>(</span><span class='id identifier rubyid_tlsconnect'>tlsconnect</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='comment'># helo response may be different after STARTTLS
</span>        <span class='id identifier rubyid_do_helo'>do_helo</span> <span class='id identifier rubyid_helo_domain'>helo_domain</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_authenticate'>authenticate</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_authtype'>authtype</span> <span class='op'>||</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span>
      <span class='ivar'>@started</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>ensure</span>
      <span class='kw'>unless</span> <span class='ivar'>@started</span>
        <span class='comment'># authentication failed, cancel connection.
</span>        <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span> <span class='kw'>if</span> <span class='id identifier rubyid_s'>s</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>
        <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="ehlo-instance_method">
  <h3 class='signature'>
  #<strong>ehlo</strong>(domain)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


834
835
836</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 834</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ehlo'>ehlo</span><span class='lparen'>(</span><span class='id identifier rubyid_domain'>domain</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EHLO </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_domain'>domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="enable_ssl-instance_method">
  <h3 class='signature'>
  #<strong>enable_ssl</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for this object. 
Must be called before the connection is established to have any effect. 
<code>context</code> is a <code>OpenSSL::SSL::SSLContext</code> object.</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


306</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 306</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_enable_ssl'>enable_ssl</span> <span class='id identifier rubyid_enable_tls'>enable_tls</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="enable_starttls-instance_method">
  <h3 class='signature'>
  #<strong>enable_starttls</strong>(context = SMTP.default_ssl_context)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enables SMTP/TLS (STARTTLS) for this object. <code>context</code> is a
<code>OpenSSL::SSL::SSLContext</code> object.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>ArgumentError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


336
337
338
339
340
341</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 336</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enable_starttls'>enable_starttls</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_ssl_context'>default_ssl_context</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>openssl library not installed</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SMTPS and STARTTLS is exclusive</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@tls</span>
      <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='symbol'>:always</span>
      <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="enable_starttls_auto-instance_method">
  <h3 class='signature'>
  #<strong>enable_starttls_auto</strong>(context = SMTP.default_ssl_context)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enables SMTP/TLS (STARTTLS) for this object if server accepts.
<code>context</code> is a <code>OpenSSL::SSL::SSLContext</code> object.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>ArgumentError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


345
346
347
348
349
350</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 345</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enable_starttls_auto'>enable_starttls_auto</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_ssl_context'>default_ssl_context</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>openssl library not installed</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SMTPS and STARTTLS is exclusive</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@tls</span>
      <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='symbol'>:auto</span>
      <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="enable_tls-instance_method">
  <h3 class='signature'>
  #<strong>enable_tls</strong>(context = SMTP.default_ssl_context)  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>enable_ssl</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for this object. 
Must be called before the connection is established to have any effect. 
<code>context</code> is a <code>OpenSSL::SSL::SSLContext</code> object.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>ArgumentError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


299
300
301
302
303
304</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enable_tls'>enable_tls</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_default_ssl_context'>default_ssl_context</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>openssl library not installed</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SMTPS and STARTTLS is exclusive</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@starttls</span>
      <span class='ivar'>@tls</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="esmtp?-instance_method">
  <h3 class='signature'>
  #<strong>esmtp?</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Set whether to use ESMTP or not.  This should be done before calling
<a href="#start-instance_method" title="Net::SMTP#start (method)">#start</a>.  Note that if <a href="#start-instance_method" title="Net::SMTP#start (method)">#start</a> is called in ESMTP mode, and the
connection fails due to a ProtocolError, the SMTP object will automatically
switch to plain SMTP mode and retry (but not vice versa). <code>true</code>
if the SMTP object uses ESMTP (which it does by default).</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


242</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 242</span>

<span class='kw'>alias</span> <span class='symbol'>:esmtp?</span> <span class='symbol'>:esmtp</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="finish-instance_method">
  <h3 class='signature'>
  #<strong>finish</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Finishes the SMTP session and closes TCP connection. Raises IOError if not
started.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>IOError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


534
535
536
537</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 534</span>

<span class='kw'>def</span> <span class='id identifier rubyid_finish'>finish</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not yet started</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_started?'>started?</span>
      <span class='id identifier rubyid_do_finish'>do_finish</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="get_response-instance_method">
  <h3 class='signature'>
  #<strong>get_response</strong>(reqline)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


938
939
940
941</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 938</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_response'>get_response</span><span class='lparen'>(</span><span class='id identifier rubyid_reqline'>reqline</span><span class='rparen'>)</span>
      <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_writeline'>writeline</span> <span class='id identifier rubyid_reqline'>reqline</span>
      <span class='id identifier rubyid_recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="getok-instance_method">
  <h3 class='signature'>
  #<strong>getok</strong>(reqline)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


929
930
931
932
933
934
935
936</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 929</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='id identifier rubyid_reqline'>reqline</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_critical'>critical</span> <span class='lbrace'>{</span>
        <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_writeline'>writeline</span> <span class='id identifier rubyid_reqline'>reqline</span>
        <span class='id identifier rubyid_recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      <span class='id identifier rubyid_check_response'>check_response</span> <span class='id identifier rubyid_res'>res</span>
      <span class='id identifier rubyid_res'>res</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="helo-instance_method">
  <h3 class='signature'>
  #<strong>helo</strong>(domain)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


830
831
832</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 830</span>

<span class='kw'>def</span> <span class='id identifier rubyid_helo'>helo</span><span class='lparen'>(</span><span class='id identifier rubyid_domain'>domain</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HELO </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_domain'>domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="inspect-instance_method">
  <h3 class='signature'>
  #<strong>inspect</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Provide human-readable stringification of class state.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


228
229
230</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 228</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@address</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@port</span><span class='embexpr_end'>}</span><span class='tstring_content'> started=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@started</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="logging-instance_method">
  <h3 class='signature'>
  #<strong>logging</strong>(msg)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


1066
1067
1068</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 1066</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logging'>logging</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
      <span class='ivar'>@debug_output</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_msg'>msg</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@debug_output</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="mailfrom-instance_method">
  <h3 class='signature'>
  #<strong>mailfrom</strong>(from_addr)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


838
839
840
841
842
843</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 838</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mailfrom'>mailfrom</span><span class='lparen'>(</span><span class='id identifier rubyid_from_addr'>from_addr</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='gvar'>$SAFE</span> <span class='op'>&gt;</span> <span class='int'>0</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>SecurityError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tainted from_addr</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_from_addr'>from_addr</span><span class='period'>.</span><span class='id identifier rubyid_tainted?'>tainted?</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MAIL FROM:&lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_from_addr'>from_addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="new_internet_message_io-instance_method">
  <h3 class='signature'>
  #<strong>new_internet_message_io</strong>(s)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


597
598
599
600
601
602</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 597</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_internet_message_io'>new_internet_message_io</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'>InternetMessageIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_read_timeout'>read_timeout</span> <span class='op'>=</span> <span class='ivar'>@read_timeout</span>
      <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_debug_output'>debug_output</span> <span class='op'>=</span> <span class='ivar'>@debug_output</span>
      <span class='id identifier rubyid_io'>io</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="open_message_stream-instance_method">
  <h3 class='signature'>
  #<strong>open_message_stream</strong>(from_addr, *to_addrs, &amp;block)  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>ready</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Opens a message writer stream and gives it to the block. The stream is
valid only in the block, and has these methods:</p>
<dl class="rdoc-list note-list"><dt>puts(str = &#39;&#39;)
<dd>
<p>outputs STR and CR LF.</p>
</dd><dt>print(str)
<dd>
<p>outputs STR.</p>
</dd><dt>printf(fmt, *args)
<dd>
<p>outputs sprintf(fmt,*args).</p>
</dd><dt>write(str)
<dd>
<p>outputs STR and returns the length of written bytes.</p>
</dd><dt>&lt;&lt;(str)
<dd>
<p>outputs STR and returns self.</p>
</dd></dl>

<p>If a single CR (“r”) or LF (“n”) is found in the message, it is converted
to the CR LF pair.  You cannot send a binary message with this method.</p>

<h6 id="label-Parameters-3A">Parameters:</h6>

<p><code>from_addr</code> is a String representing the source mail address.</p>

<p><code>to_addr</code> is a String or Strings or Array of Strings,
representing the destination mail address or addresses.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smtp.example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_open_message_stream'>open_message_stream</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>From: from@example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>To: dest@example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Subject: test message</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This is a test message.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Errors">Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p><a href="SMTPServerBusy.html" title="Net::SMTPServerBusy (class)">Net::SMTPServerBusy</a></p>
</li><li>
<p><a href="SMTPSyntaxError.html" title="Net::SMTPSyntaxError (class)">Net::SMTPSyntaxError</a></p>
</li><li>
<p><a href="SMTPFatalError.html" title="Net::SMTPFatalError (class)">Net::SMTPFatalError</a></p>
</li><li>
<p><a href="SMTPUnknownError.html" title="Net::SMTPUnknownError (class)">Net::SMTPUnknownError</a></p>
</li><li>
<p>ReadTimeout</p>
</li><li>
<p>IOError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>IOError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


714
715
716
717
718</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 714</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_message_stream'>open_message_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_from_addr'>from_addr</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_to_addrs'>to_addrs</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>   <span class='comment'># :yield: stream
</span>      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>closed session</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='ivar'>@socket</span>
      <span class='id identifier rubyid_mailfrom'>mailfrom</span> <span class='id identifier rubyid_from_addr'>from_addr</span>
      <span class='id identifier rubyid_rcptto_list'>rcptto_list</span><span class='lparen'>(</span><span class='id identifier rubyid_to_addrs'>to_addrs</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='id identifier rubyid_data'>data</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="quit-instance_method">
  <h3 class='signature'>
  #<strong>quit</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


923
924
925</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 923</span>

<span class='kw'>def</span> <span class='id identifier rubyid_quit'>quit</span>
      <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>QUIT</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="rcptto-instance_method">
  <h3 class='signature'>
  #<strong>rcptto</strong>(to_addr)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


866
867
868
869
870
871</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 866</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rcptto'>rcptto</span><span class='lparen'>(</span><span class='id identifier rubyid_to_addr'>to_addr</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='gvar'>$SAFE</span> <span class='op'>&gt;</span> <span class='int'>0</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>SecurityError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tainted to_addr</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_to_addr'>to_addr</span><span class='period'>.</span><span class='id identifier rubyid_tainted?'>tainted?</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RCPT TO:&lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_addr'>to_addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="rcptto_list-instance_method">
  <h3 class='signature'>
  #<strong>rcptto_list</strong>(to_addrs)  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>ArgumentError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863
864</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 845</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rcptto_list'>rcptto_list</span><span class='lparen'>(</span><span class='id identifier rubyid_to_addrs'>to_addrs</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail destination not given</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_to_addrs'>to_addrs</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_ok_users'>ok_users</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_unknown_users'>unknown_users</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_to_addrs'>to_addrs</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_addr'>addr</span><span class='op'>|</span>
        <span class='kw'>begin</span>
          <span class='id identifier rubyid_rcptto'>rcptto</span> <span class='id identifier rubyid_addr'>addr</span>
        <span class='kw'>rescue</span> <span class='const'>SMTPAuthenticationError</span>
          <span class='id identifier rubyid_unknown_users'>unknown_users</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_addr'>addr</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_ok_users'>ok_users</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_addr'>addr</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail destination not given</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_ok_users'>ok_users</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='kw'>yield</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_unknown_users'>unknown_users</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>SMTPAuthenticationError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>failed to deliver for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_unknown_users'>unknown_users</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_ret'>ret</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="ready-instance_method">
  <h3 class='signature'>
  #<strong>ready</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Opens a message writer stream and gives it to the block. The stream is
valid only in the block, and has these methods:</p>
<dl class="rdoc-list note-list"><dt>puts(str = &#39;&#39;)
<dd>
<p>outputs STR and CR LF.</p>
</dd><dt>print(str)
<dd>
<p>outputs STR.</p>
</dd><dt>printf(fmt, *args)
<dd>
<p>outputs sprintf(fmt,*args).</p>
</dd><dt>write(str)
<dd>
<p>outputs STR and returns the length of written bytes.</p>
</dd><dt>&lt;&lt;(str)
<dd>
<p>outputs STR and returns self.</p>
</dd></dl>

<p>If a single CR (“r”) or LF (“n”) is found in the message, it is converted
to the CR LF pair.  You cannot send a binary message with this method.</p>

<h6 id="label-Parameters-3A">Parameters:</h6>

<p><code>from_addr</code> is a String representing the source mail address.</p>

<p><code>to_addr</code> is a String or Strings or Array of Strings,
representing the destination mail address or addresses.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smtp.example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_open_message_stream'>open_message_stream</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>From: from@example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>To: dest@example.com</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Subject: test message</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This is a test message.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Errors">Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p><a href="SMTPServerBusy.html" title="Net::SMTPServerBusy (class)">Net::SMTPServerBusy</a></p>
</li><li>
<p><a href="SMTPSyntaxError.html" title="Net::SMTPSyntaxError (class)">Net::SMTPSyntaxError</a></p>
</li><li>
<p><a href="SMTPFatalError.html" title="Net::SMTPFatalError (class)">Net::SMTPFatalError</a></p>
</li><li>
<p><a href="SMTPUnknownError.html" title="Net::SMTPUnknownError (class)">Net::SMTPUnknownError</a></p>
</li><li>
<p>ReadTimeout</p>
</li><li>
<p>IOError</p>
</li></ul>

<p>obsolete</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


720</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 720</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_ready'>ready</span> <span class='id identifier rubyid_open_message_stream'>open_message_stream</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="recv_response-instance_method">
  <h3 class='signature'>
  #<strong>recv_response</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


943
944
945
946
947
948
949
950
951</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 943</span>

<span class='kw'>def</span> <span class='id identifier rubyid_recv_response'>recv_response</span>
      <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>while</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='ivar'>@socket</span><span class='period'>.</span><span class='id identifier rubyid_readline'>readline</span>
        <span class='id identifier rubyid_buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_line'>line</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># &quot;210-PIPELINING&quot;
</span>      <span class='kw'>end</span>
      <span class='const'>Response</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_buf'>buf</span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="rset-instance_method">
  <h3 class='signature'>
  #<strong>rset</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Aborts the current mail transaction</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


822
823
824</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 822</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rset'>rset</span>
      <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RSET</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="send_mail-instance_method">
  <h3 class='signature'>
  #<strong>send_mail</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sends <code>msgstr</code> as a message.  Single CR (“r”) and LF (“n”) found
in the <code>msgstr</code>, are converted into the CR LF pair.  You cannot
send a binary message with this method. <code>msgstr</code> should include
both the message headers and body.</p>

<p><code>from_addr</code> is a String representing the source mail address.</p>

<p><code>to_addr</code> is a String or Strings or Array of Strings,
representing the destination mail address or addresses.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smtp.example.com</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest2@example.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Errors">Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p><a href="SMTPServerBusy.html" title="Net::SMTPServerBusy (class)">Net::SMTPServerBusy</a></p>
</li><li>
<p><a href="SMTPSyntaxError.html" title="Net::SMTPSyntaxError (class)">Net::SMTPSyntaxError</a></p>
</li><li>
<p><a href="SMTPFatalError.html" title="Net::SMTPFatalError (class)">Net::SMTPFatalError</a></p>
</li><li>
<p><a href="SMTPUnknownError.html" title="Net::SMTPUnknownError (class)">Net::SMTPUnknownError</a></p>
</li><li>
<p>ReadTimeout</p>
</li><li>
<p>IOError</p>
</li></ul>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


667</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 667</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_send_mail'>send_mail</span> <span class='id identifier rubyid_send_message'>send_message</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="send_message-instance_method">
  <h3 class='signature'>
  #<strong>send_message</strong>(msgstr, from_addr, *to_addrs)  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>send_mail</span>
, 
    <span>sendmail</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sends <code>msgstr</code> as a message.  Single CR (“r”) and LF (“n”) found
in the <code>msgstr</code>, are converted into the CR LF pair.  You cannot
send a binary message with this method. <code>msgstr</code> should include
both the message headers and body.</p>

<p><code>from_addr</code> is a String representing the source mail address.</p>

<p><code>to_addr</code> is a String or Strings or Array of Strings,
representing the destination mail address or addresses.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smtp.example.com</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest2@example.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Errors">Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p><a href="SMTPServerBusy.html" title="Net::SMTPServerBusy (class)">Net::SMTPServerBusy</a></p>
</li><li>
<p><a href="SMTPSyntaxError.html" title="Net::SMTPSyntaxError (class)">Net::SMTPSyntaxError</a></p>
</li><li>
<p><a href="SMTPFatalError.html" title="Net::SMTPFatalError (class)">Net::SMTPFatalError</a></p>
</li><li>
<p><a href="SMTPUnknownError.html" title="Net::SMTPUnknownError (class)">Net::SMTPUnknownError</a></p>
</li><li>
<p>ReadTimeout</p>
</li><li>
<p>IOError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>IOError</tt>)</span>
  </li>
</ul>

</div><div class='source_code h'>
  <pre class='lines_num'>


661
662
663
664
665</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 661</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_message'>send_message</span><span class='lparen'>(</span><span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span> <span class='id identifier rubyid_from_addr'>from_addr</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_to_addrs'>to_addrs</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>closed session</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='ivar'>@socket</span>
      <span class='id identifier rubyid_mailfrom'>mailfrom</span> <span class='id identifier rubyid_from_addr'>from_addr</span>
      <span class='id identifier rubyid_rcptto_list'>rcptto_list</span><span class='lparen'>(</span><span class='id identifier rubyid_to_addrs'>to_addrs</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='id identifier rubyid_data'>data</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='rbrace'>}</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="sendmail-instance_method">
  <h3 class='signature'>
  #<strong>sendmail</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sends <code>msgstr</code> as a message.  Single CR (“r”) and LF (“n”) found
in the <code>msgstr</code>, are converted into the CR LF pair.  You cannot
send a binary message with this method. <code>msgstr</code> should include
both the message headers and body.</p>

<p><code>from_addr</code> is a String representing the source mail address.</p>

<p><code>to_addr</code> is a String or Strings or Array of Strings,
representing the destination mail address or addresses.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smtp.example.com</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest2@example.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Errors">Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p><a href="SMTPServerBusy.html" title="Net::SMTPServerBusy (class)">Net::SMTPServerBusy</a></p>
</li><li>
<p><a href="SMTPSyntaxError.html" title="Net::SMTPSyntaxError (class)">Net::SMTPSyntaxError</a></p>
</li><li>
<p><a href="SMTPFatalError.html" title="Net::SMTPFatalError (class)">Net::SMTPFatalError</a></p>
</li><li>
<p><a href="SMTPUnknownError.html" title="Net::SMTPUnknownError (class)">Net::SMTPUnknownError</a></p>
</li><li>
<p>ReadTimeout</p>
</li><li>
<p>IOError</p>
</li></ul>

<p>obsolete</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


668</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 668</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_sendmail'>sendmail</span> <span class='id identifier rubyid_send_message'>send_message</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="set_debug_output-instance_method">
  <h3 class='signature'>
  #<strong>set_debug_output</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>WARNING: This method causes serious security holes. Use this method for
only debugging.</p>

<p>Set an output stream for debug logging. You must call this before <a href="#start-instance_method" title="Net::SMTP#start (method)">#start</a>.</p>

<pre class="code ruby"><code class="ruby"># example
smtp = Net::SMTP.new(addr, port)
smtp.set_debug_output $stderr
smtp.start do |smtp|
  ....
end</code></pre>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


400</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 400</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_set_debug_output'>set_debug_output</span> <span class='id identifier rubyid_debug_output='>debug_output=</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="ssl?-instance_method">
  <h3 class='signature'>
  #<strong>ssl?</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if this object uses SMTP/TLS (SMTPS).</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


294</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 294</span>

<span class='kw'>alias</span> <span class='id identifier rubyid_ssl?'>ssl?</span> <span class='id identifier rubyid_tls?'>tls?</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="ssl_socket-instance_method">
  <h3 class='signature'>
  #<strong>ssl_socket</strong>(socket, context)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


578
579
580</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 578</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ssl_socket'>ssl_socket</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
      <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLSocket</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="start-instance_method">
  <h3 class='signature'>
  #<strong>start</strong>(helo = &#39;localhost&#39;, user = nil, secret = nil, authtype = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Opens a TCP connection and starts the SMTP session.</p>

<h6 id="label-Parameters-3A">Parameters:</h6>

<p><code>helo</code> is the <em>HELO</em> <em>domain</em> that you&#39;ll
dispatch mails from; see the discussion in the overview notes.</p>

<p>If both of <code>user</code> and <code>secret</code> are given, SMTP
authentication will be attempted using the AUTH command. 
<code>authtype</code> specifies the type of authentication to attempt; it
must be one of :login, :plain, and :cram_md5.  See the notes on SMTP
Authentication in the overview.</p>

<h3 id="label-Block+Usage">Block Usage</h3>

<p>When this methods is called with a block, the newly-started SMTP object is
yielded to the block, and automatically closed after the block call
finishes.  Otherwise, it is the caller&#39;s responsibility to close the
session when finished.</p>

<h3 id="label-Example">Example</h3>

<p>This is very similar to the class method <a href="#start-class_method" title="Net::SMTP.start (method)">start</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>net/smtp</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_smtp'>smtp</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smtp.mail.server</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span>
<span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid_helo_domain'>helo_domain</span><span class='comma'>,</span> <span class='id identifier rubyid_account'>account</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_smtp'>smtp</span><span class='op'>|</span>
  <span class='id identifier rubyid_smtp'>smtp</span><span class='period'>.</span><span class='id identifier rubyid_send_message'>send_message</span> <span class='id identifier rubyid_msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>

<p>The primary use of this method (as opposed to <a href="#start-class_method" title="Net::SMTP.start (method)">start</a>) is probably to
set debugging (#set_debug_output) or ESMTP (#esmtp=), which must be done
before the session is started.</p>

<h3 id="label-Errors">Errors</h3>

<p>If session has already been started, an IOError will be raised.</p>

<p>This method may raise:</p>
<ul><li>
<p><a href="SMTPAuthenticationError.html" title="Net::SMTPAuthenticationError (class)">Net::SMTPAuthenticationError</a></p>
</li><li>
<p><a href="SMTPServerBusy.html" title="Net::SMTPServerBusy (class)">Net::SMTPServerBusy</a></p>
</li><li>
<p><a href="SMTPSyntaxError.html" title="Net::SMTPSyntaxError (class)">Net::SMTPSyntaxError</a></p>
</li><li>
<p><a href="SMTPFatalError.html" title="Net::SMTPFatalError (class)">Net::SMTPFatalError</a></p>
</li><li>
<p><a href="SMTPUnknownError.html" title="Net::SMTPUnknownError (class)">Net::SMTPUnknownError</a></p>
</li><li>
<p>OpenTimeout</p>
</li><li>
<p>ReadTimeout</p>
</li><li>
<p>IOError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


517
518
519
520
521
522
523
524
525
526
527
528
529
530</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 517</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid_helo'>helo</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>   <span class='comment'># :yield: smtp
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='kw'>begin</span>
          <span class='id identifier rubyid_do_start'>do_start</span> <span class='id identifier rubyid_helo'>helo</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span>
          <span class='kw'>return</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
        <span class='kw'>ensure</span>
          <span class='id identifier rubyid_do_finish'>do_finish</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_do_start'>do_start</span> <span class='id identifier rubyid_helo'>helo</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_secret'>secret</span><span class='comma'>,</span> <span class='id identifier rubyid_authtype'>authtype</span>
        <span class='kw'>return</span> <span class='kw'>self</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="started?-instance_method">
  <h3 class='signature'>
  #<strong>started?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p><code>true</code> if the SMTP session has been started.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


462
463
464</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 462</span>

<span class='kw'>def</span> <span class='id identifier rubyid_started?'>started?</span>
      <span class='ivar'>@started</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="starttls-instance_method">
  <h3 class='signature'>
  #<strong>starttls</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


826
827
828</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 826</span>

<span class='kw'>def</span> <span class='id identifier rubyid_starttls'>starttls</span>
      <span class='id identifier rubyid_getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>STARTTLS</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="starttls?-instance_method">
  <h3 class='signature'>
  #<strong>starttls?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns truth value if this object uses STARTTLS. If this object always
uses STARTTLS, returns :always. If this object uses STARTTLS when the
server support TLS, returns :auto.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


320
321
322</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 320</span>

<span class='kw'>def</span> <span class='id identifier rubyid_starttls?'>starttls?</span>
      <span class='ivar'>@starttls</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="starttls_always?-instance_method">
  <h3 class='signature'>
  #<strong>starttls_always?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if this object uses STARTTLS.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


325
326
327</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 325</span>

<span class='kw'>def</span> <span class='id identifier rubyid_starttls_always?'>starttls_always?</span>
      <span class='ivar'>@starttls</span> <span class='op'>==</span> <span class='symbol'>:always</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="starttls_auto?-instance_method">
  <h3 class='signature'>
  #<strong>starttls_auto?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if this object uses STARTTLS when server advertises STARTTLS.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


330
331
332</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_starttls_auto?'>starttls_auto?</span>
      <span class='ivar'>@starttls</span> <span class='op'>==</span> <span class='symbol'>:auto</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="tcp_socket-instance_method">
  <h3 class='signature'>
  #<strong>tcp_socket</strong>(address, port)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


541
542
543</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 541</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tcp_socket'>tcp_socket</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='rparen'>)</span>
      <span class='const'>TCPSocket</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="tls?-instance_method">
  <h3 class='signature'>
  #<strong>tls?</strong>  &#x21d2; <tt>Boolean</tt> 
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>ssl?</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>true if this object uses SMTP/TLS (SMTPS).</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


290
291
292</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 290</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tls?'>tls?</span>
      <span class='ivar'>@tls</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="tlsconnect-instance_method">
  <h3 class='signature'>
  #<strong>tlsconnect</strong>(s)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


582
583
584
585
586
587
588
589
590
591
592
593
594
595</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'net/smtp.rb', line 582</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tlsconnect'>tlsconnect</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_verified'>verified</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_ssl_socket'>ssl_socket</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='ivar'>@ssl_context</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_logging'>logging</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TLS connection started</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_sync_close'>sync_close</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_connect'>connect</span>
      <span class='kw'>if</span> <span class='ivar'>@ssl_context</span><span class='period'>.</span><span class='id identifier rubyid_verify_mode'>verify_mode</span> <span class='op'>!=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>VERIFY_NONE</span>
        <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_post_connection_check'>post_connection_check</span><span class='lparen'>(</span><span class='ivar'>@address</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_verified'>verified</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_s'>s</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span> <span class='kw'>unless</span> <span class='id identifier rubyid_verified'>verified</span>
    <span class='kw'>end</span></pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>