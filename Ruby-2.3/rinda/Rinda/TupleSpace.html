<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Rinda::TupleSpace &mdash; rinda Ruby-2.3.2 p144</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Rinda::TupleSpace",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.3.2</a> &raquo; 
          <a href='../index.html'>rinda</a> &raquo; 
          <a href='../_index.html'>Index (T)</a> &raquo; 
          <a href="../Rinda.html" title="Rinda (module)">Rinda</a> &raquo; 
          <span class='title'>TupleSpace</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Rinda::TupleSpace</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>Rinda::TupleSpace</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Includes:</td>
    <td>
      <div class='box_max'>
        DRbUndumped, MonitorMixin
      </div>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L426'>lib/rinda/tuplespace.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The Tuplespace manages access to the tuples it contains, ensuring mutual
exclusion requirements are met.</p>

<p>The <code>sec</code> option for the write, take, move, read and notify
methods may either be a number of seconds or a Renewer object.</p>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(period = 60)  &#x21d2; TupleSpace </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new TupleSpace.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#create_entry-instance_method" title="#create_entry (instance method)">#<strong>create_entry</strong>(tuple, sec)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#keep_clean-instance_method" title="#keep_clean (instance method)">#<strong>keep_clean</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes dead tuples.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#move-instance_method" title="#move (instance method)">#<strong>move</strong>(port, tuple, sec = nil) {|template| ... } </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Moves <code>tuple</code> to <code>port</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#need_keeper%3F-instance_method" title="#need_keeper? (instance method)">#<strong>need_keeper?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Checks the tuplespace to see if it needs cleaning.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#notify-instance_method" title="#notify (instance method)">#<strong>notify</strong>(event, tuple, sec = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Registers for notifications of <code>event</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#notify_event-instance_method" title="#notify_event (instance method)">#<strong>notify_event</strong>(event, tuple)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Notifies all registered listeners for <code>event</code> of a status change
of <code>tuple</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(tuple, sec = nil) {|template| ... } </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Reads <code>tuple</code>, but does not remove it.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#read_all-instance_method" title="#read_all (instance method)">#<strong>read_all</strong>(tuple)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns all tuples matching <code>tuple</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#start_keeper-instance_method" title="#start_keeper (instance method)">#<strong>start_keeper</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a thread that scans the tuplespace for expired tuples.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#take-instance_method" title="#take (instance method)">#<strong>take</strong>(tuple, sec = nil, &amp;block)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes <code>tuple</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(tuple, sec = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds <code>tuple</code></p>
</div>
      </span>
    </li>
  </ul>



  
  <h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(period = 60)  &#x21d2; <tt><a href="" title="Rinda::TupleSpace (class)">TupleSpace</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new TupleSpace.  <code>period</code> is used to control how often
to look for dead tuples after modifications to the TupleSpace.</p>

<p>If no dead tuples are found <code>period</code> seconds after the last
modification, the TupleSpace will stop looking for dead tuples.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L438'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


438
439
440
441
442
443
444
445
446</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 438</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_period'>period</span><span class='op'>=</span><span class='int'>60</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@bag</span> <span class='op'>=</span> <span class='const'><a href="TupleBag.html" title="Rinda::TupleBag (class)">TupleBag</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="TupleBag.html#new-class_method" title="Rinda::TupleBag.new (method)">new</a></span>
  <span class='ivar'>@read_waiter</span> <span class='op'>=</span> <span class='const'><a href="TupleBag.html" title="Rinda::TupleBag (class)">TupleBag</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="TupleBag.html#new-class_method" title="Rinda::TupleBag.new (method)">new</a></span>
  <span class='ivar'>@take_waiter</span> <span class='op'>=</span> <span class='const'><a href="TupleBag.html" title="Rinda::TupleBag (class)">TupleBag</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="TupleBag.html#new-class_method" title="Rinda::TupleBag.new (method)">new</a></span>
  <span class='ivar'>@notify_waiter</span> <span class='op'>=</span> <span class='const'><a href="TupleBag.html" title="Rinda::TupleBag (class)">TupleBag</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="TupleBag.html#new-class_method" title="Rinda::TupleBag.new (method)">new</a></span>
  <span class='ivar'>@period</span> <span class='op'>=</span> <span class='id identifier rubyid_period'>period</span>
  <span class='ivar'>@keeper</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="create_entry-instance_method">
  <h3 class='signature first'>
  #<strong>create_entry</strong>(tuple, sec)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L578'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


578
579
580</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 578</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_entry'>create_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='rparen'>)</span>
  <span class='const'><a href="TupleEntry.html" title="Rinda::TupleEntry (class)">TupleEntry</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="TupleEntry.html#new-class_method" title="Rinda::TupleEntry.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="keep_clean-instance_method">
  <h3 class='signature'>
  #<strong>keep_clean</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes dead tuples.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L585'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 585</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_keep_clean'>keep_clean</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@read_waiter</span><span class='period'>.</span><span class='id identifier rubyid_delete_unless_alive'>delete_unless_alive</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
      <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_signal'>signal</span>
    <span class='kw'>end</span>
    <span class='ivar'>@take_waiter</span><span class='period'>.</span><span class='id identifier rubyid_delete_unless_alive'>delete_unless_alive</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
      <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_signal'>signal</span>
    <span class='kw'>end</span>
    <span class='ivar'>@notify_waiter</span><span class='period'>.</span><span class='id identifier rubyid_delete_unless_alive'>delete_unless_alive</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
      <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>close</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_delete_unless_alive'>delete_unless_alive</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
      <span class='id identifier rubyid_notify_event'>notify_event</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>delete</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="move-instance_method">
  <h3 class='signature'>
  #<strong>move</strong>(port, tuple, sec = nil) {|template| ... } 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Moves <code>tuple</code> to <code>port</code>.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<tt>template</tt>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L485'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 485</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_move'>move</span><span class='lparen'>(</span><span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'><a href="WaitTemplateEntry.html" title="Rinda::WaitTemplateEntry (class)">WaitTemplateEntry</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="WaitTemplateEntry.html#new-class_method" title="Rinda::WaitTemplateEntry.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='rparen'>)</span>
  <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span>
      <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_notify_event'>notify_event</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>take</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="RequestExpiredError.html" title="Rinda::RequestExpiredError (class)">RequestExpiredError</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>

    <span class='kw'>begin</span>
      <span class='ivar'>@take_waiter</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_start_keeper'>start_keeper</span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_expires'>expires</span>
      <span class='kw'>while</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="RequestCanceledError.html" title="Rinda::RequestCanceledError (class)">RequestCanceledError</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="RequestExpiredError.html" title="Rinda::RequestExpiredError (class)">RequestExpiredError</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>
        <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
          <span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span>
          <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_notify_event'>notify_event</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>take</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
          <span class='kw'>return</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
      <span class='kw'>end</span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@take_waiter</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="need_keeper?-instance_method">
  <h3 class='signature'>
  #<strong>need_keeper?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Checks the tuplespace to see if it needs cleaning.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L632'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


632
633
634
635
636
637</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 632</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_need_keeper?'>need_keeper?</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_has_expires?'>has_expires?</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@read_waiter</span><span class='period'>.</span><span class='id identifier rubyid_has_expires?'>has_expires?</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@take_waiter</span><span class='period'>.</span><span class='id identifier rubyid_has_expires?'>has_expires?</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@notify_waiter</span><span class='period'>.</span><span class='id identifier rubyid_has_expires?'>has_expires?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="notify-instance_method">
  <h3 class='signature'>
  #<strong>notify</strong>(event, tuple, sec = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Registers for notifications of <code>event</code>.  Returns a
NotifyTemplateEntry. See NotifyTemplateEntry for examples of how to listen
for notifications.</p>

<p><code>event</code> can be:</p>
<dl class="rdoc-list note-list"><dt>&#39;write&#39;
<dd>
<p>A tuple was added</p>
</dd><dt>&#39;take&#39;
<dd>
<p>A tuple was taken or moved</p>
</dd><dt>&#39;delete&#39;
<dd>
<p>A tuple was lost after being overwritten or expiring</p>
</dd></dl>

<p>The TupleSpace will also notify you of the &#39;close&#39; event when the
NotifyTemplateEntry has expired.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L568'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


568
569
570
571
572
573
574</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 568</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'><a href="NotifyTemplateEntry.html" title="Rinda::NotifyTemplateEntry (class)">NotifyTemplateEntry</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="NotifyTemplateEntry.html#new-class_method" title="Rinda::NotifyTemplateEntry.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@notify_waiter</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_template'>template</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="notify_event-instance_method">
  <h3 class='signature'>
  #<strong>notify_event</strong>(event, tuple)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Notifies all registered listeners for <code>event</code> of a status change
of <code>tuple</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L606'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


606
607
608
609
610
611</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 606</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_event'>notify_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ev'>ev</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='rbracket'>]</span>
  <span class='ivar'>@notify_waiter</span><span class='period'>.</span><span class='id identifier rubyid_find_all_template'>find_all_template</span><span class='lparen'>(</span><span class='id identifier rubyid_ev'>ev</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_template'>template</span><span class='op'>|</span>
    <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_notify'>notify</span><span class='lparen'>(</span><span class='id identifier rubyid_ev'>ev</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="read-instance_method">
  <h3 class='signature'>
  #<strong>read</strong>(tuple, sec = nil) {|template| ... } 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Reads <code>tuple</code>, but does not remove it.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<tt>template</tt>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L522'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 522</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'><a href="WaitTemplateEntry.html" title="Rinda::WaitTemplateEntry (class)">WaitTemplateEntry</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="WaitTemplateEntry.html#new-class_method" title="Rinda::WaitTemplateEntry.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='rparen'>)</span>
  <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="RequestExpiredError.html" title="Rinda::RequestExpiredError (class)">RequestExpiredError</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>

    <span class='kw'>begin</span>
      <span class='ivar'>@read_waiter</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_start_keeper'>start_keeper</span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_expires'>expires</span>
      <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="RequestCanceledError.html" title="Rinda::RequestCanceledError (class)">RequestCanceledError</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_canceled?'>canceled?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="RequestExpiredError.html" title="Rinda::RequestExpiredError (class)">RequestExpiredError</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_found'>found</span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@read_waiter</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="read_all-instance_method">
  <h3 class='signature'>
  #<strong>read_all</strong>(tuple)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns all tuples matching <code>tuple</code>.  Does not remove the found
tuples.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L546'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


546
547
548
549
550
551
552
553
554</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 546</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_all'>read_all</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'><a href="WaitTemplateEntry.html" title="Rinda::WaitTemplateEntry (class)">WaitTemplateEntry</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="WaitTemplateEntry.html#new-class_method" title="Rinda::WaitTemplateEntry.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
      <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="start_keeper-instance_method">
  <h3 class='signature'>
  #<strong>start_keeper</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a thread that scans the tuplespace for expired tuples.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L616'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


616
617
618
619
620
621
622
623
624
625
626
627</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 616</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_keeper'>start_keeper</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@keeper</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@keeper</span><span class='period'>.</span><span class='id identifier rubyid_alive?'>alive?</span>
  <span class='ivar'>@keeper</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
    <span class='kw'>while</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='ivar'>@period</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_need_keeper?'>need_keeper?</span>
        <span class='id identifier rubyid_keep_clean'>keep_clean</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="take-instance_method">
  <h3 class='signature'>
  #<strong>take</strong>(tuple, sec = nil, &amp;block)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes <code>tuple</code></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L478'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


478
479
480</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 478</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_take'>take</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_move'>move</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="write-instance_method">
  <h3 class='signature'>
  #<strong>write</strong>(tuple, sec = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds <code>tuple</code></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_3/lib/rinda/tuplespace.rb#L451'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rinda/tuplespace.rb', line 451</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_create_entry'>create_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='comma'>,</span> <span class='id identifier rubyid_sec'>sec</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>
      <span class='ivar'>@read_waiter</span><span class='period'>.</span><span class='id identifier rubyid_find_all_template'>find_all_template</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_template'>template</span><span class='op'>|</span>
        <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_notify_event'>notify_event</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>write</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_notify_event'>notify_event</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>delete</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='ivar'>@bag</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_start_keeper'>start_keeper</span> <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expires'>expires</span>
      <span class='ivar'>@read_waiter</span><span class='period'>.</span><span class='id identifier rubyid_find_all_template'>find_all_template</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_template'>template</span><span class='op'>|</span>
        <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_tuple'>tuple</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='ivar'>@take_waiter</span><span class='period'>.</span><span class='id identifier rubyid_find_all_template'>find_all_template</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_template'>template</span><span class='op'>|</span>
        <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_signal'>signal</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_notify_event'>notify_event</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>write</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_entry'>entry</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>