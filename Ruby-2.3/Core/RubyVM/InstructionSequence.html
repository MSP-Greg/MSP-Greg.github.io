<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: RubyVM::InstructionSequence &mdash; Core Ruby-2.3.2 p137</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "RubyVM::InstructionSequence",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.3.2</a> &raquo; 
          <a href='../index.html'>Core</a> &raquo; 
          <a href='../_index.html'>Index (I)</a> &raquo; 
        #  <a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a> &raquo; 
          <span class='title'>InstructionSequence</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: RubyVM::InstructionSequence</h1>

<div class="box_info">
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)">Object</a></li>
            <li class='next'>RubyVM::InstructionSequence</li>
        </ul>
        <a href='#' class='inheritanceTree'>show all</a>
    </dd>
  </dl>



  <dl>
    <dt>Defined in:</dt>
    <dd>iseq.c</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The InstructionSequence class represents a compiled sequence of
instructions for the Ruby Virtual Machine.</p>

<p>With it, you can get a handle to the instructions that make up a method or
a proc, compile strings of Ruby code down to VM instructions, and
disassemble instruction sequences to strings for easy inspection. It is
mostly useful if you want to learn how the Ruby VM works, but it also lets
you control various settings for the Ruby iseq compiler.</p>

<p>You can find the source for the VM instructions in <code>insns.def</code>
in the Ruby source.</p>

<p>The instruction sequence results will almost certainly change as Ruby
changes, so example output in this documentation may be different from what
you see.</p>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#compile-class_method" title="compile (class method)">.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">InstructionSequence.new</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#compile_file-class_method" title="compile_file (class method)">.<strong>compile_file</strong>(file[, options])  &#x21d2; iseq </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Takes <code>file</code>, a String with the location of a Ruby source file,
reads, parses and compiles the file, and returns <code>iseq</code>, the
compiled InstructionSequence with source location metadata set.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#compile_option-class_method" title="compile_option (class method)">.<strong>compile_option</strong>  &#x21d2; options </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a hash of default options used by the Ruby iseq compiler.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#compile_option%3D-class_method" title="compile_option (class method)">.<strong>compile_option</strong>( = options)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sets the default values for various optimizations in the Ruby iseq
compiler.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#disasm-class_method" title="disasm (class method)">.<strong>disasm</strong>(body)  &#x21d2; String </a>
        (also: .disassemble)
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Takes <code>body</code>, a Method or Proc object, and returns a String with
the human readable instructions for <code>body</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#disassemble-class_method" title="disassemble (class method)">.<strong>disassemble</strong>(body)  &#x21d2; String </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#disasm-class_method" title="RubyVM::InstructionSequence.disasm (method)">InstructionSequence.disasm</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#load_from_binary-class_method" title="load_from_binary (class method)">.<strong>load_from_binary</strong>(binary)  &#x21d2; iseq </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Load an iseq object from binary format String object created by
<a href="" title="RubyVM::InstructionSequence (class)">InstructionSequence</a>.to_binary.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#load_from_binary_extra_data-class_method" title="load_from_binary_extra_data (class method)">.<strong>load_from_binary_extra_data</strong>(binary)  &#x21d2; String </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Load extra data embed into binary format String object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
        (also: .compile)
      </span>
      <span class='note title constructor'>constructor</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Takes <code>source</code>, a String of Ruby code and compiles it to an
InstructionSequence.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#of-class_method" title=".of (class method)">.<strong>of</strong>(b)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the instruction sequence containing the given proc or method.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#absolute_path-instance_method" title="#absolute_path (instance method)">#<strong>absolute_path</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the absolute path of this instruction sequence.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#base_label-instance_method" title="#base_label (instance method)">#<strong>base_label</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the base label of this instruction sequence.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#disasm-instance_method" title="#disasm (instance method)">#<strong>disasm</strong>  &#x21d2; String </a>
        (also: #disassemble)
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the instruction sequence as a <a href="../String.html" title="String (class)">String</a> in human readable form.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#disassemble-instance_method" title="#disassemble (instance method)">#<strong>disassemble</strong>  &#x21d2; String </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#disasm-instance_method" title="RubyVM::InstructionSequence#disasm (method)">#disasm</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#eval-instance_method" title="#eval (instance method)">#<strong>eval</strong>  &#x21d2; Object </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Evaluates the instruction sequence and returns the result.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#first_lineno-instance_method" title="#first_lineno (instance method)">#<strong>first_lineno</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the number of the first source line where the instruction sequence
was loaded from.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a human-readable string representation of this instruction
sequence, including the <a href="#label-instance_method" title="RubyVM::InstructionSequence#label (method)">#label</a> and <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#label-instance_method" title="#label (instance method)">#<strong>label</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the label of this instruction sequence.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#line_trace_all-instance_method" title="#line_trace_all (instance method)">#<strong>line_trace_all</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p><strong>Experimental MRI specific feature, only available as C level
api.</strong></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#line_trace_specify-instance_method" title="#line_trace_specify (instance method)">#<strong>line_trace_specify</strong>(p, s)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p><strong>Experimental MRI specific feature, only available as C level
api.</strong></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#marshal_dump-instance_method" title="#marshal_dump (instance method)">#<strong>marshal_dump</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#marshal_load-instance_method" title="#marshal_load (instance method)">#<strong>marshal_load</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the path of this instruction sequence.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an Array with 14 elements representing the instruction sequence
with the following data:</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_binary-instance_method" title="#to_binary (instance method)">#<strong>to_binary</strong>(extra_data = nil)  &#x21d2; binary str </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns serialized iseq binary format data as a String object.</p>
</div>
      </span>
    </li>
  </ul>

<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  <span class='overload'>.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <tt>iseq</tt> </span>
    <span class='overload'>.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <tt>iseq</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Takes <code>source</code>, a String of Ruby code and compiles it to an
InstructionSequence.</p>

<p>Optionally takes <code>file</code>, <code>path</code>, and
<code>line</code> which describe the filename, absolute path and first line
number of the ruby code in <code>source</code> which are metadata attached
to the returned <code>iseq</code>.</p>

<p><code>options</code>, which can be <code>true</code>, <code>false</code> or
a <a href="../Hash.html" title="Hash (class)">Hash</a>, is used to modify the default behavior of the Ruby iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option%3D-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a = 1 + 2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section><h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="compile-class_method">
  <h3 class='signature first'>
  <span class='overload'>.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <tt>iseq</tt> </span>
    <span class='overload'>.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <tt>iseq</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">new</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="compile_file-class_method">
  <h3 class='signature'>
  .<strong>compile_file</strong>(file[, options])  &#x21d2; <tt>iseq</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Takes <code>file</code>, a String with the location of a Ruby source file,
reads, parses and compiles the file, and returns <code>iseq</code>, the
compiled InstructionSequence with source location metadata set.</p>

<p>Optionally takes <code>options</code>, which can be <code>true</code>,
<code>false</code> or a <a href="../Hash.html" title="Hash (class)">Hash</a>, to modify the default behavior of the Ruby
iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option%3D-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/hello.rb
</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># elsewhere
</span><span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile_file'>compile_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/hello.rb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;main&gt;@/tmp/hello.rb&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="compile_option-class_method">
  <h3 class='signature'>
  .<strong>compile_option</strong>  &#x21d2; <tt>options</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a hash of default options used by the Ruby iseq compiler.</p>

<p>For details, see <a href="#compile_option%3D-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">compile_option=</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="compile_option=-class_method">
  <h3 class='signature'>
  .<strong>compile_option</strong>( = options)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the default values for various optimizations in the Ruby iseq
compiler.</p>

<p>Possible values for <code>options</code> include <code>true</code>, which
enables all options, <code>false</code> which disables all options, and
<code>nil</code> which leaves all options unchanged.</p>

<p>You can also pass a <a href="../Hash.html" title="Hash (class)">Hash</a> of <code>options</code> that you want to change,
any options not present in the hash will be left unchanged.</p>

<p>Possible option names (which are keys in <code>options</code>) which can be
set to <code>true</code> or <code>false</code> include:</p>
<ul><li>
<p><code>:inline_const_cache</code></p>
</li><li>
<p><code>:instructions_unification</code></p>
</li><li>
<p><code>:operands_unification</code></p>
</li><li>
<p><code>:peephole_optimization</code></p>
</li><li>
<p><code>:specialized_instruction</code></p>
</li><li>
<p><code>:stack_caching</code></p>
</li><li>
<p><code>:tailcall_optimization</code></p>
</li><li>
<p><code>:trace_instruction</code></p>
</li></ul>

<p>Additionally, <code>:debug_level</code> can be set to an integer.</p>

<p>These default options can be overwritten for a single run of the iseq
compiler by passing any of the above values as the <code>options</code>
parameter to <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">new</a>, <a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a> and <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="disasm-class_method">
  <h3 class='signature'>
  <span class='overload'>.<strong>disasm</strong>(body)  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
    <span class='overload'>.<strong>disassemble</strong>(body)  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Takes <code>body</code>, a Method or Proc object, and returns a String with
the human readable instructions for <code>body</code>.</p>

<p>For a Method object:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/method.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_disasm'>disasm</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:hello</span><span class='rparen'>)</span><span class='rparen'>)</span>
</code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby">== disasm: &lt;RubyVM::InstructionSequence:hello@/tmp/method.rb&gt;============
0000 trace            8                                               (   1)
0002 trace            1                                               (   2)
0004 putself
0005 putstring        &quot;hello, world&quot;
0007 send             :puts, 1, nil, 8, &lt;ic:0&gt;
0013 trace            16                                              (   3)
0015 leave                                                            (   2)</code></pre>

<p>For a Proc:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/proc.rb
</span><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>1</span> <span class='op'>+</span> <span class='int'>2</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_disasm'>disasm</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
</code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby">== disasm: &lt;RubyVM::InstructionSequence:block in &lt;main&gt;@/tmp/proc.rb&gt;===
== catch table
| catch type: redo   st: 0000 ed: 0012 sp: 0000 cont: 0000
| catch type: next   st: 0000 ed: 0012 sp: 0000 cont: 0012
|------------------------------------------------------------------------
local table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1] s1)
[ 2] num
0000 trace            1                                               (   1)
0002 putobject        1
0004 putobject        2
0006 opt_plus         &lt;ic:1&gt;
0008 dup
0009 setlocal         num, 0
0012 leave</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="disassemble-class_method">
  <h3 class='signature'>
  <span class='overload'>.<strong>disasm</strong>(body)  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
    <span class='overload'>.<strong>disassemble</strong>(body)  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#disasm-class_method" title="RubyVM::InstructionSequence.disasm (method)">disasm</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="load_from_binary-class_method">
  <h3 class='signature'>
  .<strong>load_from_binary</strong>(binary)  &#x21d2; <tt>iseq</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Load an iseq object from binary format String object created by
<a href="" title="RubyVM::InstructionSequence (class)">RubyVM::InstructionSequence</a>.to_binary.</p>

<p>This loader does not have a verifier, so that loading broken/modified
binary causes critical problem.</p>

<p>You should not load binary data provided by others. You should use binary
data translated by yourself.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="load_from_binary_extra_data-class_method">
  <h3 class='signature'>
  .<strong>load_from_binary_extra_data</strong>(binary)  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Load extra data embed into binary format String object.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="of-class_method">
  <h3 class='signature'>
  .<strong>of</strong>(b)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the instruction sequence containing the given proc or method.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"># a proc
&gt; p = proc { num = 1 + 2 }
&gt; RubyVM::InstructionSequence.of(p)
&gt; #=&gt; &lt;RubyVM::InstructionSequence:block in irb_binding@(irb)&gt;

# for a method
&gt; def foo(bar); puts bar; end
&gt; RubyVM::InstructionSequence.of(method(:foo))
&gt; #=&gt; &lt;RubyVM::InstructionSequence:foo@(irb)&gt;</code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/iseq_of.rb
def hello
  puts &quot;hello, world&quot;
end

$a_global_proc = proc { str = &#39;a&#39; + &#39;b&#39; }

# in irb
&gt; require &#39;/tmp/iseq_of.rb&#39;

# first the method hello
&gt; RubyVM::InstructionSequence.of(method(:hello))
&gt; #=&gt; #&lt;RubyVM::InstructionSequence:0x007fb73d7cb1d0&gt;

# then the global proc
&gt; RubyVM::InstructionSequence.of($a_global_proc)
&gt; #=&gt; #&lt;RubyVM::InstructionSequence:0x007fb73d7caf78&gt;</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="absolute_path-instance_method">
  <h3 class='signature first'>
  #<strong>absolute_path</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the absolute path of this instruction sequence.</p>

<p><code>nil</code> if the iseq was evaluated from a string.</p>

<p>For example, using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.absolute_path #=&gt; /tmp/method.rb</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="base_label-instance_method">
  <h3 class='signature'>
  #<strong>base_label</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the base label of this instruction sequence.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_base_label'>base_label</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;
</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.base_label #=&gt; &lt;main&gt;</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="disasm-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>disasm</strong>  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
    <span class='overload'>#<strong>disassemble</strong>  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the instruction sequence as a <a href="../String.html" title="String (class)">String</a> in human readable form.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_puts'>puts</span> <span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_disasm'>disasm</span>
</code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby">== disasm: &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;==========
0000 trace            1                                               (   1)
0002 putobject        1
0004 putobject        2
0006 opt_plus         &lt;ic:1&gt;
0008 leave</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="disassemble-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>disasm</strong>  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
    <span class='overload'>#<strong>disassemble</strong>  &#x21d2; <tt><a href="../String.html" title="String (class)">String</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#disasm-instance_method" title="RubyVM::InstructionSequence#disasm (method)">#disasm</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="eval-instance_method">
  <h3 class='signature'>
  #<strong>eval</strong>  &#x21d2; <tt><a href="../Object.html" title="Object (class)">Object</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Evaluates the instruction sequence and returns the result.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1 + 2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_eval'>eval</span> <span class='comment'>#=&gt; 3
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="first_lineno-instance_method">
  <h3 class='signature'>
  #<strong>first_lineno</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the number of the first source line where the instruction sequence
was loaded from.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_first_lineno'>first_lineno</span>
<span class='comment'>#=&gt; 1
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="inspect-instance_method">
  <h3 class='signature'>
  #<strong>inspect</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a human-readable string representation of this instruction
sequence, including the <a href="#label-instance_method" title="RubyVM::InstructionSequence#label (method)">#label</a> and <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="label-instance_method">
  <h3 class='signature'>
  #<strong>label</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the label of this instruction sequence.</p>

<p><code>&lt;main&gt;</code> if it&#39;s at the top level,
<code>&lt;compiled&gt;</code> if it was evaluated from a string.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;
</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.label #=&gt; &lt;main&gt;</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="line_trace_all-instance_method">
  <h3 class='signature'>
  #<strong>line_trace_all</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p><strong>Experimental MRI specific feature, only available as C level
api.</strong></p>

<p>Returns all <code>specified_line</code> events.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="line_trace_specify-instance_method">
  <h3 class='signature'>
  #<strong>line_trace_specify</strong>(p, s)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p><strong>Experimental MRI specific feature, only available as C level
api.</strong></p>

<p>Set a <code>specified_line</code> event at the given line position, if the
<code>set</code> parameter is <code>true</code>.</p>

<p>This method is useful for building a debugger breakpoint at a specific
line.</p>

<p>A TypeError is raised if <code>set</code> is not boolean.</p>

<p>If <code>pos</code> is a negative integer a TypeError exception is raised.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="marshal_dump-instance_method">
  <h3 class='signature'>
  #<strong>marshal_dump</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>

</section>  <section class='method_details' id="marshal_load-instance_method">
  <h3 class='signature'>
  #<strong>marshal_load</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>

</section>  <section class='method_details' id="path-instance_method">
  <h3 class='signature'>
  #<strong>path</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the path of this instruction sequence.</p>

<p><code>&lt;compiled&gt;</code> if the iseq was evaluated from a string.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'>RubyVM</span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;
</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.path #=&gt; /tmp/method.rb</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="to_a-instance_method">
  <h3 class='signature'>
  #<strong>to_a</strong>  &#x21d2; <tt><a href="../Array.html" title="Array (class)">Array</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an Array with 14 elements representing the instruction sequence
with the following data:</p>
<dl class="rdoc-list label-list"><dt>magic
<dd>
<p>A string identifying the data format. <strong>Always
<code>YARVInstructionSequence/SimpleDataFormat</code>.</strong></p>
</dd><dt>major_version
<dd>
<p>The major version of the instruction sequence.</p>
</dd><dt>minor_version
<dd>
<p>The minor version of the instruction sequence.</p>
</dd><dt>format_type
<dd>
<p>A number identifying the data format. <strong>Always 1</strong>.</p>
</dd><dt>misc
<dd>
<p>A hash containing:</p>
<dl class="rdoc-list label-list"><dt><code>:arg_size</code>
<dd>
<p>the total number of arguments taken by the method or the block (0 if
<em>iseq</em> doesn&#39;t represent a method or block)</p>
<dl class="rdoc-list label-list"><dt><code>:local_size</code>
<dd>
<p>the number of local variables + 1</p>
<dl class="rdoc-list label-list"><dt><code>:stack_max</code>
<dd>
<p>used in calculating the stack depth at which a SystemStackError is thrown.</p>
</dd></dl>
</dd></dl>
</dd></dl>
</dd><dt>#label
<dd>
<p>The name of the context (block, method, class, module, etc.) that this
instruction sequence belongs to.</p>

<p><code>&lt;main&gt;</code> if it&#39;s at the top level,
<code>&lt;compiled&gt;</code> if it was evaluated from a string.</p>
</dd><dt>#path
<dd>
<p>The relative path to the Ruby file where the instruction sequence was
loaded from.</p>

<p><code>&lt;compiled&gt;</code> if the iseq was evaluated from a string.</p>
</dd><dt>#absolute_path
<dd>
<p>The absolute path to the Ruby file where the instruction sequence was
loaded from.</p>

<p><code>nil</code> if the iseq was evaluated from a string.</p>
</dd><dt>#first_lineno
<dd>
<p>The number of the first source line where the instruction sequence was
loaded from.</p>
</dd><dt>type
<dd>
<p>The type of the instruction sequence.</p>

<p>Valid values are <code>:top</code>, <code>:method</code>,
<code>:block</code>, <code>:class</code>, <code>:rescue</code>,
<code>:ensure</code>, <code>:eval</code>, <code>:main</code>, and
<code>:defined_guard</code>.</p>
</dd><dt>locals
<dd>
<p>An array containing the names of all arguments and local variables as
symbols.</p>
</dd><dt>params
<dd>
<p>An Hash object containing parameter information.</p>

<p>More info about these values can be found in <code>vm_core.h</code>.</p>
</dd><dt>catch_table
<dd>
<p>A list of exceptions and control flow operators (rescue, next, redo, break,
etc.).</p>
</dd><dt>bytecode
<dd>
<p>An array of arrays containing the instruction names and operands that make
up the body of the instruction sequence.</p>
</dd></dl>

<p>Note that this format is MRI specific and version dependent.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>  <section class='method_details' id="to_binary-instance_method">
  <h3 class='signature'>
  #<strong>to_binary</strong>(extra_data = nil)  &#x21d2; <tt>binary str</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns serialized iseq binary format data as a String object. A
corresponding iseq object is created by
<a href="" title="RubyVM::InstructionSequence (class)">RubyVM::InstructionSequence</a>.load_from_binary() method.</p>

<p>String extra_data will be saved with binary data. You can access this data
with <a href="" title="RubyVM::InstructionSequence (class)">RubyVM::InstructionSequence</a>.load_from_binary_extra_data(binary).</p>

<p>Note that the translated binary data is not portable. You can not move this
binary data to another machine. You can not use the binary data which is
created by another version/another architecture of Ruby.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>