<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Action Controller Advanced Topics &mdash; Rails 8-0-stable</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "action_controller_advanced_topics",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rails 8-0-stable</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Action Controller Advanced Topics&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<p><strong>DO NOT READ THIS FILE ON GITHUB, GUIDES ARE PUBLISHED ON <a href="https://guides.rubyonrails.org">https://guides.rubyonrails.org</a>.</strong></p>

<h1>Action Controller Advanced Topics</h1>

<p>In this guide, you will learn about some advanced topics related to controllers. After reading this guide, you will know how to:</p>

<ul>
<li>Protect against cross-site request forgery.</li>
<li>Use Action Controller&#39;s built-in HTTP authentication.</li>
<li>Stream data directly to the user&#39;s browser.</li>
<li>Filter sensitive parameters from the application logs.</li>
<li>Handle exceptions that may be raised during request processing.</li>
<li>Use the built-in health check endpoint for load balancers and uptime monitors.</li>
</ul>

<hr>

<h2>Introduction</h2>

<p>This guide covers a number of advanced topics related to controllers in a <a href="Rails.html" title="Rails (module)"><code>Rails</code></a>
application. Please see the <a href="action_controller_overview.html">Action Controller
Overview</a> guide for an introduction to Action
Controllers.</p>

<h2>Authenticity Token and Request Forgery Protection</h2>

<p>Cross-site request forgery
(<a href="https://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection.html#method-i-form_authenticity_token">CSRF</a>)
is a type of malicious attack where unauthorized requests are submitted by
impersonating a user that the web application trusts.</p>

<p>The first step to avoid this type of attack is to ensure that all &quot;destructive&quot;
actions (create, update, and destroy) in your application use non-GET requests (like POST, PUT and DELETE).</p>

<p>However, a malicious site can still send a non-GET request to your site, so
<a href="Rails.html" title="Rails (module)"><code>Rails</code></a> builds in request forgery protection into controllers by default.</p>

<p>This is done by adding a token using the
<a href="https://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html#method-i-protect_from_forgery">protect_from_forgery</a>
method. This token is added to each request and is only known to your server.
<a href="Rails.html" title="Rails (module)"><code>Rails</code></a> verifies the received token with the token in the session. If an incoming
request does not have the proper matching token, the server will deny access.</p>

<p>The CSRF token is added automatically when <code>config.action_controller.default_protect_from_forgery</code> is set to <code>true</code>, which is the default for newly created <a href="Rails.html" title="Rails (module)"><code>Rails</code></a> applications. It can also be manually like this:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='id identifier rubyid_protect_from_forgery'>protect_from_forgery</span> <span class='label'>with:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_exception'>exception</span>
<span class='kw'>end</span></code></pre>

<p>NOTE: All subclasses of <a href="ActionController/Base.html" title="ActionController::Base (class)"><code>::ActionController::Base</code></a> are protected by default and
will raise an <a href="ActionController/InvalidAuthenticityToken.html" title="ActionController::InvalidAuthenticityToken (class)"><code>::ActionController::InvalidAuthenticityToken</code></a> error on unverified
requests.</p>

<h3>Authenticity Token in Forms</h3>

<p>When you generate a form using <code>form_with</code> like this:</p>

<pre class="code xml"><code class="xml">&lt;%= form_with model: @user do |form| %&gt;
  &lt;%= form.text_field :username %&gt;
  &lt;%= form.text_field :password %&gt;
&lt;% end %&gt;
</code></pre>

<p>A CSRF token named <code>authenticity_token</code> is automatically added as a hidden field
in the generated HTML:</p>

<pre class="code xml"><code class="xml">&lt;form accept-charset=&quot;UTF-8&quot; action=&quot;/users/1&quot; method=&quot;post&quot;&gt;
&lt;input type=&quot;hidden&quot;
       value=&quot;67250ab105eb5ad10851c00a5621854a23af5489&quot;
       name=&quot;authenticity_token&quot;/&gt;
&lt;!-- fields --&gt;
&lt;/form&gt;
</code></pre>

<p>Rails adds this token to every <code>form</code> that&#39;s generated using the <a href="form_helpers.html">form
helpers</a>, so most of the time you don&#39;t need to do anything.
If you&#39;re writing a form manually or need to add the token for another reason,
it&#39;s available through the
<a href="https://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection.html#method-i-form_authenticity_token"><code>form_authenticity_token</code></a>
method.</p>

<pre class="code xml"><code class="xml">&lt;!-- app/views/layouts/application.html.erb --&gt;
&lt;head&gt;
  &lt;meta name=&quot;csrf-token&quot; content=&quot;&lt;%= form_authenticity_token %&gt;&quot;&gt;
&lt;/head&gt;
</code></pre>

<p>The <code>form_authenticity_token</code> method generates a valid authentication token.
That can be useful in places where Rails does not add it automatically, like in
custom Ajax calls.</p>

<p>You can learn more details about the CSRF attack as well as CSRF countermeasures
in the <a href="security.html#cross-site-request-forgery-csrf">Security Guide</a>.</p>

<h2>Controlling Allowed Browser Versions</h2>

<p>Starting with version 7.2, Rails controllers use <a href="https://api.rubyonrails.org/classes/ActionController/AllowBrowser/ClassMethods.html#method-i-allow_browser"><code>allow_browser</code></a> method in <code>ApplicationController</code> to allow only modern browsers by default.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='comment'># Only allow modern browsers supporting webp images, web push, badges, import # maps, CSS nesting, and CSS :has.
</span>  <span class='id identifier rubyid_allow_browser'>allow_browser</span> <span class='label'>versions:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_modern'>modern</span>
<span class='kw'>end</span></code></pre>

<p>TIP: Modern browsers includes Safari 17.2+, Chrome 120+, Firefox 121+, Opera 106+. You can use <a href="https://caniuse.com/">caniuse.com</a> to check for browser versions supporting the features you&#39;d like to use.</p>

<p>In addition to the default of <code>:modern</code>, you can also specify the browser versions manually:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='comment'># All versions of Chrome and Opera will be allowed, but no versions of &quot;internet explorer&quot; (ie). Safari needs to be 16.4+ and Firefox 121+.
</span>  <span class='id identifier rubyid_allow_browser'>allow_browser</span> <span class='label'>versions:</span> { <span class='label'>safari:</span> <span class='float'>16.4</span><span class='comma'>,</span> <span class='label'>firefox:</span> <span class='int'>121</span><span class='comma'>,</span> <span class='label'>ie:</span> <span class='kw'>false</span> }
<span class='kw'>end</span></code></pre>

<p>Browsers matched in the hash passed to <code>versions:</code> will be blocked if they’re below the versions specified. This means that all other browsers not mentioned in <code>versions:</code> (Chrome and Opera in the above example), as well as agents that aren’t reporting a user-agent header, <em>will be</em> allowed access.</p>

<p>You can also use <code>allow_browser</code> in a given controller and specify actions using <code>only</code> or <code>except</code>. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MessagesController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='comment'># In addition to the browsers blocked by ApplicationController, also block Opera below 104 and Chrome below 119 for the show action.
</span>  <span class='id identifier rubyid_allow_browser'>allow_browser</span> <span class='label'>versions:</span> { <span class='label'>opera:</span> <span class='int'>104</span><span class='comma'>,</span> <span class='label'>chrome:</span> <span class='int'>119</span> }<span class='comma'>,</span> <span class='label'>only:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_show'>show</span>
<span class='kw'>end</span></code></pre>

<p>A browser that’s blocked will, by default, be served the file in <code>public/406-unsupported-browser.html</code> with a HTTP status code of “406 Not Acceptable”.</p>

<h2>HTTP Authentication</h2>

<p>Rails comes with three built-in HTTP authentication mechanisms:</p>

<ul>
<li>Basic Authentication</li>
<li>Digest Authentication</li>
<li>Token Authentication</li>
</ul>

<h3>HTTP Basic Authentication</h3>

<p>HTTP Basic Authentication is a simple authentication method where a user is
required to enter a username and password to access a website or a particular
section of a website (e.g. admin section). These credentials are entered into a
browser&#39;s HTTP basic dialog window. The user’s credentials are then encoded and
sent in the HTTP header with each request.</p>

<p>HTTP basic authentication is an authentication scheme that is supported by most
browsers. Using HTTP Basic authentication in a Rails controller can be done by
using the <a href="https://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic/ControllerMethods/ClassMethods.html#method-i-http_basic_authenticate_with"><code>http_basic_authenticate_with</code></a> method:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>AdminsController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='id identifier rubyid_http_basic_authenticate_with'>http_basic_authenticate_with</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Arthur</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>password:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>42424242</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>With the above in place, you can create controllers that inherit from
<code>AdminsController</code>. All actions in those controllers will use HTTP basic
authentication and require user credentials.</p>

<p>WARNING: HTTP Basic Authentication is easy to implement but not secure on its
own, as it will send unencrypted credentials over the network. Make sure to use
HTTPS when using Basic Authentication. You can also <a href="#force-https-protocol">force
HTTPS</a>.</p>

<h3>HTTP Digest Authentication</h3>

<p>HTTP digest authentication is more secure than basic authentication as it does
not require the client to send an unencrypted password over the network. The
credentials are hashed instead and a
<a href="https://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Digest.html">Digest</a>
is sent.</p>

<p>Using digest authentication with Rails can be done by using
the <a href="https://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Digest/ControllerMethods.html#method-i-authenticate_or_request_with_http_digest"><code>authenticate_or_request_with_http_digest</code></a> method:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>AdminsController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='const'>USERS</span> <span class='op'>=</span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>helloworld</span><span class='tstring_end'>&quot;</span></span> }

  <span class='id identifier rubyid_before_action'>before_action</span> <span class='symbeg'>:</span><span class='id identifier rubyid_authenticate'>authenticate</span>

  <span class='id identifier rubyid_private'>private</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_authenticate'>authenticate</span>
      <span class='id identifier rubyid_authenticate_or_request_with_http_digest'>authenticate_or_request_with_http_digest</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_username'>username</span><span class='op'>|</span>
        <span class='const'>USERS</span>[<span class='id identifier rubyid_username'>username</span>]
      <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The <code>authenticate_or_request_with_http_digest</code> block takes only one argument -
the username. The block returns the password if found. If the return value is
<code>false</code> or <code>nil</code>, it is considered an authentication failure.</p>

<h3>HTTP Token Authentication</h3>

<p>Token authentication (aka &quot;Bearer&quot; authentication) is an authentication method
where a client receives a unique token after successfully logging in, which it
then includes in the <code>Authorization</code> header of future requests. Instead of
sending credentials with each request, the client sends this
<a href="https://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Token.html">token</a>
(a string that represents the user&#39;s session) as a &quot;bearer&quot; of the
authentication.</p>

<p>This approach improves security by separating credentials from the ongoing
session. You use an authentication token that has been issued in advance to
perform authentication.</p>

<p>Implementing token authentication with Rails can be done using the
<a href="https://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Token/ControllerMethods.html#method-i-authenticate_or_request_with_http_token"><code>authenticate_or_request_with_http_token</code></a> method.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>PostsController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='const'>TOKEN</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>secret</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_before_action'>before_action</span> <span class='symbeg'>:</span><span class='id identifier rubyid_authenticate'>authenticate</span>

  <span class='id identifier rubyid_private'>private</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_authenticate'>authenticate</span>
      <span class='id identifier rubyid_authenticate_or_request_with_http_token'>authenticate_or_request_with_http_token</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>|</span>
        <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SecurityUtils.html" title="ActiveSupport::SecurityUtils (module)">SecurityUtils</a></span>.<span class='id identifier rubyid_secure_compare'><a href="ActiveSupport/SecurityUtils.html#secure_compare-class_method" title="ActiveSupport::SecurityUtils.secure_compare (method)">secure_compare</a></span>(<span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='const'>TOKEN</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The <code>authenticate_or_request_with_http_token</code> block takes two arguments - the
token and a hash containing the options that were parsed from the HTTP
<code>Authorization</code> header. The block should return <code>true</code> if the authentication is
successful. Returning <code>false</code> or <code>nil</code> will cause an authentication failure.</p>

<h2>Streaming and File Downloads</h2>

<p>Rails controllers provide a way to send a file to the user instead of rendering
an HTML page. This can be done with the <a href="https://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data"><code>send_data</code></a> and the <a href="https://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_file"><code>send_file</code></a>
methods, which stream data to the client. The <code>send_file</code> method is a
convenience method that lets you provide the name of a file, and it will stream
the contents of that file.</p>

<p>Here is an example of how to use <code>send_data</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prawn</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>class</span> <span class='const'>ClientsController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='comment'># Generates a PDF document with information on the client and
</span>  <span class='comment'># returns it. The user will get the PDF as a file download.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_download_pdf'>download_pdf</span>
    <span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'>Client</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>])
    <span class='id identifier rubyid_send_data'>send_data</span> <span class='id identifier rubyid_generate_pdf'>generate_pdf</span>(<span class='id identifier rubyid_client'>client</span>)<span class='comma'>,</span>
              <span class='label'>filename:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.pdf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/pdf</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_generate_pdf'>generate_pdf</span>(<span class='id identifier rubyid_client'>client</span>)
      <span class='const'>Prawn</span><span class='op'>::</span><span class='const'>Document</span>.<span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_text'>text</span> <span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>align:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_center'>center</span>
        <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Address: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_address'>address</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Email: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>.<span class='id identifier rubyid_render'>render</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The <code>download_pdf</code> action in the above example calls a private method which
generates the PDF document and returns it as a string. This string will then be
streamed to the client as a file download.</p>

<p>Sometimes when streaming files to the user, you may not want them to download
the file. Take images, for example, which can be embedded into HTML pages. To
tell the browser a file is not meant to be downloaded, you can set the
<code>:disposition</code> option to &quot;inline&quot;. The default value for this option is
&quot;attachment&quot;.</p>

<h3>Sending Files</h3>

<p>If you want to send a file that already exists on disk, use the <code>send_file</code>
method.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ClientsController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='comment'># Stream a file that has already been generated and stored on disk.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_download_pdf'>download_pdf</span>
    <span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'>Client</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>])
    <span class='id identifier rubyid_send_file'>send_file</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_root'><a href="Rails.html#root-class_method" title="Rails.root (method)">root</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>/files/clients/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.pdf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='label'>filename:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.pdf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/pdf</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The file will be read and streamed at 4 kB at a time by default, to avoid loading
the entire file into memory at once. You can turn off streaming with the
<code>:stream</code> option or adjust the block size with the <code>:buffer_size</code> option.</p>

<p>If <code>:type</code> is not specified, it will be guessed from the file extension
specified in <code>:filename</code>. If the content-type is not registered for the
extension, <code>application/octet-stream</code> will be used.</p>

<p>WARNING: Be careful when using data coming from the client (params, cookies,
etc.) to locate the file on disk. This is a security risk as it might allow
someone to gain access to sensitive files.</p>

<p>TIP: It is not recommended that you stream static files through Rails if you can
instead keep them in a public folder on your web server. It is much more
efficient to let the user download the file directly using Apache or another web
server, keeping the request from unnecessarily going through the whole Rails
stack.</p>

<h3>RESTful Downloads</h3>

<p>While <code>send_data</code> works fine, if you are creating a RESTful application having
separate actions for file downloads is usually not necessary. In REST
terminology, the PDF file from the example above can be considered just another
representation of the client resource. Rails provides a slick way of doing
&quot;RESTful&quot; downloads. Here&#39;s how you can rewrite the example so that the PDF
download is a part of the <code>show</code> action, without any streaming:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ClientsController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='comment'># The user can request to receive this resource as HTML or PDF.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_show'>show</span>
    <span class='ivar'>@client</span> <span class='op'>=</span> <span class='const'>Client</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>])

    <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
      <span class='id identifier rubyid_format'>format</span>.<span class='id identifier rubyid_html'>html</span>
      <span class='id identifier rubyid_format'>format</span>.<span class='id identifier rubyid_pdf'>pdf</span> { <span class='id identifier rubyid_render'>render</span> <span class='label'>pdf:</span> <span class='id identifier rubyid_generate_pdf'>generate_pdf</span>(<span class='ivar'>@client</span>) }
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Now the user can request to get a PDF version of a client just by adding &quot;.pdf&quot;
to the URL:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>GET</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>clients</span><span class='regexp_end'>/</span></span><span class='int'>1</span>.<span class='id identifier rubyid_pdf'>pdf</span></code></pre>

<p>You can call any method on <code>format</code> that is an extension registered as a MIME
type by Rails. Rails already registers common MIME types like <code>&quot;text/html&quot;</code> and
<code>&quot;application/pdf&quot;</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Mime.html" title="Mime (module)">Mime</a></span><span class='op'>::</span><span class='const'><a href="Mime/Type.html" title="Mime::Type (class)">Type</a></span>.<span class='id identifier rubyid_lookup_by_extension'><a href="Mime/Type.html#lookup_by_extension-class_method" title="Mime::Type.lookup_by_extension (method)">lookup_by_extension</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pdf'>pdf</span>)
<span class='comment'># =&gt; &quot;application/pdf&quot;</span></code></pre>

<p>If you need additional MIME types, call
<a href="https://api.rubyonrails.org/classes/Mime/Type.html#method-c-register"><a href="Mime/Type.html#register-class_method" title="Mime::Type.register (method)">Mime::Type.register</a></a>
in the file <code>config/initializers/mime_types.rb</code>. For example, this is how you
would register the Rich Text Format (RTF):</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Mime.html" title="Mime (module)">Mime</a></span><span class='op'>::</span><span class='const'><a href="Mime/Type.html" title="Mime::Type (class)">Type</a></span>.<span class='id identifier rubyid_register'><a href="Mime/Type.html#register-class_method" title="Mime::Type.register (method)">register</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/rtf</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rtf'>rtf</span>)</code></pre>

<p>NOTE: If you modify an initializer file, you have to restart the server for
their changes to take effect.</p>

<h3>Live Streaming of Arbitrary Data</h3>

<p>Rails allows you to stream more than just files. In fact, you can stream
anything you would like in a response object. The
<a href="https://api.rubyonrails.org/classes/ActionController/Live.html"><a href="ActionController/Live.html" title="ActionController::Live (module)"><code>::ActionController::Live</code></a></a>
module allows you to create a persistent connection with a browser. By including
this module in your controller, you can send arbitrary data to the browser at
specific points in time.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MyController</span> <span class='op'>&lt;</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Live.html" title="ActionController::Live (module)">Live</a></span>

  <span class='kw'>def</span> <span class='id identifier rubyid_stream'>stream</span>
    <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_headers'>headers</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/event-stream</span><span class='tstring_end'>&quot;</span></span>
    <span class='int'>100</span>.<span class='id identifier rubyid_times'>times</span> {
      <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello world\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span>
    }
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The above example will keep a persistent connection with the browser and send
100 messages of <code>&quot;hello world\n&quot;</code>, each one second apart.</p>

<p>Note that you have to make sure to close the response stream, otherwise the
stream will leave the socket open indefinitely. You also have to set the content
type to <code>text/event-stream</code> <em>before</em> calling <code>write</code> on the response stream.
Headers cannot be written after the response has been committed (when
<code>response.committed?</code> returns a truthy value) with either <code>write</code> or <code>commit</code>.</p>

<h4>Example Use Case</h4>

<p>Let&#39;s suppose that you were making a karaoke machine, and a user wants to get
the lyrics for a particular song. Each <code>Song</code> has a particular number of lines
and each line takes time <code>num_beats</code> to finish singing.</p>

<p>If we wanted to return the lyrics in karaoke fashion (only sending the line when
the singer has finished the previous line), then we could use
<a href="ActionController/Live.html" title="ActionController::Live (module)"><code>::ActionController::Live</code></a> as follows:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>LyricsController</span> <span class='op'>&lt;</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Live.html" title="ActionController::Live (module)">Live</a></span>

  <span class='kw'>def</span> <span class='id identifier rubyid_show'>show</span>
    <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_headers'>headers</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/event-stream</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_headers'>headers</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cache-Control</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>no-cache</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_song'>song</span> <span class='op'>=</span> <span class='const'>Song</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>])

    <span class='id identifier rubyid_song'>song</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
      <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_lyrics'>lyrics</span>
      <span class='id identifier rubyid_sleep'>sleep</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_num_beats'>num_beats</span>
    <span class='kw'>end</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_response'>response</span>.<span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<h4>Streaming Considerations</h4>

<p>Streaming arbitrary data is an extremely powerful tool. As shown in the previous
examples, you can choose when and what to send across a response stream.
However, you should also note the following things:</p>

<ul>
<li>Each response stream creates a new thread and copies over the thread local
variables from the original thread. Having too many thread local variables can
negatively impact performance. Similarly, a large number of threads can also
hinder performance.</li>
<li>Failing to close the response stream will leave the corresponding socket open
forever. Make sure to call <code>close</code> whenever you are using a response stream.</li>
<li>WEBrick servers buffer all responses, and so streaming with
<a href="ActionController/Live.html" title="ActionController::Live (module)"><code>::ActionController::Live</code></a> will not work. You must use a web server which does
not automatically buffer responses.</li>
</ul>

<h2>Log Filtering</h2>

<p>Rails keeps a log file for each environment in the <code>log</code> folder at the
application&#39;s root directory. Log files are extremely useful when debugging your
application, but in a production environment you may not want every bit of
information stored in log files. Rails allows you to specify parameters that
should not be stored.</p>

<h3>Parameters Filtering</h3>

<p>You can filter out sensitive request parameters from your log files by appending
them to <a href="configuring.html#config-filter-parameters"><code>config.filter_parameters</code></a> in the application configuration.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_filter_parameters'>filter_parameters</span> <span class='op'>&lt;&lt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_password'>password</span></code></pre>

<p>These parameters will be marked <code>[FILTERED]</code> in the log.</p>

<p>The parameters specified in <code>filter_parameters</code> will be filtered out with
partial matching regular expression. So for example, <code>:passw</code> will filter out
<code>password</code>, <code>password_confirmation</code>, etc.</p>

<p>Rails adds a list of default filters, including <code>:passw</code>, <code>:secret</code>, and
<code>:token</code>, in the appropriate initializer
(<code>initializers/filter_parameter_logging.rb</code>) to handle typical application
parameters like <code>password</code>, <code>password_confirmation</code> and <code>my_token</code>.</p>

<h3>Redirects Filtering</h3>

<p>Sometimes it&#39;s desirable to filter out sensitive locations that your application
is redirecting to. You can do that by using the <code>config.filter_redirect</code>
configuration option:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_filter_redirect'>filter_redirect</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>s3.amazonaws.com</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>You can set it to a String, a Regexp, or an Array of both.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_filter_redirect'>filter_redirect</span>.<span class='id identifier rubyid_concat'>concat</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>s3.amazonaws.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>private_path</span><span class='regexp_end'>/</span></span>]</code></pre>

<p>Matching URLs will be replaced with <code>[FILTERED]</code>. However, if you only wish to
filter the parameters, not the whole URLs, you can use parameter filtering.</p>

<h2>Force HTTPS Protocol</h2>

<p>If you&#39;d like to ensure that communication to your controller is only possible
via HTTPS, you can do so by enabling the <a href="https://api.rubyonrails.org/classes/ActionDispatch/SSL.html"><a href="ActionDispatch/SSL.html" title="ActionDispatch::SSL (class)"><code>::ActionDispatch::SSL</code></a></a> middleware
via <a href="configuring.html#config-force-ssl"><code>config.force_ssl</code></a> in your environment configuration.</p>

<h2>Built-in Health Check Endpoint</h2>

<p>Rails comes with a built-in health check endpoint that is reachable at the <code>/up</code>
path. This endpoint will return a 200 status code if the app has booted with no
exceptions, and a 500 status code otherwise.</p>

<p>In production, many applications are required to report their status, whether
it&#39;s to an uptime monitor that will page an engineer when things go wrong, or a
load balancer or Kubernetes controller used to determine the health of a given
instance. This health check is designed to be a one-size fits all that will work
in many situations.</p>

<p>While any newly generated Rails applications will have the health check at
<code>/up</code>, you can configure the path to be anything you&#39;d like in your
&quot;config/routes.rb&quot;:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_application'><a href="Rails.html#application-class_method" title="Rails.application (method)">application</a></span>.<span class='id identifier rubyid_routes'>routes</span>.<span class='id identifier rubyid_draw'>draw</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>health</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rails/health#show</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>as:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rails_health_check'>rails_health_check</span>
<span class='kw'>end</span></code></pre>

<p>The health check will now be accessible via <code>GET</code> or <code>HEAD</code> requests to the
<code>/health</code> path.</p>

<p>NOTE: This endpoint does not reflect the status of all of your application&#39;s
dependencies, such as the database or redis. Replace &quot;rails/health#show&quot; with
your own controller action if you have application specific needs.</p>

<p>Reporting the health of an application requires some considerations. You&#39;ll have
to decide what you want to include in the check. For example, if a third-party
service is down and your application reports that it&#39;s down due to the
dependency, your application may be restarted unnecessarily. Ideally, your
application should handle third-party outages gracefully.</p>

<h2>Handling Errors</h2>

<p>Your application will likely contain bugs and throw exceptions that needs to be
handled. For example, if the user follows a link to a resource that no longer
exists in the database, Active Record will throw the
<a href="ActiveRecord/RecordNotFound.html" title="ActiveRecord::RecordNotFound (class)"><code>::ActiveRecord::RecordNotFound</code></a> exception.</p>

<p>Rails default exception handling displays a &quot;500 Server Error&quot; message for all
exceptions. If the request was made in development, a nice backtrace and
additional information is displayed, to help you figure out what went wrong. If
the request was made in production, Rails will display a simple &quot;500 Server
Error&quot; message, or a &quot;404 Not Found&quot; if there was a routing error, or a record
could not be found.</p>

<p>You can customize how these errors are caught and how they&#39;re displayed to the
user. There are several levels of exception handling available in a Rails
application. You can use <code>config.action_dispatch.show_exceptions</code> configuration
to control how Rails handles exceptions raised while responding to requests. You
can learn more about the levels of exceptions in the
<a href="configuring.html#config-action-dispatch-show-exceptions">configuration</a> guide.</p>

<h3>The Default Error Templates</h3>

<p>By default, in the production environment the application will render an error
page. These pages are contained in static HTML files in the public folder, in
<code>404.html</code>, <code>500.html</code>, etc. You can customize these files to add some extra
information and styles.</p>

<p>NOTE: The error templates are static HTML files so you can&#39;t use ERB, SCSS, or
layouts for them.</p>

<h3><code>rescue_from</code></h3>

<p>You can catch specific errors and do something different with them by using the
<a href="https://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html#method-i-rescue_from"><code>rescue_from</code></a> method. It can handle exceptions of a certain type (or
multiple types) in an entire controller and its subclasses.</p>

<p>When an exception occurs which is caught by a <code>rescue_from</code> directive, the
exception object is passed to the handler.</p>

<p>Below is an example of how you can use <code>rescue_from</code> to intercept all
<a href="ActiveRecord/RecordNotFound.html" title="ActiveRecord::RecordNotFound (class)"><code>::ActiveRecord::RecordNotFound</code></a> errors and do something with them:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='id identifier rubyid_rescue_from'>rescue_from</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/RecordNotFound.html" title="ActiveRecord::RecordNotFound (class)">RecordNotFound</a></span><span class='comma'>,</span> <span class='label'>with:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_record_not_found'>record_not_found</span>

  <span class='id identifier rubyid_private'>private</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_record_not_found'>record_not_found</span>
      <span class='id identifier rubyid_render'>render</span> <span class='label'>plain:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Record Not Found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>status:</span> <span class='int'>404</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The handler can be a method or a <code>Proc</code> object passed to the <code>:with</code> option. You
can also use a block directly instead of an explicit <code>Proc</code> object.</p>

<p>The above example doesn&#39;t improve on the default exception handling at all, but
it serves to show how once you catch specific exceptions, you&#39;re free to do
whatever you want with them. For example, you could create custom exception
classes that will be thrown when a user doesn&#39;t have access to a certain section
of your application:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'><a href="ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="ActionController/Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='id identifier rubyid_rescue_from'>rescue_from</span> <span class='const'>User</span><span class='op'>::</span><span class='const'>NotAuthorized</span><span class='comma'>,</span> <span class='label'>with:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user_not_authorized'>user_not_authorized</span>

  <span class='id identifier rubyid_private'>private</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_user_not_authorized'>user_not_authorized</span>
      <span class='id identifier rubyid_flash'>flash</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_error'>error</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You don&#39;t have access to this section.</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_redirect_back'>redirect_back</span>(<span class='label'>fallback_location:</span> <span class='id identifier rubyid_root_path'>root_path</span>)
    <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>ClientsController</span> <span class='op'>&lt;</span> <span class='const'>ApplicationController</span>
  <span class='comment'># Check that the user has the right authorization to access clients.
</span>  <span class='id identifier rubyid_before_action'>before_action</span> <span class='symbeg'>:</span><span class='id identifier rubyid_check_authorization'>check_authorization</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_edit'>edit</span>
    <span class='ivar'>@client</span> <span class='op'>=</span> <span class='const'>Client</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>])
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>
    <span class='comment'># If the user is not authorized, throw the custom exception.
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_check_authorization'>check_authorization</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>User</span><span class='op'>::</span><span class='const'>NotAuthorized</span> <span class='kw'>unless</span> <span class='id identifier rubyid_current_user'>current_user</span>.<span class='id identifier rubyid_admin?'>admin?</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>WARNING: Using <code>rescue_from</code> with <a href="Exception.html" title="Exception (class)"><code>Exception</code></a> or <code>StandardError</code> would cause
serious side-effects as it prevents Rails from handling exceptions properly. As
such, it is not recommended to do so unless there is a strong reason.</p>

<p>NOTE: Certain exceptions are only rescuable from the <code>ApplicationController</code>
class, as they are raised before the controller gets initialized, and the action
gets executed.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>