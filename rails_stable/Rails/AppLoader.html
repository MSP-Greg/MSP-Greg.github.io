<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Rails::AppLoader &mdash; Rails 8-1-stable</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Rails::AppLoader",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails 8-1-stable</a> &raquo; 
      <a href='../_index.html#alpha_A'>Index (A)</a> &raquo; 
        <a href="../Rails.html" title="Rails (module)">Rails</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>AppLoader&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Rails::AppLoader</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This module is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/railties/lib/rails/app_loader.rb#L7'>railties/lib/rails/app_loader.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full nodoc'>
  <li>
    <span id='BUNDLER_WARNING-constant' class='summary_signature nodoc'>BUNDLER_WARNING =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/railties/lib/rails/app_loader.rb#L12-L43'># File 'railties/lib/rails/app_loader.rb', line 12</a>    <pre class='code ruby'><span class='heredoc_beg'>&lt;&lt;EOS</span>
<span class='tstring_content'>Beginning in Rails 4, Rails ships with a `rails` binstub at ./bin/rails that
should be used instead of the Bundler-generated `rails` binstub.

If you are seeing this message, your binstub at ./bin/rails was generated by
Bundler instead of Rails.

You might need to regenerate your `rails` binstub locally and add it to source
control:

 rails app:update:bin           # Bear in mind this generates other binstubs
                                # too that you may or may not want (like yarn)

If you already have Rails binstubs in source control, you might be
inadvertently overwriting them during deployment by using bundle install
with the --binstubs option.

If your application was created prior to Rails 4, here&#39;s how to upgrade:

  bundle config --delete bin    # Turn off Bundler&#39;s stub generator
  rails app:update:bin          # Use the new Rails executables
  git add bin                   # Add bin/ to source control

You may need to remove bin/ from your .gitignore as well.

When you install a gem whose executable you want to use in your app,
generate it and add it to source control:

  bundle binstubs some-gem-name
  git add bin/new-executable

</span><span class='heredoc_end'>EOS</span></pre>
  </li>
  <li>
    <span id='EXECUTABLES-constant' class='summary_signature nodoc'>EXECUTABLES =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/railties/lib/rails/app_loader.rb#L11-L11'># File 'railties/lib/rails/app_loader.rb', line 11</a>    <pre class='code ruby'>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bin/rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>script/rails</span><span class='tstring_end'>&quot;</span></span>]</pre>
  </li>
  <li>
    <span id='RUBY-constant' class='summary_signature nodoc'>RUBY =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/railties/lib/rails/app_loader.rb#L10-L10'># File 'railties/lib/rails/app_loader.rb', line 10</a>    <pre class='code ruby'><span class='const'>Gem</span>.<span class='id identifier rubyid_ruby'>ruby</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#exec_app-instance_method" title="#exec_app (instance method)">#<strong>exec_app</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#find_executable-instance_method" title="#find_executable (instance method)">#<strong>find_executable</strong>  </a>
    </span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="exec_app-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>exec_app</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/railties/lib/rails/app_loader.rb#L45-L71'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='45' data-end='71'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/app_loader.rb', line 45</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exec_app'>exec_app</span>
  <span class='id identifier rubyid_original_cwd'>original_cwd</span> <span class='op'>=</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_pwd'>pwd</span>

  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_exe'>exe</span> <span class='op'>=</span> <span class='id identifier rubyid_find_executable'><a href="#find_executable-instance_method" title="Rails::AppLoader#find_executable (method)">find_executable</a></span>
      <span class='id identifier rubyid_contents'>contents</span> <span class='op'>=</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_exe'>exe</span>)

      <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(APP|ENGINE)_PATH</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_contents'>contents</span>)
        <span class='id identifier rubyid_exec'>exec</span> <span class='const'><a href="#RUBY-constant" title="Rails::AppLoader::RUBY (constant)">RUBY</a></span><span class='comma'>,</span> <span class='id identifier rubyid_exe'>exe</span><span class='comma'>,</span> <span class='op'>*</span><span class='const'>ARGV</span>
        <span class='kw'>break</span> <span class='comment'># non reachable, hack to be able to stub exec in the test suite
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_exe'>exe</span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bin/rails</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_contents'>contents</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This file was generated by Bundler</span><span class='tstring_end'>&quot;</span></span>)
        <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span>(<span class='const'><a href="#BUNDLER_WARNING-constant" title="Rails::AppLoader::BUNDLER_WARNING (constant)">BUNDLER_WARNING</a></span>)
        <span class='const'><a href="../Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_const_set'>const_set</span>(<span class='symbeg'>:</span><span class='const'><a href="../top-level-namespace.html#APP_PATH-constant" title="APP_PATH (constant)">APP_PATH</a></span><span class='comma'>,</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>config/application</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_pwd'>pwd</span>))
        <span class='id identifier rubyid_require'>require</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'>expand_path</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../boot</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="../top-level-namespace.html#APP_PATH-constant" title="APP_PATH (constant)">APP_PATH</a></span>)
        <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rails/commands</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># If we exhaust the search there is no executable, this could be a
</span>    <span class='comment'># call to generate a new application, so restore the original cwd.
</span>    <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span>(<span class='id identifier rubyid_original_cwd'>original_cwd</span>) <span class='op'>&amp;&amp;</span> <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'><a href="../Pathname.html" title="Pathname (class)">Pathname</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='const'>Dir</span>.<span class='id identifier rubyid_pwd'>pwd</span>).<span class='id identifier rubyid_root?'>root?</span>

    <span class='comment'># Otherwise keep moving upwards in search of an executable.
</span>    <span class='const'>Dir</span>.<span class='id identifier rubyid_chdir'>chdir</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>..</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="find_executable-instance_method">
  <h3 class='signature nodoc'>
    #<strong>find_executable</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/railties/lib/rails/app_loader.rb#L73-L75'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='73' data-end='75'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/app_loader.rb', line 73</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_find_executable'>find_executable</span>
  <span class='const'><a href="#EXECUTABLES-constant" title="Rails::AppLoader::EXECUTABLES (constant)">EXECUTABLES</a></span>.<span class='id identifier rubyid_find'>find</span> { <span class='op'>|</span><span class='id identifier rubyid_exe'>exe</span><span class='op'>|</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_file?'>file?</span>(<span class='id identifier rubyid_exe'>exe</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>