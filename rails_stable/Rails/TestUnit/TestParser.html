<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Rails::TestUnit::TestParser &mdash; Rails 7-1-stable</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Rails::TestUnit::TestParser",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails 7-1-stable</a> &raquo; 
      <a href='../../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../../Rails.html" title="Rails (module)">Rails</a> &raquo; 
        <a href="../TestUnit.html" title="Rails::TestUnit (module)">TestUnit</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>TestParser&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Rails::TestUnit::TestParser</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This class is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Ripper
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Ripper
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Ripper</span>
        <ul class='fullTree'>
          <li><a href="../../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'>Ripper</li>
          <li class='next'>Rails::TestUnit::TestParser</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L9'>railties/lib/rails/test_unit/test_parser.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse a test file to extract the line ranges of all tests in both method-style (def test_foo) and declarative-style (test “foo” do)</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#definition_for-class_method" title=".definition_for (class method)">.<strong>definition_for</strong>(method_obj)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Helper to translate a method object into the path and line range where the method was defined.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>  &#x21d2; TestParser </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#first_arg-instance_method" title="#first_arg (instance method)">#<strong>first_arg</strong>(arg)  </a>
      (also: #on_method_add_arg, #on_command, #on_stmts_add, #on_arg_paren, #on_bodystmt)
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#just_lineno-instance_method" title="#just_lineno (instance method)">#<strong>just_lineno</strong>  </a>
      (also: #on_ident, #on_do_block, #on_stmts_new, #on_brace_block)
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_arg_paren-instance_method" title="#on_arg_paren (instance method)">#<strong>on_arg_paren</strong>(arg)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_args_add-instance_method" title="#on_args_add (instance method)">#<strong>on_args_add</strong>(parts, part)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_args_add_block-instance_method" title="#on_args_add_block (instance method)">#<strong>on_args_add_block</strong>(args, *rest)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_args_new-instance_method" title="#on_args_new (instance method)">#<strong>on_args_new</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_bodystmt-instance_method" title="#on_bodystmt (instance method)">#<strong>on_bodystmt</strong>(arg)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_brace_block-instance_method" title="#on_brace_block (instance method)">#<strong>on_brace_block</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_command-instance_method" title="#on_command (instance method)">#<strong>on_command</strong>(arg)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_command_call-instance_method" title="#on_command_call (instance method)">#<strong>on_command_call</strong>(begin_lineno, _args)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_def-instance_method" title="#on_def (instance method)">#<strong>on_def</strong>(begin_line)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>method test e.g.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_do_block-instance_method" title="#on_do_block (instance method)">#<strong>on_do_block</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_ident-instance_method" title="#on_ident (instance method)">#<strong>on_ident</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_method_add_arg-instance_method" title="#on_method_add_arg (instance method)">#<strong>on_method_add_arg</strong>(arg)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_method_add_block-instance_method" title="#on_method_add_block (instance method)">#<strong>on_method_add_block</strong>(begin_line, end_line)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Everything past this point is to support declarative tests, which require more work to get right because of the many different ways methods can be invoked in ruby, all of which are parsed differently.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_stmts_add-instance_method" title="#on_stmts_add (instance method)">#<strong>on_stmts_add</strong>(arg)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#on_stmts_new-instance_method" title="#on_stmts_new (instance method)">#<strong>on_stmts_new</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#parse-instance_method" title="#parse (instance method)">#<strong>parse</strong>  </a>
    </span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>  &#x21d2; <code>TestParser</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L19-L23'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='19' data-end='23'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 19</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='op'>*</span>)
  <span class='comment'># A hash mapping the 1-indexed line numbers that tests start on to where they end.
</span>  <span class='ivar'>@begins_to_ends</span> <span class='op'>=</span> {}
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="definition_for-class_method">
  <h3 class='signature nodoc first'>
    .<strong>definition_for</strong>(method_obj)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Helper to translate a method object into the path and line range where the method was defined.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L12-L17'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12' data-end='17'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 12</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_definition_for'>definition_for</span>(<span class='id identifier rubyid_method_obj'>method_obj</span>)
  <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_begin_line'>begin_line</span> <span class='op'>=</span> <span class='id identifier rubyid_method_obj'>method_obj</span>.<span class='id identifier rubyid_source_location'>source_location</span>
  <span class='id identifier rubyid_begins_to_ends'>begins_to_ends</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="Rails::TestUnit::TestParser.new (method)">new</a></span>(<span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>).<span class='id identifier rubyid_parse'><a href="#parse-instance_method" title="Rails::TestUnit::TestParser#parse (method)">parse</a></span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_end_line'>end_line</span> <span class='op'>=</span> <span class='id identifier rubyid_begins_to_ends'>begins_to_ends</span>[<span class='id identifier rubyid_begin_line'>begin_line</span>]
  [<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> (<span class='id identifier rubyid_begin_line'>begin_line</span><span class='op'>..</span><span class='id identifier rubyid_end_line'>end_line</span>)]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="first_arg-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>first_arg</strong>(arg)  
    <span class='aliases'>Also known as: <span class='names'>#on_method_add_arg, #on_command, #on_stmts_add, #on_arg_paren, #on_bodystmt</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L56-L58'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='58'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_first_arg'>first_arg</span>(<span class='id identifier rubyid_arg'>arg</span><span class='comma'>,</span> <span class='op'>*</span>)
  <span class='id identifier rubyid_arg'>arg</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="just_lineno-instance_method">
  <h3 class='signature nodoc'>
    #<strong>just_lineno</strong>  
    <span class='aliases'>Also known as: <span class='names'>#on_ident, #on_do_block, #on_stmts_new, #on_brace_block</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L60-L62'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='62'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_just_lineno'>just_lineno</span>(<span class='op'>*</span>)
  <span class='id identifier rubyid_lineno'>lineno</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_arg_paren-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_arg_paren</strong>(arg)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L67-L67'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='67' data-end='67'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 67</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_arg_paren'>on_arg_paren</span> <span class='id identifier rubyid_first_arg'><a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">first_arg</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_args_add-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_args_add</strong>(parts, part)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L79-L81'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='79' data-end='81'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 79</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_args_add'>on_args_add</span>(<span class='id identifier rubyid_parts'>parts</span><span class='comma'>,</span> <span class='id identifier rubyid_part'>part</span>)
  <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_part'>part</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_args_add_block-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_args_add_block</strong>(args, *rest)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L83-L85'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='83' data-end='85'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 83</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_args_add_block'>on_args_add_block</span>(<span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_rest'>rest</span>)
  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_args_new-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_args_new</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L75-L77'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='75' data-end='77'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 75</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_args_new'>on_args_new</span>
  []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_bodystmt-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_bodystmt</strong>(arg)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L68-L68'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='68' data-end='68'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 68</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_bodystmt'>on_bodystmt</span> <span class='id identifier rubyid_first_arg'><a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">first_arg</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_brace_block-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_brace_block</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L73-L73'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='73' data-end='73'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 73</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_brace_block'>on_brace_block</span> <span class='id identifier rubyid_just_lineno'><a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">just_lineno</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_command-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_command</strong>(arg)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L65-L65'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='65' data-end='65'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 65</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_command'>on_command</span> <span class='id identifier rubyid_first_arg'><a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">first_arg</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_command_call-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_command_call</strong>(begin_lineno, _args)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L52-L54'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='52' data-end='54'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 52</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_command_call'>on_command_call</span>(<span class='op'>*</span><span class='comma'>,</span> <span class='id identifier rubyid_begin_lineno'>begin_lineno</span><span class='comma'>,</span> <span class='id identifier rubyid__args'>_args</span>)
  <span class='id identifier rubyid_begin_lineno'>begin_lineno</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_def-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_def</strong>(begin_line)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>method test e.g. <code>def test_some_description</code> This event’s first argument gets the <code>ident</code> node containing the method name, which we have overridden to return the line number of the ident instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L34-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='34' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 34</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_def'>on_def</span>(<span class='id identifier rubyid_begin_line'>begin_line</span><span class='comma'>,</span> <span class='op'>*</span>)
  <span class='ivar'>@begins_to_ends</span>[<span class='id identifier rubyid_begin_line'>begin_line</span>] <span class='op'>=</span> <span class='id identifier rubyid_lineno'>lineno</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_do_block-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_do_block</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L71-L71'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='71' data-end='71'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 71</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_do_block'>on_do_block</span> <span class='id identifier rubyid_just_lineno'><a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">just_lineno</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_ident-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_ident</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L70-L70'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='70' data-end='70'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 70</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_ident'>on_ident</span> <span class='id identifier rubyid_just_lineno'><a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">just_lineno</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_method_add_arg-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_method_add_arg</strong>(arg)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L64-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='64' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 64</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_method_add_arg'>on_method_add_arg</span> <span class='id identifier rubyid_first_arg'><a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">first_arg</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_method_add_block-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_method_add_block</strong>(begin_line, end_line)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Everything past this point is to support declarative tests, which require more work to get right because of the many different ways methods can be invoked in ruby, all of which are parsed differently.</p>

<p>The approach is just to store the current line number when the “test” method is called and pass it up the tree so it’s available at the point when we also know the line where the associated block ends.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L46-L50'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='46' data-end='50'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 46</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_on_method_add_block'>on_method_add_block</span>(<span class='id identifier rubyid_begin_line'>begin_line</span><span class='comma'>,</span> <span class='id identifier rubyid_end_line'>end_line</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_begin_line'>begin_line</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_end_line'>end_line</span>
    <span class='ivar'>@begins_to_ends</span>[<span class='id identifier rubyid_begin_line'>begin_line</span>] <span class='op'>=</span> <span class='id identifier rubyid_end_line'>end_line</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_stmts_add-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_stmts_add</strong>(arg)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">#first_arg</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L66-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='66' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 66</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_stmts_add'>on_stmts_add</span> <span class='id identifier rubyid_first_arg'><a href="#first_arg-instance_method" title="Rails::TestUnit::TestParser#first_arg (method)">first_arg</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="on_stmts_new-instance_method">
  <h3 class='signature nodoc'>
    #<strong>on_stmts_new</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">#just_lineno</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L72-L72'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='72' data-end='72'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 72</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_on_stmts_new'>on_stmts_new</span> <span class='id identifier rubyid_just_lineno'><a href="#just_lineno-instance_method" title="Rails::TestUnit::TestParser#just_lineno (method)">just_lineno</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse-instance_method">
  <h3 class='signature nodoc'>
    #<strong>parse</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/railties/lib/rails/test_unit/test_parser.rb#L25-L28'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='25' data-end='28'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'railties/lib/rails/test_unit/test_parser.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse'>parse</span>
  <span class='kw'>super</span>
  <span class='ivar'>@begins_to_ends</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>