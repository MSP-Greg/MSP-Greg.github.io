<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Exception: ActionView::MissingTemplate &mdash; Rails 8-1-stable</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActionView::MissingTemplate",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails 8-1-stable</a> &raquo; 
      <a href='../_index.html#alpha_M'>Index (M)</a> &raquo; 
        <a href="../ActionView.html" title="ActionView (module)">ActionView</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>MissingTemplate&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Exception: ActionView::MissingTemplate</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This class is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="MissingTemplate/Results.html" title="ActionView::MissingTemplate::Results (class)"><code>Results</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a class='nodoc' href="ActionViewError.html" title="ActionView::ActionViewError (class)"><code>ActionViewError</code></a>,
          StandardError
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          DidYouMean::Correctable,
          <a class='nodoc' href="ActionViewError.html" title="ActionView::ActionViewError (class)"><code>ActionViewError</code></a>,
          StandardError
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a class='nodoc' href="ActionViewError.html" title="ActionView::ActionViewError (class)">ActionView::ActionViewError</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'>StandardError</li>
          <li class='next'><a class='nodoc' href="ActionViewError.html" title="ActionView::ActionViewError (class)">ActionView::ActionViewError</a></li>
          <li class='next'>ActionView::MissingTemplate</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/actionview/lib/action_view/template/error.rb#L41'>actionview/lib/action_view/template/error.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(paths, path, prefixes, partial, details)  &#x21d2; MissingTemplate </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#partial-instance_method" title="#partial (instance method)">#<strong>partial</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#paths-instance_method" title="#paths (instance method)">#<strong>paths</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#prefixes-instance_method" title="#prefixes (instance method)">#<strong>prefixes</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#corrections-instance_method" title="#corrections (instance method)">#<strong>corrections</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Apps may have thousands of candidate templates so we attempt to generate the suggestions as efficiently as possible.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>(paths, path, prefixes, partial, details)  &#x21d2; <code>MissingTemplate</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/actionview/lib/action_view/template/error.rb#L44-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='44' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/template/error.rb', line 44</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_paths'><a href="#paths-instance_method" title="ActionView::MissingTemplate#paths (method)">paths</a></span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_prefixes'><a href="#prefixes-instance_method" title="ActionView::MissingTemplate#prefixes (method)">prefixes</a></span><span class='comma'>,</span> <span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span><span class='comma'>,</span> <span class='id identifier rubyid_details'>details</span><span class='comma'>,</span> <span class='op'>*</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span>.<span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span> <span class='op'>=</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>([^/]+)$</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_\\1</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>

  <span class='ivar'>@path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span>
  <span class='ivar'>@paths</span> <span class='op'>=</span> <span class='id identifier rubyid_paths'><a href="#paths-instance_method" title="ActionView::MissingTemplate#paths (method)">paths</a></span>
  <span class='ivar'>@prefixes</span> <span class='op'>=</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>(<span class='id identifier rubyid_prefixes'><a href="#prefixes-instance_method" title="ActionView::MissingTemplate#prefixes (method)">prefixes</a></span>)
  <span class='ivar'>@partial</span> <span class='op'>=</span> <span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span>
  <span class='id identifier rubyid_template_type'>template_type</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partial</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>layouts</span><span class='regexp_end'>/i</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span>)
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>layout</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>template</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_searched_paths'>searched_paths</span> <span class='op'>=</span> <span class='ivar'>@prefixes</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_prefix'>prefix</span><span class='op'>|</span> [<span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span>].<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>) }

  <span class='id identifier rubyid_out'>out</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_template_type'>template_type</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_searched_paths'>searched_paths</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_content'> with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_details'>details</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>.\n\nSearched in:\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_out'>out</span> <span class='op'>+=</span> <span class='id identifier rubyid_paths'><a href="#paths-instance_method" title="ActionView::MissingTemplate#paths (method)">paths</a></span>.<span class='id identifier rubyid_compact'>compact</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  * </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> }.<span class='id identifier rubyid_join'>join</span>
  <span class='kw'>super</span> <span class='id identifier rubyid_out'>out</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="partial-instance_method">
  <h3 class='signature ro  nodoc first'>
    #<strong>partial</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/actionview/lib/action_view/template/error.rb#L42-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='42' data-end='42'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/template/error.rb', line 42</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_paths'><a href="#paths-instance_method" title="ActionView::MissingTemplate#paths (method)">paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_prefixes'><a href="#prefixes-instance_method" title="ActionView::MissingTemplate#prefixes (method)">prefixes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_partial'>partial</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="path-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>path</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/actionview/lib/action_view/template/error.rb#L42-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='42' data-end='42'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/template/error.rb', line 42</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_paths'><a href="#paths-instance_method" title="ActionView::MissingTemplate#paths (method)">paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_prefixes'><a href="#prefixes-instance_method" title="ActionView::MissingTemplate#prefixes (method)">prefixes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="paths-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>paths</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/actionview/lib/action_view/template/error.rb#L42-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='42' data-end='42'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/template/error.rb', line 42</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_paths'>paths</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_prefixes'><a href="#prefixes-instance_method" title="ActionView::MissingTemplate#prefixes (method)">prefixes</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prefixes-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>prefixes</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/actionview/lib/action_view/template/error.rb#L42-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='42' data-end='42'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/template/error.rb', line 42</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_paths'><a href="#paths-instance_method" title="ActionView::MissingTemplate#paths (method)">paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_prefixes'>prefixes</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="corrections-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>corrections</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Apps may have thousands of candidate templates so we attempt to generate the suggestions as efficiently as possible. First we split templates into prefixes and basenames, so that those can be matched separately.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-1-stable/actionview/lib/action_view/template/error.rb#L104-L157'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='104' data-end='157'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionview/lib/action_view/template/error.rb', line 104</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_corrections'>corrections</span>
  <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> <span class='id identifier rubyid_paths'><a href="#paths-instance_method" title="ActionView::MissingTemplate#paths (method)">paths</a></span>.<span class='id identifier rubyid_flat_map'>flat_map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_all_template_paths'>all_template_paths</span>).<span class='id identifier rubyid_uniq'>uniq</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span>
    <span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_select!'>select!</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_partial?'>partial?</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_reject!'>reject!</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_partial?'>partial?</span>)
  <span class='kw'>end</span>

  <span class='comment'># Group by possible prefixes
</span>  <span class='id identifier rubyid_files_by_dir'>files_by_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_group_by'>group_by</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_prefix'>prefix</span>)
  <span class='id identifier rubyid_files_by_dir'>files_by_dir</span>.<span class='id identifier rubyid_transform_values!'>transform_values!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_files'>files</span><span class='op'>|</span>
    <span class='id identifier rubyid_files'>files</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='comment'># Remove prefix
</span>      <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_basename'>basename</span>(<span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_to_s'>to_s</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># No suggestions if there&#39;s an exact match, but wrong details
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_prefixes'><a href="#prefixes-instance_method" title="ActionView::MissingTemplate#prefixes (method)">prefixes</a></span>.<span class='id identifier rubyid_any?'>any?</span> { <span class='op'>|</span><span class='id identifier rubyid_prefix'>prefix</span><span class='op'>|</span> <span class='id identifier rubyid_files_by_dir'>files_by_dir</span>[<span class='id identifier rubyid_prefix'>prefix</span>]<span class='op'>&amp;.</span><span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span>) }
    <span class='kw'>return</span> []
  <span class='kw'>end</span>

  <span class='id identifier rubyid_cached_distance'>cached_distance</span> <span class='op'>=</span> <span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActionView::MissingTemplate.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='op'>|</span>
    <span class='id identifier rubyid_h'>h</span>[<span class='id identifier rubyid_args'>args</span>] <span class='op'>=</span> <span class='op'>-</span><span class='const'>DidYouMean</span><span class='op'>::</span><span class='const'>Jaro</span>.<span class='id identifier rubyid_distance'>distance</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'><a href="MissingTemplate/Results.html" title="ActionView::MissingTemplate::Results (class)">Results</a></span>.<span class='id identifier rubyid_new'><a href="MissingTemplate/Results.html#new-class_method" title="ActionView::MissingTemplate::Results.new (method)">new</a></span>(<span class='int'>6</span>)

  <span class='id identifier rubyid_files_by_dir'>files_by_dir</span>.<span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_index_with'>index_with</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dirname'>dirname</span><span class='op'>|</span>
    <span class='id identifier rubyid_prefixes'><a href="#prefixes-instance_method" title="ActionView::MissingTemplate#prefixes (method)">prefixes</a></span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prefix'>prefix</span><span class='op'>|</span>
      <span class='id identifier rubyid_cached_distance'>cached_distance</span>[[<span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_dirname'>dirname</span>]]
    <span class='kw'>end</span>.<span class='id identifier rubyid_min'>min</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_sort_by'>sort_by</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_last'>last</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dirname'>dirname</span><span class='comma'>,</span> <span class='id identifier rubyid_dirweight'>dirweight</span><span class='op'>|</span>
    <span class='comment'># If our directory&#39;s score makes it impossible to find a better match
</span>    <span class='comment'># we can prune this search branch.
</span>    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_should_record?'>should_record?</span>(<span class='id identifier rubyid_dirweight'>dirweight</span> <span class='op'>-</span> <span class='float'>1.0</span>)

    <span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_files_by_dir'>files_by_dir</span>[<span class='id identifier rubyid_dirname'>dirname</span>]

    <span class='id identifier rubyid_files'>files</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='id identifier rubyid_fileweight'>fileweight</span> <span class='op'>=</span> <span class='id identifier rubyid_cached_distance'>cached_distance</span>[[<span class='id identifier rubyid_path'><a href="#path-instance_method" title="ActionView::MissingTemplate#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>]]
      <span class='id identifier rubyid_score'>score</span> <span class='op'>=</span> <span class='id identifier rubyid_dirweight'>dirweight</span> <span class='op'>+</span> <span class='id identifier rubyid_fileweight'>fileweight</span>

      <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_add'>add</span>(<span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_dirname'>dirname</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)<span class='comma'>,</span> <span class='id identifier rubyid_score'>score</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_partial'><a href="#partial-instance_method" title="ActionView::MissingTemplate#partial (method)">partial</a></span>
    <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_to_a'>to_a</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_res'>res</span><span class='op'>|</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>_([^/]+)\z</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\1</span><span class='tstring_end'>&quot;</span></span>) }
  <span class='kw'>else</span>
    <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>