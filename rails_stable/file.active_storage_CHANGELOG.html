<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Active Storage CHANGELOG &mdash; Rails 8-1-stable</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "active_storage_CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rails 8-1-stable</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Active Storage CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<ul>
<li><p>Fix <code>ActiveStorage::Blob</code> content type predicate methods to handle <code>nil</code>.</p>

<p><em>Daichi KUDO</em></p></li>
</ul>

<h2>Rails 8.1.2 (January 08, 2026)</h2>

<ul>
<li><p>Restore ADC when signing URLs with IAM for GCS</p>

<p>ADC was previously used for automatic authorization when signing URLs with IAM.
Now it is again, but the auth client is memoized so that new credentials are only
requested when the current ones expire. Other auth methods can now be used
instead by setting the authorization on <a href="ActiveStorage/Service/GCSService.html#iam_client-instance_method" title="ActiveStorage::Service::GCSService#iam_client (method)">ActiveStorage::Service::GCSService#iam_client</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="ActiveStorage.html" title="ActiveStorage (module)">ActiveStorage</a></span><span class='op'>::</span><span class='const'>Blob</span>.<span class='id identifier rubyid_service'>service</span>.<span class='id identifier rubyid_iam_client'>iam_client</span>.<span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Auth</span><span class='op'>::</span><span class='const'>ImpersonatedServiceAccountCredentials</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_options'>options</span>)</code></pre>

<p>This is safer than setting <code>Google::Apis::RequestOptions.default.authorization</code>
because it only applies to Active Storage and does not affect other Google API
clients.</p>

<p><em>Justin Malčić</em></p></li>
</ul>

<h2>Rails 8.1.1 (October 28, 2025)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 8.1.0 (October 22, 2025)</h2>

<ul>
<li><p>Add structured events for Active Storage:</p>

<ul>
<li><code>active_storage.service_upload</code></li>
<li><code>active_storage.service_download</code></li>
<li><code>active_storage.service_streaming_download</code></li>
<li><code>active_storage.preview</code></li>
<li><code>active_storage.service_delete</code></li>
<li><code>active_storage.service_delete_prefixed</code></li>
<li><code>active_storage.service_exist</code></li>
<li><code>active_storage.service_url</code></li>
<li><code>active_storage.service_mirror</code></li>
</ul>

<p><em>Gannon McGibbon</em></p></li>
<li><p>Allow analyzers and variant transformer to be fully configurable</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># ActiveStorage.analyzers can be set to an empty array:
</span><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_active_storage'>active_storage</span>.<span class='id identifier rubyid_analyzers'>analyzers</span> <span class='op'>=</span> []
<span class='comment'># =&gt; ActiveStorage.analyzers = []
</span>
<span class='comment'># or use custom analyzer:
</span><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_active_storage'>active_storage</span>.<span class='id identifier rubyid_analyzers'>analyzers</span> <span class='op'>=</span> [ <span class='const'>CustomAnalyzer</span> ]
<span class='comment'># =&gt; ActiveStorage.analyzers = [ CustomAnalyzer ]</span></code></pre>

<p>If no configuration is provided, it will use the default analyzers.</p>

<p>You can also disable variant processor to remove warnings on startup about missing gems.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_active_storage'>active_storage</span>.<span class='id identifier rubyid_variant_processor'>variant_processor</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_disabled'>disabled</span></code></pre>

<p><em>zzak</em>, <em>Alexandre Ruban</em></p></li>
<li><p>Remove deprecated <code>:azure</code> storage service.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove unnecessary calls to the GCP metadata server.</p>

<p>Calling Google::Auth.get_application_default triggers an explicit call to
the metadata server - given it was being called for significant number of
file operations, it can lead to considerable tail latencies and even metadata
server overloads. Instead, it&#39;s preferable (and significantly more efficient)
that applications use:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>RequestOptions</span>.<span class='id identifier rubyid_default'>default</span>.<span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Auth</span>.<span class='id identifier rubyid_get_application_default'>get_application_default</span>(<span class='op'>...</span>)</code></pre>

<p>In the cases applications do not set that, the GCP libraries automatically determine credentials.</p>

<p>This also enables using credentials other than those of the associated GCP
service account like when using impersonation.</p>

<p><em>Alex Coomans</em></p></li>
<li><p>Direct upload progress accounts for server processing time.</p>

<p><em>Jeremy Daer</em></p></li>
<li><p>Delegate <code>ActiveStorage::Filename#to_str</code> to <code>#to_s</code></p>

<p>Supports checking String equality:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='const'><a href="ActiveStorage.html" title="ActiveStorage (module)">ActiveStorage</a></span><span class='op'>::</span><span class='const'>Filename</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_filename'>filename</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_filename'>filename</span> <span class='kw'>in</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span> <span class='op'>==</span> <span class='id identifier rubyid_filename'>filename</span> <span class='comment'># =&gt; true</span></code></pre>

<p><em>Sean Doyle</em></p></li>
<li><p>A Blob will no longer autosave associated Attachment.</p>

<p>This fixes an issue where a record with an attachment would have
its dirty attributes reset, preventing your <code>after commit</code> callbacks
on that record to behave as expected.</p>

<p>Note that this change doesn&#39;t require any changes on your application
and is supposed to be internal. Active Storage Attachment will continue
to be autosaved (through a different relation).</p>

<p><em>Edouard-chin</em></p></li>
</ul>

<p>Please check [8-0-stable]) for previous changes.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>