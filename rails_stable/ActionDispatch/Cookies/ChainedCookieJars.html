<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActionDispatch::Cookies::ChainedCookieJars &mdash; Rails 8-0-stable</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActionDispatch::Cookies::ChainedCookieJars",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails 8-0-stable</a> &raquo; 
      <a href='../../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../../ActionDispatch.html" title="ActionDispatch (module)">ActionDispatch</a> &raquo; 
        <a href="../Cookies.html" title="ActionDispatch::Cookies (class)">Cookies</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ChainedCookieJars&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActionDispatch::Cookies::ChainedCookieJars</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="../../ActionController/RequestForgeryProtection/ProtectionMethods/NullSession/NullCookieJar.html" title="ActionController::RequestForgeryProtection::ProtectionMethods::NullSession::NullCookieJar (class)"><code>::ActionController::RequestForgeryProtection::ProtectionMethods::NullSession::NullCookieJar</code></a>,
          <a class='nodoc' href="AbstractCookieJar.html" title="ActionDispatch::Cookies::AbstractCookieJar (class)"><code>AbstractCookieJar</code></a>,
          <a class='nodoc' href="CookieJar.html" title="ActionDispatch::Cookies::CookieJar (class)"><code>CookieJar</code></a>,
          <a class='nodoc' href="EncryptedKeyRotatingCookieJar.html" title="ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar (class)"><code>EncryptedKeyRotatingCookieJar</code></a>,
          <a class='nodoc' href="PermanentCookieJar.html" title="ActionDispatch::Cookies::PermanentCookieJar (class)"><code>PermanentCookieJar</code></a>,
          <a class='nodoc' href="SignedKeyRotatingCookieJar.html" title="ActionDispatch::Cookies::SignedKeyRotatingCookieJar (class)"><code>SignedKeyRotatingCookieJar</code></a>
      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L219'>actionpack/lib/action_dispatch/middleware/cookies.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Include in a cookie jar to allow chaining, e.g. <code>cookies.permanent.signed</code>.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#prepare_upgrade_legacy_hmac_aes_cbc_cookies%3F-instance_method" title="#prepare_upgrade_legacy_hmac_aes_cbc_cookies? (instance method)">#<strong>prepare_upgrade_legacy_hmac_aes_cbc_cookies?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#upgrade_legacy_hmac_aes_cbc_cookies%3F-instance_method" title="#upgrade_legacy_hmac_aes_cbc_cookies? (instance method)">#<strong>upgrade_legacy_hmac_aes_cbc_cookies?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#encrypted-instance_method" title="#encrypted (instance method)">#<strong>encrypted</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a jar that’ll automatically encrypt cookie values before sending them to the client and will decrypt them for read.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#permanent-instance_method" title="#permanent (instance method)">#<strong>permanent</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a jar that’ll automatically set the assigned cookies to have an expiration date 20 years from now.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#signed-instance_method" title="#signed (instance method)">#<strong>signed</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a jar that’ll automatically generate a signed representation of cookie value and verify it when reading from the cookie again.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#signed_or_encrypted-instance_method" title="#signed_or_encrypted (instance method)">#<strong>signed_or_encrypted</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="#signed-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#signed (method)">#signed</a> or <a href="#encrypted-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#encrypted (method)">#encrypted</a> jar, preferring <a href="#encrypted-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#encrypted (method)">#encrypted</a> if <code>secret_key_base</code> is set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#encrypted_cookie_cipher-instance_method" title="#encrypted_cookie_cipher (instance method)">#<strong>encrypted_cookie_cipher</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#signed_cookie_digest-instance_method" title="#signed_cookie_digest (instance method)">#<strong>signed_cookie_digest</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="prepare_upgrade_legacy_hmac_aes_cbc_cookies?-instance_method">
  <h3 class='signature ro priv first'>
    #<strong>prepare_upgrade_legacy_hmac_aes_cbc_cookies?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L298-L302'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='298' data-end='302'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 298</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_upgrade_legacy_hmac_aes_cbc_cookies?'>prepare_upgrade_legacy_hmac_aes_cbc_cookies?</span>
  <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_secret_key_base'>secret_key_base</span>.<span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_authenticated_encrypted_cookie_salt'>authenticated_encrypted_cookie_salt</span>.<span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>
    <span class='op'>!</span><span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_use_authenticated_cookie_encryption'>use_authenticated_cookie_encryption</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="upgrade_legacy_hmac_aes_cbc_cookies?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>upgrade_legacy_hmac_aes_cbc_cookies?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L291-L296'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='291' data-end='296'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 291</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_upgrade_legacy_hmac_aes_cbc_cookies?'>upgrade_legacy_hmac_aes_cbc_cookies?</span>
  <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_secret_key_base'>secret_key_base</span>.<span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_encrypted_signed_cookie_salt'>encrypted_signed_cookie_salt</span>.<span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_encrypted_cookie_salt'>encrypted_cookie_salt</span>.<span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_use_authenticated_cookie_encryption'>use_authenticated_cookie_encryption</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="encrypted-instance_method">
  <h3 class='signature  first'>
    #<strong>encrypted</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a jar that’ll automatically encrypt cookie values before sending them to the client and will decrypt them for read. If the cookie was tampered with by the user (or a 3rd party), <code>nil</code> will be returned.</p>

<p>If <code>config.action_dispatch.encrypted_cookie_salt</code> and <code>config.action_dispatch.encrypted_signed_cookie_salt</code> are both set, legacy cookies encrypted with HMAC AES-256-CBC will be transparently upgraded.</p>

<p>This jar requires that you set a suitable secret for the verification on your app’s <code>secret_key_base</code>.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cookies'>cookies</span>.<span class='id identifier rubyid_encrypted'>encrypted</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_discount'>discount</span>] <span class='op'>=</span> <span class='int'>45</span>
<span class='comment'># =&gt; Set-Cookie: discount=DIQ7fw==--K3n//8vvnSbGq9dA--7Xh91HfLpwzbj1czhBiwOg==; path=/
</span>
<span class='id identifier rubyid_cookies'>cookies</span>.<span class='id identifier rubyid_encrypted'>encrypted</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_discount'>discount</span>] <span class='comment'># =&gt; 45</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L274-L276'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='274' data-end='276'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 274</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_encrypted'>encrypted</span>
  <span class='ivar'>@encrypted</span> <span class='op'>||=</span> <span class='const'><a href="EncryptedKeyRotatingCookieJar.html" title="ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar (class)">EncryptedKeyRotatingCookieJar</a></span>.<span class='id identifier rubyid_new'><a href="EncryptedKeyRotatingCookieJar.html#new-class_method" title="ActionDispatch::Cookies::EncryptedKeyRotatingCookieJar.new (method)">new</a></span>(<span class='kw'>self</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encrypted_cookie_cipher-instance_method">
  <h3 class='signature priv'>
    #<strong>encrypted_cookie_cipher</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L304-L306'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='304' data-end='306'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 304</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_encrypted_cookie_cipher'>encrypted_cookie_cipher</span>
  <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_encrypted_cookie_cipher'>encrypted_cookie_cipher</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aes-256-gcm</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="permanent-instance_method">
  <h3 class='signature '>
    #<strong>permanent</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a jar that’ll automatically set the assigned cookies to have an expiration date 20 years from now. Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cookies'>cookies</span>.<span class='id identifier rubyid_permanent'>permanent</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_prefers_open_id'>prefers_open_id</span>] <span class='op'>=</span> <span class='kw'>true</span>
<span class='comment'># =&gt; Set-Cookie: prefers_open_id=true; path=/; expires=Sun, 16-Dec-2029 03:24:16 GMT</span></code></pre>

<p>This jar is only meant for writing. You’ll read permanent cookies through the regular accessor.</p>

<p>This jar allows chaining with the signed jar as well, so you can set permanent, signed cookies. Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cookies'>cookies</span>.<span class='id identifier rubyid_permanent'>permanent</span>.<span class='id identifier rubyid_signed'><a href="#signed-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#signed (method)">signed</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_remember_me'>remember_me</span>] <span class='op'>=</span> <span class='id identifier rubyid_current_user'>current_user</span>.<span class='id identifier rubyid_id'>id</span>
<span class='comment'># =&gt; Set-Cookie: remember_me=BAhU--848956038e692d7046deab32b7131856ab20e14e; path=/; expires=Sun, 16-Dec-2029 03:24:16 GMT</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L234-L236'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='234' data-end='236'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 234</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_permanent'>permanent</span>
  <span class='ivar'>@permanent</span> <span class='op'>||=</span> <span class='const'><a href="PermanentCookieJar.html" title="ActionDispatch::Cookies::PermanentCookieJar (class)">PermanentCookieJar</a></span>.<span class='id identifier rubyid_new'><a href="AbstractCookieJar.html#new-class_method" title="ActionDispatch::Cookies::AbstractCookieJar.new (method)">new</a></span>(<span class='kw'>self</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="signed-instance_method">
  <h3 class='signature '>
    #<strong>signed</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a jar that’ll automatically generate a signed representation of cookie value and verify it when reading from the cookie again. This is useful for creating cookies with values that the user is not supposed to change. If a signed cookie was tampered with by the user (or a 3rd party), <code>nil</code> will be returned.</p>

<p>This jar requires that you set a suitable secret for the verification on your app’s <code>secret_key_base</code>.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cookies'>cookies</span>.<span class='id identifier rubyid_signed'>signed</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_discount'>discount</span>] <span class='op'>=</span> <span class='int'>45</span>
<span class='comment'># =&gt; Set-Cookie: discount=BAhpMg==--2c1c6906c90a3bc4fd54a51ffb41dffa4bf6b5f7; path=/
</span>
<span class='id identifier rubyid_cookies'>cookies</span>.<span class='id identifier rubyid_signed'>signed</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_discount'>discount</span>] <span class='comment'># =&gt; 45</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L253-L255'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='253' data-end='255'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 253</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_signed'>signed</span>
  <span class='ivar'>@signed</span> <span class='op'>||=</span> <span class='const'><a href="SignedKeyRotatingCookieJar.html" title="ActionDispatch::Cookies::SignedKeyRotatingCookieJar (class)">SignedKeyRotatingCookieJar</a></span>.<span class='id identifier rubyid_new'><a href="SignedKeyRotatingCookieJar.html#new-class_method" title="ActionDispatch::Cookies::SignedKeyRotatingCookieJar.new (method)">new</a></span>(<span class='kw'>self</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="signed_cookie_digest-instance_method">
  <h3 class='signature priv'>
    #<strong>signed_cookie_digest</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L308-L310'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='308' data-end='310'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 308</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_signed_cookie_digest'>signed_cookie_digest</span>
  <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_signed_cookie_digest'>signed_cookie_digest</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SHA1</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="signed_or_encrypted-instance_method">
  <h3 class='signature '>
    #<strong>signed_or_encrypted</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="#signed-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#signed (method)">#signed</a> or <a href="#encrypted-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#encrypted (method)">#encrypted</a> jar, preferring <a href="#encrypted-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#encrypted (method)">#encrypted</a> if <code>secret_key_base</code> is set. Used by <a href="../Session/CookieStore.html" title="ActionDispatch::Session::CookieStore (class)"><code>::ActionDispatch::Session::CookieStore</code></a> to avoid the need to introduce new cookie stores.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/actionpack/lib/action_dispatch/middleware/cookies.rb#L281-L288'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='281' data-end='288'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/middleware/cookies.rb', line 281</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_signed_or_encrypted'>signed_or_encrypted</span>
  <span class='ivar'>@signed_or_encrypted</span> <span class='op'>||=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_secret_key_base'>secret_key_base</span>.<span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_encrypted'><a href="#encrypted-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#encrypted (method)">encrypted</a></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_signed'><a href="#signed-instance_method" title="ActionDispatch::Cookies::ChainedCookieJars#signed (method)">signed</a></span>
    <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>