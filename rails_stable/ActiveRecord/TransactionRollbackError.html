<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Exception: ActiveRecord::TransactionRollbackError &mdash; Rails 7-1-stable</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::TransactionRollbackError",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails 7-1-stable</a> &raquo; 
      <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>TransactionRollbackError&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Exception: ActiveRecord::TransactionRollbackError</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="Deadlocked.html" title="ActiveRecord::Deadlocked (class)">Deadlocked</a>, <a href="SerializationFailure.html" title="ActiveRecord::SerializationFailure (class)">SerializationFailure</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)"><code>StatementInvalid</code></a>,
          <a href="AdapterError.html" title="ActiveRecord::AdapterError (class)"><code>AdapterError</code></a>,
          <a href="ActiveRecordError.html" title="ActiveRecord::ActiveRecordError (class)"><code>ActiveRecordError</code></a>,
          StandardError
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)"><code>StatementInvalid</code></a>,
          <a href="AdapterError.html" title="ActiveRecord::AdapterError (class)"><code>AdapterError</code></a>,
          <a href="ActiveRecordError.html" title="ActiveRecord::ActiveRecordError (class)"><code>ActiveRecordError</code></a>,
          StandardError
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)">ActiveRecord::StatementInvalid</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'>StandardError</li>
          <li class='next'><a href="ActiveRecordError.html" title="ActiveRecord::ActiveRecordError (class)">ActiveRecord::ActiveRecordError</a></li>
          <li class='next'><a href="AdapterError.html" title="ActiveRecord::AdapterError (class)">ActiveRecord::AdapterError</a></li>
          <li class='next'><a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)">ActiveRecord::StatementInvalid</a></li>
          <li class='next'>ActiveRecord::TransactionRollbackError</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activerecord/lib/active_record/errors.rb#L504'>activerecord/lib/active_record/errors.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>TransactionRollbackError</code> will be raised when a transaction is rolled back by the database due to a serialization failure or a deadlock.</p>

<p>These exceptions should not be generally rescued in nested transaction blocks, because they have side-effects in the actual enclosing transaction and internal Active Record state. They can be rescued if you are above the root transaction block, though.</p>

<p>In that case, beware of transactional tests, however, because they run test cases in their own umbrella transaction. If you absolutely need to handle these exceptions in tests please consider disabling transactional tests in the affected test class (<code>self.use_transactional_tests = false</code>).</p>

<p>Due to the aforementioned side-effects, this exception should not be raised manually by users.</p>

<p>See the following:</p>
<ul><li>
<p><a href="https://www.postgresql.org/docs/current/static/transaction-iso.html">www.postgresql.org/docs/current/static/transaction-iso.html</a></p>
</li><li>
<p><a href="https://dev.mysql.com/doc/mysql-errors/en/server-error-reference.html#error_er_lock_deadlock">dev.mysql.com/doc/mysql-errors/en/server-error-reference.html#error_er_lock_deadlock</a></p>
</li></ul>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)"><code>StatementInvalid</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="StatementInvalid.html#new-class_method" title="ActiveRecord::StatementInvalid.new (method)">.new</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AdapterError.html" title="ActiveRecord::AdapterError (class)"><code>AdapterError</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="AdapterError.html#new-class_method" title="ActiveRecord::AdapterError.new (method)">.new</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)"><code>StatementInvalid</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="StatementInvalid.html#binds-instance_method" title="ActiveRecord::StatementInvalid#binds (method)">#binds</a>,
        <a class='i_m ro' href="StatementInvalid.html#sql-instance_method" title="ActiveRecord::StatementInvalid#sql (method)">#sql</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="AdapterError.html" title="ActiveRecord::AdapterError (class)"><code>AdapterError</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="AdapterError.html#connection_pool-instance_method" title="ActiveRecord::AdapterError#connection_pool (method)">#connection_pool</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="StatementInvalid.html" title="ActiveRecord::StatementInvalid (class)"><code>StatementInvalid</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="StatementInvalid.html#set_query-instance_method" title="ActiveRecord::StatementInvalid#set_query (method)">#set_query</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <p class='notice'>This class inherits a constructor from <a href="StatementInvalid.html#new-class_method" title="ActiveRecord::StatementInvalid.new (method)">ActiveRecord::StatementInvalid</a></p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>