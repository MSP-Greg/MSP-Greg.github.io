<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveRecord::Tasks::DatabaseTasks &mdash; Rails 8-0-stable</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::Tasks::DatabaseTasks",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails 8-0-stable</a> &raquo; 
      <a href='../../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
        <a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>DatabaseTasks&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveRecord::Tasks::DatabaseTasks</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L40'>activerecord/lib/active_record/tasks/database_tasks.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-Active+Record+DatabaseTasks">Active Record DatabaseTasks</h3>

<p><code>DatabaseTasks</code> is a utility class, which encapsulates logic behind common tasks used to manage database and migrations.</p>

<p>The tasks defined here are used with Rails commands provided by Active Record.</p>

<p>In order to use <code>DatabaseTasks</code>, a few config values need to be set. All the needed config values are set by Rails already, so it’s necessary to do it only if you want to change the defaults or when you want to use Active Record outside of Rails (in such case after configuring the database tasks, you can also use the rake tasks defined in Active Record).</p>

<p>The possible config values are:</p>
<ul><li>
<p><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">#env</a>: current environment (like <a href="../../Rails.html#env-class_method" title="Rails.env (method)">Rails.env</a>).</p>
</li><li>
<p><a href="#database_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_configuration (method)">#database_configuration</a>: configuration of your databases (as in <code>config/database.yml</code>).</p>
</li><li>
<p><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">#db_dir</a>: your <code>db</code> directory.</p>
</li><li>
<p><a href="#fixtures_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#fixtures_path (method)">#fixtures_path</a>: a path to fixtures directory.</p>
</li><li>
<p><a href="#migrations_paths-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrations_paths (method)">#migrations_paths</a>: a list of paths to directories with migrations.</p>
</li><li>
<p><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">#seed_loader</a>: an object which will load seeds, it needs to respond to the <a href="#load_seed-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#load_seed (method)">#load_seed</a> method.</p>
</li><li>
<p><a href="#root-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#root (method)">#root</a>: a path to the root of the application.</p>
</li></ul>

<p>Example usage of <code>DatabaseTasks</code> outside Rails could look as such:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span>
<span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_database_configuration'><a href="#database_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_configuration (method)">database_configuration</a></span> <span class='op'>=</span> <span class='const'>YAML</span>.<span class='id identifier rubyid_load_file'>load_file</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database_config.yml</span><span class='tstring_end'>&#39;</span></span>)
<span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>db</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># other settings...
</span>
<span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_create_current'><a href="#create_current-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#create_current (method)">create_current</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>production</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='LOCAL_HOSTS-constant' class='summary_signature'>LOCAL_HOSTS =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L63-L63'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 63</a>    <pre class='code ruby'>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&quot;</span></span>]</pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#structure_dump_flags-class_method" title=".structure_dump_flags (class method)">.<strong>structure_dump_flags</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Extra flags passed to database CLI tool (mysqldump/pg_dump) when calling db:schema:dump It can be used as a string/array (the typical case) or a hash (when you use multiple adapters) Example:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#structure_load_flags-class_method" title=".structure_load_flags (class method)">.<strong>structure_load_flags</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Extra flags passed to database CLI tool when calling db:schema:load It can be used as a string/array (the typical case) or a hash (when you use multiple adapters).</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#database_configuration-instance_method" title="#database_configuration (instance method)">#<strong>database_configuration</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#db_dir-instance_method" title="#db_dir (instance method)">#<strong>db_dir</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#db_dir=-instance_method" title="#db_dir= (instance method)">#<strong>db_dir=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#env-instance_method" title="#env (instance method)">#<strong>env</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#env=-instance_method" title="#env= (instance method)">#<strong>env=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#fixtures_path-instance_method" title="#fixtures_path (instance method)">#<strong>fixtures_path</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#fixtures_path=-instance_method" title="#fixtures_path= (instance method)">#<strong>fixtures_path=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#migrations_paths-instance_method" title="#migrations_paths (instance method)">#<strong>migrations_paths</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#migrations_paths=-instance_method" title="#migrations_paths= (instance method)">#<strong>migrations_paths=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#root-instance_method" title="#root (instance method)">#<strong>root</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#root=-instance_method" title="#root= (instance method)">#<strong>root=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#seed_loader-instance_method" title="#seed_loader (instance method)">#<strong>seed_loader</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#seed_loader=-instance_method" title="#seed_loader= (instance method)">#<strong>seed_loader=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#verbose%3F-instance_method" title="#verbose? (instance method)">#<strong>verbose?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#cache_dump_filename-instance_method" title="#cache_dump_filename (instance method)">#<strong>cache_dump_filename</strong>(db_config, schema_cache_path: nil)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#charset-instance_method" title="#charset (instance method)">#<strong>charset</strong>(configuration, *arguments)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#charset_current-instance_method" title="#charset_current (instance method)">#<strong>charset_current</strong>(env_name = env, db_name = name)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check_protected_environments!-instance_method" title="#check_protected_environments! (instance method)">#<strong>check_protected_environments!</strong>(environment = env)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check_schema_file-instance_method" title="#check_schema_file (instance method)">#<strong>check_schema_file</strong>(filename)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check_target_version-instance_method" title="#check_target_version (instance method)">#<strong>check_target_version</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear_schema_cache-instance_method" title="#clear_schema_cache (instance method)">#<strong>clear_schema_cache</strong>(filename)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#collation-instance_method" title="#collation (instance method)">#<strong>collation</strong>(configuration, *arguments)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#collation_current-instance_method" title="#collation_current (instance method)">#<strong>collation_current</strong>(env_name = env, db_name = name)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create-instance_method" title="#create (instance method)">#<strong>create</strong>(configuration, *arguments)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create_all-instance_method" title="#create_all (instance method)">#<strong>create_all</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create_current-instance_method" title="#create_current (instance method)">#<strong>create_current</strong>(environment = env, name = nil)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#drop-instance_method" title="#drop (instance method)">#<strong>drop</strong>(configuration, *arguments)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#drop_all-instance_method" title="#drop_all (instance method)">#<strong>drop_all</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#drop_current-instance_method" title="#drop_current (instance method)">#<strong>drop_current</strong>(environment = env)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dump_all-instance_method" title="#dump_all (instance method)">#<strong>dump_all</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dump_schema_cache-instance_method" title="#dump_schema_cache (instance method)">#<strong>dump_schema_cache</strong>(conn_or_pool, filename)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Dumps the schema cache in YAML format for the connection into the file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_schema_current-instance_method" title="#load_schema_current (instance method)">#<strong>load_schema_current</strong>(format = nil, file = nil, environment = env)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_seed-instance_method" title="#load_seed (instance method)">#<strong>load_seed</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#migrate-instance_method" title="#migrate (instance method)">#<strong>migrate</strong>(version = nil, skip_initialize: false)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#migrate_all-instance_method" title="#migrate_all (instance method)">#<strong>migrate_all</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#migrate_status-instance_method" title="#migrate_status (instance method)">#<strong>migrate_status</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prepare_all-instance_method" title="#prepare_all (instance method)">#<strong>prepare_all</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#purge-instance_method" title="#purge (instance method)">#<strong>purge</strong>(configuration)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#purge_all-instance_method" title="#purge_all (instance method)">#<strong>purge_all</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#purge_current-instance_method" title="#purge_current (instance method)">#<strong>purge_current</strong>(environment = env)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#register_task-instance_method" title="#register_task (instance method)">#<strong>register_task</strong>(pattern, task)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#schema_dump_path-instance_method" title="#schema_dump_path (instance method)">#<strong>schema_dump_path</strong>(db_config, format = db_config.schema_format)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#schema_up_to_date%3F-instance_method" title="#schema_up_to_date? (instance method)">#<strong>schema_up_to_date?</strong>(configuration, _ = nil, file = nil)  &#x21d2; Boolean </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#structure_dump-instance_method" title="#structure_dump (instance method)">#<strong>structure_dump</strong>(configuration, *arguments)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#structure_load-instance_method" title="#structure_load (instance method)">#<strong>structure_load</strong>(configuration, *arguments)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#target_version-instance_method" title="#target_version (instance method)">#<strong>target_version</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#truncate_all-instance_method" title="#truncate_all (instance method)">#<strong>truncate_all</strong>(environment = env)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#check_current_protected_environment!-instance_method" title="#check_current_protected_environment! (instance method)">#<strong>check_current_protected_environment!</strong>(db_config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#class_for_adapter-instance_method" title="#class_for_adapter (instance method)">#<strong>class_for_adapter</strong>(adapter)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#configs_for-instance_method" title="#configs_for (instance method)">#<strong>configs_for</strong>(**options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#database_adapter_for-instance_method" title="#database_adapter_for (instance method)">#<strong>database_adapter_for</strong>(db_config, *arguments)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new instance for the specified db configuration object For classes that have been converted to use db_config objects, pass a <code>DatabaseConfig</code>, otherwise pass a <a href="../../Hash.html" title="Hash (class)"><code>::Hash</code></a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#each_current_configuration-instance_method" title="#each_current_configuration (instance method)">#<strong>each_current_configuration</strong>(environment, name = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#each_current_environment-instance_method" title="#each_current_environment (instance method)">#<strong>each_current_environment</strong>(environment, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#each_local_configuration-instance_method" title="#each_local_configuration (instance method)">#<strong>each_local_configuration</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#initialize_database-instance_method" title="#initialize_database (instance method)">#<strong>initialize_database</strong>(db_config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#local_database%3F-instance_method" title="#local_database? (instance method)">#<strong>local_database?</strong>(db_config)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#resolve_configuration-instance_method" title="#resolve_configuration (instance method)">#<strong>resolve_configuration</strong>(configuration)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#schema_sha1-instance_method" title="#schema_sha1 (instance method)">#<strong>schema_sha1</strong>(file)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#structure_dump_flags_for-instance_method" title="#structure_dump_flags_for (instance method)">#<strong>structure_dump_flags_for</strong>(adapter)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#structure_load_flags_for-instance_method" title="#structure_load_flags_for (instance method)">#<strong>structure_load_flags_for</strong>(adapter)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#truncate_tables-instance_method" title="#truncate_tables (instance method)">#<strong>truncate_tables</strong>(db_config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#with_temporary_pool-instance_method" title="#with_temporary_pool (instance method)">#<strong>with_temporary_pool</strong>(db_config, clobber: false)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#db_configs_with_versions-instance_method" title="#db_configs_with_versions (instance method)">#<strong>db_configs_with_versions</strong>(environment = env)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#dump_schema-instance_method" title="#dump_schema (instance method)">#<strong>dump_schema</strong>(db_config, format = db_config.schema_format)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#for_each-instance_method" title="#for_each (instance method)">#<strong>for_each</strong>(databases)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#load_schema-instance_method" title="#load_schema (instance method)">#<strong>load_schema</strong>(db_config, format = db_config.schema_format, file = nil)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#migration_class-instance_method" title="#migration_class (instance method)">#<strong>migration_class</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#migration_connection-instance_method" title="#migration_connection (instance method)">#<strong>migration_connection</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#migration_connection_pool-instance_method" title="#migration_connection_pool (instance method)">#<strong>migration_connection_pool</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#raise_for_multi_db-instance_method" title="#raise_for_multi_db (instance method)">#<strong>raise_for_multi_db</strong>(environment = env, command:)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#reconstruct_from_schema-instance_method" title="#reconstruct_from_schema (instance method)">#<strong>reconstruct_from_schema</strong>(db_config, file = nil)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setup_initial_database_yaml-instance_method" title="#setup_initial_database_yaml (instance method)">#<strong>setup_initial_database_yaml</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#with_temporary_connection-instance_method" title="#with_temporary_connection (instance method)">#<strong>with_temporary_connection</strong>(db_config, clobber: false, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#with_temporary_pool_for_each-instance_method" title="#with_temporary_pool_for_each (instance method)">#<strong>with_temporary_pool_for_each</strong>(env: ActiveRecord::Tasks::DatabaseTasks.env, name: nil, clobber: false, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="structure_dump_flags-class_method">
  <h3 class='signature rw first'>
    .<strong>structure_dump_flags</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Extra flags passed to database CLI tool (mysqldump/pg_dump) when calling db:schema:dump It can be used as a string/array (the typical case) or a hash (when you use multiple adapters) Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_structure_dump_flags'>structure_dump_flags</span> <span class='op'>=</span> {
  <span class='label'>mysql2:</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--no-defaults</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--skip-add-drop-table</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span>
  <span class='label'>postgresql:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--no-tablespaces</span><span class='tstring_end'>&#39;</span></span>
}</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L50-L50'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='50' data-end='50'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_structure_dump_flags'>structure_dump_flags</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="structure_load_flags-class_method">
  <h3 class='signature rw'>
    .<strong>structure_load_flags</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Extra flags passed to database CLI tool when calling db:schema:load It can be used as a string/array (the typical case) or a hash (when you use multiple adapters)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L56-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_structure_load_flags'>structure_load_flags</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="database_configuration-instance_method">
  <h3 class='signature rw first'>
    #<strong>database_configuration</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L61-L61'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='61' data-end='61'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 61</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_database_configuration'>database_configuration</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="db_dir-instance_method">
  <h3 class='signature rw'>
    #<strong>db_dir</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L83-L85'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='83' data-end='85'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 83</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_db_dir'>db_dir</span>
  <span class='ivar'>@db_dir</span> <span class='op'>||=</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_application'><a href="../../Rails.html#application-class_method" title="Rails.application (method)">application</a></span>.<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_paths'>paths</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>db</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="db_dir=-instance_method">
  <h3 class='signature rw'>
    #<strong>db_dir=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L60-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_migrations_paths'><a href="#migrations_paths-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrations_paths (method)">migrations_paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures_path'><a href="#fixtures_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#fixtures_path (method)">fixtures_path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="env-instance_method">
  <h3 class='signature rw'>
    #<strong>env</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L103-L105'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='103' data-end='105'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 103</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_env'>env</span>
  <span class='ivar'>@env</span> <span class='op'>||=</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_env'><a href="../../Rails.html#env-class_method" title="Rails.env (method)">env</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="env=-instance_method">
  <h3 class='signature rw'>
    #<strong>env=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L60-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_migrations_paths'><a href="#migrations_paths-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrations_paths (method)">migrations_paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures_path'><a href="#fixtures_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#fixtures_path (method)">fixtures_path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fixtures_path-instance_method">
  <h3 class='signature rw'>
    #<strong>fixtures_path</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L91-L97'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='91' data-end='97'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 91</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fixtures_path'>fixtures_path</span>
  <span class='ivar'>@fixtures_path</span> <span class='op'>||=</span> <span class='kw'>if</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FIXTURES_PATH</span><span class='tstring_end'>&quot;</span></span>]
    <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FIXTURES_PATH</span><span class='tstring_end'>&quot;</span></span>])
  <span class='kw'>else</span>
    <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixtures</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fixtures_path=-instance_method">
  <h3 class='signature rw'>
    #<strong>fixtures_path=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L60-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_migrations_paths'><a href="#migrations_paths-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrations_paths (method)">migrations_paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures_path'><a href="#fixtures_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#fixtures_path (method)">fixtures_path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migrations_paths-instance_method">
  <h3 class='signature rw'>
    #<strong>migrations_paths</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L87-L89'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='87' data-end='89'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 87</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migrations_paths'>migrations_paths</span>
  <span class='ivar'>@migrations_paths</span> <span class='op'>||=</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_application'><a href="../../Rails.html#application-class_method" title="Rails.application (method)">application</a></span>.<span class='id identifier rubyid_paths'>paths</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>db/migrate</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_to_a'>to_a</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migrations_paths=-instance_method">
  <h3 class='signature rw'>
    #<strong>migrations_paths=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L60-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_migrations_paths'><a href="#migrations_paths-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrations_paths (method)">migrations_paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures_path'><a href="#fixtures_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#fixtures_path (method)">fixtures_path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="root-instance_method">
  <h3 class='signature rw'>
    #<strong>root</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L99-L101'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='99' data-end='101'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 99</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>
  <span class='ivar'>@root</span> <span class='op'>||=</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_root'><a href="../../Rails.html#root-class_method" title="Rails.root (method)">root</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="root=-instance_method">
  <h3 class='signature rw'>
    #<strong>root=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L60-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_migrations_paths'><a href="#migrations_paths-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrations_paths (method)">migrations_paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures_path'><a href="#fixtures_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#fixtures_path (method)">fixtures_path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="seed_loader-instance_method">
  <h3 class='signature rw'>
    #<strong>seed_loader</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L111-L113'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='111' data-end='113'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 111</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_seed_loader'>seed_loader</span>
  <span class='ivar'>@seed_loader</span> <span class='op'>||=</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_application'><a href="../../Rails.html#application-class_method" title="Rails.application (method)">application</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="seed_loader=-instance_method">
  <h3 class='signature rw'>
    #<strong>seed_loader=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L60-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='60' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_migrations_paths'><a href="#migrations_paths-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrations_paths (method)">migrations_paths</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixtures_path'><a href="#fixtures_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#fixtures_path (method)">fixtures_path</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="verbose?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>verbose?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L567-L569'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='567' data-end='569'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 567</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_verbose?'>verbose?</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VERBOSE</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>?</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VERBOSE</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>false</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="cache_dump_filename-instance_method">
  <h3 class='signature  first'>
    #<strong>cache_dump_filename</strong>(db_config, schema_cache_path: nil)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L476-L480'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='476' data-end='480'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 476</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cache_dump_filename'>cache_dump_filename</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>schema_cache_path:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_schema_cache_path'>schema_cache_path</span> <span class='op'>||</span>
    <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_cache_path'>schema_cache_path</span> <span class='op'>||</span>
    <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_default_schema_cache_path'>default_schema_cache_path</span>(<span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="charset-instance_method">
  <h3 class='signature '>
    #<strong>charset</strong>(configuration, *arguments)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L332-L335'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='332' data-end='335'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 332</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_charset'>charset</span>(<span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_database_adapter_for'><a href="#database_adapter_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_adapter_for (method)">database_adapter_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>).<span class='id identifier rubyid_charset'>charset</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="charset_current-instance_method">
  <h3 class='signature '>
    #<strong>charset_current</strong>(env_name = env, db_name = name)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L327-L330'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='327' data-end='330'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 327</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_charset_current'>charset_current</span>(<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='id identifier rubyid_db_name'>db_name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='id identifier rubyid_db_name'>db_name</span>)
  <span class='id identifier rubyid_charset'><a href="#charset-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#charset (method)">charset</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_current_protected_environment!-instance_method">
  <h3 class='signature priv'>
    #<strong>check_current_protected_environment!</strong>(db_config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L643-L658'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='643' data-end='658'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 643</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_current_protected_environment!'>check_current_protected_environment!</span>(<span class='id identifier rubyid_db_config'>db_config</span>)
  <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool'>pool</span><span class='op'>|</span>
    <span class='id identifier rubyid_migration_context'>migration_context</span> <span class='op'>=</span> <span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_migration_context'>migration_context</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_migration_context'>migration_context</span>.<span class='id identifier rubyid_current_environment'>current_environment</span>
    <span class='id identifier rubyid_stored'>stored</span>  <span class='op'>=</span> <span class='id identifier rubyid_migration_context'>migration_context</span>.<span class='id identifier rubyid_last_stored_environment'>last_stored_environment</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_migration_context'>migration_context</span>.<span class='id identifier rubyid_protected_environment?'>protected_environment?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../ProtectedEnvironmentError.html" title="ActiveRecord::ProtectedEnvironmentError (class)">ProtectedEnvironmentError</a></span>.<span class='id identifier rubyid_new'><a href="../ProtectedEnvironmentError.html#new-class_method" title="ActiveRecord::ProtectedEnvironmentError.new (method)">new</a></span>(<span class='id identifier rubyid_stored'>stored</span>)
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_stored'>stored</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_stored'>stored</span> <span class='op'>!=</span> <span class='id identifier rubyid_current'>current</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../EnvironmentMismatchError.html" title="ActiveRecord::EnvironmentMismatchError (class)">EnvironmentMismatchError</a></span>.<span class='id identifier rubyid_new'><a href="../EnvironmentMismatchError.html#new-class_method" title="ActiveRecord::EnvironmentMismatchError.new (method)">new</a></span>(<span class='label'>current:</span> <span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='label'>stored:</span> <span class='id identifier rubyid_stored'>stored</span>)
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../NoDatabaseError.html" title="ActiveRecord::NoDatabaseError (class)">NoDatabaseError</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_protected_environments!-instance_method">
  <h3 class='signature '>
    #<strong>check_protected_environments!</strong>(environment = env)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L65-L71'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='65' data-end='71'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 65</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_protected_environments!'>check_protected_environments!</span>(<span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>)
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DISABLE_DATABASE_ENVIRONMENT_CHECK</span><span class='tstring_end'>&quot;</span></span>]

  <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_environment'>environment</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_current_protected_environment!'><a href="#check_current_protected_environment!-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#check_current_protected_environment! (method)">check_current_protected_environment!</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_schema_file-instance_method">
  <h3 class='signature '>
    #<strong>check_schema_file</strong>(filename)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L490-L496'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='490' data-end='496'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 490</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_schema_file'>check_schema_file</span>(<span class='id identifier rubyid_filename'>filename</span>)
  <span class='kw'>unless</span> <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_filename'>filename</span>)
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>%{</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_content'> doesn&#39;t exist yet. Run `bin/rails db:migrate` to create it, then try again.</span><span class='tstring_end'>}</span></span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'> If you do not intend to use a database, you should instead alter </span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_root'><a href="../../Rails.html#root-class_method" title="Rails.root (method)">root</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>/config/application.rb to limit the frameworks that will be loaded.</span><span class='tstring_end'>}</span></span> <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='op'>::</span><span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_root'><a href="../../Rails.html#root-class_method" title="Rails.root (method)">root</a></span>)
    <span class='const'><a href="../../Kernel.html" title="Kernel (module)">Kernel</a></span>.<span class='id identifier rubyid_abort'>abort</span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_target_version-instance_method">
  <h3 class='signature '>
    #<strong>check_target_version</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L317-L321'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='317' data-end='321'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 317</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_target_version'>check_target_version</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_target_version'><a href="#target_version-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#target_version (method)">target_version</a></span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_valid_version_format?'><a href="../Migration.html#valid_version_format%3F-class_method" title="ActiveRecord::Migration.valid_version_format? (method)">valid_version_format?</a></span>(<span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VERSION</span><span class='tstring_end'>&quot;</span></span>])
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid format of target version: `VERSION=</span><span class='embexpr_beg'>#{</span><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VERSION</span><span class='tstring_end'>&#39;</span></span>]<span class='embexpr_end'>}</span><span class='tstring_content'>`</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="class_for_adapter-instance_method">
  <h3 class='signature priv'>
    #<strong>class_for_adapter</strong>(adapter)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L582-L588'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='582' data-end='588'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 582</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_class_for_adapter'>class_for_adapter</span>(<span class='id identifier rubyid_adapter'>adapter</span>)
  <span class='id identifier rubyid__key'>_key</span><span class='comma'>,</span> <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@tasks</span>.<span class='id identifier rubyid_reverse_each'>reverse_each</span>.<span class='id identifier rubyid_detect'>detect</span> { <span class='op'>|</span><span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid__task'>_task</span><span class='op'>|</span> <span class='id identifier rubyid_adapter'>adapter</span>[<span class='id identifier rubyid_pattern'>pattern</span>] }
  <span class='kw'>unless</span> <span class='id identifier rubyid_task'>task</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="DatabaseNotSupported.html" title="ActiveRecord::Tasks::DatabaseNotSupported (class)">DatabaseNotSupported</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rake tasks not supported by &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_adapter'>adapter</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; adapter</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../String.html" title="String (class)">String</a></span>) <span class='op'>?</span> <span class='id identifier rubyid_task'>task</span>.<span class='id identifier rubyid_constantize'>constantize</span> <span class='op'>:</span> <span class='id identifier rubyid_task'>task</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_schema_cache-instance_method">
  <h3 class='signature '>
    #<strong>clear_schema_cache</strong>(filename)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L516-L518'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='516' data-end='518'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 516</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_schema_cache'>clear_schema_cache</span>(<span class='id identifier rubyid_filename'>filename</span>)
  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_f'>rm_f</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="collation-instance_method">
  <h3 class='signature '>
    #<strong>collation</strong>(configuration, *arguments)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L342-L345'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='342' data-end='345'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 342</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_collation'>collation</span>(<span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_database_adapter_for'><a href="#database_adapter_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_adapter_for (method)">database_adapter_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>).<span class='id identifier rubyid_collation'>collation</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="collation_current-instance_method">
  <h3 class='signature '>
    #<strong>collation_current</strong>(env_name = env, db_name = name)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L337-L340'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='337' data-end='340'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 337</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_collation_current'>collation_current</span>(<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='id identifier rubyid_db_name'>db_name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='id identifier rubyid_db_name'>db_name</span>)
  <span class='id identifier rubyid_collation'><a href="#collation-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#collation (method)">collation</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="configs_for-instance_method">
  <h3 class='signature priv'>
    #<strong>configs_for</strong>(**options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L559-L561'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='559' data-end='561'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 559</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_configs_for'>configs_for</span>(<span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>.<span class='id identifier rubyid_configurations'><a href="../Base.html#configurations-class_method" title="ActiveRecord::Base.configurations (method)">configurations</a></span>.<span class='id identifier rubyid_configs_for'>configs_for</span>(<span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create-instance_method">
  <h3 class='signature '>
    #<strong>create</strong>(configuration, *arguments)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L115-L125'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='115' data-end='125'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 115</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create'>create</span>(<span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_database_adapter_for'><a href="#database_adapter_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_adapter_for (method)">database_adapter_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>).<span class='id identifier rubyid_create'>create</span>
  <span class='gvar'>$stdout</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Created database &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_verbose?'><a href="#verbose%3F-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#verbose? (method)">verbose?</a></span>
<span class='kw'>rescue</span> <span class='const'><a href="../DatabaseAlreadyExists.html" title="ActiveRecord::DatabaseAlreadyExists (class)">DatabaseAlreadyExists</a></span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Database &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; already exists</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_verbose?'><a href="#verbose%3F-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#verbose? (method)">verbose?</a></span>
<span class='kw'>rescue</span> <span class='const'><a href="../../Exception.html" title="Exception (class)">Exception</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_error'>error</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Couldn&#39;t create &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; database. Please check your configuration.</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_all-instance_method">
  <h3 class='signature '>
    #<strong>create_all</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L127-L133'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='127' data-end='133'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 127</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_all'>create_all</span>
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_migration_connection'><a href="#migration_connection-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection (method)">migration_connection</a></span>.<span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_db_config'>db_config</span>

  <span class='id identifier rubyid_each_local_configuration'><a href="#each_local_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_local_configuration (method)">each_local_configuration</a></span> { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_create'><a href="#create-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#create (method)">create</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) }

  <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_establish_connection'>establish_connection</span>(<span class='id identifier rubyid_db_config'>db_config</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_current-instance_method">
  <h3 class='signature '>
    #<strong>create_current</strong>(environment = env, name = nil)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L170-L174'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='170' data-end='174'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 170</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_current'>create_current</span>(<span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_each_current_configuration'><a href="#each_current_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_current_configuration (method)">each_current_configuration</a></span>(<span class='id identifier rubyid_environment'>environment</span><span class='comma'>,</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>) { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_create'><a href="#create-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#create (method)">create</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) }

  <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_establish_connection'>establish_connection</span>(<span class='id identifier rubyid_environment'>environment</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="database_adapter_for-instance_method">
  <h3 class='signature priv'>
    #<strong>database_adapter_for</strong>(db_config, *arguments)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new instance for the specified db configuration object For classes that have been converted to use db_config objects, pass a <code>DatabaseConfig</code>, otherwise pass a <a href="../../Hash.html" title="Hash (class)"><code>::Hash</code></a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L574-L580'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='574' data-end='580'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 574</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_database_adapter_for'>database_adapter_for</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
  <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='id identifier rubyid_class_for_adapter'><a href="#class_for_adapter-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#class_for_adapter (method)">class_for_adapter</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_adapter'>adapter</span>)
  <span class='id identifier rubyid_converted'>converted</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_using_database_configurations?'>using_database_configurations?</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_using_database_configurations?'>using_database_configurations?</span>

  <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='id identifier rubyid_converted'>converted</span> <span class='op'>?</span> <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>:</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_configuration_hash'>configuration_hash</span>
  <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="db_configs_with_versions-instance_method">
  <h3 class='signature nodoc'>
    #<strong>db_configs_with_versions</strong>(environment = env)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L285-L300'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='285' data-end='300'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 285</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_db_configs_with_versions'>db_configs_with_versions</span>(<span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_db_configs_with_versions'>db_configs_with_versions</span> <span class='op'>=</span> <span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>.<span class='id identifier rubyid_new'>new</span> { <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>=</span> [] }

  <span class='id identifier rubyid_with_temporary_pool_for_each'><a href="#with_temporary_pool_for_each-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool_for_each (method)">with_temporary_pool_for_each</a></span>(<span class='label'>env:</span> <span class='id identifier rubyid_environment'>environment</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool'>pool</span><span class='op'>|</span>
    <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_db_config'>db_config</span>
    <span class='id identifier rubyid_versions_to_run'>versions_to_run</span> <span class='op'>=</span> <span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_migration_context'>migration_context</span>.<span class='id identifier rubyid_pending_migration_versions'>pending_migration_versions</span>
    <span class='id identifier rubyid_target_version'><a href="#target_version-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#target_version (method)">target_version</a></span> <span class='op'>=</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_target_version'><a href="#target_version-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#target_version (method)">target_version</a></span>

    <span class='id identifier rubyid_versions_to_run'>versions_to_run</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_target_version'><a href="#target_version-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#target_version (method)">target_version</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_target_version'><a href="#target_version-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#target_version (method)">target_version</a></span> <span class='op'>!=</span> <span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span>
      <span class='id identifier rubyid_db_configs_with_versions'>db_configs_with_versions</span>[<span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_db_config'>db_config</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_db_configs_with_versions'>db_configs_with_versions</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drop-instance_method">
  <h3 class='signature '>
    #<strong>drop</strong>(configuration, *arguments)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L210-L220'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='210' data-end='220'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 210</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drop'>drop</span>(<span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_database_adapter_for'><a href="#database_adapter_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_adapter_for (method)">database_adapter_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>).<span class='id identifier rubyid_drop'>drop</span>
  <span class='gvar'>$stdout</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dropped database &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_verbose?'><a href="#verbose%3F-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#verbose? (method)">verbose?</a></span>
<span class='kw'>rescue</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../NoDatabaseError.html" title="ActiveRecord::NoDatabaseError (class)">NoDatabaseError</a></span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Database &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; does not exist</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>rescue</span> <span class='const'><a href="../../Exception.html" title="Exception (class)">Exception</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_error'>error</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Couldn&#39;t drop database &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drop_all-instance_method">
  <h3 class='signature '>
    #<strong>drop_all</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L222-L224'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='222' data-end='224'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 222</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drop_all'>drop_all</span>
  <span class='id identifier rubyid_each_local_configuration'><a href="#each_local_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_local_configuration (method)">each_local_configuration</a></span> { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_drop'><a href="#drop-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#drop (method)">drop</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drop_current-instance_method">
  <h3 class='signature '>
    #<strong>drop_current</strong>(environment = env)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L226-L228'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='226' data-end='228'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 226</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drop_current'>drop_current</span>(<span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>)
  <span class='id identifier rubyid_each_current_configuration'><a href="#each_current_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_current_configuration (method)">each_current_configuration</a></span>(<span class='id identifier rubyid_environment'>environment</span>) { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_drop'><a href="#drop-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#drop (method)">drop</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_all-instance_method">
  <h3 class='signature '>
    #<strong>dump_all</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L432-L437'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='432' data-end='437'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 432</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_all'>dump_all</span>
  <span class='id identifier rubyid_with_temporary_pool_for_each'><a href="#with_temporary_pool_for_each-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool_for_each (method)">with_temporary_pool_for_each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool'>pool</span><span class='op'>|</span>
    <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_db_config'>db_config</span>
    <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_dump_schema'><a href="#dump_schema-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#dump_schema (method)">dump_schema</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SCHEMA_FORMAT</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_schema-instance_method">
  <h3 class='signature nodoc'>
    #<strong>dump_schema</strong>(db_config, format = db_config.schema_format)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L439-L461'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='439' data-end='461'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 439</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_schema'>dump_schema</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_dump'>schema_dump</span>

  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>active_record/schema_dumper</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_filename'>filename</span>

  <span class='const'>FileUtils</span>.<span class='id identifier rubyid_mkdir_p'>mkdir_p</span>(<span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_format'>format</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ruby'>ruby</span>
    <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w:utf-8</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../SchemaDumper.html" title="ActiveRecord::SchemaDumper (class)">SchemaDumper</a></span>.<span class='id identifier rubyid_dump'><a href="../SchemaDumper.html#dump-class_method" title="ActiveRecord::SchemaDumper.dump (method)">dump</a></span>(<span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sql'>sql</span>
    <span class='id identifier rubyid_structure_dump'><a href="#structure_dump-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#structure_dump (method)">structure_dump</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_schema_migration'>schema_migration</span>.<span class='id identifier rubyid_table_exists?'>table_exists?</span>
      <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
        <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_migration_connection'><a href="#migration_connection-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection (method)">migration_connection</a></span>.<span class='id identifier rubyid_dump_schema_information'>dump_schema_information</span>
        <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_schema_cache-instance_method">
  <h3 class='signature '>
    #<strong>dump_schema_cache</strong>(conn_or_pool, filename)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Dumps the schema cache in YAML format for the connection into the file</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_dump_schema_cache'>dump_schema_cache</span>(<span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>.<span class='id identifier rubyid_lease_connection'><a href="../ConnectionHandling.html#lease_connection-instance_method" title="ActiveRecord::ConnectionHandling#lease_connection (method)">lease_connection</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tmp/schema_dump.yaml</span><span class='tstring_end'>&quot;</span></span>)</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L512-L514'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='512' data-end='514'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 512</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_schema_cache'>dump_schema_cache</span>(<span class='id identifier rubyid_conn_or_pool'>conn_or_pool</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>)
  <span class='id identifier rubyid_conn_or_pool'>conn_or_pool</span>.<span class='id identifier rubyid_schema_cache'>schema_cache</span>.<span class='id identifier rubyid_dump_to'>dump_to</span>(<span class='id identifier rubyid_filename'>filename</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_current_configuration-instance_method">
  <h3 class='signature priv'>
    #<strong>each_current_configuration</strong>(environment, name = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L590-L598'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='590' data-end='598'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 590</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_each_current_configuration'>each_current_configuration</span>(<span class='id identifier rubyid_environment'>environment</span><span class='comma'>,</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_each_current_environment'><a href="#each_current_environment-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_current_environment (method)">each_current_environment</a></span>(<span class='id identifier rubyid_environment'>environment</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='op'>|</span>
    <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span> <span class='op'>!=</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>

      <span class='kw'>yield</span> <span class='id identifier rubyid_db_config'>db_config</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_current_environment-instance_method">
  <h3 class='signature priv'>
    #<strong>each_current_environment</strong>(environment, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L600-L604'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='600' data-end='604'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 600</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_each_current_environment'>each_current_environment</span>(<span class='id identifier rubyid_environment'>environment</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_environments'>environments</span> <span class='op'>=</span> [<span class='id identifier rubyid_environment'>environment</span>]
  <span class='id identifier rubyid_environments'>environments</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_environment'>environment</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>development</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SKIP_TEST_DATABASE</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATABASE_URL</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_environments'>environments</span>.<span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_local_configuration-instance_method">
  <h3 class='signature priv'>
    #<strong>each_local_configuration</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L606-L616'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='606' data-end='616'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 606</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_each_local_configuration'>each_local_configuration</span>
  <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_local_database?'><a href="#local_database%3F-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#local_database? (method)">local_database?</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
      <span class='kw'>yield</span> <span class='id identifier rubyid_db_config'>db_config</span>
    <span class='kw'>else</span>
      <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This task only modifies local databases. </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'> is on a remote host.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="for_each-instance_method">
  <h3 class='signature nodoc'>
    #<strong>for_each</strong>(databases)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L141-L154'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='141' data-end='154'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 141</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_for_each'>for_each</span>(<span class='id identifier rubyid_databases'>databases</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> {} <span class='kw'>unless</span> <span class='kw'>defined?</span>(<span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>)

  <span class='id identifier rubyid_database_configs'>database_configs</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../DatabaseConfigurations.html" title="ActiveRecord::DatabaseConfigurations (class)">DatabaseConfigurations</a></span>.<span class='id identifier rubyid_new'><a href="../DatabaseConfigurations.html#new-class_method" title="ActiveRecord::DatabaseConfigurations.new (method)">new</a></span>(<span class='id identifier rubyid_databases'>databases</span>).<span class='id identifier rubyid_configs_for'><a href="../DatabaseConfigurations.html#configs_for-instance_method" title="ActiveRecord::DatabaseConfigurations#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_env'><a href="../../Rails.html#env-class_method" title="Rails.env (method)">env</a></span>)

  <span class='comment'># if this is a single database application we don&#39;t want tasks for each primary database
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_database_configs'>database_configs</span>.<span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span>

  <span class='id identifier rubyid_database_configs'>database_configs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database_tasks?'>database_tasks?</span>

    <span class='kw'>yield</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_database-instance_method">
  <h3 class='signature priv'>
    #<strong>initialize_database</strong>(db_config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L660-L678'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='660' data-end='678'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 660</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_database'>initialize_database</span>(<span class='id identifier rubyid_db_config'>db_config</span>)
  <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_database_already_initialized'>database_already_initialized</span> <span class='op'>=</span> <span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_schema_migration'>schema_migration</span>.<span class='id identifier rubyid_table_exists?'>table_exists?</span>
    <span class='kw'>rescue</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../NoDatabaseError.html" title="ActiveRecord::NoDatabaseError (class)">NoDatabaseError</a></span>
      <span class='id identifier rubyid_create'><a href="#create-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#create (method)">create</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
      <span class='kw'>retry</span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_database_already_initialized'>database_already_initialized</span>
      <span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span> <span class='op'>=</span> <span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span> <span class='op'>&amp;&amp;</span> <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span>)
        <span class='id identifier rubyid_load_schema'><a href="#load_schema-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#load_schema (method)">load_schema</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='op'>!</span><span class='id identifier rubyid_database_already_initialized'>database_already_initialized</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_schema-instance_method">
  <h3 class='signature nodoc'>
    #<strong>load_schema</strong>(db_config, format = db_config.schema_format, file = nil)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L376-L396'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='376' data-end='396'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 376</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_schema'>load_schema</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='kw'>nil</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_file'>file</span> <span class='op'>||=</span> <span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_file'>file</span>

  <span class='id identifier rubyid_verbose_was'>verbose_was</span><span class='comma'>,</span> <span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_verbose'><a href="../Migration.html#verbose-class_method" title="ActiveRecord::Migration.verbose (method)">verbose</a></span> <span class='op'>=</span> <span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_verbose'><a href="../Migration.html#verbose-class_method" title="ActiveRecord::Migration.verbose (method)">verbose</a></span><span class='comma'>,</span> <span class='id identifier rubyid_verbose?'><a href="#verbose%3F-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#verbose? (method)">verbose?</a></span> <span class='op'>&amp;&amp;</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VERBOSE</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_check_schema_file'><a href="#check_schema_file-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#check_schema_file (method)">check_schema_file</a></span>(<span class='id identifier rubyid_file'>file</span>)

  <span class='kw'>case</span> <span class='id identifier rubyid_format'>format</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ruby'>ruby</span>
    <span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_file'>file</span>)
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sql'>sql</span>
    <span class='id identifier rubyid_structure_load'><a href="#structure_load-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#structure_load (method)">structure_load</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown format </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format'>format</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_internal_metadata'>internal_metadata</span>.<span class='id identifier rubyid_create_table_and_set_flags'>create_table_and_set_flags</span>(<span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_schema_sha1'><a href="#schema_sha1-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_sha1 (method)">schema_sha1</a></span>(<span class='id identifier rubyid_file'>file</span>))
<span class='kw'>ensure</span>
  <span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_verbose'><a href="../Migration.html#verbose-class_method" title="ActiveRecord::Migration.verbose (method)">verbose</a></span> <span class='op'>=</span> <span class='id identifier rubyid_verbose_was'>verbose_was</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_schema_current-instance_method">
  <h3 class='signature '>
    #<strong>load_schema_current</strong>(format = nil, file = nil, environment = env)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L482-L488'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='482' data-end='488'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 482</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_schema_current'>load_schema_current</span>(<span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>)
  <span class='id identifier rubyid_each_current_configuration'><a href="#each_current_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_current_configuration (method)">each_current_configuration</a></span>(<span class='id identifier rubyid_environment'>environment</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_with_temporary_connection'><a href="#with_temporary_connection-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_connection (method)">with_temporary_connection</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_load_schema'><a href="#load_schema-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#load_schema (method)">load_schema</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span> <span class='op'>||</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_seed-instance_method">
  <h3 class='signature '>
    #<strong>load_seed</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L498-L506'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='498' data-end='506'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 498</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_seed'>load_seed</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>
    <span class='id identifier rubyid_seed_loader'><a href="#seed_loader-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#seed_loader (method)">seed_loader</a></span>.<span class='id identifier rubyid_load_seed'>load_seed</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You tried to load seed data, but no seed loader is specified. Please specify seed </span><span class='tstring_end'>&quot;</span></span> \
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>loader with ActiveRecord::Tasks::DatabaseTasks.seed_loader = your_seed_loader\n</span><span class='tstring_end'>&quot;</span></span> \
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Seed loader should respond to load_seed method</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="local_database?-instance_method">
  <h3 class='signature priv'>
    #<strong>local_database?</strong>(db_config)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L618-L621'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='618' data-end='621'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 618</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_local_database?'>local_database?</span>(<span class='id identifier rubyid_db_config'>db_config</span>)
  <span class='id identifier rubyid_host'>host</span> <span class='op'>=</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_host'>host</span>
  <span class='id identifier rubyid_host'>host</span>.<span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='const'><a href="#LOCAL_HOSTS-constant" title="ActiveRecord::Tasks::DatabaseTasks::LOCAL_HOSTS (constant)">LOCAL_HOSTS</a></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_host'>host</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migrate-instance_method">
  <h3 class='signature '>
    #<strong>migrate</strong>(version = nil, skip_initialize: false)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L262-L283'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='262' data-end='283'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 262</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migrate'>migrate</span>(<span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>skip_initialize:</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SCOPE</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_verbose_was'>verbose_was</span><span class='comma'>,</span> <span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_verbose'><a href="../Migration.html#verbose-class_method" title="ActiveRecord::Migration.verbose (method)">verbose</a></span> <span class='op'>=</span> <span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_verbose'><a href="../Migration.html#verbose-class_method" title="ActiveRecord::Migration.verbose (method)">verbose</a></span><span class='comma'>,</span> <span class='id identifier rubyid_verbose?'><a href="#verbose%3F-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#verbose? (method)">verbose?</a></span>

  <span class='id identifier rubyid_check_target_version'><a href="#check_target_version-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#check_target_version (method)">check_target_version</a></span>

  <span class='id identifier rubyid_initialize_database'><a href="#initialize_database-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#initialize_database (method)">initialize_database</a></span>(<span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_skip_initialize'>skip_initialize</span>

  <span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_migration_context'>migration_context</span>.<span class='id identifier rubyid_migrate'>migrate</span>(<span class='id identifier rubyid_target_version'><a href="#target_version-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#target_version (method)">target_version</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_migration'>migration</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span>.<span class='id identifier rubyid_blank?'>blank?</span>
      <span class='id identifier rubyid_scope'>scope</span>.<span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>||</span> <span class='id identifier rubyid_scope'>scope</span> <span class='op'>==</span> <span class='id identifier rubyid_migration'>migration</span>.<span class='id identifier rubyid_scope'>scope</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_migration'>migration</span>.<span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span> <span class='op'>==</span> <span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_migrations_ran'>migrations_ran</span><span class='op'>|</span>
    <span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_write'><a href="../Migration.html#write-instance_method" title="ActiveRecord::Migration#write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No migrations ran. (using </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_scope'>scope</span><span class='embexpr_end'>}</span><span class='tstring_content'> scope)</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_scope'>scope</span>.<span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_migrations_ran'>migrations_ran</span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_schema_cache'>schema_cache</span>.<span class='id identifier rubyid_clear!'>clear!</span>
<span class='kw'>ensure</span>
  <span class='const'><a href="../Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span>.<span class='id identifier rubyid_verbose'><a href="../Migration.html#verbose-class_method" title="ActiveRecord::Migration.verbose (method)">verbose</a></span> <span class='op'>=</span> <span class='id identifier rubyid_verbose_was'>verbose_was</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migrate_all-instance_method">
  <h3 class='signature '>
    #<strong>migrate_all</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L243-L260'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='243' data-end='260'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 243</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migrate_all'>migrate_all</span>
  <span class='id identifier rubyid_db_configs'>db_configs</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>.<span class='id identifier rubyid_configurations'><a href="../Base.html#configurations-class_method" title="ActiveRecord::Base.configurations (method)">configurations</a></span>.<span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>)
  <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_initialize_database'><a href="#initialize_database-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#initialize_database (method)">initialize_database</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) }

  <span class='kw'>if</span> <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_primary?'>primary?</span>
    <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_migrate'><a href="#migrate-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrate (method)">migrate</a></span>(<span class='label'>skip_initialize:</span> <span class='kw'>true</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_mapped_versions'>mapped_versions</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_db_configs_with_versions'><a href="#db_configs_with_versions-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_configs_with_versions (method)">db_configs_with_versions</a></span>

    <span class='id identifier rubyid_mapped_versions'>mapped_versions</span>.<span class='id identifier rubyid_sort'>sort</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span><span class='comma'>,</span> <span class='id identifier rubyid_db_configs'>db_configs</span><span class='op'>|</span>
      <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
        <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_with_temporary_connection'><a href="#with_temporary_connection-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_connection (method)">with_temporary_connection</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span>
          <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_migrate'><a href="#migrate-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrate (method)">migrate</a></span>(<span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span><span class='comma'>,</span> <span class='label'>skip_initialize:</span> <span class='kw'>true</span>)
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migrate_status-instance_method">
  <h3 class='signature '>
    #<strong>migrate_status</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L302-L315'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='302' data-end='315'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 302</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migrate_status'>migrate_status</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_schema_migration'>schema_migration</span>.<span class='id identifier rubyid_table_exists?'>table_exists?</span>
    <span class='const'><a href="../../Kernel.html" title="Kernel (module)">Kernel</a></span>.<span class='id identifier rubyid_abort'>abort</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Schema migrations table does not exist yet.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># output
</span>  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\ndatabase: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database'>database</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Status</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>8</span>)<span class='embexpr_end'>}</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Migration ID</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>14</span>)<span class='embexpr_end'>}</span><span class='tstring_content'>  Migration Name</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>50</span>
  <span class='id identifier rubyid_migration_connection_pool'><a href="#migration_connection_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_connection_pool (method)">migration_connection_pool</a></span>.<span class='id identifier rubyid_migration_context'>migration_context</span>.<span class='id identifier rubyid_migrations_status'>migrations_status</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span><span class='comma'>,</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span><span class='op'>|</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_center'>center</span>(<span class='int'>8</span>)<span class='embexpr_end'>}</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>14</span>)<span class='embexpr_end'>}</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_puts'>puts</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migration_class-instance_method">
  <h3 class='signature nodoc'>
    #<strong>migration_class</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L537-L539'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='537' data-end='539'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 537</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migration_class'>migration_class</span> <span class='comment'># :nodoc:
</span>  <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migration_connection-instance_method">
  <h3 class='signature nodoc'>
    #<strong>migration_connection</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L541-L543'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='541' data-end='543'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 541</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migration_connection'>migration_connection</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_lease_connection'>lease_connection</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migration_connection_pool-instance_method">
  <h3 class='signature nodoc'>
    #<strong>migration_connection_pool</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L545-L547'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='545' data-end='547'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 545</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migration_connection_pool'>migration_connection_pool</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_connection_pool'>connection_pool</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="name-instance_method">
  <h3 class='signature '>
    #<strong>name</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L107-L109'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='107' data-end='109'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 107</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@name</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>primary</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prepare_all-instance_method">
  <h3 class='signature '>
    #<strong>prepare_all</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L176-L208'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='176' data-end='208'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 176</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_all'>prepare_all</span>
  <span class='id identifier rubyid_seed'>seed</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_dump_db_configs'>dump_db_configs</span> <span class='op'>=</span> []

  <span class='id identifier rubyid_each_current_configuration'><a href="#each_current_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_current_configuration (method)">each_current_configuration</a></span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_database_initialized'>database_initialized</span> <span class='op'>=</span> <span class='id identifier rubyid_initialize_database'><a href="#initialize_database-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#initialize_database (method)">initialize_database</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)

    <span class='id identifier rubyid_seed'>seed</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_database_initialized'>database_initialized</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_seeds?'>seeds?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_each_current_environment'><a href="#each_current_environment-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_current_environment (method)">each_current_environment</a></span>(<span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_environment'>environment</span><span class='op'>|</span>
    <span class='id identifier rubyid_db_configs_with_versions'><a href="#db_configs_with_versions-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_configs_with_versions (method)">db_configs_with_versions</a></span>(<span class='id identifier rubyid_environment'>environment</span>).<span class='id identifier rubyid_sort'>sort</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span><span class='comma'>,</span> <span class='id identifier rubyid_db_configs'>db_configs</span><span class='op'>|</span>
      <span class='id identifier rubyid_dump_db_configs'>dump_db_configs</span> <span class='op'>|=</span> <span class='id identifier rubyid_db_configs'>db_configs</span>

      <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
        <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span>
          <span class='id identifier rubyid_migrate'><a href="#migrate-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migrate (method)">migrate</a></span>(<span class='id identifier rubyid_version'><a href="../../ActiveRecord.html#version-class_method" title="ActiveRecord.version (method)">version</a></span>)
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Dump schema for databases that were migrated.
</span>  <span class='kw'>if</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span>.<span class='id identifier rubyid_dump_schema_after_migration'><a href="../../ActiveRecord.html#dump_schema_after_migration-class_method" title="ActiveRecord.dump_schema_after_migration (method)">dump_schema_after_migration</a></span>
    <span class='id identifier rubyid_dump_db_configs'>dump_db_configs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span>
        <span class='id identifier rubyid_dump_schema'><a href="#dump_schema-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#dump_schema (method)">dump_schema</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_load_seed'><a href="#load_seed-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#load_seed (method)">load_seed</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_seed'>seed</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="purge-instance_method">
  <h3 class='signature '>
    #<strong>purge</strong>(configuration)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L347-L350'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='347' data-end='350'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 347</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_purge'>purge</span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_database_adapter_for'><a href="#database_adapter_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_adapter_for (method)">database_adapter_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>).<span class='id identifier rubyid_purge'>purge</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="purge_all-instance_method">
  <h3 class='signature '>
    #<strong>purge_all</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L352-L354'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='352' data-end='354'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 352</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_purge_all'>purge_all</span>
  <span class='id identifier rubyid_each_local_configuration'><a href="#each_local_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_local_configuration (method)">each_local_configuration</a></span> { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_purge'><a href="#purge-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#purge (method)">purge</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="purge_current-instance_method">
  <h3 class='signature '>
    #<strong>purge_current</strong>(environment = env)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L356-L360'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='356' data-end='360'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 356</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_purge_current'>purge_current</span>(<span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>)
  <span class='id identifier rubyid_each_current_configuration'><a href="#each_current_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#each_current_configuration (method)">each_current_configuration</a></span>(<span class='id identifier rubyid_environment'>environment</span>) { <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span> <span class='id identifier rubyid_purge'><a href="#purge-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#purge (method)">purge</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) }

  <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_establish_connection'>establish_connection</span>(<span class='id identifier rubyid_environment'>environment</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_for_multi_db-instance_method">
  <h3 class='signature nodoc'>
    #<strong>raise_for_multi_db</strong>(environment = env, command:)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L156-L168'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='156' data-end='168'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 156</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_raise_for_multi_db'>raise_for_multi_db</span>(<span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='label'>command:</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_db_configs'>db_configs</span> <span class='op'>=</span> <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_environment'>environment</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_dbs_list'>dbs_list</span> <span class='op'>=</span> []

    <span class='id identifier rubyid_db_configs'>db_configs</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
      <span class='id identifier rubyid_dbs_list'>dbs_list</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_command'>command</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db'>db</span>.<span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You&#39;re using a multiple database application. To use `</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_command'>command</span><span class='embexpr_end'>}</span><span class='tstring_content'>` you must run the namespaced task with a VERSION. Available tasks are </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dbs_list'>dbs_list</span>.<span class='id identifier rubyid_to_sentence'>to_sentence</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reconstruct_from_schema-instance_method">
  <h3 class='signature nodoc'>
    #<strong>reconstruct_from_schema</strong>(db_config, file = nil)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L414-L430'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='414' data-end='430'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 414</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reconstruct_from_schema'>reconstruct_from_schema</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='kw'>nil</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_file'>file</span> <span class='op'>||=</span> <span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span>)

  <span class='id identifier rubyid_check_schema_file'><a href="#check_schema_file-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#check_schema_file (method)">check_schema_file</a></span>(<span class='id identifier rubyid_file'>file</span>) <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span>

  <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='kw'>true</span>) <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_schema_up_to_date?'><a href="#schema_up_to_date%3F-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_up_to_date? (method)">schema_up_to_date?</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
      <span class='id identifier rubyid_truncate_tables'><a href="#truncate_tables-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#truncate_tables (method)">truncate_tables</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>unless</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SKIP_TEST_DATABASE_TRUNCATE</span><span class='tstring_end'>&quot;</span></span>]
    <span class='kw'>else</span>
      <span class='id identifier rubyid_purge'><a href="#purge-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#purge (method)">purge</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
      <span class='id identifier rubyid_load_schema'><a href="#load_schema-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#load_schema (method)">load_schema</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../NoDatabaseError.html" title="ActiveRecord::NoDatabaseError (class)">NoDatabaseError</a></span>
    <span class='id identifier rubyid_create'><a href="#create-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#create (method)">create</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
    <span class='id identifier rubyid_load_schema'><a href="#load_schema-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#load_schema (method)">load_schema</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="register_task-instance_method">
  <h3 class='signature '>
    #<strong>register_task</strong>(pattern, task)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L73-L76'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='73' data-end='76'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 73</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_register_task'>register_task</span>(<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_task'>task</span>)
  <span class='ivar'>@tasks</span> <span class='op'>||=</span> {}
  <span class='ivar'>@tasks</span>[<span class='id identifier rubyid_pattern'>pattern</span>] <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="resolve_configuration-instance_method">
  <h3 class='signature priv'>
    #<strong>resolve_configuration</strong>(configuration)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L563-L565'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='563' data-end='565'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 563</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_resolve_configuration'>resolve_configuration</span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>.<span class='id identifier rubyid_configurations'><a href="../Base.html#configurations-class_method" title="ActiveRecord::Base.configurations (method)">configurations</a></span>.<span class='id identifier rubyid_resolve'>resolve</span>(<span class='id identifier rubyid_configuration'>configuration</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="schema_dump_path-instance_method">
  <h3 class='signature '>
    #<strong>schema_dump_path</strong>(db_config, format = db_config.schema_format)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L463-L474'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='463' data-end='474'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 463</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_schema_dump_path'>schema_dump_path</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_format'><a href="../../ActiveRecord.html#schema_format-class_method" title="ActiveRecord.schema_format (method)">schema_format</a></span>)
  <span class='kw'>return</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SCHEMA</span><span class='tstring_end'>&quot;</span></span>] <span class='kw'>if</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SCHEMA</span><span class='tstring_end'>&quot;</span></span>]

  <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_schema_dump'>schema_dump</span>(<span class='id identifier rubyid_format'>format</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_filename'>filename</span>

  <span class='kw'>if</span> <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_dirname'>dirname</span>(<span class='id identifier rubyid_filename'>filename</span>) <span class='op'>==</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span>
    <span class='id identifier rubyid_filename'>filename</span>
  <span class='kw'>else</span>
    <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_join'>join</span>(<span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_db_dir'><a href="#db_dir-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#db_dir (method)">db_dir</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="schema_sha1-instance_method">
  <h3 class='signature priv'>
    #<strong>schema_sha1</strong>(file)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L623-L625'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='623' data-end='625'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 623</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_schema_sha1'>schema_sha1</span>(<span class='id identifier rubyid_file'>file</span>)
  <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'><a href="../../Digest.html" title="Digest (module)">Digest</a></span><span class='op'>::</span><span class='const'>SHA1</span>.<span class='id identifier rubyid_hexdigest'>hexdigest</span>(<span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_file'>file</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="schema_up_to_date?-instance_method">
  <h3 class='signature '>
    #<strong>schema_up_to_date?</strong>(configuration, _ = nil, file = nil)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L398-L412'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='398' data-end='412'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 398</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_schema_up_to_date?'>schema_up_to_date?</span>(<span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)

  <span class='id identifier rubyid_file'>file</span> <span class='op'>||=</span> <span class='id identifier rubyid_schema_dump_path'><a href="#schema_dump_path-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_dump_path (method)">schema_dump_path</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>&amp;&amp;</span> <span class='const'><a href="../../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_file'>file</span>)

  <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool'>pool</span><span class='op'>|</span>
    <span class='id identifier rubyid_internal_metadata'>internal_metadata</span> <span class='op'>=</span> <span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_internal_metadata'>internal_metadata</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_internal_metadata'>internal_metadata</span>.<span class='id identifier rubyid_enabled?'>enabled?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_internal_metadata'>internal_metadata</span>.<span class='id identifier rubyid_table_exists?'>table_exists?</span>

    <span class='id identifier rubyid_internal_metadata'>internal_metadata</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_schema_sha1'><a href="#schema_sha1-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_sha1 (method)">schema_sha1</a></span>] <span class='op'>==</span> <span class='id identifier rubyid_schema_sha1'><a href="#schema_sha1-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#schema_sha1 (method)">schema_sha1</a></span>(<span class='id identifier rubyid_file'>file</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_initial_database_yaml-instance_method">
  <h3 class='signature nodoc'>
    #<strong>setup_initial_database_yaml</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L135-L139'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='135' data-end='139'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 135</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_initial_database_yaml'>setup_initial_database_yaml</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> {} <span class='kw'>unless</span> <span class='kw'>defined?</span>(<span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>)

  <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_application'><a href="../../Rails.html#application-class_method" title="Rails.application (method)">application</a></span>.<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_load_database_yaml'>load_database_yaml</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="structure_dump-instance_method">
  <h3 class='signature '>
    #<strong>structure_dump</strong>(configuration, *arguments)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L362-L367'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='362' data-end='367'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 362</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_structure_dump'>structure_dump</span>(<span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>.<span class='id identifier rubyid_delete_at'>delete_at</span>(<span class='int'>0</span>)
  <span class='id identifier rubyid_flags'>flags</span> <span class='op'>=</span> <span class='id identifier rubyid_structure_dump_flags_for'><a href="#structure_dump_flags_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#structure_dump_flags_for (method)">structure_dump_flags_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_adapter'>adapter</span>)
  <span class='id identifier rubyid_database_adapter_for'><a href="#database_adapter_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_adapter_for (method)">database_adapter_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>).<span class='id identifier rubyid_structure_dump'>structure_dump</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="structure_dump_flags_for-instance_method">
  <h3 class='signature priv'>
    #<strong>structure_dump_flags_for</strong>(adapter)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L627-L633'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='627' data-end='633'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 627</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_structure_dump_flags_for'>structure_dump_flags_for</span>(<span class='id identifier rubyid_adapter'>adapter</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_structure_dump_flags'><a href="#structure_dump_flags-class_method" title="ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags (method)">structure_dump_flags</a></span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>)
    <span class='id identifier rubyid_structure_dump_flags'><a href="#structure_dump_flags-class_method" title="ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags (method)">structure_dump_flags</a></span>[<span class='id identifier rubyid_adapter'>adapter</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>]
  <span class='kw'>else</span>
    <span class='id identifier rubyid_structure_dump_flags'><a href="#structure_dump_flags-class_method" title="ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags (method)">structure_dump_flags</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="structure_load-instance_method">
  <h3 class='signature '>
    #<strong>structure_load</strong>(configuration, *arguments)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L369-L374'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='369' data-end='374'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 369</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_structure_load'>structure_load</span>(<span class='id identifier rubyid_configuration'>configuration</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>)
  <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_configuration'><a href="#resolve_configuration-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#resolve_configuration (method)">resolve_configuration</a></span>(<span class='id identifier rubyid_configuration'>configuration</span>)
  <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>.<span class='id identifier rubyid_delete_at'>delete_at</span>(<span class='int'>0</span>)
  <span class='id identifier rubyid_flags'>flags</span> <span class='op'>=</span> <span class='id identifier rubyid_structure_load_flags_for'><a href="#structure_load_flags_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#structure_load_flags_for (method)">structure_load_flags_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_adapter'>adapter</span>)
  <span class='id identifier rubyid_database_adapter_for'><a href="#database_adapter_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#database_adapter_for (method)">database_adapter_for</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span>).<span class='id identifier rubyid_structure_load'>structure_load</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="structure_load_flags_for-instance_method">
  <h3 class='signature priv'>
    #<strong>structure_load_flags_for</strong>(adapter)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L635-L641'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='635' data-end='641'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 635</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_structure_load_flags_for'>structure_load_flags_for</span>(<span class='id identifier rubyid_adapter'>adapter</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_structure_load_flags'><a href="#structure_load_flags-class_method" title="ActiveRecord::Tasks::DatabaseTasks.structure_load_flags (method)">structure_load_flags</a></span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>)
    <span class='id identifier rubyid_structure_load_flags'><a href="#structure_load_flags-class_method" title="ActiveRecord::Tasks::DatabaseTasks.structure_load_flags (method)">structure_load_flags</a></span>[<span class='id identifier rubyid_adapter'>adapter</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>]
  <span class='kw'>else</span>
    <span class='id identifier rubyid_structure_load_flags'><a href="#structure_load_flags-class_method" title="ActiveRecord::Tasks::DatabaseTasks.structure_load_flags (method)">structure_load_flags</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="target_version-instance_method">
  <h3 class='signature '>
    #<strong>target_version</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L323-L325'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='323' data-end='325'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 323</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_target_version'>target_version</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VERSION</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VERSION</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VERSION</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="truncate_all-instance_method">
  <h3 class='signature '>
    #<strong>truncate_all</strong>(environment = env)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L237-L241'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='237' data-end='241'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 237</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_truncate_all'>truncate_all</span>(<span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span>)
  <span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_environment'>environment</span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_truncate_tables'><a href="#truncate_tables-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#truncate_tables (method)">truncate_tables</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="truncate_tables-instance_method">
  <h3 class='signature priv'>
    #<strong>truncate_tables</strong>(db_config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L230-L234'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='230' data-end='234'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 230</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_truncate_tables'>truncate_tables</span>(<span class='id identifier rubyid_db_config'>db_config</span>)
  <span class='id identifier rubyid_with_temporary_connection'><a href="#with_temporary_connection-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_connection (method)">with_temporary_connection</a></span>(<span class='id identifier rubyid_db_config'>db_config</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_conn'>conn</span><span class='op'>|</span>
    <span class='id identifier rubyid_conn'>conn</span>.<span class='id identifier rubyid_truncate_tables'>truncate_tables</span>(<span class='op'>*</span><span class='id identifier rubyid_conn'>conn</span>.<span class='id identifier rubyid_tables'>tables</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="with_temporary_connection-instance_method">
  <h3 class='signature nodoc'>
    #<strong>with_temporary_connection</strong>(db_config, clobber: false, &amp;block)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L531-L535'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='531' data-end='535'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 531</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_with_temporary_connection'>with_temporary_connection</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='id identifier rubyid_clobber'>clobber</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool'>pool</span><span class='op'>|</span>
    <span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_with_connection'>with_connection</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="with_temporary_pool-instance_method">
  <h3 class='signature priv'>
    #<strong>with_temporary_pool</strong>(db_config, clobber: false)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L550-L557'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='550' data-end='557'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 550</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_with_temporary_pool'>with_temporary_pool</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_original_db_config'>original_db_config</span> <span class='op'>=</span> <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_connection_db_config'>connection_db_config</span>
  <span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_connection_handler'>connection_handler</span>.<span class='id identifier rubyid_establish_connection'>establish_connection</span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='id identifier rubyid_clobber'>clobber</span>)

  <span class='kw'>yield</span> <span class='id identifier rubyid_pool'>pool</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_migration_class'><a href="#migration_class-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#migration_class (method)">migration_class</a></span>.<span class='id identifier rubyid_connection_handler'>connection_handler</span>.<span class='id identifier rubyid_establish_connection'>establish_connection</span>(<span class='id identifier rubyid_original_db_config'>original_db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='id identifier rubyid_clobber'>clobber</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="with_temporary_pool_for_each-instance_method">
  <h3 class='signature nodoc'>
    #<strong>with_temporary_pool_for_each</strong>(env: ActiveRecord::Tasks::DatabaseTasks.env, name: nil, clobber: false, &amp;block)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/8-0-stable/activerecord/lib/active_record/tasks/database_tasks.rb#L520-L529'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='520' data-end='529'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/tasks/database_tasks.rb', line 520</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_with_temporary_pool_for_each'>with_temporary_pool_for_each</span>(<span class='label'>env:</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Tasks.html" title="ActiveRecord::Tasks (module)">Tasks</a></span><span class='op'>::</span><span class='const'>DatabaseTasks</span>.<span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>
    <span class='id identifier rubyid_db_config'>db_config</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>.<span class='id identifier rubyid_configurations'><a href="../Base.html#configurations-class_method" title="ActiveRecord::Base.configurations (method)">configurations</a></span>.<span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>)
    <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='id identifier rubyid_clobber'>clobber</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>else</span>
    <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>.<span class='id identifier rubyid_configurations'><a href="../Base.html#configurations-class_method" title="ActiveRecord::Base.configurations (method)">configurations</a></span>.<span class='id identifier rubyid_configs_for'><a href="#configs_for-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#configs_for (method)">configs_for</a></span>(<span class='label'>env_name:</span> <span class='id identifier rubyid_env'><a href="#env-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#env (method)">env</a></span><span class='comma'>,</span> <span class='label'>name:</span> <span class='id identifier rubyid_name'><a href="#name-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#name (method)">name</a></span>).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_with_temporary_pool'><a href="#with_temporary_pool-instance_method" title="ActiveRecord::Tasks::DatabaseTasks#with_temporary_pool (method)">with_temporary_pool</a></span>(<span class='id identifier rubyid_db_config'>db_config</span><span class='comma'>,</span> <span class='label'>clobber:</span> <span class='id identifier rubyid_clobber'>clobber</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>