<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Action View CHANGELOG &mdash; Rails 7-1-stable</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "action_view_CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rails 7-1-stable</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Action View CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<ul>
<li><p>Restore the ability for template to return any kind of object and not just strings</p>

<p><em>Jean Boussier</em></p></li>
</ul>

<h2>Rails 7.1.3.2 (February 21, 2024)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 7.1.3.1 (February 21, 2024)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 7.1.3 (January 16, 2024)</h2>

<ul>
<li><p>Better handle SyntaxError in Action View.</p>

<p><em>Mario Caropreso</em></p></li>
<li><p>Fix <code>word_wrap</code> with empty string.</p>

<p><em>Jonathan Hefner</em></p></li>
<li><p>Rename <code>ActionView::TestCase::Behavior::Content</code> to <a href="ActionView/TestCase/Behavior/RenderedViewContent.html" title="ActionView::TestCase::Behavior::RenderedViewContent (class)"><code>::ActionView::TestCase::Behavior::RenderedViewContent</code></a>.</p>

<p>Make <code>RenderedViewContent</code> inherit from <a href="String.html" title="String (class)"><code>String</code></a>. Make private API with <code>:nodoc:</code>.</p>

<p><em>Sean Doyle</em></p></li>
<li><p>Fix detection of required strict locals.</p>

<p>Further fix <code>render @collection</code> compatibility with strict locals</p>

<p><em>Jean Boussier</em></p></li>
</ul>

<h2>Rails 7.1.2 (November 10, 2023)</h2>

<ul>
<li><p>Fix the <code>number_to_human_size</code> view helper to correctly work with negative numbers.</p>

<p><em>Earlopain</em></p></li>
<li><p>Automatically discard the implicit locals injected by collection rendering for template that can&#39;t accept them</p>

<p>When rendering a collection, two implicit variables are injected, which breaks templates with strict locals.</p>

<p>Now they are only passed if the template will actually accept them.</p>

<p><em>Yasha Krasnou</em>, <em>Jean Boussier</em></p></li>
<li><p>Fix <code>@rails/ujs</code> calling <code>start()</code> an extra time when using bundlers</p>

<p><em>Hartley McGuire</em>, <em>Ryunosuke Sato</em></p></li>
<li><p>Fix the <code>capture</code> view helper compatibility with HAML and Slim</p>

<p>When a blank string was captured in HAML or Slim (and possibly other template engines)
it would instead return the entire buffer.</p>

<p><em>Jean Boussier</em></p></li>
</ul>

<h2>Rails 7.1.1 (October 11, 2023)</h2>

<ul>
<li><p>Updated <code>@rails/ujs</code> files to ignore certain data-* attributes when element is contenteditable.</p>

<p>This fix was already landed in &gt;= 7.0.4.3, &lt; 7.1.0.
[<a href="https://github.com/advisories/GHSA-xp5h-f8jf-rc8q">CVE-2023-23913</a>]</p>

<p><em>Ryunosuke Sato</em></p></li>
</ul>

<h2>Rails 7.1.0 (October 05, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 7.1.0.rc2 (October 01, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 7.1.0.rc1 (September 27, 2023)</h2>

<ul>
<li><p>Introduce <code>ActionView::TestCase.register_parser</code></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_register_parser'>register_parser</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rss'>rss</span><span class='comma'>,</span> <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_rendered'>rendered</span> <span class='tlambeg'>{</span> <span class='const'>RSS</span><span class='op'>::</span><span class='const'>Parser</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_rendered'>rendered</span>) }

<span class='id identifier rubyid_test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renders RSS</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_article'>article</span> <span class='op'>=</span> <span class='const'>Article</span>.<span class='id identifier rubyid_create!'>create!</span>(<span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world</span><span class='tstring_end'>&quot;</span></span>)

  <span class='id identifier rubyid_render'>render</span> <span class='label'>formats:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rss'>rss</span><span class='comma'>,</span> <span class='label'>partial:</span> <span class='id identifier rubyid_article'>article</span>

  <span class='id identifier rubyid_assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_rendered'>rendered</span>.<span class='id identifier rubyid_rss'>rss</span>.<span class='id identifier rubyid_items'>items</span>.<span class='id identifier rubyid_last'>last</span>.<span class='id identifier rubyid_title'>title</span>
<span class='kw'>end</span></code></pre>

<p>By default, register parsers for <code>:html</code> and <code>:json</code>.</p>

<p><em>Sean Doyle</em></p></li>
</ul>

<h2>Rails 7.1.0.beta1 (September 13, 2023)</h2>

<ul>
<li><p>Fix <code>simple_format</code> with blank <code>wrapper_tag</code> option returns plain html tag</p>

<p>By default <code>simple_format</code> method returns the text wrapped with <code>&lt;p&gt;</code>. But if we explicitly specify
the <code>wrapper_tag: nil</code> in the options, it returns the text wrapped with <code>&lt;&gt;&lt;/&gt;</code> tag.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_simple_format'>simple_format</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> {}<span class='comma'>,</span>  { <span class='label'>wrapper_tag:</span> <span class='kw'>nil</span> })
<span class='comment'># &lt;&gt;Hello World&lt;/&gt;</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_simple_format'>simple_format</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> {}<span class='comma'>,</span>  { <span class='label'>wrapper_tag:</span> <span class='kw'>nil</span> })
<span class='comment'># &lt;p&gt;Hello World&lt;/p&gt;</span></code></pre>

<p><em>Akhil G Krishnan</em>, <em>Junichi Ito</em></p></li>
<li><p>Don&#39;t double-encode nested <code>field_id</code> and <code>field_name</code> index values</p>

<p>Pass <code>index: @options</code> as a default keyword argument to <code>field_id</code> and
<code>field_name</code> view helper methods.</p>

<p><em>Sean Doyle</em></p></li>
<li><p>Allow opting in/out of <code>Link preload</code> headers when calling <code>stylesheet_link_tag</code> or <code>javascript_include_tag</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># will exclude header, even if setting is enabled:
</span><span class='id identifier rubyid_javascript_include_tag'>javascript_include_tag</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.com/all.js</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>preload_links_header:</span> <span class='kw'>false</span>)

<span class='comment'># will include header, even if setting is disabled:
</span><span class='id identifier rubyid_stylesheet_link_tag'>stylesheet_link_tag</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.com/all.js</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>preload_links_header:</span> <span class='kw'>true</span>)</code></pre>

<p><em>Alex Ghiculescu</em></p></li>
<li><p>Stop generating <code>Link preload</code> headers once it has reached 1KB.</p>

<p>Some proxies have trouble handling large headers, but more importantly preload links
have diminishing returns so it&#39;s preferable not to go overboard with them.</p>

<p>If tighter control is needed, it&#39;s recommended to disable automatic generation of preloads
and to generate them manually from the controller or from a middleware.</p>

<p><em>Jean Boussier</em></p></li>
<li><p><code>simple_format</code> helper now handles a <code>:sanitize_options</code> - any extra options you want appending to the sanitize.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_simple_format'>simple_format</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a target=\&quot;_blank\&quot; href=\&quot;http://example.com\&quot;&gt;Continue&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; &quot;&lt;p&gt;&lt;a href=\&quot;http://example.com\&quot;&gt;Continue&lt;/a&gt;&lt;/p&gt;&quot;</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_simple_format'>simple_format</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a target=\&quot;_blank\&quot; href=\&quot;http://example.com\&quot;&gt;Continue&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> {}<span class='comma'>,</span> { <span class='label'>sanitize_options:</span> { <span class='label'>attributes:</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>target</span><span class='words_sep'> </span><span class='tstring_content'>href</span><span class='tstring_end'>]</span></span> } })
<span class='comment'># =&gt; &quot;&lt;p&gt;&lt;a target=\&quot;_blank\&quot; href=\&quot;http://example.com\&quot;&gt;Continue&lt;/a&gt;&lt;/p&gt;&quot;</span></code></pre>

<p><em>Andrei Andriichuk</em></p></li>
<li><p>Add support for HTML5 standards-compliant sanitizers, and default to <code>Rails::HTML5::Sanitizer</code>
in the Rails 7.1 configuration if it is supported.</p>

<p>Action View&#39;s HTML sanitizers can be configured by setting
<code>config.action_view.sanitizer_vendor</code>. Supported values are <code>Rails::HTML4::Sanitizer</code> or
<code>Rails::HTML5::Sanitizer</code>.</p>

<p>The Rails 7.1 configuration will set this to <code>Rails::HTML5::Sanitizer</code> when it is supported, and
fall back to <code>Rails::HTML4::Sanitizer</code>. Previous configurations default to
<code>Rails::HTML4::Sanitizer</code>.</p>

<p><em>Mike Dalessio</em></p></li>
<li><p><code>config.dom_testing_default_html_version</code> controls the HTML parser used by
<code>ActionView::TestCase#document_root_element</code>, which creates the DOM used by the assertions in
Rails::Dom::Testing.</p>

<p>The Rails 7.1 default configuration opts into the HTML5 parser when it is supported, to better
represent what the DOM would be in a browser user agent. Previously this test helper always used
Nokogiri&#39;s HTML4 parser.</p>

<p><em>Mike Dalessio</em></p></li>
<li><p>Add support for the HTML picture tag. It supports passing a <a href="String.html" title="String (class)"><code>String</code></a>, an <a href="Array.html" title="Array (class)"><code>Array</code></a> or a Block.
Supports passing properties directly to the img tag via the <code>:image</code> key.
Since the picture tag requires an img tag, the last element you provide will be used for the img tag.
For complete control over the picture tag, a block can be passed, which will populate the contents of the tag accordingly.</p>

<p>Can be used like this for a single source:</p>

<pre class="code xml"><code class="xml">&lt;%= picture_tag(&quot;picture.webp&quot;) %&gt;
</code></pre>

<p>which will generate the following:</p>

<pre class="code xml"><code class="xml">&lt;picture&gt;
    &lt;img src=&quot;/images/picture.webp&quot; /&gt;
&lt;/picture&gt;
</code></pre>

<p>For multiple sources:</p>

<pre class="code xml"><code class="xml">&lt;%= picture_tag(&quot;picture.webp&quot;, &quot;picture.png&quot;, :class =&gt; &quot;mt-2&quot;, :image =&gt; { alt: &quot;Image&quot;, class: &quot;responsive-img&quot; }) %&gt;
</code></pre>

<p>will generate:</p>

<pre class="code xml"><code class="xml">&lt;picture class=&quot;mt-2&quot;&gt;
    &lt;source srcset=&quot;/images/picture.webp&quot; /&gt;
    &lt;source srcset=&quot;/images/picture.png&quot; /&gt;
    &lt;img alt=&quot;Image&quot; class=&quot;responsive-img&quot; src=&quot;/images/picture.png&quot; /&gt;
&lt;/picture&gt;
</code></pre>

<p>Full control via a block:</p>

<pre class="code xml"><code class="xml">&lt;%= picture_tag(:class =&gt; &quot;my-class&quot;) do %&gt;
    &lt;%= tag(:source, :srcset =&gt; image_path(&quot;picture.webp&quot;)) %&gt;
    &lt;%= tag(:source, :srcset =&gt; image_path(&quot;picture.png&quot;)) %&gt;
    &lt;%= image_tag(&quot;picture.png&quot;, :alt =&gt; &quot;Image&quot;) %&gt;
&lt;% end %&gt;
</code></pre>

<p>will generate:</p>

<pre class="code xml"><code class="xml">&lt;picture class=&quot;my-class&quot;&gt;
    &lt;source srcset=&quot;/images/picture.webp&quot; /&gt;
    &lt;source srcset=&quot;/images/picture.png&quot; /&gt;
    &lt;img alt=&quot;Image&quot; src=&quot;/images/picture.png&quot; /&gt;
&lt;/picture&gt;
</code></pre>

<p><em>Juan Pablo Balarini</em></p></li>
<li><p>Remove deprecated support to passing instance variables as locals to partials.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated constant <code>ActionView::Path</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Guard <code>token_list</code> calls from escaping HTML too often</p>

<p><em>Sean Doyle</em></p></li>
<li><p><code>select</code> can now be called with a single hash containing options and some HTML options</p>

<p>Previously this would not work as expected:</p>

<pre class="code xml"><code class="xml">&lt;%= select :post, :author, authors, required: true %&gt;
</code></pre>

<p>Instead you needed to do this:</p>

<pre class="code xml"><code class="xml">&lt;%= select :post, :author, authors, {}, required: true %&gt;
</code></pre>

<p>Now, either form is accepted, for the following HTML attributes: <code>required</code>, <code>multiple</code>, <code>size</code>.</p>

<p><em>Alex Ghiculescu</em></p></li>
<li><p>Datetime form helpers (<code>time_field</code>, <code>date_field</code>, <code>datetime_field</code>, <code>week_field</code>, <code>month_field</code>) now accept an instance of Time/Date/DateTime as <code>:value</code> option.</p>

<p>Before:</p>

<pre class="code xml"><code class="xml">&lt;%= form.datetime_field :written_at, value: Time.current.strftime(&quot;%Y-%m-%dT%T&quot;) %&gt;
</code></pre>

<p>After:</p>

<pre class="code xml"><code class="xml">&lt;%= form.datetime_field :written_at, value: Time.current %&gt;
</code></pre>

<p><em>Andrey Samsonov</em></p></li>
<li><p>Choices of <code>select</code> can optionally contain html attributes as the last element
of the child arrays when using grouped/nested collections</p>

<pre class="code xml"><code class="xml">&lt;%= form.select :foo, [[&quot;North America&quot;, [[&quot;United States&quot;,&quot;US&quot;],[&quot;Canada&quot;,&quot;CA&quot;]], { disabled: &quot;disabled&quot; }]] %&gt;
# =&gt; &lt;select&gt;&lt;optgroup label=&quot;North America&quot; disabled=&quot;disabled&quot;&gt;&lt;option value=&quot;US&quot;&gt;United States&lt;/option&gt;&lt;option value=&quot;CA&quot;&gt;Canada&lt;/option&gt;&lt;/optgroup&gt;&lt;/select&gt;
</code></pre>

<p><em>Chris Gunther</em></p></li>
<li><p><code>check_box_tag</code> and <code>radio_button_tag</code> now accept <code>checked</code> as a keyword argument</p>

<p>This is to make the API more consistent with the <code>FormHelper</code> variants. You can now
provide <code>checked</code> as a positional or keyword argument:</p>

<pre class="code erb"><code class="erb">= check_box_tag &quot;admin&quot;, &quot;1&quot;, false
= check_box_tag &quot;admin&quot;, &quot;1&quot;, checked: false

= radio_button_tag &#39;favorite_color&#39;, &#39;maroon&#39;, false
= radio_button_tag &#39;favorite_color&#39;, &#39;maroon&#39;, checked: false
</code></pre>

<p><em>Alex Ghiculescu</em></p></li>
<li><p>Allow passing a class to <code>dom_id</code>.
You no longer need to call <code>new</code> when passing a class to <code>dom_id</code>.
This makes <code>dom_id</code> behave like <code>dom_class</code> in this regard.
Apart from saving a few keystrokes, it prevents Ruby from needing
to instantiate a whole new object just to generate a string.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_dom_id'>dom_id</span>(<span class='const'>Post</span>) <span class='comment'># =&gt; NoMethodError: undefined method `to_key&#39; for Post:Class</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_dom_id'>dom_id</span>(<span class='const'>Post</span>) <span class='comment'># =&gt; &quot;new_post&quot;</span></code></pre>

<p><em>Goulven Champenois</em></p></li>
<li><p>Report <code>:locals</code> as part of the data returned by <a href="ActionView.html" title="ActionView (module)"><code>ActionView</code></a> render instrumentation.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby">{
<span class='label'>identifier:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/Users/adam/projects/notifications/app/views/posts/index.html.erb</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>layouts/application</span><span class='tstring_end'>&quot;</span></span>
}</code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby">{
<span class='label'>identifier:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/Users/adam/projects/notifications/app/views/posts/index.html.erb</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>layouts/application</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='label'>locals:</span> {<span class='label'>foo:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span>}
}</code></pre>

<p><em>Aaron Gough</em></p></li>
<li><p>Strip <code>break_sequence</code> at the end of <code>word_wrap</code>.</p>

<p>This fixes a bug where <code>word_wrap</code> didn&#39;t properly strip off break sequences that had printable characters.</p>

<p>For example, compare the outputs of this template:</p>

<pre class="code erb"><code class="erb"># &lt;%= word_wrap(&quot;11 22\n33 44&quot;, line_width: 2, break_sequence: &quot;\n# &quot;) %&gt;
</code></pre>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># 11
</span><span class='comment'># 22
</span><span class='comment'>#
</span><span class='comment'># 33
</span><span class='comment'># 44
</span><span class='comment'>#</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># 11
</span><span class='comment'># 22
</span><span class='comment'># 33
</span><span class='comment'># 44</span></code></pre>

<p><em>Max Chernyak</em></p></li>
<li><p>Allow templates to set strict <code>locals</code>.</p>

<p>By default, templates will accept any <code>locals</code> as keyword arguments. To define what <code>locals</code> a template accepts, add a <code>locals</code> magic comment:</p>

<pre class="code xml"><code class="xml">&lt;%# locals: (message:) -%&gt;
&lt;%= message %&gt;
</code></pre>

<p>Default values can also be provided:</p>

<pre class="code xml"><code class="xml">&lt;%# locals: (message: &quot;Hello, world!&quot;) -%&gt;
&lt;%= message %&gt;
</code></pre>

<p>Or <code>locals</code> can be disabled entirely:</p>

<pre class="code xml"><code class="xml">&lt;%# locals: () %&gt;
</code></pre>

<p><em>Joel Hawksley</em></p></li>
<li><p>Add <code>include_seconds</code> option for <code>datetime_local_field</code></p>

<p>This allows to omit seconds part in the input field, by passing <code>include_seconds: false</code></p>

<p><em>Wojciech Wnętrzak</em></p></li>
<li><p>Guard against <a href="ActionView/Helpers/FormTagHelper.html#field_name-instance_method" title="ActionView::Helpers::FormTagHelper#field_name (method)">ActionView::Helpers::FormTagHelper#field_name</a> calls with nil
<code>object_name</code> arguments. For example:</p>

<pre class="code xml"><code class="xml">&lt;%= fields do |f| %&gt;
  &lt;%= f.field_name :body %&gt;
&lt;% end %&gt;
</code></pre>

<p><em>Sean Doyle</em></p></li>
<li><p>Strings returned from <code>strip_tags</code> are correctly tagged <code>html_safe?</code></p>

<p>Because these strings contain no HTML elements and the basic entities are escaped, they are safe
to be included as-is as PCDATA in HTML content. Tagging them as html-safe avoids double-escaping
entities when being concatenated to a SafeBuffer during rendering.</p>

<p>Fixes <a href="https://github.com/rails/rails-html-sanitizer/issues/124">rails/rails-html-sanitizer#124</a></p>

<p><em>Mike Dalessio</em></p></li>
<li><p>Move <code>convert_to_model</code> call from <code>form_for</code> into <code>form_with</code></p>

<p>Now that <code>form_for</code> is implemented in terms of <code>form_with</code>, remove the
<code>convert_to_model</code> call from <code>form_for</code>.</p>

<p><em>Sean Doyle</em></p></li>
<li><p>Fix and add protections for XSS in <a href="ActionView/Helpers.html" title="ActionView::Helpers (module)"><code>::ActionView::Helpers</code></a> and <a href="ERB/Util.html" title="ERB::Util (module)"><code>::ERB::Util</code></a>.</p>

<p>Escape dangerous characters in names of tags and names of attributes in the
tag helpers, following the XML specification. Rename the option
<code>:escape_attributes</code> to <code>:escape</code>, to simplify by applying the option to the
whole tag.</p>

<p><em>Álvaro Martín Fraguas</em></p></li>
<li><p>Extend audio_tag and video_tag to accept Active Storage attachments.</p>

<p>Now it&#39;s possible to write</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_audio_tag'>audio_tag</span>(<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_audio_file'>audio_file</span>)
<span class='id identifier rubyid_video_tag'>video_tag</span>(<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_video_file'>video_file</span>)</code></pre>

<p>Instead of</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_audio_tag'>audio_tag</span>(<span class='id identifier rubyid_polymorphic_path'>polymorphic_path</span>(<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_audio_file'>audio_file</span>))
<span class='id identifier rubyid_video_tag'>video_tag</span>(<span class='id identifier rubyid_polymorphic_path'>polymorphic_path</span>(<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_video_file'>video_file</span>))</code></pre>

<p><code>image_tag</code> already supported that, so this follows the same pattern.</p>

<p><em>Matheus Richard</em></p></li>
<li><p>Ensure models passed to <code>form_for</code> attempt to call <code>to_model</code>.</p>

<p><em>Sean Doyle</em></p></li>
</ul>

<p>Please check [7-0-stable]) for previous changes.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>