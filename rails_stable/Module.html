<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Module &mdash; Rails 7-1-stable</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Module",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rails 7-1-stable</a> &raquo; 
      <a href='_index.html#alpha_M'>Index (M)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Module&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Module</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="Module/Concerning.html" title="Module::Concerning (module)"><code>Concerning</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="Module/DelegationError.html" title="Module::DelegationError (class)"><code>DelegationError</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="ActiveModel/SecurePassword/InstanceMethodsOnActivation.html" title="ActiveModel::SecurePassword::InstanceMethodsOnActivation (class)">ActiveModel::SecurePassword::InstanceMethodsOnActivation</a>, <a class='nodoc' href="ActiveRecord/AttributeMethods/GeneratedAttributeMethods.html" title="ActiveRecord::AttributeMethods::GeneratedAttributeMethods (class)">ActiveRecord::AttributeMethods::GeneratedAttributeMethods</a>, <a class='nodoc' href="ActiveRecord/Delegation/GeneratedRelationMethods.html" title="ActiveRecord::Delegation::GeneratedRelationMethods (class)">ActiveRecord::Delegation::GeneratedRelationMethods</a>, <a class='nodoc' href="ActiveRecord/Enum/EnumMethods.html" title="ActiveRecord::Enum::EnumMethods (class)">ActiveRecord::Enum::EnumMethods</a>, <a href="ActiveSupport/Deprecation/DeprecatedConstantProxy.html" title="ActiveSupport::Deprecation::DeprecatedConstantProxy (class)">ActiveSupport::Deprecation::DeprecatedConstantProxy</a>, <a class='nodoc' href="ActiveModel/Type/Helpers/AcceptsMultiparameterTime.html" title="ActiveModel::Type::Helpers::AcceptsMultiparameterTime (class)">ActiveModel::Type::Helpers::AcceptsMultiparameterTime</a>, <a href="ActiveModel/Validations/AcceptanceValidator/LazilyDefineAttributes.html" title="ActiveModel::Validations::AcceptanceValidator::LazilyDefineAttributes (class)">ActiveModel::Validations::AcceptanceValidator::LazilyDefineAttributes</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Module/Concerning.html" title="Module::Concerning (module)"><code>Concerning</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors.rb#L8'>activesupport/lib/active_support/core_ext/module/attribute_accessors.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/aliasing.rb#L3'>activesupport/lib/active_support/core_ext/module/aliasing.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/anonymous.rb#L3'>activesupport/lib/active_support/core_ext/module/anonymous.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L3'>activesupport/lib/active_support/core_ext/module/attr_internal.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb#L14'>activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/concerning.rb#L5'>activesupport/lib/active_support/core_ext/module/concerning.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/delegation.rb#L5'>activesupport/lib/active_support/core_ext/module/delegation.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/deprecation.rb#L3'>activesupport/lib/active_support/core_ext/module/deprecation.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/introspection.rb#L5'>activesupport/lib/active_support/core_ext/module/introspection.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/redefine_method.rb#L3'>activesupport/lib/active_support/core_ext/module/redefine_method.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/remove_method.rb#L5'>activesupport/lib/active_support/core_ext/module/remove_method.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/object/deep_dup.rb#L57'>activesupport/lib/active_support/core_ext/object/deep_dup.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/object/json.rb#L52'>activesupport/lib/active_support/core_ext/object/json.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h3 id="label-Attribute+Accessors+per+Thread">Attribute Accessors per Thread</h3>

<p>Extends the module object with class/module and instance accessors for class/module attributes, just like the native attr* accessors for instance attributes, but does so on a per-thread basis.</p>

<p>So the values are scoped within the <code>Thread.current</code> space under the class name of the module.</p>

<p>Note that it can also be scoped per-fiber if <code>Rails.application.config.active_support.isolation_level</code> is set to <code>:fiber</code>.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DELEGATION_RESERVED_KEYWORDS-constant' class='summary_signature'>DELEGATION_RESERVED_KEYWORDS =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/delegation.rb#L13-L13'># File 'activesupport/lib/active_support/core_ext/module/delegation.rb', line 13</a>    <pre class='code ruby'><span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>_</span><span class='words_sep'> </span><span class='tstring_content'>arg</span><span class='words_sep'> </span><span class='tstring_content'>args</span><span class='words_sep'> </span><span class='tstring_content'>block</span><span class='tstring_end'>)</span></span></pre>
  </li>
  <li>
    <span id='DELEGATION_RESERVED_METHOD_NAMES-constant' class='summary_signature'>DELEGATION_RESERVED_METHOD_NAMES =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/delegation.rb#L14-L16'># File 'activesupport/lib/active_support/core_ext/module/delegation.rb', line 14</a>    <pre class='code ruby'><span class='const'>Set</span>.<span class='id identifier rubyid_new'>new</span>(
  <span class='const'><a href="#RUBY_RESERVED_KEYWORDS-constant" title="Module::RUBY_RESERVED_KEYWORDS (constant)">RUBY_RESERVED_KEYWORDS</a></span> <span class='op'>+</span> <span class='const'><a href="#DELEGATION_RESERVED_KEYWORDS-constant" title="Module::DELEGATION_RESERVED_KEYWORDS (constant)">DELEGATION_RESERVED_KEYWORDS</a></span>
).<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='RUBY_RESERVED_KEYWORDS-constant' class='summary_signature'>RUBY_RESERVED_KEYWORDS =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/delegation.rb#L10-L12'># File 'activesupport/lib/active_support/core_ext/module/delegation.rb', line 10</a>    <pre class='code ruby'><span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>__ENCODING__</span><span class='words_sep'> </span><span class='tstring_content'>__LINE__</span><span class='words_sep'> </span><span class='tstring_content'>__FILE__</span><span class='words_sep'> </span><span class='tstring_content'>alias</span><span class='words_sep'> </span><span class='tstring_content'>and</span><span class='words_sep'> </span><span class='tstring_content'>BEGIN</span><span class='words_sep'> </span><span class='tstring_content'>begin</span><span class='words_sep'> </span><span class='tstring_content'>break</span><span class='words_sep'>
</span><span class='tstring_content'>case</span><span class='words_sep'> </span><span class='tstring_content'>class</span><span class='words_sep'> </span><span class='tstring_content'>def</span><span class='words_sep'> </span><span class='tstring_content'>defined?</span><span class='words_sep'> </span><span class='tstring_content'>do</span><span class='words_sep'> </span><span class='tstring_content'>else</span><span class='words_sep'> </span><span class='tstring_content'>elsif</span><span class='words_sep'> </span><span class='tstring_content'>END</span><span class='words_sep'> </span><span class='tstring_content'>end</span><span class='words_sep'> </span><span class='tstring_content'>ensure</span><span class='words_sep'> </span><span class='tstring_content'>false</span><span class='words_sep'> </span><span class='tstring_content'>for</span><span class='words_sep'> </span><span class='tstring_content'>if</span><span class='words_sep'> </span><span class='tstring_content'>in</span><span class='words_sep'> </span><span class='tstring_content'>module</span><span class='words_sep'> </span><span class='tstring_content'>next</span><span class='words_sep'> </span><span class='tstring_content'>nil</span><span class='words_sep'>
</span><span class='tstring_content'>not</span><span class='words_sep'> </span><span class='tstring_content'>or</span><span class='words_sep'> </span><span class='tstring_content'>redo</span><span class='words_sep'> </span><span class='tstring_content'>rescue</span><span class='words_sep'> </span><span class='tstring_content'>retry</span><span class='words_sep'> </span><span class='tstring_content'>return</span><span class='words_sep'> </span><span class='tstring_content'>self</span><span class='words_sep'> </span><span class='tstring_content'>super</span><span class='words_sep'> </span><span class='tstring_content'>then</span><span class='words_sep'> </span><span class='tstring_content'>true</span><span class='words_sep'> </span><span class='tstring_content'>undef</span><span class='words_sep'> </span><span class='tstring_content'>unless</span><span class='words_sep'> </span><span class='tstring_content'>until</span><span class='words_sep'> </span><span class='tstring_content'>when</span><span class='words_sep'> </span><span class='tstring_content'>while</span><span class='words_sep'> </span><span class='tstring_content'>yield</span><span class='tstring_end'>)</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#attr_internal_naming_format-class_method" title=".attr_internal_naming_format (class method)">.<strong>attr_internal_naming_format</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#anonymous%3F-instance_method" title="#anonymous? (instance method)">#<strong>anonymous?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>A module may or may not have a name.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#alias_attribute-instance_method" title="#alias_attribute (instance method)">#<strong>alias_attribute</strong>(new_name, old_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Allows you to make aliases for attributes, which includes getter, setter, and a predicate.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#attr_internal-instance_method" title="#attr_internal (instance method)">#<strong>attr_internal</strong>(*attrs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#attr_internal_accessor-instance_method" title="Module#attr_internal_accessor (method)">#attr_internal_accessor</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#attr_internal_accessor-instance_method" title="#attr_internal_accessor (instance method)">#<strong>attr_internal_accessor</strong>(*attrs)  </a>
      (also: #attr_internal)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Declares an attribute reader and writer backed by an internally-named instance variable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#attr_internal_reader-instance_method" title="#attr_internal_reader (instance method)">#<strong>attr_internal_reader</strong>(*attrs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Declares an attribute reader backed by an internally-named instance variable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#attr_internal_writer-instance_method" title="#attr_internal_writer (instance method)">#<strong>attr_internal_writer</strong>(*attrs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Declares an attribute writer backed by an internally-named instance variable.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cattr_accessor-instance_method" title="#cattr_accessor (instance method)">#<strong>cattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil, &amp;blk)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#mattr_accessor-instance_method" title="Module#mattr_accessor (method)">#mattr_accessor</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cattr_reader-instance_method" title="#cattr_reader (instance method)">#<strong>cattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil, location: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#mattr_reader-instance_method" title="Module#mattr_reader (method)">#mattr_reader</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cattr_writer-instance_method" title="#cattr_writer (instance method)">#<strong>cattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true, default: nil, location: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#mattr_writer-instance_method" title="Module#mattr_writer (method)">#mattr_writer</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#deep_dup-instance_method" title="#deep_dup (instance method)">#<strong>deep_dup</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a copy of module or class if it’s anonymous.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delegate-instance_method" title="#delegate (instance method)">#<strong>delegate</strong>(*methods, to: nil, prefix: nil, allow_nil: nil, private: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Provides a <code>delegate</code> class method to easily expose contained objects’ public methods as your own.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delegate_missing_to-instance_method" title="#delegate_missing_to (instance method)">#<strong>delegate_missing_to</strong>(target, allow_nil: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When building decorators, a common pattern may emerge:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#deprecate-instance_method" title="#deprecate (instance method)">#<strong>deprecate</strong>(*method_names, deprecator: nil, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>deprecate <code>:foo</code>, deprecator: <code>MyLib.deprecator</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mattr_accessor-instance_method" title="#mattr_accessor (instance method)">#<strong>mattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil, &amp;blk)  </a>
      (also: #cattr_accessor)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Defines both class and instance accessors for class attributes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mattr_reader-instance_method" title="#mattr_reader (instance method)">#<strong>mattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil, location: nil)  </a>
      (also: #cattr_reader)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Defines a class attribute and creates a class and instance reader methods.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mattr_writer-instance_method" title="#mattr_writer (instance method)">#<strong>mattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true, default: nil, location: nil)  </a>
      (also: #cattr_writer)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Defines a class attribute and creates a class and instance writer methods to allow assignment to the attribute.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#module_parent-instance_method" title="#module_parent (instance method)">#<strong>module_parent</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the module which contains this one according to its name.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#module_parent_name-instance_method" title="#module_parent_name (instance method)">#<strong>module_parent_name</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the name of the module containing this one.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#module_parents-instance_method" title="#module_parents (instance method)">#<strong>module_parents</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns all the parents of this module according to its name, ordered from nested outwards.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#redefine_method-instance_method" title="#redefine_method (instance method)">#<strong>redefine_method</strong>(method, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Replaces the existing method definition, if there is one, with the passed block as its body.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#redefine_singleton_method-instance_method" title="#redefine_singleton_method (instance method)">#<strong>redefine_singleton_method</strong>(method, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Replaces the existing singleton method definition, if there is one, with the passed block as its body.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#remove_possible_method-instance_method" title="#remove_possible_method (instance method)">#<strong>remove_possible_method</strong>(method)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the named method, if it exists.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#remove_possible_singleton_method-instance_method" title="#remove_possible_singleton_method (instance method)">#<strong>remove_possible_singleton_method</strong>(method)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the named singleton method, if it exists.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#silence_redefinition_of_method-instance_method" title="#silence_redefinition_of_method (instance method)">#<strong>silence_redefinition_of_method</strong>(method)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Marks the named method as intended to be redefined, if it exists.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#thread_cattr_accessor-instance_method" title="#thread_cattr_accessor (instance method)">#<strong>thread_cattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#thread_mattr_accessor-instance_method" title="Module#thread_mattr_accessor (method)">#thread_mattr_accessor</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#thread_cattr_reader-instance_method" title="#thread_cattr_reader (instance method)">#<strong>thread_cattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#thread_mattr_reader-instance_method" title="Module#thread_mattr_reader (method)">#thread_mattr_reader</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#thread_cattr_writer-instance_method" title="#thread_cattr_writer (instance method)">#<strong>thread_cattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#thread_mattr_writer-instance_method" title="Module#thread_mattr_writer (method)">#thread_mattr_writer</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#thread_mattr_accessor-instance_method" title="#thread_mattr_accessor (instance method)">#<strong>thread_mattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil)  </a>
      (also: #thread_cattr_accessor)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Defines both class and instance accessors for class attributes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#attr_internal_define-instance_method" title="#attr_internal_define (instance method)">#<strong>attr_internal_define</strong>(attr_name, type)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#attr_internal_ivar_name-instance_method" title="#attr_internal_ivar_name (instance method)">#<strong>attr_internal_ivar_name</strong>(attr)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#as_json-instance_method" title="#as_json (instance method)">#<strong>as_json</strong>(options = nil)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#method_visibility-instance_method" title="#method_visibility (instance method)">#<strong>method_visibility</strong>(method)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#thread_mattr_reader-instance_method" title="#thread_mattr_reader (instance method)">#<strong>thread_mattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil)  </a>
      (also: #thread_cattr_reader)
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Defines a per-thread class attribute and creates class and instance reader methods.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#thread_mattr_writer-instance_method" title="#thread_mattr_writer (instance method)">#<strong>thread_mattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true)  </a>
      (also: #thread_cattr_writer)
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Defines a per-thread class attribute and creates a class and instance writer methods to allow assignment to the attribute.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Module/Concerning.html" title="Module::Concerning (module)"><code>Concerning</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Module/Concerning.html#concern-instance_method" title="Module::Concerning#concern (method)">#concern</a></td>
      <td><div class='inline'><p>A low-cruft shortcut to define a concern.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Module/Concerning.html#concerning-instance_method" title="Module::Concerning#concerning (method)">#concerning</a></td>
      <td><div class='inline'><p>Define a new concern and mix it in.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="attr_internal_naming_format-class_method">
  <h3 class='signature rw first'>
    .<strong>attr_internal_naming_format</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L22-L22'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='22' data-end='22'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attr_internal.rb', line 22</span></pre>
<pre class='code ruby'>

<span class='kw'>class</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span><span class='semicolon'>;</span> <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_attr_internal_naming_format'>attr_internal_naming_format</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="anonymous?-instance_method">
  <h3 class='signature ro first'>
    #<strong>anonymous?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>A module may or may not have a name.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>M</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='const'>M</span>.<span class='id identifier rubyid_name'>name</span> <span class='comment'># =&gt; &quot;M&quot;
</span>
<span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='const'>Module</span>.<span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_name'>name</span> <span class='comment'># =&gt; nil</span></code></pre>

<p><code>anonymous?</code> method returns true if module does not have a name, false otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Module</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_anonymous?'>anonymous?</span> <span class='comment'># =&gt; true
</span>
<span class='kw'>module</span> <span class='const'>M</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='const'>M</span>.<span class='id identifier rubyid_anonymous?'>anonymous?</span>          <span class='comment'># =&gt; false</span></code></pre>

<p>A module gets a name when it is first assigned to a constant. Either via the <code>module</code> or <code>class</code> keyword or by an explicit assignment:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='const'>Module</span>.<span class='id identifier rubyid_new'>new</span> <span class='comment'># creates an anonymous module
</span><span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_anonymous?'>anonymous?</span>   <span class='comment'># =&gt; true
</span><span class='const'>M</span> <span class='op'>=</span> <span class='id identifier rubyid_m'>m</span>          <span class='comment'># m gets a name here as a side-effect
</span><span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_name'>name</span>         <span class='comment'># =&gt; &quot;M&quot;
</span><span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_anonymous?'>anonymous?</span>   <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/anonymous.rb#L27-L29'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='27' data-end='29'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/anonymous.rb', line 27</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_anonymous?'>anonymous?</span>
  <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="alias_attribute-instance_method">
  <h3 class='signature  first'>
    #<strong>alias_attribute</strong>(new_name, old_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Allows you to make aliases for attributes, which includes getter, setter, and a predicate.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Content</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='comment'># has a title attribute
</span><span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Email</span> <span class='op'>&lt;</span> <span class='const'>Content</span>
  <span class='id identifier rubyid_alias_attribute'>alias_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_subject'>subject</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_title'>title</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='const'>Email</span>.<span class='id identifier rubyid_find'>find</span>(<span class='int'>1</span>)
<span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_title'>title</span>    <span class='comment'># =&gt; &quot;Superstars&quot;
</span><span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_subject'>subject</span>  <span class='comment'># =&gt; &quot;Superstars&quot;
</span><span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_subject?'>subject?</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_subject'>subject</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Megastars</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_title'>title</span>    <span class='comment'># =&gt; &quot;Megastars&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/aliasing.rb#L21-L30'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='21' data-end='30'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/aliasing.rb', line 21</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_alias_attribute'>alias_attribute</span>(<span class='id identifier rubyid_new_name'>new_name</span><span class='comma'>,</span> <span class='id identifier rubyid_old_name'>old_name</span>)
  <span class='comment'># The following reader methods use an explicit `self` receiver in order to
</span>  <span class='comment'># support aliases that start with an uppercase letter. Otherwise, they would
</span>  <span class='comment'># be resolved as constants instead.
</span>  <span class='id identifier rubyid_module_eval'>module_eval</span> <span class='heredoc_beg'>&lt;&lt;-STR</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>
<span class='tstring_content'>    def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_name'>new_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>; self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_old_name'>old_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>; end          # def subject; self.title; end
    def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_name'>new_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?; self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_old_name'>old_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?; end        # def subject?; self.title?; end
    def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_name'>new_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>=(v); self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_old_name'>old_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> = v; end  # def subject=(v); self.title = v; end
</span><span class='heredoc_end'>  STR
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="as_json-instance_method">
  <h3 class='signature nodoc'>
    #<strong>as_json</strong>(options = nil)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/object/json.rb#L53-L55'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='53' data-end='55'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/object/json.rb', line 53</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_as_json'>as_json</span>(<span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attr_internal-instance_method">
  <h3 class='signature '>
    #<strong>attr_internal</strong>(*attrs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#attr_internal_accessor-instance_method" title="Module#attr_internal_accessor (method)">#attr_internal_accessor</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L20-L20'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='20' data-end='20'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attr_internal.rb', line 20</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_attr_internal'>attr_internal</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_attr_internal_accessor'><a href="#attr_internal_accessor-instance_method" title="Module#attr_internal_accessor (method)">attr_internal_accessor</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attr_internal_accessor-instance_method">
  <h3 class='signature '>
    #<strong>attr_internal_accessor</strong>(*attrs)  
    <span class='aliases'>Also known as: <span class='names'>#attr_internal</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Declares an attribute reader and writer backed by an internally-named instance variable.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L16-L19'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='16' data-end='19'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attr_internal.rb', line 16</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attr_internal_accessor'>attr_internal_accessor</span>(<span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span>)
  <span class='id identifier rubyid_attr_internal_reader'><a href="#attr_internal_reader-instance_method" title="Module#attr_internal_reader (method)">attr_internal_reader</a></span>(<span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span>)
  <span class='id identifier rubyid_attr_internal_writer'><a href="#attr_internal_writer-instance_method" title="Module#attr_internal_writer (method)">attr_internal_writer</a></span>(<span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attr_internal_define-instance_method">
  <h3 class='signature priv'>
    #<strong>attr_internal_define</strong>(attr_name, type)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L30-L37'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='30' data-end='37'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attr_internal.rb', line 30</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attr_internal_define'>attr_internal_define</span>(<span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span>)
  <span class='id identifier rubyid_internal_name'>internal_name</span> <span class='op'>=</span> <span class='id identifier rubyid_attr_internal_ivar_name'><a href="#attr_internal_ivar_name-instance_method" title="Module#attr_internal_ivar_name (method)">attr_internal_ivar_name</a></span>(<span class='id identifier rubyid_attr_name'>attr_name</span>).<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='tstring_end'>&quot;</span></span>)
  <span class='comment'># use native attr_* methods as they are faster on some Ruby implementations
</span>  <span class='id identifier rubyid_public_send'>public_send</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>attr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_internal_name'>internal_name</span>)
  <span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='id identifier rubyid_internal_name'>internal_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_internal_name'>internal_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_writer'>writer</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='id identifier rubyid_internal_name'>internal_name</span>
  <span class='id identifier rubyid_remove_method'>remove_method</span> <span class='id identifier rubyid_internal_name'>internal_name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attr_internal_ivar_name-instance_method">
  <h3 class='signature priv'>
    #<strong>attr_internal_ivar_name</strong>(attr)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L26-L28'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='26' data-end='28'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attr_internal.rb', line 26</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attr_internal_ivar_name'>attr_internal_ivar_name</span>(<span class='id identifier rubyid_attr'>attr</span>)
  <span class='const'>Module</span>.<span class='id identifier rubyid_attr_internal_naming_format'><a href="#attr_internal_naming_format-class_method" title="Module.attr_internal_naming_format (method)">attr_internal_naming_format</a></span> <span class='op'>%</span> <span class='id identifier rubyid_attr'>attr</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attr_internal_reader-instance_method">
  <h3 class='signature '>
    #<strong>attr_internal_reader</strong>(*attrs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Declares an attribute reader backed by an internally-named instance variable.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L5-L7'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5' data-end='7'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attr_internal.rb', line 5</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attr_internal_reader'>attr_internal_reader</span>(<span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span>)
  <span class='id identifier rubyid_attrs'>attrs</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span> <span class='id identifier rubyid_attr_internal_define'><a href="#attr_internal_define-instance_method" title="Module#attr_internal_define (method)">attr_internal_define</a></span>(<span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_reader'>reader</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="attr_internal_writer-instance_method">
  <h3 class='signature '>
    #<strong>attr_internal_writer</strong>(*attrs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Declares an attribute writer backed by an internally-named instance variable.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attr_internal.rb#L10-L12'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10' data-end='12'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attr_internal.rb', line 10</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attr_internal_writer'>attr_internal_writer</span>(<span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span>)
  <span class='id identifier rubyid_attrs'>attrs</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span> <span class='id identifier rubyid_attr_internal_define'><a href="#attr_internal_define-instance_method" title="Module#attr_internal_define (method)">attr_internal_define</a></span>(<span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_writer'>writer</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cattr_accessor-instance_method">
  <h3 class='signature '>
    #<strong>cattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil, &amp;blk)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#mattr_accessor-instance_method" title="Module#mattr_accessor (method)">#mattr_accessor</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors.rb#L213-L213'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='213' data-end='213'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors.rb', line 213</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mattr_accessor'><a href="#mattr_accessor-instance_method" title="Module#mattr_accessor (method)">mattr_accessor</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cattr_reader-instance_method">
  <h3 class='signature '>
    #<strong>cattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil, location: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#mattr_reader-instance_method" title="Module#mattr_reader (method)">#mattr_reader</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors.rb#L75-L75'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='75' data-end='75'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors.rb', line 75</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_cattr_reader'>cattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mattr_reader'><a href="#mattr_reader-instance_method" title="Module#mattr_reader (method)">mattr_reader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cattr_writer-instance_method">
  <h3 class='signature '>
    #<strong>cattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true, default: nil, location: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#mattr_writer-instance_method" title="Module#mattr_writer (method)">#mattr_writer</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors.rb#L140-L140'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='140' data-end='140'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors.rb', line 140</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_cattr_writer'>cattr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mattr_writer'><a href="#mattr_writer-instance_method" title="Module#mattr_writer (method)">mattr_writer</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deep_dup-instance_method">
  <h3 class='signature '>
    #<strong>deep_dup</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a copy of module or class if it’s anonymous. If it’s named, returns <code>self</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_deep_dup'><a href="Object.html#deep_dup-instance_method" title="Object#deep_dup (method)">deep_dup</a></span> <span class='op'>==</span> <span class='const'><a href="Object.html" title="Object (class)">Object</a></span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='const'><a href="Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_deep_dup'>deep_dup</span> <span class='op'>==</span> <span class='id identifier rubyid_klass'>klass</span> <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/object/deep_dup.rb#L64-L70'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='64' data-end='70'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/object/deep_dup.rb', line 64</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deep_dup'>deep_dup</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>super</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delegate-instance_method">
  <h3 class='signature '>
    #<strong>delegate</strong>(*methods, to: nil, prefix: nil, allow_nil: nil, private: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Provides a <code>delegate</code> class method to easily expose contained objects’ public methods as your own.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p><code>:to</code> - Specifies the target object name as a symbol or string</p>
</li><li>
<p><code>:prefix</code> - Prefixes the new method with the target name or a custom prefix</p>
</li><li>
<p><code>:allow_nil</code> - If set to true, prevents a <a href="Module/DelegationError.html" title="Module::DelegationError (class)"><code>::Module::DelegationError</code></a> from being raised</p>
</li><li>
<p><code>:private</code> - If set to true, changes method visibility to private</p>
</li></ul>

<p>The macro receives one or more method names (specified as symbols or strings) and the name of the target object via the <code>:to</code> option (also a symbol or string).</p>

<p>Delegation is particularly useful with Active Record associations:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Greeter</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_goodbye'>goodbye</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>goodbye</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Foo</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_greeter'>greeter</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_greeter'>greeter</span>
<span class='kw'>end</span>

<span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hello'>hello</span>   <span class='comment'># =&gt; &quot;hello&quot;
</span><span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_goodbye'>goodbye</span> <span class='comment'># =&gt; NoMethodError: undefined method `goodbye&#39; for #&lt;Foo:0x1af30c&gt;</span></code></pre>

<p>Multiple delegates to the same target are allowed:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Foo</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_greeter'>greeter</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_goodbye'>goodbye</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_greeter'>greeter</span>
<span class='kw'>end</span>

<span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_goodbye'>goodbye</span> <span class='comment'># =&gt; &quot;goodbye&quot;</span></code></pre>

<p>Methods can be delegated to instance variables, class variables, or constants by providing them as a symbols:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Foo</span>
  <span class='const'>CONSTANT_ARRAY</span> <span class='op'>=</span> [<span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span>]
  <span class='cvar'>@@class_array</span>  <span class='op'>=</span> [<span class='int'>4</span><span class='comma'>,</span><span class='int'>5</span><span class='comma'>,</span><span class='int'>6</span><span class='comma'>,</span><span class='int'>7</span>]

  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
    <span class='ivar'>@instance_array</span> <span class='op'>=</span> [<span class='int'>8</span><span class='comma'>,</span><span class='int'>9</span><span class='comma'>,</span><span class='int'>10</span><span class='comma'>,</span><span class='int'>11</span>]
  <span class='kw'>end</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sum'>sum</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='const'>CONSTANT_ARRAY</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='cvar'>@@class_array</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_max'>max</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='ivar'>@instance_array</span>
<span class='kw'>end</span>

<span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_sum'>sum</span> <span class='comment'># =&gt; 6
</span><span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_min'>min</span> <span class='comment'># =&gt; 4
</span><span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_max'>max</span> <span class='comment'># =&gt; 11</span></code></pre>

<p>It’s also possible to delegate a method to the class by using <code>:class</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Foo</span>
  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_hello'>hello</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>world</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='kw'>class</span>
<span class='kw'>end</span>

<span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hello'>hello</span> <span class='comment'># =&gt; &quot;world&quot;</span></code></pre>

<p>Delegates can optionally be prefixed using the <code>:prefix</code> option. If the value is <code>true</code>, the delegate methods are prefixed with the name of the object being delegated to.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Person</span> <span class='op'>=</span> <span class='const'><a href="Struct.html" title="Struct (class)">Struct</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_address'>address</span>)

<span class='kw'>class</span> <span class='const'>Invoice</span> <span class='op'>&lt;</span> <span class='const'><a href="Struct.html" title="Struct (class)">Struct</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_client'>client</span>)
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_client'>client</span><span class='comma'>,</span> <span class='label'>prefix:</span> <span class='kw'>true</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_john_doe'>john_doe</span> <span class='op'>=</span> <span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>John Doe</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Vimmersvej 13</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_invoice'>invoice</span> <span class='op'>=</span> <span class='const'>Invoice</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_john_doe'>john_doe</span>)
<span class='id identifier rubyid_invoice'>invoice</span>.<span class='id identifier rubyid_client_name'>client_name</span>    <span class='comment'># =&gt; &quot;John Doe&quot;
</span><span class='id identifier rubyid_invoice'>invoice</span>.<span class='id identifier rubyid_client_address'>client_address</span> <span class='comment'># =&gt; &quot;Vimmersvej 13&quot;</span></code></pre>

<p>It is also possible to supply a custom prefix.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Invoice</span> <span class='op'>&lt;</span> <span class='const'><a href="Struct.html" title="Struct (class)">Struct</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_client'>client</span>)
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_client'>client</span><span class='comma'>,</span> <span class='label'>prefix:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_customer'>customer</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_invoice'>invoice</span> <span class='op'>=</span> <span class='const'>Invoice</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_john_doe'>john_doe</span>)
<span class='id identifier rubyid_invoice'>invoice</span>.<span class='id identifier rubyid_customer_name'>customer_name</span>    <span class='comment'># =&gt; &#39;John Doe&#39;
</span><span class='id identifier rubyid_invoice'>invoice</span>.<span class='id identifier rubyid_customer_address'>customer_address</span> <span class='comment'># =&gt; &#39;Vimmersvej 13&#39;</span></code></pre>

<p>The delegated methods are public by default. Pass <code>private: true</code> to change that.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_has_one'>has_one</span> <span class='symbeg'>:</span><span class='id identifier rubyid_profile'>profile</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_profile'>profile</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_date_of_birth'>date_of_birth</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_profile'>profile</span><span class='comma'>,</span> <span class='label'>private:</span> <span class='kw'>true</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_age'>age</span>
    <span class='const'><a href="Date.html" title="Date (class)">Date</a></span>.<span class='id identifier rubyid_today'>today</span>.<span class='id identifier rubyid_year'>year</span> <span class='op'>-</span> <span class='id identifier rubyid_date_of_birth'>date_of_birth</span>.<span class='id identifier rubyid_year'>year</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'>User</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_first_name'>first_name</span> <span class='comment'># =&gt; &quot;Tomas&quot;
</span><span class='const'>User</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_date_of_birth'>date_of_birth</span> <span class='comment'># =&gt; NoMethodError: private method `date_of_birth&#39; called for #&lt;User:0x00000008221340&gt;
</span><span class='const'>User</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_age'>age</span> <span class='comment'># =&gt; 2</span></code></pre>

<p>If the target is <code>nil</code> and does not respond to the delegated method a <a href="Module/DelegationError.html" title="Module::DelegationError (class)"><code>::Module::DelegationError</code></a> is raised. If you wish to instead return <code>nil</code>, use the <code>:allow_nil</code> option.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_has_one'>has_one</span> <span class='symbeg'>:</span><span class='id identifier rubyid_profile'>profile</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_age'>age</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_profile'>profile</span>
<span class='kw'>end</span>

<span class='const'>User</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_age'>age</span>
<span class='comment'># =&gt; Module::DelegationError: User#age delegated to profile.age, but profile is nil</span></code></pre>

<p>But if not having a profile yet is fine and should not be an error condition:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_has_one'>has_one</span> <span class='symbeg'>:</span><span class='id identifier rubyid_profile'>profile</span>
  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_age'>age</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_profile'>profile</span><span class='comma'>,</span> <span class='label'>allow_nil:</span> <span class='kw'>true</span>
<span class='kw'>end</span>

<span class='const'>User</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_age'>age</span> <span class='comment'># nil</span></code></pre>

<p>Note that if the target is not <code>nil</code> then the call is attempted regardless of the <code>:allow_nil</code> option, and thus an exception is still raised if said object does not respond to the method:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Foo</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_bar'>bar</span>)
    <span class='ivar'>@bar</span> <span class='op'>=</span> <span class='id identifier rubyid_bar'>bar</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='ivar'>@bar</span><span class='comma'>,</span> <span class='label'>allow_nil:</span> <span class='kw'>true</span>
<span class='kw'>end</span>

<span class='const'>Foo</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bar</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_name'>name</span> <span class='comment'># raises NoMethodError: undefined method `name&#39;</span></code></pre>

<p>The target method must be public, otherwise it will raise <code>NoMethodError</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/delegation.rb#L171-L270'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='171' data-end='270'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/delegation.rb', line 171</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delegate'>delegate</span>(<span class='op'>*</span><span class='id identifier rubyid_methods'>methods</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>prefix:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>allow_nil:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>private:</span> <span class='kw'>nil</span>)
  <span class='kw'>unless</span> <span class='id identifier rubyid_to'>to</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Delegation needs a target. Supply a keyword argument &#39;to&#39; (e.g. delegate :hello, to: :greeter).</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='kw'>true</span> <span class='op'>&amp;&amp;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[^a-z_]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_to'>to</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can only automatically set the delegation prefix when delegating to a method.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_method_prefix'>method_prefix</span> <span class='op'>=</span> \
    <span class='kw'>if</span> <span class='id identifier rubyid_prefix'>prefix</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='kw'>true</span> <span class='op'>?</span> <span class='id identifier rubyid_to'>to</span> <span class='op'>:</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span>).<span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_lineno'>lineno</span>

  <span class='id identifier rubyid_receiver'>receiver</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_receiver'>receiver</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_receiver'>receiver</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='const'><a href="#DELEGATION_RESERVED_METHOD_NAMES-constant" title="Module::DELEGATION_RESERVED_METHOD_NAMES (constant)">DELEGATION_RESERVED_METHOD_NAMES</a></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_receiver'>receiver</span>)

  <span class='id identifier rubyid_method_def'>method_def</span> <span class='op'>=</span> []
  <span class='id identifier rubyid_method_names'>method_names</span> <span class='op'>=</span> []

  <span class='id identifier rubyid_method_def'>method_def</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>self.private</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_private'>private</span>

  <span class='id identifier rubyid_methods'>methods</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
    <span class='id identifier rubyid_method_name'>method_name</span> <span class='op'>=</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_prefix'>method_prefix</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_method'>method</span>
    <span class='id identifier rubyid_method_names'>method_names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_method_name'>method_name</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>

    <span class='comment'># Attribute writer methods only accept one argument. Makes sure []=
</span>    <span class='comment'># methods still accept two arguments.
</span>    <span class='id identifier rubyid_definition'>definition</span> <span class='op'>=</span> \
      <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^\]]=\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_method'>method</span>)
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>arg</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_method_object'>method_object</span> <span class='op'>=</span>
          <span class='kw'>begin</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_to'>to</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Module</span>)
              <span class='id identifier rubyid_to'>to</span>.<span class='id identifier rubyid_method'>method</span>(<span class='id identifier rubyid_method'>method</span>)
            <span class='kw'>elsif</span> <span class='id identifier rubyid_receiver'>receiver</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>self.class</span><span class='tstring_end'>&quot;</span></span>
              <span class='id identifier rubyid_method'>method</span>(<span class='id identifier rubyid_method'>method</span>)
            <span class='kw'>end</span>
          <span class='kw'>rescue</span> <span class='const'><a href="NameError.html" title="NameError (class)">NameError</a></span>
            <span class='comment'># Do nothing. Fall back to `&quot;...&quot;`
</span>          <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_method_object'>method_object</span>
          <span class='id identifier rubyid_parameters'>parameters</span> <span class='op'>=</span> <span class='id identifier rubyid_method_object'>method_object</span>.<span class='id identifier rubyid_parameters'>parameters</span>

          <span class='kw'>if</span> (<span class='id identifier rubyid_parameters'>parameters</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_first'>first</span>) <span class='op'>&amp;</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_opt'>opt</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rest'>rest</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_keyreq'>keyreq</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_keyrest'>keyrest</span>]).<span class='id identifier rubyid_any?'>any?</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>else</span>
            <span class='id identifier rubyid_defn'>defn</span> <span class='op'>=</span> <span class='id identifier rubyid_parameters'>parameters</span>.<span class='id identifier rubyid_filter_map'>filter_map</span> { <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span> <span class='id identifier rubyid_arg'>arg</span> <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_req'>req</span> }
            <span class='id identifier rubyid_defn'>defn</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;block</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_defn'>defn</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>)
          <span class='kw'>end</span>
        <span class='kw'>else</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

    <span class='comment'># The following generated method calls the target exactly once, storing
</span>    <span class='comment'># the returned value in a dummy variable.
</span>    <span class='comment'>#
</span>    <span class='comment'># Reason is twofold: On one hand doing less calls is in general better.
</span>    <span class='comment'># On the other hand it could be that the target has side-effects,
</span>    <span class='comment'># whereas conceptually, from the user point of view, the delegator should
</span>    <span class='comment'># be doing one call.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_allow_nil'>allow_nil</span>
      <span class='id identifier rubyid_method'>method</span> <span class='op'>=</span> <span class='id identifier rubyid_method'>method</span>.<span class='id identifier rubyid_to_s'>to_s</span>

      <span class='id identifier rubyid_method_def'>method_def</span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_definition'>definition</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  _ = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_receiver'>receiver</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  if !_.nil? || nil.respond_to?(:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    _.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_definition'>definition</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  end</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>end</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_method'>method</span> <span class='op'>=</span> <span class='id identifier rubyid_method'>method</span>.<span class='id identifier rubyid_to_s'>to_s</span>
      <span class='id identifier rubyid_method_name'>method_name</span> <span class='op'>=</span> <span class='id identifier rubyid_method_name'>method_name</span>.<span class='id identifier rubyid_to_s'>to_s</span>

      <span class='id identifier rubyid_method_def'>method_def</span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_definition'>definition</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  _ = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_receiver'>receiver</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  _.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_definition'>definition</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rescue NoMethodError =&gt; e</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  if _.nil? &amp;&amp; e.name == :</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>%(</span><span class='tstring_content'>   raise DelegationError, &quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> delegated to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_receiver'>receiver</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>, but </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_receiver'>receiver</span><span class='embexpr_end'>}</span><span class='tstring_content'> is nil: \#{self.inspect}&quot;</span><span class='tstring_end'>)</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  else</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    raise</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  end</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>end</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_module_eval'>module_eval</span>(<span class='id identifier rubyid_method_def'>method_def</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span>)
  <span class='id identifier rubyid_method_names'>method_names</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delegate_missing_to-instance_method">
  <h3 class='signature '>
    #<strong>delegate_missing_to</strong>(target, allow_nil: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When building decorators, a common pattern may emerge:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Partition</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_event'>event</span>)
    <span class='ivar'>@event</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_person'>person</span>
    <span class='id identifier rubyid_detail'>detail</span>.<span class='id identifier rubyid_person'>person</span> <span class='op'>||</span> <span class='id identifier rubyid_creator'>creator</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_respond_to_missing?'>respond_to_missing?</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_include_private'>include_private</span> <span class='op'>=</span> <span class='kw'>false</span>)
      <span class='ivar'>@event</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_include_private'>include_private</span>)
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_method_missing'>method_missing</span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
      <span class='ivar'>@event</span>.<span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
    <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>With <code>delegate_missing_to</code>, the above is condensed to:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Partition</span>
  <span class='id identifier rubyid_delegate_missing_to'>delegate_missing_to</span> <span class='symbeg'>:</span><span class='ivar'>@event</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_event'>event</span>)
    <span class='ivar'>@event</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_person'>person</span>
    <span class='id identifier rubyid_detail'>detail</span>.<span class='id identifier rubyid_person'>person</span> <span class='op'>||</span> <span class='id identifier rubyid_creator'>creator</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>The target can be anything callable within the object, e.g. instance variables, methods, constants, etc.</p>

<p>The delegated method must be public on the target, otherwise it will raise <a href="Module/DelegationError.html" title="Module::DelegationError (class)"><code>::Module::DelegationError</code></a>. If you wish to instead return <code>nil</code>, use the <code>:allow_nil</code> option.</p>

<p>The <code>marshal_dump</code> and <code>_dump</code> methods are exempt from delegation due to possible interference when calling <code>Marshal.dump(object)</code>, should the delegation target method of <code>object</code> add or remove instance variables.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/delegation.rb#L318-L352'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='318' data-end='352'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/delegation.rb', line 318</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delegate_missing_to'>delegate_missing_to</span>(<span class='id identifier rubyid_target'>target</span><span class='comma'>,</span> <span class='label'>allow_nil:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_target'>target</span> <span class='op'>=</span> <span class='id identifier rubyid_target'>target</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_target'>target</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='const'><a href="#DELEGATION_RESERVED_METHOD_NAMES-constant" title="Module::DELEGATION_RESERVED_METHOD_NAMES (constant)">DELEGATION_RESERVED_METHOD_NAMES</a></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_target'>target</span>)

  <span class='id identifier rubyid_module_eval'>module_eval</span> <span class='heredoc_beg'>&lt;&lt;-RUBY</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>
<span class='tstring_content'>    def respond_to_missing?(name, include_private = false)
      # It may look like an oversight, but we deliberately do not pass
      # include_private, because they do not get delegated.

      return false if name == :marshal_dump || name == :_dump
      </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'>.respond_to?(name) || super
    end

    def method_missing(method, *args, &amp;block)
      if </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'>.respond_to?(method)
        </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'>.public_send(method, *args, &amp;block)
      else
        begin
          super
        rescue NoMethodError
          if </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'>.nil?
            if </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_allow_nil'>allow_nil</span> <span class='op'>==</span> <span class='kw'>true</span><span class='embexpr_end'>}</span><span class='tstring_content'>
              nil
            else
              raise DelegationError, &quot;\#{method} delegated to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'>, but </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'> is nil&quot;
            end
          else
            raise
          end
        end
      end
    end
    ruby2_keywords(:method_missing)
</span><span class='heredoc_end'>  RUBY
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deprecate-instance_method">
  <h3 class='signature '>
    #<strong>deprecate</strong>(*method_names, deprecator: nil, **options)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>deprecate <code>:foo</code>, deprecator: <code>MyLib.deprecator</code></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_deprecate'>deprecate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span><span class='comma'>,</span> <span class='label'>bar:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>warning!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>deprecator:</span> <span class='const'>MyLib</span>.<span class='id identifier rubyid_deprecator'>deprecator</span></code></pre>

<p>A deprecator is typically an instance of <a href="ActiveSupport/Deprecation.html" title="ActiveSupport::Deprecation (class)"><code>::ActiveSupport::Deprecation</code></a>, but you can also pass any object that responds to <code>deprecation_warning(deprecated_method_name, message, caller_backtrace)</code> where you can implement your custom warning behavior.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MyLib</span><span class='op'>::</span><span class='const'>Deprecator</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_deprecation_warning'>deprecation_warning</span>(<span class='id identifier rubyid_deprecated_method_name'>deprecated_method_name</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_caller_backtrace'>caller_backtrace</span> <span class='op'>=</span> <span class='kw'>nil</span>)
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_deprecated_method_name'>deprecated_method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> is deprecated and will be removed from MyLibrary | </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'><a href="Kernel.html" title="Kernel (module)">Kernel</a></span>.<span class='id identifier rubyid_warn'><a href="ActiveSupport/RaiseWarnings.html#warn-instance_method" title="ActiveSupport::RaiseWarnings#warn (method)">warn</a></span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/deprecation.rb#L17-L27'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='17' data-end='27'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/deprecation.rb', line 17</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deprecate'>deprecate</span>(<span class='op'>*</span><span class='id identifier rubyid_method_names'>method_names</span><span class='comma'>,</span> <span class='label'>deprecator:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_deprecator'>deprecator</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Deprecation.html" title="ActiveSupport::Deprecation (class)">Deprecation</a></span>)
    <span class='id identifier rubyid_deprecator'>deprecator</span>.<span class='id identifier rubyid_deprecate_methods'>deprecate_methods</span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_method_names'>method_names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='kw'>elsif</span> <span class='id identifier rubyid_deprecator'>deprecator</span>
    <span class='comment'># we just need any instance to call deprecate_methods, but the deprecation will be emitted by deprecator
</span>    <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span>.<span class='id identifier rubyid_deprecator'><a href="ActiveSupport.html#deprecator-class_method" title="ActiveSupport.deprecator (method)">deprecator</a></span>.<span class='id identifier rubyid_deprecate_methods'>deprecate_methods</span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_method_names'>method_names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='label'>deprecator:</span> <span class='id identifier rubyid_deprecator'>deprecator</span>)
  <span class='kw'>else</span>
    <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span>.<span class='id identifier rubyid_deprecator'><a href="ActiveSupport.html#deprecator-class_method" title="ActiveSupport.deprecator (method)">deprecator</a></span>.<span class='id identifier rubyid_warn'>warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Module.deprecate without a deprecator is deprecated</span><span class='tstring_end'>&quot;</span></span>)
    <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Deprecation.html" title="ActiveSupport::Deprecation (class)">Deprecation</a></span>.<span class='id identifier rubyid__instance'>_instance</span>.<span class='id identifier rubyid_deprecate_methods'>deprecate_methods</span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_method_names'>method_names</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mattr_accessor-instance_method">
  <h3 class='signature '>
    #<strong>mattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil, &amp;blk)  
    <span class='aliases'>Also known as: <span class='names'>#cattr_accessor</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defines both class and instance accessors for class attributes. All class and instance methods created will be public, even if this method is called with a private or protected access modifier.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>HairColors</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_black'>black</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blonde'>blonde</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_red'>red</span>]
<span class='const'>HairColors</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='comment'># =&gt; [:brown, :black, :blonde, :red]
</span><span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='comment'># =&gt; [:brown, :black, :blonde, :red]</span></code></pre>

<p>If a subclass changes the value then that would also change the value for parent class. Similarly if parent class changes the value then that would change the value of subclasses too.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Citizen</span> <span class='op'>&lt;</span> <span class='const'>Person</span>
<span class='kw'>end</span>

<span class='const'>Citizen</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='op'>&lt;&lt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blue'>blue</span>
<span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='comment'># =&gt; [:brown, :black, :blonde, :red, :blue]</span></code></pre>

<p>To omit the instance writer method, pass <code>instance_writer: false</code>. To omit the instance reader method, pass <code>instance_reader: false</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span>]  <span class='comment'># =&gt; NoMethodError
</span><span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span>             <span class='comment'># =&gt; NoMethodError</span></code></pre>

<p>Or pass <code>instance_accessor: false</code>, to omit both instance methods.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span>]  <span class='comment'># =&gt; NoMethodError
</span><span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span>             <span class='comment'># =&gt; NoMethodError</span></code></pre>

<p>You can set a default value for the attribute.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span><span class='comma'>,</span> <span class='label'>default:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_black'>black</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blonde'>blonde</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_red'>red</span>]
  <span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_hair_styles'>hair_styles</span>) { [<span class='symbeg'>:</span><span class='id identifier rubyid_long'>long</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_short'>short</span>] }
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>Person</span>.<span class='id identifier rubyid_class_variable_get'>class_variable_get</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@hair_colors</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [:brown, :black, :blonde, :red]
</span><span class='const'>Person</span>.<span class='id identifier rubyid_class_variable_get'>class_variable_get</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@hair_styles</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [:long, :short]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors.rb#L208-L212'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='208' data-end='212'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors.rb', line 208</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span>)
  <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span>).<span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_mattr_reader'><a href="#mattr_reader-instance_method" title="Module#mattr_reader (method)">mattr_reader</a></span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='id identifier rubyid_instance_reader'>instance_reader</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='id identifier rubyid_default'>default</span><span class='comma'>,</span> <span class='label'>location:</span> <span class='id identifier rubyid_location'>location</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span>)
  <span class='id identifier rubyid_mattr_writer'><a href="#mattr_writer-instance_method" title="Module#mattr_writer (method)">mattr_writer</a></span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='id identifier rubyid_instance_writer'>instance_writer</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='id identifier rubyid_default'>default</span><span class='comma'>,</span> <span class='label'>location:</span> <span class='id identifier rubyid_location'>location</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mattr_reader-instance_method">
  <h3 class='signature '>
    #<strong>mattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil, location: nil)  
    <span class='aliases'>Also known as: <span class='names'>#cattr_reader</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defines a class attribute and creates a class and instance reader methods. The underlying class variable is set to <code>nil</code>, if it is not previously defined. All class and instance methods created will be public, even if this method is called with a private or protected access modifier.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_reader'>mattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span>
<span class='kw'>end</span>

<span class='const'>HairColors</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='comment'># =&gt; nil
</span><span class='const'>HairColors</span>.<span class='id identifier rubyid_class_variable_set'>class_variable_set</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@hair_colors</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_black'>black</span>])
<span class='const'>HairColors</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='comment'># =&gt; [:brown, :black]</span></code></pre>

<p>The attribute name must be a valid method name in Ruby.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>Foo</span>
  <span class='id identifier rubyid_mattr_reader'>mattr_reader</span> <span class='symbeg'>:&quot;</span><span class='tstring_content'>1_Badname</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='comment'># =&gt; NameError: invalid attribute name: 1_Badname</span></code></pre>

<p>To omit the instance reader method, pass <code>instance_reader: false</code> or <code>instance_accessor: false</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_reader'>mattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='comment'># =&gt; NoMethodError</span></code></pre>

<p>You can set a default value for the attribute.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_reader'>mattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span><span class='comma'>,</span> <span class='label'>default:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_black'>black</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blonde'>blonde</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_red'>red</span>]
  <span class='id identifier rubyid_mattr_reader'>mattr_reader</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_hair_styles'>hair_styles</span>) { [<span class='symbeg'>:</span><span class='id identifier rubyid_long'>long</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_short'>short</span>] }
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='comment'># =&gt; [:brown, :black, :blonde, :red]
</span><span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_styles'>hair_styles</span> <span class='comment'># =&gt; [:long, :short]</span></code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>TypeError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors.rb#L55-L74'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='55' data-end='74'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors.rb', line 55</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mattr_reader'>mattr_reader</span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>location:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>module attributes should be defined directly on class, not singleton</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_singleton_class?'>singleton_class?</span>
  <span class='id identifier rubyid_location'>location</span> <span class='op'>||=</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span>).<span class='id identifier rubyid_first'>first</span>

  <span class='id identifier rubyid_definition'>definition</span> <span class='op'>=</span> []
  <span class='id identifier rubyid_syms'>syms</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sym'>sym</span><span class='op'>|</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="NameError.html" title="NameError (class)">NameError</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid attribute name: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[_A-Za-z]\w*\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_sym'>sym</span>)

    <span class='id identifier rubyid_definition'>definition</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>; @@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>; end</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>if</span> <span class='id identifier rubyid_instance_reader'>instance_reader</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span>
      <span class='id identifier rubyid_definition'>definition</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>; @@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>; end</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_sym_default_value'>sym_default_value</span> <span class='op'>=</span> (<span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_default'>default</span>.<span class='id identifier rubyid_nil?'>nil?</span>) <span class='op'>?</span> <span class='kw'>yield</span> <span class='op'>:</span> <span class='id identifier rubyid_default'>default</span>
    <span class='id identifier rubyid_class_variable_set'>class_variable_set</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_sym_default_value'>sym_default_value</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_sym_default_value'>sym_default_value</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_class_variable_defined?'>class_variable_defined?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_module_eval'>module_eval</span>(<span class='id identifier rubyid_definition'>definition</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_lineno'>lineno</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mattr_writer-instance_method">
  <h3 class='signature '>
    #<strong>mattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true, default: nil, location: nil)  
    <span class='aliases'>Also known as: <span class='names'>#cattr_writer</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defines a class attribute and creates a class and instance writer methods to allow assignment to the attribute. All class and instance methods created will be public, even if this method is called with a private or protected access modifier.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_writer'>mattr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>HairColors</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_black'>black</span>]
<span class='const'>Person</span>.<span class='id identifier rubyid_class_variable_get'>class_variable_get</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@hair_colors</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [:brown, :black]
</span><span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_blonde'>blonde</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_red'>red</span>]
<span class='const'>HairColors</span>.<span class='id identifier rubyid_class_variable_get'>class_variable_get</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@hair_colors</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [:blonde, :red]</span></code></pre>

<p>To omit the instance writer method, pass <code>instance_writer: false</code> or <code>instance_accessor: false</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_writer'>mattr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>Person</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_hair_colors'>hair_colors</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_blonde'>blonde</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_red'>red</span>] <span class='comment'># =&gt; NoMethodError</span></code></pre>

<p>You can set a default value for the attribute.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>HairColors</span>
  <span class='id identifier rubyid_mattr_writer'>mattr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hair_colors'>hair_colors</span><span class='comma'>,</span> <span class='label'>default:</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_brown'>brown</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_black'>black</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blonde'>blonde</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_red'>red</span>]
  <span class='id identifier rubyid_mattr_writer'>mattr_writer</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_hair_styles'>hair_styles</span>) { [<span class='symbeg'>:</span><span class='id identifier rubyid_long'>long</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_short'>short</span>] }
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>HairColors</span>
<span class='kw'>end</span>

<span class='const'>Person</span>.<span class='id identifier rubyid_class_variable_get'>class_variable_get</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@hair_colors</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [:brown, :black, :blonde, :red]
</span><span class='const'>Person</span>.<span class='id identifier rubyid_class_variable_get'>class_variable_get</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@hair_styles</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [:long, :short]</span></code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>TypeError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors.rb#L121-L139'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='121' data-end='139'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors.rb', line 121</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mattr_writer'>mattr_writer</span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>location:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>module attributes should be defined directly on class, not singleton</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_singleton_class?'>singleton_class?</span>
  <span class='id identifier rubyid_location'>location</span> <span class='op'>||=</span> <span class='id identifier rubyid_caller_locations'>caller_locations</span>(<span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span>).<span class='id identifier rubyid_first'>first</span>

  <span class='id identifier rubyid_definition'>definition</span> <span class='op'>=</span> []
  <span class='id identifier rubyid_syms'>syms</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sym'>sym</span><span class='op'>|</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="NameError.html" title="NameError (class)">NameError</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid attribute name: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[_A-Za-z]\w*\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_sym'>sym</span>)
    <span class='id identifier rubyid_definition'>definition</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>=(val); @@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'> = val; end</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>if</span> <span class='id identifier rubyid_instance_writer'>instance_writer</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span>
      <span class='id identifier rubyid_definition'>definition</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>=(val); @@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'> = val; end</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_sym_default_value'>sym_default_value</span> <span class='op'>=</span> (<span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_default'>default</span>.<span class='id identifier rubyid_nil?'>nil?</span>) <span class='op'>?</span> <span class='kw'>yield</span> <span class='op'>:</span> <span class='id identifier rubyid_default'>default</span>
    <span class='id identifier rubyid_class_variable_set'>class_variable_set</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_sym_default_value'>sym_default_value</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_sym_default_value'>sym_default_value</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_class_variable_defined?'>class_variable_defined?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_module_eval'>module_eval</span>(<span class='id identifier rubyid_definition'>definition</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_location'>location</span>.<span class='id identifier rubyid_lineno'>lineno</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="method_visibility-instance_method">
  <h3 class='signature nodoc'>
    #<strong>method_visibility</strong>(method)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/redefine_method.rb#L30-L39'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='30' data-end='39'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/redefine_method.rb', line 30</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_method_visibility'>method_visibility</span>(<span class='id identifier rubyid_method'>method</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_private_method_defined?'>private_method_defined?</span>(<span class='id identifier rubyid_method'>method</span>)
    <span class='symbeg'>:</span><span class='id identifier rubyid_private'>private</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_protected_method_defined?'>protected_method_defined?</span>(<span class='id identifier rubyid_method'>method</span>)
    <span class='symbeg'>:</span><span class='id identifier rubyid_protected'>protected</span>
  <span class='kw'>else</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_public'>public</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="module_parent-instance_method">
  <h3 class='signature '>
    #<strong>module_parent</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the module which contains this one according to its name.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>M</span>
  <span class='kw'>module</span> <span class='const'>N</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='const'>X</span> <span class='op'>=</span> <span class='const'>M</span><span class='op'>::</span><span class='const'>N</span>

<span class='const'>M</span><span class='op'>::</span><span class='const'>N</span>.<span class='id identifier rubyid_module_parent'>module_parent</span> <span class='comment'># =&gt; M
</span><span class='const'>X</span>.<span class='id identifier rubyid_module_parent'>module_parent</span>    <span class='comment'># =&gt; M</span></code></pre>

<p>The parent of top-level and anonymous modules is <a href="Object.html" title="Object (class)"><code>::Object</code></a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>M</span>.<span class='id identifier rubyid_module_parent'>module_parent</span>          <span class='comment'># =&gt; Object
</span><span class='const'>Module</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_module_parent'>module_parent</span> <span class='comment'># =&gt; Object</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/introspection.rb#L34-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='34' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/introspection.rb', line 34</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_module_parent'>module_parent</span>
  <span class='id identifier rubyid_module_parent_name'><a href="#module_parent_name-instance_method" title="Module#module_parent_name (method)">module_parent_name</a></span> <span class='op'>?</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Inflector.html" title="ActiveSupport::Inflector (module)">Inflector</a></span>.<span class='id identifier rubyid_constantize'><a href="ActiveSupport/Inflector.html#constantize-instance_method" title="ActiveSupport::Inflector#constantize (method)">constantize</a></span>(<span class='id identifier rubyid_module_parent_name'><a href="#module_parent_name-instance_method" title="Module#module_parent_name (method)">module_parent_name</a></span>) <span class='op'>:</span> <span class='const'><a href="Object.html" title="Object (class)">Object</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="module_parent_name-instance_method">
  <h3 class='signature '>
    #<strong>module_parent_name</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the name of the module containing this one.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>M</span><span class='op'>::</span><span class='const'>N</span>.<span class='id identifier rubyid_module_parent_name'>module_parent_name</span> <span class='comment'># =&gt; &quot;M&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/introspection.rb#L9-L17'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9' data-end='17'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/introspection.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_module_parent_name'>module_parent_name</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='ivar'>@parent_name</span>)
    <span class='ivar'>@parent_name</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parent_name'>parent_name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>::[^:]+\z</span><span class='regexp_end'>/</span></span> <span class='op'>?</span> <span class='op'>-</span><span class='backref'>$`</span> <span class='op'>:</span> <span class='kw'>nil</span>
    <span class='ivar'>@parent_name</span> <span class='op'>=</span> <span class='id identifier rubyid_parent_name'>parent_name</span> <span class='kw'>unless</span> <span class='id identifier rubyid_frozen?'>frozen?</span>
    <span class='id identifier rubyid_parent_name'>parent_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="module_parents-instance_method">
  <h3 class='signature '>
    #<strong>module_parents</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns all the parents of this module according to its name, ordered from nested outwards. The receiver is not contained within the result.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>M</span>
  <span class='kw'>module</span> <span class='const'>N</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='const'>X</span> <span class='op'>=</span> <span class='const'>M</span><span class='op'>::</span><span class='const'>N</span>

<span class='const'>M</span>.<span class='id identifier rubyid_module_parents'>module_parents</span>    <span class='comment'># =&gt; [Object]
</span><span class='const'>M</span><span class='op'>::</span><span class='const'>N</span>.<span class='id identifier rubyid_module_parents'>module_parents</span> <span class='comment'># =&gt; [M, Object]
</span><span class='const'>X</span>.<span class='id identifier rubyid_module_parents'>module_parents</span>    <span class='comment'># =&gt; [M, Object]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/introspection.rb#L50-L61'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='50' data-end='61'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/introspection.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_module_parents'>module_parents</span>
  <span class='id identifier rubyid_parents'>parents</span> <span class='op'>=</span> []
  <span class='kw'>if</span> <span class='id identifier rubyid_module_parent_name'><a href="#module_parent_name-instance_method" title="Module#module_parent_name (method)">module_parent_name</a></span>
    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_module_parent_name'><a href="#module_parent_name-instance_method" title="Module#module_parent_name (method)">module_parent_name</a></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>::</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>until</span> <span class='id identifier rubyid_parts'>parts</span>.<span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_parents'>parents</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Inflector.html" title="ActiveSupport::Inflector (module)">Inflector</a></span>.<span class='id identifier rubyid_constantize'><a href="ActiveSupport/Inflector.html#constantize-instance_method" title="ActiveSupport::Inflector#constantize (method)">constantize</a></span>(<span class='id identifier rubyid_parts'>parts</span> <span class='op'>*</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>::</span><span class='tstring_end'>&quot;</span></span>)
      <span class='id identifier rubyid_parts'>parts</span>.<span class='id identifier rubyid_pop'>pop</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_parents'>parents</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="Object.html" title="Object (class)">Object</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_parents'>parents</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='const'><a href="Object.html" title="Object (class)">Object</a></span>
  <span class='id identifier rubyid_parents'>parents</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="redefine_method-instance_method">
  <h3 class='signature '>
    #<strong>redefine_method</strong>(method, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Replaces the existing method definition, if there is one, with the passed block as its body.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/redefine_method.rb#L17-L22'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='17' data-end='22'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/redefine_method.rb', line 17</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_redefine_method'>redefine_method</span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_visibility'>visibility</span> <span class='op'>=</span> <span class='id identifier rubyid_method_visibility'><a href="#method_visibility-instance_method" title="Module#method_visibility (method)">method_visibility</a></span>(<span class='id identifier rubyid_method'>method</span>)
  <span class='id identifier rubyid_silence_redefinition_of_method'><a href="#silence_redefinition_of_method-instance_method" title="Module#silence_redefinition_of_method (method)">silence_redefinition_of_method</a></span>(<span class='id identifier rubyid_method'>method</span>)
  <span class='id identifier rubyid_define_method'>define_method</span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_visibility'>visibility</span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="redefine_singleton_method-instance_method">
  <h3 class='signature '>
    #<strong>redefine_singleton_method</strong>(method, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Replaces the existing singleton method definition, if there is one, with the passed block as its body.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/redefine_method.rb#L26-L28'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='26' data-end='28'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/redefine_method.rb', line 26</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_redefine_singleton_method'>redefine_singleton_method</span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_singleton_class'>singleton_class</span>.<span class='id identifier rubyid_redefine_method'><a href="#redefine_method-instance_method" title="Module#redefine_method (method)">redefine_method</a></span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_possible_method-instance_method">
  <h3 class='signature '>
    #<strong>remove_possible_method</strong>(method)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the named method, if it exists.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/remove_method.rb#L7-L11'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7' data-end='11'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/remove_method.rb', line 7</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_possible_method'>remove_possible_method</span>(<span class='id identifier rubyid_method'>method</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span>(<span class='id identifier rubyid_method'>method</span>) <span class='op'>||</span> <span class='id identifier rubyid_private_method_defined?'>private_method_defined?</span>(<span class='id identifier rubyid_method'>method</span>)
    <span class='id identifier rubyid_undef_method'>undef_method</span>(<span class='id identifier rubyid_method'>method</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_possible_singleton_method-instance_method">
  <h3 class='signature '>
    #<strong>remove_possible_singleton_method</strong>(method)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the named singleton method, if it exists.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/remove_method.rb#L14-L16'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='14' data-end='16'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/remove_method.rb', line 14</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_possible_singleton_method'>remove_possible_singleton_method</span>(<span class='id identifier rubyid_method'>method</span>)
  <span class='id identifier rubyid_singleton_class'>singleton_class</span>.<span class='id identifier rubyid_remove_possible_method'><a href="#remove_possible_method-instance_method" title="Module#remove_possible_method (method)">remove_possible_method</a></span>(<span class='id identifier rubyid_method'>method</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="silence_redefinition_of_method-instance_method">
  <h3 class='signature '>
    #<strong>silence_redefinition_of_method</strong>(method)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Marks the named method as intended to be redefined, if it exists. Suppresses the Ruby method redefinition warning. Prefer <a href="#redefine_method-instance_method" title="Module#redefine_method (method)">#redefine_method</a> where possible.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/redefine_method.rb#L7-L13'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7' data-end='13'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/redefine_method.rb', line 7</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_silence_redefinition_of_method'>silence_redefinition_of_method</span>(<span class='id identifier rubyid_method'>method</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span>(<span class='id identifier rubyid_method'>method</span>) <span class='op'>||</span> <span class='id identifier rubyid_private_method_defined?'>private_method_defined?</span>(<span class='id identifier rubyid_method'>method</span>)
    <span class='comment'># This suppresses the &quot;method redefined&quot; warning; the self-alias
</span>    <span class='comment'># looks odd, but means we don&#39;t need to generate a unique name
</span>    <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_cattr_accessor-instance_method">
  <h3 class='signature '>
    #<strong>thread_cattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#thread_mattr_accessor-instance_method" title="Module#thread_mattr_accessor (method)">#thread_mattr_accessor</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb#L174-L174'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='174' data-end='174'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb', line 174</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_thread_cattr_accessor'>thread_cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_thread_mattr_accessor'><a href="#thread_mattr_accessor-instance_method" title="Module#thread_mattr_accessor (method)">thread_mattr_accessor</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_cattr_reader-instance_method">
  <h3 class='signature '>
    #<strong>thread_cattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#thread_mattr_reader-instance_method" title="Module#thread_mattr_reader (method)">#thread_mattr_reader</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb#L81-L81'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='81' data-end='81'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb', line 81</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_thread_cattr_reader'>thread_cattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_thread_mattr_reader'><a href="#thread_mattr_reader-instance_method" title="Module#thread_mattr_reader (method)">thread_mattr_reader</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_cattr_writer-instance_method">
  <h3 class='signature '>
    #<strong>thread_cattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#thread_mattr_writer-instance_method" title="Module#thread_mattr_writer (method)">#thread_mattr_writer</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb#L123-L123'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='123' data-end='123'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb', line 123</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_thread_cattr_writer'>thread_cattr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_thread_mattr_writer'><a href="#thread_mattr_writer-instance_method" title="Module#thread_mattr_writer (method)">thread_mattr_writer</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_mattr_accessor-instance_method">
  <h3 class='signature '>
    #<strong>thread_mattr_accessor</strong>(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil)  
    <span class='aliases'>Also known as: <span class='names'>#thread_cattr_accessor</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defines both class and instance accessors for class attributes.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Account</span>
  <span class='id identifier rubyid_thread_mattr_accessor'>thread_mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span>
<span class='kw'>end</span>

<span class='const'>Account</span>.<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DHH</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>Account</span>.<span class='id identifier rubyid_user'>user</span>     <span class='comment'># =&gt; &quot;DHH&quot;
</span><span class='const'>Account</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_user'>user</span> <span class='comment'># =&gt; &quot;DHH&quot;</span></code></pre>

<p>Unlike <a href="#mattr_accessor-instance_method" title="Module#mattr_accessor (method)">#mattr_accessor</a>, values are <strong>not</strong> shared with subclasses or parent classes. If a subclass changes the value, the parent class’ value is not changed. If the parent class changes the value, the value of subclasses is not changed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Customer</span> <span class='op'>&lt;</span> <span class='const'>Account</span>
<span class='kw'>end</span>

<span class='const'>Account</span>.<span class='id identifier rubyid_user'>user</span>   <span class='comment'># =&gt; &quot;DHH&quot;
</span><span class='const'>Customer</span>.<span class='id identifier rubyid_user'>user</span>  <span class='comment'># =&gt; nil
</span><span class='const'>Customer</span>.<span class='id identifier rubyid_user'>user</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rafael</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>Customer</span>.<span class='id identifier rubyid_user'>user</span>  <span class='comment'># =&gt; &quot;Rafael&quot;
</span><span class='const'>Account</span>.<span class='id identifier rubyid_user'>user</span>   <span class='comment'># =&gt; &quot;DHH&quot;</span></code></pre>

<p>To omit the instance writer method, pass <code>instance_writer: false</code>. To omit the instance reader method, pass <code>instance_reader: false</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Current</span>
  <span class='id identifier rubyid_thread_mattr_accessor'>thread_mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='const'>Current</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DHH</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># =&gt; NoMethodError
</span><span class='const'>Current</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_user'>user</span>          <span class='comment'># =&gt; NoMethodError</span></code></pre>

<p>Or pass <code>instance_accessor: false</code>, to omit both instance methods.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Current</span>
  <span class='id identifier rubyid_thread_mattr_accessor'>thread_mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='const'>Current</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DHH</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># =&gt; NoMethodError
</span><span class='const'>Current</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_user'>user</span>          <span class='comment'># =&gt; NoMethodError</span></code></pre>

<p>A default value may be specified using the <code>:default</code> option. Because multiple threads can access the default value, non-frozen default values will be <code>dup</code>ed and frozen.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb#L170-L173'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='170' data-end='173'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb', line 170</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_thread_mattr_accessor'>thread_mattr_accessor</span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_thread_mattr_reader'><a href="#thread_mattr_reader-instance_method" title="Module#thread_mattr_reader (method)">thread_mattr_reader</a></span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='id identifier rubyid_instance_reader'>instance_reader</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='id identifier rubyid_default'>default</span>)
  <span class='id identifier rubyid_thread_mattr_writer'><a href="#thread_mattr_writer-instance_method" title="Module#thread_mattr_writer (method)">thread_mattr_writer</a></span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='id identifier rubyid_instance_writer'>instance_writer</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_mattr_reader-instance_method">
  <h3 class='signature nodoc'>
    #<strong>thread_mattr_reader</strong>(*syms, instance_reader: true, instance_accessor: true, default: nil)  
    <span class='aliases'>Also known as: <span class='names'>#thread_cattr_reader</span></span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defines a per-thread class attribute and creates class and instance reader methods. The underlying per-thread class variable is set to <code>nil</code>, if it is not previously defined.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>Current</span>
  <span class='id identifier rubyid_thread_mattr_reader'>thread_mattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span>
<span class='kw'>end</span>

<span class='const'>Current</span>.<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DHH</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>Current</span>.<span class='id identifier rubyid_user'>user</span> <span class='comment'># =&gt; &quot;DHH&quot;
</span><span class='const'>Thread</span>.<span class='id identifier rubyid_new'>new</span> { <span class='const'>Current</span>.<span class='id identifier rubyid_user'>user</span> }.<span class='id identifier rubyid_value'>value</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>The attribute name must be a valid method name in Ruby.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>Foo</span>
  <span class='id identifier rubyid_thread_mattr_reader'>thread_mattr_reader</span> <span class='symbeg'>:&quot;</span><span class='tstring_content'>1_Badname</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='comment'># =&gt; NameError: invalid attribute name: 1_Badname</span></code></pre>

<p>To omit the instance reader method, pass <code>instance_reader: false</code> or <code>instance_accessor: false</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Current</span>
  <span class='id identifier rubyid_thread_mattr_reader'>thread_mattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='const'>Current</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_user'>user</span> <span class='comment'># =&gt; NoMethodError</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb#L41-L80'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='41' data-end='80'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb', line 41</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_thread_mattr_reader'>thread_mattr_reader</span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_reader:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>nil</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_syms'>syms</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sym'>sym</span><span class='op'>|</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="NameError.html" title="NameError (class)">NameError</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid attribute name: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[_A-Za-z]\w*$</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_sym'>sym</span>)

    <span class='comment'># The following generated method concatenates `object_id` because we want
</span>    <span class='comment'># subclasses to maintain independent values.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_default'>default</span>.<span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='heredoc_beg'>&lt;&lt;-EOS</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>)
<span class='tstring_content'>        def self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>
          @__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'> ||= &quot;attr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>_\#{object_id}&quot;
          ::ActiveSupport::IsolatedExecutionState[@__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>]
        end
</span><span class='heredoc_end'>      EOS
</span>    <span class='kw'>else</span>
      <span class='id identifier rubyid_default'>default</span> <span class='op'>=</span> <span class='id identifier rubyid_default'>default</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_freeze'>freeze</span> <span class='kw'>unless</span> <span class='id identifier rubyid_default'>default</span>.<span class='id identifier rubyid_frozen?'>frozen?</span>
      <span class='id identifier rubyid_singleton_class'>singleton_class</span>.<span class='id identifier rubyid_define_method'>define_method</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>_default_value</span><span class='tstring_end'>&quot;</span></span>) { <span class='id identifier rubyid_default'>default</span> }

      <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='heredoc_beg'>&lt;&lt;-EOS</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>)
<span class='tstring_content'>        def self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>
          @__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'> ||= &quot;attr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>_\#{object_id}&quot;
          value = ::ActiveSupport::IsolatedExecutionState[@__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>]

          if value.nil? &amp;&amp; !::ActiveSupport::IsolatedExecutionState.key?(@__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>)
            ::ActiveSupport::IsolatedExecutionState[@__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>] = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>_default_value
          else
            value
          end
        end
</span><span class='heredoc_end'>      EOS
</span>    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_instance_reader'>instance_reader</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span>
      <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='heredoc_beg'>&lt;&lt;-EOS</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>)
<span class='tstring_content'>        def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>
          self.class.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>
        end
</span><span class='heredoc_end'>      EOS
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_mattr_writer-instance_method">
  <h3 class='signature nodoc'>
    #<strong>thread_mattr_writer</strong>(*syms, instance_writer: true, instance_accessor: true)  
    <span class='aliases'>Also known as: <span class='names'>#thread_cattr_writer</span></span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
<p>Defines a per-thread class attribute and creates a class and instance writer methods to allow assignment to the attribute.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>Current</span>
  <span class='id identifier rubyid_thread_mattr_writer'>thread_mattr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span>
<span class='kw'>end</span>

<span class='const'>Current</span>.<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DHH</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_attr_Current_user'>attr_Current_user</span>] <span class='comment'># =&gt; &quot;DHH&quot;</span></code></pre>

<p>To omit the instance writer method, pass <code>instance_writer: false</code> or <code>instance_accessor: false</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Current</span>
  <span class='id identifier rubyid_thread_mattr_writer'>thread_mattr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='const'>Current</span>.<span class='id identifier rubyid_new'>new</span>.<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DHH</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># =&gt; NoMethodError</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/7-1-stable/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb#L101-L122'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='101' data-end='122'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb', line 101</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_thread_mattr_writer'>thread_mattr_writer</span>(<span class='op'>*</span><span class='id identifier rubyid_syms'>syms</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>instance_accessor:</span> <span class='kw'>true</span>) <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_syms'>syms</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sym'>sym</span><span class='op'>|</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="NameError.html" title="NameError (class)">NameError</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid attribute name: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[_A-Za-z]\w*$</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_sym'>sym</span>)

    <span class='comment'># The following generated method concatenates `object_id` because we want
</span>    <span class='comment'># subclasses to maintain independent values.
</span>    <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='heredoc_beg'>&lt;&lt;-EOS</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>)
<span class='tstring_content'>      def self.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>=(obj)
        @__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'> ||= &quot;attr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>_\#{object_id}&quot;
        ::ActiveSupport::IsolatedExecutionState[@__thread_mattr_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>] = obj
      end
</span><span class='heredoc_end'>    EOS
</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_instance_writer'>instance_writer</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_instance_accessor'>instance_accessor</span>
      <span class='id identifier rubyid_class_eval'>class_eval</span>(<span class='heredoc_beg'>&lt;&lt;-EOS</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>)
<span class='tstring_content'>        def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'>=(obj)
          self.class.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sym'>sym</span><span class='embexpr_end'>}</span><span class='tstring_content'> = obj
        end
</span><span class='heredoc_end'>      EOS
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>