<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: REXML::Parsers::BaseParser &mdash; rexml Ruby-2.0.0 p648</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "REXML::Parsers::BaseParser",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Ruby-2.0.0</a> &raquo; 
          <a href='../../index.html'>rexml</a> &raquo; 
          <a href='../../_index.html'>Index (B)</a> &raquo; 
          <a href="../../REXML.html" title="REXML (module)">REXML</a> &raquo; 
          <a href="../Parsers.html" title="REXML::Parsers (module)">Parsers</a> &raquo; 
          <span class='title'>BaseParser</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: REXML::Parsers::BaseParser</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      <ul class='fullTree'>
        <li><a href="../../Object.html" title="Object (class)">Object</a></li>
        <li class='next'>REXML::Parsers::BaseParser</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>





  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
<a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L27'>lib/rexml/parsers/baseparser.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-Using+the+Pull+Parser">Using the Pull Parser</h2>

<p><em>This API is experimental, and subject to change.</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><a href="PullParser.html" title="REXML::Parsers::PullParser (class)">PullParser</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="PullParser.html#new-class_method" title="REXML::Parsers::PullParser.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a&gt;text&lt;b att=&#39;val&#39;/&gt;txet&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span>
<span class='kw'>while</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_has_next?'>has_next?</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>att</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_start_tag?'>start_tag?</span> <span class='kw'>and</span> <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>See the PullEvent class for information on the content of the results. The
data is identical to the arguments passed for the various events to the
StreamListener API.</p>

<p>Notice that:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><a href="PullParser.html" title="REXML::Parsers::PullParser (class)">PullParser</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="PullParser.html#new-class_method" title="REXML::Parsers::PullParser.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a&gt;BAD DOCUMENT</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span>
<span class='kw'>while</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_has_next?'>has_next?</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_error?'>error?</span>
<span class='kw'>end</span>
</code></pre>

<p>Nat Price gave me some good ideas for the API.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='ATTDEF-constant'>
      ATTDEF =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ATTTYPE-constant" title="REXML::Parsers::BaseParser::ATTTYPE (constant)">ATTTYPE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\s+</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#DEFAULTDECL-constant" title="REXML::Parsers::BaseParser::DEFAULTDECL (constant)">DEFAULTDECL</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='ATTDEF_RE-constant'>
      ATTDEF_RE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ATTDEF-constant" title="REXML::Parsers::BaseParser::ATTDEF (constant)">ATTDEF</a></span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span></pre>
    </dd>
    <dt id='ATTLISTDECL_PATTERN-constant'>
      ATTLISTDECL_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;!ATTLIST\s+</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ATTDEF-constant" title="REXML::Parsers::BaseParser::ATTDEF (constant)">ATTDEF</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*\s*&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ATTLISTDECL_START-constant'>
      ATTLISTDECL_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;!ATTLIST</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ATTRIBUTE_PATTERN-constant'>
      ATTRIBUTE_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*(</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME_STR-constant" title="REXML::Parsers::BaseParser::NAME_STR (constant)">NAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)\s*=\s*([&quot;&#39;])(.*?)\4</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ATTTYPE-constant'>
      ATTTYPE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ENUMERATEDTYPE-constant" title="REXML::Parsers::BaseParser::ENUMERATEDTYPE (constant)">ENUMERATEDTYPE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='ATTVALUE-constant'>
      ATTVALUE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:\&quot;((?:[^&lt;&amp;\&quot;]|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#REFERENCE-constant" title="REXML::Parsers::BaseParser::REFERENCE (constant)">REFERENCE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*)\&quot;)|(?:&#39;((?:[^&lt;&amp;&#39;]|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#REFERENCE-constant" title="REXML::Parsers::BaseParser::REFERENCE (constant)">REFERENCE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*)&#39;)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='CDATA_END-constant'>
      CDATA_END =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*\]\s*&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='CDATA_PATTERN-constant'>
      CDATA_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;!\[CDATA\[(.*?)\]\]&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='CDATA_START-constant'>
      CDATA_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A&lt;!\[CDATA\[</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
    <dt id='CLOSE_MATCH-constant'>
      CLOSE_MATCH =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;\/(</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME_STR-constant" title="REXML::Parsers::BaseParser::NAME_STR (constant)">NAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)\s*&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='COMBININGCHAR-constant'>
      COMBININGCHAR =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>TODO</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
    <dt id='COMMENT_PATTERN-constant'>
      COMMENT_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;!--(.*?)--&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='COMMENT_START-constant'>
      COMMENT_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A&lt;!--</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
    <dt id='DEFAULT_ENTITIES-constant'>
      DEFAULT_ENTITIES =
    </dt>
    <dd>
            <pre class='code'><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gt</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&gt;</span><span class='regexp_end'>/</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lt</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;lt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;lt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;</span><span class='regexp_end'>/</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>quot</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;quot;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&quot;</span><span class='regexp_end'>/</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>apos</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;apos;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;apos;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&#39;</span><span class='regexp_end'>/</span></span><span class='rbracket'>]</span>
<span class='rbrace'>}</span></pre>
    </dd>
    <dt id='DEFAULTDECL-constant'>
      DEFAULTDECL =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(#REQUIRED|#IMPLIED|(?:(#FIXED\\s+)?</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ATTVALUE-constant" title="REXML::Parsers::BaseParser::ATTVALUE (constant)">ATTVALUE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>))</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='DIGIT-constant'>
      DIGIT =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[:digit:]</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
    <dt id='DOCTYPE_PATTERN-constant'>
      DOCTYPE_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*&lt;!DOCTYPE\s+(.*?)(\[|&gt;)</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='DOCTYPE_START-constant'>
      DOCTYPE_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A\s*&lt;!DOCTYPE\s</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ELEMENTDECL_PATTERN-constant'>
      ELEMENTDECL_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*(&lt;!ELEMENT.*?)&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ELEMENTDECL_START-constant'>
      ELEMENTDECL_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;!ELEMENT</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ENCODING-constant'>
      ENCODING =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\bencoding\s*=\s*[&quot;&#39;](.*?)[&#39;&quot;]</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ENTITY_START-constant'>
      ENTITY_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;!ENTITY</span><span class='regexp_end'>/</span></span></pre>
    </dd>
    <dt id='ENTITYDECL-constant'>
      ENTITYDECL =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#GEDECL-constant" title="REXML::Parsers::BaseParser::GEDECL (constant)">GEDECL</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)|(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PEDECL-constant" title="REXML::Parsers::BaseParser::PEDECL (constant)">PEDECL</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='ENTITYDEF-constant'>
      ENTITYDEF =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ENTITYVALUE-constant" title="REXML::Parsers::BaseParser::ENTITYVALUE (constant)">ENTITYVALUE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>|(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#EXTERNALID-constant" title="REXML::Parsers::BaseParser::EXTERNALID (constant)">EXTERNALID</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NDATADECL-constant" title="REXML::Parsers::BaseParser::NDATADECL (constant)">NDATADECL</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)?))</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='ENTITYVALUE-constant'>
      ENTITYVALUE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>%Q{</span><span class='tstring_content'>((?:&quot;(?:[^%&amp;&quot;]|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PEREFERENCE-constant" title="REXML::Parsers::BaseParser::PEREFERENCE (constant)">PEREFERENCE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#REFERENCE-constant" title="REXML::Parsers::BaseParser::REFERENCE (constant)">REFERENCE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*&quot;)|(?:&#39;([^%&amp;&#39;]|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PEREFERENCE-constant" title="REXML::Parsers::BaseParser::PEREFERENCE (constant)">PEREFERENCE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#REFERENCE-constant" title="REXML::Parsers::BaseParser::REFERENCE (constant)">REFERENCE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*&#39;))</span><span class='tstring_end'>}</span></span></pre>
    </dd>
    <dt id='ENUMERATEDTYPE-constant'>
      ENUMERATEDTYPE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NOTATIONTYPE-constant" title="REXML::Parsers::BaseParser::NOTATIONTYPE (constant)">NOTATIONTYPE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)|(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ENUMERATION-constant" title="REXML::Parsers::BaseParser::ENUMERATION (constant)">ENUMERATION</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>))</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='ENUMERATION-constant'>
      ENUMERATION =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\(\\s*</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NMTOKEN-constant" title="REXML::Parsers::BaseParser::NMTOKEN (constant)">NMTOKEN</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>(?:\\s*\\|\\s*</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NMTOKEN-constant" title="REXML::Parsers::BaseParser::NMTOKEN (constant)">NMTOKEN</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*\\s*\\)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='EREFERENCE-constant'>
      EREFERENCE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;(?!</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>;)</span><span class='regexp_end'>/</span></span></pre>
    </dd>
    <dt id='EXTENDER-constant'>
      EXTENDER =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>TODO</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
    <dt id='EXTERNALID-constant'>
      EXTERNALID =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:(?:(SYSTEM)\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#SYSTEMLITERAL-constant" title="REXML::Parsers::BaseParser::SYSTEMLITERAL (constant)">SYSTEMLITERAL</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)|(?:(PUBLIC)\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PUBIDLITERAL-constant" title="REXML::Parsers::BaseParser::PUBIDLITERAL (constant)">PUBIDLITERAL</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\s+</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#SYSTEMLITERAL-constant" title="REXML::Parsers::BaseParser::SYSTEMLITERAL (constant)">SYSTEMLITERAL</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>))</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='GEDECL-constant'>
      GEDECL =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;!ENTITY\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ENTITYDEF-constant" title="REXML::Parsers::BaseParser::ENTITYDEF (constant)">ENTITYDEF</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\s*&gt;</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='IDENTITY-constant'>
      IDENTITY =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^([!\*\w\-])(\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NCNAME_STR-constant" title="REXML::Parsers::BaseParser::NCNAME_STR (constant)">NCNAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)?(\s[&quot;&#39;](.*?)[&#39;&quot;])?(\s[&#39;&quot;](.*?)[&quot;&#39;])?</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
    <dt id='INSTRUCTION_PATTERN-constant'>
      INSTRUCTION_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\?(.*?)(\s+.*?)?\?&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='INSTRUCTION_START-constant'>
      INSTRUCTION_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A&lt;\?</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
    <dt id='LETTER-constant'>
      LETTER =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[:alpha:]</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
    <dt id='MISSING_ATTRIBUTE_QUOTES-constant'>
      MISSING_ATTRIBUTE_QUOTES =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>These are patterns to identify common markup errors, to make the error
messages more informative.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^&lt;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME_STR-constant" title="REXML::Parsers::BaseParser::NAME_STR (constant)">NAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\s+</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME_STR-constant" title="REXML::Parsers::BaseParser::NAME_STR (constant)">NAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\s*=\s*[^&quot;&#39;]</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='NAME-constant'>
      NAME =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>([\\w:]</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAMECHAR-constant" title="REXML::Parsers::BaseParser::NAMECHAR (constant)">NAMECHAR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>*)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='NAME_STR-constant'>
      NAME_STR =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:(</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NCNAME_STR-constant" title="REXML::Parsers::BaseParser::NCNAME_STR (constant)">NCNAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>):)?(</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NCNAME_STR-constant" title="REXML::Parsers::BaseParser::NCNAME_STR (constant)">NCNAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='NAMECHAR-constant'>
      NAMECHAR =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[\-\w\.:]</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
    <dt id='NCNAME_STR-constant'>
      NCNAME_STR =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#LETTER-constant" title="REXML::Parsers::BaseParser::LETTER (constant)">LETTER</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>_:][-[:alnum:]._:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#COMBININGCHAR-constant" title="REXML::Parsers::BaseParser::COMBININGCHAR (constant)">COMBININGCHAR</a></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#EXTENDER-constant" title="REXML::Parsers::BaseParser::EXTENDER (constant)">EXTENDER</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>]*</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='NDATADECL-constant'>
      NDATADECL =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\sNDATA\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='NMTOKEN-constant'>
      NMTOKEN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAMECHAR-constant" title="REXML::Parsers::BaseParser::NAMECHAR (constant)">NAMECHAR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)+</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='NMTOKENS-constant'>
      NMTOKENS =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NMTOKEN-constant" title="REXML::Parsers::BaseParser::NMTOKEN (constant)">NMTOKEN</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>(\\s+</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NMTOKEN-constant" title="REXML::Parsers::BaseParser::NMTOKEN (constant)">NMTOKEN</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='NOTATIONDECL_START-constant'>
      NOTATIONDECL_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;!NOTATION</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='NOTATIONTYPE-constant'>
      NOTATIONTYPE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOTATION\\s+\\(\\s*</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>(?:\\s*\\|\\s*</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)*\\s*\\)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='PEDECL-constant'>
      PEDECL =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;!ENTITY\\s(%)\\s</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\s+</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PEDEF-constant" title="REXML::Parsers::BaseParser::PEDEF (constant)">PEDEF</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\s*&gt;</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='PEDEF-constant'>
      PEDEF =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#ENTITYVALUE-constant" title="REXML::Parsers::BaseParser::ENTITYVALUE (constant)">ENTITYVALUE</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>|</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#EXTERNALID-constant" title="REXML::Parsers::BaseParser::EXTERNALID (constant)">EXTERNALID</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='PEREFERENCE-constant'>
      PEREFERENCE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='PUBIDCHAR-constant'>
      PUBIDCHAR =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Entity constants</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x20\x0D\x0Aa-zA-Z0-9\\-()+,./:=?;!*@$_%#</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='PUBIDLITERAL-constant'>
      PUBIDLITERAL =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>%Q{</span><span class='tstring_content'>(&quot;[</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PUBIDCHAR-constant" title="REXML::Parsers::BaseParser::PUBIDCHAR (constant)">PUBIDCHAR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;]*&quot;|&#39;[</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PUBIDCHAR-constant" title="REXML::Parsers::BaseParser::PUBIDCHAR (constant)">PUBIDCHAR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>]*&#39;)</span><span class='tstring_end'>}</span></span></pre>
    </dd>
    <dt id='PUBLIC-constant'>
      PUBLIC =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;!NOTATION\s(\w[\-\w]*)\s(PUBLIC)\s([&quot;&#39;])(.*?)\3(?:\s([&quot;&#39;])(.*?)\5)?\s*&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='REFERENCE-constant'>
      REFERENCE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME-constant" title="REXML::Parsers::BaseParser::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>;|#\\d;|#x[0-9a-fA-F];)</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='REFERENCE_RE-constant'>
      REFERENCE_RE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#REFERENCE-constant" title="REXML::Parsers::BaseParser::REFERENCE (constant)">REFERENCE</a></span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span></pre>
    </dd>
    <dt id='STANDALONE-constant'>
      STANDALONE =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\bstandalone\s*=\s*[&quot;&#39;](.*?)[&#39;&quot;]</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='SYSTEM-constant'>
      SYSTEM =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;!NOTATION\s(\w[\-\w]*)\s(SYSTEM)\s+([&quot;&#39;])(.*?)\3\s*&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='SYSTEMENTITY-constant'>
      SYSTEMENTITY =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*(%.*?;)\s*$</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='SYSTEMLITERAL-constant'>
      SYSTEMLITERAL =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>%Q{</span><span class='tstring_content'>((?:&quot;[^&quot;]*&quot;)|(?:&#39;[^&#39;]*&#39;))</span><span class='tstring_end'>}</span></span></pre>
    </dd>
    <dt id='TAG_MATCH-constant'>
      TAG_MATCH =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^&lt;((?&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NAME_STR-constant" title="REXML::Parsers::BaseParser::NAME_STR (constant)">NAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>))\s*((?&gt;\s+</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#UNAME_STR-constant" title="REXML::Parsers::BaseParser::UNAME_STR (constant)">UNAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\s*=\s*([&quot;&#39;]).*?\5)*)\s*(\/)?&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='TEXT_PATTERN-constant'>
      TEXT_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A([^&lt;]*)</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='UNAME_STR-constant'>
      UNAME_STR =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(?:</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NCNAME_STR-constant" title="REXML::Parsers::BaseParser::NCNAME_STR (constant)">NCNAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>:)?</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#NCNAME_STR-constant" title="REXML::Parsers::BaseParser::NCNAME_STR (constant)">NCNAME_STR</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='VERSION-constant'>
      VERSION =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\bversion\s*=\s*[&quot;&#39;](.*?)[&#39;&quot;]</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='XMLDECL_PATTERN-constant'>
      XMLDECL_PATTERN =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\?xml\s+(.*?)\?&gt;</span><span class='regexp_end'>/um</span></span></pre>
    </dd>
    <dt id='XMLDECL_START-constant'>
      XMLDECL_START =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A&lt;\?xml\s</span><span class='regexp_end'>/u</span></span></pre>
    </dd>
  </dl>



<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#source-instance_method" title="#source (instance method)">#<strong>source</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(source)  &#x21d2; BaseParser </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>a new instance of BaseParser</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#add_listener-instance_method" title="#add_listener (instance method)">#<strong>add_listener</strong>(listener)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if there are no more events</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#entity-instance_method" title="#entity (instance method)">#<strong>entity</strong>(reference, entities)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#has_next%3F-instance_method" title="#has_next? (instance method)">#<strong>has_next?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if there are more events.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#need_source_encoding_update%3F-instance_method" title="#need_source_encoding_update? (instance method)">#<strong>need_source_encoding_update?</strong>(xml_declaration_encoding)  &#x21d2; Boolean </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#normalize-instance_method" title="#normalize (instance method)">#<strong>normalize</strong>(input, entities = nil, entity_filter = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Escapes all possible entities</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#peek-instance_method" title="#peek (instance method)">#<strong>peek</strong>(depth = 0)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Peek at the <code>depth</code> event in the stack.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#position-instance_method" title="#position (instance method)">#<strong>position</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pull-instance_method" title="#pull (instance method)">#<strong>pull</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the next event.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pull_event-instance_method" title="#pull_event (instance method)">#<strong>pull_event</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#stream%3D-instance_method" title="#stream= (instance method)">#<strong>stream=</strong>(source)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unnormalize-instance_method" title="#unnormalize (instance method)">#<strong>unnormalize</strong>(string, entities = nil, filter = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Unescapes all possible entities</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unshift-instance_method" title="#unshift (instance method)">#<strong>unshift</strong>(token)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Push an event back on the head of the stream.</p>
</div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(source)  &#x21d2; <tt><a href="" title="REXML::Parsers::BaseParser (class)">BaseParser</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>a new instance of BaseParser</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L115'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


115
116
117
118</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 115</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span> <span class='id identifier rubyid_source'>source</span> <span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>
  <span class='ivar'>@listeners</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="source-instance_method">
  <h3 class='signature first'>
  #<strong>source</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L124'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


124</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 124</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:source</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="add_listener-instance_method">
  <h3 class='signature first'>
  #<strong>add_listener</strong>(listener)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L120'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


120
121
122</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_listener'>add_listener</span><span class='lparen'>(</span> <span class='id identifier rubyid_listener'>listener</span> <span class='rparen'>)</span>
  <span class='ivar'>@listeners</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_listener'>listener</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="empty?-instance_method">
  <h3 class='signature'>
  #<strong>empty?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if there are no more events</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L146'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


146
147
148</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 146</span>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>return</span> <span class='lparen'>(</span><span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='kw'>and</span> <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="entity-instance_method">
  <h3 class='signature'>
  #<strong>entity</strong>(reference, entities)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L446'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


446
447
448
449
450
451
452
453
454</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 446</span>

<span class='kw'>def</span> <span class='id identifier rubyid_entity'>entity</span><span class='lparen'>(</span> <span class='id identifier rubyid_reference'>reference</span><span class='comma'>,</span> <span class='id identifier rubyid_entities'>entities</span> <span class='rparen'>)</span>
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_entities'>entities</span><span class='lbracket'>[</span> <span class='id identifier rubyid_reference'>reference</span> <span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_entities'>entities</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_value'>value</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'><a href="#DEFAULT_ENTITIES-constant" title="REXML::Parsers::BaseParser::DEFAULT_ENTITIES (constant)">DEFAULT_ENTITIES</a></span><span class='lbracket'>[</span> <span class='id identifier rubyid_reference'>reference</span> <span class='rbracket'>]</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_unnormalize'>unnormalize</span><span class='lparen'>(</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_entities'>entities</span> <span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="has_next?-instance_method">
  <h3 class='signature'>
  #<strong>has_next?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if there are more events.  Synonymous with !empty?</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L151'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


151
152
153</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_next?'>has_next?</span>
  <span class='kw'>return</span> <span class='op'>!</span><span class='lparen'>(</span><span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='kw'>and</span> <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="need_source_encoding_update?-instance_method">
  <h3 class='signature'>
  #<strong>need_source_encoding_update?</strong>(xml_declaration_encoding)  &#x21d2; <tt>Boolean</tt>  <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L503'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


503
504
505
506
507</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 503</span>

<span class='kw'>def</span> <span class='id identifier rubyid_need_source_encoding_update?'>need_source_encoding_update?</span><span class='lparen'>(</span><span class='id identifier rubyid_xml_declaration_encoding'>xml_declaration_encoding</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_xml_declaration_encoding'>xml_declaration_encoding</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\AUTF-16\z</span><span class='regexp_end'>/i</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_xml_declaration_encoding'>xml_declaration_encoding</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="normalize-instance_method">
  <h3 class='signature'>
  #<strong>normalize</strong>(input, entities = nil, entity_filter = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Escapes all possible entities</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L457'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


457
458
459
460
461
462
463
464
465
466
467
468
469
470</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 457</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize'>normalize</span><span class='lparen'>(</span> <span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_entities'>entities</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_entity_filter'>entity_filter</span><span class='op'>=</span><span class='kw'>nil</span> <span class='rparen'>)</span>
  <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span>
  <span class='comment'># Doing it like this rather than in a loop improves the speed
</span>  <span class='id identifier rubyid_copy'>copy</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='const'><a href="#EREFERENCE-constant" title="REXML::Parsers::BaseParser::EREFERENCE (constant)">EREFERENCE</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&#39;</span></span> <span class='rparen'>)</span>
  <span class='id identifier rubyid_entities'>entities</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_copy'>copy</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_entity_filter'>entity_filter</span> <span class='kw'>and</span>
                                <span class='id identifier rubyid_entity_filter'>entity_filter</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='kw'>end</span> <span class='kw'>if</span> <span class='id identifier rubyid_entities'>entities</span>
  <span class='id identifier rubyid_copy'>copy</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='const'><a href="#EREFERENCE-constant" title="REXML::Parsers::BaseParser::EREFERENCE (constant)">EREFERENCE</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&#39;</span></span> <span class='rparen'>)</span>
  <span class='const'><a href="#DEFAULT_ENTITIES-constant" title="REXML::Parsers::BaseParser::DEFAULT_ENTITIES (constant)">DEFAULT_ENTITIES</a></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_copy'>copy</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_copy'>copy</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="peek-instance_method">
  <h3 class='signature'>
  #<strong>peek</strong>(depth = 0)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Peek at the <code>depth</code> event in the stack.  The first element on
the stack is at depth 0.  If <code>depth</code> is -1, will parse to the
end of the input stream and return the last event, which is always
:end_document. Be aware that this causes the stream to be parsed up to the
<code>depth</code> event, so you can effectively pre-parse the entire
document (pull the entire thing into memory) using this method.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L167'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


167
168
169
170
171
172
173
174
175
176
177
178
179</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_peek'>peek</span> <span class='id identifier rubyid_depth'>depth</span><span class='op'>=</span><span class='int'>0</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>%Q[</span><span class='tstring_content'>Illegal argument &quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_depth'>depth</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>]</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_depth'>depth</span> <span class='op'>&lt;</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_depth'>depth</span> <span class='op'>==</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_pull'>pull</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>until</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>else</span>
    <span class='kw'>while</span> <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>+</span><span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_depth'>depth</span><span class='op'>+</span><span class='int'>1</span>
      <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_pull'>pull</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@stack</span> <span class='op'>+=</span> <span class='id identifier rubyid_temp'>temp</span> <span class='kw'>if</span> <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='ivar'>@stack</span><span class='lbracket'>[</span><span class='id identifier rubyid_depth'>depth</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="position-instance_method">
  <h3 class='signature'>
  #<strong>position</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L136'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


136
137
138
139
140
141
142
143</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_position'>position</span>
  <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:position</span>
    <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_position'>position</span>
  <span class='kw'>else</span>
    <span class='comment'># FIXME
</span>    <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="pull-instance_method">
  <h3 class='signature'>
  #<strong>pull</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the next event.  This is a <code>PullEvent</code> object.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L182'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


182
183
184
185
186
187
188</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pull'>pull</span>
  <span class='id identifier rubyid_pull_event'>pull_event</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='op'>|</span>
    <span class='ivar'>@listeners</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_listener'>listener</span><span class='op'>|</span>
      <span class='id identifier rubyid_listener'>listener</span><span class='period'>.</span><span class='id identifier rubyid_receive'>receive</span> <span class='id identifier rubyid_event'>event</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="pull_event-instance_method">
  <h3 class='signature'>
  #<strong>pull_event</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L190'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pull_event'>pull_event</span>
  <span class='kw'>if</span> <span class='ivar'>@closed</span>
    <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='ivar'>@closed</span> <span class='op'>=</span> <span class='ivar'>@closed</span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:end_element</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span> <span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:end_document</span> <span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>return</span> <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='kw'>if</span> <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='comment'>#STDERR.puts @source.encoding
</span>  <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>&lt;</span><span class='int'>2</span>
  <span class='comment'>#STDERR.puts &quot;BUFFER = #{@source.buffer.inspect}&quot;
</span>  <span class='kw'>if</span> <span class='ivar'>@document_status</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='comment'>#@source.consume( /^\s*/um )
</span>    <span class='id identifier rubyid_word'>word</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^((?:\s+)|(?:&lt;[^&gt;]*&gt;))</span><span class='regexp_end'>/um</span></span> <span class='rparen'>)</span>
    <span class='id identifier rubyid_word'>word</span> <span class='op'>=</span> <span class='id identifier rubyid_word'>word</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_word'>word</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'>#STDERR.puts &quot;WORD = #{word.inspect}&quot;
</span>    <span class='kw'>case</span> <span class='id identifier rubyid_word'>word</span>
    <span class='kw'>when</span> <span class='const'><a href="#COMMENT_START-constant" title="REXML::Parsers::BaseParser::COMMENT_START (constant)">COMMENT_START</a></span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:comment</span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#COMMENT_PATTERN-constant" title="REXML::Parsers::BaseParser::COMMENT_PATTERN (constant)">COMMENT_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='const'><a href="#XMLDECL_START-constant" title="REXML::Parsers::BaseParser::XMLDECL_START (constant)">XMLDECL_START</a></span>
      <span class='comment'>#STDERR.puts &quot;XMLDECL&quot;
</span>      <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#XMLDECL_PATTERN-constant" title="REXML::Parsers::BaseParser::XMLDECL_PATTERN (constant)">XMLDECL_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='const'><a href="#VERSION-constant" title="REXML::Parsers::BaseParser::VERSION (constant)">VERSION</a></span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='id identifier rubyid_results'>results</span> <span class='rparen'>)</span>
      <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='id identifier rubyid_version'>version</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='const'><a href="#ENCODING-constant" title="REXML::Parsers::BaseParser::ENCODING (constant)">ENCODING</a></span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_encoding'>encoding</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_encoding'>encoding</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_need_source_encoding_update?'>need_source_encoding_update?</span><span class='lparen'>(</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
        <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_encoding'>encoding</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_encoding'>encoding</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>and</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\AUTF-16(?:BE|LE)\z</span><span class='regexp_end'>/i</span></span> <span class='op'>=~</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span>
        <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-16</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_standalone'>standalone</span> <span class='op'>=</span> <span class='const'><a href="#STANDALONE-constant" title="REXML::Parsers::BaseParser::STANDALONE (constant)">STANDALONE</a></span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_standalone'>standalone</span> <span class='op'>=</span> <span class='id identifier rubyid_standalone'>standalone</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_standalone'>standalone</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:xmldecl</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span><span class='comma'>,</span> <span class='id identifier rubyid_standalone'>standalone</span> <span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='const'><a href="#INSTRUCTION_START-constant" title="REXML::Parsers::BaseParser::INSTRUCTION_START (constant)">INSTRUCTION_START</a></span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:processing_instruction</span><span class='comma'>,</span> <span class='op'>*</span><span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='const'><a href="#INSTRUCTION_PATTERN-constant" title="REXML::Parsers::BaseParser::INSTRUCTION_PATTERN (constant)">INSTRUCTION_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='const'><a href="#DOCTYPE_START-constant" title="REXML::Parsers::BaseParser::DOCTYPE_START (constant)">DOCTYPE_START</a></span>
      <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#DOCTYPE_PATTERN-constant" title="REXML::Parsers::BaseParser::DOCTYPE_PATTERN (constant)">DOCTYPE_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
      <span class='ivar'>@nsstack</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_curr_ns'>curr_ns</span><span class='op'>=</span><span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_identity'>identity</span> <span class='op'>=</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_close'>close</span> <span class='op'>=</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_identity'>identity</span> <span class='op'>=~</span> <span class='const'><a href="#IDENTITY-constant" title="REXML::Parsers::BaseParser::IDENTITY (constant)">IDENTITY</a></span>
      <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DOCTYPE is missing a name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_pub_sys'>pub_sys</span> <span class='op'>=</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
      <span class='id identifier rubyid_long_name'>long_name</span> <span class='op'>=</span> <span class='backref'>$4</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='backref'>$4</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
      <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='backref'>$6</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='backref'>$6</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
      <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span> <span class='symbol'>:start_doctype</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_pub_sys'>pub_sys</span><span class='comma'>,</span> <span class='id identifier rubyid_long_name'>long_name</span><span class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span> <span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_close'>close</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@document_status</span> <span class='op'>=</span> <span class='symbol'>:after_doctype</span>
        <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>&lt;</span><span class='int'>2</span>
        <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*</span><span class='regexp_end'>/um</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
        <span class='ivar'>@stack</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span> <span class='symbol'>:end_doctype</span> <span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='ivar'>@document_status</span> <span class='op'>=</span> <span class='symbol'>:in_doctype</span>
      <span class='kw'>end</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_args'>args</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s+</span><span class='regexp_end'>/</span></span>
    <span class='kw'>else</span>
      <span class='ivar'>@document_status</span> <span class='op'>=</span> <span class='symbol'>:after_doctype</span>
      <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>&lt;</span><span class='int'>2</span>
      <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*</span><span class='regexp_end'>/um</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@document_status</span> <span class='op'>==</span> <span class='symbol'>:in_doctype</span>
    <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*(.*?&gt;)</span><span class='regexp_end'>/um</span></span><span class='rparen'>)</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='const'><a href="#SYSTEMENTITY-constant" title="REXML::Parsers::BaseParser::SYSTEMENTITY (constant)">SYSTEMENTITY</a></span>
      <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#SYSTEMENTITY-constant" title="REXML::Parsers::BaseParser::SYSTEMENTITY (constant)">SYSTEMENTITY</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:externalentity</span><span class='comma'>,</span> <span class='id identifier rubyid_match'>match</span> <span class='rbracket'>]</span>

    <span class='kw'>when</span> <span class='const'><a href="#ELEMENTDECL_START-constant" title="REXML::Parsers::BaseParser::ELEMENTDECL_START (constant)">ELEMENTDECL_START</a></span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:elementdecl</span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#ELEMENTDECL_PATTERN-constant" title="REXML::Parsers::BaseParser::ELEMENTDECL_PATTERN (constant)">ELEMENTDECL_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rbracket'>]</span>

    <span class='kw'>when</span> <span class='const'><a href="#ENTITY_START-constant" title="REXML::Parsers::BaseParser::ENTITY_START (constant)">ENTITY_START</a></span>
      <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#ENTITYDECL-constant" title="REXML::Parsers::BaseParser::ENTITYDECL (constant)">ENTITYDECL</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
      <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:entitydecl</span>
      <span class='id identifier rubyid_ref'>ref</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_ref'>ref</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span> <span class='int'>1</span>
      <span class='kw'>end</span>
      <span class='comment'># Now we have to sort out what kind of entity reference this is
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SYSTEM</span><span class='tstring_end'>&#39;</span></span>
        <span class='comment'># External reference
</span>        <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='comment'># PUBID
</span>        <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>4</span> <span class='comment'># Chop out NDATA decl
</span>        <span class='comment'># match is [ :entity, name, SYSTEM, pubid(, ndata)? ]
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PUBLIC</span><span class='tstring_end'>&#39;</span></span>
        <span class='comment'># External reference
</span>        <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='comment'># PUBID
</span>        <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='comment'># HREF
</span>        <span class='comment'># match is [ :entity, name, PUBLIC, pubid, href ]
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span> <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>4</span>
        <span class='comment'># match is [ :entity, name, value ]
</span>      <span class='kw'>end</span>
      <span class='id identifier rubyid_match'>match</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_ref'>ref</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_match'>match</span>
    <span class='kw'>when</span> <span class='const'><a href="#ATTLISTDECL_START-constant" title="REXML::Parsers::BaseParser::ATTLISTDECL_START (constant)">ATTLISTDECL_START</a></span>
      <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#ATTLISTDECL_PATTERN-constant" title="REXML::Parsers::BaseParser::ATTLISTDECL_PATTERN (constant)">ATTLISTDECL_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bad ATTLIST declaration!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span> <span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_element'>element</span> <span class='op'>=</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_contents'>contents</span> <span class='op'>=</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>

      <span class='id identifier rubyid_pairs'>pairs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span> <span class='const'><a href="#ATTDEF_RE-constant" title="REXML::Parsers::BaseParser::ATTDEF_RE (constant)">ATTDEF_RE</a></span> <span class='rparen'>)</span>
      <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attdef'>attdef</span><span class='op'>|</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_attdef'>attdef</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#IMPLIED</span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_attdef'>attdef</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
          <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_attdef'>attdef</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_attdef'>attdef</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_val'>val</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#FIXED </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_pairs'>pairs</span><span class='lbracket'>[</span><span class='id identifier rubyid_attdef'>attdef</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_attdef'>attdef</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^xmlns:(.*)</span><span class='regexp_end'>/</span></span>
            <span class='ivar'>@nsstack</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='backref'>$1</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:attlistdecl</span><span class='comma'>,</span> <span class='id identifier rubyid_element'>element</span><span class='comma'>,</span> <span class='id identifier rubyid_pairs'>pairs</span><span class='comma'>,</span> <span class='id identifier rubyid_contents'>contents</span> <span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='const'><a href="#NOTATIONDECL_START-constant" title="REXML::Parsers::BaseParser::NOTATIONDECL_START (constant)">NOTATIONDECL_START</a></span>
      <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#PUBLIC-constant" title="REXML::Parsers::BaseParser::PUBLIC (constant)">PUBLIC</a></span> <span class='rparen'>)</span>
        <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#PUBLIC-constant" title="REXML::Parsers::BaseParser::PUBLIC (constant)">PUBLIC</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
        <span class='id identifier rubyid_vals'>vals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>6</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
      <span class='kw'>elsif</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#SYSTEM-constant" title="REXML::Parsers::BaseParser::SYSTEM (constant)">SYSTEM</a></span> <span class='rparen'>)</span>
        <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#SYSTEM-constant" title="REXML::Parsers::BaseParser::SYSTEM (constant)">SYSTEM</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
        <span class='id identifier rubyid_vals'>vals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='kw'>nil</span><span class='comma'>,</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error parsing notation: no matching pattern</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span> <span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:notationdecl</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_vals'>vals</span> <span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='const'><a href="#CDATA_END-constant" title="REXML::Parsers::BaseParser::CDATA_END (constant)">CDATA_END</a></span>
      <span class='ivar'>@document_status</span> <span class='op'>=</span> <span class='symbol'>:after_doctype</span>
      <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#CDATA_END-constant" title="REXML::Parsers::BaseParser::CDATA_END (constant)">CDATA_END</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:end_doctype</span> <span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?&lt;</span>
      <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?/</span>
        <span class='ivar'>@nsstack</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
        <span class='id identifier rubyid_last_tag'>last_tag</span> <span class='op'>=</span> <span class='ivar'>@tags</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
        <span class='comment'>#md = @source.match_to_consume( &#39;&gt;&#39;, CLOSE_MATCH)
</span>        <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#CLOSE_MATCH-constant" title="REXML::Parsers::BaseParser::CLOSE_MATCH (constant)">CLOSE_MATCH</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing end tag for </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_last_tag'>last_tag</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; (got \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='ivar'>@source</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_last_tag'>last_tag</span> <span class='op'>==</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:end_element</span><span class='comma'>,</span> <span class='id identifier rubyid_last_tag'>last_tag</span> <span class='rbracket'>]</span>
      <span class='kw'>elsif</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?!</span>
        <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(\s*[^&gt;]*&gt;)</span><span class='regexp_end'>/um</span></span><span class='rparen'>)</span>
        <span class='comment'>#STDERR.puts &quot;SOURCE BUFFER = #{source.buffer}, #{source.buffer.size}&quot;
</span>        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Malformed node</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_md'>md</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?-</span>
          <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#COMMENT_PATTERN-constant" title="REXML::Parsers::BaseParser::COMMENT_PATTERN (constant)">COMMENT_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>

          <span class='kw'>case</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
          <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>--</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>-\z</span><span class='regexp_end'>/</span></span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Malformed comment</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='rparen'>)</span>
          <span class='kw'>end</span>

          <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:comment</span><span class='comma'>,</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#CDATA_PATTERN-constant" title="REXML::Parsers::BaseParser::CDATA_PATTERN (constant)">CDATA_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
          <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:cdata</span><span class='comma'>,</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Declarations can only occur </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>in the doctype declaration.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='rparen'>)</span>
      <span class='kw'>elsif</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>??</span>
        <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#INSTRUCTION_PATTERN-constant" title="REXML::Parsers::BaseParser::INSTRUCTION_PATTERN (constant)">INSTRUCTION_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:processing_instruction</span><span class='comma'>,</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bad instruction declaration</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='ivar'>@source</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='comment'># Get the next tag
</span>        <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='const'><a href="#TAG_MATCH-constant" title="REXML::Parsers::BaseParser::TAG_MATCH (constant)">TAG_MATCH</a></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_md'>md</span>
          <span class='comment'># Check for missing attribute quotes
</span>          <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>missing attribute quote</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='const'><a href="#MISSING_ATTRIBUTE_QUOTES-constant" title="REXML::Parsers::BaseParser::MISSING_ATTRIBUTE_QUOTES (constant)">MISSING_ATTRIBUTE_QUOTES</a></span> <span class='rparen'>)</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>malformed XML: missing tag start</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_prefixes'>prefixes</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_prefixes'>prefixes</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
        <span class='ivar'>@nsstack</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_curr_ns'>curr_ns</span><span class='op'>=</span><span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
          <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span> <span class='const'><a href="#ATTRIBUTE_PATTERN-constant" title="REXML::Parsers::BaseParser::ATTRIBUTE_PATTERN (constant)">ATTRIBUTE_PATTERN</a></span> <span class='rparen'>)</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error parsing attributes: [</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>], excess = \&quot;</span><span class='embvar'>#</span><span class='backref'>$&#39;</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='backref'>$&#39;</span> <span class='kw'>and</span> <span class='backref'>$&#39;</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
          <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_local_part'>local_part</span><span class='comma'>,</span> <span class='id identifier rubyid_quote'>quote</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xmlns</span><span class='tstring_end'>&quot;</span></span>
              <span class='kw'>if</span> <span class='id identifier rubyid_local_part'>local_part</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xml</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://www.w3.org/XML/1998/namespace</span><span class='tstring_end'>&quot;</span></span>
                  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The &#39;xml&#39; prefix must not be bound to any other namespace </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(http://www.w3.org/TR/REC-xml-names/#ns-decl)</span><span class='tstring_end'>&quot;</span></span>
                  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='comma'>,</span> <span class='kw'>self</span> <span class='rparen'>)</span>
                <span class='kw'>end</span>
              <span class='kw'>elsif</span> <span class='id identifier rubyid_local_part'>local_part</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xmlns</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The &#39;xmlns&#39; prefix must not be declared </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(http://www.w3.org/TR/REC-xml-names/#ns-decl)</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span>
              <span class='kw'>end</span>
              <span class='id identifier rubyid_curr_ns'>curr_ns</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_local_part'>local_part</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_prefix'>prefix</span>
              <span class='id identifier rubyid_prefixes'>prefixes</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='kw'>unless</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xml</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='rparen'>)</span>
              <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Duplicate attribute </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
              <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='ivar'>@source</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span>
            <span class='kw'>end</span>

            <span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='comment'># Verify that all of the prefixes have been defined
</span>        <span class='kw'>for</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='kw'>in</span> <span class='id identifier rubyid_prefixes'>prefixes</span>
          <span class='kw'>unless</span> <span class='ivar'>@nsstack</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rparen'>)</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../UndefinedNamespaceException.html" title="REXML::UndefinedNamespaceException (class)">UndefinedNamespaceException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../UndefinedNamespaceException.html#new-class_method" title="REXML::UndefinedNamespaceException.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span><span class='ivar'>@source</span><span class='comma'>,</span><span class='kw'>self</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>6</span><span class='rbracket'>]</span>
          <span class='ivar'>@closed</span> <span class='op'>=</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
          <span class='ivar'>@nsstack</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
        <span class='kw'>else</span>
          <span class='ivar'>@tags</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:start_element</span><span class='comma'>,</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span> <span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='const'><a href="#TEXT_PATTERN-constant" title="REXML::Parsers::BaseParser::TEXT_PATTERN (constant)">TEXT_PATTERN</a></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='ivar'>@source</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\s+)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='kw'>true</span> <span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='comment'>#STDERR.puts &quot;GOT #{md[1].inspect}&quot; unless md[0].length == 0
</span>      <span class='comment'>#return [ :text, &quot;&quot; ] if md[0].length == 0
</span>      <span class='comment'># unnormalized = Text::unnormalize( md[1], self )
</span>      <span class='comment'># return PullEvent.new( :text, md[1], unnormalized )
</span>      <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:text</span><span class='comma'>,</span> <span class='id identifier rubyid_md'>md</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../UndefinedNamespaceException.html" title="REXML::UndefinedNamespaceException (class)">UndefinedNamespaceException</a></span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>rescue</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span><span class='comma'>,</span> <span class='const'>NameError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="../ParseException.html" title="REXML::ParseException (class)">ParseException</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception parsing</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='ivar'>@source</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span> <span class='op'>?</span> <span class='id identifier rubyid_error'>error</span> <span class='op'>:</span> <span class='gvar'>$!</span><span class='rparen'>)</span> <span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span> <span class='symbol'>:dummy</span> <span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="stream=-instance_method">
  <h3 class='signature'>
  #<strong>stream=</strong>(source)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L126'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


126
127
128
129
130
131
132
133
134</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stream='>stream=</span><span class='lparen'>(</span> <span class='id identifier rubyid_source'>source</span> <span class='rparen'>)</span>
  <span class='ivar'>@source</span> <span class='op'>=</span> <span class='const'><a href="../SourceFactory.html" title="REXML::SourceFactory (class)">SourceFactory</a></span><span class='period'>.</span><span class='id identifier rubyid_create_from'><a href="../SourceFactory.html#create_from-class_method" title="REXML::SourceFactory.create_from (method)">create_from</a></span><span class='lparen'>(</span> <span class='id identifier rubyid_source'>source</span> <span class='rparen'>)</span>
  <span class='ivar'>@closed</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@document_status</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@tags</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@stack</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@entities</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@nsstack</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="unnormalize-instance_method">
  <h3 class='signature'>
  #<strong>unnormalize</strong>(string, entities = nil, filter = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Unescapes all possible entities</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L473'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 473</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unnormalize'>unnormalize</span><span class='lparen'>(</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_entities'>entities</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_filter'>filter</span><span class='op'>=</span><span class='kw'>nil</span> <span class='rparen'>)</span>
  <span class='id identifier rubyid_rv'>rv</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span>
  <span class='id identifier rubyid_rv'>rv</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span>
  <span class='id identifier rubyid_matches'>matches</span> <span class='op'>=</span> <span class='id identifier rubyid_rv'>rv</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span> <span class='const'><a href="#REFERENCE_RE-constant" title="REXML::Parsers::BaseParser::REFERENCE_RE (constant)">REFERENCE_RE</a></span> <span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_rv'>rv</span> <span class='kw'>if</span> <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='id identifier rubyid_rv'>rv</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;#0*((?:\d)|(?:x[a-fA-F0-9]));</span><span class='regexp_end'>/</span></span> <span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='id identifier rubyid_m'>m</span><span class='op'>=</span><span class='backref'>$1</span>
    <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?x</span>
    <span class='lbracket'>[</span><span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_collect!'>collect!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entity_reference'>entity_reference</span><span class='op'>|</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_filter'>filter</span> <span class='kw'>and</span> <span class='id identifier rubyid_filter'>filter</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_entity_reference'>entity_reference</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_entity_value'>entity_value</span> <span class='op'>=</span> <span class='id identifier rubyid_entity'>entity</span><span class='lparen'>(</span> <span class='id identifier rubyid_entity_reference'>entity_reference</span><span class='comma'>,</span> <span class='id identifier rubyid_entities'>entities</span> <span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_entity_value'>entity_value</span>
          <span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entity_reference'>entity_reference</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='regexp_end'>/</span></span>
          <span class='id identifier rubyid_rv'>rv</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='id identifier rubyid_re'>re</span><span class='comma'>,</span> <span class='id identifier rubyid_entity_value'>entity_value</span> <span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_er'>er</span> <span class='op'>=</span> <span class='const'><a href="#DEFAULT_ENTITIES-constant" title="REXML::Parsers::BaseParser::DEFAULT_ENTITIES (constant)">DEFAULT_ENTITIES</a></span><span class='lbracket'>[</span><span class='id identifier rubyid_entity_reference'>entity_reference</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_rv'>rv</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='id identifier rubyid_er'>er</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_er'>er</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_er'>er</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_rv'>rv</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;amp;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span> <span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_rv'>rv</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="unshift-instance_method">
  <h3 class='signature'>
  #<strong>unshift</strong>(token)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Push an event back on the head of the stream.  This method has
(theoretically) infinite depth.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rexml/parsers/baseparser.rb#L157'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


157
158
159</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'lib/rexml/parsers/baseparser.rb', line 157</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unshift'>unshift</span> <span class='id identifier rubyid_token'>token</span>
  <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_token'>token</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>