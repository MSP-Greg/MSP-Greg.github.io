<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Thread &mdash; Core Ruby-2.0.0 p247</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Thread",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.0.0</a> &raquo; 
          <a href='index.html'>Core</a> &raquo; 
          <a href='_index.html'>Index (T)</a> &raquo; 
          <span class='title'>Thread</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Thread</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      <ul class='fullTree'>
        <li><a href="Object.html" title="Object (class)">Object</a></li>
        <li class='next'>Thread</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <a href="Thread/Backtrace.html" title="Thread::Backtrace (class)">Backtrace</a>
    </td>
  </tr>




  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
thread.c<span class='defines'>,<br />prelude.rb,<br /> vm_trace.c</span>
</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p><a href="" title="Thread (class)">Thread</a> encapsulates the behavior of a thread of execution, including the
main thread of the Ruby script.</p>

<p>In the descriptions of the methods in this class, the parameter
<em>sym</em> refers to a symbol, which is either a quoted string or a
<a href="Symbol.html" title="Symbol (class)">Symbol</a> (such as <code>:name</code>).</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='MUTEX_FOR_THREAD_EXCLUSIVE-constant'>
      MUTEX_FOR_THREAD_EXCLUSIVE =
    </dt>
    <dd>
            <pre class='code'><span class='const'>Mutex</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></pre>
    </dd>
  </dl>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#abort_on_exception-class_method" title="abort_on_exception (class method)">.<strong>abort_on_exception</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the status of the global “abort on exception&#39;&#39; condition.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#abort_on_exception%3D-class_method" title="abort_on_exception= (class method)">.<strong>abort_on_exception=</strong>(boolean)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>When set to <code>true</code>, all threads will abort if an exception is
raised.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#current-class_method" title="current (class method)">.<strong>current</strong>  &#x21d2; thread </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the currently executing thread.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#DEBUG-class_method" title="DEBUG (class method)"><strong>DEBUG</strong>  &#x21d2; Numeric </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the thread debug level.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#DEBUG%3D-class_method" title="DEBUG= (class method)"><strong>DEBUG=</strong>(num)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Sets the thread debug level.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exclusive-class_method" title="exclusive (class method)">.<strong>exclusive</strong>  &#x21d2; Object </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Wraps a block in critical, restoring the original value upon exit
from the critical section, and returns the value of the block.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exit-class_method" title="exit (class method)">.<strong>exit</strong>  &#x21d2; thread </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Terminates the currently running thread and schedules another thread to be
run.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fork-class_method" title="fork (class method)">.<strong>fork</strong>([args]) {|args| ... } &#x21d2; thread </a>
        (also: .start)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Basically the same as <a href="#new-class_method" title="Thread.new (method)">Thread.new</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#handle_interrupt-class_method" title="handle_interrupt (class method)">.<strong>handle_interrupt</strong>(hash)  &#x21d2; result of the block </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Changes asynchronous interrupt timing.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#kill-class_method" title="kill (class method)">.<strong>kill</strong>(thread)  &#x21d2; thread </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Causes the given <em>thread</em> to exit (see <a href="#exit-class_method" title="Thread.exit (method)">Thread.exit</a>).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#list-class_method" title="list (class method)">.<strong>list</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array of <a href="" title="Thread (class)">Thread</a> objects for all threads that are either
runnable or stopped.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#main-class_method" title="main (class method)">.<strong>main</strong>  &#x21d2; thread </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the main thread.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong>  &#x21d2; thread </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Thread.new(*args, &amp;proc)        -&gt; thread Thread.new(*args) { |args|
… }    -&gt; thread</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pass-class_method" title="pass (class method)">.<strong>pass</strong>  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Give the thread scheduler a hint to pass execution to another thread.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pending_interrupt%3F-class_method" title="pending_interrupt? (class method)">.<strong>pending_interrupt?</strong>(error = nil)  &#x21d2; true/false </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns whether or not the asynchronous queue is empty.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#start-class_method" title="start (class method)">.<strong>start</strong>([args]) {|args| ... } &#x21d2; thread </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#fork-class_method" title="Thread.fork (method)">Thread.fork</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#stop-class_method" title="stop (class method)">.<strong>stop</strong>  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Stops execution of the current thread, putting it into a “sleep&#39;&#39;
state, and schedules execution of another thread.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(sym)  &#x21d2; Object<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Attribute Reference—Returns the value of a fiber-local variable (current
thread&#39;s root fiber if not explicitely inside a Fiber), using either a
symbol or a string name.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(sym, obj)  &#x21d2; Object </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Attribute Assignment—Sets or creates the value of a fiber-local variable,
using either a symbol or a string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#abort_on_exception-instance_method" title="#abort_on_exception (instance method)">#<strong>abort_on_exception</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the status of the thread-local “abort on exception&#39;&#39;
condition for <em>thr</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#abort_on_exception%3D-instance_method" title="#abort_on_exception= (instance method)">#<strong>abort_on_exception=</strong>(boolean)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>When set to <code>true</code>, causes all threads (including the main
program) to abort if an exception is raised in <em>thr</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#add_trace_func-instance_method" title="#add_trace_func (instance method)">#<strong>add_trace_func</strong>(proc)  &#x21d2; Proc </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds <em>proc</em> as a handler for tracing.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#alive%3F-instance_method" title="#alive? (instance method)">#<strong>alive?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if <em>thr</em> is running or sleeping.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#backtrace-instance_method" title="#backtrace (instance method)">#<strong>backtrace</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the current backtrace of the target thread.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#backtrace_locations-instance_method" title="#backtrace_locations (instance method)">#<strong>backtrace_locations</strong>(*args)  &#x21d2; Array<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the execution stack for the target thread—an array containing
backtrace location objects.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exit-instance_method" title="#exit (instance method)">#<strong>exit</strong>  &#x21d2; thr<sup>?</sup> </a>
        (also: #kill, #terminate)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Terminates <em>thr</em> and schedules another thread to be run.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#group-instance_method" title="#group (instance method)">#<strong>group</strong>  &#x21d2; thgrp<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the <a href="ThreadGroup.html" title="ThreadGroup (class)">ThreadGroup</a> which contains <em>thr</em>, or nil if the thread
is not a member of any group.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Dump the name, id, and status of <em>thr</em> to a string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#join-instance_method" title="#join (instance method)">#<strong>join</strong>  &#x21d2; thr </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The calling thread will suspend execution and run <em>thr</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#key%3F-instance_method" title="#key? (instance method)">#<strong>key?</strong>(sym)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the given string (or symbol) exists as a
fiber-local variable.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#keys-instance_method" title="#keys (instance method)">#<strong>keys</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an an array of the names of the fiber-local variables (as Symbols).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#kill-instance_method" title="#kill (instance method)">#<strong>kill</strong>  &#x21d2; thr<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#exit-instance_method" title="Thread#exit (method)">#exit</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pending_interrupt%3F-instance_method" title="#target_thread.pending_interrupt? (instance method)">#<strong>target_thread.pending_interrupt?</strong>(error = nil)  &#x21d2; true/false </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns whether or not the asychronous queue is empty for the target
thread.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#priority-instance_method" title="#priority (instance method)">#<strong>priority</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the priority of <em>thr</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#priority%3D-instance_method" title="#priority= (instance method)">#<strong>priority=</strong>(integer)  &#x21d2; thr </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Sets the priority of <em>thr</em> to <em>integer</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#raise-instance_method" title="#raise (instance method)">#<strong>raise</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Raises an exception (see <a href="Kernel.html#raise-class_method" title="Kernel.raise (method)">Kernel.raise</a>) from <em>thr</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>  &#x21d2; thr </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Wakes up <em>thr</em>, making it eligible for scheduling.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#safe_level-instance_method" title="#safe_level (instance method)">#<strong>safe_level</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the safe level in effect for <em>thr</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#set_trace_func-instance_method" title="#set_trace_func (instance method)">#<strong>set_trace_func</strong>(proc)  &#x21d2; Proc </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Establishes <em>proc</em> on <em>thr</em> as the handler for tracing, or
disables tracing if the parameter is <code>nil</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>  &#x21d2; String, ... </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the status of <em>thr</em>: “<code>sleep</code>&#39;&#39; if
<em>thr</em> is sleeping or waiting on I/O, “<code>run</code>&#39;&#39; if
<em>thr</em> is executing, “<code>aborting</code>&#39;&#39; if <em>thr</em>
is aborting, <code>false</code> if <em>thr</em> terminated normally, and
<code>nil</code> if <em>thr</em> terminated with an exception.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#stop%3F-instance_method" title="#stop? (instance method)">#<strong>stop?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if <em>thr</em> is dead or sleeping.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#terminate-instance_method" title="#terminate (instance method)">#<strong>terminate</strong>  &#x21d2; thr<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#exit-instance_method" title="Thread#exit (method)">#exit</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#thread_variable%3F-instance_method" title="#thread_variable? (instance method)">#<strong>thread_variable?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the given string (or symbol) exists as a
thread-local variable.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#thread_variable_get-instance_method" title="#thread_variable_get (instance method)">#<strong>thread_variable_get</strong>(key)  &#x21d2; Object<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the value of a thread local variable that has been set.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#thread_variable_set-instance_method" title="#thread_variable_set (instance method)">#<strong>thread_variable_set</strong>(key, value)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Sets a thread local with <code>key</code> to <code>value</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#thread_variables-instance_method" title="#thread_variables (instance method)">#<strong>thread_variables</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an an array of the names of the thread-local variables (as
Symbols).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#value-instance_method" title="#value (instance method)">#<strong>value</strong>  &#x21d2; Object </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Waits for <em>thr</em> to complete (via <a href="#join-instance_method" title="Thread#join (method)">#join</a>) and returns its
value.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#wakeup-instance_method" title="#wakeup (instance method)">#<strong>wakeup</strong>  &#x21d2; thr </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Marks <em>thr</em> as eligible for scheduling (it may still remain blocked
on I/O, however).</p>
</div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>  &#x21d2; <tt>thread</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Thread.new(*args, &amp;proc)        -&gt; thread Thread.new(*args) { |args|
… }    -&gt; thread</p>

<p>Creates a new thread executing the given block.</p>

<p>Any <code>args</code> given to <a href="#new-class_method" title="Thread.new (method)">new</a> will be passed to the block:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_arr'>arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>
<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='comma'>,</span><span class='id identifier rubyid_e'>e</span><span class='comma'>,</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_arr'>arr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_d'>d</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_e'>e</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_f'>f</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
<span class='id identifier rubyid_arr'>arr</span> <span class='comment'>#=&gt; [1, 2, 3]
</span></code></pre>

<p>A ThreadError exception is raised if <a href="#new-class_method" title="Thread.new (method)">new</a> is called without a block.</p>

<p>If you&#39;re going to subclass Thread, be sure to call super in your
<code>initialize</code> method, otherwise a ThreadError will be raised.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="abort_on_exception-class_method">
  <h3 class='signature first'>
  .<strong>abort_on_exception</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the status of the global “abort on exception&#39;&#39; condition. 
The default is <code>false</code>. When set to <code>true</code>, or if the
global <code>$DEBUG</code> flag is <code>true</code> (perhaps because the
command line option <code>-d</code> was specified) all threads will abort
(the process will <code>exit(0)</code>) if an exception is raised in any
thread. See also <a href="#abort_on_exception%3D-class_method" title="Thread.abort_on_exception= (method)">abort_on_exception=</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="abort_on_exception=-class_method">
  <h3 class='signature'>
  .<strong>abort_on_exception=</strong>(boolean)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>When set to <code>true</code>, all threads will abort if an exception is
raised. Returns the new state.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_abort_on_exception'>abort_on_exception</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_t1'>t1</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>In new thread</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception from thread</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not reached</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby">In new thread
prog.rb:4: Exception from thread (RuntimeError)
    from prog.rb:2:in `initialize&#39;
    from prog.rb:2:in `new&#39;
    from prog.rb:2</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="current-class_method">
  <h3 class='signature'>
  .<strong>current</strong>  &#x21d2; <tt>thread</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the currently executing thread.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>   <span class='comment'>#=&gt; #&lt;Thread:0x401bdf4c run&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="DEBUG-class_method">
  <h3 class='signature'>
  <strong>DEBUG</strong>  &#x21d2; <tt><a href="Numeric.html" title="Numeric (class)">Numeric</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the thread debug level.  Available only if compiled with
THREAD_DEBUG=-1.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="DEBUG=-class_method">
  <h3 class='signature'>
  <strong>DEBUG=</strong>(num)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the thread debug level.  Available only if compiled with
THREAD_DEBUG=-1.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="exclusive-class_method">
  <h3 class='signature'>
  .<strong>exclusive</strong>  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Wraps a block in critical, restoring the original value upon exit
from the critical section, and returns the value of the block.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


10
11
12
13
14</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'prelude.rb', line 10</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_exclusive'>exclusive</span>
  <span class='const'>MUTEX_FOR_THREAD_EXCLUSIVE</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span><span class='lbrace'>{</span>
    <span class='kw'>yield</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="exit-class_method">
  <h3 class='signature'>
  .<strong>exit</strong>  &#x21d2; <tt>thread</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Terminates the currently running thread and schedules another thread to be
run. If this thread is already marked to be killed, <code>exit</code>
returns the <a href="" title="Thread (class)">Thread</a>. If this is the main thread, or the last thread, exit
the process.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="fork-class_method">
  <h3 class='signature'>
  <span class='overload'>.<strong>start</strong>([args]) {|args| ... } &#x21d2; <tt>thread</tt> </span>
    <span class='overload'>.<strong>fork</strong>([args]) {|args| ... } &#x21d2; <tt>thread</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>start</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Basically the same as <a href="#new-class_method" title="Thread.new (method)">new</a>. However, if class Thread is subclassed, then
calling <code>start</code> in that subclass will not invoke the
subclass&#39;s <code>initialize</code> method.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="handle_interrupt-class_method">
  <h3 class='signature'>
  .<strong>handle_interrupt</strong>(hash)  &#x21d2; <tt>result of the block</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Changes asynchronous interrupt timing.</p>

<p><em>interrupt</em> means asynchronous event and corresponding procedure by
<a href="#raise-instance_method" title="Thread#raise (method)">#raise</a>, <a href="#kill-instance_method" title="Thread#kill (method)">#kill</a>, signal trap (not supported yet) and main
thread termination (if main thread terminates, then all other thread will
be killed).</p>

<p>The given <code>hash</code> has pairs like <code>ExceptionClass =&gt;
:TimingSymbol</code>. Where the ExceptionClass is the interrupt handled by
the given block. The TimingSymbol can be one of the following symbols:</p>
<dl class="rdoc-list label-list"><dt><code>:immediate</code>
<dd>
<p>Invoke interrupts immediately.</p>
</dd><dt><code>:on_blocking</code>
<dd>
<p>Invoke interrupts while <em>BlockingOperation</em>.</p>
</dd><dt><code>:never</code>
<dd>
<p>Never invoke all interrupts.</p>
</dd></dl>

<p><em>BlockingOperation</em> means that the operation will block the calling
thread, such as read and write.  On CRuby implementation,
<em>BlockingOperation</em> is any operation executed without GVL.</p>

<p>Masked asynchronous interrupts are delayed until they are enabled. This
method is similar to sigprocmask(3).</p>

<h4 id="label-NOTE">NOTE</h4>

<p>Asynchronous interrupts are difficult to use.</p>

<p>If you need to communicate between threads, please consider to use another
way such as Queue.</p>

<p>Or use them with deep understanding about this method.</p>

<h4 id="label-Usage">Usage</h4>

<p>In this example, we can guard from <a href="#raise-instance_method" title="Thread#raise (method)">#raise</a> exceptions.</p>

<p>Using the <code>:never</code> TimingSymbol the RuntimeError exception will
always be ignored in the first block of the main thread. In the second
<a href="#handle_interrupt-class_method" title="Thread.handle_interrupt (method)">handle_interrupt</a> block we can purposefully handle RuntimeError
exceptions.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_th'>th</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='const'>Thead</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>RuntimeError</span> <span class='op'>=&gt;</span> <span class='symbol'>:never</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='kw'>begin</span>
      <span class='comment'># You can write resource allocation code safely.
</span>      <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>RuntimeError</span> <span class='op'>=&gt;</span> <span class='symbol'>:immediate</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
      <span class='comment'># ...
</span>      <span class='rbrace'>}</span>
    <span class='kw'>ensure</span>
      <span class='comment'># You can write resource deallocation code safely.
</span>    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_pass'>pass</span>
<span class='comment'># ...
</span><span class='id identifier rubyid_th'>th</span><span class='period'>.</span><span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>stop</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>While we are ignoring the RuntimeError exception, it&#39;s safe to write
our resource allocation code. Then, the ensure block is where we can safely
deallocate your resources.</p>

<h5 id="label-Guarding+from+TimeoutError">Guarding from TimeoutError</h5>

<p>In the next example, we will guard from the TimeoutError exception. This
will help prevent from leaking resources when TimeoutError exceptions occur
during normal ensure clause. For this example we use the help of the
standard library Timeout, from lib/timeout.rb</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>TimeoutError</span> <span class='op'>=&gt;</span> <span class='symbol'>:never</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
  <span class='id identifier rubyid_timeout'>timeout</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='lbrace'>{</span>
    <span class='comment'># TimeoutError doesn&#39;t occur here
</span>    <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>TimeoutError</span> <span class='op'>=&gt;</span> <span class='symbol'>:on_blocking</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
      <span class='comment'># possible to be killed by TimeoutError
</span>      <span class='comment'># while blocking operation
</span>    <span class='rbrace'>}</span>
    <span class='comment'># TimeoutError doesn&#39;t occur here
</span>  <span class='rbrace'>}</span>
<span class='rbrace'>}</span>
</code></pre>

<p>In the first part of the <code>timeout</code> block, we can rely on
TimeoutError being ignored. Then in the <code>TimeoutError =&gt;
:on_blocking</code> block, any operation that will block the calling thread
is susceptible to a TimeoutError exception being raised.</p>

<h5 id="label-Stack+control+settings">Stack control settings</h5>

<p>It&#39;s possible to stack multiple levels of <a href="#handle_interrupt-class_method" title="Thread.handle_interrupt (method)">handle_interrupt</a> blocks in
order to control more than one ExceptionClass and TimingSymbol at a time.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>FooError</span> <span class='op'>=&gt;</span> <span class='symbol'>:never</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>BarError</span> <span class='op'>=&gt;</span> <span class='symbol'>:never</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
     <span class='comment'># FooError and BarError are prohibited.
</span>  <span class='rbrace'>}</span>
<span class='rbrace'>}</span>
</code></pre>

<h5 id="label-Inheritance+with+ExceptionClass">Inheritance with ExceptionClass</h5>

<p>All exceptions inherited from the ExceptionClass parameter will be
considered.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='symbol'>:never</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
  <span class='comment'># all exceptions inherited from Exception are prohibited.
</span><span class='rbrace'>}</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="kill-class_method">
  <h3 class='signature'>
  .<strong>kill</strong>(thread)  &#x21d2; <tt>thread</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Causes the given <em>thread</em> to exit (see <a href="#exit-class_method" title="Thread.exit (method)">exit</a>).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_loop'>loop</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='float'>0.1</span><span class='rparen'>)</span>       <span class='comment'>#=&gt; 0
</span><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>   <span class='comment'>#=&gt; #&lt;Thread:0x401b3d30 dead&gt;
</span><span class='id identifier rubyid_count'>count</span>            <span class='comment'>#=&gt; 93947
</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_alive?'>alive?</span>         <span class='comment'>#=&gt; false
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="list-class_method">
  <h3 class='signature'>
  .<strong>list</strong>  &#x21d2; <tt><a href="Array.html" title="Array (class)">Array</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array of <a href="" title="Thread (class)">Thread</a> objects for all threads that are either
runnable or stopped.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>200</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='int'>1000000</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_i'>i</span><span class='op'>*</span><span class='id identifier rubyid_i'>i</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span> <span class='rbrace'>}</span>
<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_list'>list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_t'>t</span><span class='rbrace'>}</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#&lt;Thread:0x401b3e84 sleep&gt;
</span><span class='comment'>#&lt;Thread:0x401b3f38 run&gt;
</span><span class='comment'>#&lt;Thread:0x401b3fb0 sleep&gt;
</span><span class='comment'>#&lt;Thread:0x401bdf4c run&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="main-class_method">
  <h3 class='signature'>
  .<strong>main</strong>  &#x21d2; <tt>thread</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the main thread.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="pass-class_method">
  <h3 class='signature'>
  .<strong>pass</strong>  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Give the thread scheduler a hint to pass execution to another thread. A
running thread may or may not switch, it depends on OS and processor.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="pending_interrupt?-class_method">
  <h3 class='signature'>
  .<strong>pending_interrupt?</strong>(error = nil)  &#x21d2; <tt>true/false</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns whether or not the asynchronous queue is empty.</p>

<p>Since <a href="#handle_interrupt-class_method" title="Thread.handle_interrupt (method)">handle_interrupt</a> can be used to defer asynchronous events.
This method can be used to determine if there are any deferred events.</p>

<p>If you find this method returns true, then you may finish
<code>:never</code> blocks.</p>

<p>For example, the following method processes deferred asynchronous events
immediately.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_kick_interrupt_immediately'>kick_interrupt_immediately</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>Object</span> <span class='op'>=&gt;</span> <span class='symbol'>:immediate</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_pass'>pass</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
</code></pre>

<p>If <code>error</code> is given, then check only for <code>error</code> type
deferred events.</p>

<h4 id="label-Usage">Usage</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_th'>th</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>RuntimeError</span> <span class='op'>=&gt;</span> <span class='symbol'>:on_blocking</span><span class='rparen'>)</span><span class='lbrace'>{</span>
    <span class='kw'>while</span> <span class='kw'>true</span>
      <span class='comment'>#...
</span>      <span class='comment'># reach safe point to invoke interrupt
</span>      <span class='kw'>if</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_pending_interrupt?'>pending_interrupt?</span>
        <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>Object</span> <span class='op'>=&gt;</span> <span class='symbol'>:immediate</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
      <span class='comment'>#...
</span>    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='rbrace'>}</span>
<span class='comment'>#...
</span><span class='id identifier rubyid_th'>th</span><span class='period'>.</span><span class='id identifier rubyid_raise'>raise</span> <span class='comment'># stop thread</span></code></pre>

<p>This example can also be written as the following, which you should use to
avoid asynchronous interrupts.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_th'>th</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span><span class='lparen'>(</span><span class='const'>RuntimeError</span> <span class='op'>=&gt;</span> <span class='symbol'>:on_blocking</span><span class='rparen'>)</span><span class='lbrace'>{</span>
    <span class='kw'>while</span> <span class='kw'>true</span>
      <span class='comment'>#...
</span>      <span class='comment'># reach safe point to invoke interrupt
</span>      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_flag'>flag</span> <span class='op'>==</span> <span class='kw'>false</span>
      <span class='comment'>#...
</span>    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='rbrace'>}</span>
<span class='comment'>#...
</span><span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='comment'># stop thread</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="start-class_method">
  <h3 class='signature'>
  <span class='overload'>.<strong>start</strong>([args]) {|args| ... } &#x21d2; <tt>thread</tt> </span>
    <span class='overload'>.<strong>fork</strong>([args]) {|args| ... } &#x21d2; <tt>thread</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#fork-class_method" title="Thread.fork (method)">fork</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="stop-class_method">
  <h3 class='signature'>
  .<strong>stop</strong>  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Stops execution of the current thread, putting it into a “sleep&#39;&#39;
state, and schedules execution of another thread.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span><span class='semicolon'>;</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.1</span> <span class='kw'>while</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='op'>!=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sleep</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_abc'>abc</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="[]-instance_method">
  <h3 class='signature first'>
  #<strong>[]</strong>(sym)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Attribute Reference—Returns the value of a fiber-local variable (current
thread&#39;s root fiber if not explicitely inside a Fiber), using either a
symbol or a string name. If the specified variable does not exist, returns
<code>nil</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>B</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_th'>th</span><span class='op'>|</span>
  <span class='id identifier rubyid_th'>th</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_th'>th</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_th'>th</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#&lt;Thread:0x00000002a54220 dead&gt;: A
</span><span class='comment'>#&lt;Thread:0x00000002a541a8 dead&gt;: B
</span><span class='comment'>#&lt;Thread:0x00000002a54130 dead&gt;: C
</span></code></pre>

<p><a href="#%5B%5D-instance_method" title="Thread#[] (method)">#[]</a> and <a href="#%5B%5D%3D-instance_method" title="Thread#[]= (method)">#[]=</a> are not thread-local but fiber-local. This
confusion did not exist in Ruby 1.8 because fibers were only available
since Ruby 1.9. Ruby 1.9 chooses that the methods behaves fiber-local to
save following idiom for dynamic scope.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_meth'>meth</span><span class='lparen'>(</span><span class='id identifier rubyid_newvalue'>newvalue</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_oldvalue'>oldvalue</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
    <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_newvalue'>newvalue</span>
    <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_oldvalue'>oldvalue</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The idiom may not work as dynamic scope if the methods are thread-local and
a given block switches fiber.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>Fiber</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span>
  <span class='id identifier rubyid_meth'>meth</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='const'>Fiber</span><span class='period'>.</span><span class='id identifier rubyid_yield'>yield</span>
  <span class='rbrace'>}</span>
<span class='rbrace'>}</span>
<span class='id identifier rubyid_meth'>meth</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_resume'>resume</span>
<span class='rbrace'>}</span>
<span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_resume'>resume</span>
<span class='id identifier rubyid_p'>p</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
<span class='comment'>#=&gt; nil if fiber-local
</span><span class='comment'>#=&gt; 2 if thread-local (The value 2 is leaked to outside of meth method.)
</span></code></pre>

<p>For thread-local variables, please see #thread_local_get and
#thread_local_set.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="[]=-instance_method">
  <h3 class='signature'>
  #<strong>[]=</strong>(sym, obj)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Attribute Assignment—Sets or creates the value of a fiber-local variable,
using either a symbol or a string. See also <a href="#%5B%5D-instance_method" title="Thread#[] (method)">#[]</a>.  For thread-local
variables, please see <a href="#thread_variable_set-instance_method" title="Thread#thread_variable_set (method)">#thread_variable_set</a> and
<a href="#thread_variable_get-instance_method" title="Thread#thread_variable_get (method)">#thread_variable_get</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="abort_on_exception-instance_method">
  <h3 class='signature'>
  #<strong>abort_on_exception</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the status of the thread-local “abort on exception&#39;&#39;
condition for <em>thr</em>. The default is <code>false</code>. See also
<a href="#abort_on_exception%3D-class_method" title="Thread.abort_on_exception= (method)">abort_on_exception=</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="abort_on_exception=-instance_method">
  <h3 class='signature'>
  #<strong>abort_on_exception=</strong>(boolean)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>When set to <code>true</code>, causes all threads (including the main
program) to abort if an exception is raised in <em>thr</em>. The process
will effectively <code>exit(0)</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="add_trace_func-instance_method">
  <h3 class='signature'>
  #<strong>add_trace_func</strong>(proc)  &#x21d2; <tt><a href="Proc.html" title="Proc (class)">Proc</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds <em>proc</em> as a handler for tracing. See <a href="#set_trace_func-instance_method" title="Thread#set_trace_func (method)">#set_trace_func</a>
and <code>set_trace_func</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="alive?-instance_method">
  <h3 class='signature'>
  #<strong>alive?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if <em>thr</em> is running or sleeping.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_thr'>thr</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_thr'>thr</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>                <span class='comment'>#=&gt; #&lt;Thread:0x401b3fb0 dead&gt;
</span><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_alive?'>alive?</span>   <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_thr'>thr</span><span class='period'>.</span><span class='id identifier rubyid_alive?'>alive?</span>              <span class='comment'>#=&gt; false
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="backtrace-instance_method">
  <h3 class='signature'>
  #<strong>backtrace</strong>  &#x21d2; <tt><a href="Array.html" title="Array (class)">Array</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the current backtrace of the target thread.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="backtrace_locations-instance_method">
  <h3 class='signature'>
  #<strong>backtrace_locations</strong>(*args)  &#x21d2; <tt><a href="Array.html" title="Array (class)">Array</a></tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the execution stack for the target thread—an array containing
backtrace location objects.</p>

<p>See <a href="Thread/Backtrace/Location.html" title="Thread::Backtrace::Location (class)">Thread::Backtrace::Location</a> for more information.</p>

<p>This method behaves similarly to <a href="Kernel.html#caller_locations-class_method" title="Kernel.caller_locations (method)">Kernel.caller_locations</a> except it
applies to a specific thread.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="exit-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>exit</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>kill</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>terminate</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
  <span class='aliases'>Also known as: <span class='names'><span>kill</span>, <span>terminate</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Terminates <em>thr</em> and schedules another thread to be run. If this
thread is already marked to be killed, <code>exit</code> returns the
<a href="" title="Thread (class)">Thread</a>. If this is the main thread, or the last thread, exits the
process.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="group-instance_method">
  <h3 class='signature'>
  #<strong>group</strong>  &#x21d2; <tt>thgrp</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the <a href="ThreadGroup.html" title="ThreadGroup (class)">ThreadGroup</a> which contains <em>thr</em>, or nil if the thread
is not a member of any group.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_main'>main</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span>   <span class='comment'>#=&gt; #&lt;ThreadGroup:0x4029d914&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="inspect-instance_method">
  <h3 class='signature'>
  #<strong>inspect</strong>  &#x21d2; <tt><a href="String.html" title="String (class)">String</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Dump the name, id, and status of <em>thr</em> to a string.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="join-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>join</strong>  &#x21d2; <tt>thr</tt> </span>
    <span class='overload'>#<strong>join</strong>(limit)  &#x21d2; <tt>thr</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The calling thread will suspend execution and run <em>thr</em>. Does not
return until <em>thr</em> exits or until <em>limit</em> seconds have
passed. If the time limit expires, <code>nil</code> will be returned,
otherwise <em>thr</em> is returned.</p>

<p>Any threads not joined will be killed when the main program exits.  If
<em>thr</em> had previously raised an exception and the
<code>abort_on_exception</code> and <code>$DEBUG</code> flags are not set
(so the exception has not yet been processed) it will be processed at this
time.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_pass'>pass</span><span class='semicolon'>;</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>z</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='comment'># Let x thread finish, a will be killed on exit.
</span></code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_axyz'>axyz</span>
</code></pre>

<p>The following example illustrates the <em>limit</em> parameter.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='int'>4</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.1</span><span class='semicolon'>;</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tick... </span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Waiting</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>until</span> <span class='id identifier rubyid_y'>y</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='float'>0.15</span><span class='rparen'>)</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby">tick...
Waiting
tick...
Waitingtick...

tick...</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="key?-instance_method">
  <h3 class='signature'>
  #<strong>key?</strong>(sym)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the given string (or symbol) exists as a
fiber-local variable.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_me'>me</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
<span class='id identifier rubyid_me'>me</span><span class='lbracket'>[</span><span class='symbol'>:oliver</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_me'>me</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:oliver</span><span class='rparen'>)</span>    <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_me'>me</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:stanley</span><span class='rparen'>)</span>   <span class='comment'>#=&gt; false
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="keys-instance_method">
  <h3 class='signature'>
  #<strong>keys</strong>  &#x21d2; <tt><a href="Array.html" title="Array (class)">Array</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an an array of the names of the fiber-local variables (as Symbols).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_thr'>thr</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:cat</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>meow</span><span class='tstring_end'>&#39;</span></span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dog</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>woof</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_thr'>thr</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>   <span class='comment'>#=&gt; #&lt;Thread:0x401b3f10 dead&gt;
</span><span class='id identifier rubyid_thr'>thr</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>   <span class='comment'>#=&gt; [:dog, :cat]
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="kill-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>exit</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>kill</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>terminate</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#exit-instance_method" title="Thread#exit (method)">#exit</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="pending_interrupt?-instance_method">
  <h3 class='signature'>
  #<strong>target_thread.pending_interrupt?</strong>(error = nil)  &#x21d2; <tt>true/false</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns whether or not the asychronous queue is empty for the target
thread.</p>

<p>If <code>error</code> is given, then check only for <code>error</code> type
deferred events.</p>

<p>See <a href="#pending_interrupt%3F-class_method" title="Thread.pending_interrupt? (method)">pending_interrupt?</a> for more information.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="priority-instance_method">
  <h3 class='signature'>
  #<strong>priority</strong>  &#x21d2; <tt><a href="Integer.html" title="Integer (class)">Integer</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the priority of <em>thr</em>. Default is inherited from the current
thread which creating the new thread, or zero for the initial main thread;
higher-priority thread will run more frequently than lower-priority threads
(but lower-priority threads can also run).</p>

<p>This is just hint for Ruby thread scheduler.  It may be ignored on some
platform.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span>   <span class='comment'>#=&gt; 0
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="priority=-instance_method">
  <h3 class='signature'>
  #<strong>priority=</strong>(integer)  &#x21d2; <tt>thr</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the priority of <em>thr</em> to <em>integer</em>. Higher-priority
threads will run more frequently than lower-priority threads (but
lower-priority threads can also run).</p>

<p>This is just hint for Ruby thread scheduler.  It may be ignored on some
platform.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_count1'>count1</span> <span class='op'>=</span> <span class='id identifier rubyid_count2'>count2</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_loop'>loop</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_count1'>count1</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>

<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_loop'>loop</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_count2'>count2</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
<span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>2</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span>   <span class='comment'>#=&gt; 1
</span><span class='id identifier rubyid_count1'>count1</span>    <span class='comment'>#=&gt; 622504
</span><span class='id identifier rubyid_count2'>count2</span>    <span class='comment'>#=&gt; 5832
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="raise-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>raise</strong>  </span>
    <span class='overload'>#<strong>raise</strong>(string)  </span>
    <span class='overload'>#<strong>raise</strong>(exception[, string [, array]])  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Raises an exception (see <a href="Kernel.html#raise-class_method" title="Kernel.raise (method)">Kernel.raise</a>) from <em>thr</em>. The caller does
not have to be <em>thr</em>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_abort_on_exception'>abort_on_exception</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>200</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Gotcha</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby">prog.rb:3: Gotcha (RuntimeError)
    from prog.rb:2:in `initialize&#39;
    from prog.rb:2:in `new&#39;
    from prog.rb:2</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="run-instance_method">
  <h3 class='signature'>
  #<strong>run</strong>  &#x21d2; <tt>thr</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Wakes up <em>thr</em>, making it eligible for scheduling.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span><span class='semicolon'>;</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.1</span> <span class='kw'>while</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='op'>!=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sleep</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Got here</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span>
<span class='const'>Got</span> <span class='id identifier rubyid_here'>here</span>
<span class='id identifier rubyid_c'>c</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="safe_level-instance_method">
  <h3 class='signature'>
  #<strong>safe_level</strong>  &#x21d2; <tt><a href="Integer.html" title="Integer (class)">Integer</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the safe level in effect for <em>thr</em>. Setting thread-local
safe levels can help when implementing sandboxes which run insecure code.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_thr'>thr</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='gvar'>$SAFE</span> <span class='op'>=</span> <span class='int'>3</span><span class='semicolon'>;</span> <span class='id identifier rubyid_sleep'>sleep</span> <span class='rbrace'>}</span>
<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_safe_level'>safe_level</span>   <span class='comment'>#=&gt; 0
</span><span class='id identifier rubyid_thr'>thr</span><span class='period'>.</span><span class='id identifier rubyid_safe_level'>safe_level</span>              <span class='comment'>#=&gt; 3
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="set_trace_func-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>set_trace_func</strong>(proc)  &#x21d2; <tt><a href="Proc.html" title="Proc (class)">Proc</a></tt> </span>
    <span class='overload'>#<strong>set_trace_func</strong>(nil)  &#x21d2; <tt>nil</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Establishes <em>proc</em> on <em>thr</em> as the handler for tracing, or
disables tracing if the parameter is <code>nil</code>. See
<code>set_trace_func</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="status-instance_method">
  <h3 class='signature'>
  #<strong>status</strong>  &#x21d2; <tt><a href="String.html" title="String (class)">String</a></tt>, ... 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the status of <em>thr</em>: “<code>sleep</code>&#39;&#39; if
<em>thr</em> is sleeping or waiting on I/O, “<code>run</code>&#39;&#39; if
<em>thr</em> is executing, “<code>aborting</code>&#39;&#39; if <em>thr</em>
is aborting, <code>false</code> if <em>thr</em> terminated normally, and
<code>nil</code> if <em>thr</em> terminated with an exception.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>die now</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_exit'>exit</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_sleep'>sleep</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>                  <span class='comment'>#=&gt; #&lt;Thread:0x401b3678 aborting&gt;
</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>                <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>                <span class='comment'>#=&gt; &quot;sleep&quot;
</span><span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>                <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>                <span class='comment'>#=&gt; &quot;aborting&quot;
</span><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>   <span class='comment'>#=&gt; &quot;run&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="stop?-instance_method">
  <h3 class='signature'>
  #<strong>stop?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if <em>thr</em> is dead or sleeping.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_stop?'>stop?</span>   <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_stop?'>stop?</span>   <span class='comment'>#=&gt; false
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="terminate-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>exit</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>kill</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>terminate</strong>  &#x21d2; <tt>thr</tt><sup>?</sup> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#exit-instance_method" title="Thread#exit (method)">#exit</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="thread_variable?-instance_method">
  <h3 class='signature'>
  #<strong>thread_variable?</strong>(key)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the given string (or symbol) exists as a
thread-local variable.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_me'>me</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
<span class='id identifier rubyid_me'>me</span><span class='period'>.</span><span class='id identifier rubyid_thread_variable_set'>thread_variable_set</span><span class='lparen'>(</span><span class='symbol'>:oliver</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_me'>me</span><span class='period'>.</span><span class='id identifier rubyid_thread_variable?'>thread_variable?</span><span class='lparen'>(</span><span class='symbol'>:oliver</span><span class='rparen'>)</span>    <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_me'>me</span><span class='period'>.</span><span class='id identifier rubyid_thread_variable?'>thread_variable?</span><span class='lparen'>(</span><span class='symbol'>:stanley</span><span class='rparen'>)</span>   <span class='comment'>#=&gt; false
</span></code></pre>

<p>Note that these are not fiber local variables.  Please see <a href="#%5B%5D-instance_method" title="Thread#[] (method)">#[]</a> and
<a href="#thread_variable_get-instance_method" title="Thread#thread_variable_get (method)">#thread_variable_get</a> for more details.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="thread_variable_get-instance_method">
  <h3 class='signature'>
  #<strong>thread_variable_get</strong>(key)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the value of a thread local variable that has been set.  Note that
these are different than fiber local values.  For fiber local values,
please see <a href="#%5B%5D-instance_method" title="Thread#[] (method)">#[]</a> and <a href="#%5B%5D%3D-instance_method" title="Thread#[]= (method)">#[]=</a>.</p>

<p>Thread local values are carried along with threads, and do not respect
fibers.  For example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_thread_variable_set'>thread_variable_set</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># set a thread local
</span>  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span>                    <span class='comment'># set a fiber local
</span>
  <span class='const'>Fiber</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span>
    <span class='const'>Fiber</span><span class='period'>.</span><span class='id identifier rubyid_yield'>yield</span> <span class='lbracket'>[</span>
      <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_thread_variable_get'>thread_variable_get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='comment'># get the thread local
</span>      <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>                     <span class='comment'># get the fiber local
</span>    <span class='rbracket'>]</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_resume'>resume</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='comment'># =&gt; [&#39;bar&#39;, nil]
</span></code></pre>

<p>The value “bar” is returned for the thread local, where nil is returned for
the fiber local.  The fiber is executed in the same thread, so the thread
local values are available.</p>

<p>See also <a href="#%5B%5D-instance_method" title="Thread#[] (method)">#[]</a></p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="thread_variable_set-instance_method">
  <h3 class='signature'>
  #<strong>thread_variable_set</strong>(key, value)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets a thread local with <code>key</code> to <code>value</code>.  Note that
these are local to threads, and not to fibers.  Please see
<a href="#thread_variable_get-instance_method" title="Thread#thread_variable_get (method)">#thread_variable_get</a> and <a href="#%5B%5D-instance_method" title="Thread#[] (method)">#[]</a> for more information.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="thread_variables-instance_method">
  <h3 class='signature'>
  #<strong>thread_variables</strong>  &#x21d2; <tt><a href="Array.html" title="Array (class)">Array</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an an array of the names of the thread-local variables (as
Symbols).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_thr'>thr</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_thread_variable_set'>thread_variable_set</span><span class='lparen'>(</span><span class='symbol'>:cat</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>meow</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_thread_variable_set'>thread_variable_set</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dog</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>woof</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_thr'>thr</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>               <span class='comment'>#=&gt; #&lt;Thread:0x401b3f10 dead&gt;
</span><span class='id identifier rubyid_thr'>thr</span><span class='period'>.</span><span class='id identifier rubyid_thread_variables'>thread_variables</span>   <span class='comment'>#=&gt; [:dog, :cat]
</span></code></pre>

<p>Note that these are not fiber local variables.  Please see <a href="#%5B%5D-instance_method" title="Thread#[] (method)">#[]</a> and
<a href="#thread_variable_get-instance_method" title="Thread#thread_variable_get (method)">#thread_variable_get</a> for more details.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="value-instance_method">
  <h3 class='signature'>
  #<strong>value</strong>  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Waits for <em>thr</em> to complete (via <a href="#join-instance_method" title="Thread#join (method)">#join</a>) and returns its
value.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='int'>2</span> <span class='op'>+</span> <span class='int'>2</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>   <span class='comment'>#=&gt; 4
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="wakeup-instance_method">
  <h3 class='signature'>
  #<strong>wakeup</strong>  &#x21d2; <tt>thr</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Marks <em>thr</em> as eligible for scheduling (it may still remain blocked
on I/O, however). Does not invoke the scheduler (see <a href="#run-instance_method" title="Thread#run (method)">#run</a>).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span><span class='semicolon'>;</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hey!</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.1</span> <span class='kw'>while</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='op'>!=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sleep</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_wakeup'>wakeup</span>
<span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_hey!'>hey!</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.0 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>