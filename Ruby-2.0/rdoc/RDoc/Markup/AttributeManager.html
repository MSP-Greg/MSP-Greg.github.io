<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: RDoc::Markup::AttributeManager &mdash; rdoc Ruby-2.0.0 p648</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "RDoc::Markup::AttributeManager",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Ruby-2.0.0</a> &raquo; 
          <a href='../../index.html'>rdoc</a> &raquo; 
          <a href='../../_index.html'>Index (A)</a> &raquo; 
          <a href="../../RDoc.html" title="RDoc (module)">RDoc</a> &raquo; 
          <a href="../Markup.html" title="RDoc::Markup (class)">Markup</a> &raquo; 
          <span class='title'>AttributeManager</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: RDoc::Markup::AttributeManager</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>RDoc::Markup::AttributeManager</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>





  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L4'>lib/rdoc/markup/attribute_manager.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Manages changes of attributes in a block of text</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='A_PROTECT-constant'>
      A_PROTECT =
    </dt>
    <dd>
            <pre class='code'><span class='int'>004</span></pre>
    </dd>
    <dt id='NULL-constant'>
      NULL =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>The NUL character</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\000</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre>
    </dd>
    <dt id='PROTECT_ATTR-constant'>
      PROTECT_ATTR =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Special mask character to prevent inline markup handling</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='const'><a href="#A_PROTECT-constant" title="RDoc::Markup::AttributeManager::A_PROTECT (constant)">A_PROTECT</a></span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span></pre>
    </dd>
  </dl>



<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#attributes-instance_method" title="#attributes (instance method)">#<strong>attributes</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The attributes enabled for this markup object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#html_tags-instance_method" title="#html_tags (instance method)">#<strong>html_tags</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>This maps HTML tags to the corresponding attribute char</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#matching_word_pairs-instance_method" title="#matching_word_pairs (instance method)">#<strong>matching_word_pairs</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>This maps delimiters that occur around words (such as <strong>bold</strong>
or <code>tt</code>) where the start and end delimiters and the same.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#protectable-instance_method" title="#protectable (instance method)">#<strong>protectable</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>A \ in front of a character that would normally be processed turns off
processing.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#special-instance_method" title="#special (instance method)">#<strong>special</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>And this maps <em>special</em> sequences to a name.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#word_pair_map-instance_method" title="#word_pair_map (instance method)">#<strong>word_pair_map</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>And this is used when the delimiters aren&#39;t the same.</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>  &#x21d2; AttributeManager </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new attribute manager that understands bold, emphasized and
teletype text.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#add_html-instance_method" title="#add_html (instance method)">#<strong>add_html</strong>(tag, name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds a markup class with <code>name</code> for words surrounded by HTML tag
<code>tag</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#add_special-instance_method" title="#add_special (instance method)">#<strong>add_special</strong>(pattern, name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds a special handler for <code>pattern</code> with <code>name</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#add_word_pair-instance_method" title="#add_word_pair (instance method)">#<strong>add_word_pair</strong>(start, stop, name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds a markup class with <code>name</code> for words wrapped in the
<code>start</code> and <code>stop</code> character.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#attribute-instance_method" title="#attribute (instance method)">#<strong>attribute</strong>(turn_on, turn_off)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Return an attribute object with the given turn_on and turn_off bits set</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#change_attribute-instance_method" title="#change_attribute (instance method)">#<strong>change_attribute</strong>(current, new)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Changes the current attribute from <code>current</code> to <code>new</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#changed_attribute_by_name-instance_method" title="#changed_attribute_by_name (instance method)">#<strong>changed_attribute_by_name</strong>(current_set, new_set)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Used by the tests to change attributes by name from
<code>current_set</code> to <code>new_set</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#convert_attrs-instance_method" title="#convert_attrs (instance method)">#<strong>convert_attrs</strong>(str, attrs)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Map attributes like <strong>text</strong>to the sequence
001002&lt;char&gt;001003&lt;char&gt;, where &lt;char&gt; is a per-attribute
specific character</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#convert_html-instance_method" title="#convert_html (instance method)">#<strong>convert_html</strong>(str, attrs)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Converts HTML tags to RDoc attributes</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#convert_specials-instance_method" title="#convert_specials (instance method)">#<strong>convert_specials</strong>(str, attrs)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Converts special sequences to RDoc attributes</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#copy_string-instance_method" title="#copy_string (instance method)">#<strong>copy_string</strong>(start_pos, end_pos)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Copies <code>start_pos</code> to <code>end_pos</code> from the current
string</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#display_attributes-instance_method" title="#display_attributes (instance method)">#<strong>display_attributes</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Debug method that prints a string along with its attributes</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#flow-instance_method" title="#flow (instance method)">#<strong>flow</strong>(str)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Processes <code>str</code> converting attributes, HTML and specials</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mask_protected_sequences-instance_method" title="#mask_protected_sequences (instance method)">#<strong>mask_protected_sequences</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Escapes special sequences of text to prevent conversion to RDoc</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#split_into_flow-instance_method" title="#split_into_flow (instance method)">#<strong>split_into_flow</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Splits the string into chunks by attribute change</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unmask_protected_sequences-instance_method" title="#unmask_protected_sequences (instance method)">#<strong>unmask_protected_sequences</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Unescapes special sequences of text</p>
</div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>  &#x21d2; <tt><a href="" title="RDoc::Markup::AttributeManager (class)">AttributeManager</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new attribute manager that understands bold, emphasized and
teletype text.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L64'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 64</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='ivar'>@html_tags</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@matching_word_pairs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@protectable</span> <span class='op'>=</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>&lt;</span><span class='words_sep'>]</span>
  <span class='ivar'>@special</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@word_pair_map</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='const'><a href="../RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>Attributes</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='id identifier rubyid_add_word_pair'>add_word_pair</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:BOLD</span>
  <span class='id identifier rubyid_add_word_pair'>add_word_pair</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:EM</span>
  <span class='id identifier rubyid_add_word_pair'>add_word_pair</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:TT</span>

  <span class='id identifier rubyid_add_html'>add_html</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>em</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:EM</span>
  <span class='id identifier rubyid_add_html'>add_html</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>i</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='symbol'>:EM</span>
  <span class='id identifier rubyid_add_html'>add_html</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='symbol'>:BOLD</span>
  <span class='id identifier rubyid_add_html'>add_html</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>   <span class='symbol'>:TT</span>
  <span class='id identifier rubyid_add_html'>add_html</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>code</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:TT</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="attributes-instance_method">
  <h3 class='signature first'>
  #<strong>attributes</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The attributes enabled for this markup object.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L28'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


28</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 28</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:attributes</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="html_tags-instance_method">
  <h3 class='signature'>
  #<strong>html_tags</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>This maps HTML tags to the corresponding attribute char</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L46'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


46</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 46</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:html_tags</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="matching_word_pairs-instance_method">
  <h3 class='signature'>
  #<strong>matching_word_pairs</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>This maps delimiters that occur around words (such as <strong>bold</strong>
or <code>tt</code>) where the start and end delimiters and the same. This
lets us optimize the regexp</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L35'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


35</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 35</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:matching_word_pairs</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="protectable-instance_method">
  <h3 class='signature'>
  #<strong>protectable</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>A \ in front of a character that would normally be processed turns off
processing. We do this by turning &lt; into &lt;#<code>PROTECT</code></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L52'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


52</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 52</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:protectable</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="special-instance_method">
  <h3 class='signature'>
  #<strong>special</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>And this maps <em>special</em> sequences to a name. A special sequence is
something like a WikiWord</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L58'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


58</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 58</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:special</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="word_pair_map-instance_method">
  <h3 class='signature'>
  #<strong>word_pair_map</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>And this is used when the delimiters aren&#39;t the same. In this case the
hash maps a pattern to the attribute character</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L41'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


41</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 41</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:word_pair_map</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="add_html-instance_method">
  <h3 class='signature first'>
  #<strong>add_html</strong>(tag, name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds a markup class with <code>name</code> for words surrounded by HTML tag
<code>tag</code>. To process emphasis tags:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_am'>am</span><span class='period'>.</span><span class='id identifier rubyid_add_html'>add_html</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>em</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:EM</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L229'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


229
230
231</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 229</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_html'>add_html</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='ivar'>@html_tags</span><span class='lbracket'>[</span><span class='id identifier rubyid_tag'>tag</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_bitmap_for'>bitmap_for</span> <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="add_special-instance_method">
  <h3 class='signature'>
  #<strong>add_special</strong>(pattern, name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds a special handler for <code>pattern</code> with <code>name</code>.  A
simple URL handler would be:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@am</span><span class='period'>.</span><span class='id identifier rubyid_add_special'>add_special</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>((https?:)\S+\w)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='symbol'>:HYPERLINK</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L239'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


239
240
241</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 239</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_special'>add_special</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@special</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_bitmap_for'>bitmap_for</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="add_word_pair-instance_method">
  <h3 class='signature'>
  #<strong>add_word_pair</strong>(start, stop, name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds a markup class with <code>name</code> for words wrapped in the
<code>start</code> and <code>stop</code> character.  To make words wrapped
with “*” bold:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_am'>am</span><span class='period'>.</span><span class='id identifier rubyid_add_word_pair'>add_word_pair</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>*</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>*</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:BOLD</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>ArgumentError</tt>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L206'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 206</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_word_pair'>add_word_pair</span><span class='lparen'>(</span><span class='id identifier rubyid_start'>start</span><span class='comma'>,</span> <span class='id identifier rubyid_stop'>stop</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Word flags may not start with &#39;&lt;&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span>
    <span class='id identifier rubyid_start'>start</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_bitmap'>bitmap</span> <span class='op'>=</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_bitmap_for'>bitmap_for</span> <span class='id identifier rubyid_name'>name</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>==</span> <span class='id identifier rubyid_stop'>stop</span> <span class='kw'>then</span>
    <span class='ivar'>@matching_word_pairs</span><span class='lbracket'>[</span><span class='id identifier rubyid_start'>start</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_bitmap'>bitmap</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span> <span class='id identifier rubyid_start'>start</span><span class='embexpr_end'>}</span><span class='tstring_content'>)(\S+)(</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span> <span class='id identifier rubyid_stop'>stop</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='regexp_end'>/</span></span>
    <span class='ivar'>@word_pair_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_pattern'>pattern</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_bitmap'>bitmap</span>
  <span class='kw'>end</span>

  <span class='ivar'>@protectable</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_start'>start</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='ivar'>@protectable</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="attribute-instance_method">
  <h3 class='signature'>
  #<strong>attribute</strong>(turn_on, turn_off)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return an attribute object with the given turn_on and turn_off bits set</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L86'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


86
87
88</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 86</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_turn_on'>turn_on</span><span class='comma'>,</span> <span class='id identifier rubyid_turn_off'>turn_off</span><span class='rparen'>)</span>
  <span class='const'><a href="../RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>AttrChanger</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_turn_on'>turn_on</span><span class='comma'>,</span> <span class='id identifier rubyid_turn_off'>turn_off</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="change_attribute-instance_method">
  <h3 class='signature'>
  #<strong>change_attribute</strong>(current, new)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Changes the current attribute from <code>current</code> to <code>new</code></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L93'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


93
94
95
96</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 93</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_change_attribute'>change_attribute</span> <span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_diff'>diff</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span> <span class='op'>^</span> <span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_attribute'>attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_new'>new</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_current'>current</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_diff'>diff</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="changed_attribute_by_name-instance_method">
  <h3 class='signature'>
  #<strong>changed_attribute_by_name</strong>(current_set, new_set)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Used by the tests to change attributes by name from
<code>current_set</code> to <code>new_set</code></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L102'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


102
103
104
105
106
107
108
109
110
111
112
113</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 102</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_changed_attribute_by_name'>changed_attribute_by_name</span> <span class='id identifier rubyid_current_set'>current_set</span><span class='comma'>,</span> <span class='id identifier rubyid_new_set'>new_set</span>
  <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_new'>new</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_current_set'>current_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>|=</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_bitmap_for'>bitmap_for</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_new_set'>new_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
    <span class='id identifier rubyid_new'>new</span> <span class='op'>|=</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_bitmap_for'>bitmap_for</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_change_attribute'>change_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="convert_attrs-instance_method">
  <h3 class='signature'>
  #<strong>convert_attrs</strong>(str, attrs)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Map attributes like <strong>text</strong>to the sequence
001002&lt;char&gt;001003&lt;char&gt;, where &lt;char&gt; is a per-attribute
specific character</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L129'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 129</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_convert_attrs'>convert_attrs</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
  <span class='comment'># first do matching ones
</span>  <span class='id identifier rubyid_tags'>tags</span> <span class='op'>=</span> <span class='ivar'>@matching_word_pairs</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(^|\W)([</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tags'>tags</span><span class='embexpr_end'>}</span><span class='tstring_content'>])([#:\\]?[\w.\/-]+?\S?)\2(\W|$)</span><span class='regexp_end'>/</span></span>

  <span class='int'>1</span> <span class='kw'>while</span> <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='id identifier rubyid_re'>re</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_attr'>attr</span> <span class='op'>=</span> <span class='ivar'>@matching_word_pairs</span><span class='lbracket'>[</span><span class='backref'>$2</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_set_attrs'>set_attrs</span><span class='lparen'>(</span><span class='backref'>$`</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='backref'>$3</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span>
    <span class='backref'>$1</span> <span class='op'>+</span> <span class='const'><a href="#NULL-constant" title="RDoc::Markup::AttributeManager::NULL (constant)">NULL</a></span> <span class='op'>*</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='backref'>$3</span> <span class='op'>+</span> <span class='const'><a href="#NULL-constant" title="RDoc::Markup::AttributeManager::NULL (constant)">NULL</a></span> <span class='op'>*</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='backref'>$4</span>
  <span class='kw'>end</span>

  <span class='comment'># then non-matching
</span>  <span class='kw'>unless</span> <span class='ivar'>@word_pair_map</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='kw'>then</span>
    <span class='ivar'>@word_pair_map</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_regexp'>regexp</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='op'>|</span>
      <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='id identifier rubyid_regexp'>regexp</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
        <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_set_attrs'>set_attrs</span><span class='lparen'>(</span><span class='backref'>$`</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span>
        <span class='const'><a href="#NULL-constant" title="RDoc::Markup::AttributeManager::NULL (constant)">NULL</a></span> <span class='op'>*</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='backref'>$2</span> <span class='op'>+</span> <span class='const'><a href="#NULL-constant" title="RDoc::Markup::AttributeManager::NULL (constant)">NULL</a></span> <span class='op'>*</span> <span class='backref'>$3</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
      <span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="convert_html-instance_method">
  <h3 class='signature'>
  #<strong>convert_html</strong>(str, attrs)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Converts HTML tags to RDoc attributes</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L155'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


155
156
157
158
159
160
161
162
163
164
165</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 155</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_convert_html'>convert_html</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tags'>tags</span> <span class='op'>=</span> <span class='ivar'>@html_tags</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>|</span><span class='tstring_end'>&#39;</span></span>

  <span class='int'>1</span> <span class='kw'>while</span> <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tags'>tags</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&gt;(.*?)&lt;\/\1&gt;</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='id identifier rubyid_attr'>attr</span> <span class='op'>=</span> <span class='ivar'>@html_tags</span><span class='lbracket'>[</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_html_length'>html_length</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='int'>2</span>
    <span class='id identifier rubyid_seq'>seq</span> <span class='op'>=</span> <span class='const'><a href="#NULL-constant" title="RDoc::Markup::AttributeManager::NULL (constant)">NULL</a></span> <span class='op'>*</span> <span class='id identifier rubyid_html_length'>html_length</span>
    <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_set_attrs'>set_attrs</span><span class='lparen'>(</span><span class='backref'>$`</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='id identifier rubyid_html_length'>html_length</span><span class='comma'>,</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_seq'>seq</span> <span class='op'>+</span> <span class='backref'>$2</span> <span class='op'>+</span> <span class='id identifier rubyid_seq'>seq</span> <span class='op'>+</span> <span class='const'><a href="#NULL-constant" title="RDoc::Markup::AttributeManager::NULL (constant)">NULL</a></span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="convert_specials-instance_method">
  <h3 class='signature'>
  #<strong>convert_specials</strong>(str, attrs)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Converts special sequences to RDoc attributes</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L170'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


170
171
172
173
174
175
176
177
178
179
180</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 170</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_convert_specials'>convert_specials</span> <span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_attrs'>attrs</span>
  <span class='ivar'>@special</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_regexp'>regexp</span><span class='comma'>,</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='op'>|</span>
    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_regexp'>regexp</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_capture'>capture</span> <span class='op'>=</span> <span class='gvar'>$~</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='int'>1</span>

      <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='gvar'>$~</span><span class='period'>.</span><span class='id identifier rubyid_offset'>offset</span> <span class='id identifier rubyid_capture'>capture</span>

      <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_set_attrs'>set_attrs</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span> <span class='op'>-</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_attribute'>attribute</span> <span class='op'>|</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_special'>special</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="copy_string-instance_method">
  <h3 class='signature'>
  #<strong>copy_string</strong>(start_pos, end_pos)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Copies <code>start_pos</code> to <code>end_pos</code> from the current
string</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L118'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


118
119
120
121
122</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 118</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_copy_string'>copy_string</span><span class='lparen'>(</span><span class='id identifier rubyid_start_pos'>start_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_end_pos'>end_pos</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='ivar'>@str</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_pos'>start_pos</span><span class='op'>...</span><span class='id identifier rubyid_end_pos'>end_pos</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\000</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="display_attributes-instance_method">
  <h3 class='signature'>
  #<strong>display_attributes</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Debug method that prints a string along with its attributes</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L265'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 265</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_display_attributes'>display_attributes</span>
  <span class='id identifier rubyid_puts'>puts</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='ivar'>@str</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='const'><a href="#NULL-constant" title="RDoc::Markup::AttributeManager::NULL (constant)">NULL</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bit'>bit</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='int'>16</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bno'>bno</span><span class='op'>|</span>
    <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@str</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='lparen'>(</span><span class='ivar'>@attrs</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_bit'>bit</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_bno'>bno</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
          <span class='id identifier rubyid_line'>line</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>S</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_line'>line</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lparen'>(</span><span class='id identifier rubyid_bno'>bno</span><span class='op'>+</span><span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^ *$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='op'>&lt;&lt;=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="flow-instance_method">
  <h3 class='signature'>
  #<strong>flow</strong>(str)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Processes <code>str</code> converting attributes, HTML and specials</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L246'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


246
247
248
249
250
251
252
253
254
255
256
257
258
259
260</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 246</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_flow'>flow</span> <span class='id identifier rubyid_str'>str</span>
  <span class='ivar'>@str</span> <span class='op'>=</span> <span class='id identifier rubyid_str'>str</span>

  <span class='id identifier rubyid_mask_protected_sequences'>mask_protected_sequences</span>

  <span class='ivar'>@attrs</span> <span class='op'>=</span> <span class='const'><a href="../RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>AttrSpan</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='ivar'>@str</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>

  <span class='id identifier rubyid_convert_attrs'>convert_attrs</span>    <span class='ivar'>@str</span><span class='comma'>,</span> <span class='ivar'>@attrs</span>
  <span class='id identifier rubyid_convert_html'>convert_html</span>     <span class='ivar'>@str</span><span class='comma'>,</span> <span class='ivar'>@attrs</span>
  <span class='id identifier rubyid_convert_specials'>convert_specials</span> <span class='ivar'>@str</span><span class='comma'>,</span> <span class='ivar'>@attrs</span>

  <span class='id identifier rubyid_unmask_protected_sequences'>unmask_protected_sequences</span>

  <span class='id identifier rubyid_split_into_flow'>split_into_flow</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="mask_protected_sequences-instance_method">
  <h3 class='signature'>
  #<strong>mask_protected_sequences</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Escapes special sequences of text to prevent conversion to RDoc</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L185'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


185
186
187
188
189
190
191</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 185</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mask_protected_sequences'>mask_protected_sequences</span>
  <span class='comment'># protect __send__, __FILE__, etc.
</span>  <span class='ivar'>@str</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>__([a-z]+)__</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PROTECT_ATTR-constant" title="RDoc::Markup::AttributeManager::PROTECT_ATTR (constant)">PROTECT_ATTR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PROTECT_ATTR-constant" title="RDoc::Markup::AttributeManager::PROTECT_ATTR (constant)">PROTECT_ATTR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\1_</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PROTECT_ATTR-constant" title="RDoc::Markup::AttributeManager::PROTECT_ATTR (constant)">PROTECT_ATTR</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PROTECT_ATTR-constant" title="RDoc::Markup::AttributeManager::PROTECT_ATTR (constant)">PROTECT_ATTR</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@str</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\([</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span> <span class='ivar'>@protectable</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>])</span><span class='regexp_end'>/</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\1</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PROTECT_ATTR-constant" title="RDoc::Markup::AttributeManager::PROTECT_ATTR (constant)">PROTECT_ATTR</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="split_into_flow-instance_method">
  <h3 class='signature'>
  #<strong>split_into_flow</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Splits the string into chunks by attribute change</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L290'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 290</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_split_into_flow'>split_into_flow</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_current_attr'>current_attr</span> <span class='op'>=</span> <span class='int'>0</span>

  <span class='id identifier rubyid_str_len'>str_len</span> <span class='op'>=</span> <span class='ivar'>@str</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>

  <span class='comment'># skip leading invisible text
</span>  <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>while</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_str_len'>str_len</span> <span class='kw'>and</span> <span class='ivar'>@str</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_start_pos'>start_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span>

  <span class='comment'># then scan the string, chunking it on attribute changes
</span>  <span class='kw'>while</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_str_len'>str_len</span>
    <span class='id identifier rubyid_new_attr'>new_attr</span> <span class='op'>=</span> <span class='ivar'>@attrs</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_new_attr'>new_attr</span> <span class='op'>!=</span> <span class='id identifier rubyid_current_attr'>current_attr</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_start_pos'>start_pos</span>
        <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_copy_string'>copy_string</span><span class='lparen'>(</span><span class='id identifier rubyid_start_pos'>start_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_start_pos'>start_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_change_attribute'>change_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_current_attr'>current_attr</span><span class='comma'>,</span> <span class='id identifier rubyid_new_attr'>new_attr</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_current_attr'>current_attr</span> <span class='op'>=</span> <span class='id identifier rubyid_new_attr'>new_attr</span>

      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_current_attr'>current_attr</span> <span class='op'>&amp;</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_special'>special</span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='int'>0</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>while</span>
          <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_str_len'>str_len</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='ivar'>@attrs</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>&amp;</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id identifier rubyid_special'>special</span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='int'>0</span>

        <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="../RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>Special</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_current_attr'>current_attr</span><span class='comma'>,</span>
                                         <span class='id identifier rubyid_copy_string'>copy_string</span><span class='lparen'>(</span><span class='id identifier rubyid_start_pos'>start_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_start_pos'>start_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># move on, skipping any invisible characters
</span>    <span class='kw'>begin</span>
      <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span> <span class='kw'>while</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_str_len'>str_len</span> <span class='kw'>and</span> <span class='ivar'>@str</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># tidy up trailing text
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_start_pos'>start_pos</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_str_len'>str_len</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_copy_string'>copy_string</span><span class='lparen'>(</span><span class='id identifier rubyid_start_pos'>start_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_str_len'>str_len</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># and reset to all attributes off
</span>  <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_change_attribute'>change_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_current_attr'>current_attr</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_current_attr'>current_attr</span> <span class='op'>!=</span> <span class='int'>0</span>

  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="unmask_protected_sequences-instance_method">
  <h3 class='signature'>
  #<strong>unmask_protected_sequences</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Unescapes special sequences of text</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/rdoc/markup/attribute_manager.rb#L196'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


196
197
198</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/markup/attribute_manager.rb', line 196</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unmask_protected_sequences'>unmask_protected_sequences</span>
  <span class='ivar'>@str</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.)</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#PROTECT_ATTR-constant" title="RDoc::Markup::AttributeManager::PROTECT_ATTR (constant)">PROTECT_ATTR</a></span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\1\000</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>