<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Test::Unit::Runner &mdash; test Ruby-2.0.0 p648</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Test::Unit::Runner",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Ruby-2.0.0</a> &raquo; 
          <a href='../../index.html'>test</a> &raquo; 
          <a href='../../_index.html'>Index (R)</a> &raquo; 
          <a href="../../Test.html" title="Test (module)">Test</a> &raquo; 
          <a href="../Unit.html" title="Test::Unit (module)">Unit</a> &raquo; 
          <span class='title'>Runner</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Test::Unit::Runner</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>MiniTest::Unit</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>MiniTest::Unit</li>
        <li class='next'>Test::Unit::Runner</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <div class='box_max'>
        <a href="Runner/Worker.html" title="Test::Unit::Runner::Worker (class)">Worker</a>
      </div>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Includes:</td>
    <td>
      <div class='box_max'>
        <a href="GCStressOption.html" title="Test::Unit::GCStressOption (module)">GCStressOption</a>, <a href="GlobOption.html" title="Test::Unit::GlobOption (module)">GlobOption</a>, <a href="LoadPathOption.html" title="Test::Unit::LoadPathOption (module)">LoadPathOption</a>, <a href="Options.html" title="Test::Unit::Options (module)">Options</a>, <a href="RunCount.html" title="Test::Unit::RunCount (module)">RunCount</a>
      </div>
    </td>
  </tr>

  <tr>
    <td class='box_1'>Direct Subclasses:</td>
    <td>
      <a href="Worker.html" title="Test::Unit::Worker (class)">Worker</a>, <a href="AutoRunner/Runner.html" title="Test::Unit::AutoRunner::Runner (class)">AutoRunner::Runner</a>
    </td>
  </tr>


  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L255'>lib/test/unit.rb</a></div>  </td>
  </tr>
</table>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='stop_auto_run-classvariable'>
      @@stop_auto_run =
    </dt>
    <dd>
            <pre class='code'><span class='kw'>false</span></pre>
    </dd>
  </dl>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#autorun-class_method" title=".autorun (class method)">.<strong>autorun</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#_prepare_run-instance_method" title="#_prepare_run (instance method)">#<strong>_prepare_run</strong>(suites, type)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#_print-instance_method" title="#_print (instance method)">#<strong>_print</strong>(s)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#_run_parallel-instance_method" title="#_run_parallel (instance method)">#<strong>_run_parallel</strong>(suites, type, result)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#_run_suites-instance_method" title="#_run_suites (instance method)">#<strong>_run_suites</strong>(suites, type)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#add_status-instance_method" title="#add_status (instance method)">#<strong>add_status</strong>(line)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#after_worker_down-instance_method" title="#after_worker_down (instance method)">#<strong>after_worker_down</strong>(worker, e = nil, c = false)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#after_worker_quit-instance_method" title="#after_worker_quit (instance method)">#<strong>after_worker_quit</strong>(worker)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#deal-instance_method" title="#deal (instance method)">#<strong>deal</strong>(io, type, result, rep, shutting_down = false)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#del_jobs_status-instance_method" title="#del_jobs_status (instance method)">#<strong>del_jobs_status</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#del_status_line-instance_method" title="#del_status_line (instance method)">#<strong>del_status_line</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#delete_worker-instance_method" title="#delete_worker (instance method)">#<strong>delete_worker</strong>(worker)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#failed-instance_method" title="#failed (instance method)">#<strong>failed</strong>(s)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#jobs_status-instance_method" title="#jobs_status (instance method)">#<strong>jobs_status</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#launch_worker-instance_method" title="#launch_worker (instance method)">#<strong>launch_worker</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mini_run_suite-instance_method" title="#mini_run_suite (instance method)">#<strong>mini_run_suite</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new_test-instance_method" title="#new_test (instance method)">#<strong>new_test</strong>(s)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#output-instance_method" title="#output (instance method)">#<strong>output</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#puke-instance_method" title="#puke (instance method)">#<strong>puke</strong>(klass, meth, e)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Overriding of <code>MiniTest::Unit#puke</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#put_status-instance_method" title="#put_status (instance method)">#<strong>put_status</strong>(line)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#quit_workers-instance_method" title="#quit_workers (instance method)">#<strong>quit_workers</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(*args)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#start_watchdog-instance_method" title="#start_watchdog (instance method)">#<strong>start_watchdog</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>(*args)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#succeed-instance_method" title="#succeed (instance method)">#<strong>succeed</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#terminal_width-instance_method" title="#terminal_width (instance method)">#<strong>terminal_width</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#update_status-instance_method" title="#update_status (instance method)">#<strong>update_status</strong>(s)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="RunCount.html" title="Test::Unit::RunCount (module)">RunCount</a></h3>
  <p class="inherited"><a href="RunCount.html#have_run%3F-class_method" title="Test::Unit::RunCount.have_run? (method)">.have_run?</a>, <a href="RunCount.html#run_once-instance_method" title="Test::Unit::RunCount#run_once (method)">#run_once</a>, <a href="RunCount.html#run_once-class_method" title="Test::Unit::RunCount.run_once (method)">.run_once</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="GCStressOption.html" title="Test::Unit::GCStressOption (module)">GCStressOption</a></h3>
  <p class="inherited"><a href="GCStressOption.html#non_options-instance_method" title="Test::Unit::GCStressOption#non_options (method)">#non_options</a>, <a href="GCStressOption.html#setup_options-instance_method" title="Test::Unit::GCStressOption#setup_options (method)">#setup_options</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="LoadPathOption.html" title="Test::Unit::LoadPathOption (module)">LoadPathOption</a></h3>
  <p class="inherited"><a href="LoadPathOption.html#setup_options-instance_method" title="Test::Unit::LoadPathOption#setup_options (method)">#setup_options</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="GlobOption.html" title="Test::Unit::GlobOption (module)">GlobOption</a></h3>
  <p class="inherited"><a href="GlobOption.html#non_options-instance_method" title="Test::Unit::GlobOption#non_options (method)">#non_options</a>, <a href="GlobOption.html#setup_options-instance_method" title="Test::Unit::GlobOption#setup_options (method)">#setup_options</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="Options.html" title="Test::Unit::Options (module)">Options</a></h3>
  <p class="inherited"><a href="Options.html#initialize-instance_method" title="Test::Unit::Options#initialize (method)">#initialize</a>, <a href="Options.html#non_options-instance_method" title="Test::Unit::Options#non_options (method)">#non_options</a>, <a href="Options.html#option_parser-instance_method" title="Test::Unit::Options#option_parser (method)">#option_parser</a>, <a href="Options.html#process_args-instance_method" title="Test::Unit::Options#process_args (method)">#process_args</a>, <a href="Options.html#setup_options-instance_method" title="Test::Unit::Options#setup_options (method)">#setup_options</a></p>

  <h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="autorun-class_method">
  <h3 class='signature first'>
  .<strong>autorun</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L363'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


363
364
365
366
367
368
369
370</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 363</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_autorun'>autorun</span>
  <span class='id identifier rubyid_at_exit'>at_exit</span> <span class='lbrace'>{</span>
    <span class='const'><a href="../../Test.html" title="Test (module)">Test</a></span><span class='op'>::</span><span class='const'><a href="../Unit.html" title="Test::Unit (module)">Unit</a></span><span class='op'>::</span><span class='const'><a href="RunCount.html" title="Test::Unit::RunCount (module)">RunCount</a></span><span class='period'>.</span><span class='id identifier rubyid_run_once'><a href="RunCount.html#run_once-class_method" title="Test::Unit::RunCount.run_once (method)">run_once</a></span> <span class='lbrace'>{</span>
      <span class='id identifier rubyid_exit'>exit</span><span class='lparen'>(</span><span class='const'><a href="../../Test.html" title="Test (module)">Test</a></span><span class='op'>::</span><span class='const'><a href="../Unit.html" title="Test::Unit (module)">Unit</a></span><span class='op'>::</span><span class='const'><a href="" title="Test::Unit::Runner (class)">Runner</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Test::Unit::Runner.new (method)">new</a></span><span class='period'>.</span><span class='id identifier rubyid_run'><a href="#run-instance_method" title="Test::Unit::Runner#run (method)">run</a></span><span class='lparen'>(</span><span class='const'>ARGV</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='cvar'>@@stop_auto_run</span>
  <span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='cvar'>@@installed_at_exit</span>
  <span class='cvar'>@@installed_at_exit</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="_prepare_run-instance_method">
  <h3 class='signature first'>
  #<strong>_prepare_run</strong>(suites, type)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L676'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 676</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__prepare_run'>_prepare_run</span><span class='lparen'>(</span><span class='id identifier rubyid_suites'>suites</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='symbol'>:replace</span> <span class='kw'>if</span> <span class='ivar'>@tty</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@verbose</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:color</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:always</span>
    <span class='id identifier rubyid_color'>color</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='symbol'>:auto</span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_color'>color</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span> <span class='op'>&amp;&amp;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>dumb</span><span class='regexp_end'>/</span></span> <span class='op'>!~</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TERM</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_color'>color</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_color'>color</span>
    <span class='comment'># dircolors-like style
</span>    <span class='id identifier rubyid_colors'>colors</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_colors'>colors</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TEST_COLORS</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_colors'>colors</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\w+)=([^:]*)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@passed_color</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\e[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colors'>colors</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pass</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>32</span><span class='tstring_end'>&quot;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@failed_color</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\e[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colors'>colors</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fail</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>31</span><span class='tstring_end'>&quot;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@skipped_color</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\e[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colors'>colors</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>skip</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>33</span><span class='tstring_end'>&quot;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@reset_color</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\e[m</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='ivar'>@passed_color</span> <span class='op'>=</span> <span class='ivar'>@failed_color</span> <span class='op'>=</span> <span class='ivar'>@skipped_color</span> <span class='op'>=</span> <span class='ivar'>@reset_color</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_color'>color</span> <span class='kw'>or</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span>
    <span class='ivar'>@verbose</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:parallel</span><span class='rbracket'>]</span>
    <span class='ivar'>@output</span> <span class='op'>=</span> <span class='const'><a href="StatusLineOutput.html" title="Test::Unit::StatusLineOutput (class)">StatusLineOutput</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A\/(.*)\/\z</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='lparen'>(</span><span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:filter</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>_methods</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_filter'>filter</span>
            <span class='id identifier rubyid_suites'>suites</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> <span class='id identifier rubyid_suite'>suite</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>+</span> <span class='id identifier rubyid_suite'>suite</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_grep'>grep</span><span class='lparen'>(</span><span class='id identifier rubyid_filter'>filter</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rbrace'>}</span>
          <span class='kw'>else</span>
            <span class='id identifier rubyid_suites'>suites</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> <span class='id identifier rubyid_suite'>suite</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>+</span> <span class='id identifier rubyid_suite'>suite</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rbrace'>}</span>
          <span class='kw'>end</span>
  <span class='ivar'>@test_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_tests</span> <span class='op'>=</span> <span class='id identifier rubyid_total'>total</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="_print-instance_method">
  <h3 class='signature'>
  #<strong>_print</strong>(s)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L723'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


723</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 723</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__print'>_print</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="_run_parallel-instance_method">
  <h3 class='signature'>
  #<strong>_run_parallel</strong>(suites, type, result)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L564'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 564</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__run_parallel'>_run_parallel</span> <span class='id identifier rubyid_suites'>suites</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:parallel</span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error: parameter of -j option should be greater than 0.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='comment'># Require needed things for parallel running
</span>  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>thread</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>timeout</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@tasks</span> <span class='op'>=</span> <span class='ivar'>@files</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='comment'># Array of filenames.
</span>  <span class='ivar'>@need_quit</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@dead_workers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>  <span class='comment'># Array of dead workers.
</span>  <span class='ivar'>@warnings</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@total_tests</span> <span class='op'>=</span> <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rep'>rep</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># FIXME: more good naming
</span>
  <span class='ivar'>@workers</span>      <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># Array of workers.
</span>  <span class='ivar'>@workers_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='comment'># out-IO =&gt; worker
</span>  <span class='ivar'>@ios</span>          <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># Array of worker IOs
</span>  <span class='kw'>begin</span>
    <span class='comment'># Thread: watchdog
</span>    <span class='id identifier rubyid_watchdog'>watchdog</span> <span class='op'>=</span> <span class='id identifier rubyid_start_watchdog'>start_watchdog</span>

    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:parallel</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span><span class='id identifier rubyid_launch_worker'>launch_worker</span><span class='rbrace'>}</span>

    <span class='kw'>while</span> <span class='id identifier rubyid__io'>_io</span> <span class='op'>=</span> <span class='const'>IO</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='ivar'>@ios</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid__io'>_io</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='ivar'>@need_quit</span> <span class='kw'>or</span>
          <span class='lparen'>(</span><span class='id identifier rubyid_deal'>deal</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_rep'>rep</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>and</span>
           <span class='op'>!</span><span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='symbol'>:running</span><span class='comma'>,</span> <span class='symbol'>:prepare</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Interrupt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
    <span class='ivar'>@interrupt</span> <span class='op'>=</span> <span class='id identifier rubyid_ex'>ex</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_watchdog'>watchdog</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span> <span class='kw'>if</span> <span class='id identifier rubyid_watchdog'>watchdog</span>
    <span class='kw'>if</span> <span class='ivar'>@interrupt</span>
      <span class='ivar'>@ios</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='ivar'>@workers_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='symbol'>:running</span> <span class='rbrace'>}</span>
      <span class='kw'>while</span> <span class='op'>!</span><span class='ivar'>@ios</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid___io'>__io</span> <span class='op'>=</span> <span class='const'>IO</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='ivar'>@ios</span><span class='comma'>,</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='int'>10</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid___io'>__io</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span> <span class='id identifier rubyid_deal'>deal</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_rep'>rep</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_quit_workers'>quit_workers</span>

    <span class='kw'>unless</span> <span class='ivar'>@interrupt</span> <span class='op'>||</span> <span class='op'>!</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:retry</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@need_quit</span>
      <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:parallel</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_suites'>suites</span><span class='comma'>,</span> <span class='id identifier rubyid_rep'>rep</span> <span class='op'>=</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_partition'>partition</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='symbol'>:testcase</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='symbol'>:report</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_e'>e</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>MiniTest</span><span class='op'>::</span><span class='const'>Skip</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_suites'>suites</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_require'>require</span> <span class='id identifier rubyid_file'>file</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_suites'>suites</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>::</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='symbol'>:testcase</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_del_status_line'>del_status_line</span> <span class='kw'>or</span> <span class='id identifier rubyid_puts'>puts</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_suites'>suites</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Retrying...</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid__run_suites'>_run_suites</span><span class='lparen'>(</span><span class='id identifier rubyid_suites'>suites</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:retry</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_del_status_line'>del_status_line</span> <span class='kw'>or</span> <span class='id identifier rubyid_puts'>puts</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span>
        <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='symbol'>:report</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
          <span class='id identifier rubyid_puke'>puke</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_f'>f</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:retry</span><span class='rbracket'>]</span>
        <span class='ivar'>@errors</span>   <span class='op'>+=</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:result</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='symbol'>:+</span><span class='rparen'>)</span>
        <span class='ivar'>@failures</span> <span class='op'>+=</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:result</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='symbol'>:+</span><span class='rparen'>)</span>
        <span class='ivar'>@skips</span>    <span class='op'>+=</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:result</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='symbol'>:+</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='ivar'>@warnings</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@warnings</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span> <span class='id identifier rubyid_w'>w</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rbrace'>}</span>
      <span class='ivar'>@warnings</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span>
        <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="_run_suites-instance_method">
  <h3 class='signature'>
  #<strong>_run_suites</strong>(suites, type)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L647'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 647</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid__run_suites'>_run_suites</span> <span class='id identifier rubyid_suites'>suites</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span>
  <span class='id identifier rubyid__prepare_run'>_prepare_run</span><span class='lparen'>(</span><span class='id identifier rubyid_suites'>suites</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='ivar'>@interrupt</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='const'>GC</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>
  <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:parallel</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid__run_parallel'>_run_parallel</span> <span class='id identifier rubyid_suites'>suites</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_suites'>suites</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_suite'>suite</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid__run_suite'>_run_suite</span><span class='lparen'>(</span><span class='id identifier rubyid_suite'>suite</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span> <span class='const'>Interrupt</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='ivar'>@interrupt</span> <span class='op'>=</span> <span class='id identifier rubyid_e'>e</span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_report'>report</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Skipped:</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:hide_skip</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_report'>report</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Skipped:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> \
                     <span class='lparen'>(</span><span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failure:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="add_status-instance_method">
  <h3 class='signature'>
  #<strong>add_status</strong>(line)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L425'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


425
426
427
428
429
430
431
432
433
434
435</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 425</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_status'>add_status</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span>
    <span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='ivar'>@status_line_size</span> <span class='op'>||=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>...</span><span class='lparen'>(</span><span class='id identifier rubyid_terminal_width'>terminal_width</span><span class='op'>-</span><span class='ivar'>@status_line_size</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_line'>line</span>
  <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
  <span class='ivar'>@status_line_size</span> <span class='op'>+=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="after_worker_down-instance_method">
  <h3 class='signature'>
  #<strong>after_worker_down</strong>(worker, e = nil, c = false)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L372'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


372
373
374
375
376
377
378
379
380
381
382
383
384</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 372</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after_worker_down'>after_worker_down</span><span class='lparen'>(</span><span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:parallel</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@interrupt</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='id identifier rubyid_e'>e</span> <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span>
  <span class='ivar'>@need_quit</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Some worker was crashed. It seems ruby interpreter&#39;s bug</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>or, a bug of test/unit/parallel.rb. try again without -j</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>option.</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
  <span class='id identifier rubyid_exit'>exit</span> <span class='id identifier rubyid_c'>c</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="after_worker_quit-instance_method">
  <h3 class='signature'>
  #<strong>after_worker_quit</strong>(worker)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L449'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


449
450
451
452
453
454
455</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 449</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after_worker_quit'>after_worker_quit</span><span class='lparen'>(</span><span class='id identifier rubyid_worker'>worker</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:parallel</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@interrupt</span>
  <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_worker'>worker</span><span class='rparen'>)</span>
  <span class='ivar'>@dead_workers</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_worker'>worker</span>
  <span class='ivar'>@ios</span> <span class='op'>=</span> <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:io</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="deal-instance_method">
  <h3 class='signature'>
  #<strong>deal</strong>(io, type, result, rep, shutting_down = false)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L521'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 521</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deal'>deal</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_rep'>rep</span><span class='comma'>,</span> <span class='id identifier rubyid_shutting_down'>shutting_down</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_worker'>worker</span> <span class='op'>=</span> <span class='ivar'>@workers_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_io'>io</span><span class='rbracket'>]</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^okay$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='symbol'>:running</span>
    <span class='id identifier rubyid_jobs_status'>jobs_status</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^ready(!)?$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_bang'>bang</span> <span class='op'>=</span> <span class='backref'>$1</span>
    <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='symbol'>:ready</span>

    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
    <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:separate</span><span class='rbracket'>]</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_bang'>bang</span>
      <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_quit'>quit</span>
      <span class='id identifier rubyid_worker'>worker</span> <span class='op'>=</span> <span class='id identifier rubyid_add_worker'>add_worker</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
    <span class='ivar'>@test_count</span> <span class='op'>+=</span> <span class='int'>1</span>

    <span class='id identifier rubyid_jobs_status'>jobs_status</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^done (.+?)$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='const'>Marshal</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='lbracket'>[</span><span class='kw'>nil</span><span class='comma'>,</span><span class='kw'>nil</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_rep'>rep</span>    <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='label'>file:</span> <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_real_file'>real_file</span><span class='comma'>,</span> <span class='label'>report:</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>result:</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>testcase:</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
    <span class='gvar'>$:</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^p (.+?)$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_del_jobs_status'>del_jobs_status</span>
    <span class='id identifier rubyid_print'>print</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_jobs_status'>jobs_status</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^after (.+?)$</span><span class='regexp_end'>/</span></span>
    <span class='ivar'>@warnings</span> <span class='op'>&lt;&lt;</span> <span class='const'>Marshal</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^bye (.+?)$</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_after_worker_down'>after_worker_down</span> <span class='id identifier rubyid_worker'>worker</span><span class='comma'>,</span> <span class='const'>Marshal</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^bye$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_shutting_down'>shutting_down</span> <span class='op'>||</span> <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_quit_called'>quit_called</span>
      <span class='id identifier rubyid_after_worker_quit'>after_worker_quit</span> <span class='id identifier rubyid_worker'>worker</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_after_worker_down'>after_worker_down</span> <span class='id identifier rubyid_worker'>worker</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="del_jobs_status-instance_method">
  <h3 class='signature'>
  #<strong>del_jobs_status</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L444'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


444
445
446
447</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 444</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_del_jobs_status'>del_jobs_status</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@status_line_size</span><span class='period'>.</span><span class='id identifier rubyid_nonzero?'>nonzero?</span>
  <span class='id identifier rubyid_del_status_line'>del_status_line</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="del_status_line-instance_method">
  <h3 class='signature'>
  #<strong>del_status_line</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L400'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


400
401
402
403
404
405
406
407
408
409</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 400</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_del_status_line'>del_status_line</span>
  <span class='ivar'>@status_line_size</span> <span class='op'>||=</span> <span class='int'>0</span>
  <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span>
    <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r</span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='op'>*</span><span class='ivar'>@status_line_size</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r</span><span class='tstring_end'>&quot;</span></span>
  <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
  <span class='ivar'>@status_line_size</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="delete_worker-instance_method">
  <h3 class='signature'>
  #<strong>delete_worker</strong>(worker)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L473'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


473
474
475
476
477</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 473</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_worker'>delete_worker</span><span class='lparen'>(</span><span class='id identifier rubyid_worker'>worker</span><span class='rparen'>)</span>
  <span class='ivar'>@workers_hash</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span>
  <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_worker'>worker</span>
  <span class='ivar'>@ios</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="failed-instance_method">
  <h3 class='signature'>
  #<strong>failed</strong>(s)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L726'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 726</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_failed'>failed</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sep'>sep</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@report_count</span> <span class='op'>||=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_report'>report</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_msg'>msg</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Skipped:</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:hide_skip</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_del_status_line'>del_status_line</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_color'>color</span> <span class='op'>=</span> <span class='ivar'>@skipped_color</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_color'>color</span> <span class='op'>=</span> <span class='ivar'>@failed_color</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span>
    <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_printf'>printf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s%s%3d) %s%s%s\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='id identifier rubyid_sep'>sep</span><span class='comma'>,</span> <span class='id identifier rubyid_color'>color</span><span class='comma'>,</span> <span class='ivar'>@report_count</span> <span class='op'>+=</span> <span class='int'>1</span><span class='comma'>,</span>
                   <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@reset_color</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sep'>sep</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_report'>report</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="jobs_status-instance_method">
  <h3 class='signature'>
  #<strong>jobs_status</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L437'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


437
438
439
440
441
442</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 437</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_jobs_status'>jobs_status</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='kw'>or</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span>
  <span class='id identifier rubyid_status_line'>status_line</span> <span class='op'>=</span> <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_update_status'>update_status</span><span class='lparen'>(</span><span class='id identifier rubyid_status_line'>status_line</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='id identifier rubyid_puts'>puts</span><span class='semicolon'>;</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="launch_worker-instance_method">
  <h3 class='signature'>
  #<strong>launch_worker</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L457'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


457
458
459
460
461
462
463
464
465
466
467
468
469
470
471</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 457</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_launch_worker'>launch_worker</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_worker'>worker</span> <span class='op'>=</span> <span class='const'><a href="Runner/Worker.html" title="Test::Unit::Runner::Worker (class)">Worker</a></span><span class='period'>.</span><span class='id identifier rubyid_launch'><a href="Runner/Worker.html#launch-class_method" title="Test::Unit::Runner::Worker.launch (method)">launch</a></span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:ruby</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='ivar'>@args</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_abort'>abort</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: Failed to launch job process - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_hook'>hook</span><span class='lparen'>(</span><span class='symbol'>:dead</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='comma'>,</span><span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
    <span class='id identifier rubyid_after_worker_quit'>after_worker_quit</span> <span class='id identifier rubyid_w'>w</span>
    <span class='id identifier rubyid_after_worker_down'>after_worker_down</span> <span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_info'>info</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_quit_called'>quit_called</span>
  <span class='kw'>end</span>
  <span class='ivar'>@workers</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_worker'>worker</span>
  <span class='ivar'>@ios</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span>
  <span class='ivar'>@workers_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_io'>io</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_worker'>worker</span>
  <span class='id identifier rubyid_worker'>worker</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="mini_run_suite-instance_method">
  <h3 class='signature'>
  #<strong>mini_run_suite</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L670'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


670</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 670</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_mini_run_suite'>mini_run_suite</span> <span class='id identifier rubyid__run_suite'>_run_suite</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="new_test-instance_method">
  <h3 class='signature'>
  #<strong>new_test</strong>(s)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L713'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


713
714
715
716</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 713</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new_test'>new_test</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='ivar'>@test_count</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_update_status'>update_status</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="output-instance_method">
  <h3 class='signature'>
  #<strong>output</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L672'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


672
673
674</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 672</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_output'>output</span>
  <span class='lparen'>(</span><span class='ivar'>@output</span> <span class='op'>||=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="puke-instance_method">
  <h3 class='signature'>
  #<strong>puke</strong>(klass, meth, e)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Overriding of <code>MiniTest::Unit#puke</code></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L749'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


749
750
751
752
753
754
755
756
757
758
759
760</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 749</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_puke'>puke</span> <span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_meth'>meth</span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span>
  <span class='comment'># TODO:
</span>  <span class='comment'>#   this overriding is for minitest feature that skip messages are
</span>  <span class='comment'>#   hidden when not verbose (-v), note this is temporally.
</span>  <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='id identifier rubyid_report'>report</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='id identifier rubyid_rep'>rep</span> <span class='op'>=</span> <span class='kw'>super</span>
  <span class='kw'>if</span> <span class='const'>MiniTest</span><span class='op'>::</span><span class='const'>Skip</span> <span class='op'>===</span> <span class='id identifier rubyid_e'>e</span> <span class='kw'>and</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>no message given\z</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
    <span class='id identifier rubyid_report'>report</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rep'>rep</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_rep'>rep</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="put_status-instance_method">
  <h3 class='signature'>
  #<strong>put_status</strong>(line)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L411'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


411
412
413
414
415
416
417
418
419
420
421
422
423</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 411</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_put_status'>put_status</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:job_status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:replace</span>
    <span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='ivar'>@status_line_size</span> <span class='op'>||=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_del_status_line'>del_status_line</span>
  <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
  <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_terminal_width'>terminal_width</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_line'>line</span>
  <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
  <span class='ivar'>@status_line_size</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="quit_workers-instance_method">
  <h3 class='signature'>
  #<strong>quit_workers</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L479'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 479</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quit_workers'>quit_workers</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_worker'>worker</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_timeout'>timeout</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_quit'>quit</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EPIPE</span>
    <span class='kw'>rescue</span> <span class='const'>Timeout</span><span class='op'>::</span><span class='const'>Error</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_timeout'>timeout</span><span class='lparen'>(</span><span class='float'>0.2</span> <span class='op'>*</span> <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_waitall'>waitall</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Timeout</span><span class='op'>::</span><span class='const'>Error</span>
    <span class='ivar'>@workers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_worker'>worker</span><span class='op'>|</span>
      <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
    <span class='kw'>end</span>
    <span class='ivar'>@worker</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="run-instance_method">
  <h3 class='signature'>
  #<strong>run</strong>(*args)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L773'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


773
774
775
776
777</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 773</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>super</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nruby -v: </span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_DESCRIPTION</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="start_watchdog-instance_method">
  <h3 class='signature'>
  #<strong>start_watchdog</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L505'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


505
506
507
508
509
510
511
512
513
514
515
516
517
518
519</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 505</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_watchdog'>start_watchdog</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_stat'>stat</span> <span class='op'>=</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_wait2'>wait2</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='ivar'>@interrupt</span> <span class='comment'># Break when interrupt
</span>      <span class='id identifier rubyid_pid'>pid</span><span class='comma'>,</span> <span class='id identifier rubyid_stat'>stat</span> <span class='op'>=</span> <span class='id identifier rubyid_stat'>stat</span>
      <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='ivar'>@workers</span> <span class='op'>+</span> <span class='ivar'>@dead_workers</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_pid'>pid</span> <span class='op'>==</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_pid'>pid</span> <span class='rbrace'>}</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_w'>w</span>
      <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>!=</span> <span class='symbol'>:quit</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_quit_called?'>quit_called?</span>
        <span class='comment'># Worker down
</span>        <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_died'>died</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>!</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_signaled?'>signaled?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_exitstatus'>exitstatus</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="status-instance_method">
  <h3 class='signature'>
  #<strong>status</strong>(*args)  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt>@interrupt</tt>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L767'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


767
768
769
770
771</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 767</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>super</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='ivar'>@interrupt</span> <span class='kw'>if</span> <span class='ivar'>@interrupt</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="succeed-instance_method">
  <h3 class='signature'>
  #<strong>succeed</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L724'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


724</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 724</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_succeed'>succeed</span><span class='semicolon'>;</span> <span class='id identifier rubyid_del_status_line'>del_status_line</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="terminal_width-instance_method">
  <h3 class='signature'>
  #<strong>terminal_width</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L386'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


386
387
388
389
390
391
392
393
394
395
396
397
398</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 386</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_terminal_width'>terminal_width</span>
  <span class='kw'>unless</span> <span class='ivar'>@terminal_width</span> <span class='op'>||=</span> <span class='kw'>nil</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>io/console</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='gvar'>$stdout</span><span class='period'>.</span><span class='id identifier rubyid_winsize'>winsize</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>rescue</span> <span class='const'>LoadError</span><span class='comma'>,</span> <span class='const'>NoMethodError</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTTY</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EBADF</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EINVAL</span>
      <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>COLUMNS</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='period'>.</span><span class='id identifier rubyid_nonzero?'>nonzero?</span> <span class='op'>||</span> <span class='int'>80</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_width'>width</span> <span class='op'>-=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>mswin|mingw</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='const'>RUBY_PLATFORM</span>
    <span class='ivar'>@terminal_width</span> <span class='op'>=</span> <span class='id identifier rubyid_width'>width</span>
  <span class='kw'>end</span>
  <span class='ivar'>@terminal_width</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="update_status-instance_method">
  <h3 class='signature'>
  #<strong>update_status</strong>(s)  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/test/unit.rb#L718'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


718
719
720
721</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/test/unit.rb', line 718</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_update_status'>update_status</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='ivar'>@test_count</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rjust'>rjust</span><span class='lparen'>(</span><span class='ivar'>@total_tests</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_put_status'>put_status</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@passed_color</span><span class='embexpr_end'>}</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_tests</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='embexpr_beg'>#{</span><span class='ivar'>@reset_color</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>