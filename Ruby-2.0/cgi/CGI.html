<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: CGI &mdash; cgi Ruby-2.0.0 p247</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "CGI",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.0.0</a> &raquo; 
          <a href='index.html'>cgi</a> &raquo; 
          <a href='_index.html'>Index (C)</a> &raquo; 
          <span class='title'>CGI</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: CGI</h1>

<div class="box_info">
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class='inheritName'>Object</span>
        <ul class='fullTree'>
          <li>Object</li>
            <li class='next'>CGI</li>
        </ul>
        <a href='#' class='inheritanceTree'>show all</a>
    </dd>
  </dl>



  <dl>
    <dt>Defined in:</dt>
    <dd>cgi.rb<span class='defines'>,<br />
  cgi/cookie.rb,<br /> cgi/core.rb,<br /> cgi/html.rb,<br /> cgi/session.rb,<br /> cgi/util.rb,<br /> cgi/session/pstore.rb</span>
</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The Common Gateway Interface (CGI) is a simple protocol for passing an HTTP
request from a web server to a standalone program, and returning the output
to the web browser.  Basically, a CGI program is called with the parameters
of the request passed in either in the environment (GET) or via $stdin
(POST), and everything it prints to $stdout is returned to the client.</p>

<p>This file holds the CGI class.  This class provides functionality for
retrieving HTTP request parameters, managing cookies, and generating HTML
output.</p>

<p>The file <a href="CGI/Session.html" title="CGI::Session (class)">Session</a> provides session management functionality; see that
class for more details.</p>

<p>See <a href="http://www.w3.org/CGI">www.w3.org/CGI</a>/ for more
information on the CGI protocol.</p>

<h3 id="label-Introduction">Introduction</h3>

<p>CGI is a large class, providing several categories of methods, many of
which are mixed in from other modules.  Some of the documentation is in
this class, some in the modules <a href="CGI/QueryExtension.html" title="CGI::QueryExtension (module)">QueryExtension</a> and
<a href="CGI/HtmlExtension.html" title="CGI::HtmlExtension (module)">HtmlExtension</a>.  See <a href="CGI/Cookie.html" title="CGI::Cookie (class)">Cookie</a> for specific information on
handling cookies, and cgi/session.rb (CGI::Session) for information on
sessions.</p>

<p>For queries, CGI provides methods to get at environmental variables,
parameters, cookies, and multipart request data.  For responses, CGI
provides methods for writing output and generating HTML.</p>

<p>Read on for more details.  Examples are provided at the bottom.</p>

<h3 id="label-Queries">Queries</h3>

<p>The CGI class dynamically mixes in parameter and cookie-parsing
functionality,  environmental variable access, and support for parsing
multipart requests (including uploaded files) from the
<a href="CGI/QueryExtension.html" title="CGI::QueryExtension (module)">QueryExtension</a> module.</p>

<h4 id="label-Environmental+Variables">Environmental Variables</h4>

<p>The standard CGI environmental variables are available as read-only
attributes of a CGI object.  The following is a list of these variables:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>AUTH_TYPE</span>               <span class='const'>HTTP_HOST</span>          <span class='const'>REMOTE_IDENT</span>
<span class='const'>CONTENT_LENGTH</span>          <span class='const'>HTTP_NEGOTIATE</span>     <span class='const'>REMOTE_USER</span>
<span class='const'>CONTENT_TYPE</span>            <span class='const'>HTTP_PRAGMA</span>        <span class='const'>REQUEST_METHOD</span>
<span class='const'>GATEWAY_INTERFACE</span>       <span class='const'>HTTP_REFERER</span>       <span class='const'>SCRIPT_NAME</span>
<span class='const'>HTTP_ACCEPT</span>             <span class='const'>HTTP_USER_AGENT</span>    <span class='const'>SERVER_NAME</span>
<span class='const'>HTTP_ACCEPT_CHARSET</span>     <span class='const'>PATH_INFO</span>          <span class='const'>SERVER_PORT</span>
<span class='const'>HTTP_ACCEPT_ENCODING</span>    <span class='const'>PATH_TRANSLATED</span>    <span class='const'>SERVER_PROTOCOL</span>
<span class='const'>HTTP_ACCEPT_LANGUAGE</span>    <span class='const'>QUERY_STRING</span>       <span class='const'>SERVER_SOFTWARE</span>
<span class='const'>HTTP_CACHE_CONTROL</span>      <span class='const'>REMOTE_ADDR</span>
<span class='const'>HTTP_FROM</span>               <span class='const'>REMOTE_HOST</span>
</code></pre>

<p>For each of these variables, there is a corresponding attribute with the
same name, except all lower case and without a preceding HTTP_.
<code>content_length</code> and <code>server_port</code> are integers; the
rest are strings.</p>

<h4 id="label-Parameters">Parameters</h4>

<p>The method <code>#params</code>() returns a hash of all parameters in the request as
name/value-list pairs, where the value-list is an Array of one or more
values.  The CGI object itself also behaves as a hash of parameter names to
values, but only returns a single value (as a String) for each parameter
name.</p>

<p>For instance, suppose the request contains the parameter
“favourite_colours” with the multiple values “blue” and “green”.  The
following behaviour would occur:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>favourite_colours</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>  <span class='comment'># =&gt; [&quot;blue&quot;, &quot;green&quot;]
</span><span class='id identifier rubyid_cgi'>cgi</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>favourite_colours</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>         <span class='comment'># =&gt; &quot;blue&quot;
</span></code></pre>

<p>If a parameter does not exist, the former method will return an empty
array, the latter an empty string.  The simplest way to test for existence
of a parameter is by the <code>#has_key?</code> method.</p>

<h4 id="label-Cookies">Cookies</h4>

<p>HTTP Cookies are automatically parsed from the request.  They are available
from the <code>#cookies</code>() accessor, which returns a hash from cookie name to
<a href="CGI/Cookie.html" title="CGI::Cookie (class)">Cookie</a> object.</p>

<h4 id="label-Multipart+requests">Multipart requests</h4>

<p>If a request&#39;s method is POST and its content type is
multipart/form-data, then it may contain uploaded files.  These are stored
by the QueryExtension module in the parameters of the request.  The
parameter name is the name attribute of the file input field, as usual. 
However, the value is not a string, but an IO object, either an IOString
for small files, or a Tempfile for larger ones.  This object also has the
additional singleton methods:</p>
<dl class="rdoc-list note-list"><dt><code>#local_path</code>()
<dd>
<p>the path of the uploaded file on the local filesystem</p>
</dd><dt><code>#original_filename</code>()
<dd>
<p>the name of the file on the client computer</p>
</dd><dt><code>#content_type</code>()
<dd>
<p>the content type of the file</p>
</dd></dl>

<h3 id="label-Responses">Responses</h3>

<p>The CGI class provides methods for sending header and content output to the
HTTP client, and mixes in methods for programmatic HTML generation from
<a href="CGI/HtmlExtension.html" title="CGI::HtmlExtension (module)">HtmlExtension</a> and <a href="CGI/TagMaker.html" title="CGI::TagMaker (module)">TagMaker</a> modules.  The precise version of
HTML to use for HTML generation is specified at object creation time.</p>

<h4 id="label-Writing+output">Writing output</h4>

<p>The simplest way to send output to the HTTP client is using the <a href="#out-instance_method" title="CGI#out (method)">#out</a>()
method. This takes the HTTP headers as a hash parameter, and the body
content via a block.  The headers can be generated as a string using the
<a href="#http_header-instance_method" title="CGI#http_header (method)">#http_header</a>() method.  The output stream can be written directly to
using the <a href="#print-instance_method" title="CGI#print (method)">#print</a>() method.</p>

<h4 id="label-Generating+HTML">Generating HTML</h4>

<p>Each HTML element has a corresponding method for generating that element as
a String.  The name of this method is the same as that of the element, all
lowercase.  The attributes of the element are passed in as a hash, and the
body as a no-argument block that evaluates to a String.  The HTML
generation module knows which elements are always empty, and silently drops
any passed-in body.  It also knows which elements require matching closing
tags and which don&#39;t.  However, it does not know what attributes are
legal for which elements.</p>

<p>There are also some additional HTML generation methods mixed in from the
<a href="CGI/HtmlExtension.html" title="CGI::HtmlExtension (module)">HtmlExtension</a> module.  These include individual methods for the
different types of form inputs, and methods for elements that commonly take
particular attributes where the attributes can be directly specified as
arguments, rather than via a hash.</p>

<h3 id="label-Examples+of+use">Examples of use</h3>

<h4 id="label-Get+form+values">Get form values</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cgi</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>field_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>   <span class='comment'># &lt;== value string for &#39;field_name&#39;
</span>  <span class='comment'># if not &#39;field_name&#39; included, then return &quot;&quot;.
</span><span class='id identifier rubyid_fields'>fields</span> <span class='op'>=</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>            <span class='comment'># &lt;== array of field names
</span>
<span class='comment'># returns true if form has &#39;field_name&#39;
</span><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>field_name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>field_name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>field_name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>CAUTION! <a href="'field_name'">cgi</a> returned an Array with the old
cgi.rb(included in ruby 1.6)</p>

<h4 id="label-Get+form+values+as+hash">Get form values as hash</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cgi</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span>
</code></pre>

<p>cgi.params is a hash.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>new_field_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>value</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>  <span class='comment'># add new param
</span><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>field_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new_value</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>  <span class='comment'># change value
</span><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>field_name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>           <span class='comment'># delete param
</span><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>                          <span class='comment'># delete all params
</span></code></pre>

<h4 id="label-Save+form+values+to+file">Save form values to file</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pstore</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_db'>db</span> <span class='op'>=</span> <span class='const'>PStore</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>query.db</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>params</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span>
<span class='kw'>end</span>
</code></pre>

<h4 id="label-Restore+form+values+from+file">Restore form values from file</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pstore</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_db'>db</span> <span class='op'>=</span> <span class='const'>PStore</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>query.db</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>params</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</code></pre>

<h4 id="label-Get+multipart+form+values">Get multipart form values</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cgi</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>field_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>   <span class='comment'># &lt;== value string for &#39;field_name&#39;
</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>                  <span class='comment'># &lt;== body of value
</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_local_path'>local_path</span>            <span class='comment'># &lt;== path to local file of value
</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_original_filename'>original_filename</span>     <span class='comment'># &lt;== original filename of value
</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_content_type'>content_type</span>          <span class='comment'># &lt;== content_type of value
</span></code></pre>

<p>and value has StringIO or Tempfile class methods.</p>

<h4 id="label-Get+cookie+values">Get cookie values</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cgi</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>  <span class='comment'># &lt;== array of &#39;name&#39;
</span>  <span class='comment'># if not &#39;name&#39; included, then return [].
</span><span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>      <span class='comment'># &lt;== array of cookie names
</span></code></pre>

<p>and cgi.cookies is a hash.</p>

<h4 id="label-Get+cookie+objects">Get cookie objects</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cgi</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='kw'>for</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_cookie'>cookie</span> <span class='kw'>in</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span>
  <span class='id identifier rubyid_cookie'>cookie</span><span class='period'>.</span><span class='id identifier rubyid_expires'>expires</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='int'>30</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cookie</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>

<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span> <span class='comment'># { &quot;name1&quot; =&gt; cookie1, &quot;name2&quot; =&gt; cookie2, ... }
</span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cgi</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_expires'>expires</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='int'>30</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cookie</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
</code></pre>

<h4 id="label-Print+http+header+and+html+string+to+-24DEFAULT_OUTPUT+-28-24-3E-29">Print http header and html string to $DEFAULT_OUTPUT ($&gt;)</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cgi</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># add HTML generation methods
</span><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_head'>head</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TITLE</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='kw'>end</span> <span class='op'>+</span>
    <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_form'>form</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ACTION</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uri</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_p'>p</span> <span class='kw'>do</span>
          <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_textarea'>textarea</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_text</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span>
          <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_br'>br</span> <span class='op'>+</span>
          <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_submit'>submit</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span> <span class='op'>+</span>
      <span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_pre'>pre</span> <span class='kw'>do</span>
        <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>params: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cookies: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
          <span class='const'>ENV</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> --&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># add HTML generation methods
</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>    <span class='comment'># html3.2
</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>    <span class='comment'># html4.01 (Strict)
</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Tr</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># html4.01 Transitional
</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Fr</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># html4.01 Frameset
</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html5</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>    <span class='comment'># html5
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>
<h2>Defined Under Namespace</h2>

  <p class='children'><strong class='modules'>Modules:</strong>
    <a href="CGI/Html3.html" title="CGI::Html3 (module)">Html3</a>,
    <a href="CGI/Html4.html" title="CGI::Html4 (module)">Html4</a>,
    <a href="CGI/Html4Fr.html" title="CGI::Html4Fr (module)">Html4Fr</a>,
    <a href="CGI/Html4Tr.html" title="CGI::Html4Tr (module)">Html4Tr</a>,
    <a href="CGI/Html5.html" title="CGI::Html5 (module)">Html5</a>,
    <a href="CGI/HtmlExtension.html" title="CGI::HtmlExtension (module)">HtmlExtension</a>,
    <a href="CGI/QueryExtension.html" title="CGI::QueryExtension (module)">QueryExtension</a>,
    <a href="CGI/TagMaker.html" title="CGI::TagMaker (module)">TagMaker</a>
  </p>
  <p class='children'><strong class='classes'>Classes:</strong>
    <a href="CGI/Cookie.html" title="CGI::Cookie (class)">Cookie</a>,
    <a href="CGI/Session.html" title="CGI::Session (class)">Session</a>
  </p>
  <p class='children'><strong class='exceptions'>Exceptions:</strong>
    <a href="CGI/InvalidEncoding.html" title="CGI::InvalidEncoding (class)">InvalidEncoding</a>
  </p>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='accept_charset-classvariable'>
      @@accept_charset =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>@@accept_charset is default accept character set. This default value
default is “UTF-8” If you want to change the default accept character set
when create a new CGI instance, set this:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_accept_charset'>accept_charset</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='CR-constant'>
      CR =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>String for carriage return</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\015</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='EOL-constant'>
      EOL =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Standard internet newline sequence</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='const'>CR</span> <span class='op'>+</span> <span class='const'>LF</span></pre>
    </dd>
    <dt id='HTTP_STATUS-constant'>
      HTTP_STATUS =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>HTTP status codes.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span>                  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200 OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PARTIAL_CONTENT</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>206 Partial Content</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MULTIPLE_CHOICES</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>300 Multiple Choices</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MOVED</span><span class='tstring_end'>&quot;</span></span>               <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>301 Moved Permanently</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>REDIRECT</span><span class='tstring_end'>&quot;</span></span>            <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>302 Found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_MODIFIED</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>304 Not Modified</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BAD_REQUEST</span><span class='tstring_end'>&quot;</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>400 Bad Request</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AUTH_REQUIRED</span><span class='tstring_end'>&quot;</span></span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>401 Authorization Required</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FORBIDDEN</span><span class='tstring_end'>&quot;</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>403 Forbidden</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_FOUND</span><span class='tstring_end'>&quot;</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Not Found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>METHOD_NOT_ALLOWED</span><span class='tstring_end'>&quot;</span></span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>405 Method Not Allowed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_ACCEPTABLE</span><span class='tstring_end'>&quot;</span></span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>406 Not Acceptable</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LENGTH_REQUIRED</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>411 Length Required</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PRECONDITION_FAILED</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>412 Precondition Failed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SERVER_ERROR</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>500 Internal Server Error</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_IMPLEMENTED</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>501 Method Not Implemented</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BAD_GATEWAY</span><span class='tstring_end'>&quot;</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>502 Bad Gateway</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VARIANT_ALSO_VARIES</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>506 Variant Also Negotiates</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span></pre>
    </dd>
    <dt id='LF-constant'>
      LF =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>String for linefeed</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\012</span><span class='tstring_end'>&quot;</span></span></pre>
    </dd>
    <dt id='MAX_MULTIPART_COUNT-constant'>
      MAX_MULTIPART_COUNT =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Maximum number of request parameters when multipart</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='int'>128</span></pre>
    </dd>
    <dt id='MAX_MULTIPART_LENGTH-constant'>
      MAX_MULTIPART_LENGTH =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Maximum content length of multipart data</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='int'>128</span> <span class='op'>*</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span></pre>
    </dd>
    <dt id='NEEDS_BINMODE-constant'>
      NEEDS_BINMODE =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Whether processing will be required in binary vs text</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='const'>File</span><span class='op'>::</span><span class='const'>BINARY</span> <span class='op'>!=</span> <span class='int'>0</span></pre>
    </dd>
    <dt id='PATH_SEPARATOR-constant'>
      PATH_SEPARATOR =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Path separators in different environments.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UNIX</span><span class='tstring_end'>&#39;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WINDOWS</span><span class='tstring_end'>&#39;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MACINTOSH</span><span class='tstring_end'>&#39;</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span></pre>
    </dd>
    <dt id='REVISION-constant'>
      REVISION =
    </dt>
    <dd>
            <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$Id: core.rb 37811 2012-11-22 17:42:06Z zzak $</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
    <dt id='RFC822_DAYS-constant'>
      RFC822_DAYS =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Abbreviated day-of-week names specified by RFC 822</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='qwords_beg'>%w[ </span><span class='tstring_content'>Sun</span><span class='words_sep'> </span><span class='tstring_content'>Mon</span><span class='words_sep'> </span><span class='tstring_content'>Tue</span><span class='words_sep'> </span><span class='tstring_content'>Wed</span><span class='words_sep'> </span><span class='tstring_content'>Thu</span><span class='words_sep'> </span><span class='tstring_content'>Fri</span><span class='words_sep'> </span><span class='tstring_content'>Sat</span><span class='words_sep'> ]</span></pre>
    </dd>
    <dt id='RFC822_MONTHS-constant'>
      RFC822_MONTHS =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Abbreviated month names specified by RFC 822</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='qwords_beg'>%w[ </span><span class='tstring_content'>Jan</span><span class='words_sep'> </span><span class='tstring_content'>Feb</span><span class='words_sep'> </span><span class='tstring_content'>Mar</span><span class='words_sep'> </span><span class='tstring_content'>Apr</span><span class='words_sep'> </span><span class='tstring_content'>May</span><span class='words_sep'> </span><span class='tstring_content'>Jun</span><span class='words_sep'> </span><span class='tstring_content'>Jul</span><span class='words_sep'> </span><span class='tstring_content'>Aug</span><span class='words_sep'> </span><span class='tstring_content'>Sep</span><span class='words_sep'> </span><span class='tstring_content'>Oct</span><span class='words_sep'> </span><span class='tstring_content'>Nov</span><span class='words_sep'> </span><span class='tstring_content'>Dec</span><span class='words_sep'> ]</span></pre>
    </dd>
    <dt id='TABLE_FOR_ESCAPE_HTML__-constant'>
      TABLE_FOR_ESCAPE_HTML__ =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>The set of special characters and their escaped values</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;lt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre>
    </dd>
  </dl>



<h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#accept_charset-instance_method" title="#accept_charset (instance method)">#<strong>accept_charset</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Return the accept character set for this CGI instance.</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#accept_charset-class_method" title=".accept_charset (class method)">.<strong>accept_charset</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Return the accept character set for all new CGI instances.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#accept_charset%3D-class_method" title=".accept_charset= (class method)">.<strong>accept_charset=</strong>(accept_charset)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Set the accept character set for all new CGI instances.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#escape-class_method" title=".escape (class method)">.<strong>escape</strong>(string)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>URL-encode a string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#escape_element-class_method" title=".escape_element (class method)">.<strong>escape_element</strong>(str)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Synonym for CGI::escapeElement(str)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#escape_html-class_method" title=".escape_html (class method)">.<strong>escape_html</strong>(str)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Synonym for CGI::escapeHTML(str)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#escapeElement-class_method" title=".escapeElement (class method)">.<strong>escapeElement</strong>(string, *elements)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Escape only the tags of certain HTML elements in <code>string</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#escapeHTML-class_method" title=".escapeHTML (class method)">.<strong>escapeHTML</strong>(string)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Escape special characters in HTML, namely &amp;&quot;&lt;&gt;</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Usage: foo &quot;bar&quot; &lt;baz&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;&quot;
</span></code></pre>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(options = {}, &amp;block)  &#x21d2; CGI </a>
      </span>
      <span class='note title constructor'>constructor</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Create a new CGI instance.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#parse-class_method" title=".parse (class method)">.<strong>parse</strong>(query)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Parse an HTTP query string into a hash of key=&gt;value pairs.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pretty-class_method" title=".pretty (class method)">.<strong>pretty</strong>(string, shift = &quot;  &quot;)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Prettify (indent) an HTML string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#rfc1123_date-class_method" title=".rfc1123_date (class method)">.<strong>rfc1123_date</strong>(time)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Format a <code>Time</code> object as a String using the format specified by RFC 1123.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unescape-class_method" title=".unescape (class method)">.<strong>unescape</strong>(string, encoding = @@accept_charset)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>URL-decode a string with encoding(optional).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unescape_element-class_method" title=".unescape_element (class method)">.<strong>unescape_element</strong>(str)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Synonym for CGI::unescapeElement(str)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unescape_html-class_method" title=".unescape_html (class method)">.<strong>unescape_html</strong>(str)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Synonym for CGI::unescapeHTML(str)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unescapeElement-class_method" title=".unescapeElement (class method)">.<strong>unescapeElement</strong>(string, *elements)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Undo escaping such as that done by CGI::escapeElement()</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unescapeHTML-class_method" title=".unescapeHTML (class method)">.<strong>unescapeHTML</strong>(string)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Unescape a string that has been HTML-escaped</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;Usage: foo \&quot;bar\&quot; &lt;baz&gt;&quot;
</span></code></pre>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#env_table-instance_method" title="#env_table (instance method)">#<strong>env_table</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Synonym for ENV.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#header-instance_method" title="#header (instance method)">#<strong>header</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Create an HTTP header block as a string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#http_header-instance_method" title="#http_header (instance method)">#<strong>http_header</strong>(options = &#39;text/html&#39;)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Create an HTTP header block as a string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#out-instance_method" title="#out (instance method)">#<strong>out</strong>(options = &quot;text/html&quot;)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Print an HTTP header and body to $DEFAULT_OUTPUT ($&gt;)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#print-instance_method" title="#print (instance method)">#<strong>print</strong>(*options)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Print an argument or list of arguments to the default output stream</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#stdinput-instance_method" title="#stdinput (instance method)">#<strong>stdinput</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Synonym for $stdin.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#stdoutput-instance_method" title="#stdoutput (instance method)">#<strong>stdoutput</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Synonym for $stdout.</p>
</div>
      </span>
    </li>
  </ul>

<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(options = {}, &amp;block)  &#x21d2; <tt><a href="" title="CGI (class)">CGI</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Create a new CGI instance.</p>

<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_tag_maker'>tag_maker</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_block'>block</span> <span class='rbrace'>}</span>
<span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_options_hash'>options_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_block'>block</span> <span class='rbrace'>}</span>
</code></pre>
<dl class="rdoc-list note-list"><dt><code>tag_maker</code>
<dd>
<p>This is the same as using the <code>options_hash</code> form with the value
<code>{ :tag_maker =&gt; tag_maker }</code> Note that it is recommended to
use the <code>options_hash</code> form, since it also allows you specify
the charset you will accept.</p>
</dd><dt><code>options_hash</code>
<dd>
<p>A Hash that recognizes two options:</p>
<dl class="rdoc-list note-list"><dt><code>:accept_charset</code>
<dd>
<p>specifies encoding of received query string.  If omitted,
<code>@@accept_charset</code> is used.  If the encoding is not valid, a
CGI::InvalidEncoding will be raised.</p>

<p>Example. Suppose <code>@@accept_charset</code> is “UTF-8”</p>

<p>when not specified:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>      <span class='comment'># @accept_charset # =&gt; &quot;UTF-8&quot;
</span></code></pre>

<p>when specified as “EUC-JP”:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:accept_charset</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; &quot;EUC-JP&quot;
</span></code></pre>
</dd><dt><code>:tag_maker</code>
<dd>
<p>String that specifies which version of the HTML generation methods to use. 
If not specified, no HTML generation methods will be loaded.</p>

<p>The following values are supported:</p>
<dl class="rdoc-list note-list"><dt>“html3”
<dd>
<p>HTML 3.x</p>
</dd><dt>“html4”
<dd>
<p>HTML 4.0</p>
</dd><dt>“html4Tr”
<dd>
<p>HTML 4.0 Transitional</p>
</dd><dt>“html4Fr”
<dd>
<p>HTML 4.0 with Framesets</p>
</dd><dt>“html5”
<dd>
<p>HTML 5</p>
</dd></dl>
</dd></dl>
</dd><dt><code>block</code>
<dd>
<p>If provided, the block is called when an invalid encoding is encountered.
For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_encoding_errors'>encoding_errors</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:accept_charset</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
  <span class='id identifier rubyid_encoding_errors'>encoding_errors</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</code></pre>
</dd></dl>

<p>Finally, if the CGI object is not created in a standard CGI call
environment (that is, it can&#39;t locate REQUEST_METHOD in its
environment), then it will run in “offline” mode.  In this mode, it reads
its parameters from the command line or (failing that) from standard input.
Otherwise, cookies and other parameters are parsed automatically from the
standard CGI locations, which varies according to the REQUEST_METHOD.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 810</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='comment'># :yields: name, value
</span>    <span class='ivar'>@accept_charset_error_block</span> <span class='op'>=</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>?</span> <span class='id identifier rubyid_block'>block</span> <span class='op'>:</span> <span class='kw'>nil</span>
    <span class='ivar'>@options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='symbol'>:accept_charset</span><span class='op'>=&gt;</span><span class='cvar'>@@accept_charset</span><span class='rbrace'>}</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_options'>options</span>
    <span class='kw'>when</span> <span class='const'>Hash</span>
      <span class='ivar'>@options</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>String</span>
      <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:tag_maker</span><span class='rbracket'>]</span><span class='op'>=</span><span class='id identifier rubyid_options'>options</span>
    <span class='kw'>end</span>
    <span class='ivar'>@accept_charset</span><span class='op'>=</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:accept_charset</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>MOD_RUBY</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ENV</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GATEWAY_INTERFACE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='const'>Apache</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_setup_cgi_env'>setup_cgi_env</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_extend'>extend</span> <span class='const'>QueryExtension</span>
    <span class='ivar'>@multipart</span> <span class='op'>=</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_initialize_query'>initialize_query</span><span class='lparen'>(</span><span class='rparen'>)</span>  <span class='comment'># set @params, @cookies
</span>    <span class='ivar'>@output_cookies</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@output_hidden</span> <span class='op'>=</span> <span class='kw'>nil</span>

    <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:tag_maker</span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html3</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>Html3</span>
      <span class='id identifier rubyid_element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>HtmlExtension</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>Html4</span>
      <span class='id identifier rubyid_element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>HtmlExtension</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Tr</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>Html4Tr</span>
      <span class='id identifier rubyid_element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>HtmlExtension</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Fr</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>Html4Tr</span>
      <span class='id identifier rubyid_element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>Html4Fr</span>
      <span class='id identifier rubyid_element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>HtmlExtension</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html5</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>Html5</span>
      <span class='id identifier rubyid_element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_extend'>extend</span> <span class='const'>HtmlExtension</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="accept_charset-instance_method">
  <h3 class='signature first'>
  #<strong>accept_charset</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return the accept character set for this CGI instance.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


751</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 751</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:accept_charset</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="accept_charset-class_method">
  <h3 class='signature first'>
  .<strong>accept_charset</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return the accept character set for all new CGI instances.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


741
742
743</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 741</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_accept_charset'>accept_charset</span>
    <span class='cvar'>@@accept_charset</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="accept_charset=-class_method">
  <h3 class='signature'>
  .<strong>accept_charset=</strong>(accept_charset)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Set the accept character set for all new CGI instances.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


746
747
748</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 746</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_accept_charset='>accept_charset=</span><span class='lparen'>(</span><span class='id identifier rubyid_accept_charset'>accept_charset</span><span class='rparen'>)</span>
    <span class='cvar'>@@accept_charset</span><span class='op'>=</span><span class='id identifier rubyid_accept_charset'>accept_charset</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="escape-class_method">
  <h3 class='signature'>
  .<strong>escape</strong>(string)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>URL-encode a string.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_url_encoded_string'>url_encoded_string</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;Stop!&#39; said Fred</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;%27Stop%21%27saidFred&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


6
7
8
9
10
11</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 6</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span>
    <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([^ a-zA-Z0-9_.-]+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H2</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="escape_element-class_method">
  <h3 class='signature'>
  .<strong>escape_element</strong>(str)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::escapeElement(str)</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


145
146
147</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 145</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape_element'>escape_element</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="escape_html-class_method">
  <h3 class='signature'>
  .<strong>escape_html</strong>(str)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::escapeHTML(str)</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


91
92
93</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 91</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escape_html'>escape_html</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="escapeElement-class_method">
  <h3 class='signature'>
  .<strong>escapeElement</strong>(string, *elements)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Escape only the tags of certain HTML elements in <code>string</code>.</p>

<p>Takes an element or elements or array of elements.  Each element is
specified by the name of the element, without angle brackets. This matches
both the start and the end tag of that element. The attribute list of the
open tag will also be escaped (for instance, the double-quotes surrounding
attribute values).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &quot;&lt;BR&gt;&amp;lt;A HREF=&amp;quot;url&amp;quot;&amp;gt;&amp;lt;/A&amp;gt&quot;
</span>
<span class='id identifier rubyid_print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='comment'># &quot;&lt;BR&gt;&amp;lt;A HREF=&amp;quot;url&amp;quot;&amp;gt;&amp;lt;/A&amp;gt&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


113
114
115
116
117
118
119
120
121
122</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 113</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_elements'>elements</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_elements'>elements</span> <span class='op'>=</span> <span class='id identifier rubyid_elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\/?(?:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)(?!\w)(?:.|\n)*?&gt;</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='backref'>$&amp;</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="escapeHTML-class_method">
  <h3 class='signature'>
  .<strong>escapeHTML</strong>(string)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Escape special characters in HTML, namely &amp;&quot;&lt;&gt;</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Usage: foo &quot;bar&quot; &lt;baz&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


35
36
37</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 35</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&#39;&amp;\&quot;&lt;&gt;]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='const'>TABLE_FOR_ESCAPE_HTML__</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="parse-class_method">
  <h3 class='signature'>
  .<strong>parse</strong>(query)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Parse an HTTP query string into a hash of key=&gt;value pairs.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>query_string</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># {&quot;name1&quot; =&gt; [&quot;value1&quot;, &quot;value2&quot;, ...],
</span>  <span class='comment'>#  &quot;name2&quot; =&gt; [&quot;value1&quot;, &quot;value2&quot;, ...], ... }
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


374
375
376
377
378
379
380
381
382
383
384
385
386
387</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 374</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&amp;;]</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pairs'>pairs</span><span class='op'>|</span>
      <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_pairs'>pairs</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>=</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescape'>unescape</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_key'>key</span>

      <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
    <span class='id identifier rubyid_params'>params</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="pretty-class_method">
  <h3 class='signature'>
  .<strong>pretty</strong>(string, shift = &quot;  &quot;)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Prettify (indent) an HTML string.</p>

<p><code>string</code> is the HTML string to indent.  <code>shift</code> is
the indentation unit to use; it defaults to two spaces.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_pretty'>pretty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &lt;HTML&gt;
</span>  <span class='comment'>#   &lt;BODY&gt;
</span>  <span class='comment'>#   &lt;/BODY&gt;
</span>  <span class='comment'># &lt;/HTML&gt;
</span>
<span class='id identifier rubyid_print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_pretty'>pretty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &lt;HTML&gt;
</span>  <span class='comment'>#         &lt;BODY&gt;
</span>  <span class='comment'>#         &lt;/BODY&gt;
</span>  <span class='comment'># &lt;/HTML&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


188
189
190
191
192
193
194
195
196
197</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 188</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_pretty'>pretty</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_shift'>shift</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_lines'>lines</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?!\A)&lt;.*?&gt;</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\\0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;.*?&gt;(?!\n)</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\0\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_end_pos'>end_pos</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_end_pos'>end_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^&lt;\/(\w+)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_end_pos'>end_pos</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_element'>element</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
      <span class='id identifier rubyid_start_pos'>start_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_rindex'>rindex</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_element'>element</span><span class='embexpr_end'>}</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='id identifier rubyid_end_pos'>end_pos</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_lines'>lines</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_pos'>start_pos</span> <span class='op'>...</span> <span class='id identifier rubyid_end_pos'>end_pos</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_lines'>lines</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_pos'>start_pos</span> <span class='op'>...</span> <span class='id identifier rubyid_end_pos'>end_pos</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n(?!\z)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_shift'>shift</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^((?:</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='op'>::</span><span class='id identifier rubyid_quote'>quote</span><span class='lparen'>(</span><span class='id identifier rubyid_shift'>shift</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)*)__(?=&lt;\/?\w)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="rfc1123_date-class_method">
  <h3 class='signature'>
  .<strong>rfc1123_date</strong>(time)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Format a <code>Time</code> object as a String using the format specified by RFC 1123.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_rfc1123_date'>rfc1123_date</span><span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span>
  <span class='comment'># Sat, 01 Jan 2000 00:00:00 GMT
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


164
165
166
167
168
169</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 164</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_rfc1123_date'>rfc1123_date</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span><span class='period'>.</span><span class='id identifier rubyid_gmtime'>gmtime</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s, %.2d %s %.4d %.2d:%.2d:%.2d GMT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='const'>RFC822_DAYS</span><span class='lbracket'>[</span><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='comma'>,</span> <span class='const'>RFC822_MONTHS</span><span class='lbracket'>[</span><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span>
                <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_hour'>hour</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_sec'>sec</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="unescape-class_method">
  <h3 class='signature'>
  .<strong>unescape</strong>(string, encoding = @@accept_charset)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>URL-decode a string with encoding(optional).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescape'>unescape</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%27Stop%21%27saidFred</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;&#39;Stop!&#39; said Fred&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


16
17
18
19
20
21</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 16</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescape'>unescape</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span><span class='id identifier rubyid_encoding'>encoding</span><span class='op'>=</span><span class='cvar'>@@accept_charset</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_str'>str</span><span class='op'>=</span><span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ASCII_8BIT</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>((?:%[0-9a-fA-F]{2})+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='lbracket'>[</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_valid_encoding?'>valid_encoding?</span> <span class='op'>?</span> <span class='id identifier rubyid_str'>str</span> <span class='op'>:</span> <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="unescape_element-class_method">
  <h3 class='signature'>
  .<strong>unescape_element</strong>(str)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::unescapeElement(str)</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


150
151
152</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 150</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescape_element'>unescape_element</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_unescapeElement'>unescapeElement</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="unescape_html-class_method">
  <h3 class='signature'>
  .<strong>unescape_html</strong>(str)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::unescapeHTML(str)</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


96
97
98</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 96</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescape_html'>unescape_html</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="unescapeElement-class_method">
  <h3 class='signature'>
  .<strong>unescapeElement</strong>(string, *elements)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Undo escaping such as that done by CGI::escapeElement()</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescapeElement'>unescapeElement</span><span class='lparen'>(</span>
        <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &quot;&amp;lt;BR&amp;gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;&quot;
</span>
<span class='id identifier rubyid_print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescapeElement'>unescapeElement</span><span class='lparen'>(</span>
        <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='comment'># &quot;&amp;lt;BR&amp;gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


133
134
135
136
137
138
139
140
141
142</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 133</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescapeElement'>unescapeElement</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_elements'>elements</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_elements'>elements</span> <span class='op'>=</span> <span class='id identifier rubyid_elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;lt;\/?(?:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)(?!\w)(?:.|\n)*?&amp;gt;</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='backref'>$&amp;</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="unescapeHTML-class_method">
  <h3 class='signature'>
  .<strong>unescapeHTML</strong>(string)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Unescape a string that has been HTML-escaped</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;Usage: foo \&quot;bar\&quot; &lt;baz&gt;&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/util.rb', line 42</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id identifier rubyid_unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_enc'>enc</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_encoding'>encoding</span>
    <span class='kw'>if</span> <span class='lbracket'>[</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16BE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16LE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_32BE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_32LE</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;(apos|amp|quot|gt|lt|#[0-9]|#x[0-9A-Fa-f]);</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='kw'>case</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apos</span><span class='tstring_end'>&#39;</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amp</span><span class='tstring_end'>&#39;</span></span>                 <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>quot</span><span class='tstring_end'>&#39;</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gt</span><span class='tstring_end'>&#39;</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lt</span><span class='tstring_end'>&#39;</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#0*(\d+)\z</span><span class='regexp_end'>/</span></span>        <span class='kw'>then</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#x([0-9a-f]+)\z</span><span class='regexp_end'>/i</span></span>  <span class='kw'>then</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_hex'>hex</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_asciicompat'>asciicompat</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id identifier rubyid_compatible?'>compatible?</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;(apos|amp|quot|gt|lt|\#[0-9]|\#[xX][0-9A-Fa-f]);</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
      <span class='kw'>case</span> <span class='id identifier rubyid_match'>match</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apos</span><span class='tstring_end'>&#39;</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amp</span><span class='tstring_end'>&#39;</span></span>                 <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>quot</span><span class='tstring_end'>&#39;</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gt</span><span class='tstring_end'>&#39;</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lt</span><span class='tstring_end'>&#39;</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#0*(\d+)\z</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span> <span class='kw'>or</span>
          <span class='id identifier rubyid_enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ISO_8859_1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='int'>256</span> <span class='kw'>or</span>
          <span class='id identifier rubyid_asciicompat'>asciicompat</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='int'>128</span>
          <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#x([0-9a-f]+)\z</span><span class='regexp_end'>/i</span></span>
        <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_hex'>hex</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span> <span class='kw'>or</span>
          <span class='id identifier rubyid_enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ISO_8859_1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='int'>256</span> <span class='kw'>or</span>
          <span class='id identifier rubyid_asciicompat'>asciicompat</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='int'>128</span>
          <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='id identifier rubyid_enc'>enc</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#x</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_match'>match</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="env_table-instance_method">
  <h3 class='signature first'>
  #<strong>env_table</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Synonym for ENV.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


51
52
53</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_env_table'>env_table</span>
    <span class='const'>ENV</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="header-instance_method">
  <h3 class='signature'>
  #<strong>header</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Create an HTTP header block as a string.</p>

<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_http_header'>http_header</span><span class='lparen'>(</span><span class='id identifier rubyid_content_type_string'>content_type_string</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_http_header'>http_header</span><span class='lparen'>(</span><span class='id identifier rubyid_headers_hash'>headers_hash</span><span class='rparen'>)</span>
</code></pre>

<p>Includes the empty line that ends the header block.</p>
<dl class="rdoc-list note-list"><dt><code>content_type_string</code>
<dd>
<p>If this form is used, this string is the <code>Content-Type</code></p>
</dd><dt><code>headers_hash</code>
<dd>
<p>A Hash of header values. The following header keys are recognized:</p>
<dl class="rdoc-list note-list"><dt>type
<dd>
<p>The Content-Type header.  Defaults to “text/html”</p>
</dd><dt>charset
<dd>
<p>The charset of the body, appended to the Content-Type header.</p>
</dd><dt>nph
<dd>
<p>A boolean value.  If true, prepend protocol string and status code, and
date; and sets default values for “server” and “connection” if not
explicitly set.</p>
</dd><dt>status
<dd>
<p>The HTTP status code as a String, returned as the Status header.  The
values are:</p>
<dl class="rdoc-list note-list"><dt>OK
<dd>
<p>200 OK</p>
</dd><dt>PARTIAL_CONTENT
<dd>
<p>206 Partial Content</p>
</dd><dt>MULTIPLE_CHOICES
<dd>
<p>300 Multiple Choices</p>
</dd><dt>MOVED
<dd>
<p>301 Moved Permanently</p>
</dd><dt>REDIRECT
<dd>
<p>302 Found</p>
</dd><dt>NOT_MODIFIED
<dd>
<p>304 Not Modified</p>
</dd><dt>BAD_REQUEST
<dd>
<p>400 Bad Request</p>
</dd><dt>AUTH_REQUIRED
<dd>
<p>401 Authorization Required</p>
</dd><dt>FORBIDDEN
<dd>
<p>403 Forbidden</p>
</dd><dt>NOT_FOUND
<dd>
<p>404 Not Found</p>
</dd><dt>METHOD_NOT_ALLOWED
<dd>
<p>405 Method Not Allowed</p>
</dd><dt>NOT_ACCEPTABLE
<dd>
<p>406 Not Acceptable</p>
</dd><dt>LENGTH_REQUIRED
<dd>
<p>411 Length Required</p>
</dd><dt>PRECONDITION_FAILED
<dd>
<p>412 Precondition Failed</p>
</dd><dt>SERVER_ERROR
<dd>
<p>500 Internal Server Error</p>
</dd><dt>NOT_IMPLEMENTED
<dd>
<p>501 Method Not Implemented</p>
</dd><dt>BAD_GATEWAY
<dd>
<p>502 Bad Gateway</p>
</dd><dt>VARIANT_ALSO_VARIES
<dd>
<p>506 Variant Also Negotiates</p>
</dd></dl>
</dd><dt>server
<dd>
<p>The server software, returned as the Server header.</p>
</dd><dt>connection
<dd>
<p>The connection type, returned as the Connection header (for instance,
“close”.</p>
</dd><dt>length
<dd>
<p>The length of the content that will be sent, returned as the Content-Length
header.</p>
</dd><dt>language
<dd>
<p>The language of the content, returned as the Content-Language header.</p>
</dd><dt>expires
<dd>
<p>The time on which the current content expires, as a <code>Time</code>
object, returned as the Expires header.</p>
</dd><dt>cookie
<dd>
<p>A cookie or cookies, returned as one or more Set-Cookie headers.  The value
can be the literal string of the cookie; a CGI::Cookie object; an Array of
literal cookie strings or Cookie objects; or a hash all of whose values are
literal cookie strings or Cookie objects.</p>

<p>These cookies are in addition to the cookies held in the @output_cookies
field.</p>
</dd></dl>

<p>Other headers can also be set; they are appended as key: value.</p>
</dd></dl>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby">http_header
  # Content-Type: text/html

http_header(&quot;text/plain&quot;)
  # Content-Type: text/plain

http_header(&quot;nph&quot;        =&gt; true,
            &quot;status&quot;     =&gt; &quot;OK&quot;,  # == &quot;200 OK&quot;
              # &quot;status&quot;     =&gt; &quot;200 GOOD&quot;,
            &quot;server&quot;     =&gt; ENV[&#39;SERVER_SOFTWARE&#39;],
            &quot;connection&quot; =&gt; &quot;close&quot;,
            &quot;type&quot;       =&gt; &quot;text/html&quot;,
            &quot;charset&quot;    =&gt; &quot;iso-2022-jp&quot;,
              # Content-Type: text/html; charset=iso-2022-jp
            &quot;length&quot;     =&gt; 103,
            &quot;language&quot;   =&gt; &quot;ja&quot;,
            &quot;expires&quot;    =&gt; Time.now + 30,
            &quot;cookie&quot;     =&gt; [cookie1, cookie2],
            &quot;my_header1&quot; =&gt; &quot;my_value&quot;
            &quot;my_header2&quot; =&gt; &quot;my_value&quot;)</code></pre>

<p>This method does not perform charset conversion. This method is an alias
for #http_header, when HTML5 tag maker is inactive.</p>

<p>NOTE: use #http_header to create HTTP header blocks, this alias is only
provided for backwards compatibility.</p>

<p>Using #header with the HTML5 tag maker will create a &lt;header&gt;
element.</p>


  </div>
</div>
<div class='source_code h'>
  <pre class='lines_num'>


181</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 181</span>

<span class='kw'>alias</span> <span class='symbol'>:header</span> <span class='symbol'>:http_header</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="http_header-instance_method">
  <h3 class='signature'>
  #<strong>http_header</strong>(options = &#39;text/html&#39;)  
  <span class='aliases'>Also known as:
    <span class='names'>
    <span>header</span>
</span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Create an HTTP header block as a string.</p>

<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_http_header'>http_header</span><span class='lparen'>(</span><span class='id identifier rubyid_content_type_string'>content_type_string</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_http_header'>http_header</span><span class='lparen'>(</span><span class='id identifier rubyid_headers_hash'>headers_hash</span><span class='rparen'>)</span>
</code></pre>

<p>Includes the empty line that ends the header block.</p>
<dl class="rdoc-list note-list"><dt><code>content_type_string</code>
<dd>
<p>If this form is used, this string is the <code>Content-Type</code></p>
</dd><dt><code>headers_hash</code>
<dd>
<p>A Hash of header values. The following header keys are recognized:</p>
<dl class="rdoc-list note-list"><dt>type
<dd>
<p>The Content-Type header.  Defaults to “text/html”</p>
</dd><dt>charset
<dd>
<p>The charset of the body, appended to the Content-Type header.</p>
</dd><dt>nph
<dd>
<p>A boolean value.  If true, prepend protocol string and status code, and
date; and sets default values for “server” and “connection” if not
explicitly set.</p>
</dd><dt>status
<dd>
<p>The HTTP status code as a String, returned as the Status header.  The
values are:</p>
<dl class="rdoc-list note-list"><dt>OK
<dd>
<p>200 OK</p>
</dd><dt>PARTIAL_CONTENT
<dd>
<p>206 Partial Content</p>
</dd><dt>MULTIPLE_CHOICES
<dd>
<p>300 Multiple Choices</p>
</dd><dt>MOVED
<dd>
<p>301 Moved Permanently</p>
</dd><dt>REDIRECT
<dd>
<p>302 Found</p>
</dd><dt>NOT_MODIFIED
<dd>
<p>304 Not Modified</p>
</dd><dt>BAD_REQUEST
<dd>
<p>400 Bad Request</p>
</dd><dt>AUTH_REQUIRED
<dd>
<p>401 Authorization Required</p>
</dd><dt>FORBIDDEN
<dd>
<p>403 Forbidden</p>
</dd><dt>NOT_FOUND
<dd>
<p>404 Not Found</p>
</dd><dt>METHOD_NOT_ALLOWED
<dd>
<p>405 Method Not Allowed</p>
</dd><dt>NOT_ACCEPTABLE
<dd>
<p>406 Not Acceptable</p>
</dd><dt>LENGTH_REQUIRED
<dd>
<p>411 Length Required</p>
</dd><dt>PRECONDITION_FAILED
<dd>
<p>412 Precondition Failed</p>
</dd><dt>SERVER_ERROR
<dd>
<p>500 Internal Server Error</p>
</dd><dt>NOT_IMPLEMENTED
<dd>
<p>501 Method Not Implemented</p>
</dd><dt>BAD_GATEWAY
<dd>
<p>502 Bad Gateway</p>
</dd><dt>VARIANT_ALSO_VARIES
<dd>
<p>506 Variant Also Negotiates</p>
</dd></dl>
</dd><dt>server
<dd>
<p>The server software, returned as the Server header.</p>
</dd><dt>connection
<dd>
<p>The connection type, returned as the Connection header (for instance,
“close”.</p>
</dd><dt>length
<dd>
<p>The length of the content that will be sent, returned as the Content-Length
header.</p>
</dd><dt>language
<dd>
<p>The language of the content, returned as the Content-Language header.</p>
</dd><dt>expires
<dd>
<p>The time on which the current content expires, as a <code>Time</code>
object, returned as the Expires header.</p>
</dd><dt>cookie
<dd>
<p>A cookie or cookies, returned as one or more Set-Cookie headers.  The value
can be the literal string of the cookie; a CGI::Cookie object; an Array of
literal cookie strings or Cookie objects; or a hash all of whose values are
literal cookie strings or Cookie objects.</p>

<p>These cookies are in addition to the cookies held in the @output_cookies
field.</p>
</dd></dl>

<p>Other headers can also be set; they are appended as key: value.</p>
</dd></dl>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby">http_header
  # Content-Type: text/html

http_header(&quot;text/plain&quot;)
  # Content-Type: text/plain

http_header(&quot;nph&quot;        =&gt; true,
            &quot;status&quot;     =&gt; &quot;OK&quot;,  # == &quot;200 OK&quot;
              # &quot;status&quot;     =&gt; &quot;200 GOOD&quot;,
            &quot;server&quot;     =&gt; ENV[&#39;SERVER_SOFTWARE&#39;],
            &quot;connection&quot; =&gt; &quot;close&quot;,
            &quot;type&quot;       =&gt; &quot;text/html&quot;,
            &quot;charset&quot;    =&gt; &quot;iso-2022-jp&quot;,
              # Content-Type: text/html; charset=iso-2022-jp
            &quot;length&quot;     =&gt; 103,
            &quot;language&quot;   =&gt; &quot;ja&quot;,
            &quot;expires&quot;    =&gt; Time.now + 30,
            &quot;cookie&quot;     =&gt; [cookie1, cookie2],
            &quot;my_header1&quot; =&gt; &quot;my_value&quot;
            &quot;my_header2&quot; =&gt; &quot;my_value&quot;)</code></pre>

<p>This method does not perform charset conversion.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 152</span>

<span class='kw'>def</span> <span class='id identifier rubyid_http_header'>http_header</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
      <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='id identifier rubyid__header_for_string'>_header_for_string</span><span class='lparen'>(</span><span class='id identifier rubyid_content_type'>content_type</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='id identifier rubyid__header_for_string'>_header_for_string</span><span class='lparen'>(</span><span class='id identifier rubyid_content_type'>content_type</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='id identifier rubyid__header_for_hash'>_header_for_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected String or Hash but got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>MOD_RUBY</span><span class='rparen'>)</span>
      <span class='id identifier rubyid__header_for_modruby'>_header_for_modruby</span><span class='lparen'>(</span><span class='id identifier rubyid_buf'>buf</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='const'>EOL</span>    <span class='comment'># empty line of separator
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_buf'>buf</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="out-instance_method">
  <h3 class='signature'>
  #<strong>out</strong>(options = &quot;text/html&quot;)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Print an HTTP header and body to $DEFAULT_OUTPUT ($&gt;)</p>

<p>:call-seq:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='id identifier rubyid_content_type_string'>content_type_string</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='id identifier rubyid_headers_hash'>headers_hash</span><span class='rparen'>)</span>
</code></pre>
<dl class="rdoc-list note-list"><dt><code>content_type_string</code>
<dd>
<p>If a string is passed, it is assumed to be the content type.</p>
</dd><dt><code>headers_hash</code>
<dd>
<p>This is a Hash of headers, similar to that used by #http_header.</p>
</dd><dt><code>block</code>
<dd>
<p>A block is required and should evaluate to the body of the response.</p>
</dd></dl>

<p><code>Content-Length</code> is automatically calculated from the size of
the String returned by the content block.</p>

<p>If <code>ENV['REQUEST_METHOD'] == &quot;HEAD&quot;</code>, then only the
header is output (the content block is still required, but it is ignored).</p>

<p>If the charset is “iso-2022-jp” or “euc-jp” or “shift_jis” then the content
is converted to this charset, and the language is set to “ja”.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='comment'># Content-Type: text/html
</span>  <span class='comment'># Content-Length: 6
</span>  <span class='comment'>#
</span>  <span class='comment'># string
</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='comment'># Content-Type: text/plain
</span>  <span class='comment'># Content-Length: 6
</span>  <span class='comment'>#
</span>  <span class='comment'># string
</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nph</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>status</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='comment'># == &quot;200 OK&quot;
</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>server</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SERVER_SOFTWARE</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connection</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>charset</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>iso-2022-jp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='comment'># Content-Type: text/html; charset=iso-2022-jp
</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>language</span><span class='tstring_end'>&quot;</span></span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ja</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expires</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='int'>3600</span> <span class='op'>*</span> <span class='int'>24</span> <span class='op'>*</span> <span class='int'>30</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cookie</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_cookie1'>cookie1</span><span class='comma'>,</span> <span class='id identifier rubyid_cookie2'>cookie2</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_header1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_value</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_header2</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_value</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
   <span class='comment'># HTTP/1.1 200 OK
</span>   <span class='comment'># Date: Sun, 15 May 2011 17:35:54 GMT
</span>   <span class='comment'># Server: Apache 2.2.0
</span>   <span class='comment'># Connection: close
</span>   <span class='comment'># Content-Type: text/html; charset=iso-2022-jp
</span>   <span class='comment'># Content-Length: 6
</span>   <span class='comment'># Content-Language: ja
</span>   <span class='comment'># Expires: Tue, 14 Jun 2011 17:35:54 GMT
</span>   <span class='comment'># Set-Cookie: foo
</span>   <span class='comment'># Set-Cookie: bar
</span>   <span class='comment'># my_header1: my_value
</span>   <span class='comment'># my_header2: my_value
</span>   <span class='comment'>#
</span>   <span class='comment'># string
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


348
349
350
351
352
353
354
355
356
357</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 348</span>

<span class='kw'>def</span> <span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># :yield:
</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='kw'>yield</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>length</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_stdoutput'>stdoutput</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_binmode'>binmode</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_binmode'>binmode</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_http_header'>http_header</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_content'>content</span> <span class='kw'>unless</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span> <span class='op'>==</span> <span class='id identifier rubyid_env_table'>env_table</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>REQUEST_METHOD</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="print-instance_method">
  <h3 class='signature'>
  #<strong>print</strong>(*options)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Print an argument or list of arguments to the default output stream</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_cgi'>cgi</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span>    <span class='comment'># default:  cgi.print == $DEFAULT_OUTPUT.print
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


364
365
366</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stdoutput'>stdoutput</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="stdinput-instance_method">
  <h3 class='signature'>
  #<strong>stdinput</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Synonym for $stdin.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


56
57
58</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stdinput'>stdinput</span>
    <span class='gvar'>$stdin</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="stdoutput-instance_method">
  <h3 class='signature'>
  #<strong>stdoutput</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Synonym for $stdout.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


61
62
63</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'cgi/core.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stdoutput'>stdoutput</span>
    <span class='gvar'>$stdout</span>
  <span class='kw'>end</span></pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>