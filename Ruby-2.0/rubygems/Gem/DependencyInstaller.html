<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Gem::DependencyInstaller &mdash; rubygems Ruby-2.0.0 p247</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Gem::DependencyInstaller",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.0.0</a> &raquo; 
          <a href='../index.html'>rubygems</a> &raquo; 
          <a href='../_index.html'>Index (D)</a> &raquo; 
          <a href="../Gem.html" title="Gem (module)">Gem</a> &raquo; 
          <span class='title'>DependencyInstaller</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Gem::DependencyInstaller</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>Gem::DependencyInstaller</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>


  <tr>
    <td class='box_1'>Includes:</td>
    <td><a href="UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a>
    </td>
  </tr>



  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
rubygems/dependency_installer.rb</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Installs a gem along with all its dependencies from local and remote gems.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='DEFAULT_OPTIONS-constant'>
      DEFAULT_OPTIONS =
    </dt>
    <dd>
            <pre class='code'><span class='lbrace'>{</span>
  <span class='symbol'>:env_shebang</span>         <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='symbol'>:document</span>            <span class='op'>=&gt;</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>ri</span><span class='words_sep'>]</span><span class='comma'>,</span>
  <span class='symbol'>:domain</span>              <span class='op'>=&gt;</span> <span class='symbol'>:both</span><span class='comma'>,</span> <span class='comment'># HACK dup
</span>  <span class='symbol'>:force</span>               <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='symbol'>:format_executable</span>   <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='comment'># HACK dup
</span>  <span class='symbol'>:ignore_dependencies</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='symbol'>:prerelease</span>          <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='symbol'>:security_policy</span>     <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='comment'># HACK NoSecurity requires OpenSSL. AlmostNo? Low?
</span>  <span class='symbol'>:wrappers</span>            <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='symbol'>:build_args</span>          <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='symbol'>:build_docs_in_background</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre>
    </dd>
  </dl>



<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#document-instance_method" title="#document (instance method)">#<strong>document</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Documentation types.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#errors-instance_method" title="#errors (instance method)">#<strong>errors</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gems_to_install-instance_method" title="#gems_to_install (instance method)">#<strong>gems_to_install</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#installed_gems-instance_method" title="#installed_gems (instance method)">#<strong>installed_gems</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(options = {})  &#x21d2; DependencyInstaller </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new installer instance.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#add_found_dependencies-instance_method" title="#add_found_dependencies (instance method)">#<strong>add_found_dependencies</strong>(to_do, dependency_list)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#available_set_for-instance_method" title="#available_set_for (instance method)">#<strong>available_set_for</strong>(dep_or_name, version)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates an AvailableSet to install from based on <code>dep_or_name</code>
and <code>version</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#consider_local%3F-instance_method" title="#consider_local? (instance method)">#<strong>consider_local?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Indicated, based on the requested domain, if local gems should be
considered.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#consider_remote%3F-instance_method" title="#consider_remote? (instance method)">#<strong>consider_remote?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Indicated, based on the requested domain, if remote gems should be
considered.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#find_gems_with_sources-instance_method" title="#find_gems_with_sources (instance method)">#<strong>find_gems_with_sources</strong>(dep)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a list of pairs of gemspecs and source_uris that match
<a href="Dependency.html" title="Gem::Dependency (class)">Dependency</a> <code>dep</code> from both local (Dir.pwd) and remote
(Gem.sources) sources.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#find_spec_by_name_and_version-instance_method" title="#find_spec_by_name_and_version (instance method)">#<strong>find_spec_by_name_and_version</strong>(gem_name, version = Gem::Requirement.default, prerelease = false)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Finds a spec and the source_uri it came from for gem <code>gem_name</code>
and <code>version</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gather_dependencies-instance_method" title="#gather_dependencies (instance method)">#<strong>gather_dependencies</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Gathers all dependencies necessary for the installation from local and
remote sources unless the ignore_dependencies was given.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#in_background-instance_method" title="#in_background (instance method)">#<strong>in_background</strong>(what)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#install-instance_method" title="#install (instance method)">#<strong>install</strong>(dep_or_name, version = Gem::Requirement.default)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Installs the gem <code>dep_or_name</code> and all its dependencies.</p>
</div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a></h3>
  <p class="inherited"><a href="UserInteraction.html#alert-instance_method" title="Gem::UserInteraction#alert (method)">#alert</a>, <a href="UserInteraction.html#alert_error-instance_method" title="Gem::UserInteraction#alert_error (method)">#alert_error</a>, <a href="UserInteraction.html#alert_warning-instance_method" title="Gem::UserInteraction#alert_warning (method)">#alert_warning</a>, <a href="UserInteraction.html#ask-instance_method" title="Gem::UserInteraction#ask (method)">#ask</a>, <a href="UserInteraction.html#ask_for_password-instance_method" title="Gem::UserInteraction#ask_for_password (method)">#ask_for_password</a>, <a href="UserInteraction.html#ask_yes_no-instance_method" title="Gem::UserInteraction#ask_yes_no (method)">#ask_yes_no</a>, <a href="UserInteraction.html#choose_from_list-instance_method" title="Gem::UserInteraction#choose_from_list (method)">#choose_from_list</a>, <a href="UserInteraction.html#say-instance_method" title="Gem::UserInteraction#say (method)">#say</a>, <a href="UserInteraction.html#terminate_interaction-instance_method" title="Gem::UserInteraction#terminate_interaction (method)">#terminate_interaction</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a></h3>
  <p class="inherited"><a href="DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">.ui</a>, <a href="DefaultUserInteraction.html#ui-instance_method" title="Gem::DefaultUserInteraction#ui (method)">#ui</a>, <a href="DefaultUserInteraction.html#ui%3D-instance_method" title="Gem::DefaultUserInteraction#ui= (method)">#ui=</a>, <a href="DefaultUserInteraction.html#ui%3D-class_method" title="Gem::DefaultUserInteraction.ui= (method)">.ui=</a>, <a href="DefaultUserInteraction.html#use_ui-class_method" title="Gem::DefaultUserInteraction.use_ui (method)">.use_ui</a>, <a href="DefaultUserInteraction.html#use_ui-instance_method" title="Gem::DefaultUserInteraction#use_ui (method)">#use_ui</a></p>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(options = {})  &#x21d2; <tt><a href="" title="Gem::DependencyInstaller (class)">DependencyInstaller</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new installer instance.</p>

<p>Options are:</p>
<dl class="rdoc-list note-list"><dt>:cache_dir
<dd>
<p>Alternate repository path to store gem files in.</p>
</dd><dt>:domain
<dd>
<p>:local, :remote, or :both.  :local only searches gems in the current
directory.  :remote searches only gems in Gem::sources. :both searches
both.</p>
</dd><dt>:env_shebang
<dd>
<p>See <a href="Installer.html" title="Gem::Installer (class)">Installer</a>::new.</p>
</dd><dt>:force
<dd>
<p>See <a href="Installer.html#install-instance_method" title="Gem::Installer#install (method)">Installer#install</a>.</p>
</dd><dt>:format_executable
<dd>
<p>See Installer#initialize.</p>
</dd><dt>:ignore_dependencies
<dd>
<p>Don&#39;t install any dependencies.</p>
</dd><dt>:install_dir
<dd>
<p>See <a href="Installer.html#install-instance_method" title="Gem::Installer#install (method)">Installer#install</a>.</p>
</dd><dt>:prerelease
<dd>
<p>Allow prerelease versions.  See <a href="#install-instance_method" title="Gem::DependencyInstaller#install (method)">#install</a>.</p>
</dd><dt>:security_policy
<dd>
<p>See <a href="Installer.html" title="Gem::Installer (class)">Installer</a>::new and <a href="Security.html" title="Gem::Security (module)">Security</a>.</p>
</dd><dt>:user_install
<dd>
<p>See <a href="Installer.html" title="Gem::Installer (class)">Installer</a>.new</p>
</dd><dt>:wrappers
<dd>
<p>See <a href="Installer.html" title="Gem::Installer (class)">Installer</a>::new</p>
</dd><dt>:build_args
<dd>
<p>See <a href="Installer.html" title="Gem::Installer (class)">Installer</a>::new</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@install_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:install_dir</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Gem</span><span class='period'>.</span><span class='id identifier rubyid_dir'>dir</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:install_dir</span><span class='rbracket'>]</span> <span class='kw'>then</span>
    <span class='comment'># HACK shouldn&#39;t change the global settings, needed for -i behavior
</span>    <span class='comment'># maybe move to the install command?  See also github #442
</span>    <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Specification</span><span class='period'>.</span><span class='id identifier rubyid_dirs'>dirs</span> <span class='op'>=</span> <span class='ivar'>@install_dir</span>
    <span class='const'>Gem</span><span class='period'>.</span><span class='id identifier rubyid_ensure_gem_subdirectories'>ensure_gem_subdirectories</span> <span class='ivar'>@install_dir</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='const'>DEFAULT_OPTIONS</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span> <span class='id identifier rubyid_options'>options</span>

  <span class='ivar'>@bin_dir</span>             <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:bin_dir</span><span class='rbracket'>]</span>
  <span class='ivar'>@dev_shallow</span>         <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:dev_shallow</span><span class='rbracket'>]</span>
  <span class='ivar'>@development</span>         <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:development</span><span class='rbracket'>]</span>
  <span class='ivar'>@document</span>            <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:document</span><span class='rbracket'>]</span>
  <span class='ivar'>@domain</span>              <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:domain</span><span class='rbracket'>]</span>
  <span class='ivar'>@env_shebang</span>         <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:env_shebang</span><span class='rbracket'>]</span>
  <span class='ivar'>@force</span>               <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
  <span class='ivar'>@format_executable</span>   <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:format_executable</span><span class='rbracket'>]</span>
  <span class='ivar'>@ignore_dependencies</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ignore_dependencies</span><span class='rbracket'>]</span>
  <span class='ivar'>@prerelease</span>          <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:prerelease</span><span class='rbracket'>]</span>
  <span class='ivar'>@security_policy</span>     <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:security_policy</span><span class='rbracket'>]</span>
  <span class='ivar'>@user_install</span>        <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:user_install</span><span class='rbracket'>]</span>
  <span class='ivar'>@wrappers</span>            <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:wrappers</span><span class='rbracket'>]</span>
  <span class='ivar'>@build_args</span>          <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build_args</span><span class='rbracket'>]</span>
  <span class='ivar'>@build_docs_in_background</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:build_docs_in_background</span><span class='rbracket'>]</span>

  <span class='comment'># Indicates that we should not try to update any deps unless
</span>  <span class='comment'># we absolutely must.
</span>  <span class='ivar'>@minimal_deps</span>        <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:minimal_deps</span><span class='rbracket'>]</span>

  <span class='ivar'>@available</span>      <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@installed_gems</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@toplevel_specs</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='ivar'>@cache_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cache_dir</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@install_dir</span>

  <span class='comment'># Set with any errors that SpecFetcher finds while search through
</span>  <span class='comment'># gemspecs for a dep
</span>  <span class='ivar'>@errors</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="document-instance_method">
  <h3 class='signature first'>
  #<strong>document</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Documentation types.  For use by the <a href="../Gem.html#done_installing-class_method" title="Gem.done_installing (method)">Gem.done_installing</a> hook</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


24</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 24</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:document</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="errors-instance_method">
  <h3 class='signature'>
  #<strong>errors</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


102</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 102</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:errors</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gems_to_install-instance_method">
  <h3 class='signature'>
  #<strong>gems_to_install</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


18</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 18</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:gems_to_install</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="installed_gems-instance_method">
  <h3 class='signature'>
  #<strong>installed_gems</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


19</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 19</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:installed_gems</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="add_found_dependencies-instance_method">
  <h3 class='signature first'>
  #<strong>add_found_dependencies</strong>(to_do, dependency_list)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_found_dependencies'>add_found_dependencies</span> <span class='id identifier rubyid_to_do'>to_do</span><span class='comma'>,</span> <span class='id identifier rubyid_dependency_list'>dependency_list</span>
  <span class='id identifier rubyid_seen'>seen</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_dependencies'>dependencies</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Dependency</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span>

  <span class='kw'>until</span> <span class='id identifier rubyid_to_do'>to_do</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='id identifier rubyid_to_do'>to_do</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>

    <span class='comment'># HACK why is spec nil?
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_seen'>seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_seen'>seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>

    <span class='id identifier rubyid_deps'>deps</span> <span class='op'>=</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_runtime_dependencies'>runtime_dependencies</span>

    <span class='kw'>if</span> <span class='ivar'>@development</span>
      <span class='kw'>if</span> <span class='ivar'>@dev_shallow</span>
        <span class='kw'>if</span> <span class='ivar'>@toplevel_specs</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span>
          <span class='id identifier rubyid_deps'>deps</span> <span class='op'>|=</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_development_dependencies'>development_dependencies</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_deps'>deps</span> <span class='op'>|=</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_development_dependencies'>development_dependencies</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_deps'>deps</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dep'>dep</span><span class='op'>|</span>
      <span class='id identifier rubyid_dependencies'>dependencies</span><span class='lbracket'>[</span><span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_dependencies'>dependencies</span><span class='lbracket'>[</span><span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span> <span class='id identifier rubyid_dep'>dep</span>

      <span class='kw'>if</span> <span class='ivar'>@minimal_deps</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Specification</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_installed_spec'>installed_spec</span><span class='op'>|</span>
                  <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_installed_spec'>installed_spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='kw'>and</span>
                    <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_requirement'>requirement</span><span class='period'>.</span><span class='id identifier rubyid_satisfied_by?'>satisfied_by?</span> <span class='id identifier rubyid_installed_spec'>installed_spec</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span>
                <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_find_gems_with_sources'>find_gems_with_sources</span><span class='lparen'>(</span><span class='id identifier rubyid_dep'>dep</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_sorted'>sorted</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
        <span class='id identifier rubyid_to_do'>to_do</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_spec'>spec</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_remove_installed!'>remove_installed!</span> <span class='id identifier rubyid_dep'>dep</span>

      <span class='ivar'>@available</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_results'>results</span>
      <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_inject_into_list'>inject_into_list</span> <span class='id identifier rubyid_dependency_list'>dependency_list</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_dependency_list'>dependency_list</span><span class='period'>.</span><span class='id identifier rubyid_remove_specs_unsatisfied_by'>remove_specs_unsatisfied_by</span> <span class='id identifier rubyid_dependencies'>dependencies</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="available_set_for-instance_method">
  <h3 class='signature'>
  #<strong>available_set_for</strong>(dep_or_name, version)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates an AvailableSet to install from based on <code>dep_or_name</code>
and <code>version</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


108
109
110
111
112
113
114
115
116
117
118</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_available_set_for'>available_set_for</span> <span class='id identifier rubyid_dep_or_name'>dep_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='const'>String</span> <span class='op'>===</span> <span class='id identifier rubyid_dep_or_name'>dep_or_name</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_find_spec_by_name_and_version'>find_spec_by_name_and_version</span> <span class='id identifier rubyid_dep_or_name'>dep_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='ivar'>@prerelease</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_dep'>dep</span> <span class='op'>=</span> <span class='id identifier rubyid_dep_or_name'>dep_or_name</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_prerelease'>prerelease</span> <span class='op'>=</span> <span class='ivar'>@prerelease</span>
    <span class='ivar'>@available</span> <span class='op'>=</span> <span class='id identifier rubyid_find_gems_with_sources'>find_gems_with_sources</span> <span class='id identifier rubyid_dep'>dep</span>
  <span class='kw'>end</span>

  <span class='ivar'>@available</span><span class='period'>.</span><span class='id identifier rubyid_pick_best!'>pick_best!</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="consider_local?-instance_method">
  <h3 class='signature'>
  #<strong>consider_local?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Indicated, based on the requested domain, if local gems should be
considered.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


124
125
126</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_consider_local?'>consider_local?</span>
  <span class='ivar'>@domain</span> <span class='op'>==</span> <span class='symbol'>:both</span> <span class='kw'>or</span> <span class='ivar'>@domain</span> <span class='op'>==</span> <span class='symbol'>:local</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="consider_remote?-instance_method">
  <h3 class='signature'>
  #<strong>consider_remote?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Indicated, based on the requested domain, if remote gems should be
considered.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


132
133
134</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_consider_remote?'>consider_remote?</span>
  <span class='ivar'>@domain</span> <span class='op'>==</span> <span class='symbol'>:both</span> <span class='kw'>or</span> <span class='ivar'>@domain</span> <span class='op'>==</span> <span class='symbol'>:remote</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="find_gems_with_sources-instance_method">
  <h3 class='signature'>
  #<strong>find_gems_with_sources</strong>(dep)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a list of pairs of gemspecs and source_uris that match
<a href="Dependency.html" title="Gem::Dependency (class)">Gem::Dependency</a> <code>dep</code> from both local (Dir.pwd) and remote
(Gem.sources) sources.  Gems are sorted with newer gems preferred over
older gems, and local gems preferred over remote gems.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_gems_with_sources'>find_gems_with_sources</span><span class='lparen'>(</span><span class='id identifier rubyid_dep'>dep</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set'>set</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>AvailableSet</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_consider_local?'>consider_local?</span>
    <span class='id identifier rubyid_sl'>sl</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Source</span><span class='op'>::</span><span class='const'>Local</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='id identifier rubyid_sl'>sl</span><span class='period'>.</span><span class='id identifier rubyid_find_gem'>find_gem</span><span class='lparen'>(</span><span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_matches_spec?'>matches_spec?</span> <span class='id identifier rubyid_spec'>spec</span>
        <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid_sl'>sl</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_consider_remote?'>consider_remote?</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_found'>found</span><span class='comma'>,</span> <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>SpecFetcher</span><span class='period'>.</span><span class='id identifier rubyid_fetcher'>fetcher</span><span class='period'>.</span><span class='id identifier rubyid_spec_for_dependency'>spec_for_dependency</span> <span class='id identifier rubyid_dep'>dep</span>

      <span class='kw'>if</span> <span class='ivar'>@errors</span>
        <span class='ivar'>@errors</span> <span class='op'>+=</span> <span class='id identifier rubyid_errors'>errors</span>
      <span class='kw'>else</span>
        <span class='ivar'>@errors</span> <span class='op'>=</span> <span class='id identifier rubyid_errors'>errors</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_set'>set</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_found'>found</span>

    <span class='kw'>rescue</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>RemoteFetcher</span><span class='op'>::</span><span class='const'>FetchError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='comment'># FIX if there is a problem talking to the network, we either need to always tell
</span>      <span class='comment'># the user (no really_verbose) or fail hard, not silently tell them that we just
</span>      <span class='comment'># couldn&#39;t find their requested gem.
</span>      <span class='kw'>if</span> <span class='const'>Gem</span><span class='period'>.</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_really_verbose'>really_verbose</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error fetching remote data:\t\t</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Falling back to local-only install</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='ivar'>@domain</span> <span class='op'>=</span> <span class='symbol'>:local</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_set'>set</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="find_spec_by_name_and_version-instance_method">
  <h3 class='signature'>
  #<strong>find_spec_by_name_and_version</strong>(gem_name, version = Gem::Requirement.default, prerelease = false)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Finds a spec and the source_uri it came from for gem <code>gem_name</code>
and <code>version</code>.  Returns an Array of specs and sources required
for installation of the gem.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 272</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_spec_by_name_and_version'>find_spec_by_name_and_version</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_name'>gem_name</span><span class='comma'>,</span>
                                  <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span><span class='comma'>,</span>
                                  <span class='id identifier rubyid_prerelease'>prerelease</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_set'>set</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>AvailableSet</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_consider_local?'>consider_local?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_gem_name'>gem_name</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.gem$</span><span class='regexp_end'>/</span></span> <span class='kw'>and</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_file?'>file?</span> <span class='id identifier rubyid_gem_name'>gem_name</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Source</span><span class='op'>::</span><span class='const'>SpecificFile</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_name'>gem_name</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='id identifier rubyid_src'>src</span><span class='period'>.</span><span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid_src'>src</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_local'>local</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Source</span><span class='op'>::</span><span class='const'>Local</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_local'>local</span><span class='period'>.</span><span class='id identifier rubyid_find_gem'>find_gem</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_name'>gem_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_local'>local</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_dep'>dep</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Dependency</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_gem_name'>gem_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span>
    <span class='comment'># HACK Dependency objects should be immutable
</span>    <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_prerelease'>prerelease</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_prerelease'>prerelease</span>

    <span class='id identifier rubyid_set'>set</span> <span class='op'>=</span> <span class='id identifier rubyid_find_gems_with_sources'>find_gems_with_sources</span><span class='lparen'>(</span><span class='id identifier rubyid_dep'>dep</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_match_platform!'>match_platform!</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>SpecificGemNotFoundException</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_name'>gem_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='ivar'>@errors</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@available</span> <span class='op'>=</span> <span class='id identifier rubyid_set'>set</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gather_dependencies-instance_method">
  <h3 class='signature'>
  #<strong>gather_dependencies</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Gathers all dependencies necessary for the installation from local and
remote sources unless the ignore_dependencies was given.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 186</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gather_dependencies'>gather_dependencies</span>
  <span class='id identifier rubyid_specs'>specs</span> <span class='op'>=</span> <span class='ivar'>@available</span><span class='period'>.</span><span class='id identifier rubyid_all_specs'>all_specs</span>

  <span class='comment'># these gems were listed by the user, always install them
</span>  <span class='id identifier rubyid_keep_names'>keep_names</span> <span class='op'>=</span> <span class='id identifier rubyid_specs'>specs</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='op'>|</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span> <span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='ivar'>@dev_shallow</span>
    <span class='ivar'>@toplevel_specs</span> <span class='op'>=</span> <span class='id identifier rubyid_keep_names'>keep_names</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_dependency_list'>dependency_list</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>DependencyList</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='ivar'>@development</span>
  <span class='id identifier rubyid_dependency_list'>dependency_list</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_specs'>specs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_to_do'>to_do</span> <span class='op'>=</span> <span class='id identifier rubyid_specs'>specs</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_add_found_dependencies'>add_found_dependencies</span> <span class='id identifier rubyid_to_do'>to_do</span><span class='comma'>,</span> <span class='id identifier rubyid_dependency_list'>dependency_list</span> <span class='kw'>unless</span> <span class='ivar'>@ignore_dependencies</span>

  <span class='comment'># REFACTOR maybe abstract away using Gem::Specification.include? so
</span>  <span class='comment'># that this isn&#39;t dependent only on the currently installed gems
</span>  <span class='id identifier rubyid_dependency_list'>dependency_list</span><span class='period'>.</span><span class='id identifier rubyid_specs'>specs</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='op'>|</span>
    <span class='kw'>not</span> <span class='id identifier rubyid_keep_names'>keep_names</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='rparen'>)</span> <span class='kw'>and</span>
    <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Specification</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_dependency_list'>dependency_list</span><span class='period'>.</span><span class='id identifier rubyid_ok?'>ok?</span> <span class='kw'>or</span> <span class='ivar'>@ignore_dependencies</span> <span class='kw'>or</span> <span class='ivar'>@force</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_reason'>reason</span> <span class='op'>=</span> <span class='id identifier rubyid_dependency_list'>dependency_list</span><span class='period'>.</span><span class='id identifier rubyid_why_not_ok?'>why_not_ok?</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'> requires </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>; </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>DependencyError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to resolve dependencies: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_reason'>reason</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@gems_to_install</span> <span class='op'>=</span> <span class='id identifier rubyid_dependency_list'>dependency_list</span><span class='period'>.</span><span class='id identifier rubyid_dependency_order'>dependency_order</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="in_background-instance_method">
  <h3 class='signature'>
  #<strong>in_background</strong>(what)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


389
390
391
392
393
394
395
396
397
398
399
400
401
402</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 389</span>

<span class='kw'>def</span> <span class='id identifier rubyid_in_background'>in_background</span> <span class='id identifier rubyid_what'>what</span>
  <span class='id identifier rubyid_fork_happened'>fork_happened</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>if</span> <span class='ivar'>@build_docs_in_background</span> <span class='kw'>and</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:fork</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
      <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_fork'>fork</span> <span class='kw'>do</span>
        <span class='kw'>yield</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_fork_happened'>fork_happened</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_what'>what</span><span class='embexpr_end'>}</span><span class='tstring_content'> in a background process.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>rescue</span> <span class='const'>NotImplementedError</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>yield</span> <span class='kw'>unless</span> <span class='id identifier rubyid_fork_happened'>fork_happened</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="install-instance_method">
  <h3 class='signature'>
  #<strong>install</strong>(dep_or_name, version = Gem::Requirement.default)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Installs the gem <code>dep_or_name</code> and all its dependencies. 
Returns an Array of installed gem specifications.</p>

<p>If the <code>:prerelease</code> option is set and there is a prerelease for
<code>dep_or_name</code> the prerelease version will be installed.</p>

<p>Unless explicitly specified as a prerelease dependency, prerelease gems
that <code>dep_or_name</code> depend on will not be installed.</p>

<p>If c-1.a depends on b-1 and a-1.a and there is a gem b-1.a available then
c-1.a, b-1 and a-1.a will be installed.  b-1.a will need to be installed
separately.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'rubygems/dependency_installer.rb', line 321</span>

<span class='kw'>def</span> <span class='id identifier rubyid_install'>install</span> <span class='id identifier rubyid_dep_or_name'>dep_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span>
  <span class='id identifier rubyid_available_set_for'>available_set_for</span> <span class='id identifier rubyid_dep_or_name'>dep_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span>

  <span class='ivar'>@installed_gems</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_gather_dependencies'>gather_dependencies</span>

  <span class='comment'># REFACTOR is the last gem always the one that the user requested?
</span>  <span class='comment'># This code assumes that but is that actually validated by the code?
</span>
  <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='ivar'>@gems_to_install</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span>
  <span class='ivar'>@gems_to_install</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='comment'># REFACTOR more current spec set hardcoding, should be abstracted?
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Specification</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>!=</span> <span class='id identifier rubyid_last'>last</span>

    <span class='comment'># TODO: make this sorta_verbose so other users can benefit from it
</span>    <span class='id identifier rubyid_say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Installing gem </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='const'>Gem</span><span class='period'>.</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_really_verbose'>really_verbose</span>

    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='ivar'>@available</span><span class='period'>.</span><span class='id identifier rubyid_source_for'>source_for</span> <span class='id identifier rubyid_spec'>spec</span>

    <span class='kw'>begin</span>
      <span class='comment'># REFACTOR make the fetcher to use configurable
</span>      <span class='id identifier rubyid_local_gem_path'>local_gem_path</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='ivar'>@cache_dir</span>
    <span class='kw'>rescue</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>RemoteFetcher</span><span class='op'>::</span><span class='const'>FetchError</span>
      <span class='comment'># TODO I doubt all fetch errors are recoverable, we should at least
</span>      <span class='comment'># report the errors probably.
</span>      <span class='kw'>next</span> <span class='kw'>if</span> <span class='ivar'>@force</span>
      <span class='id identifier rubyid_raise'>raise</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='ivar'>@development</span>
      <span class='kw'>if</span> <span class='ivar'>@dev_shallow</span>
        <span class='id identifier rubyid_is_dev'>is_dev</span> <span class='op'>=</span> <span class='ivar'>@toplevel_specs</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_is_dev'>is_dev</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_inst'>inst</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Installer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_local_gem_path'>local_gem_path</span><span class='comma'>,</span>
                              <span class='symbol'>:bin_dir</span>             <span class='op'>=&gt;</span> <span class='ivar'>@bin_dir</span><span class='comma'>,</span>
                              <span class='symbol'>:development</span>         <span class='op'>=&gt;</span> <span class='id identifier rubyid_is_dev'>is_dev</span><span class='comma'>,</span>
                              <span class='symbol'>:env_shebang</span>         <span class='op'>=&gt;</span> <span class='ivar'>@env_shebang</span><span class='comma'>,</span>
                              <span class='symbol'>:force</span>               <span class='op'>=&gt;</span> <span class='ivar'>@force</span><span class='comma'>,</span>
                              <span class='symbol'>:format_executable</span>   <span class='op'>=&gt;</span> <span class='ivar'>@format_executable</span><span class='comma'>,</span>
                              <span class='symbol'>:ignore_dependencies</span> <span class='op'>=&gt;</span> <span class='ivar'>@ignore_dependencies</span><span class='comma'>,</span>
                              <span class='symbol'>:install_dir</span>         <span class='op'>=&gt;</span> <span class='ivar'>@install_dir</span><span class='comma'>,</span>
                              <span class='symbol'>:security_policy</span>     <span class='op'>=&gt;</span> <span class='ivar'>@security_policy</span><span class='comma'>,</span>
                              <span class='symbol'>:user_install</span>        <span class='op'>=&gt;</span> <span class='ivar'>@user_install</span><span class='comma'>,</span>
                              <span class='symbol'>:wrappers</span>            <span class='op'>=&gt;</span> <span class='ivar'>@wrappers</span><span class='comma'>,</span>
                              <span class='symbol'>:build_args</span>          <span class='op'>=&gt;</span> <span class='ivar'>@build_args</span>

    <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='id identifier rubyid_inst'>inst</span><span class='period'>.</span><span class='id identifier rubyid_install'>install</span>

    <span class='ivar'>@installed_gems</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_spec'>spec</span>
  <span class='kw'>end</span>

  <span class='comment'># Since this is currently only called for docs, we can be lazy and just say
</span>  <span class='comment'># it&#39;s documentation. Ideally the hook adder could decide whether to be in
</span>  <span class='comment'># the background or not, and what to call it.
</span>  <span class='id identifier rubyid_in_background'>in_background</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Installing documentation</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='const'>Gem</span><span class='period'>.</span><span class='id identifier rubyid_done_installing_hooks'>done_installing_hooks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hook'>hook</span><span class='op'>|</span>
      <span class='id identifier rubyid_hook'>hook</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='ivar'>@installed_gems</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span> <span class='kw'>unless</span> <span class='const'>Gem</span><span class='period'>.</span><span class='id identifier rubyid_done_installing_hooks'>done_installing_hooks</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='ivar'>@installed_gems</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.0 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>