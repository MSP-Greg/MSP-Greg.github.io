<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: TZInfo::DataSource &mdash; TZInfo master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "TZInfo::DataSource",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>TZInfo master</a> &raquo; 
      <a href='../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../TZInfo.html" title="TZInfo (module)">TZInfo</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>DataSource&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: TZInfo::DataSource  <span class='abstract note title'>Abstract</span>
</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="DataSources/RubyDataSource.html" title="TZInfo::DataSources::RubyDataSource (class)">TZInfo::DataSources::RubyDataSource</a>, <a href="DataSources/ZoneinfoDataSource.html" title="TZInfo::DataSources::ZoneinfoDataSource (class)">TZInfo::DataSources::ZoneinfoDataSource</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L29'>lib/tzinfo/data_source.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'><p>To create a custom data source, create a subclass of <code>DataSource</code>
and implement the <a href="#load_timezone_info-instance_method" title="TZInfo::DataSource#load_timezone_info (method)">#load_timezone_info</a>, <a href="#data_timezone_identifiers-instance_method" title="TZInfo::DataSource#data_timezone_identifiers (method)">#data_timezone_identifiers</a>,
<a href="#linked_timezone_identifiers-instance_method" title="TZInfo::DataSource#linked_timezone_identifiers (method)">#linked_timezone_identifiers</a>, <a href="#load_country_info-instance_method" title="TZInfo::DataSource#load_country_info (method)">#load_country_info</a> and <a href="#country_codes-instance_method" title="TZInfo::DataSource#country_codes (method)">#country_codes</a>
methods.</p>
</div>
</div>
<p><a href="../TZInfo.html" title="TZInfo (module)"><code>::TZInfo</code></a> can be used with different data sources for time zone and country
data. Each source of data is implemented as a subclass of <code>DataSource</code>.</p>

<p>To choose a data source and override the default selection, use the
<a href="#set-class_method" title="TZInfo::DataSource.set (method)">.set</a> method.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#get-class_method" title=".get (class method)">.<strong>get</strong>  &#x21d2; DataSource </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>  &#x21d2; DataSource </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initializes a new <code>DataSource</code> instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set-class_method" title=".set (class method)">.<strong>set</strong>(data_source_or_type, *args)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the currently selected data source for time zone and country data.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#create_default_data_source-class_method" title=".create_default_data_source (class method)">.<strong>create_default_data_source</strong>  &#x21d2; DataSource </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <code>DataSource</code> instance for use as the default.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#country_codes-instance_method" title="#country_codes (instance method)">#<strong>country_codes</strong>  &#x21d2; Array&lt;String&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a frozen <code>Array</code> of all the available ISO 3166-1 alpha-2 country codes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#data_timezone_identifiers-instance_method" title="#data_timezone_identifiers (instance method)">#<strong>data_timezone_identifiers</strong>  &#x21d2; Array&lt;String&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a frozen <code>Array</code> of all the available time zone identifiers for data time zones (i.e. those that actually contain definitions).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eager_load!-instance_method" title="#eager_load! (instance method)">#<strong>eager_load!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Loads all timezone and country data into memory.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_country_info-instance_method" title="#get_country_info (instance method)">#<strong>get_country_info</strong>(code)  &#x21d2; DataSources::CountryInfo </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_timezone_info-instance_method" title="#get_timezone_info (instance method)">#<strong>get_timezone_info</strong>(identifier)  &#x21d2; DataSources::TimezoneInfo </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)"><code>DataSources::TimezoneInfo</code></a> instance for the given identifier.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#linked_timezone_identifiers-instance_method" title="#linked_timezone_identifiers (instance method)">#<strong>linked_timezone_identifiers</strong>  &#x21d2; Array&lt;String&gt; </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a frozen <code>Array</code> of all the available time zone identifiers that are links to other time zones.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#timezone_identifiers-instance_method" title="#timezone_identifiers (instance method)">#<strong>timezone_identifiers</strong>  &#x21d2; Array&lt;String&gt; </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; String </a>
    </span>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#load_country_info-instance_method" title="#load_country_info (instance method)">#<strong>load_country_info</strong>(code)  &#x21d2; DataSources::CountryInfo </a>
    </span>
    <span class='note title protected'>protected</span>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#load_timezone_info-instance_method" title="#load_timezone_info (instance method)">#<strong>load_timezone_info</strong>(identifier)  &#x21d2; DataSources::TimezoneInfo </a>
    </span>
    <span class='note title protected'>protected</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)"><code>DataSources::TimezoneInfo</code></a> instance for the given time zone identifier.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#lookup_country_info-instance_method" title="#lookup_country_info (instance method)">#<strong>lookup_country_info</strong>(hash, code, encoding = Encoding::UTF_8)  &#x21d2; DataSources::CountryInfo </a>
    </span>
    <span class='note title protected'>protected</span>
    <div class='summary_desc'>
      <div class='inline'><p>Looks up a given code in the given hash of code to <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)"><code>DataSources::CountryInfo</code></a> mappings.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#timezone_identifier_encoding-instance_method" title="#timezone_identifier_encoding (instance method)">#<strong>timezone_identifier_encoding</strong>  &#x21d2; Encoding </a>
    </span>
    <span class='note title protected'>protected</span>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#validate_timezone_identifier-instance_method" title="#validate_timezone_identifier (instance method)">#<strong>validate_timezone_identifier</strong>(identifier)  &#x21d2; String </a>
    </span>
    <span class='note title protected'>protected</span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks that the given identifier is a valid time zone identifier (can be found in the <a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a> <code>Array</code>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_timezone_identifiers-instance_method" title="#build_timezone_identifiers (instance method)">#<strong>build_timezone_identifiers</strong>  &#x21d2; Array&lt;String&gt; </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Combines <a href="#data_timezone_identifiers-instance_method" title="TZInfo::DataSource#data_timezone_identifiers (method)">#data_timezone_identifiers</a> and <a href="#linked_timezone_identifiers-instance_method" title="TZInfo::DataSource#linked_timezone_identifiers (method)">#linked_timezone_identifiers</a> to create an <code>Array</code> containing all valid time zone identifiers.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#find_timezone_identifier-instance_method" title="#find_timezone_identifier (instance method)">#<strong>find_timezone_identifier</strong>(identifier)  &#x21d2; String </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>If the given <code>identifier</code> is contained within the <a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a> <code>Array</code>, the <code>String</code> instance representing that identifier from <a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a> is returned.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#raise_invalid_data_source-instance_method" title="#raise_invalid_data_source (instance method)">#<strong>raise_invalid_data_source</strong>(method_name)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Raises <a href="InvalidDataSource.html" title="TZInfo::InvalidDataSource (class)"><code>InvalidDataSource</code></a> to indicate that a method has not been overridden by a particular data source implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#try_with_encoding-instance_method" title="#try_with_encoding (instance method)">#<strong>try_with_encoding</strong>(string, encoding) {|s| ... } &#x21d2; Object </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Tries an operation using <code>string</code> directly.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>  &#x21d2; <code>DataSource</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Initializes a new <code>DataSource</code> instance. Typically only called via
subclasses of <code>DataSource</code>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L166-L168'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='166' data-end='168'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 166</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='ivar'>@timezones</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Map</span>.<span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="create_default_data_source-class_method">
  <h3 class='signature priv first'>
    .<strong>create_default_data_source</strong>  &#x21d2; <code>DataSource</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Creates a <code>DataSource</code> instance for use as the default. Used if no
preference has been specified manually.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>DataSource</code>)</span>
&mdash;    <div class='inline'><p>the newly created default <code>DataSource</code> instance.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L145-L161'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='145' data-end='161'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 145</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_default_data_source'>create_default_data_source</span>
  <span class='id identifier rubyid_has_tzinfo_data'>has_tzinfo_data</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tzinfo/data</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_has_tzinfo_data'>has_tzinfo_data</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>rescue</span> <span class='const'>LoadError</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='const'><a href="DataSources.html" title="TZInfo::DataSources (module)">DataSources</a></span><span class='op'>::</span><span class='const'><a href="DataSources/RubyDataSource.html" title="TZInfo::DataSources::RubyDataSource (class)">RubyDataSource</a></span>.<span class='id identifier rubyid_new'><a href="DataSources/RubyDataSource.html#new-class_method" title="TZInfo::DataSources::RubyDataSource.new (method)">new</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_has_tzinfo_data'>has_tzinfo_data</span>

  <span class='kw'>begin</span>
    <span class='kw'>return</span> <span class='const'><a href="DataSources.html" title="TZInfo::DataSources (module)">DataSources</a></span><span class='op'>::</span><span class='const'><a href="DataSources/ZoneinfoDataSource.html" title="TZInfo::DataSources::ZoneinfoDataSource (class)">ZoneinfoDataSource</a></span>.<span class='id identifier rubyid_new'><a href="DataSources/ZoneinfoDataSource.html#new-class_method" title="TZInfo::DataSources::ZoneinfoDataSource.new (method)">new</a></span>
  <span class='kw'>rescue</span> <span class='const'><a href="DataSources.html" title="TZInfo::DataSources (module)">DataSources</a></span><span class='op'>::</span><span class='const'><a href="DataSources/ZoneinfoDirectoryNotFound.html" title="TZInfo::DataSources::ZoneinfoDirectoryNotFound (class)">ZoneinfoDirectoryNotFound</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="DataSourceNotFound.html" title="TZInfo::DataSourceNotFound (class)">DataSourceNotFound</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No source of timezone data could be found.\nPlease refer to https://tzinfo.github.io/datasourcenotfound for help resolving this error.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get-class_method">
  <h3 class='signature '>
    .<strong>get</strong>  &#x21d2; <code>DataSource</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>DataSource</code>)</span>
&mdash;    <div class='inline'><p>the currently selected source of data.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L42-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='42' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 42</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span>
  <span class='comment'># If a DataSource hasn&#39;t been manually set when the first request is
</span>  <span class='comment'># made to obtain a DataSource, then a default data source is created.
</span>  <span class='comment'>#
</span>  <span class='comment'># This is done at the first request rather than when TZInfo is loaded to
</span>  <span class='comment'># avoid unnecessary attempts to find a suitable DataSource.
</span>  <span class='comment'>#
</span>  <span class='comment'># A `Mutex` is used to ensure that only a single default instance is
</span>  <span class='comment'># created (this avoiding the possibility of retaining two copies of the
</span>  <span class='comment'># same data in memory).
</span>
  <span class='kw'>unless</span> <span class='cvar'>@@instance</span>
    <span class='cvar'>@@default_mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_set'><a href="#set-class_method" title="TZInfo::DataSource.set (method)">set</a></span>(<span class='id identifier rubyid_create_default_data_source'><a href="#create_default_data_source-class_method" title="TZInfo::DataSource.create_default_data_source (method)">create_default_data_source</a></span>) <span class='kw'>unless</span> <span class='cvar'>@@instance</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='cvar'>@@instance</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set-class_method">
  <h3 class='signature '>
    .<strong>set</strong>(data_source_or_type, *args)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Sets the currently selected data source for time zone and country data.</p>

<p>This should usually be set to one of the two standard data source types:</p>

<ul>
<li><code>:ruby</code> - read data from the Ruby modules included in the TZInfo::Data
library (tzinfo-data gem).</li>
<li><code>:zoneinfo</code> - read data from the zoneinfo files included with most
Unix-like operating systems (e.g. in /usr/share/zoneinfo).</li>
</ul>

<p>To set <a href="../TZInfo.html" title="TZInfo (module)"><code>::TZInfo</code></a> to use one of the standard data source types, call
<code>TZInfo::DataSource.set</code>` in one of the following ways:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../TZInfo.html" title="TZInfo (module)">TZInfo</a></span><span class='op'>::</span><span class='const'>DataSource</span>.<span class='id identifier rubyid_set'>set</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_ruby'>ruby</span>)
<span class='const'><a href="../TZInfo.html" title="TZInfo (module)">TZInfo</a></span><span class='op'>::</span><span class='const'>DataSource</span>.<span class='id identifier rubyid_set'>set</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_zoneinfo'>zoneinfo</span>)
<span class='const'><a href="../TZInfo.html" title="TZInfo (module)">TZInfo</a></span><span class='op'>::</span><span class='const'>DataSource</span>.<span class='id identifier rubyid_set'>set</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_zoneinfo'>zoneinfo</span><span class='comma'>,</span> <span class='id identifier rubyid_zoneinfo_dir'>zoneinfo_dir</span>)
<span class='const'><a href="../TZInfo.html" title="TZInfo (module)">TZInfo</a></span><span class='op'>::</span><span class='const'>DataSource</span>.<span class='id identifier rubyid_set'>set</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_zoneinfo'>zoneinfo</span><span class='comma'>,</span> <span class='id identifier rubyid_zoneinfo_dir'>zoneinfo_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_iso3166_tab_file'>iso3166_tab_file</span>)</code></pre>

<p><code>DataSource.set(:zoneinfo)</code> will automatically search for the zoneinfo
directory by checking the paths specified in
<a href="DataSources/ZoneinfoDataSource.html#search_path-class_method" title="TZInfo::DataSources::ZoneinfoDataSource.search_path (method)">DataSources::ZoneinfoDataSource.search_path</a>.
<a href="DataSources/ZoneinfoDirectoryNotFound.html" title="TZInfo::DataSources::ZoneinfoDirectoryNotFound (class)"><code>DataSources::ZoneinfoDirectoryNotFound</code></a> will be raised if no valid
zoneinfo directory could be found.</p>

<p><code>DataSource.set(:zoneinfo, zoneinfo_dir)</code> uses the specified
<code>zoneinfo_dir</code> directory as the data source. If the directory is not a
valid zoneinfo directory, a <a href="DataSources/InvalidZoneinfoDirectory.html" title="TZInfo::DataSources::InvalidZoneinfoDirectory (class)"><code>DataSources::InvalidZoneinfoDirectory</code></a>
exception will be raised.</p>

<p><code>DataSource.set(:zoneinfo, zoneinfo_dir, iso3166_tab_file)</code> uses the
specified <code>zoneinfo_dir</code> directory as the data source, but loads the
<code>iso3166.tab</code> file from the path given by <code>iso3166_tab_file</code>. If the
directory is not a valid zoneinfo directory, a
<a href="DataSources/InvalidZoneinfoDirectory.html" title="TZInfo::DataSources::InvalidZoneinfoDirectory (class)"><code>DataSources::InvalidZoneinfoDirectory</code></a> exception will be raised.</p>

<p>Custom data sources can be created by subclassing <code>DataSource</code> and
implementing the following methods:</p>

<ul>
<li><a href="#load_timezone_info-instance_method" title="TZInfo::DataSource#load_timezone_info (method)">#load_timezone_info</a></li>
<li><a href="#data_timezone_identifiers-instance_method" title="TZInfo::DataSource#data_timezone_identifiers (method)">#data_timezone_identifiers</a></li>
<li><a href="#linked_timezone_identifiers-instance_method" title="TZInfo::DataSource#linked_timezone_identifiers (method)">#linked_timezone_identifiers</a></li>
<li><a href="#load_country_info-instance_method" title="TZInfo::DataSource#load_country_info (method)">#load_country_info</a></li>
<li><a href="#country_codes-instance_method" title="TZInfo::DataSource#country_codes (method)">#country_codes</a></li>
</ul>

<p>To have <a href="../TZInfo.html" title="TZInfo (module)"><code>::TZInfo</code></a> use the custom data source, call <code>.set</code>,
passing an instance of the custom data source implementation as follows:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../TZInfo.html" title="TZInfo (module)">TZInfo</a></span><span class='op'>::</span><span class='const'>DataSource</span>.<span class='id identifier rubyid_set'>set</span>(<span class='const'>CustomDataSource</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="TZInfo::DataSource.new (method)">new</a></span>)</code></pre>

<p>Calling <code>.set</code> will only affect instances of <a href="Timezone.html" title="TZInfo::Timezone (class)"><code>Timezone</code></a> and
<a href="Country.html" title="TZInfo::Country (class)"><code>Country</code></a> obtained with <a href="Timezone.html#get-class_method" title="TZInfo::Timezone.get (method)">Timezone.get</a> and <a href="Country.html#get-class_method" title="TZInfo::Country.get (method)">Country.get</a> subsequent to
the <code>.set</code> call. Existing <a href="Timezone.html" title="TZInfo::Timezone (class)"><code>Timezone</code></a> and <a href="Country.html" title="TZInfo::Country (class)"><code>Country</code></a> instances
will be unaffected.</p>

<p>If <code>.set</code> is not called, <a href="../TZInfo.html" title="TZInfo (module)"><code>::TZInfo</code></a> will by default attempt to use
TZInfo::Data as the data source. If TZInfo::Data is not available (i.e.
if <code>require &#39;tzinfo/data&#39;</code> fails), then <a href="../TZInfo.html" title="TZInfo (module)"><code>::TZInfo</code></a> will search for a
zoneinfo directory instead (using the search path specified by
<a href="DataSources/ZoneinfoDataSource.html#search_path-class_method" title="TZInfo::DataSources::ZoneinfoDataSource.search_path (method)">DataSources::ZoneinfoDataSource.search_path</a>).</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>data_source_or_type</span>
    <span class='type'>(<code>Object</code>)</span>
&mdash;    <div class='inline'><p>either <code>:ruby</code>, <code>:zoneinfo</code> or an
instance of a <code>DataSource</code>.</p>
</div>
  </li>
  <li>
    <span class='name'>args</span>
    <span class='type'>(<code>Array</code>&lt;<code>Object</code>&gt;)</span>
&mdash;    <div class='inline'><p>when <code>data_source_or_type</code> is a symbol,
optional arguments to use when initializing the data source.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'><p>if <code>data_source_or_type</code> is not <code>:ruby</code>,
<code>:zoneinfo</code> or an instance of <code>DataSource</code>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L127-L137'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='127' data-end='137'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 127</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set'>set</span>(<span class='id identifier rubyid_data_source_or_type'>data_source_or_type</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_data_source_or_type'>data_source_or_type</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span>(<span class='const'>DataSource</span>)
    <span class='cvar'>@@instance</span> <span class='op'>=</span> <span class='id identifier rubyid_data_source_or_type'>data_source_or_type</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_data_source_or_type'>data_source_or_type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ruby'>ruby</span>
    <span class='cvar'>@@instance</span> <span class='op'>=</span> <span class='const'><a href="DataSources.html" title="TZInfo::DataSources (module)">DataSources</a></span><span class='op'>::</span><span class='const'><a href="DataSources/RubyDataSource.html" title="TZInfo::DataSources::RubyDataSource (class)">RubyDataSource</a></span>.<span class='id identifier rubyid_new'><a href="DataSources/RubyDataSource.html#new-class_method" title="TZInfo::DataSources::RubyDataSource.new (method)">new</a></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_data_source_or_type'>data_source_or_type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_zoneinfo'>zoneinfo</span>
    <span class='cvar'>@@instance</span> <span class='op'>=</span> <span class='const'><a href="DataSources.html" title="TZInfo::DataSources (module)">DataSources</a></span><span class='op'>::</span><span class='const'><a href="DataSources/ZoneinfoDataSource.html" title="TZInfo::DataSources::ZoneinfoDataSource (class)">ZoneinfoDataSource</a></span>.<span class='id identifier rubyid_new'><a href="DataSources/ZoneinfoDataSource.html#new-class_method" title="TZInfo::DataSources::ZoneinfoDataSource.new (method)">new</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data_source_or_type must be a DataSource instance or a data source type (:ruby or :zoneinfo)</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="build_timezone_identifiers-instance_method">
  <h3 class='signature priv first'>
    #<strong>build_timezone_identifiers</strong>  &#x21d2; <code>Array</code>&lt;<code>String</code>&gt;  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Combines <a href="#data_timezone_identifiers-instance_method" title="TZInfo::DataSource#data_timezone_identifiers (method)">#data_timezone_identifiers</a> and <a href="#linked_timezone_identifiers-instance_method" title="TZInfo::DataSource#linked_timezone_identifiers (method)">#linked_timezone_identifiers</a>
to create an <code>Array</code> containing all valid time zone identifiers. If
<a href="#linked_timezone_identifiers-instance_method" title="TZInfo::DataSource#linked_timezone_identifiers (method)">#linked_timezone_identifiers</a> is empty, the <a href="#data_timezone_identifiers-instance_method" title="TZInfo::DataSource#data_timezone_identifiers (method)">#data_timezone_identifiers</a>
instance is returned.</p>

<p>The returned <code>Array</code> is frozen. The identifiers are sorted according to
<code>String#<=></code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Array</code>&lt;<code>String</code>&gt;)</span>
&mdash;    <div class='inline'><p>an <code>Array</code> containing all valid time zone
identifiers.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L366-L370'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='366' data-end='370'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 366</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_timezone_identifiers'>build_timezone_identifiers</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_data_timezone_identifiers'><a href="#data_timezone_identifiers-instance_method" title="TZInfo::DataSource#data_timezone_identifiers (method)">data_timezone_identifiers</a></span>
  <span class='id identifier rubyid_linked'>linked</span> <span class='op'>=</span> <span class='id identifier rubyid_linked_timezone_identifiers'><a href="#linked_timezone_identifiers-instance_method" title="TZInfo::DataSource#linked_timezone_identifiers (method)">linked_timezone_identifiers</a></span>
  <span class='id identifier rubyid_linked'>linked</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>:</span> (<span class='id identifier rubyid_data'>data</span> <span class='op'>+</span> <span class='id identifier rubyid_linked'>linked</span>).<span class='id identifier rubyid_sort!'>sort!</span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="country_codes-instance_method">
  <h3 class='signature '>
    #<strong>country_codes</strong>  &#x21d2; <code>Array</code>&lt;<code>String</code>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a frozen <code>Array</code> of all the available ISO 3166-1 alpha-2 country
codes. The identifiers are sorted according to <code>String#<=></code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Array</code>&lt;<code>String</code>&gt;)</span>
&mdash;    <div class='inline'><p>a frozen <code>Array</code> of all the available ISO 3166-1
alpha-2 country codes.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L246-L248'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='246' data-end='248'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 246</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_country_codes'>country_codes</span>
  <span class='id identifier rubyid_raise_invalid_data_source'><a href="#raise_invalid_data_source-instance_method" title="TZInfo::DataSource#raise_invalid_data_source (method)">raise_invalid_data_source</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>country_codes</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="data_timezone_identifiers-instance_method">
  <h3 class='signature '>
    #<strong>data_timezone_identifiers</strong>  &#x21d2; <code>Array</code>&lt;<code>String</code>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a frozen <code>Array</code> of all the available time zone identifiers for
data time zones (i.e. those that actually contain definitions). The
identifiers are sorted according to <code>String#<=></code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Array</code>&lt;<code>String</code>&gt;)</span>
&mdash;    <div class='inline'><p>a frozen <code>Array</code> of all the available time zone
identifiers for data time zones.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L218-L220'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='218' data-end='220'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 218</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_data_timezone_identifiers'>data_timezone_identifiers</span>
  <span class='id identifier rubyid_raise_invalid_data_source'><a href="#raise_invalid_data_source-instance_method" title="TZInfo::DataSource#raise_invalid_data_source (method)">raise_invalid_data_source</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data_timezone_identifiers</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eager_load!-instance_method">
  <h3 class='signature '>
    #<strong>eager_load!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Loads all timezone and country data into memory.</p>

<p>This may be desirable in production environments to improve copy-on-write
performance and to avoid flushing the constant cache every time a new
timezone or country is loaded from <a href="DataSources/RubyDataSource.html" title="TZInfo::DataSources::RubyDataSource (class)"><code>DataSources::RubyDataSource</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L255-L259'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='255' data-end='259'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 255</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_eager_load!'>eager_load!</span>
  <span class='id identifier rubyid_timezone_identifiers'><a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">timezone_identifiers</a></span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_identifier'>identifier</span><span class='op'>|</span> <span class='id identifier rubyid_load_timezone_info'><a href="#load_timezone_info-instance_method" title="TZInfo::DataSource#load_timezone_info (method)">load_timezone_info</a></span>(<span class='id identifier rubyid_identifier'>identifier</span>) }
  <span class='id identifier rubyid_country_codes'><a href="#country_codes-instance_method" title="TZInfo::DataSource#country_codes (method)">country_codes</a></span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_code'>code</span><span class='op'>|</span> <span class='id identifier rubyid_load_country_info'><a href="#load_country_info-instance_method" title="TZInfo::DataSource#load_country_info (method)">load_country_info</a></span>(<span class='id identifier rubyid_code'>code</span>) }
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="find_timezone_identifier-instance_method">
  <h3 class='signature priv'>
    #<strong>find_timezone_identifier</strong>(identifier)  &#x21d2; <code>String</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>If the given <code>identifier</code> is contained within the <a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a>
<code>Array</code>, the <code>String</code> instance representing that identifier from
<a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a> is returned. Otherwise, <code>nil</code> is returned.</p>

<p>:nocov_array_bsearch:</p>

<p>See additional method definition at line 382.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>identifier</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>A time zone identifier to search for.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>the <code>String</code> instance representing <code>identifier</code> from
<a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a> if found, or <code>nil</code> if not found.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L398-L402'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='398' data-end='402'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 398</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_find_timezone_identifier'>find_timezone_identifier</span>(<span class='id identifier rubyid_identifier'>identifier</span>)

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_timezone_identifiers'><a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">timezone_identifiers</a></span>.<span class='id identifier rubyid_bsearch'>bsearch</span> {<span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_identifier'>identifier</span> }
  <span class='id identifier rubyid_result'>result</span> <span class='op'>==</span> <span class='id identifier rubyid_identifier'>identifier</span> <span class='op'>?</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_country_info-instance_method">
  <h3 class='signature '>
    #<strong>get_country_info</strong>(code)  &#x21d2; <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)">DataSources::CountryInfo</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>code</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>an ISO 3166-1 alpha-2 country code.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)">DataSources::CountryInfo</a>)</span>
&mdash;    <div class='inline'><p>a <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)"><code>DataSources::CountryInfo</code></a> instance
for the given ISO 3166-1 alpha-2 country code.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InvalidCountryCode.html" title="TZInfo::InvalidCountryCode (class)">InvalidCountryCode</a>)</span>
&mdash;    <div class='inline'><p>if the country could not be found or the code
is invalid.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L237-L239'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='237' data-end='239'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 237</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_country_info'>get_country_info</span>(<span class='id identifier rubyid_code'>code</span>)
  <span class='id identifier rubyid_load_country_info'><a href="#load_country_info-instance_method" title="TZInfo::DataSource#load_country_info (method)">load_country_info</a></span>(<span class='id identifier rubyid_code'>code</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_timezone_info-instance_method">
  <h3 class='signature '>
    #<strong>get_timezone_info</strong>(identifier)  &#x21d2; <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)">DataSources::TimezoneInfo</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)"><code>DataSources::TimezoneInfo</code></a> instance for the given identifier.
The result will derive from either <a href="DataSources/DataTimezoneInfo.html" title="TZInfo::DataSources::DataTimezoneInfo (class)"><code>DataSources::DataTimezoneInfo</code></a> for
time zones that define their own data or <a href="DataSources/LinkedTimezoneInfo.html" title="TZInfo::DataSources::LinkedTimezoneInfo (class)"><code>DataSources::LinkedTimezoneInfo</code></a>
for links or aliases to other time zones.</p>

<p><code>get_timezone_info</code> calls <a href="#load_timezone_info-instance_method" title="TZInfo::DataSource#load_timezone_info (method)">#load_timezone_info</a> to create the
<a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)"><code>DataSources::TimezoneInfo</code></a> instance. The returned instance is cached and
returned in subsequent calls to <code>get_timezone_info</code> for the identifier.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>identifier</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>A time zone identifier.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)">DataSources::TimezoneInfo</a>)</span>
&mdash;    <div class='inline'><p>a <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)"><code>DataSources::TimezoneInfo</code></a> instance
for a given identifier.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InvalidTimezoneIdentifier.html" title="TZInfo::InvalidTimezoneIdentifier (class)">InvalidTimezoneIdentifier</a>)</span>
&mdash;    <div class='inline'><p>if the time zone is not found or the
identifier is invalid.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L184-L200'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='184' data-end='200'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 184</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_timezone_info'>get_timezone_info</span>(<span class='id identifier rubyid_identifier'>identifier</span>)
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='ivar'>@timezones</span>[<span class='id identifier rubyid_identifier'>identifier</span>]

  <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span>
    <span class='comment'># Thread-safety: It is possible that multiple equivalent TimezoneInfo
</span>    <span class='comment'># instances could be created here in concurrently executing threads. The
</span>    <span class='comment'># consequences of this are that the data may be loaded more than once
</span>    <span class='comment'># (depending on the data source). The performance benefit of ensuring
</span>    <span class='comment'># that only a single instance is created is unlikely to be worth the
</span>    <span class='comment'># overhead of only allowing one TimezoneInfo to be loaded at a time.
</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_load_timezone_info'><a href="#load_timezone_info-instance_method" title="TZInfo::DataSource#load_timezone_info (method)">load_timezone_info</a></span>(<span class='id identifier rubyid_identifier'>identifier</span>)
    <span class='ivar'>@timezones</span>[<span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_identifier'>identifier</span>] <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>the internal object state as a programmer-readable
<code>String</code>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L268-L270'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='268' data-end='270'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 268</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="linked_timezone_identifiers-instance_method">
  <h3 class='signature '>
    #<strong>linked_timezone_identifiers</strong>  &#x21d2; <code>Array</code>&lt;<code>String</code>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a frozen <code>Array</code> of all the available time zone identifiers that
are links to other time zones. The identifiers are sorted according to
<code>String#<=></code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Array</code>&lt;<code>String</code>&gt;)</span>
&mdash;    <div class='inline'><p>a frozen <code>Array</code> of all the available time zone
identifiers that are links to other time zones.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L228-L230'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='228' data-end='230'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 228</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_linked_timezone_identifiers'>linked_timezone_identifiers</span>
  <span class='id identifier rubyid_raise_invalid_data_source'><a href="#raise_invalid_data_source-instance_method" title="TZInfo::DataSource#raise_invalid_data_source (method)">raise_invalid_data_source</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>linked_timezone_identifiers</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_country_info-instance_method">
  <h3 class='signature prot'>
    #<strong>load_country_info</strong>(code)  &#x21d2; <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)">DataSources::CountryInfo</a>  <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>code</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>an ISO 3166-1 alpha-2 country code.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)">DataSources::CountryInfo</a>)</span>
&mdash;    <div class='inline'><p>a <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)"><code>DataSources::CountryInfo</code></a> instance
for the given ISO 3166-1 alpha-2 country code.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InvalidCountryCode.html" title="TZInfo::InvalidCountryCode (class)">InvalidCountryCode</a>)</span>
&mdash;    <div class='inline'><p>if the country could not be found or the code
is invalid.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L294-L296'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='294' data-end='296'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 294</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_country_info'>load_country_info</span>(<span class='id identifier rubyid_code'>code</span>)
  <span class='id identifier rubyid_raise_invalid_data_source'><a href="#raise_invalid_data_source-instance_method" title="TZInfo::DataSource#raise_invalid_data_source (method)">raise_invalid_data_source</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>load_country_info</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_timezone_info-instance_method">
  <h3 class='signature prot'>
    #<strong>load_timezone_info</strong>(identifier)  &#x21d2; <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)">DataSources::TimezoneInfo</a>  <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)"><code>DataSources::TimezoneInfo</code></a> instance for the given time zone
identifier. The result should derive from either
<a href="DataSources/DataTimezoneInfo.html" title="TZInfo::DataSources::DataTimezoneInfo (class)"><code>DataSources::DataTimezoneInfo</code></a> for time zones that define their own data
or <a href="DataSources/LinkedTimezoneInfo.html" title="TZInfo::DataSources::LinkedTimezoneInfo (class)"><code>DataSources::LinkedTimezoneInfo</code></a> for links to or aliases for other
time zones.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>identifier</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>A time zone identifier.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)">DataSources::TimezoneInfo</a>)</span>
&mdash;    <div class='inline'><p>a <a href="DataSources/TimezoneInfo.html" title="TZInfo::DataSources::TimezoneInfo (class)"><code>DataSources::TimezoneInfo</code></a> instance
for the given time zone identifier.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InvalidTimezoneIdentifier.html" title="TZInfo::InvalidTimezoneIdentifier (class)">InvalidTimezoneIdentifier</a>)</span>
&mdash;    <div class='inline'><p>if the time zone is not found or the
identifier is invalid.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L285-L287'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='285' data-end='287'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 285</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_timezone_info'>load_timezone_info</span>(<span class='id identifier rubyid_identifier'>identifier</span>)
  <span class='id identifier rubyid_raise_invalid_data_source'><a href="#raise_invalid_data_source-instance_method" title="TZInfo::DataSource#raise_invalid_data_source (method)">raise_invalid_data_source</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>load_timezone_info</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lookup_country_info-instance_method">
  <h3 class='signature prot'>
    #<strong>lookup_country_info</strong>(hash, code, encoding = Encoding::UTF_8)  &#x21d2; <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)">DataSources::CountryInfo</a>  <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Looks up a given code in the given hash of code to
<a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)"><code>DataSources::CountryInfo</code></a> mappings. If the code is found the
<a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)"><code>DataSources::CountryInfo</code></a> is returned. Otherwise an <a href="InvalidCountryCode.html" title="TZInfo::InvalidCountryCode (class)"><code>InvalidCountryCode</code></a>
exception is raised.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>hash</span>
    <span class='type'>(<code>String</code>, <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)">DataSources::CountryInfo</a>)</span>
&mdash;    <div class='inline'><p>a mapping from ISO 3166-1
alpha-2 country codes to <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)"><code>DataSources::CountryInfo</code></a> instances.</p>
</div>
  </li>
  <li>
    <span class='name'>code</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>a country code to lookup.</p>
</div>
  </li>
  <li>
    <span class='name'>encoding</span>
    <span class='type'>(<code>Encoding</code>)</span>
    <em class='default'>(defaults to: <tt>Encoding::UTF_8</tt>)</em>
&mdash;    <div class='inline'><p>the encoding used for the country codes in
<code>hash</code>.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)">DataSources::CountryInfo</a>)</span>
&mdash;    <div class='inline'><p>the <a href="DataSources/CountryInfo.html" title="TZInfo::DataSources::CountryInfo (class)"><code>DataSources::CountryInfo</code></a> instance
corresponding to <code>code</code>.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InvalidCountryCode.html" title="TZInfo::InvalidCountryCode (class)">InvalidCountryCode</a>)</span>
&mdash;    <div class='inline'><p>if <code>code</code> was not found in <code>hash</code>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L337-L344'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='337' data-end='344'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 337</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lookup_country_info'>lookup_country_info</span>(<span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="InvalidCountryCode.html" title="TZInfo::InvalidCountryCode (class)">InvalidCountryCode</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid country code: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_code'>code</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nil</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_code'>code</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_code'>code</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span>(<span class='const'>String</span>)

  <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='id identifier rubyid_try_with_encoding'><a href="#try_with_encoding-instance_method" title="TZInfo::DataSource#try_with_encoding (method)">try_with_encoding</a></span>(<span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span>) {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_hash'>hash</span>[<span class='id identifier rubyid_c'>c</span>] }
  <span class='kw'>return</span> <span class='id identifier rubyid_info'>info</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="InvalidCountryCode.html" title="TZInfo::InvalidCountryCode (class)">InvalidCountryCode</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid country code: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_code'>code</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_invalid_data_source-instance_method">
  <h3 class='signature priv'>
    #<strong>raise_invalid_data_source</strong>(method_name)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Raises <a href="InvalidDataSource.html" title="TZInfo::InvalidDataSource (class)"><code>InvalidDataSource</code></a> to indicate that a method has not been
overridden by a particular data source implementation.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InvalidDataSource.html" title="TZInfo::InvalidDataSource (class)">InvalidDataSource</a>)</span>
&mdash;    <div class='inline'><p>always.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L352-L354'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='352' data-end='354'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 352</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_raise_invalid_data_source'>raise_invalid_data_source</span>(<span class='id identifier rubyid_method_name'>method_name</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="InvalidDataSource.html" title="TZInfo::InvalidDataSource (class)">InvalidDataSource</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> not defined</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timezone_identifier_encoding-instance_method">
  <h3 class='signature prot'>
    #<strong>timezone_identifier_encoding</strong>  &#x21d2; <code>Encoding</code>  <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Encoding</code>)</span>
&mdash;    <div class='inline'><p>the <code>Encoding</code> used by the <code>String</code> instances returned
by <a href="#data_timezone_identifiers-instance_method" title="TZInfo::DataSource#data_timezone_identifiers (method)">#data_timezone_identifiers</a> and <a href="#linked_timezone_identifiers-instance_method" title="TZInfo::DataSource#linked_timezone_identifiers (method)">#linked_timezone_identifiers</a>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L300-L302'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='300' data-end='302'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 300</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_timezone_identifier_encoding'>timezone_identifier_encoding</span>
  <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timezone_identifiers-instance_method">
  <h3 class='signature '>
    #<strong>timezone_identifiers</strong>  &#x21d2; <code>Array</code>&lt;<code>String</code>&gt; 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Array</code>&lt;<code>String</code>&gt;)</span>
&mdash;    <div class='inline'><p>a frozen <code>Array</code>` of all the available time zone
identifiers. The identifiers are sorted according to <code>String#<=></code>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L204-L210'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='204' data-end='210'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 204</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_timezone_identifiers'>timezone_identifiers</span>
  <span class='comment'># Thread-safety: It is possible that the value of @timezone_identifiers
</span>  <span class='comment'># may be calculated multiple times in concurrently executing threads. It
</span>  <span class='comment'># is not worth the overhead of locking to ensure that
</span>  <span class='comment'># @timezone_identifiers is only calculated once.
</span>  <span class='ivar'>@timezone_identifiers</span> <span class='op'>||=</span> <span class='id identifier rubyid_build_timezone_identifiers'><a href="#build_timezone_identifiers-instance_method" title="TZInfo::DataSource#build_timezone_identifiers (method)">build_timezone_identifiers</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_s-instance_method">
  <h3 class='signature '>
    #<strong>to_s</strong>  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>a description of the <code>DataSource</code>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L262-L264'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='262' data-end='264'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 262</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Default DataSource</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="try_with_encoding-instance_method">
  <h3 class='signature priv'>
    #<strong>try_with_encoding</strong>(string, encoding) {|s| ... } &#x21d2; <code>Object</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Tries an operation using <code>string</code> directly. If the operation fails, the
string is copied and encoded with <code>encoding</code> and the operation is tried
again.</p>

<p>fails and <code>string</code> is already encoded with <code>encoding</code>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>string</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>The <code>String</code> to perform the operation on.</p>
</div>
  </li>
  <li>
    <span class='name'>encoding</span>
    <span class='type'>(<code>Encoding</code>)</span>
&mdash;    <div class='inline'><p>The <code>Encoding</code> to use if the initial attempt
fails.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<code>s</code>)</span>
&mdash;    <div class='inline'><p>the caller will be yielded to once or twice to attempt the
operation.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Yield Parameters:</p>
<ul class='yieldparam'>
  <li>
    <span class='name'>s</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>either <code>string</code> or an encoded copy of <code>string</code>.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Yield Returns:</p>
<ul class='yieldreturn'>
  <li>
    <span class='type'>(<code>Object</code>)</span>
&mdash;    <div class='inline'><p>The result of the operation. Must be truthy if
successful.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Object</code>)</span>
&mdash;    <div class='inline'><p>the result of the operation or <code>nil</code> if the first attempt</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L436-L444'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='436' data-end='444'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 436</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_try_with_encoding'>try_with_encoding</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span>)
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>yield</span> <span class='id identifier rubyid_string'>string</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>==</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_encoding'>encoding</span>
    <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='id identifier rubyid_encoding'>encoding</span>)
    <span class='kw'>yield</span> <span class='id identifier rubyid_string'>string</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_timezone_identifier-instance_method">
  <h3 class='signature prot'>
    #<strong>validate_timezone_identifier</strong>(identifier)  &#x21d2; <code>String</code>  <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Checks that the given identifier is a valid time zone identifier (can be
found in the <a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a> <code>Array</code>). If the identifier is valid,
the <code>String</code> instance representing that identifier from
<a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a> is returned. Otherwise an
<a href="InvalidTimezoneIdentifier.html" title="TZInfo::InvalidTimezoneIdentifier (class)"><code>InvalidTimezoneIdentifier</code></a> exception is raised.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>identifier</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>a time zone identifier to be validated.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'><p>the <code>String</code> instance equivalent to <code>identifier</code> from
<a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a>.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="InvalidTimezoneIdentifier.html" title="TZInfo::InvalidTimezoneIdentifier (class)">InvalidTimezoneIdentifier</a>)</span>
&mdash;    <div class='inline'><p>if <code>identifier</code> was not found in
<a href="#timezone_identifiers-instance_method" title="TZInfo::DataSource#timezone_identifiers (method)">#timezone_identifiers</a>.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/tzinfo/tzinfo/blob/master/lib/tzinfo/data_source.rb#L315-L322'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='315' data-end='322'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/tzinfo/data_source.rb', line 315</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_timezone_identifier'>validate_timezone_identifier</span>(<span class='id identifier rubyid_identifier'>identifier</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="InvalidTimezoneIdentifier.html" title="TZInfo::InvalidTimezoneIdentifier (class)">InvalidTimezoneIdentifier</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid identifier: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_identifier'>identifier</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nil</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_identifier'>identifier</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span>(<span class='const'>String</span>)

  <span class='id identifier rubyid_valid_identifier'>valid_identifier</span> <span class='op'>=</span> <span class='id identifier rubyid_try_with_encoding'><a href="#try_with_encoding-instance_method" title="TZInfo::DataSource#try_with_encoding (method)">try_with_encoding</a></span>(<span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_timezone_identifier_encoding'><a href="#timezone_identifier_encoding-instance_method" title="TZInfo::DataSource#timezone_identifier_encoding (method)">timezone_identifier_encoding</a></span>) {<span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span> <span class='id identifier rubyid_find_timezone_identifier'><a href="#find_timezone_identifier-instance_method" title="TZInfo::DataSource#find_timezone_identifier (method)">find_timezone_identifier</a></span>(<span class='id identifier rubyid_id'>id</span>) }
  <span class='kw'>return</span> <span class='id identifier rubyid_valid_identifier'>valid_identifier</span> <span class='kw'>if</span> <span class='id identifier rubyid_valid_identifier'>valid_identifier</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="InvalidTimezoneIdentifier.html" title="TZInfo::InvalidTimezoneIdentifier (class)">InvalidTimezoneIdentifier</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid identifier: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_identifier'>identifier</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>