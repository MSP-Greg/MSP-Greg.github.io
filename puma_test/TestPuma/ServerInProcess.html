<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: TestPuma::ServerInProcess &mdash; Puma-test</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "TestPuma::ServerInProcess",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Puma-test</a> &raquo; 
      <a href='../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../TestPuma.html" title="TestPuma (module)">TestPuma</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ServerInProcess&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: TestPuma::ServerInProcess</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="ServerBase.html" title="TestPuma::ServerBase (class)"><code>ServerBase</code></a>,
          Minitest::Test
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="ServerBase.html" title="TestPuma::ServerBase (class)"><code>ServerBase</code></a>,
          <a href="PumaSocket.html" title="TestPuma::PumaSocket (module)"><code>PumaSocket</code></a>,
          <a href="../TestPuma.html" title="TestPuma (module)"><code>::TestPuma</code></a>,
          Minitest::Test
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="ServerBase.html" title="TestPuma::ServerBase (class)">TestPuma::ServerBase</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'>Minitest::Test</li>
          <li class='next'><a href="ServerBase.html" title="TestPuma::ServerBase (class)">TestPuma::ServerBase</a></li>
          <li class='next'>TestPuma::ServerInProcess</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L13'>test/helpers/test_puma/server_in_process.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates in-process <a href="../Puma/Server.html" title="Puma::Server (class)"><code>Server</code></a>‘s.  These can be created either by using <a href="#cli_run-instance_method" title="TestPuma::ServerInProcess#cli_run (method)">#cli_run</a> (using <code>Puma::CLI.new.run</code>)  or <a href="#server_run-instance_method" title="TestPuma::ServerInProcess#server_run (method)">#server_run</a> (using`Puma::Server.new.run`).</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='APP_URL_SCHEME-constant' class='summary_signature'>APP_URL_SCHEME =</span>
    <br/>
    <a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L17-L17'># File 'test/helpers/test_puma/server_in_process.rb', line 17</a>    <pre class='code ruby'><span class='tlambda'>-&gt;</span>(<span class='id identifier rubyid_env'>env</span>) <span class='tlambeg'>{</span> [<span class='int'>200</span><span class='comma'>,</span> {}<span class='comma'>,</span> [<span class='id identifier rubyid_env'>env</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rack.url_scheme</span><span class='tstring_end'>&#39;</span></span>]]] }</pre>
  </li>
  <li>
    <span id='DFLT_SSL_CTX-constant' class='summary_signature'>DFLT_SSL_CTX =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Don’t set anything if already set cia ctx proc</p>

  </div>
</div>
    <a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L20-L36'># File 'test/helpers/test_puma/server_in_process.rb', line 20</a>    <pre class='code ruby'>begin
  if ::Puma::HAS_SSL
    #=&gt; (ctx) {
      cert_path = File.expand_path &quot;../../../examples/puma&quot;, __dir__
      if Puma::IS_JRUBY
        ctx.keystore      ||= &quot;#{cert_path}/keystore.jks&quot;
        ctx.keystore_pass ||= &#39;jruby_puma&#39;
      elsif !(ctx.cert || ctx.cert_pem || ctx.key || ctx.key_pem)
        ctx.key  = &quot;#{cert_path}/puma_keypair.pem&quot;
        ctx.cert = &quot;#{cert_path}/cert_puma.pem&quot;
      end
      ctx.verify_mode ||= Puma::MiniSSL::VERIFY_NONE
    }
  else
    nil
  end
end</pre>
  </li>
</ul>
  <h3 class='inherited'><a href="../TestPuma.html" title="TestPuma (module)"><code>::TestPuma</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="../TestPuma.html#AFTER_RUN_OK-constant" title="TestPuma::AFTER_RUN_OK (constant)">AFTER_RUN_OK</a>, 
    <a href="../TestPuma.html#ALT_HOST-constant" title="TestPuma::ALT_HOST (constant)">ALT_HOST</a>, 
    <a href="../TestPuma.html#DARWIN-constant" title="TestPuma::DARWIN (constant)">DARWIN</a>, 
    <a href="../TestPuma.html#DEBUGGING_INFO-constant" title="TestPuma::DEBUGGING_INFO (constant)">DEBUGGING_INFO</a>, 
    <a href="../TestPuma.html#DEBUGGING_PIDS-constant" title="TestPuma::DEBUGGING_PIDS (constant)">DEBUGGING_PIDS</a>, 
    <a href="../TestPuma.html#HOST-constant" title="TestPuma::HOST (constant)">HOST</a>, 
    <a href="../TestPuma.html#HOST4-constant" title="TestPuma::HOST4 (constant)">HOST4</a>, 
    <a href="../TestPuma.html#HOST6-constant" title="TestPuma::HOST6 (constant)">HOST6</a>, 
    <a href="../TestPuma.html#IS_GITHUB_ACTIONS-constant" title="TestPuma::IS_GITHUB_ACTIONS (constant)">IS_GITHUB_ACTIONS</a>, 
    <a href="../TestPuma.html#LINE_SPLIT-constant" title="TestPuma::LINE_SPLIT (constant)">LINE_SPLIT</a>, 
    <a href="../TestPuma.html#LOCALHOST-constant" title="TestPuma::LOCALHOST (constant)">LOCALHOST</a>, 
    <a href="../TestPuma.html#PUMA_CI_TMPDIR-constant" title="TestPuma::PUMA_CI_TMPDIR (constant)">PUMA_CI_TMPDIR</a>, 
    <a class='priv ' href="../TestPuma.html#RANDOM-constant" title="TestPuma::RANDOM (constant)">RANDOM</a>, 
    <a href="../TestPuma.html#RESP_SPLIT-constant" title="TestPuma::RESP_SPLIT (constant)">RESP_SPLIT</a>, 
    <a href="../TestPuma.html#RE_HOST_TO_IP-constant" title="TestPuma::RE_HOST_TO_IP (constant)">RE_HOST_TO_IP</a>, 
    <a href="../TestPuma.html#TOKEN-constant" title="TestPuma::TOKEN (constant)">TOKEN</a>, 
    <a class='priv ' href="../TestPuma.html#UNUSABLE_CHARS-constant" title="TestPuma::UNUSABLE_CHARS (constant)">UNUSABLE_CHARS</a>
  </p>
  <h3 class='inherited'><a href="PumaSocket.html" title="TestPuma::PumaSocket (module)"><code>PumaSocket</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="PumaSocket.html#EMPTY_200-constant" title="TestPuma::PumaSocket::EMPTY_200 (constant)">EMPTY_200</a>, 
    <a href="PumaSocket.html#GET_10-constant" title="TestPuma::PumaSocket::GET_10 (constant)">GET_10</a>, 
    <a href="PumaSocket.html#GET_11-constant" title="TestPuma::PumaSocket::GET_11 (constant)">GET_11</a>, 
    <a href="PumaSocket.html#GET_11_CLOSE-constant" title="TestPuma::PumaSocket::GET_11_CLOSE (constant)">GET_11_CLOSE</a>, 
    <a href="PumaSocket.html#HELLO_11-constant" title="TestPuma::PumaSocket::HELLO_11 (constant)">HELLO_11</a>, 
    <a href="PumaSocket.html#NO_ENTITY_BODY-constant" title="TestPuma::PumaSocket::NO_ENTITY_BODY (constant)">NO_ENTITY_BODY</a>, 
    <a href="PumaSocket.html#OPENSSL_3-constant" title="TestPuma::PumaSocket::OPENSSL_3 (constant)">OPENSSL_3</a>, 
    <a href="PumaSocket.html#PROTOCOL_USE_MIN_MAX-constant" title="TestPuma::PumaSocket::PROTOCOL_USE_MIN_MAX (constant)">PROTOCOL_USE_MIN_MAX</a>, 
    <a href="PumaSocket.html#READ_BODY-constant" title="TestPuma::PumaSocket::READ_BODY (constant)">READ_BODY</a>, 
    <a href="PumaSocket.html#READ_RESPONSE-constant" title="TestPuma::PumaSocket::READ_RESPONSE (constant)">READ_RESPONSE</a>, 
    <a href="PumaSocket.html#REQ_WRITE-constant" title="TestPuma::PumaSocket::REQ_WRITE (constant)">REQ_WRITE</a>, 
    <a href="PumaSocket.html#RESP_READ_LEN-constant" title="TestPuma::PumaSocket::RESP_READ_LEN (constant)">RESP_READ_LEN</a>, 
    <a href="PumaSocket.html#RESP_READ_TIMEOUT-constant" title="TestPuma::PumaSocket::RESP_READ_TIMEOUT (constant)">RESP_READ_TIMEOUT</a>, 
    <a href="PumaSocket.html#SEND_REQUEST-constant" title="TestPuma::PumaSocket::SEND_REQUEST (constant)">SEND_REQUEST</a>, 
    <a href="PumaSocket.html#SET_TCP_NODELAY-constant" title="TestPuma::PumaSocket::SET_TCP_NODELAY (constant)">SET_TCP_NODELAY</a>, 
    <a href="PumaSocket.html#UTF8-constant" title="TestPuma::PumaSocket::UTF8 (constant)">UTF8</a>
  </p>
  <h3 class='inherited'><a href="ServerBase.html" title="TestPuma::ServerBase (class)"><code>ServerBase</code></a> - Inherited</h3>
  <p  class='inherited'>
    <a href="ServerBase.html#CERT_PATH-constant" title="TestPuma::ServerBase::CERT_PATH (constant)">CERT_PATH</a>, 
    <a href="ServerBase.html#CLIENT_CERTS_PATH-constant" title="TestPuma::ServerBase::CLIENT_CERTS_PATH (constant)">CLIENT_CERTS_PATH</a>, 
    <a href="ServerBase.html#DFLT_SSL_QUERY-constant" title="TestPuma::ServerBase::DFLT_SSL_QUERY (constant)">DFLT_SSL_QUERY</a>, 
    <a href="ServerBase.html#HAS_TLS_1_3-constant" title="TestPuma::ServerBase::HAS_TLS_1_3 (constant)">HAS_TLS_1_3</a>, 
    <a href="ServerBase.html#HELLO_RU-constant" title="TestPuma::ServerBase::HELLO_RU (constant)">HELLO_RU</a>, 
    <a href="ServerBase.html#MINI_FORCE_PEER-constant" title="TestPuma::ServerBase::MINI_FORCE_PEER (constant)">MINI_FORCE_PEER</a>, 
    <a href="ServerBase.html#MINI_VERIFY_NONE-constant" title="TestPuma::ServerBase::MINI_VERIFY_NONE (constant)">MINI_VERIFY_NONE</a>, 
    <a href="ServerBase.html#MINI_VERIFY_PEER-constant" title="TestPuma::ServerBase::MINI_VERIFY_PEER (constant)">MINI_VERIFY_PEER</a>
  </p>
</div>

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#after_teardown-instance_method" title="#after_teardown (instance method)">#<strong>after_teardown</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#before_setup-instance_method" title="#before_setup (instance method)">#<strong>before_setup</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cli_new-instance_method" title="#cli_new (instance method)">#<strong>cli_new</strong>(opts = [])  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a server via a <a href="../Puma/CLI.html" title="Puma::CLI (class)"><code>CLI</code></a> instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cli_run-instance_method" title="#cli_run (instance method)">#<strong>cli_run</strong>(opts = [])  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a server and runs it via a <a href="../Puma/CLI.html" title="Puma::CLI (class)"><code>CLI</code></a> instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#server_new-instance_method" title="#server_new (instance method)">#<strong>server_new</strong>(options = {}, app: APP_URL_SCHEME, ctx: DFLT_SSL_CTX)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <a href="../Puma/Server.html" title="Puma::Server (class)"><code>Server</code></a> instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#server_new_run-instance_method" title="#server_new_run (instance method)">#<strong>server_new_run</strong>(background: true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Starts an existing <a href="../Puma/Server.html" title="Puma::Server (class)"><code>Server</code></a> instance.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#server_run-instance_method" title="#server_run (instance method)">#<strong>server_run</strong>(app: APP_URL_SCHEME, ctx: DFLT_SSL_CTX, background: true, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <a href="../Puma/Server.html" title="Puma::Server (class)"><code>Server</code></a> instance, runs it, and returns the thread or server instance.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="ServerBase.html" title="TestPuma::ServerBase (class)"><code>ServerBase</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="ServerBase.html#after_teardown-instance_method" title="TestPuma::ServerBase#after_teardown (method)">#after_teardown</a>,
        <a class='i_m ' href="ServerBase.html#before_setup-instance_method" title="TestPuma::ServerBase#before_setup (method)">#before_setup</a>,
        <a class='i_m ' href="ServerBase.html#bind_host-instance_method" title="TestPuma::ServerBase#bind_host (method)">#bind_host</a>,
        <a class='i_m ' href="ServerBase.html#bind_path-instance_method" title="TestPuma::ServerBase#bind_path (method)">#bind_path</a>,
        <a class='i_m ' href="ServerBase.html#bind_port-instance_method" title="TestPuma::ServerBase#bind_port (method)">#bind_port</a>,
        <a class='i_m ' href="ServerBase.html#bind_ssl-instance_method" title="TestPuma::ServerBase#bind_ssl (method)">#bind_ssl</a>,
        <a class='i_m ' href="ServerBase.html#bind_uri_str-instance_method" title="TestPuma::ServerBase#bind_uri_str (method)">#bind_uri_str</a>,
        <a class='i_m ' href="ServerBase.html#config_path-instance_method" title="TestPuma::ServerBase#config_path (method)">#config_path</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ServerBase.html#control_config_str-instance_method" title="TestPuma::ServerBase#control_config_str (method)">#control_config_str</a></td>
      <td><div class='inline'><p>returns the line used in a <a href="../Puma.html" title="Puma (module)"><code>::Puma</code></a> configuration file to create a control server.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="ServerBase.html#control_host-instance_method" title="TestPuma::ServerBase#control_host (method)">#control_host</a>,
        <a class='i_m ' href="ServerBase.html#control_path-instance_method" title="TestPuma::ServerBase#control_path (method)">#control_path</a>,
        <a class='i_m ' href="ServerBase.html#control_port-instance_method" title="TestPuma::ServerBase#control_port (method)">#control_port</a>,
        <a class='i_m ' href="ServerBase.html#control_ssl-instance_method" title="TestPuma::ServerBase#control_ssl (method)">#control_ssl</a>,
        <a class='i_m ' href="ServerBase.html#control_uri_str-instance_method" title="TestPuma::ServerBase#control_uri_str (method)">#control_uri_str</a>,
        <a class='i_m ' href="ServerBase.html#set_bind_ssl-instance_method" title="TestPuma::ServerBase#set_bind_ssl (method)">#set_bind_ssl</a>,
        <a class='i_m ' href="ServerBase.html#set_bind_type-instance_method" title="TestPuma::ServerBase#set_bind_type (method)">#set_bind_type</a>,
        <a class='i_m ' href="ServerBase.html#set_control_ssl-instance_method" title="TestPuma::ServerBase#set_control_ssl (method)">#set_control_ssl</a>,
        <a class='i_m ' href="ServerBase.html#set_control_type-instance_method" title="TestPuma::ServerBase#set_control_type (method)">#set_control_type</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ServerBase.html#set_pumactl_args-instance_method" title="TestPuma::ServerBase#set_pumactl_args (method)">#set_pumactl_args</a></td>
      <td><div class='inline'><p>Returns arguments used in a command line string to create or use a <a href="../Puma.html" title="Puma (module)"><code>::Puma</code></a> control server.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="ServerBase.html#set_workers-instance_method" title="TestPuma::ServerBase#set_workers (method)">#set_workers</a>,
        <a class='i_m ' href="ServerBase.html#state_path-instance_method" title="TestPuma::ServerBase#state_path (method)">#state_path</a>,
        <a class='i_m ' href="ServerBase.html#workers-instance_method" title="TestPuma::ServerBase#workers (method)">#workers</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="PumaSocket.html" title="TestPuma::PumaSocket (module)"><code>PumaSocket</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#after_teardown-instance_method" title="TestPuma::PumaSocket#after_teardown (method)">#after_teardown</a></td>
      <td><div class='inline'><p>Closes all io’s in <code>@ios_to_close</code>, also deletes them if they are files.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="PumaSocket.html#before_setup-instance_method" title="TestPuma::PumaSocket#before_setup (method)">#before_setup</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#new_ctx-instance_method" title="TestPuma::PumaSocket#new_ctx (method)">#new_ctx</a></td>
      <td><div class='inline'><p>Helper for creating an <code>OpenSSL::SSL::SSLContext</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#new_socket-instance_method" title="TestPuma::PumaSocket#new_socket (method)">#new_socket</a></td>
      <td><div class='inline'><p>Creates a new client socket.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#read_response_array-instance_method" title="TestPuma::PumaSocket#read_response_array (method)">#read_response_array</a></td>
      <td><div class='inline'><p>Reads an array of sockets that have already had requests sent.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http-instance_method" title="TestPuma::PumaSocket#send_http (method)">#send_http</a></td>
      <td><div class='inline'><p>Sends a request and returns the socket.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http_array-instance_method" title="TestPuma::PumaSocket#send_http_array (method)">#send_http_array</a></td>
      <td><div class='inline'><p>Creates an array of sockets, sending a request on each.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http_control-instance_method" title="TestPuma::PumaSocket#send_http_control (method)">#send_http_control</a></td>
      <td><div class='inline'><p>Sends a request to the <a href="../Puma.html" title="Puma (module)"><code>::Puma</code></a> control server.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http_control_read_resp_body-instance_method" title="TestPuma::PumaSocket#send_http_control_read_resp_body (method)">#send_http_control_read_resp_body</a></td>
      <td><div class='inline'><p>Sends a request to the <a href="../Puma.html" title="Puma (module)"><code>::Puma</code></a> control server.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http_read_all-instance_method" title="TestPuma::PumaSocket#send_http_read_all (method)">#send_http_read_all</a></td>
      <td><div class='inline'><p>Sends a request and returns whatever can be read.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http_read_resp_body-instance_method" title="TestPuma::PumaSocket#send_http_read_resp_body (method)">#send_http_read_resp_body</a></td>
      <td><div class='inline'><p>Sends a request and returns the HTTP response body.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http_read_resp_headers-instance_method" title="TestPuma::PumaSocket#send_http_read_resp_headers (method)">#send_http_read_resp_headers</a></td>
      <td><div class='inline'><p>Sends a request and returns the response header lines as an array of strings.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#send_http_read_response-instance_method" title="TestPuma::PumaSocket#send_http_read_response (method)">#send_http_read_response</a></td>
      <td><div class='inline'><p>Sends a request and returns the HTTP response.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PumaSocket.html#skt_closed_by_server-instance_method" title="TestPuma::PumaSocket#skt_closed_by_server (method)">#skt_closed_by_server</a></td>
      <td><div class='inline'><p>Determines whether the socket has been closed by the server.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../TestPuma.html" title="TestPuma (module)"><code>::TestPuma</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../TestPuma.html#after_teardown-instance_method" title="TestPuma#after_teardown (method)">#after_teardown</a>,
        <a class='i_m ' href="../TestPuma.html#before_setup-instance_method" title="TestPuma#before_setup (method)">#before_setup</a>,
        <a class='i_m ' href="../TestPuma.html#curl_and_get_response-instance_method" title="TestPuma#curl_and_get_response (method)">#curl_and_get_response</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../TestPuma.html#new_port-instance_method" title="TestPuma#new_port (method)">#new_port</a></td>
      <td><div class='inline'><p>Alias for <a href="../TestPuma.html#unique_port-instance_method" title="TestPuma#unique_port (method)">#unique_port</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../TestPuma.html#spawn_ext_cmd-instance_method" title="TestPuma#spawn_ext_cmd (method)">#spawn_ext_cmd</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../TestPuma.html#unique_path-instance_method" title="TestPuma#unique_path (method)">#unique_path</a></td>
      <td><div class='inline'><p>Generates a unique file path.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../TestPuma.html#unique_port-instance_method" title="TestPuma#unique_port (method)">#unique_port</a></td>
      <td><div class='inline'><p>Returns an available port by using <code>TCPServer.open(host, 0)</code>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../TestPuma.html#with_env-instance_method" title="TestPuma#with_env (method)">#with_env</a>,
        <a class='i_m priv' href="../TestPuma.html#kill_and_wait-instance_method" title="TestPuma#kill_and_wait (method)">#kill_and_wait</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="after_teardown-instance_method">
  <h3 class='signature  first'>
    #<strong>after_teardown</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L50-L72'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='50' data-end='72'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'test/helpers/test_puma/server_in_process.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after_teardown'>after_teardown</span>
  <span class='ivar'>@server</span><span class='op'>&amp;.</span><span class='id identifier rubyid_stop'>stop</span> <span class='kw'>true</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_kill'>kill</span>(<span class='ivar'>@server_thread</span>) <span class='kw'>if</span> <span class='ivar'>@server_thread</span><span class='op'>&amp;.</span><span class='id identifier rubyid_alive?'>alive?</span>
  <span class='ivar'>@server_ctx</span>    <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@server_thread</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>if</span> <span class='ivar'>@cli</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@cli_thread</span>
    <span class='ivar'>@cli</span>.<span class='id identifier rubyid_launcher'>launcher</span><span class='op'>&amp;.</span><span class='id identifier rubyid_stop'>stop</span>
    <span class='ivar'>@cli_thread</span>.<span class='id identifier rubyid_join'>join</span> <span class='int'>5</span>
    <span class='id identifier rubyid_retries'>retries</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_log'>log</span> <span class='op'>=</span> <span class='ivar'>@log_writer</span>.<span class='id identifier rubyid_stdout'>stdout</span>.<span class='id identifier rubyid_string'>string</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_log'>log</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Goodbye!</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.01</span>
      <span class='const'>Thread</span>.<span class='id identifier rubyid_pass'>pass</span>
      <span class='id identifier rubyid_retries'>retries</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_retries'>retries</span> <span class='op'>&gt;</span> <span class='int'>10</span>
    <span class='kw'>end</span>
    <span class='const'>Thread</span>.<span class='id identifier rubyid_kill'>kill</span>(<span class='ivar'>@cli_thread</span>) <span class='kw'>if</span> <span class='ivar'>@cli_thread</span>.<span class='id identifier rubyid_alive?'>alive?</span>
    <span class='ivar'>@cli_thread</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="before_setup-instance_method">
  <h3 class='signature '>
    #<strong>before_setup</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L38-L48'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='38' data-end='48'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'test/helpers/test_puma/server_in_process.rb', line 38</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_before_setup'>before_setup</span>
  <span class='ivar'>@cli</span>           <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@cli_thread</span>    <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@events</span>        <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@log_writer</span>    <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@ready</span>         <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@server_ctx</span>    <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@server_thread</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@wait</span>          <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cli_new-instance_method">
  <h3 class='signature '>
    #<strong>cli_new</strong>(opts = [])  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a server via a <a href="../Puma/CLI.html" title="Puma::CLI (class)"><code>CLI</code></a> instance.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L143-L155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='143' data-end='155'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'test/helpers/test_puma/server_in_process.rb', line 143</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cli_new'>cli_new</span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> [])
  <span class='ivar'>@wait</span><span class='comma'>,</span> <span class='ivar'>@ready</span> <span class='op'>=</span> <span class='const'><a href="../IO.html" title="IO (class)">IO</a></span>.<span class='id identifier rubyid_pipe'>pipe</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_bind_uri_str'>bind_uri_str</span>]
  <span class='id identifier rubyid_options'>options</span> <span class='op'>+=</span> <span class='id identifier rubyid_set_pumactl_args'>set_pumactl_args</span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>if</span> <span class='ivar'>@control_type</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>+=</span> <span class='id identifier rubyid_opts'>opts</span>

  <span class='ivar'>@log_writer</span> <span class='op'>=</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/LogWriter.html" title="Puma::LogWriter (class)">LogWriter</a></span>.<span class='id identifier rubyid_strings'><a href="../Puma/LogWriter.html#strings-class_method" title="Puma::LogWriter.strings (method)">strings</a></span>

  <span class='ivar'>@events</span> <span class='op'>||=</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/Events.html" title="Puma::Events (class)">Events</a></span>.<span class='id identifier rubyid_new'><a href="../Puma/Events.html#new-class_method" title="Puma::Events.new (method)">new</a></span>
  <span class='ivar'>@events</span>.<span class='id identifier rubyid_on_booted'>on_booted</span> { <span class='ivar'>@ready</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span> }

  <span class='ivar'>@cli</span> <span class='op'>=</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/CLI.html" title="Puma::CLI (class)">CLI</a></span>.<span class='id identifier rubyid_new'><a href="../Puma/CLI.html#new-class_method" title="Puma::CLI.new (method)">new</a></span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='ivar'>@log_writer</span><span class='comma'>,</span> <span class='ivar'>@events</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cli_run-instance_method">
  <h3 class='signature '>
    #<strong>cli_run</strong>(opts = [])  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a server and runs it via a <a href="../Puma/CLI.html" title="Puma::CLI (class)"><code>CLI</code></a> instance.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L130-L140'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='130' data-end='140'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'test/helpers/test_puma/server_in_process.rb', line 130</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cli_run'>cli_run</span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> [])
  <span class='id identifier rubyid_cli_new'><a href="#cli_new-instance_method" title="TestPuma::ServerInProcess#cli_new (method)">cli_new</a></span> <span class='id identifier rubyid_opts'>opts</span>
  <span class='ivar'>@cli_thread</span> <span class='op'>=</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_new'>new</span> { <span class='ivar'>@cli</span>.<span class='id identifier rubyid_run'>run</span> }

  <span class='kw'>begin</span>
    <span class='ivar'>@wait</span>.<span class='id identifier rubyid_sysread'>sysread</span> <span class='int'>1</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EAGAIN</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.001</span>
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="server_new-instance_method">
  <h3 class='signature '>
    #<strong>server_new</strong>(options = {}, app: APP_URL_SCHEME, ctx: DFLT_SSL_CTX)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a <a href="../Puma/Server.html" title="Puma::Server (class)"><code>Server</code></a> instance. See <a href="#server_run-instance_method" title="TestPuma::ServerInProcess#server_run (method)">#server_run</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L82-L110'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='82' data-end='110'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'test/helpers/test_puma/server_in_process.rb', line 82</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_server_new'>server_new</span>(<span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='label'>app:</span> <span class='const'><a href="#APP_URL_SCHEME-constant" title="TestPuma::ServerInProcess::APP_URL_SCHEME (constant)">APP_URL_SCHEME</a></span><span class='comma'>,</span> <span class='label'>ctx:</span> <span class='const'><a href="#DFLT_SSL_CTX-constant" title="TestPuma::ServerInProcess::DFLT_SSL_CTX (constant)">DFLT_SSL_CTX</a></span>)
  <span class='ivar'>@log_writer</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_log_writer'>log_writer</span>] <span class='op'>||=</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/LogWriter.html" title="Puma::LogWriter (class)">LogWriter</a></span>.<span class='id identifier rubyid_strings'><a href="../Puma/LogWriter.html#strings-class_method" title="Puma::LogWriter.strings (method)">strings</a></span>
  <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_min_threads'>min_threads</span>] <span class='op'>||=</span> <span class='int'>1</span>
  <span class='ivar'>@events</span> <span class='op'>||=</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/Events.html" title="Puma::Events (class)">Events</a></span>.<span class='id identifier rubyid_new'><a href="../Puma/Events.html#new-class_method" title="Puma::Events.new (method)">new</a></span>

  <span class='ivar'>@server</span> <span class='op'>=</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/Server.html" title="Puma::Server (class)">Server</a></span>.<span class='id identifier rubyid_new'><a href="../Puma/Server.html#new-class_method" title="Puma::Server.new (method)">new</a></span> <span class='id identifier rubyid_app'>app</span><span class='comma'>,</span> <span class='ivar'>@events</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>

  <span class='kw'>case</span> <span class='ivar'>@bind_type</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ssl'>ssl</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_ctx'>ctx</span>.<span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/MiniSSL.html" title="Puma::MiniSSL (module)">MiniSSL</a></span><span class='op'>::</span><span class='const'><a href="../Puma/MiniSSL/Context.html" title="Puma::MiniSSL::Context (class)">Context</a></span>
      <span class='ivar'>@server_ctx</span> <span class='op'>=</span> <span class='id identifier rubyid_ctx'>ctx</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_ctx'>ctx</span> <span class='op'>==</span> <span class='kw'>false</span>
      <span class='comment'># used for LocalhostAuthority testing
</span>      <span class='ivar'>@server_ctx</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>else</span>
      <span class='ivar'>@server_ctx</span> <span class='op'>=</span> <span class='const'><a href="../Puma.html" title="Puma (module)">Puma</a></span><span class='op'>::</span><span class='const'><a href="../Puma/MiniSSL.html" title="Puma::MiniSSL (module)">MiniSSL</a></span><span class='op'>::</span><span class='const'><a href="../Puma/MiniSSL/Context.html" title="Puma::MiniSSL::Context (class)">Context</a></span>.<span class='id identifier rubyid_new'><a href="../Puma/MiniSSL/Context.html#new-class_method" title="Puma::MiniSSL::Context.new (method)">new</a></span>
      <span class='id identifier rubyid_ctx'>ctx</span><span class='op'>&amp;.</span><span class='id identifier rubyid_call'>call</span> <span class='ivar'>@server_ctx</span>
      <span class='const'><a href="#DFLT_SSL_CTX-constant" title="TestPuma::ServerInProcess::DFLT_SSL_CTX (constant)">DFLT_SSL_CTX</a></span>.<span class='id identifier rubyid_call'>call</span> <span class='ivar'>@server_ctx</span> <span class='comment'># set defaults
</span>    <span class='kw'>end</span>
    <span class='ivar'>@server</span>.<span class='id identifier rubyid_add_ssl_listener'>add_ssl_listener</span> <span class='id identifier rubyid_bind_host'>bind_host</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='ivar'>@server_ctx</span>
    <span class='ivar'>@bind_port</span> <span class='op'>=</span> <span class='ivar'>@server</span>.<span class='id identifier rubyid_connected_ports'>connected_ports</span>[<span class='int'>0</span>]
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tcp'>tcp</span>
    <span class='ivar'>@server</span>.<span class='id identifier rubyid_add_tcp_listener'>add_tcp_listener</span> <span class='id identifier rubyid_bind_host'>bind_host</span><span class='comma'>,</span> <span class='int'>0</span>
    <span class='ivar'>@bind_port</span> <span class='op'>=</span> <span class='ivar'>@server</span>.<span class='id identifier rubyid_connected_ports'>connected_ports</span>[<span class='int'>0</span>]
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unix'>unix</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_aunix'>aunix</span>
    <span class='ivar'>@server</span>.<span class='id identifier rubyid_add_unix_listener'>add_unix_listener</span> <span class='id identifier rubyid_bind_path'>bind_path</span>
  <span class='kw'>end</span>
  <span class='ivar'>@server</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="server_new_run-instance_method">
  <h3 class='signature '>
    #<strong>server_new_run</strong>(background: true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Starts an existing <a href="../Puma/Server.html" title="Puma::Server (class)"><code>Server</code></a> instance.  Only used if an existing server has been created with <a href="#server_new-instance_method" title="TestPuma::ServerInProcess#server_new (method)">#server_new</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L115-L127'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='115' data-end='127'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'test/helpers/test_puma/server_in_process.rb', line 115</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_server_new_run'>server_new_run</span>(<span class='label'>background:</span> <span class='kw'>true</span>)
  <span class='id identifier rubyid_min_threads'>min_threads</span> <span class='op'>=</span> <span class='ivar'>@server</span>.<span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span> <span class='symbeg'>:</span><span class='ivar'>@min_threads</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_background'>background</span>
    <span class='ivar'>@server_thread</span> <span class='op'>=</span> <span class='ivar'>@server</span>.<span class='id identifier rubyid_run'>run</span>
  <span class='kw'>else</span>
    <span class='ivar'>@server</span>.<span class='id identifier rubyid_run'>run</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>until</span> <span class='ivar'>@server</span>.<span class='id identifier rubyid_running'>running</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_min_threads'>min_threads</span>
    <span class='const'>Thread</span>.<span class='id identifier rubyid_pass'>pass</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.005</span>
  <span class='kw'>end</span>
  <span class='ivar'>@server_thread</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="server_run-instance_method">
  <h3 class='signature '>
    #<strong>server_run</strong>(app: APP_URL_SCHEME, ctx: DFLT_SSL_CTX, background: true, **options)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a <a href="../Puma/Server.html" title="Puma::Server (class)"><code>Server</code></a> instance, runs it, and returns the thread or server instance.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/puma/puma/blob/master/test/helpers/test_puma/server_in_process.rb#L75-L79'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='75' data-end='79'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'test/helpers/test_puma/server_in_process.rb', line 75</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_server_run'>server_run</span>(<span class='label'>app:</span> <span class='const'><a href="#APP_URL_SCHEME-constant" title="TestPuma::ServerInProcess::APP_URL_SCHEME (constant)">APP_URL_SCHEME</a></span><span class='comma'>,</span> <span class='label'>ctx:</span> <span class='const'><a href="#DFLT_SSL_CTX-constant" title="TestPuma::ServerInProcess::DFLT_SSL_CTX (constant)">DFLT_SSL_CTX</a></span><span class='comma'>,</span> <span class='label'>background:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_options'>options</span> <span class='op'>||=</span> {}
  <span class='id identifier rubyid_server_new'><a href="#server_new-instance_method" title="TestPuma::ServerInProcess#server_new (method)">server_new</a></span>(<span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='label'>app:</span> <span class='id identifier rubyid_app'>app</span><span class='comma'>,</span> <span class='label'>ctx:</span> <span class='id identifier rubyid_ctx'>ctx</span>)
  <span class='id identifier rubyid_server_new_run'><a href="#server_new_run-instance_method" title="TestPuma::ServerInProcess#server_new_run (method)">server_new_run</a></span> <span class='label'>background:</span> <span class='id identifier rubyid_background'>background</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>