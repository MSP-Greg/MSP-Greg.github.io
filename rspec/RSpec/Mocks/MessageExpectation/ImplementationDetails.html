<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: RSpec::Mocks::MessageExpectation::ImplementationDetails &mdash; RSpec main</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "RSpec::Mocks::MessageExpectation::ImplementationDetails",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../../'>RSpec main</a> &raquo; 
      <a href='../../../_index.html#alpha_I'>Index (I)</a> &raquo; 
        <a href="../../../RSpec.html" title="RSpec (module)">RSpec</a> &raquo; 
        <a href="../../Mocks.html" title="RSpec::Mocks (module)">Mocks</a> &raquo; 
        <a href="../MessageExpectation.html" title="RSpec::Mocks::MessageExpectation (class)">MessageExpectation</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ImplementationDetails&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: RSpec::Mocks::MessageExpectation::ImplementationDetails  <span class='private note title'>Private</span>
</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="../MessageExpectation.html" title="RSpec::Mocks::MessageExpectation (class)"><code>::RSpec::Mocks::MessageExpectation</code></a>,
          <a href="../VerifyingMessageExpectation.html" title="RSpec::Mocks::VerifyingMessageExpectation (class)"><code>::RSpec::Mocks::VerifyingMessageExpectation</code></a>
      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L409'>rspec-mocks/lib/rspec/mocks/message_expectation.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Contains the parts of <a href="../MessageExpectation.html" title="RSpec::Mocks::MessageExpectation (class)"><code>::RSpec::Mocks::MessageExpectation</code></a> that aren’t part of rspec-mocks’ public API. The class is very big and could really use some collaborators it delegates to for this stuff but for now this was the simplest way to split the public from private stuff to make it easier to publish the docs for the APIs we want published.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</div>
<h2 class='h2_sum'>Other Constraints</h2>
<div>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#actual_received_count_matters%3F-instance_method" title="#actual_received_count_matters? (instance method)">#<strong>actual_received_count_matters?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#additional_expected_calls-instance_method" title="#additional_expected_calls (instance method)">#<strong>additional_expected_calls</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#advise-instance_method" title="#advise (instance method)">#<strong>advise</strong>(*args)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#and_yield_receiver_to_implementation-instance_method" title="#and_yield_receiver_to_implementation (instance method)">#<strong>and_yield_receiver_to_implementation</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#argument_list_matcher=-instance_method" title="#argument_list_matcher= (instance method)">#<strong>argument_list_matcher=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#called_max_times%3F-instance_method" title="#called_max_times? (instance method)">#<strong>called_max_times?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#description_for-instance_method" title="#description_for (instance method)">#<strong>description_for</strong>(verb)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ensure_expected_ordering_received!-instance_method" title="#ensure_expected_ordering_received! (instance method)">#<strong>ensure_expected_ordering_received!</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#error_generator-instance_method" title="#error_generator (instance method)">#<strong>error_generator</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#exception_source_id-instance_method" title="#exception_source_id (instance method)">#<strong>exception_source_id</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#expectation_count_type-instance_method" title="#expectation_count_type (instance method)">#<strong>expectation_count_type</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#expected_args-instance_method" title="#expected_args (instance method)">#<strong>expected_args</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature wo prot'>
      <a href="#expected_from=-instance_method" title="#expected_from= (instance method)">#<strong>expected_from=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title protected'>protected</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#expected_messages_received%3F-instance_method" title="#expected_messages_received? (instance method)">#<strong>expected_messages_received?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature wo prot'>
      <a href="#expected_received_count=-instance_method" title="#expected_received_count= (instance method)">#<strong>expected_received_count=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title protected'>protected</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#generate_error-instance_method" title="#generate_error (instance method)">#<strong>generate_error</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#has_been_invoked%3F-instance_method" title="#has_been_invoked? (instance method)">#<strong>has_been_invoked?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#ignoring_args%3F-instance_method" title="#ignoring_args? (instance method)">#<strong>ignoring_args?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#implementation-instance_method" title="#implementation (instance method)">#<strong>implementation</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#increase_actual_received_count!-instance_method" title="#increase_actual_received_count! (instance method)">#<strong>increase_actual_received_count!</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#initial_implementation_action=-instance_method" title="#initial_implementation_action= (instance method)">#<strong>initial_implementation_action=</strong>(action)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(error_generator, expectation_ordering, expected_from, method_double, type = :expectation, opts = {}, &amp;implementation_block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#inner_implementation_action=-instance_method" title="#inner_implementation_action= (instance method)">#<strong>inner_implementation_action=</strong>(action)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#invoke-instance_method" title="#invoke (instance method)">#<strong>invoke</strong>(parent_stub, *args, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#invoke_incrementing_actual_calls_by-instance_method" title="#invoke_incrementing_actual_calls_by (instance method)">#<strong>invoke_incrementing_actual_calls_by</strong>(increment, allowed_to_fail, parent_stub, *args, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#invoke_without_incrementing_received_count-instance_method" title="#invoke_without_incrementing_received_count (instance method)">#<strong>invoke_without_incrementing_received_count</strong>(parent_stub, *args, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#matches%3F-instance_method" title="#matches? (instance method)">#<strong>matches?</strong>(message, *args)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#matches_at_least_count%3F-instance_method" title="#matches_at_least_count? (instance method)">#<strong>matches_at_least_count?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#matches_at_most_count%3F-instance_method" title="#matches_at_most_count? (instance method)">#<strong>matches_at_most_count?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#matches_exact_count%3F-instance_method" title="#matches_exact_count? (instance method)">#<strong>matches_exact_count?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#matches_name_but_not_args-instance_method" title="#matches_name_but_not_args (instance method)">#<strong>matches_name_but_not_args</strong>(message, *args)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#message-instance_method" title="#message (instance method)">#<strong>message</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#negative%3F-instance_method" title="#negative? (instance method)">#<strong>negative?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#negative_expectation_for%3F-instance_method" title="#negative_expectation_for? (instance method)">#<strong>negative_expectation_for?</strong>(message)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#ordered%3F-instance_method" title="#ordered? (instance method)">#<strong>ordered?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#orig_object-instance_method" title="#orig_object (instance method)">#<strong>orig_object</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#raise_already_invoked_error_if_necessary-instance_method" title="#raise_already_invoked_error_if_necessary (instance method)">#<strong>raise_already_invoked_error_if_necessary</strong>(calling_customization)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#raise_out_of_order_error-instance_method" title="#raise_out_of_order_error (instance method)">#<strong>raise_out_of_order_error</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#raise_unexpected_message_args_error-instance_method" title="#raise_unexpected_message_args_error (instance method)">#<strong>raise_unexpected_message_args_error</strong>(args_for_multiple_calls)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#safe_invoke-instance_method" title="#safe_invoke (instance method)">#<strong>safe_invoke</strong>(parent_stub, *args, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#set_expected_received_count-instance_method" title="#set_expected_received_count (instance method)">#<strong>set_expected_received_count</strong>(relativity, n)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#similar_messages-instance_method" title="#similar_messages (instance method)">#<strong>similar_messages</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#terminal_implementation_action=-instance_method" title="#terminal_implementation_action= (instance method)">#<strong>terminal_implementation_action=</strong>(action)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#type-instance_method" title="#type (instance method)">#<strong>type</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unadvise-instance_method" title="#unadvise (instance method)">#<strong>unadvise</strong>(args)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#verify_messages_received-instance_method" title="#verify_messages_received (instance method)">#<strong>verify_messages_received</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#warn_about_stub_override-instance_method" title="#warn_about_stub_override (instance method)">#<strong>warn_about_stub_override</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#wrap_original-instance_method" title="#wrap_original (instance method)">#<strong>wrap_original</strong>(method_name, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#yield_receiver_to_implementation_block%3F-instance_method" title="#yield_receiver_to_implementation_block? (instance method)">#<strong>yield_receiver_to_implementation_block?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="actual_received_count_matters?-instance_method">
  <h3 class='signature ro first'>
    #<strong>actual_received_count_matters?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L588-L590'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='588' data-end='590'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 588</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_actual_received_count_matters?'>actual_received_count_matters?</span>
  <span class='ivar'>@at_least</span> <span class='op'>||</span> <span class='ivar'>@at_most</span> <span class='op'>||</span> <span class='ivar'>@exactly</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="argument_list_matcher=-instance_method">
  <h3 class='signature wo'>
    #<strong>argument_list_matcher=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L413-L413'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='413' data-end='413'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 413</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expected_received_count'>expected_received_count</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expected_from'>expected_from</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_list_matcher'>argument_list_matcher</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="called_max_times?-instance_method">
  <h3 class='signature ro'>
    #<strong>called_max_times?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L487-L492'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='487' data-end='492'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 487</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_called_max_times?'>called_max_times?</span>
  <span class='ivar'>@expected_received_count</span> <span class='op'>!=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_any'>any</span> <span class='op'>&amp;&amp;</span>
    <span class='op'>!</span><span class='ivar'>@at_least</span> <span class='op'>&amp;&amp;</span>
    <span class='ivar'>@expected_received_count</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span>
    <span class='ivar'>@actual_received_count</span> <span class='op'>&gt;=</span> <span class='ivar'>@expected_received_count</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="error_generator-instance_method">
  <h3 class='signature rw'>
    #<strong>error_generator</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L410-L410'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='410' data-end='410'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 410</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_error_generator'>error_generator</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expected_from=-instance_method">
  <h3 class='signature wo prot'>
    #<strong>expected_from=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='prot'>protected</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L413-L413'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='413' data-end='413'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 413</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expected_received_count'>expected_received_count</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expected_from'>expected_from</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_list_matcher'>argument_list_matcher</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expected_messages_received?-instance_method">
  <h3 class='signature ro'>
    #<strong>expected_messages_received?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L503-L505'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='503' data-end='505'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 503</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expected_messages_received?'>expected_messages_received?</span>
  <span class='id identifier rubyid_ignoring_args?'><a href="#ignoring_args%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#ignoring_args? (method)">ignoring_args?</a></span> <span class='op'>||</span> <span class='id identifier rubyid_matches_exact_count?'><a href="#matches_exact_count%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#matches_exact_count? (method)">matches_exact_count?</a></span> <span class='op'>||</span> <span class='id identifier rubyid_matches_at_least_count?'><a href="#matches_at_least_count%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#matches_at_least_count? (method)">matches_at_least_count?</a></span> <span class='op'>||</span> <span class='id identifier rubyid_matches_at_most_count?'><a href="#matches_at_most_count%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#matches_at_most_count? (method)">matches_at_most_count?</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expected_received_count=-instance_method">
  <h3 class='signature wo prot'>
    #<strong>expected_received_count=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='prot'>protected</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L413-L413'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='413' data-end='413'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 413</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expected_received_count'>expected_received_count</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expected_from'>expected_from</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_argument_list_matcher'>argument_list_matcher</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="has_been_invoked?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>has_been_invoked?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L632-L634'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='632' data-end='634'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 632</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_has_been_invoked?'>has_been_invoked?</span>
  <span class='ivar'>@actual_received_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ignoring_args?-instance_method">
  <h3 class='signature ro'>
    #<strong>ignoring_args?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L512-L514'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='512' data-end='514'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 512</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ignoring_args?'>ignoring_args?</span>
  <span class='ivar'>@expected_received_count</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_any'>any</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="implementation-instance_method">
  <h3 class='signature rw'>
    #<strong>implementation</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L410-L410'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='410' data-end='410'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 410</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_error_generator'><a href="#error_generator-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#error_generator (method)">error_generator</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_implementation'>implementation</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initial_implementation_action=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>initial_implementation_action=</strong>(action)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L655-L657'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='655' data-end='657'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 655</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initial_implementation_action='>initial_implementation_action=</span>(<span class='id identifier rubyid_action'>action</span>)
  <span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>.<span class='id identifier rubyid_initial_action'>initial_action</span> <span class='op'>=</span> <span class='id identifier rubyid_action'>action</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inner_implementation_action=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>inner_implementation_action=</strong>(action)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L659-L663'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='659' data-end='663'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 659</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inner_implementation_action='>inner_implementation_action=</span>(<span class='id identifier rubyid_action'>action</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_action'>action</span>
  <span class='id identifier rubyid_warn_about_stub_override'><a href="#warn_about_stub_override-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#warn_about_stub_override (method)">warn_about_stub_override</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>.<span class='id identifier rubyid_inner_action'>inner_action</span>
  <span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>.<span class='id identifier rubyid_inner_action'>inner_action</span> <span class='op'>=</span> <span class='id identifier rubyid_action'>action</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matches_at_least_count?-instance_method">
  <h3 class='signature ro'>
    #<strong>matches_at_least_count?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L516-L518'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='516' data-end='518'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 516</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_matches_at_least_count?'>matches_at_least_count?</span>
  <span class='ivar'>@at_least</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@actual_received_count</span> <span class='op'>&gt;=</span> <span class='ivar'>@expected_received_count</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matches_at_most_count?-instance_method">
  <h3 class='signature ro'>
    #<strong>matches_at_most_count?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L520-L522'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='520' data-end='522'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 520</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_matches_at_most_count?'>matches_at_most_count?</span>
  <span class='ivar'>@at_most</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@actual_received_count</span> <span class='op'>&lt;=</span> <span class='ivar'>@expected_received_count</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matches_exact_count?-instance_method">
  <h3 class='signature ro'>
    #<strong>matches_exact_count?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L524-L526'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='524' data-end='526'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 524</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_matches_exact_count?'>matches_exact_count?</span>
  <span class='ivar'>@expected_received_count</span> <span class='op'>==</span> <span class='ivar'>@actual_received_count</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="message-instance_method">
  <h3 class='signature ro'>
    #<strong>message</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L411-L411'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='411' data-end='411'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 411</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_message'>message</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="negative?-instance_method">
  <h3 class='signature ro'>
    #<strong>negative?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L483-L485'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='483' data-end='485'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 483</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_negative?'>negative?</span>
  <span class='ivar'>@expected_received_count</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@at_least</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ordered?-instance_method">
  <h3 class='signature ro'>
    #<strong>ordered?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L580-L582'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='580' data-end='582'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 580</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ordered?'>ordered?</span>
  <span class='ivar'>@ordered</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="orig_object-instance_method">
  <h3 class='signature ro'>
    #<strong>orig_object</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L412-L412'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='412' data-end='412'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 412</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_orig_object'>orig_object</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="terminal_implementation_action=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>terminal_implementation_action=</strong>(action)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L665-L667'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='665' data-end='667'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 665</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_terminal_implementation_action='>terminal_implementation_action=</span>(<span class='id identifier rubyid_action'>action</span>)
  <span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>.<span class='id identifier rubyid_terminal_action'>terminal_action</span> <span class='op'>=</span> <span class='id identifier rubyid_action'>action</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="type-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>type</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L417-L417'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='417' data-end='417'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 417</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="yield_receiver_to_implementation_block?-instance_method">
  <h3 class='signature ro'>
    #<strong>yield_receiver_to_implementation_block?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L459-L461'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='459' data-end='461'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 459</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_yield_receiver_to_implementation_block?'>yield_receiver_to_implementation_block?</span>
  <span class='ivar'>@yield_receiver_to_implementation_block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="additional_expected_calls-instance_method">
  <h3 class='signature  first'>
    #<strong>additional_expected_calls</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L575-L578'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='575' data-end='578'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 575</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_additional_expected_calls'>additional_expected_calls</span>
  <span class='kw'>return</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='ivar'>@expectation_type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_stub'><a href="../../../top-level-namespace.html#stub-instance_method" title="#stub (method)">stub</a></span> <span class='op'>||</span> <span class='op'>!</span><span class='ivar'>@exactly</span>
  <span class='ivar'>@expected_received_count</span> <span class='op'>-</span> <span class='int'>1</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="advise-instance_method">
  <h3 class='signature '>
    #<strong>advise</strong>(*args)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L532-L534'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='532' data-end='534'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 532</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_advise'>advise</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_similar_messages'><a href="#similar_messages-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#similar_messages (method)">similar_messages</a></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_args'>args</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="and_yield_receiver_to_implementation-instance_method">
  <h3 class='signature '>
    #<strong>and_yield_receiver_to_implementation</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L454-L457'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='454' data-end='457'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 454</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_and_yield_receiver_to_implementation'>and_yield_receiver_to_implementation</span>
  <span class='ivar'>@yield_receiver_to_implementation_block</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="description_for-instance_method">
  <h3 class='signature '>
    #<strong>description_for</strong>(verb)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L564-L569'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='564' data-end='569'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 564</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_description_for'>description_for</span>(<span class='id identifier rubyid_verb'>verb</span>)
  <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_describe_expectation'>describe_expectation</span>(
    <span class='id identifier rubyid_verb'>verb</span><span class='comma'>,</span> <span class='ivar'>@message</span><span class='comma'>,</span> <span class='ivar'>@expected_received_count</span><span class='comma'>,</span>
    <span class='ivar'>@actual_received_count</span><span class='comma'>,</span> <span class='id identifier rubyid_expected_args'><a href="#expected_args-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#expected_args (method)">expected_args</a></span>
  )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ensure_expected_ordering_received!-instance_method">
  <h3 class='signature '>
    #<strong>ensure_expected_ordering_received!</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L507-L510'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='507' data-end='510'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 507</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_expected_ordering_received!'>ensure_expected_ordering_received!</span>
  <span class='ivar'>@order_group</span>.<span class='id identifier rubyid_verify_invocation_order'>verify_invocation_order</span>(<span class='kw'>self</span>) <span class='kw'>if</span> <span class='ivar'>@ordered</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exception_source_id-instance_method">
  <h3 class='signature priv'>
    #<strong>exception_source_id</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L600-L602'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='600' data-end='602'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 600</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exception_source_id'>exception_source_id</span>
  <span class='ivar'>@exception_source_id</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___id__'>__id__</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expectation_count_type-instance_method">
  <h3 class='signature '>
    #<strong>expectation_count_type</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L558-L562'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='558' data-end='562'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 558</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expectation_count_type'>expectation_count_type</span>
  <span class='kw'>return</span> <span class='symbeg'>:</span><span class='id identifier rubyid_at_least'><a href="../MessageExpectation.html#at_least-instance_method" title="RSpec::Mocks::MessageExpectation#at_least (method)">at_least</a></span> <span class='kw'>if</span> <span class='ivar'>@at_least</span>
  <span class='kw'>return</span> <span class='symbeg'>:</span><span class='id identifier rubyid_at_most'><a href="../MessageExpectation.html#at_most-instance_method" title="RSpec::Mocks::MessageExpectation#at_most (method)">at_most</a></span> <span class='kw'>if</span> <span class='ivar'>@at_most</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expected_args-instance_method">
  <h3 class='signature '>
    #<strong>expected_args</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L450-L452'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='450' data-end='452'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 450</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expected_args'>expected_args</span>
  <span class='ivar'>@argument_list_matcher</span>.<span class='id identifier rubyid_expected_args'>expected_args</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_error-instance_method">
  <h3 class='signature '>
    #<strong>generate_error</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L540-L552'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='540' data-end='552'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 540</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_error'>generate_error</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_similar_messages'><a href="#similar_messages-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#similar_messages (method)">similar_messages</a></span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_raise_expectation_error'>raise_expectation_error</span>(
      <span class='ivar'>@message</span><span class='comma'>,</span> <span class='ivar'>@expected_received_count</span><span class='comma'>,</span> <span class='ivar'>@argument_list_matcher</span><span class='comma'>,</span>
      <span class='ivar'>@actual_received_count</span><span class='comma'>,</span> <span class='id identifier rubyid_expectation_count_type'><a href="#expectation_count_type-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#expectation_count_type (method)">expectation_count_type</a></span><span class='comma'>,</span> <span class='id identifier rubyid_expected_args'><a href="#expected_args-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#expected_args (method)">expected_args</a></span><span class='comma'>,</span>
      <span class='ivar'>@expected_from</span><span class='comma'>,</span> <span class='id identifier rubyid_exception_source_id'><a href="#exception_source_id-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#exception_source_id (method)">exception_source_id</a></span>
    )
  <span class='kw'>else</span>
    <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_raise_similar_message_args_error'>raise_similar_message_args_error</span>(
      <span class='kw'>self</span><span class='comma'>,</span> <span class='ivar'>@similar_messages</span><span class='comma'>,</span> <span class='ivar'>@expected_from</span>
    )
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="increase_actual_received_count!-instance_method">
  <h3 class='signature '>
    #<strong>increase_actual_received_count!</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L592-L596'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='592' data-end='596'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 592</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_increase_actual_received_count!'>increase_actual_received_count!</span>
  <span class='ivar'>@actual_received_count_write_mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@actual_received_count</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize-instance_method">
  <h3 class='signature '>
    #<strong>initialize</strong>(error_generator, expectation_ordering, expected_from, method_double, type = :expectation, opts = {}, &amp;implementation_block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L420-L447'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='420' data-end='447'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 420</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_error_generator'><a href="#error_generator-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#error_generator (method)">error_generator</a></span><span class='comma'>,</span> <span class='id identifier rubyid_expectation_ordering'>expectation_ordering</span><span class='comma'>,</span> <span class='id identifier rubyid_expected_from'>expected_from</span><span class='comma'>,</span> <span class='id identifier rubyid_method_double'>method_double</span><span class='comma'>,</span>
               <span class='id identifier rubyid_type'><a href="#type-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#type (method)">type</a></span><span class='op'>=</span><span class='symbeg'>:</span><span class='id identifier rubyid_expectation'>expectation</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span>{}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_implementation_block'>implementation_block</span>)
  <span class='ivar'>@type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'><a href="#type-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#type (method)">type</a></span>
  <span class='ivar'>@error_generator</span> <span class='op'>=</span> <span class='id identifier rubyid_error_generator'><a href="#error_generator-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#error_generator (method)">error_generator</a></span>
  <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_error_generator'><a href="#error_generator-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#error_generator (method)">error_generator</a></span>.<span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='ivar'>@expected_from</span> <span class='op'>=</span> <span class='id identifier rubyid_expected_from'>expected_from</span>
  <span class='ivar'>@method_double</span> <span class='op'>=</span> <span class='id identifier rubyid_method_double'>method_double</span>
  <span class='ivar'>@orig_object</span> <span class='op'>=</span> <span class='ivar'>@method_double</span>.<span class='id identifier rubyid_object'>object</span>
  <span class='ivar'>@message</span> <span class='op'>=</span> <span class='ivar'>@method_double</span>.<span class='id identifier rubyid_method_name'>method_name</span>
  <span class='ivar'>@actual_received_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@actual_received_count_write_mutex</span> <span class='op'>=</span> <span class='const'><a href="../../Support.html" title="RSpec::Support (module)">Support</a></span><span class='op'>::</span><span class='const'><a href="../../Support/Mutex.html" title="RSpec::Support::Mutex (class)">Mutex</a></span>.<span class='id identifier rubyid_new'><a href="../../Support/Mutex.html#new-class_method" title="RSpec::Support::Mutex.new (method)">new</a></span>
  <span class='ivar'>@expected_received_count</span> <span class='op'>=</span> <span class='id identifier rubyid_type'><a href="#type-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#type (method)">type</a></span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expectation'>expectation</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_any'>any</span>
  <span class='ivar'>@argument_list_matcher</span> <span class='op'>=</span> <span class='const'><a href="../ArgumentListMatcher.html" title="RSpec::Mocks::ArgumentListMatcher (class)">ArgumentListMatcher</a></span><span class='op'>::</span><span class='const'><a href="../ArgumentListMatcher.html#MATCH_ALL-constant" title="RSpec::Mocks::ArgumentListMatcher::MATCH_ALL (constant)">MATCH_ALL</a></span>
  <span class='ivar'>@order_group</span> <span class='op'>=</span> <span class='id identifier rubyid_expectation_ordering'>expectation_ordering</span>
  <span class='ivar'>@order_group</span>.<span class='id identifier rubyid_register'>register</span>(<span class='kw'>self</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_type'><a href="#type-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#type (method)">type</a></span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_stub'><a href="../../../top-level-namespace.html#stub-instance_method" title="#stub (method)">stub</a></span>
  <span class='ivar'>@expectation_type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'><a href="#type-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#type (method)">type</a></span>
  <span class='ivar'>@ordered</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@at_least</span> <span class='op'>=</span> <span class='ivar'>@at_most</span> <span class='op'>=</span> <span class='ivar'>@exactly</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='comment'># Initialized to nil so that we don&#39;t allocate an array for every
</span>  <span class='comment'># mock or stub. See also comment in `and_yield`.
</span>  <span class='ivar'>@args_to_yield</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@eval_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@yield_receiver_to_implementation_block</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='ivar'>@implementation</span> <span class='op'>=</span> <span class='const'><a href="../Implementation.html" title="RSpec::Mocks::Implementation (class)">Implementation</a></span>.<span class='id identifier rubyid_new'>new</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_inner_implementation_action'>inner_implementation_action</span> <span class='op'>=</span> <span class='id identifier rubyid_implementation_block'>implementation_block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="invoke-instance_method">
  <h3 class='signature '>
    #<strong>invoke</strong>(parent_stub, *args, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L473-L475'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='473' data-end='475'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 473</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_invoke'>invoke</span>(<span class='id identifier rubyid_parent_stub'>parent_stub</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_invoke_incrementing_actual_calls_by'><a href="#invoke_incrementing_actual_calls_by-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#invoke_incrementing_actual_calls_by (method)">invoke_incrementing_actual_calls_by</a></span>(<span class='int'>1</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_stub'>parent_stub</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="invoke_incrementing_actual_calls_by-instance_method">
  <h3 class='signature priv'>
    #<strong>invoke_incrementing_actual_calls_by</strong>(increment, allowed_to_fail, parent_stub, *args, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L604-L629'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='604' data-end='629'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 604</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_invoke_incrementing_actual_calls_by'>invoke_incrementing_actual_calls_by</span>(<span class='id identifier rubyid_increment'>increment</span><span class='comma'>,</span> <span class='id identifier rubyid_allowed_to_fail'>allowed_to_fail</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_stub'>parent_stub</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_unshift'>unshift</span>(<span class='id identifier rubyid_orig_object'><a href="#orig_object-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#orig_object (method)">orig_object</a></span>) <span class='kw'>if</span> <span class='id identifier rubyid_yield_receiver_to_implementation_block?'><a href="#yield_receiver_to_implementation_block%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#yield_receiver_to_implementation_block? (method)">yield_receiver_to_implementation_block?</a></span>

  <span class='kw'>if</span> <span class='id identifier rubyid_negative?'><a href="#negative%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#negative? (method)">negative?</a></span> <span class='op'>||</span> (<span class='id identifier rubyid_allowed_to_fail'>allowed_to_fail</span> <span class='op'>&amp;&amp;</span> (<span class='ivar'>@exactly</span> <span class='op'>||</span> <span class='ivar'>@at_most</span>) <span class='op'>&amp;&amp;</span> (<span class='ivar'>@actual_received_count</span> <span class='op'>==</span> <span class='ivar'>@expected_received_count</span>))
    <span class='comment'># args are the args we actually received, @argument_list_matcher is the
</span>    <span class='comment'># list of args we were expecting
</span>    <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_raise_expectation_error'>raise_expectation_error</span>(
      <span class='ivar'>@message</span><span class='comma'>,</span> <span class='ivar'>@expected_received_count</span><span class='comma'>,</span>
      <span class='ivar'>@argument_list_matcher</span><span class='comma'>,</span>
      <span class='ivar'>@actual_received_count</span> <span class='op'>+</span> <span class='id identifier rubyid_increment'>increment</span><span class='comma'>,</span>
      <span class='id identifier rubyid_expectation_count_type'><a href="#expectation_count_type-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#expectation_count_type (method)">expectation_count_type</a></span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_exception_source_id'><a href="#exception_source_id-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#exception_source_id (method)">exception_source_id</a></span>
    )
  <span class='kw'>end</span>

  <span class='ivar'>@order_group</span>.<span class='id identifier rubyid_handle_order_constraint'>handle_order_constraint</span> <span class='kw'>self</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>.<span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>.<span class='id identifier rubyid_call'>call</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>elsif</span> <span class='id identifier rubyid_parent_stub'>parent_stub</span>
    <span class='id identifier rubyid_parent_stub'>parent_stub</span>.<span class='id identifier rubyid_invoke'><a href="#invoke-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#invoke (method)">invoke</a></span>(<span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>end</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@actual_received_count_write_mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@actual_received_count</span> <span class='op'>+=</span> <span class='id identifier rubyid_increment'>increment</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="invoke_without_incrementing_received_count-instance_method">
  <h3 class='signature '>
    #<strong>invoke_without_incrementing_received_count</strong>(parent_stub, *args, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L478-L480'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='478' data-end='480'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 478</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_invoke_without_incrementing_received_count'>invoke_without_incrementing_received_count</span>(<span class='id identifier rubyid_parent_stub'>parent_stub</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_invoke_incrementing_actual_calls_by'><a href="#invoke_incrementing_actual_calls_by-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#invoke_incrementing_actual_calls_by (method)">invoke_incrementing_actual_calls_by</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_stub'>parent_stub</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matches?-instance_method">
  <h3 class='signature '>
    #<strong>matches?</strong>(message, *args)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L463-L465'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='463' data-end='465'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 463</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_matches?'>matches?</span>(<span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='ivar'>@message</span> <span class='op'>==</span> <span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@argument_list_matcher</span>.<span class='id identifier rubyid_args_match?'>args_match?</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matches_name_but_not_args-instance_method">
  <h3 class='signature '>
    #<strong>matches_name_but_not_args</strong>(message, *args)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L494-L496'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='494' data-end='496'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 494</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_matches_name_but_not_args'>matches_name_but_not_args</span>(<span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='ivar'>@message</span> <span class='op'>==</span> <span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@argument_list_matcher</span>.<span class='id identifier rubyid_args_match?'>args_match?</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="negative_expectation_for?-instance_method">
  <h3 class='signature '>
    #<strong>negative_expectation_for?</strong>(message)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L584-L586'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='584' data-end='586'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 584</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_negative_expectation_for?'>negative_expectation_for?</span>(<span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span>)
  <span class='ivar'>@message</span> <span class='op'>==</span> <span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_negative?'><a href="#negative%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#negative? (method)">negative?</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_already_invoked_error_if_necessary-instance_method">
  <h3 class='signature priv'>
    #<strong>raise_already_invoked_error_if_necessary</strong>(calling_customization)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L636-L640'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='636' data-end='640'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 636</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_raise_already_invoked_error_if_necessary'>raise_already_invoked_error_if_necessary</span>(<span class='id identifier rubyid_calling_customization'>calling_customization</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_has_been_invoked?'><a href="#has_been_invoked%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#has_been_invoked? (method)">has_been_invoked?</a></span>

  <span class='id identifier rubyid_error_generator'><a href="#error_generator-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#error_generator (method)">error_generator</a></span>.<span class='id identifier rubyid_raise_already_invoked_error'>raise_already_invoked_error</span>(<span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span><span class='comma'>,</span> <span class='id identifier rubyid_calling_customization'>calling_customization</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_out_of_order_error-instance_method">
  <h3 class='signature '>
    #<strong>raise_out_of_order_error</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L571-L573'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='571' data-end='573'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 571</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_raise_out_of_order_error'>raise_out_of_order_error</span>
  <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_raise_out_of_order_error'>raise_out_of_order_error</span> <span class='ivar'>@message</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_unexpected_message_args_error-instance_method">
  <h3 class='signature '>
    #<strong>raise_unexpected_message_args_error</strong>(args_for_multiple_calls)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L554-L556'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='554' data-end='556'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 554</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_raise_unexpected_message_args_error'>raise_unexpected_message_args_error</span>(<span class='id identifier rubyid_args_for_multiple_calls'>args_for_multiple_calls</span>)
  <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_raise_unexpected_message_args_error'>raise_unexpected_message_args_error</span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_args_for_multiple_calls'>args_for_multiple_calls</span><span class='comma'>,</span> <span class='id identifier rubyid_exception_source_id'><a href="#exception_source_id-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#exception_source_id (method)">exception_source_id</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="safe_invoke-instance_method">
  <h3 class='signature '>
    #<strong>safe_invoke</strong>(parent_stub, *args, &amp;block)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L468-L470'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='468' data-end='470'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 468</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_safe_invoke'>safe_invoke</span>(<span class='id identifier rubyid_parent_stub'>parent_stub</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_invoke_incrementing_actual_calls_by'><a href="#invoke_incrementing_actual_calls_by-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#invoke_incrementing_actual_calls_by (method)">invoke_incrementing_actual_calls_by</a></span>(<span class='int'>1</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_stub'>parent_stub</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_expected_received_count-instance_method">
  <h3 class='signature priv'>
    #<strong>set_expected_received_count</strong>(relativity, n)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L642-L653'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='642' data-end='653'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 642</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_set_expected_received_count'>set_expected_received_count</span>(<span class='id identifier rubyid_relativity'>relativity</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>`count` is not supported with negative message expectations</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_negative?'><a href="#negative%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#negative? (method)">negative?</a></span>
  <span class='ivar'>@at_least</span> <span class='op'>=</span> (<span class='id identifier rubyid_relativity'>relativity</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_at_least'><a href="../MessageExpectation.html#at_least-instance_method" title="RSpec::Mocks::MessageExpectation#at_least (method)">at_least</a></span>)
  <span class='ivar'>@at_most</span>  <span class='op'>=</span> (<span class='id identifier rubyid_relativity'>relativity</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_at_most'><a href="../MessageExpectation.html#at_most-instance_method" title="RSpec::Mocks::MessageExpectation#at_most (method)">at_most</a></span>)
  <span class='ivar'>@exactly</span>  <span class='op'>=</span> (<span class='id identifier rubyid_relativity'>relativity</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_exactly'><a href="../MessageExpectation.html#exactly-instance_method" title="RSpec::Mocks::MessageExpectation#exactly (method)">exactly</a></span>)
  <span class='ivar'>@expected_received_count</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_n'>n</span>
                             <span class='kw'>when</span> <span class='const'>Numeric</span> <span class='kw'>then</span> <span class='id identifier rubyid_n'>n</span>
                             <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_once'><a href="../MessageExpectation.html#once-instance_method" title="RSpec::Mocks::MessageExpectation#once (method)">once</a></span>   <span class='kw'>then</span> <span class='int'>1</span>
                             <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_twice'><a href="../MessageExpectation.html#twice-instance_method" title="RSpec::Mocks::MessageExpectation#twice (method)">twice</a></span>  <span class='kw'>then</span> <span class='int'>2</span>
                             <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_thrice'><a href="../MessageExpectation.html#thrice-instance_method" title="RSpec::Mocks::MessageExpectation#thrice (method)">thrice</a></span> <span class='kw'>then</span> <span class='int'>3</span>
                             <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="similar_messages-instance_method">
  <h3 class='signature '>
    #<strong>similar_messages</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L528-L530'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='528' data-end='530'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 528</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_similar_messages'>similar_messages</span>
  <span class='ivar'>@similar_messages</span> <span class='op'>||=</span> []
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unadvise-instance_method">
  <h3 class='signature '>
    #<strong>unadvise</strong>(args)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L536-L538'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='536' data-end='538'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 536</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unadvise'>unadvise</span>(<span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_similar_messages'><a href="#similar_messages-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#similar_messages (method)">similar_messages</a></span>.<span class='id identifier rubyid_delete_if'>delete_if</span> { <span class='op'>|</span><span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span><span class='op'>|</span> <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_message'><a href="#message-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#message (method)">message</a></span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="verify_messages_received-instance_method">
  <h3 class='signature '>
    #<strong>verify_messages_received</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L498-L501'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='498' data-end='501'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 498</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_verify_messages_received'>verify_messages_received</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_expected_messages_received?'><a href="#expected_messages_received%3F-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#expected_messages_received? (method)">expected_messages_received?</a></span>
  <span class='id identifier rubyid_generate_error'><a href="#generate_error-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#generate_error (method)">generate_error</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="warn_about_stub_override-instance_method">
  <h3 class='signature priv'>
    #<strong>warn_about_stub_override</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L669-L674'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='669' data-end='674'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 669</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_warn_about_stub_override'>warn_about_stub_override</span>
  <span class='const'><a href="../../../RSpec.html" title="RSpec (module)">RSpec</a></span>.<span class='id identifier rubyid_warning'><a href="../../Support/Warnings.html#warning-instance_method" title="RSpec::Support::Warnings#warning (method)">warning</a></span>(
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You&#39;re overriding a previous stub implementation of `</span><span class='embexpr_beg'>#{</span><span class='ivar'>@message</span><span class='embexpr_end'>}</span><span class='tstring_content'>`. </span><span class='tstring_end'>&quot;</span></span> \
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Called from </span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../CallerFilter.html" title="RSpec::CallerFilter (class)">CallerFilter</a></span>.<span class='id identifier rubyid_first_non_rspec_line'><a href="../../CallerFilter.html#first_non_rspec_line-class_method" title="RSpec::CallerFilter.first_non_rspec_line (method)">first_non_rspec_line</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
  )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wrap_original-instance_method">
  <h3 class='signature priv'>
    #<strong>wrap_original</strong>(method_name, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/message_expectation.rb#L676-L686'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='676' data-end='686'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/message_expectation.rb', line 676</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_wrap_original'>wrap_original</span>(<span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='const'><a href="../../../RSpec.html" title="RSpec (module)">RSpec</a></span><span class='op'>::</span><span class='const'><a href="../../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span><span class='op'>::</span><span class='const'><a href="../TestDouble.html" title="RSpec::Mocks::TestDouble (module)">TestDouble</a></span> <span class='op'>===</span> <span class='ivar'>@method_double</span>.<span class='id identifier rubyid_object'>object</span>
    <span class='ivar'>@error_generator</span>.<span class='id identifier rubyid_raise_only_valid_on_a_partial_double'>raise_only_valid_on_a_partial_double</span>(<span class='id identifier rubyid_method_name'>method_name</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_warn_about_stub_override'><a href="#warn_about_stub_override-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#warn_about_stub_override (method)">warn_about_stub_override</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_implementation'><a href="#implementation-instance_method" title="RSpec::Mocks::MessageExpectation::ImplementationDetails#implementation (method)">implementation</a></span>.<span class='id identifier rubyid_inner_action'>inner_action</span>
    <span class='ivar'>@implementation</span> <span class='op'>=</span> <span class='const'><a href="../AndWrapOriginalImplementation.html" title="RSpec::Mocks::AndWrapOriginalImplementation (class)">AndWrapOriginalImplementation</a></span>.<span class='id identifier rubyid_new'><a href="../AndWrapOriginalImplementation.html#new-class_method" title="RSpec::Mocks::AndWrapOriginalImplementation.new (method)">new</a></span>(<span class='ivar'>@method_double</span>.<span class='id identifier rubyid_original_implementation_callable'>original_implementation_callable</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>)
    <span class='ivar'>@yield_receiver_to_implementation_block</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>