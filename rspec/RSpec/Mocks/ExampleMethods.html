<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: RSpec::Mocks::ExampleMethods &mdash; RSpec main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "RSpec::Mocks::ExampleMethods",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>RSpec main</a> &raquo; 
      <a href='../../_index.html#alpha_E'>Index (E)</a> &raquo; 
        <a href="../../RSpec.html" title="RSpec (module)">RSpec</a> &raquo; 
        <a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ExampleMethods&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: RSpec::Mocks::ExampleMethods</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="ExampleMethods/ExpectHost.html" title="RSpec::Mocks::ExampleMethods::ExpectHost (module)"><code>ExpectHost</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="../Core/MockingAdapters/RSpec.html" title="RSpec::Core::MockingAdapters::RSpec (module)"><code>::RSpec::Core::MockingAdapters::RSpec</code></a>,
          <a href="MinitestIntegration.html" title="RSpec::Mocks::MinitestIntegration (module)"><code>MinitestIntegration</code></a>
      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="ArgumentMatchers.html" title="RSpec::Mocks::ArgumentMatchers (module)"><code>ArgumentMatchers</code></a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L9'>rspec-mocks/lib/rspec/mocks/example_methods.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Contains methods intended to be used from within code examples. Mix this in to your test context (such as a test framework base class) to use rspec-mocks with your test framework. If you’re using rspec-core, it’ll take care of doing this for you.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#declare_double-class_method" title=".declare_double (class method)">.<strong>declare_double</strong>(type, *args)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#declare_verifying_double-class_method" title=".declare_verifying_double (class method)">.<strong>declare_verifying_double</strong>(type, ref, *args)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#extended-class_method" title=".extended (class method)">.<strong>extended</strong>(object)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#included-class_method" title=".included (class method)">.<strong>included</strong>(klass)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#allow-instance_method" title="#allow (instance method)">#<strong>allow</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Used to wrap an object in preparation for stubbing a method on it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#allow_any_instance_of-instance_method" title="#allow_any_instance_of (instance method)">#<strong>allow_any_instance_of</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Used to wrap a class in preparation for stubbing a method on instances of it.</p></div>
    </div>
  </li>
  <li class='deprecated'>
    <span class='summary_signature deprecated'>
      <a href="#allow_message_expectations_on_nil-instance_method" title="#allow_message_expectations_on_nil (instance method)">#<strong>allow_message_expectations_on_nil</strong>  </a>
    </span>
    <span class='deprecated note title'>deprecated</span>
    <span class='summary_desc'><strong>Deprecated.</strong>
      <div class='inline'>
<p>Use <a href="Configuration.html#allow_message_expectations_on_nil-instance_method" title="RSpec::Mocks::Configuration#allow_message_expectations_on_nil (method)">Configuration#allow_message_expectations_on_nil</a> instead.</p>
</div>    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#class_double-instance_method" title="#class_double (instance method)">#<strong>class_double</strong>(doubled_class)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a test double against a specific class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#class_spy-instance_method" title="#class_spy (instance method)">#<strong>class_spy</strong>(doubled_class)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a> against a specific class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#double-instance_method" title="#double (instance method)">#<strong>double</strong>  &#x21d2; Double </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs an instance of [RSpec::Mocks::Double](RSpec::Mocks::Double) configured with an optional name, used for reporting in failure messages, and an optional hash of message/return-value pairs.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#expect-instance_method" title="#expect (instance method)">#<strong>expect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Used to wrap an object in preparation for setting a mock expectation on it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#expect_any_instance_of-instance_method" title="#expect_any_instance_of (instance method)">#<strong>expect_any_instance_of</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Used to wrap a class in preparation for setting a mock expectation on instances of it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#have_received-instance_method" title="#have_received (instance method)">#<strong>have_received</strong>(method_name, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Verifies that the given object received the expected message during the course of the test.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hide_const-instance_method" title="#hide_const (instance method)">#<strong>hide_const</strong>(constant_name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Hides the named constant with the given value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#instance_double-instance_method" title="#instance_double (instance method)">#<strong>instance_double</strong>(doubled_class)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a test double against a specific class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#instance_spy-instance_method" title="#instance_spy (instance method)">#<strong>instance_spy</strong>(doubled_class)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a> against a specific class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#object_double-instance_method" title="#object_double (instance method)">#<strong>object_double</strong>(object_or_name)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a test double against a specific object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#object_spy-instance_method" title="#object_spy (instance method)">#<strong>object_spy</strong>(object_or_name)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a> against a specific object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#receive-instance_method" title="#receive (instance method)">#<strong>receive</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Used to specify a message that you expect or allow an object to receive.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#receive_message_chain-instance_method" title="#receive_message_chain (instance method)">#<strong>receive_message_chain</strong>(method1, method2)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>stubs/mocks a chain of messages on an object or test double.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#receive_messages-instance_method" title="#receive_messages (instance method)">#<strong>receive_messages</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Shorthand syntax used to setup message(s), and their return value(s), that you expect or allow an object to receive.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#spy-instance_method" title="#spy (instance method)">#<strong>spy</strong>  &#x21d2; Double </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stub_const-instance_method" title="#stub_const (instance method)">#<strong>stub_const</strong>(constant_name, value, options = {})  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Stubs the named constant with the given value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#without_partial_double_verification-instance_method" title="#without_partial_double_verification (instance method)">#<strong>without_partial_double_verification</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Turns off the verifying of partial doubles for the duration of the block, this is useful in situations where methods are defined at run time and you wish to define stubs for them but not turn off partial doubles for the entire run suite.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="ArgumentMatchers.html" title="RSpec::Mocks::ArgumentMatchers (module)"><code>ArgumentMatchers</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#a_kind_of-instance_method" title="RSpec::Mocks::ArgumentMatchers#a_kind_of (method)">#a_kind_of</a></td>
      <td><div class='inline'><p>Alias for <a href="ArgumentMatchers.html#kind_of-instance_method" title="RSpec::Mocks::ArgumentMatchers#kind_of (method)">ArgumentMatchers#kind_of</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#an_instance_of-instance_method" title="RSpec::Mocks::ArgumentMatchers#an_instance_of (method)">#an_instance_of</a></td>
      <td><div class='inline'><p>Alias for <a href="ArgumentMatchers.html#instance_of-instance_method" title="RSpec::Mocks::ArgumentMatchers#instance_of (method)">ArgumentMatchers#instance_of</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#any_args-instance_method" title="RSpec::Mocks::ArgumentMatchers#any_args (method)">#any_args</a></td>
      <td><div class='inline'><p>Acts like an arg splat, matching any number of args at any point in an arg list.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#anything-instance_method" title="RSpec::Mocks::ArgumentMatchers#anything (method)">#anything</a></td>
      <td><div class='inline'><p>Matches any argument at all.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#array_excluding-instance_method" title="RSpec::Mocks::ArgumentMatchers#array_excluding (method)">#array_excluding</a></td>
      <td><div class='inline'><p>Matches an array that excludes the specified items.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#array_including-instance_method" title="RSpec::Mocks::ArgumentMatchers#array_including (method)">#array_including</a></td>
      <td><div class='inline'><p>Matches an array that includes the specified items at least once.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#boolean-instance_method" title="RSpec::Mocks::ArgumentMatchers#boolean (method)">#boolean</a></td>
      <td><div class='inline'><p>Matches a boolean value.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#duck_type-instance_method" title="RSpec::Mocks::ArgumentMatchers#duck_type (method)">#duck_type</a></td>
      <td><div class='inline'><p>Matches if the actual argument responds to the specified messages.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#hash_excluding-instance_method" title="RSpec::Mocks::ArgumentMatchers#hash_excluding (method)">#hash_excluding</a></td>
      <td><div class='inline'><p>Matches a hash that doesn’t include the specified key(s) or key/value.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#hash_including-instance_method" title="RSpec::Mocks::ArgumentMatchers#hash_including (method)">#hash_including</a></td>
      <td><div class='inline'><p>Matches a hash that includes the specified key(s) or key/value pairs.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#hash_not_including-instance_method" title="RSpec::Mocks::ArgumentMatchers#hash_not_including (method)">#hash_not_including</a></td>
      <td><div class='inline'><p>Alias for <a href="ArgumentMatchers.html#hash_excluding-instance_method" title="RSpec::Mocks::ArgumentMatchers#hash_excluding (method)">ArgumentMatchers#hash_excluding</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#instance_of-instance_method" title="RSpec::Mocks::ArgumentMatchers#instance_of (method)">#instance_of</a></td>
      <td><div class='inline'><p>Matches if ‘arg.instance_of?(klass)`.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#kind_of-instance_method" title="RSpec::Mocks::ArgumentMatchers#kind_of (method)">#kind_of</a></td>
      <td><div class='inline'><p>Matches if ‘arg.kind_of?(klass)`.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ArgumentMatchers.html#no_args-instance_method" title="RSpec::Mocks::ArgumentMatchers#no_args (method)">#no_args</a></td>
      <td><div class='inline'><p>Matches no arguments.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="declare_double-class_method">
  <h3 class='signature nodoc first'>
    .<strong>declare_double</strong>(type, *args)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L423-L426'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='423' data-end='426'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 423</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_declare_double'>declare_double</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_args'>args</span> <span class='op'>&lt;&lt;</span> {} <span class='kw'>unless</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_last'>last</span>
  <span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_new'>new</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="declare_verifying_double-class_method">
  <h3 class='signature nodoc'>
    .<strong>declare_verifying_double</strong>(type, ref, *args)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L408-L420'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='408' data-end='420'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 408</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_declare_verifying_double'>declare_verifying_double</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='kw'>if</span> <span class='const'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span><span class='op'>::</span><span class='const'><a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span>.<span class='id identifier rubyid_configuration'><a href="../Mocks.html#configuration-class_method" title="RSpec::Mocks.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_verify_doubled_constant_names?'>verify_doubled_constant_names?</span> <span class='op'>&amp;&amp;</span>
    <span class='op'>!</span><span class='id identifier rubyid_ref'>ref</span>.<span class='id identifier rubyid_defined?'>defined?</span>

    <span class='const'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span><span class='op'>::</span><span class='const'><a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span>.<span class='id identifier rubyid_error_generator'><a href="../Mocks.html#error_generator-class_method" title="RSpec::Mocks.error_generator (method)">error_generator</a></span>.<span class='id identifier rubyid_raise_verifying_double_not_defined_error'>raise_verifying_double_not_defined_error</span>(<span class='id identifier rubyid_ref'>ref</span>)
  <span class='kw'>end</span>

  <span class='const'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span><span class='op'>::</span><span class='const'><a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span>.<span class='id identifier rubyid_configuration'><a href="../Mocks.html#configuration-class_method" title="RSpec::Mocks.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_verifying_double_callbacks'>verifying_double_callbacks</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
    <span class='id identifier rubyid_block'>block</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_ref'>ref</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_declare_double'><a href="#declare_double-class_method" title="RSpec::Mocks::ExampleMethods.declare_double (method)">declare_double</a></span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="extended-class_method">
  <h3 class='signature nodoc'>
    .<strong>extended</strong>(object)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L401-L405'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='401' data-end='405'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 401</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_extended'>extended</span>(<span class='id identifier rubyid_object'>object</span>)
  <span class='comment'># This gets extended in so that if `RSpec::Matchers` is included in
</span>  <span class='comment'># `klass` later, its definition of `expect` will take precedence.
</span>  <span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_extend'>extend</span> <span class='const'><a href="ExampleMethods/ExpectHost.html" title="RSpec::Mocks::ExampleMethods::ExpectHost (module)">ExpectHost</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_expect'><a href="#expect-instance_method" title="RSpec::Mocks::ExampleMethods#expect (method)">expect</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="included-class_method">
  <h3 class='signature nodoc'>
    .<strong>included</strong>(klass)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L392-L398'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='392' data-end='398'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 392</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_included'>included</span>(<span class='id identifier rubyid_klass'>klass</span>)
  <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_class_exec'>class_exec</span> <span class='kw'>do</span>
    <span class='comment'># This gets mixed in so that if `RSpec::Matchers` is included in
</span>    <span class='comment'># `klass` later, its definition of `expect` will take precedence.
</span>    <span class='id identifier rubyid_include'>include</span> <span class='const'><a href="ExampleMethods/ExpectHost.html" title="RSpec::Mocks::ExampleMethods::ExpectHost (module)">ExpectHost</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_expect'><a href="#expect-instance_method" title="RSpec::Mocks::ExampleMethods#expect (method)">expect</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="allow-instance_method">
  <h3 class='signature  first'>
    #<strong>allow</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>If you disable the <code>:expect</code> syntax this method will be undefined.</p>
</div>
  </div>


<p>Used to wrap an object in preparation for stubbing a method on it.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_allow'>allow</span>(<span class='id identifier rubyid_dbl'>dbl</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive'><a href="#receive-instance_method" title="RSpec::Mocks::ExampleMethods#receive (method)">receive</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>).<span class='id identifier rubyid_with'>with</span>(<span class='int'>5</span>).<span class='id identifier rubyid_and_return'>and_return</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_return_value'>return_value</span>)</code></pre>
  </div>

</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L309-L309'>GitHub</a> ]</span>

</section>

<section class='method_details' id="allow_any_instance_of-instance_method">
  <h3 class='signature '>
    #<strong>allow_any_instance_of</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This is only available when you have enabled the <a href="#expect-instance_method" title="RSpec::Mocks::ExampleMethods#expect (method)">#expect</a> syntax.</p>
</div>
  </div>


<p>Used to wrap a class in preparation for stubbing a method on instances of it.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_allow_any_instance_of'>allow_any_instance_of</span>(<span class='const'>MyClass</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive'><a href="#receive-instance_method" title="RSpec::Mocks::ExampleMethods#receive (method)">receive</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>)</code></pre>
  </div>

</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L327-L327'>GitHub</a> ]</span>

</section>

<section class='method_details' id="allow_message_expectations_on_nil-instance_method">
  <h3 class='signature deprecated'>
    #<strong>allow_message_expectations_on_nil</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'>
<p>Use <a href="Configuration.html#allow_message_expectations_on_nil-instance_method" title="RSpec::Mocks::Configuration#allow_message_expectations_on_nil (method)">Configuration#allow_message_expectations_on_nil</a> instead.</p>
</div></div>

<p>Disables warning messages about expectations being set on nil.</p>

<p>By default warning messages are issued when expectations are set on nil.  This is to prevent false-positives and to catch potential bugs early on.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L201-L203'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='201' data-end='203'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 201</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_allow_message_expectations_on_nil'>allow_message_expectations_on_nil</span>
  <span class='const'><a href="../../RSpec.html" title="RSpec (module)">RSpec</a></span><span class='op'>::</span><span class='const'><a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span>.<span class='id identifier rubyid_space'><a href="../Mocks.html#space-class_method" title="RSpec::Mocks.space (method)">space</a></span>.<span class='id identifier rubyid_proxy_for'>proxy_for</span>(<span class='kw'>nil</span>).<span class='id identifier rubyid_warn_about_expectations'>warn_about_expectations</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="class_double-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>class_double</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>class_double</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>class_double</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>class_double</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a test double against a specific class. If the given class name has been loaded, only class methods defined on the class are allowed to be stubbed. In all other ways it behaves like a [double](double).</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>Overloads:</p>
  <ul class='overload'>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_double</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <code>Module</code>)</span>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_double</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <code>Module</code>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_double</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <code>Module</code>)</span>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_double</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <code>Module</code>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p><a href="ClassVerifyingDouble.html" title="RSpec::Mocks::ClassVerifyingDouble (class)"><code>ClassVerifyingDouble</code></a></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L79-L82'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='79' data-end='82'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 79</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_class_double'>class_double</span>(<span class='id identifier rubyid_doubled_class'>doubled_class</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_ref'>ref</span> <span class='op'>=</span> <span class='const'><a href="ObjectReference.html" title="RSpec::Mocks::ObjectReference (class)">ObjectReference</a></span>.<span class='id identifier rubyid_for'><a href="ObjectReference.html#for-class_method" title="RSpec::Mocks::ObjectReference.for (method)">for</a></span>(<span class='id identifier rubyid_doubled_class'>doubled_class</span>)
  <span class='const'>ExampleMethods</span>.<span class='id identifier rubyid_declare_verifying_double'><a href="#declare_verifying_double-class_method" title="RSpec::Mocks::ExampleMethods.declare_verifying_double (method)">declare_verifying_double</a></span>(<span class='const'><a href="ClassVerifyingDouble.html" title="RSpec::Mocks::ClassVerifyingDouble (class)">ClassVerifyingDouble</a></span><span class='comma'>,</span> <span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="class_spy-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>class_spy</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>class_spy</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>class_spy</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>class_spy</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a> against a specific class. If the given class name has been loaded, only class methods defined on the class are allowed to be stubbed. With a normal double one has to stub methods in order to be able to spy them. An class_spy automatically spies on all class methods to which the class responds.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>Overloads:</p>
  <ul class='overload'>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_spy</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <code>Module</code>)</span>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_spy</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_spy</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <code>Module</code>)</span>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>class_spy</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p><a href="ClassVerifyingDouble.html" title="RSpec::Mocks::ClassVerifyingDouble (class)"><code>ClassVerifyingDouble</code></a></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L191-L193'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='191' data-end='193'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 191</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_class_spy'>class_spy</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_class_double'><a href="#class_double-instance_method" title="RSpec::Mocks::ExampleMethods#class_double (method)">class_double</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>).<span class='id identifier rubyid_as_null_object'><a href="../../top-level-namespace.html#as_null_object-instance_method" title="#as_null_object (method)">as_null_object</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="double-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>double</strong>  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
      <span class='overload'>#<strong>double</strong>(name)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
      <span class='overload'>#<strong>double</strong>(stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
      <span class='overload'>#<strong>double</strong>(name, stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs an instance of [RSpec::Mocks::Double](RSpec::Mocks::Double) configured with an optional name, used for reporting in failure messages, and an optional hash of message/return-value pairs.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_book'>book</span> <span class='op'>=</span> <span class='id identifier rubyid_double'>double</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>book</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_title'>title</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The RSpec Book</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_book'>book</span>.<span class='id identifier rubyid_title'>title</span> <span class='comment'>#=&gt; &quot;The RSpec Book&quot;
</span>
<span class='id identifier rubyid_card'>card</span> <span class='op'>=</span> <span class='id identifier rubyid_double'>double</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>card</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_suit'>suit</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Spades</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_rank'>rank</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_card'>card</span>.<span class='id identifier rubyid_suit'>suit</span>  <span class='comment'>#=&gt; &quot;Spades&quot;
</span><span class='id identifier rubyid_card'>card</span>.<span class='id identifier rubyid_rank'>rank</span>  <span class='comment'>#=&gt; &quot;A&quot;</span></code></pre>
  </div>
  <p class='tag_title'>Overloads:</p>
  <ul class='overload'>


      <li class='overload_item'>
        <span class='signature'>#<strong>double</strong>(name)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>double</strong>(stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>double</strong>(name, stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L34-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='34' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 34</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_double'>double</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='const'>ExampleMethods</span>.<span class='id identifier rubyid_declare_double'><a href="#declare_double-class_method" title="RSpec::Mocks::ExampleMethods.declare_double (method)">declare_double</a></span>(<span class='const'><a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a></span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expect-instance_method">
  <h3 class='signature '>
    #<strong>expect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method is usually provided by rspec-expectations. However, if you use rspec-mocks without rspec-expectations, there’s a definition of it that is made available here. If you disable the <code>:expect</code> syntax this method will be undefined.</p>
</div>
  </div>


<p>Used to wrap an object in preparation for setting a mock expectation on it.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_expect'>expect</span>(<span class='id identifier rubyid_obj'>obj</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive'><a href="#receive-instance_method" title="RSpec::Mocks::ExampleMethods#receive (method)">receive</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>).<span class='id identifier rubyid_with'>with</span>(<span class='int'>5</span>).<span class='id identifier rubyid_and_return'>and_return</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_return_value'>return_value</span>)</code></pre>
  </div>

</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L297-L297'>GitHub</a> ]</span>

</section>

<section class='method_details' id="expect_any_instance_of-instance_method">
  <h3 class='signature '>
    #<strong>expect_any_instance_of</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>If you disable the <code>:expect</code> syntax this method will be undefined.</p>
</div>
  </div>


<p>Used to wrap a class in preparation for setting a mock expectation on instances of it.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_expect_any_instance_of'>expect_any_instance_of</span>(<span class='const'>MyClass</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive'><a href="#receive-instance_method" title="RSpec::Mocks::ExampleMethods#receive (method)">receive</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>)</code></pre>
  </div>

</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L318-L318'>GitHub</a> ]</span>

</section>

<section class='method_details' id="have_received-instance_method">
  <h3 class='signature '>
    #<strong>have_received</strong>(method_name, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>‘have_received(…).with(…)` is unable to work properly when passed arguments are mutated after the spy records the received message.</p>
</div>
  </div>


<p>Verifies that the given object received the expected message during the course of the test. On a spy objects or as null object doubles this works for any method, on other objects the method must have been stubbed beforehand in order for messages to be verified.</p>

<p>Stubbing and verifying messages received in this way implements the Test Spy pattern.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>=</span> <span class='id identifier rubyid_double'><a href="#double-instance_method" title="RSpec::Mocks::ExampleMethods#double (method)">double</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invitation</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>accept:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_accept_invitation'>accept_invitation</span>(<span class='id identifier rubyid_invitation'>invitation</span>)
<span class='id identifier rubyid_expect'><a href="#expect-instance_method" title="RSpec::Mocks::ExampleMethods#expect (method)">expect</a></span>(<span class='id identifier rubyid_invitation'>invitation</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_have_received'>have_received</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_accept'>accept</span>)

<span class='comment'># You can also use most message expectations:
</span><span class='id identifier rubyid_expect'><a href="#expect-instance_method" title="RSpec::Mocks::ExampleMethods#expect (method)">expect</a></span>(<span class='id identifier rubyid_invitation'>invitation</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_have_received'>have_received</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_accept'>accept</span>).<span class='id identifier rubyid_with'>with</span>(<span class='id identifier rubyid_mailer'>mailer</span>).<span class='id identifier rubyid_once'>once</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>method_name</span>
    <span class='type'>(<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name of the method expected to have been called.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L281-L283'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='281' data-end='283'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 281</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_have_received'>have_received</span>(<span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='const'><a href="Matchers.html" title="RSpec::Mocks::Matchers (module)">Matchers</a></span><span class='op'>::</span><span class='const'><a href="Matchers/HaveReceived.html" title="RSpec::Mocks::Matchers::HaveReceived (class)">HaveReceived</a></span>.<span class='id identifier rubyid_new'><a href="Matchers/HaveReceived.html#new-class_method" title="RSpec::Mocks::Matchers::HaveReceived.new (method)">new</a></span>(<span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="hide_const-instance_method">
  <h3 class='signature '>
    #<strong>hide_const</strong>(constant_name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Hides the named constant with the given value. The constant will be undefined for the duration of the test.</p>

<p>Like method stubs, the constant will be restored to its original value when the example completes.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_hide_const'>hide_const</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MyClass</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; MyClass is now an undefined constant</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>constant_name</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The fully qualified name of the constant. The current constant scoping at the point of call is not considered.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L256-L258'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='256' data-end='258'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 256</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_hide_const'>hide_const</span>(<span class='id identifier rubyid_constant_name'>constant_name</span>)
  <span class='const'><a href="ConstantMutator.html" title="RSpec::Mocks::ConstantMutator (class)">ConstantMutator</a></span>.<span class='id identifier rubyid_hide'><a href="ConstantMutator.html#hide-class_method" title="RSpec::Mocks::ConstantMutator.hide (method)">hide</a></span>(<span class='id identifier rubyid_constant_name'>constant_name</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instance_double-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>instance_double</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>instance_double</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>instance_double</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>instance_double</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a test double against a specific class. If the given class name has been loaded, only instance methods defined on the class are allowed to be stubbed. In all other ways it behaves like a [double](double).</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>Overloads:</p>
  <ul class='overload'>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_double</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_double</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_double</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_double</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p><a href="InstanceVerifyingDouble.html" title="RSpec::Mocks::InstanceVerifyingDouble (class)"><code>InstanceVerifyingDouble</code></a></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L56-L59'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='59'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instance_double'>instance_double</span>(<span class='id identifier rubyid_doubled_class'>doubled_class</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_ref'>ref</span> <span class='op'>=</span> <span class='const'><a href="ObjectReference.html" title="RSpec::Mocks::ObjectReference (class)">ObjectReference</a></span>.<span class='id identifier rubyid_for'><a href="ObjectReference.html#for-class_method" title="RSpec::Mocks::ObjectReference.for (method)">for</a></span>(<span class='id identifier rubyid_doubled_class'>doubled_class</span>)
  <span class='const'>ExampleMethods</span>.<span class='id identifier rubyid_declare_verifying_double'><a href="#declare_verifying_double-class_method" title="RSpec::Mocks::ExampleMethods.declare_verifying_double (method)">declare_verifying_double</a></span>(<span class='const'><a href="InstanceVerifyingDouble.html" title="RSpec::Mocks::InstanceVerifyingDouble (class)">InstanceVerifyingDouble</a></span><span class='comma'>,</span> <span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instance_spy-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>instance_spy</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>instance_spy</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>instance_spy</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>instance_spy</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a> against a specific class. If the given class name has been loaded, only instance methods defined on the class are allowed to be stubbed.  With a normal double one has to stub methods in order to be able to spy them. An instance_spy automatically spies on all instance methods to which the class responds.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>Overloads:</p>
  <ul class='overload'>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_spy</strong>(doubled_class)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_spy</strong>(doubled_class, name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_spy</strong>(doubled_class, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>instance_spy</strong>(doubled_class, name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>doubled_class</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p><a href="InstanceVerifyingDouble.html" title="RSpec::Mocks::InstanceVerifyingDouble (class)"><code>InstanceVerifyingDouble</code></a></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L144-L146'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='144' data-end='146'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 144</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instance_spy'>instance_spy</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_instance_double'><a href="#instance_double-instance_method" title="RSpec::Mocks::ExampleMethods#instance_double (method)">instance_double</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>).<span class='id identifier rubyid_as_null_object'><a href="../../top-level-namespace.html#as_null_object-instance_method" title="#as_null_object (method)">as_null_object</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="object_double-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>object_double</strong>(object_or_name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>object_double</strong>(object_or_name, name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>object_double</strong>(object_or_name, stubs)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>object_double</strong>(object_or_name, name, stubs)  &#x21d2; <code>Object</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a test double against a specific object. Only the methods the object responds to are allowed to be stubbed. If a String argument is provided, it is assumed to reference a constant object which is used for verification. In all other ways it behaves like a [double](double).</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>Overloads:</p>
  <ul class='overload'>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_double</strong>(object_or_name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <code>Object</code>)</span>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_double</strong>(object_or_name, name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <code>Object</code>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_double</strong>(object_or_name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <code>Object</code>)</span>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_double</strong>(object_or_name, name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <code>Object</code>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p><a href="ObjectVerifyingDouble.html" title="RSpec::Mocks::ObjectVerifyingDouble (class)"><code>ObjectVerifyingDouble</code></a></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L102-L105'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='102' data-end='105'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 102</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_object_double'>object_double</span>(<span class='id identifier rubyid_object_or_name'>object_or_name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_ref'>ref</span> <span class='op'>=</span> <span class='const'><a href="ObjectReference.html" title="RSpec::Mocks::ObjectReference (class)">ObjectReference</a></span>.<span class='id identifier rubyid_for'><a href="ObjectReference.html#for-class_method" title="RSpec::Mocks::ObjectReference.for (method)">for</a></span>(<span class='id identifier rubyid_object_or_name'>object_or_name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_allow_direct_object_refs'>allow_direct_object_refs</span>)
  <span class='const'>ExampleMethods</span>.<span class='id identifier rubyid_declare_verifying_double'><a href="#declare_verifying_double-class_method" title="RSpec::Mocks::ExampleMethods.declare_verifying_double (method)">declare_verifying_double</a></span>(<span class='const'><a href="ObjectVerifyingDouble.html" title="RSpec::Mocks::ObjectVerifyingDouble (class)">ObjectVerifyingDouble</a></span><span class='comma'>,</span> <span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="object_spy-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>object_spy</strong>(object_or_name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>object_spy</strong>(object_or_name, name)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>object_spy</strong>(object_or_name, stubs)  &#x21d2; <code>Object</code> </span>
      <span class='overload'>#<strong>object_spy</strong>(object_or_name, name, stubs)  &#x21d2; <code>Object</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a> against a specific object. Only instance methods defined on the object are allowed to be stubbed.  With a normal double one has to stub methods in order to be able to spy them. An object_spy automatically spies on all methods to which the object responds.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>Overloads:</p>
  <ul class='overload'>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_spy</strong>(object_or_name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <code>Object</code>)</span>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_spy</strong>(object_or_name, name)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_spy</strong>(object_or_name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <code>Object</code>)</span>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>object_spy</strong>(object_or_name, name, stubs)  &#x21d2; <code>Object</code> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>object_or_name</span>
    <span class='type'>(<code>String</code>, <a href="../../Class.html" title="Class (class)">Class</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p><a href="ObjectVerifyingDouble.html" title="RSpec::Mocks::ObjectVerifyingDouble (class)"><code>ObjectVerifyingDouble</code></a></p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L167-L169'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='167' data-end='169'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 167</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_object_spy'>object_spy</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_object_double'><a href="#object_double-instance_method" title="RSpec::Mocks::ExampleMethods#object_double (method)">object_double</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>).<span class='id identifier rubyid_as_null_object'><a href="../../top-level-namespace.html#as_null_object-instance_method" title="#as_null_object (method)">as_null_object</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="receive-instance_method">
  <h3 class='signature '>
    #<strong>receive</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>If you disable the <code>:expect</code> syntax this method will be undefined.</p>
</div>
  </div>


<p>Used to specify a message that you expect or allow an object to receive. The object returned by <code>receive</code> supports the same fluent interface that <a href="../../top-level-namespace.html#should_receive-instance_method" title="#should_receive (method)">#should_receive</a> and <a href="../../top-level-namespace.html#stub-instance_method" title="#stub (method)">#stub</a> have always supported, allowing you to constrain the arguments or number of times, and configure how the object should respond to the message.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_expect'><a href="#expect-instance_method" title="RSpec::Mocks::ExampleMethods#expect (method)">expect</a></span>(<span class='id identifier rubyid_obj'>obj</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive'>receive</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span>).<span class='id identifier rubyid_with'>with</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>world</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_exactly'>exactly</span>(<span class='int'>3</span>).<span class='id identifier rubyid_times'>times</span></code></pre>
  </div>

</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L336-L336'>GitHub</a> ]</span>

</section>

<section class='method_details' id="receive_message_chain-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>receive_message_chain</strong>(method1, method2)  </span>
      <span class='overload'>#<strong>receive_message_chain</strong>(&quot;method1.method2&quot;)  </span>
      <span class='overload'>#<strong>receive_message_chain</strong>(method1, method_to_value_hash)  </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>If you disable the <code>:expect</code> syntax this method will be undefined.</p>
</div>
  </div>

<p>stubs/mocks a chain of messages on an object or test double.</p>

<h2>Warning:</h2>

<p>Chains can be arbitrarily long, which makes it quite painless to
violate the Law of Demeter in violent ways, so you should consider any
use of <code>receive_message_chain</code> a code smell. Even though not all code smells
indicate real problems (think fluent interfaces), <code>receive_message_chain</code> still
results in brittle examples.  For example, if you write
<code>allow(foo).to receive_message_chain(:bar, &lt;code&gt;:baz&lt;/code&gt; =&gt; 37)</code> in a spec and then the
implementation calls <code>foo.baz.bar</code>, the stub will not work.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_allow'><a href="#allow-instance_method" title="RSpec::Mocks::ExampleMethods#allow (method)">allow</a></span>(<span class='id identifier rubyid_double'><a href="#double-instance_method" title="RSpec::Mocks::ExampleMethods#double (method)">double</a></span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive_message_chain'>receive_message_chain</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo.bar</span><span class='tstring_end'>&quot;</span></span>) { <span class='symbeg'>:</span><span class='id identifier rubyid_baz'>baz</span> }
<span class='id identifier rubyid_allow'><a href="#allow-instance_method" title="RSpec::Mocks::ExampleMethods#allow (method)">allow</a></span>(<span class='id identifier rubyid_double'><a href="#double-instance_method" title="RSpec::Mocks::ExampleMethods#double (method)">double</a></span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive_message_chain'>receive_message_chain</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_baz'>baz</span>)
<span class='id identifier rubyid_allow'><a href="#allow-instance_method" title="RSpec::Mocks::ExampleMethods#allow (method)">allow</a></span>(<span class='id identifier rubyid_double'><a href="#double-instance_method" title="RSpec::Mocks::ExampleMethods#double (method)">double</a></span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive_message_chain'>receive_message_chain</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span>) { <span class='symbeg'>:</span><span class='id identifier rubyid_baz'>baz</span> }

<span class='comment'># Given any of ^^ these three forms ^^:
</span><span class='id identifier rubyid_double'><a href="#double-instance_method" title="RSpec::Mocks::ExampleMethods#double (method)">double</a></span>.<span class='id identifier rubyid_foo'>foo</span>.<span class='id identifier rubyid_bar'>bar</span> <span class='comment'># =&gt; :baz
</span>
<span class='comment'># Common use in Rails/ActiveRecord:
</span><span class='id identifier rubyid_allow'><a href="#allow-instance_method" title="RSpec::Mocks::ExampleMethods#allow (method)">allow</a></span>(<span class='const'>Article</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive_message_chain'>receive_message_chain</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>recent.published</span><span class='tstring_end'>&quot;</span></span>) { [<span class='const'>Article</span>.<span class='id identifier rubyid_new'>new</span>] }</code></pre>
  </div>

</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L361-L361'>GitHub</a> ]</span>

</section>

<section class='method_details' id="receive_messages-instance_method">
  <h3 class='signature '>
    #<strong>receive_messages</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>If you disable the <code>:expect</code> syntax this method will be undefined.</p>
</div>
  </div>


<p>Shorthand syntax used to setup message(s), and their return value(s), that you expect or allow an object to receive. The method takes a hash of messages and their respective return values. Unlike with <a href="#receive-instance_method" title="RSpec::Mocks::ExampleMethods#receive (method)">#receive</a>, you cannot apply further customizations using a block or the fluent interface.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_allow'><a href="#allow-instance_method" title="RSpec::Mocks::ExampleMethods#allow (method)">allow</a></span>(<span class='id identifier rubyid_obj'>obj</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive_messages'>receive_messages</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_speak'>speak</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_allow'><a href="#allow-instance_method" title="RSpec::Mocks::ExampleMethods#allow (method)">allow</a></span>(<span class='id identifier rubyid_obj'>obj</span>).<span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_receive_messages'>receive_messages</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_speak'>speak</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_meow'>meow</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Meow</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
  </div>

</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L348-L348'>GitHub</a> ]</span>

</section>

<section class='method_details' id="spy-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>spy</strong>  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
      <span class='overload'>#<strong>spy</strong>(name)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
      <span class='overload'>#<strong>spy</strong>(stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
      <span class='overload'>#<strong>spy</strong>(name, stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructs a test double that is optimized for use with <a href="#have_received-instance_method" title="RSpec::Mocks::ExampleMethods#have_received (method)">#have_received</a>. With a normal double one has to stub methods in order to be able to spy them. A spy automatically spies on all methods.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>Overloads:</p>
  <ul class='overload'>


      <li class='overload_item'>
        <span class='signature'>#<strong>spy</strong>(name)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>spy</strong>(stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>

      <li class='overload_item'>
        <span class='signature'>#<strong>spy</strong>(name, stubs)  &#x21d2; <a href="Double.html" title="RSpec::Mocks::Double (class)">Double</a> </span>
        <div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>/<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>name or description to be used in failure messages</p>
</div>
  </li>
  <li>
    <span class='name'>stubs</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>hash of message/return-value pairs</p>
</div>
  </li>
</ul>

</div>

      </li>
  </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L120-L122'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='120' data-end='122'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 120</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_spy'>spy</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_double'><a href="#double-instance_method" title="RSpec::Mocks::ExampleMethods#double (method)">double</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>).<span class='id identifier rubyid_as_null_object'><a href="TestDouble.html#as_null_object-instance_method" title="RSpec::Mocks::TestDouble#as_null_object (method)">as_null_object</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stub_const-instance_method">
  <h3 class='signature '>
    #<strong>stub_const</strong>(constant_name, value, options = {})  &#x21d2; <code>Object</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Stubs the named constant with the given value. Like method stubs, the constant will be restored to its original value (or lack of one, if it was undefined) when the example completes.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_stub_const'>stub_const</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MyClass</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'>new</span>) <span class='comment'># =&gt; Replaces (or defines) MyClass with a new class object.
</span><span class='id identifier rubyid_stub_const'>stub_const</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SomeModel::PER_PAGE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>5</span>) <span class='comment'># =&gt; Sets SomeModel::PER_PAGE to 5.
</span>
<span class='kw'>class</span> <span class='const'>CardDeck</span>
  <span class='const'>SUITS</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='const'>Spades</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>Diamonds</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>Clubs</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>Hearts</span>]
  <span class='const'>NUM_CARDS</span> <span class='op'>=</span> <span class='int'>52</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_stub_const'>stub_const</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CardDeck</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'>new</span>)
<span class='const'>CardDeck</span><span class='op'>::</span><span class='const'>SUITS</span> <span class='comment'># =&gt; uninitialized constant error
</span><span class='const'>CardDeck</span><span class='op'>::</span><span class='const'>NUM_CARDS</span> <span class='comment'># =&gt; uninitialized constant error
</span>
<span class='id identifier rubyid_stub_const'>stub_const</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CardDeck</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_transfer_nested_constants'>transfer_nested_constants</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>)
<span class='const'>CardDeck</span><span class='op'>::</span><span class='const'>SUITS</span> <span class='comment'># =&gt; our suits array
</span><span class='const'>CardDeck</span><span class='op'>::</span><span class='const'>NUM_CARDS</span> <span class='comment'># =&gt; 52
</span>
<span class='id identifier rubyid_stub_const'>stub_const</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CardDeck</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="../../Class.html" title="Class (class)">Class</a></span>.<span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_transfer_nested_constants'>transfer_nested_constants</span> <span class='op'>=&gt;</span> [<span class='symbeg'>:</span><span class='const'>SUITS</span>])
<span class='const'>CardDeck</span><span class='op'>::</span><span class='const'>SUITS</span> <span class='comment'># =&gt; our suits array
</span><span class='const'>CardDeck</span><span class='op'>::</span><span class='const'>NUM_CARDS</span> <span class='comment'># =&gt; uninitialized constant error</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>constant_name</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The fully qualified name of the constant. The current constant scoping at the point of call is not considered.</p>
</div>
  </li>
  <li>
    <span class='name'>value</span>
    <span class='type'>(<code>Object</code>)</span>
&mdash;    <div class='inline'>
<p>The value to make the constant refer to. When the example completes, the constant will be restored to its prior state.</p>
</div>
  </li>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>Stubbing options.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:transfer_nested_constants</span>
          <span class='type'>(<code>Boolean</code>, <code>Array</code>&lt;<code>Symbol</code>&gt;)</span>
            &mdash; <div class='inline'>
<p>Determines what nested constants, if any, will be transferred from the original value of the constant to the new value of the constant. This only works if both the original and new values are modules (or classes).</p>
</div>        </li>
    </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Object</code>)</span>
&mdash;    <div class='inline'>
<p>the stubbed value of the constant</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L241-L243'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='241' data-end='243'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 241</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stub_const'>stub_const</span>(<span class='id identifier rubyid_constant_name'>constant_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span>{})
  <span class='const'><a href="ConstantMutator.html" title="RSpec::Mocks::ConstantMutator (class)">ConstantMutator</a></span>.<span class='id identifier rubyid_stub'><a href="ConstantMutator.html#stub-class_method" title="RSpec::Mocks::ConstantMutator.stub (method)">stub</a></span>(<span class='id identifier rubyid_constant_name'>constant_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="without_partial_double_verification-instance_method">
  <h3 class='signature '>
    #<strong>without_partial_double_verification</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Turns off the verifying of partial doubles for the duration of the block, this is useful in situations where methods are defined at run time and you wish to define stubs for them but not turn off partial doubles for the entire run suite. (e.g. view specs in rspec-rails).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rspec/rspec-mocks/blob/main/lib/rspec/mocks/example_methods.rb#L289-L295'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='289' data-end='295'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'rspec-mocks/lib/rspec/mocks/example_methods.rb', line 289</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_without_partial_double_verification'>without_partial_double_verification</span>
  <span class='id identifier rubyid_original_state'>original_state</span> <span class='op'>=</span> <span class='const'><a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span>.<span class='id identifier rubyid_configuration'><a href="../Mocks.html#configuration-class_method" title="RSpec::Mocks.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_temporarily_suppress_partial_double_verification'>temporarily_suppress_partial_double_verification</span>
  <span class='const'><a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span>.<span class='id identifier rubyid_configuration'><a href="../Mocks.html#configuration-class_method" title="RSpec::Mocks.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_temporarily_suppress_partial_double_verification'>temporarily_suppress_partial_double_verification</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='const'><a href="../Mocks.html" title="RSpec::Mocks (module)">Mocks</a></span>.<span class='id identifier rubyid_configuration'><a href="../Mocks.html#configuration-class_method" title="RSpec::Mocks.configuration (method)">configuration</a></span>.<span class='id identifier rubyid_temporarily_suppress_partial_double_verification'>temporarily_suppress_partial_double_verification</span> <span class='op'>=</span> <span class='id identifier rubyid_original_state'>original_state</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>