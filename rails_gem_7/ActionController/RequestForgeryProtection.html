<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActionController::RequestForgeryProtection &mdash; Rails 7.2.2.2</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActionController::RequestForgeryProtection",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails 7.2.2.2</a> &raquo; 
      <a href='../_index.html#alpha_R'>Index (R)</a> &raquo; 
        <a href="../ActionController.html" title="ActionController (module)">ActionController</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>RequestForgeryProtection&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActionController::RequestForgeryProtection</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="RequestForgeryProtection/ClassMethods.html" title="ActionController::RequestForgeryProtection::ClassMethods (module)"><code>ClassMethods</code></a>,
        <a href="RequestForgeryProtection/ProtectionMethods.html" title="ActionController::RequestForgeryProtection::ProtectionMethods (module)"><code>ProtectionMethods</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="RequestForgeryProtection/CookieStore.html" title="ActionController::RequestForgeryProtection::CookieStore (class)"><code>CookieStore</code></a>,
        <a href="RequestForgeryProtection/SessionStore.html" title="ActionController::RequestForgeryProtection::SessionStore (class)"><code>SessionStore</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="Base.html" title="ActionController::Base (class)"><code>Base</code></a>,
          <a href="../ActionView/TestCase/TestController.html" title="ActionView::TestCase::TestController (class)"><code>::ActionView::TestCase::TestController</code></a>,
          <span class='nodoc_h'>Rails::ApplicationController</span>,
          <a href="../Rails/HealthController.html" title="Rails::HealthController (class)"><code>::Rails::HealthController</code></a>,
          <span class='nodoc_h'>Rails::InfoController</span>,
          <span class='nodoc_h'>Rails::MailersController</span>,
          <span class='nodoc_h'>Rails::PwaController</span>,
          <span class='nodoc_h'>Rails::WelcomeController</span>
      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="../ActiveSupport/DescendantsTracker.html" title="ActiveSupport::DescendantsTracker (module)"><code>::ActiveSupport::DescendantsTracker</code></a>,
          <a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)"><code>::ActiveSupport::Concern</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="../AbstractController/Callbacks.html" title="AbstractController::Callbacks (module)"><code>::AbstractController::Callbacks</code></a>,
          <a href="../ActiveSupport/Callbacks.html" title="ActiveSupport::Callbacks (module)"><code>::ActiveSupport::Callbacks</code></a>,
          <a href="../AbstractController/Helpers.html" title="AbstractController::Helpers (module)"><code>::AbstractController::Helpers</code></a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L63'>actionpack/lib/action_controller/metal/request_forgery_protection.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Controller actions are protected from Cross-Site Request Forgery (CSRF) attacks by including a token in the rendered HTML for your application. This token is stored as a random string in the session, to which an attacker does not have access. When a request reaches your application, <a href="../Rails.html" title="Rails (module)"><code>::Rails</code></a> verifies the received token with the token in the session. All requests are checked except GET requests as these should be idempotent. Keep in mind that all session-oriented requests are CSRF protected by default, including JavaScript and HTML requests.</p>

<p>Since HTML and JavaScript requests are typically made from the browser, we need to ensure to verify request authenticity for the web browser. We can use session-oriented authentication for these types of requests, by using the <code>protect_from_forgery</code> method in our controllers.</p>

<p>GET requests are not protected since they don’t have side effects like writing to the database and don’t leak sensitive information. JavaScript requests are an exception: a third-party site can use a &lt;script&gt; tag to reference a JavaScript URL on your site. When your JavaScript response loads on their site, it executes. With carefully crafted JavaScript on their end, sensitive data in your JavaScript response may be extracted. To prevent this, only XmlHttpRequest (known as XHR or Ajax) requests are allowed to make requests for JavaScript responses.</p>

<p>Subclasses of <a href="Base.html" title="ActionController::Base (class)"><code>Base</code></a> are protected by default with the <code>:exception</code> strategy, which raises an <a href="InvalidAuthenticityToken.html" title="ActionController::InvalidAuthenticityToken (class)"><code>InvalidAuthenticityToken</code></a> error on unverified requests.</p>

<p>APIs may want to disable this behavior since they are typically designed to be state-less: that is, the request <a href="API.html" title="ActionController::API (class)"><code>API</code></a> client handles the session instead of <a href="../Rails.html" title="Rails (module)"><code>::Rails</code></a>. One way to achieve this is to use the <code>:null_session</code> strategy instead, which allows unverified requests to be handled, but with an empty session:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActionController.html" title="ActionController (module)">ActionController</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActionController::Base (class)">Base</a></span>
  <span class='id identifier rubyid_protect_from_forgery'>protect_from_forgery</span> <span class='label'>with:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_null_session'>null_session</span>
<span class='kw'>end</span></code></pre>

<p>Note that <a href="API.html" title="ActionController::API (class)"><code>API</code></a> only applications don’t include this module or a session middleware by default, and so don’t require CSRF protection to be configured.</p>

<p>The token parameter is named <code>authenticity_token</code> by default. The name and value of this token must be added to every layout that renders forms by including <code>csrf_meta_tags</code> in the HTML <code>head</code>.</p>

<p>Learn more about CSRF attacks and securing your application in the [Ruby on <a href="../Rails.html" title="Rails (module)"><code>::Rails</code></a> Security Guide](<a href="https://guides.rubyonrails.org/security.html">guides.rubyonrails.org/security.html</a>).</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='AUTHENTICITY_TOKEN_LENGTH-constant' class='summary_signature'>AUTHENTICITY_TOKEN_LENGTH =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L452-L452'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 452</a>    <pre class='code ruby'><span class='int'>32</span></pre>
  </li>
  <li>
    <span id='CROSS_ORIGIN_JAVASCRIPT_WARNING-constant' class='summary_signature priv'>CROSS_ORIGIN_JAVASCRIPT_WARNING =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L417-L420'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 417</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Security warning: an embedded </span><span class='tstring_end'>&quot;</span></span> \
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;script&gt; tag on another site requested protected JavaScript. </span><span class='tstring_end'>&quot;</span></span> \
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>If you know what you&#39;re doing, go ahead and disable forgery </span><span class='tstring_end'>&quot;</span></span> \
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>protection on this action to permit cross-origin JavaScript embedding.</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='CSRF_TOKEN-constant' class='summary_signature'>CSRF_TOKEN =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L64-L64'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 64</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>action_controller.csrf_token</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='GLOBAL_CSRF_TOKEN_IDENTIFIER-constant' class='summary_signature priv'>GLOBAL_CSRF_TOKEN_IDENTIFIER =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L578-L578'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 578</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!real_csrf_token</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='NULL_ORIGIN_MESSAGE-constant' class='summary_signature'>NULL_ORIGIN_MESSAGE =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L614-L621'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 614</a>    <pre class='code ruby'><span class='heredoc_beg'>&lt;&lt;~MSG</span>
<span class='ignored_sp'>  </span><span class='tstring_content'>The browser returned a &#39;null&#39; origin for a request with origin-based forgery protection turned on. This usually
</span><span class='ignored_sp'>  </span><span class='tstring_content'>means you have the &#39;no-referrer&#39; Referrer-Policy header enabled, or that the request came from a site that
</span><span class='ignored_sp'>  </span><span class='tstring_content'>refused to give its origin. This makes it impossible for Rails to verify the source of the requests. Likely the
</span><span class='ignored_sp'>  </span><span class='tstring_content'>best solution is to change your referrer policy to something less strict like same-origin or strict-origin.
</span><span class='ignored_sp'>  </span><span class='tstring_content'>If you cannot change the referrer policy, you can disable origin checking with the
</span><span class='ignored_sp'>  </span><span class='tstring_content'>Rails.application.config.action_controller.forgery_protection_origin_check setting.
</span><span class='heredoc_end'>MSG</span></pre>
  </li>
</ul>
  <h3 class='inherited'><a href="../ActiveSupport/Callbacks.html" title="ActiveSupport::Callbacks (module)"><code>::ActiveSupport::Callbacks</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="../ActiveSupport/Callbacks.html#CALLBACK_FILTER_TYPES-constant" title="ActiveSupport::Callbacks::CALLBACK_FILTER_TYPES (constant)">CALLBACK_FILTER_TYPES</a>
  </p>
</div>

<h2 class='h2_sum'><a href="../AbstractController/Callbacks.html" title="AbstractController::Callbacks (module)"><code>::AbstractController::Callbacks</code></a> - Attributes &amp; Methods</h2>
<div>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#raise_on_missing_callback_actions-class_method" title=".raise_on_missing_callback_actions (class method)">.<strong>raise_on_missing_callback_actions</strong>  </a>
      (also: #raise_on_missing_callback_actions)
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#raise_on_missing_callback_actions-instance_method" title="#raise_on_missing_callback_actions (instance method)">#<strong>raise_on_missing_callback_actions</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>

<h2 class='h2_sum'><a href="../AbstractController/Helpers.html" title="AbstractController::Helpers (module)"><code>::AbstractController::Helpers</code></a> - Attributes &amp; Methods</h2>
<div>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#_helper_methods-class_method" title="._helper_methods (class method)">.<strong>_helper_methods</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#_helper_methods-instance_method" title="#_helper_methods (instance method)">#<strong>_helper_methods</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#_helper_methods%3F-class_method" title="._helper_methods? (class method)">.<strong>_helper_methods?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#_helper_methods%3F-instance_method" title="#_helper_methods? (instance method)">#<strong>_helper_methods?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="../ActiveSupport/DescendantsTracker.html" title="ActiveSupport::DescendantsTracker (module)"><code>::ActiveSupport::DescendantsTracker</code></a> - self</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../ActiveSupport/DescendantsTracker.html#descendants-class_method" title="ActiveSupport::DescendantsTracker.descendants (method)">descendants</a>,
        <a class='i_m ' href="../ActiveSupport/DescendantsTracker.html#subclasses-class_method" title="ActiveSupport::DescendantsTracker.subclasses (method)">subclasses</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)"><code>::ActiveSupport::Concern</code></a> - Extended</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Concern.html#class_methods-instance_method" title="ActiveSupport::Concern#class_methods (method)">class_methods</a></td>
      <td><div class='inline'><p>Define class methods from given block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">included</a></td>
      <td><div class='inline'><p>Evaluate given block in context of base class, so that you can write class macros here.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Concern.html#prepended-instance_method" title="ActiveSupport::Concern#prepended (method)">prepended</a></td>
      <td><div class='inline'><p>Evaluate given block in context of base class, so that you can write class macros here.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="../AbstractController/Callbacks.html" title="AbstractController::Callbacks (module)"><code>::AbstractController::Callbacks</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="../AbstractController/Callbacks.html#__callbacks-instance_method" title="AbstractController::Callbacks#__callbacks (method)">#__callbacks</a>,
        <a class='i_m ro' href="../AbstractController/Callbacks.html#__callbacks%3F-instance_method" title="AbstractController::Callbacks#__callbacks? (method)">#__callbacks?</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#commit_csrf_token-instance_method" title="#commit_csrf_token (instance method)">#<strong>commit_csrf_token</strong>(request)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset_csrf_token-instance_method" title="#reset_csrf_token (instance method)">#<strong>reset_csrf_token</strong>(request)  </a>
    </span>
  </li>
</ul>

<h3 class='inherited'><a href="../ActiveSupport/Callbacks.html" title="ActiveSupport::Callbacks (module)"><code>::ActiveSupport::Callbacks</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ActiveSupport/Callbacks.html#run_callbacks-instance_method" title="ActiveSupport::Callbacks#run_callbacks (method)">#run_callbacks</a></td>
      <td><div class='inline'><p>Runs the callbacks for the given event.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../AbstractController/Helpers.html" title="AbstractController::Helpers (module)"><code>::AbstractController::Helpers</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../AbstractController/Helpers.html#_helpers-instance_method" title="AbstractController::Helpers#_helpers (method)">#_helpers</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>DSL Calls</h2>
<section class='method_details first' id="included-dslcall">
<h3 class='signature'><strong>included</strong></h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L71-L104'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 71</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_included'>included</span> <span class='kw'>do</span>
  <span class='comment'># Sets the token parameter name for RequestForgery. Calling
</span>  <span class='comment'># `protect_from_forgery` sets it to `:authenticity_token` by default.
</span>  <span class='id identifier rubyid_config_accessor'>config_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_request_forgery_protection_token'>request_forgery_protection_token</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_request_forgery_protection_token'>request_forgery_protection_token</span> <span class='op'>||=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_authenticity_token'>authenticity_token</span>

  <span class='comment'># Holds the class which implements the request forgery protection.
</span>  <span class='id identifier rubyid_config_accessor'>config_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_forgery_protection_strategy'>forgery_protection_strategy</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_forgery_protection_strategy'>forgery_protection_strategy</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='comment'># Controls whether request forgery protection is turned on or not. Turned off by
</span>  <span class='comment'># default only in test mode.
</span>  <span class='id identifier rubyid_config_accessor'>config_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_allow_forgery_protection'>allow_forgery_protection</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_allow_forgery_protection'>allow_forgery_protection</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_allow_forgery_protection'>allow_forgery_protection</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># Controls whether a CSRF failure logs a warning. On by default.
</span>  <span class='id identifier rubyid_config_accessor'>config_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_log_warning_on_csrf_failure'>log_warning_on_csrf_failure</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_log_warning_on_csrf_failure'>log_warning_on_csrf_failure</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='comment'># Controls whether the Origin header is checked in addition to the CSRF token.
</span>  <span class='id identifier rubyid_config_accessor'>config_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_forgery_protection_origin_check'>forgery_protection_origin_check</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_forgery_protection_origin_check'>forgery_protection_origin_check</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='comment'># Controls whether form-action/method specific CSRF tokens are used.
</span>  <span class='id identifier rubyid_config_accessor'>config_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_per_form_csrf_tokens'>per_form_csrf_tokens</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_per_form_csrf_tokens'>per_form_csrf_tokens</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='comment'># The strategy to use for storing and retrieving CSRF tokens.
</span>  <span class='id identifier rubyid_config_accessor'>config_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_csrf_token_storage_strategy'>csrf_token_storage_strategy</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_csrf_token_storage_strategy'>csrf_token_storage_strategy</span> <span class='op'>=</span> <span class='const'><a href="RequestForgeryProtection/SessionStore.html" title="ActionController::RequestForgeryProtection::SessionStore (class)">SessionStore</a></span>.<span class='id identifier rubyid_new'><a href="#initialize-instance_method" title="ActionController::RequestForgeryProtection#initialize (method)">new</a></span>

  <span class='id identifier rubyid_helper_method'>helper_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_form_authenticity_token'>form_authenticity_token</span>
  <span class='id identifier rubyid_helper_method'>helper_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_protect_against_forgery?'>protect_against_forgery?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="_helper_methods-class_method">
  <h3 class='signature rw first'>
    .<strong>_helper_methods</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/abstract_controller/helpers.rb#L13-L13'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13' data-end='13'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/abstract_controller/helpers.rb', line 13</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid__helper_methods'>_helper_methods</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>.<span class='id identifier rubyid_new'>new</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="_helper_methods?-class_method">
  <h3 class='signature rw'>
    .<strong>_helper_methods?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/abstract_controller/helpers.rb#L13-L13'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13' data-end='13'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/abstract_controller/helpers.rb', line 13</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid__helper_methods'><a href="#_helper_methods-class_method" title="ActionController::RequestForgeryProtection._helper_methods (method)">_helper_methods</a></span><span class='comma'>,</span> <span class='label'>default:</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>.<span class='id identifier rubyid_new'>new</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_on_missing_callback_actions-class_method">
  <h3 class='signature rw'>
    .<strong>raise_on_missing_callback_actions</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#raise_on_missing_callback_actions</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/abstract_controller/callbacks.rb#L36-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='36' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/abstract_controller/callbacks.rb', line 36</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_raise_on_missing_callback_actions'>raise_on_missing_callback_actions</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="_helper_methods-instance_method">
  <h3 class='signature rw first'>
    #<strong>_helper_methods</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/abstract_controller/helpers.rb#L13-L13'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13' data-end='13'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/abstract_controller/helpers.rb', line 13</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid__helper_methods'>_helper_methods</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>.<span class='id identifier rubyid_new'>new</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="_helper_methods?-instance_method">
  <h3 class='signature rw'>
    #<strong>_helper_methods?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/abstract_controller/helpers.rb#L13-L13'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13' data-end='13'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/abstract_controller/helpers.rb', line 13</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid__helper_methods'><a href="#_helper_methods-class_method" title="ActionController::RequestForgeryProtection._helper_methods (method)">_helper_methods</a></span><span class='comma'>,</span> <span class='label'>default:</span> <span class='const'><a href="../Array.html" title="Array (class)">Array</a></span>.<span class='id identifier rubyid_new'>new</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raise_on_missing_callback_actions-instance_method">
  <h3 class='signature rw'>
    #<strong>raise_on_missing_callback_actions</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/abstract_controller/callbacks.rb#L36-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='36' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/abstract_controller/callbacks.rb', line 36</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_mattr_accessor'>mattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_raise_on_missing_callback_actions'>raise_on_missing_callback_actions</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='kw'>false</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="commit_csrf_token-instance_method">
  <h3 class='signature  first'>
    #<strong>commit_csrf_token</strong>(request)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L374-L377'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='374' data-end='377'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 374</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_commit_csrf_token'>commit_csrf_token</span>(<span class='id identifier rubyid_request'>request</span>) <span class='comment'># :doc:
</span>  <span class='id identifier rubyid_csrf_token'>csrf_token</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_env'>env</span>[<span class='const'><a href="#CSRF_TOKEN-constant" title="ActionController::RequestForgeryProtection::CSRF_TOKEN (constant)">CSRF_TOKEN</a></span>]
  <span class='id identifier rubyid_csrf_token_storage_strategy'>csrf_token_storage_strategy</span>.<span class='id identifier rubyid_store'>store</span>(<span class='id identifier rubyid_request'>request</span><span class='comma'>,</span> <span class='id identifier rubyid_csrf_token'>csrf_token</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_csrf_token'>csrf_token</span>.<span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize-instance_method">
  <h3 class='signature '>
    #<strong>initialize</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L364-L367'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='364' data-end='367'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 364</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='op'>...</span>)
  <span class='kw'>super</span>
  <span class='ivar'>@_marked_for_same_origin_verification</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset_csrf_token-instance_method">
  <h3 class='signature '>
    #<strong>reset_csrf_token</strong>(request)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L369-L372'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='369' data-end='372'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_controller/metal/request_forgery_protection.rb', line 369</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_csrf_token'>reset_csrf_token</span>(<span class='id identifier rubyid_request'>request</span>) <span class='comment'># :doc:
</span>  <span class='id identifier rubyid_request'>request</span>.<span class='id identifier rubyid_env'>env</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='const'><a href="#CSRF_TOKEN-constant" title="ActionController::RequestForgeryProtection::CSRF_TOKEN (constant)">CSRF_TOKEN</a></span>)
  <span class='id identifier rubyid_csrf_token_storage_strategy'>csrf_token_storage_strategy</span>.<span class='id identifier rubyid_reset'>reset</span>(<span class='id identifier rubyid_request'>request</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>