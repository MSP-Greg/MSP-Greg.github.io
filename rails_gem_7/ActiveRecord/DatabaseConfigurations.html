<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveRecord::DatabaseConfigurations &mdash; Rails 7.2.2.2</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::DatabaseConfigurations",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Rails 7.2.2.2</a> &raquo; 
      <a href='../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>DatabaseConfigurations&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActiveRecord::DatabaseConfigurations</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="DatabaseConfigurations/HashConfig.html" title="ActiveRecord::DatabaseConfigurations::HashConfig (class)"><code>HashConfig</code></a>,
        <a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)"><code>UrlConfig</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="DatabaseConfigurations/InvalidConfigurationError.html" title="ActiveRecord::DatabaseConfigurations::InvalidConfigurationError (class)"><code>InvalidConfigurationError</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L23'>activerecord/lib/active_record/database_configurations.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations/connection_url_resolver.rb#L8'>activerecord/lib/active_record/database_configurations/connection_url_resolver.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations/database_config.rb#L4'>activerecord/lib/active_record/database_configurations/database_config.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations/hash_config.rb#L6'>activerecord/lib/active_record/database_configurations/hash_config.rb</a>,<br/> <a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations/url_config.rb#L4'>activerecord/lib/active_record/database_configurations/url_config.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>DatabaseConfigurations</code> returns an array of <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfig</code></a> objects that are constructed from the application’s database configuration hash or URL string.</p>

<p>The array of <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfig</code></a> objects in an application default to either a <a href="DatabaseConfigurations/HashConfig.html" title="ActiveRecord::DatabaseConfigurations::HashConfig (class)"><code>HashConfig</code></a> or <a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)"><code>UrlConfig</code></a>. You can retrieve your application’s config by using <a href="Base.html#configurations-class_method" title="ActiveRecord::Base.configurations (method)">Base.configurations</a>.</p>

<p>If you register a custom handler, objects will be created according to the conditions of the handler. See <a href="#register_db_config_handler-class_method" title="ActiveRecord::DatabaseConfigurations.register_db_config_handler (method)">.register_db_config_handler</a> for more on registering custom handlers.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(configurations = {})  &#x21d2; DatabaseConfigurations </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#register_db_config_handler-class_method" title=".register_db_config_handler (class method)">.<strong>register_db_config_handler</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Allows an application to register a custom handler for database configuration objects.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#blank%3F-instance_method" title="#blank? (instance method)">#<strong>blank?</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#empty%3F-instance_method" title="ActiveRecord::DatabaseConfigurations#empty? (method)">#empty?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#configurations-instance_method" title="#configurations (instance method)">#<strong>configurations</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
      (also: #blank?)
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks if the application’s configurations are empty.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#any%3F-instance_method" title="#any? (instance method)">#<strong>any?</strong>  &#x21d2; Boolean </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#configs_for-instance_method" title="#configs_for (instance method)">#<strong>configs_for</strong>(env_name: nil, name: nil, config_key: nil, include_hidden: false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Collects the configs for the environment and optionally the specification name passed in.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#find_db_config-instance_method" title="#find_db_config (instance method)">#<strong>find_db_config</strong>(env)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a single <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfig</code></a> object based on the requested environment.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(configurations = {})  &#x21d2; <code>DatabaseConfigurations</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L73-L75'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='73' data-end='75'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 73</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span> <span class='op'>=</span> {})
  <span class='ivar'>@configurations</span> <span class='op'>=</span> <span class='id identifier rubyid_build_configs'>build_configs</span>(<span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="register_db_config_handler-class_method">
  <h3 class='signature  first'>
    .<strong>register_db_config_handler</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Allows an application to register a custom handler for database configuration objects. This is useful for creating a custom handler that responds to methods your application needs but Active Record doesn’t implement. For example if you are using Vitess, you may want your Vitess configurations to respond to <code>sharded?</code>. To implement this define the following in an initializer:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>DatabaseConfigurations</span>.<span class='id identifier rubyid_register_db_config_handler'>register_db_config_handler</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='op'>|</span>
  <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_vitess'>vitess</span>)
  <span class='const'>VitessConfig</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="ActiveRecord::DatabaseConfigurations.new (method)">new</a></span>(<span class='id identifier rubyid_env_name'>env_name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span>)
<span class='kw'>end</span></code></pre>

<p>Note: applications must handle the condition in which custom config should be created in your handler registration otherwise all objects will use the custom handler.</p>

<p>Then define your <code>VitessConfig</code> to respond to the methods your application needs. It is recommended that you inherit from one of the existing database config classes to avoid having to reimplement all methods. Custom config handlers should only implement methods Active Record does not.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>VitessConfig</span> <span class='op'>&lt;</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'>DatabaseConfigurations</span><span class='op'>::</span><span class='const'><a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)">UrlConfig</a></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_sharded?'>sharded?</span>
    <span class='id identifier rubyid_configuration_hash'>configuration_hash</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sharded</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>For configs that have a <code>:vitess</code> key, a <code>VitessConfig</code> object will be created instead of a <a href="DatabaseConfigurations/UrlConfig.html" title="ActiveRecord::DatabaseConfigurations::UrlConfig (class)"><code>DatabaseConfigurations::UrlConfig</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L61-L63'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='61' data-end='63'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 61</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_register_db_config_handler'>register_db_config_handler</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_db_config_handlers'><a href="#db_config_handlers-instance_method" title="ActiveRecord::DatabaseConfigurations#db_config_handlers (method)">db_config_handlers</a></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="blank?-instance_method">
  <h3 class='signature ro first'>
    #<strong>blank?</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#empty%3F-instance_method" title="ActiveRecord::DatabaseConfigurations#empty? (method)">#empty?</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L153-L153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='153' data-end='153'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 153</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_empty?'><a href="#empty%3F-instance_method" title="ActiveRecord::DatabaseConfigurations#empty? (method)">empty?</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="configurations-instance_method">
  <h3 class='signature ro'>
    #<strong>configurations</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L26-L26'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='26' data-end='26'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 26</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_configurations'>configurations</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="empty?-instance_method">
  <h3 class='signature ro'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#blank?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Checks if the application’s configurations are empty.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L150-L152'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='150' data-end='152'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 150</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>.<span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="any?-instance_method">
  <h3 class='signature  first'>
    #<strong>any?</strong>  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L27-L27'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='27' data-end='27'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 27</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_any?'>any?</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="configs_for-instance_method">
  <h3 class='signature '>
    #<strong>configs_for</strong>(env_name: nil, name: nil, config_key: nil, include_hidden: false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Collects the configs for the environment and optionally the specification name passed in. To include replica configurations pass <code>include_hidden: true</code>.</p>

<p>If a name is provided a single <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> object will be returned, otherwise an array of <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> objects will be returned that corresponds with the environment and type requested.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p><code>env_name:</code> The environment name. Defaults to <code>nil</code> which will collect configs for all environments.</p>
</li><li>
<p><code>name:</code> The db config name (i.e. primary, animals, etc.). Defaults to <code>nil</code>. If no <code>env_name</code> is specified the config for the default env and the passed <code>name</code> will be returned.</p>
</li><li>
<p><code>config_key:</code> Selects configs that contain a particular key in the configuration hash. Useful for selecting configs that use a custom db config handler or finding configs with hashes that contain a particular key.</p>
</li><li>
<p><code>include_hidden:</code> Determines whether to include replicas and configurations hidden by <code>database_tasks: false</code> in the returned list. Most of the time we’re only iterating over the primary connections (i.e. migrations don’t need to run for the write and read connection). Defaults to <code>false</code>.</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L98-L121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='98' data-end='121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 98</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_configs_for'>configs_for</span>(<span class='label'>env_name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>config_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>include_hidden:</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>||=</span> <span class='id identifier rubyid_default_env'>default_env</span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='id identifier rubyid_env_with_configs'>env_with_configs</span>(<span class='id identifier rubyid_env_name'>env_name</span>)

  <span class='kw'>unless</span> <span class='id identifier rubyid_include_hidden'>include_hidden</span>
    <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_database_tasks?'>database_tasks?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_config_key'>config_key</span>
    <span class='id identifier rubyid_configs'>configs</span> <span class='op'>=</span> <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_configuration_hash'>configuration_hash</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_config_key'>config_key</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_configs'>configs</span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
      <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_configs'>configs</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="find_db_config-instance_method">
  <h3 class='signature '>
    #<strong>find_db_config</strong>(env)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a single <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> object based on the requested environment.</p>

<p>If the application has multiple databases <code>find_db_config</code> will return the first <a href="DatabaseConfigurations/DatabaseConfig.html" title="ActiveRecord::DatabaseConfigurations::DatabaseConfig (class)"><code>DatabaseConfigurations::DatabaseConfig</code></a> for the environment.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v7.2.2.2/activerecord/lib/active_record/database_configurations.rb#L127-L134'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='127' data-end='134'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/database_configurations.rb', line 127</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_find_db_config'>find_db_config</span>(<span class='id identifier rubyid_env'>env</span>)
  <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_for_current_env?'>for_current_env?</span> <span class='op'>&amp;&amp;</span> (<span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>==</span> <span class='id identifier rubyid_env'>env</span> <span class='op'>||</span> <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_env'>env</span>)
  <span class='kw'>end</span> <span class='op'>||</span> <span class='id identifier rubyid_configurations'><a href="#configurations-instance_method" title="ActiveRecord::DatabaseConfigurations#configurations (method)">configurations</a></span>.<span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db_config'>db_config</span><span class='op'>|</span>
    <span class='id identifier rubyid_db_config'>db_config</span>.<span class='id identifier rubyid_env_name'>env_name</span> <span class='op'>==</span> <span class='id identifier rubyid_env'>env</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>