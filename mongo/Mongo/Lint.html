<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Mongo::Lint &mdash; Mongo master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongo::Lint",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Mongo master</a> &raquo; 
      <a href='../_index.html#alpha_L'>Index (L)</a> &raquo; 
        <a href="../Mongo.html" title="Mongo (module)">Mongo</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>Lint&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Mongo::Lint  <span class='private note title'>Private</span>
</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This module is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L7'>lib/mongo/lint.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#assert_type-class_method" title=".assert_type (class method)">.<strong>assert_type</strong>(obj, cls)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Raises LintError if <code>obj</code> is not of type <code>cls</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#enabled%3F-class_method" title=".enabled? (class method)">.<strong>enabled?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#validate_camel_case_read_preference-class_method" title=".validate_camel_case_read_preference (class method)">.<strong>validate_camel_case_read_preference</strong>(read_pref)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#validate_camel_case_read_preference_mode-class_method" title=".validate_camel_case_read_preference_mode (class method)">.<strong>validate_camel_case_read_preference_mode</strong>(mode)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#validate_read_concern_option-class_method" title=".validate_read_concern_option (class method)">.<strong>validate_read_concern_option</strong>(read_concern)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Validates the provided hash as a read concern object, per the read/write concern specification (<a href="https://github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#read-concern">github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#read-concern</a>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#validate_underscore_read_preference-class_method" title=".validate_underscore_read_preference (class method)">.<strong>validate_underscore_read_preference</strong>(read_pref)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='mod_func note title'>mod_func</span>
  </li>
  <li>
    <span class='summary_signature mf nodoc'>
      <a href="#validate_underscore_read_preference_mode-class_method" title=".validate_underscore_read_preference_mode (class method)">.<strong>validate_underscore_read_preference_mode</strong>(mode)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='mod_func note title'>mod_func</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="assert_type-class_method">
  <h3 class='signature private nodoc first'>
    .<strong>assert_type</strong>(obj, cls)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Raises LintError if <code>obj</code> is not of type <code>cls</code>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L10-L15'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10' data-end='15'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/lint.rb', line 10</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_type'>assert_type</span>(<span class='id identifier rubyid_obj'>obj</span><span class='comma'>,</span> <span class='id identifier rubyid_cls'>cls</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'><a href="#enabled%3F-class_method" title="Mongo::Lint.enabled? (method)">enabled?</a></span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='id identifier rubyid_cls'>cls</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_obj'>obj</span><span class='embexpr_end'>}</span><span class='tstring_content'> to be a </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cls'>cls</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enabled?-class_method">
  <h3 class='signature private nodoc'>
    .<strong>enabled?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L100-L102'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='100' data-end='102'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/lint.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_enabled?'>enabled?</span>
  <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MONGO_RUBY_DRIVER_LINT</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>&amp;&amp;</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>1</span><span class='words_sep'> </span><span class='tstring_content'>yes</span><span class='words_sep'> </span><span class='tstring_content'>true</span><span class='words_sep'> </span><span class='tstring_content'>on</span><span class='tstring_end'>)</span></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MONGO_RUBY_DRIVER_LINT</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_downcase'>downcase</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_camel_case_read_preference-class_method">
  <h3 class='signature private nodoc'>
    .<strong>validate_camel_case_read_preference</strong>(read_pref)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L38-L45'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='38' data-end='45'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/lint.rb', line 38</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_camel_case_read_preference'>validate_camel_case_read_preference</span>(<span class='id identifier rubyid_read_pref'>read_pref</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'><a href="#enabled%3F-class_method" title="Mongo::Lint.enabled? (method)">enabled?</a></span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_read_pref'>read_pref</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_read_pref'>read_pref</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Hash</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read preference is not a hash: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_read_pref'>read_pref</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_validate_camel_case_read_preference_mode'><a href="#validate_camel_case_read_preference_mode-class_method" title="Mongo::Lint.validate_camel_case_read_preference_mode (method)">validate_camel_case_read_preference_mode</a></span>(<span class='id identifier rubyid_read_pref'>read_pref</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_mode'>mode</span>] <span class='op'>||</span> <span class='id identifier rubyid_read_pref'>read_pref</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mode</span><span class='tstring_end'>&#39;</span></span>])
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_camel_case_read_preference_mode-class_method">
  <h3 class='signature private nodoc'>
    .<strong>validate_camel_case_read_preference_mode</strong>(mode)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L48-L55'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='48' data-end='55'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/lint.rb', line 48</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_camel_case_read_preference_mode'>validate_camel_case_read_preference_mode</span>(<span class='id identifier rubyid_mode'>mode</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'><a href="#enabled%3F-class_method" title="Mongo::Lint.enabled? (method)">enabled?</a></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span>
    <span class='kw'>unless</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>primary</span><span class='words_sep'> </span><span class='tstring_content'>primaryPreferred</span><span class='words_sep'> </span><span class='tstring_content'>secondary</span><span class='words_sep'> </span><span class='tstring_content'>secondaryPreferred</span><span class='words_sep'> </span><span class='tstring_content'>nearest</span><span class='tstring_end'>)</span></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_mode'>mode</span>.<span class='id identifier rubyid_to_s'>to_s</span>)
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid read preference mode: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_read_concern_option-class_method">
  <h3 class='signature private nodoc'>
    .<strong>validate_read_concern_option</strong>(read_concern)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Validates the provided hash as a read concern object, per the read/write concern specification (<a href="https://github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#read-concern">github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#read-concern</a>).</p>

<p>This method also accepts nil as input for convenience.</p>

<p>The read concern document as sent to the server may include additional fields, for example afterClusterTime. These fields are generated internally by the driver and cannot be specified by the user (and would potentially lead to incorrect behavior if they were specified by the user), hence this method prohibits them.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>read_concern</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>The read concern options hash, with the following optional keys:</p>
<ul><li>
<p><strong>:level</strong> – the read preference level as a symbol; valid values</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_are'>are</span> <span class='op'>*</span><span class='symbeg'>:</span><span class='id identifier rubyid_local'>local</span><span class='op'>*</span><span class='comma'>,</span> <span class='op'>*</span><span class='symbeg'>:</span><span class='id identifier rubyid_majority'>majority</span><span class='op'>*</span><span class='comma'>,</span> <span class='kw'>and</span> <span class='op'>*</span><span class='symbeg'>:</span><span class='id identifier rubyid_snapshot'>snapshot</span><span class='op'>*</span></code></pre>
</li></ul>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="Error/LintError.html" title="Mongo::Error::LintError (class)">Error::LintError</a>)</span>
&mdash;    <div class='inline'>
<p>If the validation failed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L76-L97'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='76' data-end='97'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/lint.rb', line 76</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_read_concern_option'>validate_read_concern_option</span>(<span class='id identifier rubyid_read_concern'>read_concern</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'><a href="#enabled%3F-class_method" title="Mongo::Lint.enabled? (method)">enabled?</a></span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_read_concern'>read_concern</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_read_concern'>read_concern</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Hash</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read concern is not a hash: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_read_concern'>read_concern</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_read_concern'>read_concern</span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_keys'>keys</span> <span class='op'>=</span> <span class='id identifier rubyid_read_concern'>read_concern</span>.<span class='id identifier rubyid_keys'>keys</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_read_concern'>read_concern</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>BSON</span><span class='op'>::</span><span class='const'>Document</span>)
    <span class='comment'># Permits indifferent access
</span>    <span class='id identifier rubyid_allowed_keys'>allowed_keys</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>level</span><span class='tstring_end'>&#39;</span></span>]
  <span class='kw'>else</span>
    <span class='comment'># Does not permit indifferent access
</span>    <span class='id identifier rubyid_allowed_keys'>allowed_keys</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_level'>level</span>]
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_keys'>keys</span> <span class='op'>!=</span> <span class='id identifier rubyid_allowed_keys'>allowed_keys</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read concern has invalid keys: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_keys'>keys</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='id identifier rubyid_read_concern'>read_concern</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_level'>level</span>]
  <span class='kw'>return</span> <span class='kw'>if</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_local'>local</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_available'>available</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_majority'>majority</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_linearizable'>linearizable</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_snapshot'>snapshot</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_level'>level</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read concern level is invalid: value must be a symbol: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_level'>level</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_underscore_read_preference-class_method">
  <h3 class='signature private nodoc'>
    .<strong>validate_underscore_read_preference</strong>(read_pref)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L18-L25'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='18' data-end='25'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/lint.rb', line 18</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_underscore_read_preference'>validate_underscore_read_preference</span>(<span class='id identifier rubyid_read_pref'>read_pref</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'><a href="#enabled%3F-class_method" title="Mongo::Lint.enabled? (method)">enabled?</a></span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_read_pref'>read_pref</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_read_pref'>read_pref</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Hash</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read preference is not a hash: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_read_pref'>read_pref</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_validate_underscore_read_preference_mode'><a href="#validate_underscore_read_preference_mode-class_method" title="Mongo::Lint.validate_underscore_read_preference_mode (method)">validate_underscore_read_preference_mode</a></span>(<span class='id identifier rubyid_read_pref'>read_pref</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_mode'>mode</span>] <span class='op'>||</span> <span class='id identifier rubyid_read_pref'>read_pref</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mode</span><span class='tstring_end'>&#39;</span></span>])
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_underscore_read_preference_mode-class_method">
  <h3 class='signature private nodoc'>
    .<strong>validate_underscore_read_preference_mode</strong>(mode)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/lint.rb#L28-L35'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='28' data-end='35'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/lint.rb', line 28</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_underscore_read_preference_mode'>validate_underscore_read_preference_mode</span>(<span class='id identifier rubyid_mode'>mode</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'><a href="#enabled%3F-class_method" title="Mongo::Lint.enabled? (method)">enabled?</a></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span>
    <span class='kw'>unless</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>primary</span><span class='words_sep'> </span><span class='tstring_content'>primary_preferred</span><span class='words_sep'> </span><span class='tstring_content'>secondary</span><span class='words_sep'> </span><span class='tstring_content'>secondary_preferred</span><span class='words_sep'> </span><span class='tstring_content'>nearest</span><span class='tstring_end'>)</span></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_mode'>mode</span>.<span class='id identifier rubyid_to_s'>to_s</span>)
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="Error/LintError.html" title="Mongo::Error::LintError (class)">LintError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid read preference mode: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>