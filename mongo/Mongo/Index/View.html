<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Mongo::Index::View &mdash; Mongo master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongo::Index::View",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Mongo master</a> &raquo; 
      <a href='../../_index.html#alpha_V'>Index (V)</a> &raquo; 
        <a href="../../Mongo.html" title="Mongo (module)">Mongo</a> &raquo; 
        <a href="../Index.html" title="Mongo::Index (module)">Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>View&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Mongo::Index::View</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Forwardable
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="../Cursor/NonTailable.html" title="Mongo::Cursor::NonTailable (module)"><code>::Mongo::Cursor::NonTailable</code></a>,
          <a href="../CursorHost.html" title="Mongo::CursorHost (module)"><code>::Mongo::CursorHost</code></a>,
          <a href="../Retryable.html" title="Mongo::Retryable (module)"><code>::Mongo::Retryable</code></a>,
          Enumerable
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L26'>lib/mongo/index/view.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>A class representing a view of indexes.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='KEY-constant' class='summary_signature'>KEY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The index key field.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
    <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L52-L52'># File 'lib/mongo/index/view.rb', line 52</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>key</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='NAME-constant' class='summary_signature'>NAME =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The index name field.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
    <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L57-L57'># File 'lib/mongo/index/view.rb', line 57</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='OPTIONS-constant' class='summary_signature'>OPTIONS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The mappings of Ruby index options to server options.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
    <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L62-L85'># File 'lib/mongo/index/view.rb', line 62</a>    <pre class='code ruby'>{
  <span class='symbeg'>:</span><span class='id identifier rubyid_background'>background</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_background'>background</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bits'>bits</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bits'>bits</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bucket_size'>bucket_size</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bucketSize'>bucketSize</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_default_language'>default_language</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_default_language'>default_language</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_expire_after'>expire_after</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expireAfterSeconds'>expireAfterSeconds</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_expire_after_seconds'>expire_after_seconds</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_expireAfterSeconds'>expireAfterSeconds</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_language_override'>language_override</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_language_override'>language_override</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_max'>max</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_max'>max</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_min'>min</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_min'>min</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_partial_filter_expression'>partial_filter_expression</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_partialFilterExpression'>partialFilterExpression</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_sparse'>sparse</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sparse'>sparse</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_sphere_version'>sphere_version</span> <span class='op'>=&gt;</span> <span class='symbeg'>:&#39;</span><span class='tstring_content'>2dsphereIndexVersion</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_storage_engine'>storage_engine</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_storageEngine'>storageEngine</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_text_version'>text_version</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_textIndexVersion'>textIndexVersion</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_unique'>unique</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unique'>unique</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_version'>version</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_v'>v</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_weights'>weights</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_weights'>weights</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_collation'>collation</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_collation'>collation</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_comment'>comment</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_comment'>comment</span><span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_wildcard_projection'>wildcard_projection</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_wildcardProjection'>wildcardProjection</span><span class='comma'>,</span>
}.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(collection, options = {})  &#x21d2; View </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create the new index view.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#batch_size-instance_method" title="#batch_size (instance method)">#<strong>batch_size</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#collection-instance_method" title="#collection (instance method)">#<strong>collection</strong>  &#x21d2; Collection </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#operation_timeout_ms-instance_method" title="#operation_timeout_ms (instance method)">#<strong>operation_timeout_ms</strong>  &#x21d2; Integer | nil | The timeout_ms value that was passed as an option to the view. </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="../CursorHost.html" title="Mongo::CursorHost (module)"><code>::Mongo::CursorHost</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro nodoc' href="../CursorHost.html#cursor-instance_method" title="Mongo::CursorHost#cursor (method)">#cursor</a></td>
      <td><div class='inline'><p>Returns the cursor associated with this view, if any.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="../CursorHost.html#timeout_mode-instance_method" title="Mongo::CursorHost#timeout_mode (method)">#timeout_mode</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#create_many-instance_method" title="#create_many (instance method)">#<strong>create_many</strong>(*models)  &#x21d2; Result </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates multiple indexes on the collection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create_one-instance_method" title="#create_one (instance method)">#<strong>create_one</strong>(keys, options = {})  &#x21d2; Result </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates an index on the collection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#drop_all-instance_method" title="#drop_all (instance method)">#<strong>drop_all</strong>(options = {})  &#x21d2; Result </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Drop all indexes on the collection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#drop_one-instance_method" title="#drop_one (instance method)">#<strong>drop_one</strong>(name, options = {})  &#x21d2; Result </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Drop an index by its name.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>(&amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Iterate over all indexes for the collection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get-instance_method" title="#get (instance method)">#<strong>get</strong>(keys_or_name)  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Convenience method for getting index information by a specific name or spec.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#operation_timeouts-instance_method" title="#operation_timeouts (instance method)">#<strong>operation_timeouts</strong>(opts = {})  &#x21d2; Hash </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#timeout_ms-instance_method" title="#timeout_ms (instance method)">#<strong>timeout_ms</strong>  &#x21d2; Integer | nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The timeout_ms value to use for this operation; either specified as an option to the view, or inherited from the collection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#drop_by_name-instance_method" title="#drop_by_name (instance method)">#<strong>drop_by_name</strong>(name, opts = {})  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#index_name-instance_method" title="#index_name (instance method)">#<strong>index_name</strong>(spec)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#indexes_spec-instance_method" title="#indexes_spec (instance method)">#<strong>indexes_spec</strong>(session)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#initial_query_op-instance_method" title="#initial_query_op (instance method)">#<strong>initial_query_op</strong>(session)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#limit-instance_method" title="#limit (instance method)">#<strong>limit</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_keys-instance_method" title="#normalize_keys (instance method)">#<strong>normalize_keys</strong>(spec)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_models-instance_method" title="#normalize_models (instance method)">#<strong>normalize_models</strong>(models, server)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_initial_query-instance_method" title="#send_initial_query (instance method)">#<strong>send_initial_query</strong>(server, session, context)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited nodoc'><a href="../Cursor/NonTailable.html" title="Mongo::Cursor::NonTailable (module)"><code>::Mongo::Cursor::NonTailable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="../Cursor/NonTailable.html#cursor_type-instance_method" title="Mongo::Cursor::NonTailable#cursor_type (method)">#cursor_type</a></td>
      <td><div class='inline'><p>These views are always non-tailable.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="../Cursor/NonTailable.html#timeout_mode-instance_method" title="Mongo::Cursor::NonTailable#timeout_mode (method)">#timeout_mode</a></td>
      <td><div class='inline'><p>These views apply timeouts to each iteration of a cursor, as opposed to the entire lifetime of the cursor.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../CursorHost.html" title="Mongo::CursorHost (module)"><code>::Mongo::CursorHost</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="../CursorHost.html#validate_timeout_mode!-instance_method" title="Mongo::CursorHost#validate_timeout_mode! (method)">#validate_timeout_mode!</a></td>
      <td><div class='inline'><p>Ensure the timeout mode is appropriate for other options that have been given.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../Retryable.html" title="Mongo::Retryable (module)"><code>::Mongo::Retryable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="../Retryable.html#read_worker-instance_method" title="Mongo::Retryable#read_worker (method)">#read_worker</a></td>
      <td><div class='inline'><p>Returns the read worker for handling retryable reads.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="../Retryable.html#select_server-instance_method" title="Mongo::Retryable#select_server (method)">#select_server</a></td>
      <td><div class='inline'><p>This is a separate method to make it possible for the test suite to assert that server selection is performed during retry attempts.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="../Retryable.html#write_worker-instance_method" title="Mongo::Retryable#write_worker (method)">#write_worker</a></td>
      <td><div class='inline'><p>Returns the write worker for handling retryable writes.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(collection, options = {})  &#x21d2; <code>View</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create the new index view.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Create the new index view.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>View</span><span class='op'>::</span><span class='const'><a href="../Index.html" title="Mongo::Index (module)">Index</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>collection</span>
    <span class='type'>(<a href="../Collection.html" title="Mongo::Collection (class)">Collection</a>)</span>
&mdash;    <div class='inline'>
<p>The collection.</p>
</div>
  </li>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p><a href="../Options.html" title="Mongo::Options (module)"><code>::Mongo::Options</code></a> for getting a list of indexes.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:batch_size</span>
          <span class='type'>(<code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>The batch size for results returned from the listIndexes command.</p>
</div>        </li>
        <li>
          <span class='name'>:timeout_mode</span>
          <span class='type'>(<code>:cursor_lifetime</code> | <code>:iteration</code>)</span>
            &mdash; <div class='inline'>
<p>How to interpret <code>:timeout_ms</code> (whether it applies to the lifetime of the cursor, or per iteration).</p>
</div>        </li>
        <li>
          <span class='name'>:timeout_ms</span>
          <span class='type'>(<code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>The operation timeout in milliseconds. Must be a non-negative integer. An explicit value of 0 means infinite. The default value is unset which means the value is inherited from the collection or the database or the client.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L318-L326'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='318' data-end='326'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 318</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {})
  <span class='ivar'>@collection</span> <span class='op'>=</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>
  <span class='ivar'>@operation_timeout_ms</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Index::View#timeout_ms (method)">timeout_ms</a></span>)

  <span class='id identifier rubyid_validate_timeout_mode!'>validate_timeout_mode!</span>(<span class='id identifier rubyid_options'>options</span>)

  <span class='ivar'>@batch_size</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_batch_size'><a href="#batch_size-instance_method" title="Mongo::Index::View#batch_size (method)">batch_size</a></span>]
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="batch_size-instance_method">
  <h3 class='signature ro first'>
    #<strong>batch_size</strong>  &#x21d2; <code>Integer</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>batch_size The size of the batch of results when sending the listIndexes command.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L38-L38'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='38' data-end='38'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 38</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_batch_size'>batch_size</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="collection-instance_method">
  <h3 class='signature ro'>
    #<strong>collection</strong>  &#x21d2; <a href="../Collection.html" title="Mongo::Collection (class)">Collection</a>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Collection.html" title="Mongo::Collection (class)">Collection</a>)</span>
&mdash;    <div class='inline'>
<p>collection The indexes collection.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L34-L34'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='34' data-end='34'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 34</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_collection'>collection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="operation_timeout_ms-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>operation_timeout_ms</strong>  &#x21d2; <code>Integer</code> | <code>nil</code> | <code>The</code> <a href="#timeout_ms-instance_method" title="Mongo::Index::View#timeout_ms (method)">timeout_ms</a> <code>value</code> <code>that</code> <code>was</code> <code>passed</code> <code>as</code> <code>an</code>
<code>option</code> <code>to</code> <code>the</code> <code>view</code>.  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code> | <code>nil</code> | <code>The</code> <a href="#timeout_ms-instance_method" title="Mongo::Index::View#timeout_ms (method)">timeout_ms</a> <code>value</code> <code>that</code> <code>was</code> <code>passed</code> <code>as</code> <code>an</code>
<code>option</code> <code>to</code> <code>the</code> <code>view</code>.)</span>
&mdash;    <div class='inline'>
<p>Integer | nil | The timeout_ms value that was passed as an option to the view.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L44-L44'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='44' data-end='44'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 44</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_operation_timeout_ms'>operation_timeout_ms</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="create_many-instance_method">
  <h3 class='signature  first'>
    #<strong>create_many</strong>(*models)  &#x21d2; <code>Result</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>On MongoDB 3.0.0 and higher, the indexes will be created in parallel on the server.</p>
</div>
  </div>


<p>Creates multiple indexes on the collection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Create multiple indexes.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_create_many'>create_many</span>([
  { <span class='label'>key:</span> { <span class='label'>name:</span> <span class='int'>1</span> }<span class='comma'>,</span> <span class='label'>unique:</span> <span class='kw'>true</span> }<span class='comma'>,</span>
  { <span class='label'>key:</span> { <span class='label'>age:</span> <span class='op'>-</span><span class='int'>1</span> }<span class='comma'>,</span> <span class='label'>background:</span> <span class='kw'>true</span> }
])</code></pre>
        <p class='example_title'><div class='inline'>
<p>Create multiple indexes with options.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_create_many'>create_many</span>(
  { <span class='label'>key:</span> { <span class='label'>name:</span> <span class='int'>1</span> }<span class='comma'>,</span> <span class='label'>unique:</span> <span class='kw'>true</span> }<span class='comma'>,</span>
  { <span class='label'>key:</span> { <span class='label'>age:</span> <span class='op'>-</span><span class='int'>1</span> }<span class='comma'>,</span> <span class='label'>background:</span> <span class='kw'>true</span> }<span class='comma'>,</span>
  { <span class='label'>commit_quorum:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>majority</span><span class='tstring_end'>&#39;</span></span> }
)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>models</span>
    <span class='type'>(<code>Array</code>&lt;<code>Hash</code>&gt;)</span>
&mdash;    <div class='inline'>
<p>The index specifications. Each model MUST include a <code>:key</code> option, except for the last item in the Array, which may be a Hash specifying options relevant to the createIndexes operation. The following options are accepted:</p>
<ul><li>
<p>commit_quorum: Specify how many data-bearing members of a replica set, including the primary, must complete the index builds successfully before the primary marks the indexes as ready. Potential values are:</p>
<ul><li>
<p>an integer from 0 to the number of members of the replica set</p>
</li><li>
<p>“majority” indicating that a majority of data bearing nodes must vote</p>
</li><li>
<p>“votingMembers” which means that all voting data bearing nodes must vote</p>
</li></ul>
</li><li>
<p>session: The session to use.</p>
</li><li>
<p>comment: A user-provided comment to attach to this command.</p>
</li></ul>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Result</code>)</span>
&mdash;    <div class='inline'>
<p>The result of the command.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L216-L249'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='216' data-end='249'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 216</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_many'>create_many</span>(<span class='op'>*</span><span class='id identifier rubyid_models'>models</span>)
  <span class='id identifier rubyid_models'>models</span> <span class='op'>=</span> <span class='id identifier rubyid_models'>models</span>.<span class='id identifier rubyid_flatten'>flatten</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {}
  <span class='kw'>if</span> <span class='id identifier rubyid_models'>models</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_models'>models</span>.<span class='id identifier rubyid_last'>last</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span>)
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_models'>models</span>.<span class='id identifier rubyid_pop'>pop</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_with_session'>with_session</span>(<span class='ivar'>@options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_options'>options</span>)) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
    <span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='id identifier rubyid_next_primary'>next_primary</span>(<span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span>)

    <span class='id identifier rubyid_indexes'>indexes</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_models'><a href="#normalize_models-instance_method" title="Mongo::Index::View#normalize_models (method)">normalize_models</a></span>(<span class='id identifier rubyid_models'>models</span><span class='comma'>,</span> <span class='id identifier rubyid_server'>server</span>)
    <span class='id identifier rubyid_indexes'>indexes</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="Mongo::Index::View#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_bucketSize'>bucketSize</span>] <span class='op'>||</span> <span class='id identifier rubyid_index'>index</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bucketSize</span><span class='tstring_end'>&#39;</span></span>]
        <span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_log_warn'>log_warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Haystack indexes (bucketSize index option) are deprecated as of MongoDB 4.4</span><span class='tstring_end'>&quot;</span></span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> {
      <span class='label'>indexes:</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='comma'>,</span>
      <span class='label'>db_name:</span> <span class='id identifier rubyid_database'>database</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>coll_name:</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
      <span class='label'>commit_quorum:</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_commit_quorum'>commit_quorum</span>]<span class='comma'>,</span>
      <span class='label'>write_concern:</span> <span class='id identifier rubyid_write_concern'>write_concern</span><span class='comma'>,</span>
      <span class='label'>comment:</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_comment'>comment</span>]<span class='comma'>,</span>
    }
    <span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'><a href="../Operation.html" title="Mongo::Operation (module)">Operation</a></span><span class='op'>::</span><span class='const'><a href="../Operation/Context.html" title="Mongo::Operation::Context (class)">Context</a></span>.<span class='id identifier rubyid_new'><a href="../Operation/Context.html#new-class_method" title="Mongo::Operation::Context.new (method)">new</a></span>(
      <span class='label'>client:</span> <span class='id identifier rubyid_client'>client</span><span class='comma'>,</span>
      <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
      <span class='label'>operation_timeouts:</span> <span class='id identifier rubyid_operation_timeouts'><a href="#operation_timeouts-instance_method" title="Mongo::Index::View#operation_timeouts (method)">operation_timeouts</a></span>(<span class='id identifier rubyid_options'>options</span>)
    )
    <span class='const'><a href="../Operation.html" title="Mongo::Operation (module)">Operation</a></span><span class='op'>::</span><span class='const'><a href="../Operation/CreateIndex.html" title="Mongo::Operation::CreateIndex (class)">CreateIndex</a></span>.<span class='id identifier rubyid_new'><a href="../Operation/Specifiable.html#initialize-instance_method" title="Mongo::Operation::Specifiable#initialize (method)">new</a></span>(<span class='id identifier rubyid_spec'>spec</span>).<span class='id identifier rubyid_execute'>execute</span>(<span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='label'>context:</span> <span class='id identifier rubyid_context'>context</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create_one-instance_method">
  <h3 class='signature '>
    #<strong>create_one</strong>(keys, options = {})  &#x21d2; <code>Result</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Note that the options listed may be subset of those available.</p>
</div>
  </div>


<p>Creates an index on the collection.</p>

<p>See the MongoDB documentation for a full list of supported options by server version.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Create a unique index on the collection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_create_one'>create_one</span>({ <span class='label'>name:</span> <span class='int'>1</span> }<span class='comma'>,</span> { <span class='label'>unique:</span> <span class='kw'>true</span> })</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>keys</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>A hash of field name/direction pairs.</p>
</div>
  </li>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p><a href="../Options.html" title="Mongo::Options (module)"><code>::Mongo::Options</code></a> for this index.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:unique</span>
          <span class='type'>(<code>true</code>, <code>false</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>If true, this index will enforce a uniqueness constraint on that field.</p>
</div>        </li>
        <li>
          <span class='name'>:background</span>
          <span class='type'>(<code>true</code>, <code>false</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>If true, the index will be built in the background (only available for server versions &gt;= 1.3.2 )</p>
</div>        </li>
        <li>
          <span class='name'>:drop_dups</span>
          <span class='type'>(<code>true</code>, <code>false</code>)</span>
          <span class='default'> &mdash; default:
              <tt>false</tt>          </span>
            &mdash; <div class='inline'>
<p>If creating a unique index on this collection, this option will keep the first document the database indexes and drop all subsequent documents with duplicate values on this field.</p>
</div>        </li>
        <li>
          <span class='name'>:bucket_size</span>
          <span class='type'>(<code>Integer</code>)</span>
          <span class='default'> &mdash; default:
              <tt>nil</tt>          </span>
            &mdash; <div class='inline'>
<p>For use with geoHaystack indexes. Number of documents to group together within a certain proximity to a given longitude and latitude.</p>
</div>        </li>
        <li>
          <span class='name'>:max</span>
          <span class='type'>(<code>Integer</code>)</span>
          <span class='default'> &mdash; default:
              <tt>nil</tt>          </span>
            &mdash; <div class='inline'>
<p>Specify the max latitude and longitude for a geo index.</p>
</div>        </li>
        <li>
          <span class='name'>:min</span>
          <span class='type'>(<code>Integer</code>)</span>
          <span class='default'> &mdash; default:
              <tt>nil</tt>          </span>
            &mdash; <div class='inline'>
<p>Specify the min latitude and longitude for a geo index.</p>
</div>        </li>
        <li>
          <span class='name'>:partial_filter_expression</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>Specify a filter for a partial index.</p>
</div>        </li>
        <li>
          <span class='name'>:hidden</span>
          <span class='type'>(<code>Boolean</code>)</span>
            &mdash; <div class='inline'>
<p>When <code>:hidden</code> is true, this index will exist on the collection but not be used by the query planner when executing operations.</p>
</div>        </li>
        <li>
          <span class='name'>:commit_quorum</span>
          <span class='type'>(<code>String</code> | <code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>Specify how many data-bearing members of a replica set, including the primary, must complete the index builds successfully before the primary marks the indexes as ready. Potential values are:</p>
<ul><li>
<p>an integer from 0 to the number of members of the replica set</p>
</li><li>
<p>“majority” indicating that a majority of data bearing nodes must vote</p>
</li><li>
<p>“votingMembers” which means that all voting data bearing nodes must vote</p>
</li></ul>
</div>        </li>
        <li>
          <span class='name'>:session</span>
          <span class='type'>(<a href="../Session.html" title="Mongo::Session (class)">Session</a>)</span>
            &mdash; <div class='inline'>
<p>The session to use for the operation.</p>
</div>        </li>
        <li>
          <span class='name'>:comment</span>
          <span class='type'>(<code>Object</code>)</span>
            &mdash; <div class='inline'>
<p>A user-provided comment to attach to this command.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Result</code>)</span>
&mdash;    <div class='inline'>
<p>The response.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L167-L180'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='167' data-end='180'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 167</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create_one'>create_one</span>(<span class='id identifier rubyid_keys'>keys</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_dup'>dup</span>

  <span class='id identifier rubyid_create_options'>create_options</span> <span class='op'>=</span> {}
  <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span> <span class='op'>=</span> <span class='ivar'>@options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_session'>session</span>]
    <span class='id identifier rubyid_create_options'>create_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_session'>session</span>] <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span>
  <span class='kw'>end</span>
  <span class='qsymbols'><span class='qsymbols_beg'>%i(</span><span class='tstring_content'>commit_quorum</span><span class='words_sep'> </span><span class='tstring_content'>session</span><span class='words_sep'> </span><span class='tstring_content'>comment</span><span class='words_sep'> </span><span class='tstring_content'>timeout_ms</span><span class='words_sep'> </span><span class='tstring_content'>max_time_ms</span><span class='tstring_end'>)</span></span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="Mongo::Index::View#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_key'>key</span>)
      <span class='id identifier rubyid_create_options'>create_options</span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_create_many'><a href="#create_many-instance_method" title="Mongo::Index::View#create_many (method)">create_many</a></span>({ <span class='label'>key:</span> <span class='id identifier rubyid_keys'>keys</span> }.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_options'>options</span>)<span class='comma'>,</span> <span class='id identifier rubyid_create_options'>create_options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drop_all-instance_method">
  <h3 class='signature '>
    #<strong>drop_all</strong>(options = {})  &#x21d2; <code>Result</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Drop all indexes on the collection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Drop all indexes on the collection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_drop_all'>drop_all</span></code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p><a href="../Options.html" title="Mongo::Options (module)"><code>::Mongo::Options</code></a> for this operation.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:comment</span>
          <span class='type'>(<code>Object</code>)</span>
            &mdash; <div class='inline'>
<p>A user-provided comment to attach to this command.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Result</code>)</span>
&mdash;    <div class='inline'>
<p>The response.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L119-L121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='119' data-end='121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 119</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drop_all'>drop_all</span>(<span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_drop_by_name'><a href="#drop_by_name-instance_method" title="Mongo::Index::View#drop_by_name (method)">drop_by_name</a></span>(<span class='const'><a href="../Index.html" title="Mongo::Index (module)">Index</a></span><span class='op'>::</span><span class='const'><a href="../Index.html#ALL-constant" title="Mongo::Index::ALL (constant)">ALL</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drop_by_name-instance_method">
  <h3 class='signature priv'>
    #<strong>drop_by_name</strong>(name, opts = {})   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L352-L370'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='352' data-end='370'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 352</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drop_by_name'>drop_by_name</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_with_session'>with_session</span><span class='comma'>,</span> <span class='ivar'>@options</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
    <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> {
      <span class='label'>db_name:</span> <span class='id identifier rubyid_database'>database</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>coll_name:</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>index_name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
      <span class='label'>write_concern:</span> <span class='id identifier rubyid_write_concern'>write_concern</span><span class='comma'>,</span>
    }
    <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_comment'>comment</span>] <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_comment'>comment</span>] <span class='kw'>unless</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_comment'>comment</span>].<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='id identifier rubyid_next_primary'>next_primary</span>(<span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span>)
    <span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'><a href="../Operation.html" title="Mongo::Operation (module)">Operation</a></span><span class='op'>::</span><span class='const'><a href="../Operation/Context.html" title="Mongo::Operation::Context (class)">Context</a></span>.<span class='id identifier rubyid_new'><a href="../Operation/Context.html#new-class_method" title="Mongo::Operation::Context.new (method)">new</a></span>(
      <span class='label'>client:</span> <span class='id identifier rubyid_client'>client</span><span class='comma'>,</span>
      <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
      <span class='label'>operation_timeouts:</span> <span class='id identifier rubyid_operation_timeouts'><a href="#operation_timeouts-instance_method" title="Mongo::Index::View#operation_timeouts (method)">operation_timeouts</a></span>(<span class='id identifier rubyid_opts'>opts</span>)
    )
    <span class='const'><a href="../Operation.html" title="Mongo::Operation (module)">Operation</a></span><span class='op'>::</span><span class='const'><a href="../Operation/DropIndex.html" title="Mongo::Operation::DropIndex (class)">DropIndex</a></span>.<span class='id identifier rubyid_new'><a href="../Operation/Specifiable.html#initialize-instance_method" title="Mongo::Operation::Specifiable#initialize (method)">new</a></span>(<span class='id identifier rubyid_spec'>spec</span>).<span class='id identifier rubyid_execute'>execute</span>(<span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='label'>context:</span> <span class='id identifier rubyid_context'>context</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="drop_one-instance_method">
  <h3 class='signature '>
    #<strong>drop_one</strong>(name, options = {})  &#x21d2; <code>Result</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Drop an index by its name.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Drop an index by its name.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_drop_one'>drop_one</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name_1</span><span class='tstring_end'>&#39;</span></span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The name of the index.</p>
</div>
  </li>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p><a href="../Options.html" title="Mongo::Options (module)"><code>::Mongo::Options</code></a> for this operation.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:comment</span>
          <span class='type'>(<code>Object</code>)</span>
            &mdash; <div class='inline'>
<p>A user-provided comment to attach to this command.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Result</code>)</span>
&mdash;    <div class='inline'>
<p>The response.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/MultiIndexDrop.html" title="Mongo::Error::MultiIndexDrop (class)">Error::MultiIndexDrop</a>)</span>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L101-L104'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='101' data-end='104'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 101</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_drop_one'>drop_one</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="../Error/MultiIndexDrop.html" title="Mongo::Error::MultiIndexDrop (class)">MultiIndexDrop</a></span>.<span class='id identifier rubyid_new'><a href="../Error/MultiIndexDrop.html#new-class_method" title="Mongo::Error::MultiIndexDrop.new (method)">new</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='const'><a href="../Index.html" title="Mongo::Index (module)">Index</a></span><span class='op'>::</span><span class='const'><a href="../Index.html#ALL-constant" title="Mongo::Index::ALL (constant)">ALL</a></span>
  <span class='id identifier rubyid_drop_by_name'><a href="#drop_by_name-instance_method" title="Mongo::Index::View#drop_by_name (method)">drop_by_name</a></span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each-instance_method">
  <h3 class='signature '>
    #<strong>each</strong>(&amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Iterate over all indexes for the collection.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get all the indexes.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
  <span class='op'>...</span>
<span class='kw'>end</span></code></pre>
  </div>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L279-L297'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='279' data-end='297'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 279</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_session'>session</span> <span class='op'>=</span> <span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_get_session'>get_session</span>(<span class='ivar'>@options</span>)
  <span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'><a href="../Operation.html" title="Mongo::Operation (module)">Operation</a></span><span class='op'>::</span><span class='const'><a href="../Operation/Context.html" title="Mongo::Operation::Context (class)">Context</a></span>.<span class='id identifier rubyid_new'><a href="../Operation/Context.html#new-class_method" title="Mongo::Operation::Context.new (method)">new</a></span>(
    <span class='label'>client:</span> <span class='id identifier rubyid_client'>client</span><span class='comma'>,</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>operation_timeouts:</span> <span class='id identifier rubyid_operation_timeouts'><a href="#operation_timeouts-instance_method" title="Mongo::Index::View#operation_timeouts (method)">operation_timeouts</a></span>(<span class='ivar'>@options</span>)
  )

  <span class='id identifier rubyid_cursor'>cursor</span> <span class='op'>=</span> <span class='id identifier rubyid_read_with_retry_cursor'>read_with_retry_cursor</span>(<span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='const'><a href="../ServerSelector.html" title="Mongo::ServerSelector (module)">ServerSelector</a></span>.<span class='id identifier rubyid_primary'><a href="../ServerSelector.html#primary-instance_method" title="Mongo::ServerSelector#primary (method)">primary</a></span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='label'>context:</span> <span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_server'>server</span><span class='op'>|</span>
    <span class='id identifier rubyid_send_initial_query'><a href="#send_initial_query-instance_method" title="Mongo::Index::View#send_initial_query (method)">send_initial_query</a></span>(<span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span>)
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_cursor'>cursor</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_doc'>doc</span><span class='op'>|</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_doc'>doc</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cursor'>cursor</span>.<span class='id identifier rubyid_to_enum'>to_enum</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get-instance_method">
  <h3 class='signature '>
    #<strong>get</strong>(keys_or_name)  &#x21d2; <code>Hash</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Convenience method for getting index information by a specific name or spec.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get index information by name.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_get'>get</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name_1</span><span class='tstring_end'>&#39;</span></span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Get index information by the keys.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'>view</span>.<span class='id identifier rubyid_get'>get</span>(<span class='label'>name:</span> <span class='int'>1</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>keys_or_name</span>
    <span class='type'>(<code>Hash</code>, <code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The index name or spec.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>The index information.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L265-L269'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='265' data-end='269'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 265</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_keys_or_name'>keys_or_name</span>)
  <span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    (<span class='id identifier rubyid_index'>index</span>[<span class='const'><a href="#NAME-constant" title="Mongo::Index::View::NAME (constant)">NAME</a></span>] <span class='op'>==</span> <span class='id identifier rubyid_keys_or_name'>keys_or_name</span>) <span class='op'>||</span> (<span class='id identifier rubyid_index'>index</span>[<span class='const'><a href="#KEY-constant" title="Mongo::Index::View::KEY (constant)">KEY</a></span>] <span class='op'>==</span> <span class='id identifier rubyid_normalize_keys'><a href="#normalize_keys-instance_method" title="Mongo::Index::View#normalize_keys (method)">normalize_keys</a></span>(<span class='id identifier rubyid_keys_or_name'>keys_or_name</span>))
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="index_name-instance_method">
  <h3 class='signature priv'>
    #<strong>index_name</strong>(spec)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L372-L374'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='372' data-end='374'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 372</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_index_name'>index_name</span>(<span class='id identifier rubyid_spec'>spec</span>)
  <span class='id identifier rubyid_spec'>spec</span>.<span class='id identifier rubyid_to_a'>to_a</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="indexes_spec-instance_method">
  <h3 class='signature priv'>
    #<strong>indexes_spec</strong>(session)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L376-L384'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='376' data-end='384'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 376</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_indexes_spec'>indexes_spec</span>(<span class='id identifier rubyid_session'>session</span>)
  { <span class='label'>selector:</span> {
      <span class='label'>listIndexes:</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>cursor:</span> <span class='id identifier rubyid_batch_size'><a href="#batch_size-instance_method" title="Mongo::Index::View#batch_size (method)">batch_size</a></span> <span class='op'>?</span> { <span class='label'>batchSize:</span> <span class='id identifier rubyid_batch_size'><a href="#batch_size-instance_method" title="Mongo::Index::View#batch_size (method)">batch_size</a></span> } <span class='op'>:</span> {} }<span class='comma'>,</span>
    <span class='label'>coll_name:</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='label'>db_name:</span> <span class='id identifier rubyid_database'>database</span>.<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initial_query_op-instance_method">
  <h3 class='signature priv'>
    #<strong>initial_query_op</strong>(session)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L386-L388'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='386' data-end='388'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 386</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initial_query_op'>initial_query_op</span>(<span class='id identifier rubyid_session'>session</span>)
  <span class='const'><a href="../Operation.html" title="Mongo::Operation (module)">Operation</a></span><span class='op'>::</span><span class='const'><a href="../Operation/Indexes.html" title="Mongo::Operation::Indexes (class)">Indexes</a></span>.<span class='id identifier rubyid_new'><a href="../Operation/Specifiable.html#initialize-instance_method" title="Mongo::Operation::Specifiable#initialize (method)">new</a></span>(<span class='id identifier rubyid_indexes_spec'><a href="#indexes_spec-instance_method" title="Mongo::Index::View#indexes_spec (method)">indexes_spec</a></span>(<span class='id identifier rubyid_session'>session</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="limit-instance_method">
  <h3 class='signature priv'>
    #<strong>limit</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L390-L390'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='390' data-end='390'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 390</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_limit'>limit</span><span class='semicolon'>;</span> <span class='op'>-</span><span class='int'>1</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_keys-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_keys</strong>(spec)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L392-L395'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='392' data-end='395'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 392</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_keys'>normalize_keys</span>(<span class='id identifier rubyid_spec'>spec</span>)
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'>spec</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>String</span>)
  <span class='const'><a href="../Options.html" title="Mongo::Options (module)">Options</a></span><span class='op'>::</span><span class='const'><a href="../Options/Mapper.html" title="Mongo::Options::Mapper (module)">Mapper</a></span>.<span class='id identifier rubyid_transform_keys_to_strings'><a href="../Options/Mapper.html#transform_keys_to_strings-instance_method" title="Mongo::Options::Mapper#transform_keys_to_strings (method)">transform_keys_to_strings</a></span>(<span class='id identifier rubyid_spec'>spec</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_models-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_models</strong>(models, server)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L397-L404'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='397' data-end='404'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 397</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_models'>normalize_models</span>(<span class='id identifier rubyid_models'>models</span><span class='comma'>,</span> <span class='id identifier rubyid_server'>server</span>)
  <span class='id identifier rubyid_models'>models</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_model'>model</span><span class='op'>|</span>
    <span class='comment'># Transform options first which gives us a mutable hash
</span>    <span class='const'><a href="../Options.html" title="Mongo::Options (module)">Options</a></span><span class='op'>::</span><span class='const'><a href="../Options/Mapper.html" title="Mongo::Options::Mapper (module)">Mapper</a></span>.<span class='id identifier rubyid_transform'><a href="../Options/Mapper.html#transform-instance_method" title="Mongo::Options::Mapper#transform (method)">transform</a></span>(<span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='const'><a href="#OPTIONS-constant" title="Mongo::Index::View::OPTIONS (constant)">OPTIONS</a></span>).<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_model'>model</span><span class='op'>|</span>
      <span class='id identifier rubyid_model'>model</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>] <span class='op'>||=</span> <span class='id identifier rubyid_index_name'><a href="#index_name-instance_method" title="Mongo::Index::View#index_name (method)">index_name</a></span>(<span class='id identifier rubyid_model'>model</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_key'>key</span>))
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="operation_timeouts-instance_method">
  <h3 class='signature nodoc'>
    #<strong>operation_timeouts</strong>(opts = {})  &#x21d2; <code>Hash</code> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>timeout_ms value set on the operation level (if any), and/or timeout_ms that is set on collection/database/client level (if any).</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L340-L348'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='340' data-end='348'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 340</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_operation_timeouts'>operation_timeouts</span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  {}.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Index::View#timeout_ms (method)">timeout_ms</a></span>] <span class='op'>||</span> <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Index::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>
      <span class='id identifier rubyid_result'>result</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Index::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Index::View#timeout_ms (method)">timeout_ms</a></span>) <span class='op'>||</span> <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Index::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_result'>result</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_inherited_timeout_ms'>inherited_timeout_ms</span>] <span class='op'>=</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Index::View#timeout_ms (method)">timeout_ms</a></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_initial_query-instance_method">
  <h3 class='signature priv'>
    #<strong>send_initial_query</strong>(server, session, context)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L406-L413'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='406' data-end='413'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 406</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_initial_query'>send_initial_query</span>(<span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_load_balancer?'>load_balancer?</span>
    <span class='id identifier rubyid_connection'>connection</span> <span class='op'>=</span> <span class='id identifier rubyid_server'>server</span>.<span class='id identifier rubyid_pool'>pool</span>.<span class='id identifier rubyid_check_out'>check_out</span>(<span class='label'>context:</span> <span class='id identifier rubyid_context'>context</span>)
    <span class='id identifier rubyid_initial_query_op'><a href="#initial_query_op-instance_method" title="Mongo::Index::View#initial_query_op (method)">initial_query_op</a></span>(<span class='id identifier rubyid_session'>session</span>).<span class='id identifier rubyid_execute_with_connection'>execute_with_connection</span>(<span class='id identifier rubyid_connection'>connection</span><span class='comma'>,</span> <span class='label'>context:</span> <span class='id identifier rubyid_context'>context</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_initial_query_op'><a href="#initial_query_op-instance_method" title="Mongo::Index::View#initial_query_op (method)">initial_query_op</a></span>(<span class='id identifier rubyid_session'>session</span>).<span class='id identifier rubyid_execute'>execute</span>(<span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='label'>context:</span> <span class='id identifier rubyid_context'>context</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timeout_ms-instance_method">
  <h3 class='signature '>
    #<strong>timeout_ms</strong>  &#x21d2; <code>Integer</code> | <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The timeout_ms value to use for this operation; either specified as an option to the view, or inherited from the collection.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>the timeout_ms for this operation</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/index/view.rb#L332-L334'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='332' data-end='334'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/index/view.rb', line 332</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout_ms'>timeout_ms</span>
  <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Index::View#operation_timeout_ms (method)">operation_timeout_ms</a></span> <span class='op'>||</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Index::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_timeout_ms'>timeout_ms</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>