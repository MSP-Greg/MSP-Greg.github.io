<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Mongo::Crypt::Binding &mdash; Mongo master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongo::Crypt::Binding",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Mongo master</a> &raquo; 
      <a href='../../_index.html#alpha_B'>Index (B)</a> &raquo; 
        <a href="../../Mongo.html" title="Mongo (module)">Mongo</a> &raquo; 
        <a href="../Crypt.html" title="Mongo::Crypt (module)">Crypt</a> &raquo; 
      <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>Binding&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Mongo::Crypt::Binding  <span class='private note title'>Private</span>
</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This class is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          FFI::Library
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L58'>lib/mongo/crypt/binding.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>A Ruby binding for the libmongocrypt C library</p>

  </div>
</div>
<div class='tags'>
  
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full nodoc'>
  <li>
    <span id='MIN_LIBMONGOCRYPT_VERSION-constant' class='summary_signature nodoc'>MIN_LIBMONGOCRYPT_VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Minimum version of libmongocrypt required by this version of the driver. An attempt to use the driver with any previous version of libmongocrypt will cause a <code>LoadError</code>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
    <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L86-L86'># File 'lib/mongo/crypt/binding.rb', line 86</a>    <pre class='code ruby'><span class='const'>Gem</span><span class='op'>::</span><span class='const'>Version</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.12.0</span><span class='tstring_end'>&quot;</span></span>)</pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#check_ctx_status-class_method" title=".check_ctx_status (class method)">.<strong>check_ctx_status</strong>(context)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_ctx_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#check_kms_ctx_status-class_method" title=".check_kms_ctx_status (class method)">.<strong>check_kms_ctx_status</strong>(kms_context)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>If the provided block returns false, raise a CryptError with the status information from the provided <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#check_status-class_method" title=".check_status (class method)">.<strong>check_status</strong>(handle)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#crypt_shared_lib_version-class_method" title=".crypt_shared_lib_version (class method)">.<strong>crypt_shared_lib_version</strong>(handle)  &#x21d2; Integer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Obtain a 64-bit constant encoding the version of the loaded crypt_shared library, if available.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_datakey_init-class_method" title=".ctx_datakey_init (class method)">.<strong>ctx_datakey_init</strong>(context)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> to create a data key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_decrypt_init-class_method" title=".ctx_decrypt_init (class method)">.<strong>ctx_decrypt_init</strong>(context, command)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for auto-decryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_encrypt_init-class_method" title=".ctx_encrypt_init (class method)">.<strong>ctx_encrypt_init</strong>(context, db_name, command)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for auto-encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_explicit_decrypt_init-class_method" title=".ctx_explicit_decrypt_init (class method)">.<strong>ctx_explicit_decrypt_init</strong>(context, doc)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for explicit decryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_explicit_encrypt_expression_init-class_method" title=".ctx_explicit_encrypt_expression_init (class method)">.<strong>ctx_explicit_encrypt_expression_init</strong>(context, doc)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for explicit expression encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_explicit_encrypt_init-class_method" title=".ctx_explicit_encrypt_init (class method)">.<strong>ctx_explicit_encrypt_init</strong>(context, doc)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for explicit encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_finalize-class_method" title=".ctx_finalize (class method)">.<strong>ctx_finalize</strong>(context)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Finalize the state machine represented by the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_kms_done-class_method" title=".ctx_kms_done (class method)">.<strong>ctx_kms_done</strong>(context)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicate to libmongocrypt that it will receive no more <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> replies.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_mongo_feed-class_method" title=".ctx_mongo_feed (class method)">.<strong>ctx_mongo_feed</strong>(context, doc)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Feed a response from the driver back to libmongocrypt.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_mongo_op-class_method" title=".ctx_mongo_op (class method)">.<strong>ctx_mongo_op</strong>(context)  &#x21d2; BSON::Document </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a BSON::Document representing an operation that the driver must perform on behalf of libmongocrypt to get the information it needs in order to continue with encryption/decryption (for example, a filter for a key vault query).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_next_kms_ctx-class_method" title=".ctx_next_kms_ctx (class method)">.<strong>ctx_next_kms_ctx</strong>(context)  &#x21d2; Mongo::Crypt::KmsContext | nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Return a new <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a> object needed by a <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_provide_kms_providers-class_method" title=".ctx_provide_kms_providers (class method)">.<strong>ctx_provide_kms_providers</strong>(context, kms_providers)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Call in response to the MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS state to set per-context <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider settings.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_rewrap_many_datakey_init-class_method" title=".ctx_rewrap_many_datakey_init (class method)">.<strong>ctx_rewrap_many_datakey_init</strong>(context, filter)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize a context to rewrap datakeys.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_algorithm-class_method" title=".ctx_setopt_algorithm (class method)">.<strong>ctx_setopt_algorithm</strong>(context, name)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the algorithm on the context.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_algorithm_range-class_method" title=".ctx_setopt_algorithm_range (class method)">.<strong>ctx_setopt_algorithm_range</strong>(context, opts)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set options for explicit encryption with the “range” algorithm.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_contention_factor-class_method" title=".ctx_setopt_contention_factor (class method)">.<strong>ctx_setopt_contention_factor</strong>(context, factor)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the contention factor used for explicit encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_key_alt_names-class_method" title=".ctx_setopt_key_alt_names (class method)">.<strong>ctx_setopt_key_alt_names</strong>(context, key_alt_names)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set multiple alternate key names on data key creation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_key_encryption_key-class_method" title=".ctx_setopt_key_encryption_key (class method)">.<strong>ctx_setopt_key_encryption_key</strong>(context, key_document)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set key encryption key document for creating a data key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_key_id-class_method" title=".ctx_setopt_key_id (class method)">.<strong>ctx_setopt_key_id</strong>(context, key_id)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the key id option on an explicit encryption context.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_key_material-class_method" title=".ctx_setopt_key_material (class method)">.<strong>ctx_setopt_key_material</strong>(context, key_material)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set set a custom key material to use for.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ctx_setopt_query_type-class_method" title=".ctx_setopt_query_type (class method)">.<strong>ctx_setopt_query_type</strong>(context, query_type)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the query type to use for FLE 2 explicit encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#get_binary_data_direct-class_method" title=".get_binary_data_direct (class method)">.<strong>get_binary_data_direct</strong>(mongocrypt_binary_t)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#get_binary_len_direct-class_method" title=".get_binary_len_direct (class method)">.<strong>get_binary_len_direct</strong>(mongocrypt_binary_t)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#init-class_method" title=".init (class method)">.<strong>init</strong>(handle)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the Mongo::Crypt::Handle object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_bytes_needed-class_method" title=".kms_ctx_bytes_needed (class method)">.<strong>kms_ctx_bytes_needed</strong>(kms_context)  &#x21d2; Integer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the number of bytes needed by the <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_endpoint-class_method" title=".kms_ctx_endpoint (class method)">.<strong>kms_ctx_endpoint</strong>(kms_context)  &#x21d2; String | nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the hostname with which to connect over TLS to get information about the AWS master key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_fail-class_method" title=".kms_ctx_fail (class method)">.<strong>kms_ctx_fail</strong>(kms_context)  &#x21d2; true, false </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Check whether the last failed request for the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> context may be retried.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_feed-class_method" title=".kms_ctx_feed (class method)">.<strong>kms_ctx_feed</strong>(kms_context, bytes)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Feed replies from the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> back to libmongocrypt.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_get_kms_provider-class_method" title=".kms_ctx_get_kms_provider (class method)">.<strong>kms_ctx_get_kms_provider</strong>(kms_context)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider identifier associated with this <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_message-class_method" title=".kms_ctx_message (class method)">.<strong>kms_ctx_message</strong>(kms_context)  &#x21d2; String </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the HTTP message needed to fetch the AWS KMS master key from a <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_setopt_retry_kms-class_method" title=".kms_ctx_setopt_retry_kms (class method)">.<strong>kms_ctx_setopt_retry_kms</strong>(handle, value)  &#x21d2; true, fale </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Enable or disable <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> retry behavior.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#kms_ctx_usleep-class_method" title=".kms_ctx_usleep (class method)">.<strong>kms_ctx_usleep</strong>(kms_context)  &#x21d2; Integer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns number of milliseconds to sleep before sending <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request for the given <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> context.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_binary_data-class_method" title=".mongocrypt_binary_data (class method)">.<strong>mongocrypt_binary_data</strong>(binary)  &#x21d2; FFI::Pointer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the pointer to the underlying data for the mongocrypt_binary_t.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_binary_destroy-class_method" title=".mongocrypt_binary_destroy (class method)">.<strong>mongocrypt_binary_destroy</strong>(binary)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Destroy the mongocrypt_binary_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_binary_len-class_method" title=".mongocrypt_binary_len (class method)">.<strong>mongocrypt_binary_len</strong>(binary)  &#x21d2; Integer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the length of the underlying data array.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_binary_new-class_method" title=".mongocrypt_binary_new (class method)">.<strong>mongocrypt_binary_new</strong>  &#x21d2; FFI::Pointer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new mongocrypt_binary_t object (a non-owning view of a byte.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_binary_new_from_data-class_method" title=".mongocrypt_binary_new_from_data (class method)">.<strong>mongocrypt_binary_new_from_data</strong>(data, len)  &#x21d2; FFI::Pointer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new mongocrypt_binary_t object that maintains a pointer to.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_crypt_shared_lib_version-class_method" title=".mongocrypt_crypt_shared_lib_version (class method)">.<strong>mongocrypt_crypt_shared_lib_version</strong>(crypt)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_datakey_init-class_method" title=".mongocrypt_ctx_datakey_init (class method)">.<strong>mongocrypt_ctx_datakey_init</strong>(ctx, filter)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_decrypt_init-class_method" title=".mongocrypt_ctx_decrypt_init (class method)">.<strong>mongocrypt_ctx_decrypt_init</strong>(ctx, doc)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initializes the ctx for auto-decryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_destroy-class_method" title=".mongocrypt_ctx_destroy (class method)">.<strong>mongocrypt_ctx_destroy</strong>(ctx)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Destroy the reference to the mongocrypt_ctx_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_encrypt_init-class_method" title=".mongocrypt_ctx_encrypt_init (class method)">.<strong>mongocrypt_ctx_encrypt_init</strong>(ctx, db, db_len, cmd)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initializes the ctx for auto-encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_explicit_decrypt_init-class_method" title=".mongocrypt_ctx_explicit_decrypt_init (class method)">.<strong>mongocrypt_ctx_explicit_decrypt_init</strong>(ctx, msg)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initializes the ctx for explicit decryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_explicit_encrypt_init-class_method" title=".mongocrypt_ctx_explicit_encrypt_init (class method)">.<strong>mongocrypt_ctx_explicit_encrypt_init</strong>(ctx, msg)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initializes the ctx for explicit expression encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_finalize-class_method" title=".mongocrypt_ctx_finalize (class method)">.<strong>mongocrypt_ctx_finalize</strong>(ctx, op_bson)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Perform the final encryption or decryption and return a BSON document.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_mongo_done-class_method" title=".mongocrypt_ctx_mongo_done (class method)">.<strong>mongocrypt_ctx_mongo_done</strong>(ctx)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicate to libmongocrypt that the driver is done feeding replies.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_mongo_feed-class_method" title=".mongocrypt_ctx_mongo_feed (class method)">.<strong>mongocrypt_ctx_mongo_feed</strong>(ctx, reply)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Feed a BSON reply to libmongocrypt.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_mongo_next_kms_ctx-class_method" title=".mongocrypt_ctx_mongo_next_kms_ctx (class method)">.<strong>mongocrypt_ctx_mongo_next_kms_ctx</strong>(ctx)  &#x21d2; FFI::Pointer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Return a pointer to a mongocrypt_kms_ctx_t object or NULL.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_mongo_op-class_method" title=".mongocrypt_ctx_mongo_op (class method)">.<strong>mongocrypt_ctx_mongo_op</strong>(ctx, op_bson)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get a BSON operation for the driver to run against the MongoDB.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_new-class_method" title=".mongocrypt_ctx_new (class method)">.<strong>mongocrypt_ctx_new</strong>(crypt)  &#x21d2; FFI::Pointer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new mongocrypt_ctx_t object (a wrapper for the libmongocrypt.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_provide_kms_providers-class_method" title=".mongocrypt_ctx_provide_kms_providers (class method)">.<strong>mongocrypt_ctx_provide_kms_providers</strong>(ctx, kms_providers)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_algorithm-class_method" title=".mongocrypt_ctx_setopt_algorithm (class method)">.<strong>mongocrypt_ctx_setopt_algorithm</strong>(ctx, algorithm, len)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the algorithm used for explicit encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_algorithm_range-class_method" title=".mongocrypt_ctx_setopt_algorithm_range (class method)">.<strong>mongocrypt_ctx_setopt_algorithm_range</strong>(ctx, opts)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_contention_factor-class_method" title=".mongocrypt_ctx_setopt_contention_factor (class method)">.<strong>mongocrypt_ctx_setopt_contention_factor</strong>(ctx, contention_factor)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_key_alt_name-class_method" title=".mongocrypt_ctx_setopt_key_alt_name (class method)">.<strong>mongocrypt_ctx_setopt_key_alt_name</strong>(ctx, binary)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>When creating a data key, set an alternate name on that key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_key_encryption_key-class_method" title=".mongocrypt_ctx_setopt_key_encryption_key (class method)">.<strong>mongocrypt_ctx_setopt_key_encryption_key</strong>(ctx)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set key encryption key document for creating a data key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_key_id-class_method" title=".mongocrypt_ctx_setopt_key_id (class method)">.<strong>mongocrypt_ctx_setopt_key_id</strong>(ctx, key_id)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the key id used for explicit encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_key_material-class_method" title=".mongocrypt_ctx_setopt_key_material (class method)">.<strong>mongocrypt_ctx_setopt_key_material</strong>(ctx, binary)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>When creating a data key, set a custom key material to use for.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_setopt_query_type-class_method" title=".mongocrypt_ctx_setopt_query_type (class method)">.<strong>mongocrypt_ctx_setopt_query_type</strong>(ctx, mongocrypt_query_type)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_state-class_method" title=".mongocrypt_ctx_state (class method)">.<strong>mongocrypt_ctx_state</strong>(ctx)  &#x21d2; Symbol </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the current state of the ctx.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_ctx_status-class_method" title=".mongocrypt_ctx_status (class method)">.<strong>mongocrypt_ctx_status</strong>(ctx, status)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the status information from the mongocrypt_ctx_t object on the.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_destroy-class_method" title=".mongocrypt_destroy (class method)">.<strong>mongocrypt_destroy</strong>(crypt)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Destroy the reference the mongocrypt_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_init-class_method" title=".mongocrypt_init (class method)">.<strong>mongocrypt_init</strong>(crypt)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Initialize the mongocrypt_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_bytes_needed-class_method" title=".mongocrypt_kms_ctx_bytes_needed (class method)">.<strong>mongocrypt_kms_ctx_bytes_needed</strong>(kms)  &#x21d2; Integer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the number of bytes needed by the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> context.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_done-class_method" title=".mongocrypt_kms_ctx_done (class method)">.<strong>mongocrypt_kms_ctx_done</strong>(ctx)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicate to libmongocrypt that it will receive no more replies from.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_endpoint-class_method" title=".mongocrypt_kms_ctx_endpoint (class method)">.<strong>mongocrypt_kms_ctx_endpoint</strong>(kms, endpoint)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the hostname with which to connect over TLS to get information about.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_fail-class_method" title=".mongocrypt_kms_ctx_fail (class method)">.<strong>mongocrypt_kms_ctx_fail</strong>(ctx)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_feed-class_method" title=".mongocrypt_kms_ctx_feed (class method)">.<strong>mongocrypt_kms_ctx_feed</strong>(kms, bytes)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Feed replies from the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> back to libmongocrypt.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_get_kms_provider-class_method" title=".mongocrypt_kms_ctx_get_kms_provider (class method)">.<strong>mongocrypt_kms_ctx_get_kms_provider</strong>(crypt, kms_providers)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_message-class_method" title=".mongocrypt_kms_ctx_message (class method)">.<strong>mongocrypt_kms_ctx_message</strong>(kms, msg)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the message needed to fetch the AWS KMS master key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_status-class_method" title=".mongocrypt_kms_ctx_status (class method)">.<strong>mongocrypt_kms_ctx_status</strong>(kms, status)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Write status information about the mongocrypt_kms_ctx_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_kms_ctx_usleep-class_method" title=".mongocrypt_kms_ctx_usleep (class method)">.<strong>mongocrypt_kms_ctx_usleep</strong>(ctx)  &#x21d2; int64 </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates how long to sleep before sending <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_aes_256_ctr-class_method" title=".mongocrypt_setopt_aes_256_ctr (class method)">.<strong>mongocrypt_setopt_aes_256_ctr</strong>(crypt, aes_256_ctr_encrypt, aes_256_ctr_decrypt, ctx)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set a crypto hook for the AES256-CTR operations.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_append_crypt_shared_lib_search_path-class_method" title=".mongocrypt_setopt_append_crypt_shared_lib_search_path (class method)">.<strong>mongocrypt_setopt_append_crypt_shared_lib_search_path</strong>(crypt, path)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_bypass_query_analysis-class_method" title=".mongocrypt_setopt_bypass_query_analysis (class method)">.<strong>mongocrypt_setopt_bypass_query_analysis</strong>(crypt)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5-class_method" title=".mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5 (class method)">.<strong>mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5</strong>(crypt, sign_rsaes_pkcs1_v1_5, ctx = nil)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set a crypto hook for the RSASSA-PKCS1-v1_5 algorithm with a SHA-256 hash.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_crypto_hooks-class_method" title=".mongocrypt_setopt_crypto_hooks (class method)">.<strong>mongocrypt_setopt_crypto_hooks</strong>(crypt, aes_enc_fn, aes_dec_fn, random_fn, sha_512_fn, sha_256_fn, hash_fn, ctx = nil)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set crypto hooks on the provided mongocrypt object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_encrypted_field_config_map-class_method" title=".mongocrypt_setopt_encrypted_field_config_map (class method)">.<strong>mongocrypt_setopt_encrypted_field_config_map</strong>(crypt, efc_map)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_kms_providers-class_method" title=".mongocrypt_setopt_kms_providers (class method)">.<strong>mongocrypt_setopt_kms_providers</strong>(crypt, kms_providers)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Configure KMS providers with a BSON document.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_log_handler-class_method" title=".mongocrypt_setopt_log_handler (class method)">.<strong>mongocrypt_setopt_log_handler</strong>(crypt, log_fn, log_ctx = nil)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the handler on the mongocrypt_t object to be called every time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_retry_kms-class_method" title=".mongocrypt_setopt_retry_kms (class method)">.<strong>mongocrypt_setopt_retry_kms</strong>(crypt, enable)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_schema_map-class_method" title=".mongocrypt_setopt_schema_map (class method)">.<strong>mongocrypt_setopt_schema_map</strong>(crypt, schema_map)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets a local schema map for encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_set_crypt_shared_lib_path_override-class_method" title=".mongocrypt_setopt_set_crypt_shared_lib_path_override (class method)">.<strong>mongocrypt_setopt_set_crypt_shared_lib_path_override</strong>(crypt, path)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_setopt_use_need_kms_credentials_state-class_method" title=".mongocrypt_setopt_use_need_kms_credentials_state (class method)">.<strong>mongocrypt_setopt_use_need_kms_credentials_state</strong>(crypt)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status-class_method" title=".mongocrypt_status (class method)">.<strong>mongocrypt_status</strong>(crypt, status)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the status information from the mongocrypt_t object on the.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status_code-class_method" title=".mongocrypt_status_code (class method)">.<strong>mongocrypt_status_code</strong>(status)  &#x21d2; Integer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the status error code.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status_destroy-class_method" title=".mongocrypt_status_destroy (class method)">.<strong>mongocrypt_status_destroy</strong>(status)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Destroys the reference to the mongocrypt_status_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status_message-class_method" title=".mongocrypt_status_message (class method)">.<strong>mongocrypt_status_message</strong>(status, len = nil)  &#x21d2; String </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the status message.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status_new-class_method" title=".mongocrypt_status_new (class method)">.<strong>mongocrypt_status_new</strong>  &#x21d2; FFI::Pointer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new mongocrypt_status_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status_ok-class_method" title=".mongocrypt_status_ok (class method)">.<strong>mongocrypt_status_ok</strong>(status)  &#x21d2; Boolean </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether the status is ok or an error.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status_set-class_method" title=".mongocrypt_status_set (class method)">.<strong>mongocrypt_status_set</strong>(status, type, code, message, len)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set a message, type, and code on an existing status.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_status_type-class_method" title=".mongocrypt_status_type (class method)">.<strong>mongocrypt_status_type</strong>(status)  &#x21d2; Symbol </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Indicates the status type.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_version-class_method" title=".mongocrypt_version (class method)">.<strong>mongocrypt_version</strong>(len)  &#x21d2; String </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the version string of the libmongocrypt library.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#ongocrypt_new-class_method" title=".ongocrypt_new (class method)">.<strong>ongocrypt_new</strong>  &#x21d2; FFI::Pointer </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new mongocrypt_t object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#parse_version-class_method" title=".parse_version (class method)">.<strong>parse_version</strong>(version)  &#x21d2; Gem::Version </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Given a string representing a version number, parses it into a Gem::Version object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_aes_256_ctr-class_method" title=".setopt_aes_256_ctr (class method)">.<strong>setopt_aes_256_ctr</strong>(handle, aes_ctr_encrypt_cb, aes_ctr_decrypt_cb)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set a crypto hook for the AES256-CTR operations.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_append_crypt_shared_lib_search_path-class_method" title=".setopt_append_crypt_shared_lib_search_path (class method)">.<strong>setopt_append_crypt_shared_lib_search_path</strong>(handle, path)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Append an additional search directory to the search path for loading.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_bypass_query_analysis-class_method" title=".setopt_bypass_query_analysis (class method)">.<strong>setopt_bypass_query_analysis</strong>(handle)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Opt-into skipping query analysis.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_crypto_hook_sign_rsaes_pkcs1_v1_5-class_method" title=".setopt_crypto_hook_sign_rsaes_pkcs1_v1_5 (class method)">.<strong>setopt_crypto_hook_sign_rsaes_pkcs1_v1_5</strong>(handle, rsaes_pkcs_signature_cb)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set a crypto hook for the RSASSA-PKCS1-v1_5 algorithm with.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_crypto_hooks-class_method" title=".setopt_crypto_hooks (class method)">.<strong>setopt_crypto_hooks</strong>(handle, aes_encrypt_cb, aes_decrypt_cb, random_cb, hmac_sha_512_cb, hmac_sha_256_cb, hmac_hash_cb)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set crypto callbacks on the <a href="Handle.html" title="Mongo::Crypt::Handle (class)"><code>Handle</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_encrypted_field_config_map-class_method" title=".setopt_encrypted_field_config_map (class method)">.<strong>setopt_encrypted_field_config_map</strong>(handle, efc_map)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set a local EncryptedFieldConfigMap for encryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_kms_providers-class_method" title=".setopt_kms_providers (class method)">.<strong>setopt_kms_providers</strong>(handle, kms_providers)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set KMS providers options on the Mongo::Crypt::Handle object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_log_handler-class_method" title=".setopt_log_handler (class method)">.<strong>setopt_log_handler</strong>(handle, log_callback)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the logger callback function on the Mongo::Crypt::Handle object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_schema_map-class_method" title=".setopt_schema_map (class method)">.<strong>setopt_schema_map</strong>(handle, schema_map_doc)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set schema map on the Mongo::Crypt::Handle object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_set_crypt_shared_lib_path_override-class_method" title=".setopt_set_crypt_shared_lib_path_override (class method)">.<strong>setopt_set_crypt_shared_lib_path_override</strong>(handle, path)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set a single override path for loading the crypt shared library.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#setopt_use_need_kms_credentials_state-class_method" title=".setopt_use_need_kms_credentials_state (class method)">.<strong>setopt_use_need_kms_credentials_state</strong>(handle)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Opt-into handling the MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS state.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#validate_document-class_method" title=".validate_document (class method)">.<strong>validate_document</strong>(data)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks that the specified data is a Hash before serializing it to BSON to prevent errors from libmongocrypt.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#validate_version-class_method" title=".validate_version (class method)">.<strong>validate_version</strong>(lmc_version)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>Validates if provided version of libmongocrypt is valid, i.e. equal or greater than minimum required version.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_crypto_fn-instance_method" title="#mongocrypt_crypto_fn (instance method)">#<strong>mongocrypt_crypto_fn</strong>(ctx, key, iv, input, output, status)  &#x21d2; Bool </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>A callback to a function that performs AES encryption or decryption.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_hash_fn-instance_method" title="#mongocrypt_hash_fn (instance method)">#<strong>mongocrypt_hash_fn</strong>(ctx, input, output, status)  &#x21d2; Bool </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>A callback to a SHA-256 hash function.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_hmac_fn-instance_method" title="#mongocrypt_hmac_fn (instance method)">#<strong>mongocrypt_hmac_fn</strong>(ctx, key, input, output, status)  &#x21d2; Bool </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>A callback to a function that performs HMAC SHA-512 or SHA-256.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_log_fn_t-instance_method" title="#mongocrypt_log_fn_t (instance method)">#<strong>mongocrypt_log_fn_t</strong>(level, message, len, ctx)  &#x21d2; nil </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>A callback to the mongocrypt log function.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#mongocrypt_random_fn-instance_method" title="#mongocrypt_random_fn (instance method)">#<strong>mongocrypt_random_fn</strong>(ctx, output, count, status)  &#x21d2; Bool </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <div class='summary_desc'>
      <div class='inline'><p>A callback to a crypto secure random function.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="check_ctx_status-class_method">
  <h3 class='signature nodoc first'>
    .<strong>check_ctx_status</strong>(context)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_ctx_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1821-L1834'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1821' data-end='1834'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1821</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span>(<span class='id identifier rubyid_context'>context</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_do_raise'>do_raise</span> <span class='op'>=</span> <span class='op'>!</span><span class='kw'>yield</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_do_raise'>do_raise</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_do_raise'>do_raise</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><a href="Status.html" title="Mongo::Crypt::Status (class)">Status</a></span>.<span class='id identifier rubyid_new'><a href="Status.html#new-class_method" title="Mongo::Crypt::Status.new (method)">new</a></span>

    <span class='id identifier rubyid_mongocrypt_ctx_status'><a href="#mongocrypt_ctx_status-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_status (method)">mongocrypt_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_ref'>ref</span>)
    <span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_raise_crypt_error'>raise_crypt_error</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_kms_ctx_status-class_method">
  <h3 class='signature nodoc'>
    .<strong>check_kms_ctx_status</strong>(kms_context)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If the provided block returns false, raise a CryptError with the status information from the provided <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a> object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms_context</span>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a>)</span>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the provided block returns false</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1107-L1114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1107' data-end='1114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1107</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_check_kms_ctx_status'>check_kms_ctx_status</span>(<span class='id identifier rubyid_kms_context'>kms_context</span>)
  <span class='kw'>unless</span> <span class='kw'>yield</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><a href="Status.html" title="Mongo::Crypt::Status (class)">Status</a></span>.<span class='id identifier rubyid_new'><a href="Status.html#new-class_method" title="Mongo::Crypt::Status.new (method)">new</a></span>

    <span class='id identifier rubyid_mongocrypt_kms_ctx_status'><a href="#mongocrypt_kms_ctx_status-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_status (method)">mongocrypt_kms_ctx_status</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_ref'>ref</span>)
    <span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_raise_crypt_error'>raise_crypt_error</span>(<span class='label'>kms:</span> <span class='kw'>true</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_status-class_method">
  <h3 class='signature nodoc'>
    .<strong>check_status</strong>(handle)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1808-L1815'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1808' data-end='1815'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1808</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_check_status'>check_status</span>(<span class='id identifier rubyid_handle'>handle</span>)
  <span class='kw'>unless</span> <span class='kw'>yield</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><a href="Status.html" title="Mongo::Crypt::Status (class)">Status</a></span>.<span class='id identifier rubyid_new'><a href="Status.html#new-class_method" title="Mongo::Crypt::Status.new (method)">new</a></span>

    <span class='id identifier rubyid_mongocrypt_status'><a href="#mongocrypt_status-class_method" title="Mongo::Crypt::Binding.mongocrypt_status (method)">mongocrypt_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_ref'>ref</span>)
    <span class='id identifier rubyid_status'>status</span>.<span class='id identifier rubyid_raise_crypt_error'>raise_crypt_error</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="crypt_shared_lib_version-class_method">
  <h3 class='signature nodoc'>
    .<strong>crypt_shared_lib_version</strong>(handle)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Obtain a 64-bit constant encoding the version of the loaded crypt_shared library, if available.</p>

<p>The version is encoded as four 16-bit numbers, from high to low:</p>
<ul><li>
<p>Major version</p>
</li><li>
<p>Minor version</p>
</li><li>
<p>Revision</p>
</li><li>
<p>Reserved</p>
</li></ul>

<p>For example, version 6.2.1 would be encoded as: 0x0006’0002’0001’0000</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>A 64-bit encoded version number, with the version encoded as four sixteen-bit integers, or zero if no crypt_shared library was loaded.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1614-L1616'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1614' data-end='1616'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1614</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_crypt_shared_lib_version'>crypt_shared_lib_version</span>(<span class='id identifier rubyid_handle'>handle</span>)
  <span class='id identifier rubyid_mongocrypt_crypt_shared_lib_version'><a href="#mongocrypt_crypt_shared_lib_version-class_method" title="Mongo::Crypt::Binding.mongocrypt_crypt_shared_lib_version (method)">mongocrypt_crypt_shared_lib_version</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_datakey_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_datakey_init</strong>(context)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> to create a data key</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If initialization fails</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L625-L629'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='625' data-end='629'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 625</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_datakey_init'>ctx_datakey_init</span>(<span class='id identifier rubyid_context'>context</span>)
  <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_datakey_init'><a href="#mongocrypt_ctx_datakey_init-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_datakey_init (method)">mongocrypt_ctx_datakey_init</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_decrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_decrypt_init</strong>(context, command)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for auto-decryption</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>command</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>A BSON document to decrypt</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If initialization fails</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L786-L794'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='786' data-end='794'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 786</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_decrypt_init'>ctx_decrypt_init</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_command'>command</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_command'>command</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_decrypt_init'><a href="#mongocrypt_ctx_decrypt_init-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_decrypt_init (method)">mongocrypt_ctx_decrypt_init</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_encrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_encrypt_init</strong>(context, db_name, command)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for auto-encryption</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>db_name</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The name of the database against which the encrypted command is being performed</p>
</div>
  </li>
  <li>
    <span class='name'>command</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>The command to be encrypted</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If initialization fails</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L692-L700'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='692' data-end='700'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 692</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_encrypt_init'>ctx_encrypt_init</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_db_name'>db_name</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_command'>command</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_command'>command</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_encrypt_init'><a href="#mongocrypt_ctx_encrypt_init-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_encrypt_init (method)">mongocrypt_ctx_encrypt_init</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_db_name'>db_name</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_explicit_decrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_explicit_decrypt_init</strong>(context, doc)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for explicit decryption</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>doc</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>A BSON document to decrypt</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If initialization fails</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L816-L824'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='816' data-end='824'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 816</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_explicit_decrypt_init'>ctx_explicit_decrypt_init</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_explicit_decrypt_init'><a href="#mongocrypt_ctx_explicit_decrypt_init-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_explicit_decrypt_init (method)">mongocrypt_ctx_explicit_decrypt_init</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_explicit_encrypt_expression_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_explicit_encrypt_expression_init</strong>(context, doc)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for explicit expression encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>doc</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>A BSON document to encrypt</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If initialization fails</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L760-L768'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='760' data-end='768'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 760</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_explicit_encrypt_expression_init'>ctx_explicit_encrypt_expression_init</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_explicit_encrypt_expression_init'>mongocrypt_ctx_explicit_encrypt_expression_init</span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_explicit_encrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_explicit_encrypt_init</strong>(context, doc)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> for explicit encryption</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>doc</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>A BSON document to encrypt</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If initialization fails</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L726-L734'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='726' data-end='734'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 726</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_explicit_encrypt_init'>ctx_explicit_encrypt_init</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_explicit_encrypt_init'><a href="#mongocrypt_ctx_explicit_encrypt_init-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_explicit_encrypt_init (method)">mongocrypt_ctx_explicit_encrypt_init</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_finalize-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_finalize</strong>(context)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Finalize the state machine represented by the <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a></p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the state machine is not successfully finalized</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1209-L1220'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1209' data-end='1220'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1209</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_finalize'>ctx_finalize</span>(<span class='id identifier rubyid_context'>context</span>)
  <span class='id identifier rubyid_binary'>binary</span> <span class='op'>=</span> <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_new'><a href="Binary.html#new-class_method" title="Mongo::Crypt::Binary.new (method)">new</a></span>

  <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_finalize'><a href="#mongocrypt_ctx_finalize-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_finalize (method)">mongocrypt_ctx_finalize</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_binary'>binary</span>.<span class='id identifier rubyid_ref'>ref</span>)
  <span class='kw'>end</span>

  <span class='comment'># TODO since the binary references a C pointer, and ByteBuffer is
</span>  <span class='comment'># written in C in MRI, we could omit a copy of the data by making
</span>  <span class='comment'># ByteBuffer reference the string that is owned by libmongocrypt.
</span>  <span class='const'>BSON</span><span class='op'>::</span><span class='const'>Document</span>.<span class='id identifier rubyid_from_bson'>from_bson</span>(<span class='const'>BSON</span><span class='op'>::</span><span class='const'>ByteBuffer</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_binary'>binary</span>.<span class='id identifier rubyid_to_s'>to_s</span>)<span class='comma'>,</span> <span class='label'>mode:</span> <span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_bson_mode'>bson_mode</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_kms_done-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_kms_done</strong>(context)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Indicate to libmongocrypt that it will receive no more <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> replies.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation is unsuccessful</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1186-L1190'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1186' data-end='1190'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1186</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_kms_done'>ctx_kms_done</span>(<span class='id identifier rubyid_context'>context</span>)
  <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_kms_done'>mongocrypt_ctx_kms_done</span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_mongo_feed-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_mongo_feed</strong>(context, doc)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Feed a response from the driver back to libmongocrypt</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>doc</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>The document representing the response</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L897-L905'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='897' data-end='905'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 897</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_mongo_feed'>ctx_mongo_feed</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_doc'>doc</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_mongo_feed'><a href="#mongocrypt_ctx_mongo_feed-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_mongo_feed (method)">mongocrypt_ctx_mongo_feed</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_mongo_op-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_mongo_op</strong>(context)  &#x21d2; <code>BSON::Document</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a BSON::Document representing an operation that the driver must perform on behalf of libmongocrypt to get the information it needs in order to continue with encryption/decryption (for example, a filter for a key vault query).</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>The operation that the driver must perform</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Crypt.html" title="Mongo::Crypt (module)">Mongo::Crypt</a>)</span>
&mdash;    <div class='inline'>
<p>If there is an error getting the operation</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L868-L879'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='868' data-end='879'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 868</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_mongo_op'>ctx_mongo_op</span>(<span class='id identifier rubyid_context'>context</span>)
  <span class='id identifier rubyid_binary'>binary</span> <span class='op'>=</span> <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_new'><a href="Binary.html#new-class_method" title="Mongo::Crypt::Binary.new (method)">new</a></span>

  <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_mongo_op'><a href="#mongocrypt_ctx_mongo_op-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_mongo_op (method)">mongocrypt_ctx_mongo_op</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_binary'>binary</span>.<span class='id identifier rubyid_ref'>ref</span>)
  <span class='kw'>end</span>

  <span class='comment'># TODO since the binary references a C pointer, and ByteBuffer is
</span>  <span class='comment'># written in C in MRI, we could omit a copy of the data by making
</span>  <span class='comment'># ByteBuffer reference the string that is owned by libmongocrypt.
</span>  <span class='const'>BSON</span><span class='op'>::</span><span class='const'>Document</span>.<span class='id identifier rubyid_from_bson'>from_bson</span>(<span class='const'>BSON</span><span class='op'>::</span><span class='const'>ByteBuffer</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_binary'>binary</span>.<span class='id identifier rubyid_to_s'>to_s</span>)<span class='comma'>,</span> <span class='label'>mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bson'>bson</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_next_kms_ctx-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_next_kms_ctx</strong>(context)  &#x21d2; <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a> | <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return a new <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a> object needed by a <a href="Context.html" title="Mongo::Crypt::Context (class)"><code>Context</code></a> object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>The KmsContext needed to fetch an AWS master key or nil, if no <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a> is needed</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L929-L937'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='929' data-end='937'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 929</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_next_kms_ctx'>ctx_next_kms_ctx</span>(<span class='id identifier rubyid_context'>context</span>)
  <span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span> <span class='op'>=</span> <span class='id identifier rubyid_mongocrypt_ctx_next_kms_ctx'>mongocrypt_ctx_next_kms_ctx</span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span>.<span class='id identifier rubyid_null?'>null?</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='const'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">KmsContext</a></span>.<span class='id identifier rubyid_new'><a href="KmsContext.html#new-class_method" title="Mongo::Crypt::KmsContext.new (method)">new</a></span>(<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_provide_kms_providers-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_provide_kms_providers</strong>(context, kms_providers)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Call in response to the MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS state to set per-context <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider settings. These follow the same format as ‘mongocrypt_setopt_kms_providers“. If no keys are present in the BSON input, the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider settings configured for the mongocrypt_t at initialization are used.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
&mdash;    <div class='inline'>
<p>Encryption context.</p>
</div>
  </li>
  <li>
    <span class='name'>kms_providers</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>BSON document mapping the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider names to credentials.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the option is not set successfully.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1687-L1695'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1687' data-end='1695'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1687</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_provide_kms_providers'>ctx_provide_kms_providers</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_kms_providers'>kms_providers</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_kms_providers'>kms_providers</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_kms_providers'>kms_providers</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_provide_kms_providers'><a href="#mongocrypt_ctx_provide_kms_providers-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_provide_kms_providers (method)">mongocrypt_ctx_provide_kms_providers</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_rewrap_many_datakey_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_rewrap_many_datakey_init</strong>(context, filter)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize a context to rewrap datakeys.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>filter</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>BSON Document that represents filter to use for the find command on the key vault collection to retrieve datakeys to rewrap.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L656-L663'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='656' data-end='663'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 656</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_rewrap_many_datakey_init'>ctx_rewrap_many_datakey_init</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_filter'>filter</span>)
  <span class='id identifier rubyid_filter_data'>filter_data</span> <span class='op'>=</span> <span class='id identifier rubyid_filter'>filter</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_filter_data'>filter_data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_rewrap_many_datakey_init'>mongocrypt_ctx_rewrap_many_datakey_init</span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_algorithm-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_algorithm</strong>(context, name)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the algorithm on the context</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>name</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The algorithm name. Valid values are:</p>
<ul><li>
<p>“AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic”</p>
</li><li>
<p>“AEAD_AES_256_CBC_HMAC_SHA_512-Random”</p>
</li></ul>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation failed</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L569-L573'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='569' data-end='573'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 569</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_algorithm'>ctx_setopt_algorithm</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span>)
  <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_setopt_algorithm'><a href="#mongocrypt_ctx_setopt_algorithm-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_algorithm (method)">mongocrypt_ctx_setopt_algorithm</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_algorithm_range-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_algorithm_range</strong>(context, opts)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The Range algorithm is experimental only. It is not intended for</p>
</div>
  </div>


<p>Set options for explicit encryption with the “range” algorithm.</p>

<p>public use.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>opts</span>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>options</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation failed</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1794-L1802'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1794' data-end='1802'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1794</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_algorithm_range'>ctx_setopt_algorithm_range</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_setopt_algorithm_range'><a href="#mongocrypt_ctx_setopt_algorithm_range-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_algorithm_range (method)">mongocrypt_ctx_setopt_algorithm_range</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_contention_factor-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_contention_factor</strong>(context, factor)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the contention factor used for explicit encryption. The contention factor is only used for indexed FLE 2 encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
&mdash;    <div class='inline'>
<p>Explicit encryption context.</p>
</div>
  </li>
  <li>
    <span class='name'>factor</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>Contention factor used for explicit encryption.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation failed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1757-L1761'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1757' data-end='1761'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1757</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_contention_factor'>ctx_setopt_contention_factor</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_factor'>factor</span>)
  <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_setopt_contention_factor'><a href="#mongocrypt_ctx_setopt_contention_factor-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_contention_factor (method)">mongocrypt_ctx_setopt_contention_factor</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_factor'>factor</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_key_alt_names-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_key_alt_names</strong>(context, key_alt_names)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set multiple alternate key names on data key creation</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
&mdash;    <div class='inline'>
<p>A DataKeyContext</p>
</div>
  </li>
  <li>
    <span class='name'>key_alt_names</span>
    <span class='type'>(<code>Array</code>)</span>
&mdash;    <div class='inline'>
<p>An array of alternate key names as strings</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If any of the alternate names are not valid UTF8 strings</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L500-L510'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='500' data-end='510'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 500</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_key_alt_names'>ctx_setopt_key_alt_names</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key_alt_names'>key_alt_names</span>)
  <span class='id identifier rubyid_key_alt_names'>key_alt_names</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key_alt_name'>key_alt_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_key_alt_name_bson'>key_alt_name_bson</span> <span class='op'>=</span> { <span class='symbeg'>:</span><span class='id identifier rubyid_keyAltName'>keyAltName</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_key_alt_name'>key_alt_name</span> }.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>

    <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_key_alt_name_bson'>key_alt_name_bson</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key_alt_name_p'>key_alt_name_p</span><span class='op'>|</span>
      <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
        <span class='id identifier rubyid_mongocrypt_ctx_setopt_key_alt_name'><a href="#mongocrypt_ctx_setopt_key_alt_name-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_key_alt_name (method)">mongocrypt_ctx_setopt_key_alt_name</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_key_alt_name_p'>key_alt_name_p</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_key_encryption_key-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_key_encryption_key</strong>(context, key_document)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set key encryption key document for creating a data key.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
  </li>
  <li>
    <span class='name'>key_document</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>BSON document representing the key encryption key document with an additional “provider” field.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation failed</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L598-L606'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='598' data-end='606'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 598</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_key_encryption_key'>ctx_setopt_key_encryption_key</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key_document'>key_document</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_key_document'>key_document</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_key_document'>key_document</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_setopt_key_encryption_key'><a href="#mongocrypt_ctx_setopt_key_encryption_key-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_key_encryption_key (method)">mongocrypt_ctx_setopt_key_encryption_key</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_key_id-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_key_id</strong>(context, key_id)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the key id option on an explicit encryption context.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
&mdash;    <div class='inline'>
<p>Explicit encryption context</p>
</div>
  </li>
  <li>
    <span class='name'>key_id</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The key id</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation failed</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L467-L473'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='467' data-end='473'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 467</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_key_id'>ctx_setopt_key_id</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key_id'>key_id</span>)
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_key_id'>key_id</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key_id_p'>key_id_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_setopt_key_id'><a href="#mongocrypt_ctx_setopt_key_id-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_key_id (method)">mongocrypt_ctx_setopt_key_id</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_key_id_p'>key_id_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_key_material-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_key_material</strong>(context, key_material)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set set a custom key material to use for</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_encrypting'>encrypting</span> <span class='id identifier rubyid_data'>data</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
&mdash;    <div class='inline'>
<p>A DataKeyContext</p>
</div>
  </li>
  <li>
    <span class='name'>key_material</span>
    <span class='type'>(<code>BSON::Binary</code>)</span>
&mdash;    <div class='inline'>
<p>96 bytes of custom key material</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the key material is not 96 bytes.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L535-L542'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='535' data-end='542'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 535</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_key_material'>ctx_setopt_key_material</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key_material'>key_material</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>keyMaterial</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_key_material'>key_material</span>}.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_setopt_key_material'><a href="#mongocrypt_ctx_setopt_key_material-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_key_material (method)">mongocrypt_ctx_setopt_key_material</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ctx_setopt_query_type-class_method">
  <h3 class='signature nodoc'>
    .<strong>ctx_setopt_query_type</strong>(context, query_type)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the query type to use for FLE 2 explicit encryption. The query type is only used for indexed FLE 2 encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>context</span>
    <span class='type'>(<a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a>)</span>
&mdash;    <div class='inline'>
<p>Explicit encryption context.</p>
</div>
  </li>
  <li>
    <span class='name'>:mongocrypt_query_type</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>query_type Type of the query.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation failed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1725-L1729'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1725' data-end='1729'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1725</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_ctx_setopt_query_type'>ctx_setopt_query_type</span>(<span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_query_type'>query_type</span>)
  <span class='id identifier rubyid_check_ctx_status'><a href="#check_ctx_status-class_method" title="Mongo::Crypt::Binding.check_ctx_status (method)">check_ctx_status</a></span>(<span class='id identifier rubyid_context'>context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_setopt_query_type'><a href="#mongocrypt_ctx_setopt_query_type-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_setopt_query_type (method)">mongocrypt_ctx_setopt_query_type</a></span>(<span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_query_type'>query_type</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_binary_data_direct-class_method">
  <h3 class='signature nodoc'>
    .<strong>get_binary_data_direct</strong>(mongocrypt_binary_t)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L181-L183'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='181' data-end='183'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 181</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_get_binary_data_direct'>get_binary_data_direct</span>(<span class='id identifier rubyid_mongocrypt_binary_t'>mongocrypt_binary_t</span>)
  <span class='id identifier rubyid_mongocrypt_binary_t'>mongocrypt_binary_t</span>.<span class='id identifier rubyid_get_pointer'>get_pointer</span>(<span class='int'>0</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_binary_len_direct-class_method">
  <h3 class='signature nodoc'>
    .<strong>get_binary_len_direct</strong>(mongocrypt_binary_t)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L185-L187'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='185' data-end='187'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 185</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_get_binary_len_direct'>get_binary_len_direct</span>(<span class='id identifier rubyid_mongocrypt_binary_t'>mongocrypt_binary_t</span>)
  <span class='id identifier rubyid_mongocrypt_binary_t'>mongocrypt_binary_t</span>.<span class='id identifier rubyid_get_uint32'>get_uint32</span>(<span class='const'>FFI</span><span class='op'>::</span><span class='const'>NativeType</span><span class='op'>::</span><span class='const'>POINTER</span>.<span class='id identifier rubyid_size'>size</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="init-class_method">
  <h3 class='signature nodoc'>
    .<strong>init</strong>(handle)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the Mongo::Crypt::Handle object</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If initialization fails</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L407-L411'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='407' data-end='411'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 407</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_init'>init</span>(<span class='id identifier rubyid_handle'>handle</span>)
  <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_init'><a href="#mongocrypt_init-class_method" title="Mongo::Crypt::Binding.mongocrypt_init (method)">mongocrypt_init</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_bytes_needed-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_bytes_needed</strong>(kms_context)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the number of bytes needed by the <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms_context</span>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a>)</span>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of bytes needed</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1063-L1065'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1063' data-end='1065'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1063</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_bytes_needed'>kms_ctx_bytes_needed</span>(<span class='id identifier rubyid_kms_context'>kms_context</span>)
  <span class='id identifier rubyid_mongocrypt_kms_ctx_bytes_needed'><a href="#mongocrypt_kms_ctx_bytes_needed-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_bytes_needed (method)">mongocrypt_kms_ctx_bytes_needed</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_endpoint-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_endpoint</strong>(kms_context)  &#x21d2; <code>String</code> | <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the hostname with which to connect over TLS to get information about the AWS master key.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms_context</span>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a>)</span>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>The hostname, or nil if none exists</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1039-L1048'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1039' data-end='1048'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1039</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_endpoint'>kms_ctx_endpoint</span>(<span class='id identifier rubyid_kms_context'>kms_context</span>)
  <span class='id identifier rubyid_ptr'>ptr</span> <span class='op'>=</span> <span class='const'>FFI</span><span class='op'>::</span><span class='const'>MemoryPointer</span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='int'>1</span>)

  <span class='id identifier rubyid_check_kms_ctx_status'><a href="#check_kms_ctx_status-class_method" title="Mongo::Crypt::Binding.check_kms_ctx_status (method)">check_kms_ctx_status</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_kms_ctx_endpoint'><a href="#mongocrypt_kms_ctx_endpoint-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_endpoint (method)">mongocrypt_kms_ctx_endpoint</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_ptr'>ptr</span>)
  <span class='kw'>end</span>

  <span class='id identifier rubyid_str_ptr'>str_ptr</span> <span class='op'>=</span> <span class='id identifier rubyid_ptr'>ptr</span>.<span class='id identifier rubyid_read_pointer'>read_pointer</span>
  <span class='id identifier rubyid_str_ptr'>str_ptr</span>.<span class='id identifier rubyid_null?'>null?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_str_ptr'>str_ptr</span>.<span class='id identifier rubyid_read_string'>read_string</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_fail-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_fail</strong>(kms_context)  &#x21d2; <code>true</code>, <code>false</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Check whether the last failed request for the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> context may be retried.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms_context</span>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a>)</span>
&mdash;    <div class='inline'>
<p><a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> Context</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>, <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>whether the failed request may be retried.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1148-L1150'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1148' data-end='1150'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1148</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_fail'>kms_ctx_fail</span>(<span class='id identifier rubyid_kms_context'>kms_context</span>)
  <span class='id identifier rubyid_mongocrypt_kms_ctx_fail'><a href="#mongocrypt_kms_ctx_fail-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_fail (method)">mongocrypt_kms_ctx_fail</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_feed-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_feed</strong>(kms_context, bytes)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Feed replies from the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> back to libmongocrypt.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms_context</span>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a>)</span>
  </li>
  <li>
    <span class='name'>bytes</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The data to feed to libmongocrypt</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1083-L1089'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1083' data-end='1089'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1083</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_feed'>kms_ctx_feed</span>(<span class='id identifier rubyid_kms_context'>kms_context</span><span class='comma'>,</span> <span class='id identifier rubyid_bytes'>bytes</span>)
  <span class='id identifier rubyid_check_kms_ctx_status'><a href="#check_kms_ctx_status-class_method" title="Mongo::Crypt::Binding.check_kms_ctx_status (method)">check_kms_ctx_status</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>) <span class='kw'>do</span>
    <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_bytes'>bytes</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bytes_p'>bytes_p</span><span class='op'>|</span>
      <span class='id identifier rubyid_mongocrypt_kms_ctx_feed'><a href="#mongocrypt_kms_ctx_feed-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_feed (method)">mongocrypt_kms_ctx_feed</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_bytes_p'>bytes_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_get_kms_provider-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_get_kms_provider</strong>(kms_context)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider identifier associated with this <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request.</p>

<p>This is used to conditionally configure TLS connections based on the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request. It is useful for KMIP, which authenticates with a client certificate.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>Pointer mongocrypt_kms_ctx_t object.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L970-L989'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='970' data-end='989'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 970</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_get_kms_provider'>kms_ctx_get_kms_provider</span>(<span class='id identifier rubyid_kms_context'>kms_context</span>)
  <span class='id identifier rubyid_len_ptr'>len_ptr</span> <span class='op'>=</span> <span class='const'>FFI</span><span class='op'>::</span><span class='const'>MemoryPointer</span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_uint32'>uint32</span><span class='comma'>,</span> <span class='int'>1</span>)
  <span class='id identifier rubyid_provider'>provider</span> <span class='op'>=</span> <span class='id identifier rubyid_mongocrypt_kms_ctx_get_kms_provider'><a href="#mongocrypt_kms_ctx_get_kms_provider-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_get_kms_provider (method)">mongocrypt_kms_ctx_get_kms_provider</a></span>(
    <span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span>
    <span class='id identifier rubyid_len_ptr'>len_ptr</span>
  )
  <span class='kw'>if</span> <span class='id identifier rubyid_len_ptr'>len_ptr</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='const'>BSON</span><span class='op'>::</span><span class='const'>Environment</span>.<span class='id identifier rubyid_jruby?'>jruby?</span>
      <span class='comment'># JRuby FFI implementation does not have `read(type)` method, but it
</span>      <span class='comment'># has this `get_uint32`.
</span>      <span class='id identifier rubyid_len_ptr'>len_ptr</span>.<span class='id identifier rubyid_get_uint32'>get_uint32</span>
    <span class='kw'>else</span>
      <span class='comment'># For MRI we use a documented `read` method - https://www.rubydoc.info/github/ffi/ffi/FFI%2FPointer:read
</span>      <span class='id identifier rubyid_len_ptr'>len_ptr</span>.<span class='id identifier rubyid_read'>read</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_uint32'>uint32</span>)
    <span class='kw'>end</span>
    <span class='id identifier rubyid_provider'>provider</span>.<span class='id identifier rubyid_read_string'>read_string</span>(<span class='id identifier rubyid_len'>len</span>).<span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_message-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_message</strong>(kms_context)  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the HTTP message needed to fetch the AWS KMS master key from a <a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)"><code>KmsContext</code></a> object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms_context</span>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a>)</span>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The HTTP message</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1010-L1018'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1010' data-end='1018'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1010</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_message'>kms_ctx_message</span>(<span class='id identifier rubyid_kms_context'>kms_context</span>)
  <span class='id identifier rubyid_binary'>binary</span> <span class='op'>=</span> <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_new'><a href="Binary.html#new-class_method" title="Mongo::Crypt::Binary.new (method)">new</a></span>

  <span class='id identifier rubyid_check_kms_ctx_status'><a href="#check_kms_ctx_status-class_method" title="Mongo::Crypt::Binding.check_kms_ctx_status (method)">check_kms_ctx_status</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_kms_ctx_message'><a href="#mongocrypt_kms_ctx_message-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_message (method)">mongocrypt_kms_ctx_message</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_binary'>binary</span>.<span class='id identifier rubyid_ref'>ref</span>)
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_binary'>binary</span>.<span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_setopt_retry_kms-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_setopt_retry_kms</strong>(handle, value)  &#x21d2; <code>true</code>, <code>fale</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Enable or disable <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> retry behavior.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>value</span>
    <span class='type'>(<code>true</code>, <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>whether to retry operations.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>, <code>fale</code>)</span>
&mdash;    <div class='inline'>
<p>true is the option was set, otherwise false.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1167-L1169'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1167' data-end='1169'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1167</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_setopt_retry_kms'>kms_ctx_setopt_retry_kms</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
  <span class='id identifier rubyid_mongocrypt_setopt_retry_kms'><a href="#mongocrypt_setopt_retry_kms-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_retry_kms (method)">mongocrypt_setopt_retry_kms</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="kms_ctx_usleep-class_method">
  <h3 class='signature nodoc'>
    .<strong>kms_ctx_usleep</strong>(kms_context)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns number of milliseconds to sleep before sending <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request for the given <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> context.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms_context</span>
    <span class='type'>(<a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a>)</span>
&mdash;    <div class='inline'>
<p><a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> Context we are going to send <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request for.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>A 64-bit encoded number of microseconds to sleep.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1131-L1133'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1131' data-end='1133'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1131</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_kms_ctx_usleep'>kms_ctx_usleep</span>(<span class='id identifier rubyid_kms_context'>kms_context</span>)
  <span class='id identifier rubyid_mongocrypt_kms_ctx_usleep'><a href="#mongocrypt_kms_ctx_usleep-class_method" title="Mongo::Crypt::Binding.mongocrypt_kms_ctx_usleep (method)">mongocrypt_kms_ctx_usleep</a></span>(<span class='id identifier rubyid_kms_context'>kms_context</span>.<span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_binary_data-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_binary_data</strong>(binary)  &#x21d2; <code>FFI::Pointer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the pointer to the underlying data for the mongocrypt_binary_t.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>binary</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to the data array.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L171-L171'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='171' data-end='171'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 171</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_binary_data'>mongocrypt_binary_data</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_binary_destroy-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_binary_destroy</strong>(binary)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Destroy the mongocrypt_binary_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>binary</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L195-L195'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='195' data-end='195'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 195</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_binary_destroy'>mongocrypt_binary_destroy</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_binary_len-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_binary_len</strong>(binary)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the length of the underlying data array.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>binary</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The length of the data array.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L179-L179'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='179' data-end='179'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 179</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_binary_len'>mongocrypt_binary_len</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_binary_new-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_binary_new</strong>  &#x21d2; <code>FFI::Pointer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new mongocrypt_binary_t object (a non-owning view of a byte</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_array'>array</span>).</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to the newly-created mongocrypt_binary_t object.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L147-L147'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='147' data-end='147'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 147</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_binary_new'>mongocrypt_binary_new</span><span class='comma'>,</span> []<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_binary_new_from_data-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_binary_new_from_data</strong>(data, len)  &#x21d2; <code>FFI::Pointer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new mongocrypt_binary_t object that maintains a pointer to</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_specified'>specified</span> <span class='id identifier rubyid_byte'>byte</span> <span class='id identifier rubyid_array'>array</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>data</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to an array of bytes; the data is not copied and must outlive the mongocrypt_binary_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>len</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The length of the array argument.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to the newly-created mongocrypt_binary_t object.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L159-L163'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='159' data-end='163'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 159</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_binary_new_from_data'>mongocrypt_binary_new_from_data</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_crypt_shared_lib_version-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_crypt_shared_lib_version</strong>(crypt)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1592-L1596'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1592' data-end='1596'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1592</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_crypt_shared_lib_version'>mongocrypt_crypt_shared_lib_version</span><span class='comma'>,</span>
  [ <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span> ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_uint64'>uint64</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_datakey_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_datakey_init</strong>(ctx, filter)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L618-L618'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='618' data-end='618'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 618</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_datakey_init'>mongocrypt_ctx_datakey_init</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_decrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_decrypt_init</strong>(ctx, doc)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initializes the ctx for auto-decryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>doc</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the document to be decrypted as a BSON binary string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L778-L778'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='778' data-end='778'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 778</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_decrypt_init'>mongocrypt_ctx_decrypt_init</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_destroy-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_destroy</strong>(ctx)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Destroy the reference to the mongocrypt_ctx_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1228-L1228'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1228' data-end='1228'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1228</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_destroy'>mongocrypt_ctx_destroy</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_encrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_encrypt_init</strong>(ctx, db, db_len, cmd)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method expects the passed-in BSON to be in the format: { “v”: BSON value to decrypt }.</p>
</div>
  </div>


<p>Initializes the ctx for auto-encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>db</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The database name.</p>
</div>
  </li>
  <li>
    <span class='name'>db_len</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The length of the database name argument (or -1 for a null-terminated string).</p>
</div>
  </li>
  <li>
    <span class='name'>cmd</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the database command as a binary string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L678-L682'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='678' data-end='682'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 678</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_encrypt_init'>mongocrypt_ctx_encrypt_init</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_explicit_decrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_explicit_decrypt_init</strong>(ctx, msg)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initializes the ctx for explicit decryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>msg</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the message to be decrypted as a BSON binary string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L804-L808'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='804' data-end='808'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 804</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_explicit_decrypt_init'>mongocrypt_ctx_explicit_decrypt_init</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_explicit_encrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_explicit_encrypt_init</strong>(ctx, msg)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Before calling this method, set a key_id, key_alt_name (optional), and encryption algorithm using the following methods: mongocrypt_ctx_setopt_key_id, mongocrypt_ctx_setopt_key_alt_name, and mongocrypt_ctx_setopt_algorithm.</p>
</div>
  </div>


<p>Initializes the ctx for explicit expression encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>msg</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the message to be encrypted as a binary string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L714-L718'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='714' data-end='718'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 714</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_explicit_encrypt_init'>mongocrypt_ctx_explicit_encrypt_init</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_finalize-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_finalize</strong>(ctx, op_bson)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Perform the final encryption or decryption and return a BSON document.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>op_bson</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object that will have a reference to the final encrypted BSON document.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1201-L1201'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1201' data-end='1201'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1201</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_finalize'>mongocrypt_ctx_finalize</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_mongo_done-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_mongo_done</strong>(ctx)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Indicate to libmongocrypt that the driver is done feeding replies.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L913-L913'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='913' data-end='913'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 913</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_mongo_done'>mongocrypt_ctx_mongo_done</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_mongo_feed-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_mongo_feed</strong>(ctx, reply)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Feed a BSON reply to libmongocrypt.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>reply</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A mongocrypt_binary_t object that references the BSON reply to feed to libmongocrypt.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L889-L889'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='889' data-end='889'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 889</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_mongo_feed'>mongocrypt_ctx_mongo_feed</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_mongo_next_kms_ctx-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_mongo_next_kms_ctx</strong>(ctx)  &#x21d2; <code>FFI::Pointer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return a pointer to a mongocrypt_kms_ctx_t object or NULL.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_kms_ctx_t object.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L921-L921'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='921' data-end='921'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 921</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_next_kms_ctx'>mongocrypt_ctx_next_kms_ctx</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_mongo_op-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_mongo_op</strong>(ctx, op_bson)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get a BSON operation for the driver to run against the MongoDB</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_collection'>collection</span><span class='comma'>,</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_key'>key</span> <span class='id identifier rubyid_vault'>vault</span> <span class='id identifier rubyid_database'>database</span><span class='comma'>,</span> <span class='kw'>or</span> <span class='id identifier rubyid_mongocryptd'>mongocryptd</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>op_bson</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object that will have a reference to the BSON operation written to it by libmongocrypt.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L857-L857'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='857' data-end='857'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 857</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_mongo_op'>mongocrypt_ctx_mongo_op</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_new-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_new</strong>(crypt)  &#x21d2; <code>FFI::Pointer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new mongocrypt_ctx_t object (a wrapper for the libmongocrypt</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_state'>state</span> <span class='id identifier rubyid_machine'>machine</span>).</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A new mongocrypt_ctx_t object.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L438-L438'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='438' data-end='438'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 438</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_new'>mongocrypt_ctx_new</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_provide_kms_providers-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_provide_kms_providers</strong>(ctx, kms_providers)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1670-L1674'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1670' data-end='1674'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1670</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_provide_kms_providers'>mongocrypt_ctx_provide_kms_providers</span><span class='comma'>,</span>
  [ <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span> ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_algorithm-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_algorithm</strong>(ctx, algorithm, len)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>Set the algorithm used for explicit encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>algorithm</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The algorithm name. Valid values are:</p>
<ul><li>
<p>“AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic”</p>
</li><li>
<p>“AEAD_AES_256_CBC_HMAC_SHA_512-Random”</p>
</li></ul>
</div>
  </li>
  <li>
    <span class='name'>len</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The length of the algorithm string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the option was successfully set.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L555-L559'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='555' data-end='559'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 555</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_algorithm'>mongocrypt_ctx_setopt_algorithm</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_algorithm_range-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_algorithm_range</strong>(ctx, opts)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1776-L1783'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1776' data-end='1783'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1776</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_algorithm_range'>mongocrypt_ctx_setopt_algorithm_range</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_contention_factor-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_contention_factor</strong>(ctx, contention_factor)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1741-L1748'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1741' data-end='1748'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1741</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_contention_factor'>mongocrypt_ctx_setopt_contention_factor</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_int64'>int64</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_key_alt_name-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_key_alt_name</strong>(ctx, binary)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>When creating a data key, set an alternate name on that key. When</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_performing'>performing</span> <span class='id identifier rubyid_explicit'>explicit</span> <span class='id identifier rubyid_encryption'>encryption</span><span class='comma'>,</span> <span class='id identifier rubyid_specifying'>specifying</span> <span class='id identifier rubyid_which'>which</span> <span class='id identifier rubyid_data'>data</span> <span class='id identifier rubyid_key'>key</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_use'>use</span> <span class='kw'>for</span>
<span class='id identifier rubyid_encryption'>encryption</span> <span class='id identifier rubyid_based'>based</span> <span class='id identifier rubyid_on'>on</span> <span class='id identifier rubyid_its'>its</span> <span class='id identifier rubyid_keyAltName'>keyAltName</span> <span class='id identifier rubyid_field'>field</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>binary</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references a BSON document in the format { “keyAltName”: &lt;BSON UTF8 value&gt; }.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the alternative name was successfully set.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L487-L491'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='487' data-end='491'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 487</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_key_alt_name'>mongocrypt_ctx_setopt_key_alt_name</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_key_encryption_key-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_key_encryption_key</strong>(ctx)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>Set key encryption key document for creating a data key.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>bin</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references a BSON document representing the key encryption key document with an additional “provider” field.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the option was successfully set.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L585-L589'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='585' data-end='589'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 585</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_key_encryption_key'>mongocrypt_ctx_setopt_key_encryption_key</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_key_id-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_key_id</strong>(ctx, key_id)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>Set the key id used for explicit encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>key_id</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 16-byte key-id.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the option was successfully set.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L459-L459'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='459' data-end='459'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 459</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_key_id'>mongocrypt_ctx_setopt_key_id</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_key_material-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_key_material</strong>(ctx, binary)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>When creating a data key, set a custom key material to use for</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_encrypting'>encrypting</span> <span class='id identifier rubyid_data'>data</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>binary</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the data encryption key to use.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the custom key material was successfully set.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L522-L526'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='522' data-end='526'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 522</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_key_material'>mongocrypt_ctx_setopt_key_material</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_setopt_query_type-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_setopt_query_type</strong>(ctx, mongocrypt_query_type)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1708-L1716'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1708' data-end='1716'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1708</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_setopt_query_type'>mongocrypt_ctx_setopt_query_type</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_state-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_state</strong>(ctx)  &#x21d2; <a href="../../Symbol.html" title="Symbol (class)">Symbol</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the current state of the ctx.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The current state, will be one of the values defined by the mongocrypt_ctx_state enum.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L845-L845'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='845' data-end='845'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 845</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_state'>mongocrypt_ctx_state</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_state'>mongocrypt_ctx_state</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_ctx_status-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_ctx_status</strong>(ctx, status)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the status information from the mongocrypt_ctx_t object on the</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_mongocrypt_status_t'>mongocrypt_status_t</span> <span class='id identifier rubyid_object'>object</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the status was successfully set.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L448-L448'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='448' data-end='448'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 448</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_status'>mongocrypt_ctx_status</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_destroy-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_destroy</strong>(crypt)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Destroy the reference the mongocrypt_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L429-L429'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='429' data-end='429'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 429</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_destroy'>mongocrypt_destroy</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_init-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_init</strong>(crypt)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Initialize the mongocrypt_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Returns whether the crypt was initialized successfully.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L400-L400'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='400' data-end='400'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 400</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_init'>mongocrypt_init</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_bytes_needed-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_bytes_needed</strong>(kms)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the number of bytes needed by the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> context.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>The mongocrypt_kms_ctx_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of bytes needed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1056-L1056'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1056' data-end='1056'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1056</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_bytes_needed'>mongocrypt_kms_ctx_bytes_needed</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_done-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_done</strong>(ctx)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Indicate to libmongocrypt that it will receive no more replies from</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_mongocrypt_kms_ctx_t'>mongocrypt_kms_ctx_t</span> <span class='id identifier rubyid_objects'>objects</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1179-L1179'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1179' data-end='1179'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1179</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_ctx_kms_done'>mongocrypt_ctx_kms_done</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_endpoint-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_endpoint</strong>(kms, endpoint)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the hostname with which to connect over TLS to get information about</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_the'>the</span> <span class='const'>AWS</span> <span class='id identifier rubyid_master'>master</span> <span class='id identifier rubyid_key'>key</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_kms_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>endpoint</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) A pointer to which the endpoint string will be written by libmongocrypt.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1029-L1029'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1029' data-end='1029'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1029</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_endpoint'>mongocrypt_kms_ctx_endpoint</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_fail-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_fail</strong>(ctx)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1142-L1142'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1142' data-end='1142'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1142</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_fail'>mongocrypt_kms_ctx_fail</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_feed-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_feed</strong>(kms, bytes)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Feed replies from the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> back to libmongocrypt.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to the mongocrypt_kms_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>bytes</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the response from the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a>.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1075-L1075'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1075' data-end='1075'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1075</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_feed'>mongocrypt_kms_ctx_feed</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_get_kms_provider-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_get_kms_provider</strong>(crypt, kms_providers)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L955-L959'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='955' data-end='959'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 955</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_get_kms_provider'>mongocrypt_kms_ctx_get_kms_provider</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_message-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_message</strong>(kms, msg)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the message needed to fetch the AWS KMS master key.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>Pointer to the mongocrypt_kms_ctx_t object</p>
</div>
  </li>
  <li>
    <span class='name'>msg</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(outparam) Pointer to a mongocrypt_binary_t object that will have the location of the message written to it by libmongocrypt.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the operation is successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1000-L1000'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1000' data-end='1000'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1000</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_message'>mongocrypt_kms_ctx_message</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_status-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_status</strong>(kms, status)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Write status information about the mongocrypt_kms_ctx_t object</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_mongocrypt_status_t'>mongocrypt_status_t</span> <span class='id identifier rubyid_object'>object</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>kms</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to the mongocrypt_kms_ctx_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1099-L1099'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1099' data-end='1099'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1099</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_status'>mongocrypt_kms_ctx_status</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_kms_ctx_usleep-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_kms_ctx_usleep</strong>(ctx)  &#x21d2; <code>int64</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Indicates how long to sleep before sending <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> request.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>int64</code>)</span>
&mdash;    <div class='inline'>
<p>A 64-bit encoded number of microseconds of how long to sleep.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1123-L1123'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1123' data-end='1123'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1123</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_kms_ctx_usleep'>mongocrypt_kms_ctx_usleep</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int64'>int64</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_aes_256_ctr-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_aes_256_ctr</strong>(crypt, aes_256_ctr_encrypt, aes_256_ctr_decrypt, ctx)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set a crypto hook for the AES256-CTR operations.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>aes_enc_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>An AES-CTR encryption method.</p>
</div>
  </li>
  <li>
    <span class='name'>aes_dec_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>An AES-CTR decryption method.</p>
</div>
  </li>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether setting this option succeeded.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1487-L1496'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1487' data-end='1496'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1487</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_aes_256_ctr'>mongocrypt_setopt_aes_256_ctr</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_crypto_fn'><a href="#mongocrypt_crypto_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_crypto_fn (method)">mongocrypt_crypto_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_crypto_fn'><a href="#mongocrypt_crypto_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_crypto_fn (method)">mongocrypt_crypto_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_append_crypt_shared_lib_search_path-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_append_crypt_shared_lib_search_path</strong>(crypt, path)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1525-L1532'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1525' data-end='1532'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1525</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_append_crypt_shared_lib_search_path'>mongocrypt_setopt_append_crypt_shared_lib_search_path</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_bypass_query_analysis-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_bypass_query_analysis</strong>(crypt)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1463-L1463'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1463' data-end='1463'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1463</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_bypass_query_analysis'>mongocrypt_setopt_bypass_query_analysis</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5</strong>(crypt, sign_rsaes_pkcs1_v1_5, ctx = nil)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set a crypto hook for the RSASSA-PKCS1-v1_5 algorithm with a SHA-256 hash.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>sign_rsaes_pkcs1_v1_5</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>A RSASSA-PKCS1-v1_5 signing method.</p>
</div>
  </li>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether setting this option succeeded.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1380-L1388'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1380' data-end='1388'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1380</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5'>mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_hmac_fn'><a href="#mongocrypt_hmac_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_hmac_fn (method)">mongocrypt_hmac_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_crypto_hooks-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_crypto_hooks</strong>(crypt, aes_enc_fn, aes_dec_fn, random_fn, sha_512_fn, sha_256_fn, hash_fn, ctx = nil)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set crypto hooks on the provided mongocrypt object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>aes_enc_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>An AES encryption method.</p>
</div>
  </li>
  <li>
    <span class='name'>aes_dec_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>An AES decryption method.</p>
</div>
  </li>
  <li>
    <span class='name'>random_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>A random method.</p>
</div>
  </li>
  <li>
    <span class='name'>sha_512_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>A HMAC SHA-512 method.</p>
</div>
  </li>
  <li>
    <span class='name'>sha_256_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>A HMAC SHA-256 method.</p>
</div>
  </li>
  <li>
    <span class='name'>hash_fn</span>
    <span class='type'>(<code>Proc</code>)</span>
&mdash;    <div class='inline'>
<p>A SHA-256 hash method.</p>
</div>
  </li>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether setting this option succeeded.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1333-L1346'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1333' data-end='1346'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1333</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_crypto_hooks'>mongocrypt_setopt_crypto_hooks</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_crypto_fn'><a href="#mongocrypt_crypto_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_crypto_fn (method)">mongocrypt_crypto_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_crypto_fn'><a href="#mongocrypt_crypto_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_crypto_fn (method)">mongocrypt_crypto_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_random_fn'><a href="#mongocrypt_random_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_random_fn (method)">mongocrypt_random_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_hmac_fn'><a href="#mongocrypt_hmac_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_hmac_fn (method)">mongocrypt_hmac_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_hmac_fn'><a href="#mongocrypt_hmac_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_hmac_fn (method)">mongocrypt_hmac_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_hash_fn'><a href="#mongocrypt_hash_fn-instance_method" title="Mongo::Crypt::Binding#mongocrypt_hash_fn (method)">mongocrypt_hash_fn</a></span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_encrypted_field_config_map-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_encrypted_field_config_map</strong>(crypt, efc_map)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1422-L1429'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1422' data-end='1429'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1422</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_encrypted_field_config_map'>mongocrypt_setopt_encrypted_field_config_map</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_kms_providers-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_kms_providers</strong>(crypt, kms_providers)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>Configure KMS providers with a BSON document.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>kms_providers</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references a BSON document mapping the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider names to credentials.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L344-L348'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='344' data-end='348'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 344</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_kms_providers'>mongocrypt_setopt_kms_providers</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_log_handler-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_log_handler</strong>(crypt, log_fn, log_ctx = nil)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the handler on the mongocrypt_t object to be called every time</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_libmongocrypt'>libmongocrypt</span> <span class='id identifier rubyid_logs'>logs</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_message'>message</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>log_fn</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A logging callback method.</p>
</div>
  </li>
  <li>
    <span class='name'>log_ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>An optional pointer to a context to be passed into the log callback on every invocation.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether setting the callback was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L315-L319'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='315' data-end='319'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 315</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_log_handler'>mongocrypt_setopt_log_handler</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_log_fn_t'><a href="#mongocrypt_log_fn_t-instance_method" title="Mongo::Crypt::Binding#mongocrypt_log_fn_t (method)">mongocrypt_log_fn_t</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_retry_kms-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_retry_kms</strong>(crypt, enable)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1160-L1160'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1160' data-end='1160'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1160</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_retry_kms'>mongocrypt_setopt_retry_kms</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_schema_map-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_schema_map</strong>(crypt, schema_map)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets a local schema map for encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>schema_map</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t. object that references the schema map as a BSON binary string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Returns whether the option was set successfully.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L375-L375'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='375' data-end='375'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 375</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_schema_map'>mongocrypt_setopt_schema_map</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_set_crypt_shared_lib_path_override-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_set_crypt_shared_lib_path_override</strong>(crypt, path)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1554-L1561'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1554' data-end='1561'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1554</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_set_crypt_shared_lib_path_override'>mongocrypt_setopt_set_crypt_shared_lib_path_override</span><span class='comma'>,</span>
  [
    <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span>
    <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span>
  ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_setopt_use_need_kms_credentials_state-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_setopt_use_need_kms_credentials_state</strong>(crypt)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1633-L1637'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1633' data-end='1637'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1633</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_setopt_use_need_kms_credentials_state'>mongocrypt_setopt_use_need_kms_credentials_state</span><span class='comma'>,</span>
  [ <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span> ]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status</strong>(crypt, status)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the status information from the mongocrypt_t object on the</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_mongocrypt_status_t'>mongocrypt_status_t</span> <span class='id identifier rubyid_object'>object</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>crypt</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
  </li>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the status was successfully set.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L421-L421'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='421' data-end='421'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 421</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status'>mongocrypt_status</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status_code-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status_code</strong>(status)  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the status error code.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The status code.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L243-L243'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='243' data-end='243'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 243</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status_code'>mongocrypt_status_code</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status_destroy-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status_destroy</strong>(status)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Destroys the reference to the mongocrypt_status_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L269-L269'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='269' data-end='269'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 269</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status_destroy'>mongocrypt_status_destroy</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status_message-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status_message</strong>(status, len = nil)  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the status message.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
  </li>
  <li>
    <span class='name'>len</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>(out param) An optional pointer to a uint32, where the length of the retun string will be written.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The status message.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L253-L253'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='253' data-end='253'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 253</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status_message'>mongocrypt_status_message</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status_new-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status_new</strong>  &#x21d2; <code>FFI::Pointer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new mongocrypt_status_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to the new mongocrypt_status_ts.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L209-L209'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='209' data-end='209'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 209</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status_new'>mongocrypt_status_new</span><span class='comma'>,</span> []<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status_ok-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status_ok</strong>(status)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether the status is ok or an error.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>Whether the status is ok.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L261-L261'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='261' data-end='261'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 261</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status_ok'>mongocrypt_status_ok</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status_set-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status_set</strong>(status, type, code, message, len)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set a message, type, and code on an existing status.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
  </li>
  <li>
    <span class='name'>type</span>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The status type; possible values are defined by the status_type enum.</p>
</div>
  </li>
  <li>
    <span class='name'>code</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The status code.</p>
</div>
  </li>
  <li>
    <span class='name'>message</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The status message.</p>
</div>
  </li>
  <li>
    <span class='name'>len</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The length of the message argument (or -1 for a null-terminated string).</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L223-L227'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='223' data-end='227'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 223</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status_set'>mongocrypt_status_set</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_status_type'>status_type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_status_type-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_status_type</strong>(status)  &#x21d2; <a href="../../Symbol.html" title="Symbol (class)">Symbol</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Indicates the status type.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The status type (as defined by the status_type enum).</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L235-L235'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='235' data-end='235'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 235</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_status_type'>mongocrypt_status_type</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_status_type'>status_type</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_version-class_method">
  <h3 class='signature nodoc'>
    .<strong>mongocrypt_version</strong>(len)  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the version string of the libmongocrypt library.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>len</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) An optional pointer to a uint8 that will reference the length of the returned string.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>A version string for libmongocrypt.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L95-L95'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='95' data-end='95'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 95</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_version'>mongocrypt_version</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ongocrypt_new-class_method">
  <h3 class='signature nodoc'>
    .<strong>ongocrypt_new</strong>  &#x21d2; <code>FFI::Pointer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new mongocrypt_t object.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a new mongocrypt_t object.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L303-L303'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='303' data-end='303'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 303</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_new'>mongocrypt_new</span><span class='comma'>,</span> []<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_version-class_method">
  <h3 class='signature nodoc'>
    .<strong>parse_version</strong>(version)  &#x21d2; <code>Gem::Version</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Given a string representing a version number, parses it into a Gem::Version object. This handles the case where the string is not in a format supported by Gem::Version by doing some custom parsing.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>version</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>String representing a version number.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Gem::Version</code>)</span>
&mdash;    <div class='inline'>
<p>the version number</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
&mdash;    <div class='inline'>
<p>if the string cannot be parsed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L108-L121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='108' data-end='121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 108</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_parse_version'>parse_version</span>(<span class='id identifier rubyid_version'>version</span>)
  <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Version</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_version'>version</span>)
<span class='kw'>rescue</span> <span class='const'>ArgumentError</span>
  <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_version'>version</span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?&lt;major&gt;\d+)\.(?&lt;minor&gt;\d+)\.(?&lt;patch&gt;\d+)?(-[A-Za-z\+\d]+)?\z</span><span class='regexp_end'>/</span></span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Malformed version number string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Version</span>.<span class='id identifier rubyid_new'>new</span>(
    [
      <span class='id identifier rubyid_match'>match</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_major'>major</span>]<span class='comma'>,</span>
      <span class='id identifier rubyid_match'>match</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_minor'>minor</span>]<span class='comma'>,</span>
      <span class='id identifier rubyid_match'>match</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_patch'>patch</span>]
    ].<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>)
  )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_aes_256_ctr-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_aes_256_ctr</strong>(handle, aes_ctr_encrypt_cb, aes_ctr_decrypt_cb)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set a crypto hook for the AES256-CTR operations.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>aes_encrypt_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>An AES-CTR encryption method</p>
</div>
  </li>
  <li>
    <span class='name'>aes_decrypt_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A AES-CTR decryption method</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the callbacks aren’t set successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1505-L1511'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1505' data-end='1511'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1505</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_aes_256_ctr'>setopt_aes_256_ctr</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_aes_ctr_encrypt_cb'>aes_ctr_encrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_aes_ctr_decrypt_cb'>aes_ctr_decrypt_cb</span>)
  <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_aes_256_ctr'><a href="#mongocrypt_setopt_aes_256_ctr-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_aes_256_ctr (method)">mongocrypt_setopt_aes_256_ctr</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span>
      <span class='id identifier rubyid_aes_ctr_encrypt_cb'>aes_ctr_encrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_aes_ctr_decrypt_cb'>aes_ctr_decrypt_cb</span><span class='comma'>,</span> <span class='kw'>nil</span>
    )
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_append_crypt_shared_lib_search_path-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_append_crypt_shared_lib_search_path</strong>(handle, path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Append an additional search directory to the search path for loading</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_crypt_shared'>crypt_shared</span> <span class='id identifier rubyid_dynamic'>dynamic</span> <span class='id identifier rubyid_library'>library</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>path</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>A search path for the crypt shared library.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1539-L1543'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1539' data-end='1543'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1539</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_append_crypt_shared_lib_search_path'>setopt_append_crypt_shared_lib_search_path</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>)
  <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_append_crypt_shared_lib_search_path'><a href="#mongocrypt_setopt_append_crypt_shared_lib_search_path-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_append_crypt_shared_lib_search_path (method)">mongocrypt_setopt_append_crypt_shared_lib_search_path</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_bypass_query_analysis-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_bypass_query_analysis</strong>(handle)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opt-into skipping query analysis.</p>

<p>If opted in:</p>
<ul><li>
<p>The csfle shared library will not attempt to be loaded.</p>
</li><li>
<p>A mongocrypt_ctx_t will never enter the MONGOCRYPT_CTX_NEED_MARKINGS state.</p>
</li></ul>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1472-L1474'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1472' data-end='1474'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1472</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_bypass_query_analysis'>setopt_bypass_query_analysis</span>(<span class='id identifier rubyid_handle'>handle</span>)
  <span class='id identifier rubyid_mongocrypt_setopt_bypass_query_analysis'><a href="#mongocrypt_setopt_bypass_query_analysis-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_bypass_query_analysis (method)">mongocrypt_setopt_bypass_query_analysis</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_crypto_hook_sign_rsaes_pkcs1_v1_5-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_crypto_hook_sign_rsaes_pkcs1_v1_5</strong>(handle, rsaes_pkcs_signature_cb)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set a crypto hook for the RSASSA-PKCS1-v1_5 algorithm with</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='const'>SHA</span><span class='op'>-</span><span class='int'>256</span> <span class='id identifier rubyid_hash'>hash</span> <span class='id identifier rubyid_oh'>oh</span> <span class='id identifier rubyid_the'>the</span> <span class='const'><a href="Handle.html" title="Mongo::Crypt::Handle (class)">Handle</a></span>.</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>rsaes_pkcs_signature_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A RSASSA-PKCS1-v1_5 signing method.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the callbacks aren’t set successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1397-L1408'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1397' data-end='1408'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1397</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5'>setopt_crypto_hook_sign_rsaes_pkcs1_v1_5</span>(
  <span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span>
  <span class='id identifier rubyid_rsaes_pkcs_signature_cb'>rsaes_pkcs_signature_cb</span>
)
  <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5'><a href="#mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5 (method)">mongocrypt_setopt_crypto_hook_sign_rsaes_pkcs1_v1_5</a></span>(
      <span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span>
      <span class='id identifier rubyid_rsaes_pkcs_signature_cb'>rsaes_pkcs_signature_cb</span><span class='comma'>,</span>
      <span class='kw'>nil</span>
    )
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_crypto_hooks-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_crypto_hooks</strong>(handle, aes_encrypt_cb, aes_decrypt_cb, random_cb, hmac_sha_512_cb, hmac_sha_256_cb, hmac_hash_cb)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set crypto callbacks on the <a href="Handle.html" title="Mongo::Crypt::Handle (class)"><code>Handle</code></a></p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>aes_encrypt_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>An AES encryption method</p>
</div>
  </li>
  <li>
    <span class='name'>aes_decrypt_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A AES decryption method</p>
</div>
  </li>
  <li>
    <span class='name'>random_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A method that returns a string of random bytes</p>
</div>
  </li>
  <li>
    <span class='name'>hmac_sha_512_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A HMAC SHA-512 method</p>
</div>
  </li>
  <li>
    <span class='name'>hmac_sha_256_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A HMAC SHA-256 method</p>
</div>
  </li>
  <li>
    <span class='name'>hmac_hash_cb</span>
    <span class='type'>(<code>Method</code>)</span>
&mdash;    <div class='inline'>
<p>A SHA-256 hash method</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the callbacks aren’t set successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1359-L1369'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1359' data-end='1369'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1359</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_crypto_hooks'>setopt_crypto_hooks</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span>
  <span class='id identifier rubyid_aes_encrypt_cb'>aes_encrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_aes_decrypt_cb'>aes_decrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_random_cb'>random_cb</span><span class='comma'>,</span>
  <span class='id identifier rubyid_hmac_sha_512_cb'>hmac_sha_512_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_sha_256_cb'>hmac_sha_256_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_hash_cb'>hmac_hash_cb</span>
)
  <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_crypto_hooks'><a href="#mongocrypt_setopt_crypto_hooks-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_crypto_hooks (method)">mongocrypt_setopt_crypto_hooks</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span>
      <span class='id identifier rubyid_aes_encrypt_cb'>aes_encrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_aes_decrypt_cb'>aes_decrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_random_cb'>random_cb</span><span class='comma'>,</span>
      <span class='id identifier rubyid_hmac_sha_512_cb'>hmac_sha_512_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_sha_256_cb'>hmac_sha_256_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_hash_cb'>hmac_hash_cb</span><span class='comma'>,</span> <span class='kw'>nil</span>
    )
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_encrypted_field_config_map-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_encrypted_field_config_map</strong>(handle, efc_map)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set a local EncryptedFieldConfigMap for encryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>efc_map</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>A BSON document representing the EncryptedFieldConfigMap supplied by the user. The keys are collection namespaces and values are EncryptedFieldConfigMap documents.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the operation failed.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1440-L1451'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1440' data-end='1451'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1440</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_encrypted_field_config_map'>setopt_encrypted_field_config_map</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_efc_map'>efc_map</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_efc_map'>efc_map</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_efc_map'>efc_map</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_setopt_encrypted_field_config_map'><a href="#mongocrypt_setopt_encrypted_field_config_map-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_encrypted_field_config_map (method)">mongocrypt_setopt_encrypted_field_config_map</a></span>(
        <span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span>
        <span class='id identifier rubyid_data_p'>data_p</span>
      )
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_kms_providers-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_kms_providers</strong>(handle, kms_providers)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set KMS providers options on the Mongo::Crypt::Handle object</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>kms_providers</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>BSON document mapping the <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider names to credentials.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the option is not set successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L357-L365'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='357' data-end='365'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 357</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_kms_providers'>setopt_kms_providers</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_kms_providers'>kms_providers</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_kms_providers'>kms_providers</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_kms_providers'>kms_providers</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_setopt_kms_providers'><a href="#mongocrypt_setopt_kms_providers-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_kms_providers (method)">mongocrypt_setopt_kms_providers</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_log_handler-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_log_handler</strong>(handle, log_callback)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the logger callback function on the Mongo::Crypt::Handle object</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>log_callback</span>
    <span class='type'>(<code>Method</code>)</span>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the callback is not set successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L327-L331'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='327' data-end='331'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 327</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_log_handler'>setopt_log_handler</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_log_callback'>log_callback</span>)
  <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_log_handler'><a href="#mongocrypt_setopt_log_handler-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_log_handler (method)">mongocrypt_setopt_log_handler</a></span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_log_callback'>log_callback</span><span class='comma'>,</span> <span class='kw'>nil</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_schema_map-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_schema_map</strong>(handle, schema_map_doc)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set schema map on the Mongo::Crypt::Handle object</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>schema_map_doc</span>
    <span class='type'>(<code>BSON::Document</code>)</span>
&mdash;    <div class='inline'>
<p>The schema map as a BSON::Document object</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the schema map is not set successfully</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L384-L392'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='384' data-end='392'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 384</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_schema_map'>setopt_schema_map</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_schema_map_doc'>schema_map_doc</span>)
  <span class='id identifier rubyid_validate_document'><a href="#validate_document-class_method" title="Mongo::Crypt::Binding.validate_document (method)">validate_document</a></span>(<span class='id identifier rubyid_schema_map_doc'>schema_map_doc</span>)
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_schema_map_doc'>schema_map_doc</span>.<span class='id identifier rubyid_to_bson'>to_bson</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span>.<span class='id identifier rubyid_wrap_string'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span>(<span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_setopt_schema_map'><a href="#mongocrypt_setopt_schema_map-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_schema_map (method)">mongocrypt_setopt_schema_map</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_set_crypt_shared_lib_path_override-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_set_crypt_shared_lib_path_override</strong>(handle, path)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set a single override path for loading the crypt shared library.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
  <li>
    <span class='name'>path</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>A path to crypt shared library file.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1567-L1571'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1567' data-end='1571'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1567</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_set_crypt_shared_lib_path_override'>setopt_set_crypt_shared_lib_path_override</span>(<span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>)
  <span class='id identifier rubyid_check_status'><a href="#check_status-class_method" title="Mongo::Crypt::Binding.check_status (method)">check_status</a></span>(<span class='id identifier rubyid_handle'>handle</span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_set_crypt_shared_lib_path_override'><a href="#mongocrypt_setopt_set_crypt_shared_lib_path_override-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_set_crypt_shared_lib_path_override (method)">mongocrypt_setopt_set_crypt_shared_lib_path_override</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setopt_use_need_kms_credentials_state-class_method">
  <h3 class='signature nodoc'>
    .<strong>setopt_use_need_kms_credentials_state</strong>(handle)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opt-into handling the MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS state.</p>

<p>If set, before entering the MONGOCRYPT_CTX_NEED_KMS state, contexts may enter the MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS state and then wait for credentials to be supplied through <a href="#mongocrypt_ctx_provide_kms_providers-class_method" title="Mongo::Crypt::Binding.mongocrypt_ctx_provide_kms_providers (method)">.mongocrypt_ctx_provide_kms_providers</a>.</p>

<p>A context will only enter MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS if an empty document was set for a <a href="KMS.html" title="Mongo::Crypt::KMS (module)"><code>KMS</code></a> provider in <a href="#mongocrypt_setopt_kms_providers-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_kms_providers (method)">.mongocrypt_setopt_kms_providers</a>.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>handle</span>
    <span class='type'>(<a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1651-L1653'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1651' data-end='1653'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1651</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_setopt_use_need_kms_credentials_state'>setopt_use_need_kms_credentials_state</span>(<span class='id identifier rubyid_handle'>handle</span>)
  <span class='id identifier rubyid_mongocrypt_setopt_use_need_kms_credentials_state'><a href="#mongocrypt_setopt_use_need_kms_credentials_state-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_use_need_kms_credentials_state (method)">mongocrypt_setopt_use_need_kms_credentials_state</a></span>(<span class='id identifier rubyid_handle'>handle</span>.<span class='id identifier rubyid_ref'>ref</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_document-class_method">
  <h3 class='signature nodoc'>
    .<strong>validate_document</strong>(data)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>All BSON::Document instances are also Hash instances</p>
</div>
  </div>


<p>Checks that the specified data is a Hash before serializing it to BSON to prevent errors from libmongocrypt</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>data</span>
    <span class='type'>(<code>Object</code>)</span>
&mdash;    <div class='inline'>
<p>The data to be passed to libmongocrypt</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a>)</span>
&mdash;    <div class='inline'>
<p>If the data is not a Hash</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1844-L1856'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1844' data-end='1856'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1844</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_validate_document'>validate_document</span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Hash</span>)

  <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Attempted to pass nil data to libmongocrypt. </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Data must be a Hash</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Attempted to pass invalid data to libmongocrypt: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Data must be a Hash</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Error.html" title="Mongo::Error (class)">Error</a></span><span class='op'>::</span><span class='const'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">CryptError</a></span>.<span class='id identifier rubyid_new'><a href="../Error/CryptError.html#new-class_method" title="Mongo::Error::CryptError.new (method)">new</a></span>(<span class='id identifier rubyid_message'>message</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_version-class_method">
  <h3 class='signature nodoc'>
    .<strong>validate_version</strong>(lmc_version)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Validates if provided version of libmongocrypt is valid, i.e. equal or greater than minimum required version. Raises a LoadError if not.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>lmc_version</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>String representing libmongocrypt version.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>LoadError</code>)</span>
&mdash;    <div class='inline'>
<p>if given version is lesser than minimum required version.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L131-L136'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='131' data-end='136'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 131</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_validate_version'>validate_version</span>(<span class='id identifier rubyid_lmc_version'>lmc_version</span>)
  <span class='kw'>if</span> (<span class='id identifier rubyid_actual_version'>actual_version</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_version'><a href="#parse_version-class_method" title="Mongo::Crypt::Binding.parse_version (method)">parse_version</a></span>(<span class='id identifier rubyid_lmc_version'>lmc_version</span>)) <span class='op'>&lt;</span> <span class='const'><a href="#MIN_LIBMONGOCRYPT_VERSION-constant" title="Mongo::Crypt::Binding::MIN_LIBMONGOCRYPT_VERSION (constant)">MIN_LIBMONGOCRYPT_VERSION</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>LoadError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>libmongocrypt version </span><span class='embexpr_beg'>#{</span><span class='const'><a href="#MIN_LIBMONGOCRYPT_VERSION-constant" title="Mongo::Crypt::Binding::MIN_LIBMONGOCRYPT_VERSION (constant)">MIN_LIBMONGOCRYPT_VERSION</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> or above is required, </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>but version </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_actual_version'>actual_version</span><span class='embexpr_end'>}</span><span class='tstring_content'> was found.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="mongocrypt_crypto_fn-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>mongocrypt_crypto_fn</strong>(ctx, key, iv, input, output, status)  &#x21d2; <code>Bool</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the <code>Binding</code> class.</p>
</div>
  </div>


<p>A callback to a function that performs AES encryption or decryption.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
  </li>
  <li>
    <span class='name'>key</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 32-byte AES encryption key.</p>
</div>
  </li>
  <li>
    <span class='name'>iv</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 16-byte AES IV.</p>
</div>
  </li>
  <li>
    <span class='name'>input</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the value to be encrypted/decrypted.</p>
</div>
  </li>
  <li>
    <span class='name'>output</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the encrypted/ decrypted value written to it by libmongocrypt.</p>
</div>
  </li>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Bool</code>)</span>
&mdash;    <div class='inline'>
<p>Whether encryption/decryption was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1251-L1255'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1251' data-end='1255'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1251</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_callback'>callback</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_crypto_fn'>mongocrypt_crypto_fn</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_hash_fn-instance_method">
  <h3 class='signature nodoc'>
    #<strong>mongocrypt_hash_fn</strong>(ctx, input, output, status)  &#x21d2; <code>Bool</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the <code>Binding</code> class.</p>
</div>
  </div>


<p>A callback to a SHA-256 hash function.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
  </li>
  <li>
    <span class='name'>input</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the value to be hashed.</p>
</div>
  </li>
  <li>
    <span class='name'>output</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the output value written to it by libmongocrypt.</p>
</div>
  </li>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Bool</code>)</span>
&mdash;    <div class='inline'>
<p>Whether hashing was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1299-L1299'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1299' data-end='1299'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1299</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_callback'>callback</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_hash_fn'>mongocrypt_hash_fn</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_hmac_fn-instance_method">
  <h3 class='signature nodoc'>
    #<strong>mongocrypt_hmac_fn</strong>(ctx, key, input, output, status)  &#x21d2; <code>Bool</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the <code>Binding</code> class.</p>
</div>
  </div>


<p>A callback to a function that performs HMAC SHA-512 or SHA-256.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
  </li>
  <li>
    <span class='name'>key</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 32-byte HMAC SHA encryption key.</p>
</div>
  </li>
  <li>
    <span class='name'>input</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the input value.</p>
</div>
  </li>
  <li>
    <span class='name'>output</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the output value written to it by libmongocrypt.</p>
</div>
  </li>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Bool</code>)</span>
&mdash;    <div class='inline'>
<p>Whether HMAC-SHA was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1276-L1280'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1276' data-end='1280'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1276</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_callback'>callback</span>(
  <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_hmac_fn'>mongocrypt_hmac_fn</span><span class='comma'>,</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
)
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_log_fn_t-instance_method">
  <h3 class='signature nodoc'>
    #<strong>mongocrypt_log_fn_t</strong>(level, message, len, ctx)  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the <code>Binding</code> class.</p>
</div>
  </div>


<p>A callback to the mongocrypt log function. Set a custom log callback</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_mongocrypt_setopt_log_handler'><a href="#mongocrypt_setopt_log_handler-class_method" title="Mongo::Crypt::Binding.mongocrypt_setopt_log_handler (method)">mongocrypt_setopt_log_handler</a></span> <span class='id identifier rubyid_method'>method</span></code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>level</span>
    <span class='type'>(<a href="../../Symbol.html" title="Symbol (class)">Symbol</a>)</span>
&mdash;    <div class='inline'>
<p>The log level; possible values defined by the log_level enum</p>
</div>
  </li>
  <li>
    <span class='name'>message</span>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>The log message</p>
</div>
  </li>
  <li>
    <span class='name'>len</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The length of the message param, or -1 if the string is null terminated</p>
</div>
  </li>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object when this callback was set</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>Always nil.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L296-L296'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='296' data-end='296'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 296</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_callback'>callback</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_log_fn_t'>mongocrypt_log_fn_t</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_log_level'>log_level</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_void'>void</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mongocrypt_random_fn-instance_method">
  <h3 class='signature nodoc'>
    #<strong>mongocrypt_random_fn</strong>(ctx, output, count, status)  &#x21d2; <code>Bool</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the <code>Binding</code> class.</p>
</div>
  </div>


<p>A callback to a crypto secure random function.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>ctx</span>
    <span class='type'>(<code>FFI::Pointer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
  </li>
  <li>
    <span class='name'>output</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the output value written to it by libmongocrypt.</p>
</div>
  </li>
  <li>
    <span class='name'>count</span>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>The number of random bytes to return.</p>
</div>
  </li>
  <li>
    <span class='name'>status</span>
    <span class='type'>(<code>FFI::Pointer</code>)</span>
&mdash;    <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Bool</code>)</span>
&mdash;    <div class='inline'>
<p>Whether hashing was successful.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/crypt/binding.rb#L1317-L1317'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1317' data-end='1317'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/crypt/binding.rb', line 1317</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_callback'>callback</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mongocrypt_random_fn'>mongocrypt_random_fn</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_int'>int</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pointer'>pointer</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bool'>bool</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>