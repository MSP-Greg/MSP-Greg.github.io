<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Mongo::Collection::View &mdash; Mongo master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mongo::Collection::View",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Mongo master</a> &raquo; 
      <a href='../../_index.html#alpha_V'>Index (V)</a> &raquo; 
        <a href="../../Mongo.html" title="Mongo (module)">Mongo</a> &raquo; 
        <a href="../Collection.html" title="Mongo::Collection (class)">Collection</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>View&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Mongo::Collection::View</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="View/Builder.html" title="Mongo::Collection::View::Builder (module)"><code>Builder</code></a>,
        <a href="View/Explainable.html" title="Mongo::Collection::View::Explainable (module)"><code>Explainable</code></a>,
        <a href="View/Immutable.html" title="Mongo::Collection::View::Immutable (module)"><code>Immutable</code></a>,
        <a href="View/Iterable.html" title="Mongo::Collection::View::Iterable (module)"><code>Iterable</code></a>,
        <a href="View/Readable.html" title="Mongo::Collection::View::Readable (module)"><code>Readable</code></a>,
        <a href="View/Writable.html" title="Mongo::Collection::View::Writable (module)"><code>Writable</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="View/Aggregation.html" title="Mongo::Collection::View::Aggregation (class)"><code>Aggregation</code></a>,
        <a href="View/ChangeStream.html" title="Mongo::Collection::View::ChangeStream (class)"><code>ChangeStream</code></a>,
        <a href="View/MapReduce.html" title="Mongo::Collection::View::MapReduce (class)"><code>MapReduce</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Forwardable
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="View/Writable.html" title="Mongo::Collection::View::Writable (module)"><code>Writable</code></a>,
          <a href="View/Explainable.html" title="Mongo::Collection::View::Explainable (module)"><code>Explainable</code></a>,
          <a href="View/Readable.html" title="Mongo::Collection::View::Readable (module)"><code>Readable</code></a>,
          <a href="View/Iterable.html" title="Mongo::Collection::View::Iterable (module)"><code>Iterable</code></a>,
          <a href="../CursorHost.html" title="Mongo::CursorHost (module)"><code>::Mongo::CursorHost</code></a>,
          <a href="View/Immutable.html" title="Mongo::Collection::View::Immutable (module)"><code>Immutable</code></a>,
          Enumerable
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L46'>lib/mongo/collection/view.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/aggregation.rb#L22'>lib/mongo/collection/view/aggregation.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/change_stream.rb#L23'>lib/mongo/collection/view/change_stream.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/explainable.rb#L20'>lib/mongo/collection/view/explainable.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/immutable.rb#L20'>lib/mongo/collection/view/immutable.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/iterable.rb#L22'>lib/mongo/collection/view/iterable.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/map_reduce.rb#L20'>lib/mongo/collection/view/map_reduce.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/readable.rb#L20'>lib/mongo/collection/view/readable.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/writable.rb#L20'>lib/mongo/collection/view/writable.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/aggregation/behavior.rb#L5'>lib/mongo/collection/view/aggregation/behavior.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/builder/aggregation.rb#L20'>lib/mongo/collection/view/builder/aggregation.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/builder/map_reduce.rb#L20'>lib/mongo/collection/view/builder/map_reduce.rb</a>,<br/> <a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view/change_stream/retryable.rb#L20'>lib/mongo/collection/view/change_stream/retryable.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The <code>View</code> API is semipublic.</p>
</div>
  </div>


<p>Representation of a query and options producing a result set of documents.</p>

<p>A <code>View</code> can be modified using helpers. <a href="Helpers.html" title="Mongo::Collection::Helpers (module)"><code>Helpers</code></a> can be chained, as each one returns a <code>View</code> if arguments are provided.</p>

<p>The query message is sent to the server when a “terminator” is called. For example, when #each is called on a <code>View</code>, a <a href="../Cursor.html" title="Mongo::Cursor (class)"><code>::Mongo::Cursor</code></a> object is created, which then sends the query to the server.</p>

<p>A <code>View</code> is not created directly by a user. Rather, <code>View</code> creates a <code>View</code> when a CRUD operation is called and returns it to the user to interact with.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
  <h3 class='inherited'><a href="View/Explainable.html" title="Mongo::Collection::View::Explainable (module)"><code>Explainable</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="View/Explainable.html#ALL_PLANS_EXECUTION-constant" title="Mongo::Collection::View::Explainable::ALL_PLANS_EXECUTION (constant)">ALL_PLANS_EXECUTION</a>, 
    <a href="View/Explainable.html#EXECUTION_STATS-constant" title="Mongo::Collection::View::Explainable::EXECUTION_STATS (constant)">EXECUTION_STATS</a>, 
    <a href="View/Explainable.html#QUERY_PLANNER-constant" title="Mongo::Collection::View::Explainable::QUERY_PLANNER (constant)">QUERY_PLANNER</a>
  </p>
  <h3 class='inherited'><a href="View/Writable.html" title="Mongo::Collection::View::Writable (module)"><code>Writable</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="View/Writable.html#ARRAY_FILTERS-constant" title="Mongo::Collection::View::Writable::ARRAY_FILTERS (constant)">ARRAY_FILTERS</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(collection, filter = {}, options = {})  &#x21d2; View </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new <code>View</code>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#collection-instance_method" title="#collection (instance method)">#<strong>collection</strong>  &#x21d2; Collection </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#filter-instance_method" title="#filter (instance method)">#<strong>filter</strong>  &#x21d2; Hash </a>
      (also: #selector)
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#operation_timeout_ms-instance_method" title="#operation_timeout_ms (instance method)">#<strong>operation_timeout_ms</strong>  &#x21d2; Integer | nil | The timeout_ms value that was passed as an option to the view. </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#selector-instance_method" title="#selector (instance method)">#<strong>selector</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">#filter</a>.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="View/Explainable.html" title="Mongo::Collection::View::Explainable (module)"><code>Explainable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro priv' href="View/Explainable.html#explained%3F-instance_method" title="Mongo::Collection::View::Explainable#explained? (method)">#explained?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="View/Iterable.html" title="Mongo::Collection::View::Iterable (module)"><code>Iterable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro priv' href="View/Iterable.html#prefer_cached_cursor%3F-instance_method" title="Mongo::Collection::View::Iterable#prefer_cached_cursor? (method)">#prefer_cached_cursor?</a></td>
      <td><div class='inline'><p>If the caching cursor is closed and was not fully iterated, the documents we have in it are not the complete result set and we have no way of completing that iteration.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro priv' href="View/Iterable.html#use_query_cache%3F-instance_method" title="Mongo::Collection::View::Iterable#use_query_cache? (method)">#use_query_cache?</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../CursorHost.html" title="Mongo::CursorHost (module)"><code>::Mongo::CursorHost</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro nodoc' href="../CursorHost.html#cursor-instance_method" title="Mongo::CursorHost#cursor (method)">#cursor</a></td>
      <td><div class='inline'><p>Returns the cursor associated with this view, if any.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="../CursorHost.html#timeout_mode-instance_method" title="Mongo::CursorHost#timeout_mode (method)">#timeout_mode</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="View/Immutable.html" title="Mongo::Collection::View::Immutable (module)"><code>Immutable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="View/Immutable.html#options-instance_method" title="Mongo::Collection::View::Immutable#options (method)">#options</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#==-instance_method" title="#== (instance method)">#<strong>==</strong>(other)  &#x21d2; true, false </a>
      (also: #eql?)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Compare two <code>View</code> objects.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eql%3F-instance_method" title="#eql? (instance method)">#<strong>eql?</strong>(other)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#==-instance_method" title="Mongo::Collection::View#== (method)">#==</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hash-instance_method" title="#hash (instance method)">#<strong>hash</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>A hash value for the <code>View</code> composed of the collection namespace, hash of the options and hash of the filter.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get a human-readable string representation of <code>View</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#operation_timeouts-instance_method" title="#operation_timeouts (instance method)">#<strong>operation_timeouts</strong>(opts = {})  &#x21d2; Hash </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#timeout_ms-instance_method" title="#timeout_ms (instance method)">#<strong>timeout_ms</strong>  &#x21d2; Integer | nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The timeout_ms value to use for this operation; either specified as an option to the view, or inherited from the collection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_concern-instance_method" title="#write_concern (instance method)">#<strong>write_concern</strong>  &#x21d2; Mongo::WriteConcern </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the write concern on this <code>View</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">#<strong>initialize_copy</strong>(other)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#new-instance_method" title="#new (instance method)">#<strong>new</strong>(options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#view-instance_method" title="#view (instance method)">#<strong>view</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#with_session-instance_method" title="#with_session (instance method)">#<strong>with_session</strong>(opts = {}, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited'><a href="View/Writable.html" title="Mongo::Collection::View::Writable (module)"><code>Writable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#delete_many-instance_method" title="Mongo::Collection::View::Writable#delete_many (method)">#delete_many</a></td>
      <td><div class='inline'><p>Remove documents from the collection.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#delete_one-instance_method" title="Mongo::Collection::View::Writable#delete_one (method)">#delete_one</a></td>
      <td><div class='inline'><p>Remove a document from the collection.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#find_one_and_delete-instance_method" title="Mongo::Collection::View::Writable#find_one_and_delete (method)">#find_one_and_delete</a></td>
      <td><div class='inline'><p>Finds a single document in the database via findAndModify and deletes it, returning the original document.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#find_one_and_replace-instance_method" title="Mongo::Collection::View::Writable#find_one_and_replace (method)">#find_one_and_replace</a></td>
      <td><div class='inline'><p>Finds a single document and replaces it.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#find_one_and_update-instance_method" title="Mongo::Collection::View::Writable#find_one_and_update (method)">#find_one_and_update</a></td>
      <td><div class='inline'><p>Finds a single document and updates it.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#replace_one-instance_method" title="Mongo::Collection::View::Writable#replace_one (method)">#replace_one</a></td>
      <td><div class='inline'><p>Replaces a single document in the database with the new document.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#update_many-instance_method" title="Mongo::Collection::View::Writable#update_many (method)">#update_many</a></td>
      <td><div class='inline'><p>Update documents in the collection.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Writable.html#update_one-instance_method" title="Mongo::Collection::View::Writable#update_one (method)">#update_one</a></td>
      <td><div class='inline'><p>Update a single document in the collection.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="View/Writable.html#validate_replacement_documents!-instance_method" title="Mongo::Collection::View::Writable#validate_replacement_documents! (method)">#validate_replacement_documents!</a></td>
      <td><div class='inline'><p>Check the replacement documents to make sure they don’t have atomic modifiers.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="View/Writable.html#validate_update_documents!-instance_method" title="Mongo::Collection::View::Writable#validate_update_documents! (method)">#validate_update_documents!</a></td>
      <td><div class='inline'><p>Checks the update documents to make sure they only have atomic modifiers.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="View/Explainable.html" title="Mongo::Collection::View::Explainable (module)"><code>Explainable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Explainable.html#explain-instance_method" title="Mongo::Collection::View::Explainable#explain (method)">#explain</a></td>
      <td><div class='inline'><p>Get the query plan for the query.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="View/Explainable.html#explain_options-instance_method" title="Mongo::Collection::View::Explainable#explain_options (method)">#explain_options</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="View/Readable.html" title="Mongo::Collection::View::Readable (module)"><code>Readable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#aggregate-instance_method" title="Mongo::Collection::View::Readable#aggregate (method)">#aggregate</a></td>
      <td><div class='inline'><p>Execute an aggregation on the collection view.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#allow_disk_use-instance_method" title="Mongo::Collection::View::Readable#allow_disk_use (method)">#allow_disk_use</a></td>
      <td><div class='inline'><p>Allows the server to write temporary data to disk while executing a find operation.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#allow_partial_results-instance_method" title="Mongo::Collection::View::Readable#allow_partial_results (method)">#allow_partial_results</a></td>
      <td><div class='inline'><p>Allows the query to get partial results if some shards are down.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#await_data-instance_method" title="Mongo::Collection::View::Readable#await_data (method)">#await_data</a></td>
      <td><div class='inline'><p>Tell the query’s cursor to stay open and wait for data.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#batch_size-instance_method" title="Mongo::Collection::View::Readable#batch_size (method)">#batch_size</a></td>
      <td><div class='inline'><p>The number of documents returned in each batch of results from MongoDB.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#comment-instance_method" title="Mongo::Collection::View::Readable#comment (method)">#comment</a></td>
      <td><div class='inline'><p>Associate a comment with the query.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m deprecated' href="View/Readable.html#count-instance_method" title="Mongo::Collection::View::Readable#count (method)">#count</a></td>
      <td><div class='inline'><p>Get a count of matching documents in the collection.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#count_documents-instance_method" title="Mongo::Collection::View::Readable#count_documents (method)">#count_documents</a></td>
      <td><div class='inline'><p>Get a count of matching documents in the collection.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#cursor_type-instance_method" title="Mongo::Collection::View::Readable#cursor_type (method)">#cursor_type</a></td>
      <td><div class='inline'><p>The type of cursor to use.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#distinct-instance_method" title="Mongo::Collection::View::Readable#distinct (method)">#distinct</a></td>
      <td><div class='inline'><p>Get a list of distinct values for a specific field.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#estimated_document_count-instance_method" title="Mongo::Collection::View::Readable#estimated_document_count (method)">#estimated_document_count</a></td>
      <td><div class='inline'><p>Gets an estimate of the count of documents in a collection using collection metadata.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#hint-instance_method" title="Mongo::Collection::View::Readable#hint (method)">#hint</a></td>
      <td><div class='inline'><p>The index that MongoDB will be forced to use for the query.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#limit-instance_method" title="Mongo::Collection::View::Readable#limit (method)">#limit</a></td>
      <td><div class='inline'><p>The max number of docs to return from the query.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#map_reduce-instance_method" title="Mongo::Collection::View::Readable#map_reduce (method)">#map_reduce</a></td>
      <td><div class='inline'><p>Execute a map/reduce operation on the collection view.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#max_await_time_ms-instance_method" title="Mongo::Collection::View::Readable#max_await_time_ms (method)">#max_await_time_ms</a></td>
      <td><div class='inline'><p>A cumulative time limit in milliseconds for processing get more operations on a cursor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m deprecated' href="View/Readable.html#max_scan-instance_method" title="Mongo::Collection::View::Readable#max_scan (method)">#max_scan</a></td>
      <td><div class='inline'><p>Set the max number of documents to scan.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#max_time_ms-instance_method" title="Mongo::Collection::View::Readable#max_time_ms (method)">#max_time_ms</a></td>
      <td><div class='inline'><p>A cumulative time limit in milliseconds for processing operations on a cursor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#max_value-instance_method" title="Mongo::Collection::View::Readable#max_value (method)">#max_value</a></td>
      <td><div class='inline'><p>Set the maximum value to search.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#min_value-instance_method" title="Mongo::Collection::View::Readable#min_value (method)">#min_value</a></td>
      <td><div class='inline'><p>Set the minimum value to search.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#modifiers-instance_method" title="Mongo::Collection::View::Readable#modifiers (method)">#modifiers</a></td>
      <td><div class='inline'><p>If called without arguments or with a nil argument, returns the legacy (OP_QUERY) server modifiers for the current view.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#no_cursor_timeout-instance_method" title="Mongo::Collection::View::Readable#no_cursor_timeout (method)">#no_cursor_timeout</a></td>
      <td><div class='inline'><p>The server normally times out idle cursors after an inactivity period (10 minutes) to prevent excess memory use.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="View/Readable.html#parallel_scan-instance_method" title="Mongo::Collection::View::Readable#parallel_scan (method)">#parallel_scan</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#projection-instance_method" title="Mongo::Collection::View::Readable#projection (method)">#projection</a></td>
      <td><div class='inline'><p>The fields to include or exclude from each doc in the result set.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#read-instance_method" title="Mongo::Collection::View::Readable#read (method)">#read</a></td>
      <td><div class='inline'><p>The read preference to use for the query.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="View/Readable.html#read_concern-instance_method" title="Mongo::Collection::View::Readable#read_concern (method)">#read_concern</a>,
        <a class='i_m nodoc' href="View/Readable.html#read_preference-instance_method" title="Mongo::Collection::View::Readable#read_preference (method)">#read_preference</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#return_key-instance_method" title="Mongo::Collection::View::Readable#return_key (method)">#return_key</a></td>
      <td><div class='inline'><p>Set whether to return only the indexed field or fields.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#show_disk_loc-instance_method" title="Mongo::Collection::View::Readable#show_disk_loc (method)">#show_disk_loc</a></td>
      <td><div class='inline'><p>Set whether the disk location should be shown for each document.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#show_record_id-instance_method" title="Mongo::Collection::View::Readable#show_record_id (method)">#show_record_id</a></td>
      <td><div class='inline'><p>Alias for <a href="View/Readable.html#show_disk_loc-instance_method" title="Mongo::Collection::View::Readable#show_disk_loc (method)">Readable#show_disk_loc</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#skip-instance_method" title="Mongo::Collection::View::Readable#skip (method)">#skip</a></td>
      <td><div class='inline'><p>The number of docs to skip before returning results.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m deprecated' href="View/Readable.html#snapshot-instance_method" title="Mongo::Collection::View::Readable#snapshot (method)">#snapshot</a></td>
      <td><div class='inline'><p>Set the snapshot value for the view.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#sort-instance_method" title="Mongo::Collection::View::Readable#sort (method)">#sort</a></td>
      <td><div class='inline'><p>The key and direction pairs by which the result set will be sorted.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Readable.html#timeout_ms-instance_method" title="Mongo::Collection::View::Readable#timeout_ms (method)">#timeout_ms</a></td>
      <td><div class='inline'><p>The per-operation timeout in milliseconds.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="View/Readable.html#collation-instance_method" title="Mongo::Collection::View::Readable#collation (method)">#collation</a>,
        <a class='i_m priv' href="View/Readable.html#server_selector-instance_method" title="Mongo::Collection::View::Readable#server_selector (method)">#server_selector</a>,
        <a class='i_m priv' href="View/Readable.html#validate_doc!-instance_method" title="Mongo::Collection::View::Readable#validate_doc! (method)">#validate_doc!</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="View/Iterable.html" title="Mongo::Collection::View::Iterable (module)"><code>Iterable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Iterable.html#close_query-instance_method" title="Mongo::Collection::View::Iterable#close_query (method)">#close_query</a></td>
      <td><div class='inline'><p>Cleans up resources associated with this query.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Iterable.html#each-instance_method" title="Mongo::Collection::View::Iterable#each (method)">#each</a></td>
      <td><div class='inline'><p>Iterate through documents returned by a query with this <code>View</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="View/Iterable.html#kill_cursors-instance_method" title="Mongo::Collection::View::Iterable#kill_cursors (method)">#kill_cursors</a></td>
      <td><div class='inline'><p>Alias for <a href="View/Iterable.html#close_query-instance_method" title="Mongo::Collection::View::Iterable#close_query (method)">Iterable#close_query</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="View/Iterable.html#cache_options-instance_method" title="Mongo::Collection::View::Iterable#cache_options (method)">#cache_options</a>,
        <a class='i_m priv' href="View/Iterable.html#cached_cursor-instance_method" title="Mongo::Collection::View::Iterable#cached_cursor (method)">#cached_cursor</a>,
        <a class='i_m priv' href="View/Iterable.html#compute_limit_for_cached_query-instance_method" title="Mongo::Collection::View::Iterable#compute_limit_for_cached_query (method)">#compute_limit_for_cached_query</a>,
        <a class='i_m priv' href="View/Iterable.html#initial_query_op-instance_method" title="Mongo::Collection::View::Iterable#initial_query_op (method)">#initial_query_op</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="View/Iterable.html#maybe_set_tailable_options-instance_method" title="Mongo::Collection::View::Iterable#maybe_set_tailable_options (method)">#maybe_set_tailable_options</a></td>
      <td><div class='inline'><p>Add tailable cusror options to the command specifiction if needed.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m priv' href="View/Iterable.html#new_cursor_for_iteration-instance_method" title="Mongo::Collection::View::Iterable#new_cursor_for_iteration (method)">#new_cursor_for_iteration</a></td>
      <td><div class='inline'><p>Start a new cursor for use when iterating (via #each).</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="View/Iterable.html#oplog_replay-instance_method" title="Mongo::Collection::View::Iterable#oplog_replay (method)">#oplog_replay</a>,
        <a class='i_m priv' href="View/Iterable.html#select_cursor-instance_method" title="Mongo::Collection::View::Iterable#select_cursor (method)">#select_cursor</a>,
        <a class='i_m priv' href="View/Iterable.html#send_initial_query-instance_method" title="Mongo::Collection::View::Iterable#send_initial_query (method)">#send_initial_query</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="../CursorHost.html" title="Mongo::CursorHost (module)"><code>::Mongo::CursorHost</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="../CursorHost.html#validate_timeout_mode!-instance_method" title="Mongo::CursorHost#validate_timeout_mode! (method)">#validate_timeout_mode!</a></td>
      <td><div class='inline'><p>Ensure the timeout mode is appropriate for other options that have been given.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="View/Immutable.html" title="Mongo::Collection::View::Immutable (module)"><code>Immutable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="View/Immutable.html#configure-instance_method" title="Mongo::Collection::View::Immutable#configure (method)">#configure</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(collection, filter = {}, options = {})  &#x21d2; <code>View</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new <code>View</code>.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Find all users named Emily.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>View</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span><span class='comma'>,</span> {<span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="../Collection.html#name-instance_method" title="Mongo::Collection#name (method)">name</a></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Emily</span><span class='tstring_end'>&#39;</span></span>})</code></pre>
        <p class='example_title'><div class='inline'>
<p>Find all users named Emily skipping 5 and returning 10.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>View</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span><span class='comma'>,</span> {<span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="../Collection.html#name-instance_method" title="Mongo::Collection#name (method)">name</a></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Emily</span><span class='tstring_end'>&#39;</span></span>}<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_skip'>skip</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_limit'>limit</span> <span class='op'>=&gt;</span> <span class='int'>10</span>)</code></pre>
        <p class='example_title'><div class='inline'>
<p>Find all users named Emily using a specific read preference.</p>
</div></p>
      <pre class='example code ruby'><code><span class='const'>View</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span><span class='comma'>,</span> {<span class='symbeg'>:</span><span class='id identifier rubyid_name'><a href="../Collection.html#name-instance_method" title="Mongo::Collection#name (method)">name</a></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Emily</span><span class='tstring_end'>&#39;</span></span>}<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_read'>read</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_secondary_preferred'>secondary_preferred</span>)</code></pre>
  </div>
<p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>collection</span>
    <span class='type'>(<a href="../Collection.html" title="Mongo::Collection (class)">Collection</a>)</span>
&mdash;    <div class='inline'>
<p>The <a href="../Collection.html" title="Mongo::Collection (class)"><code>::Mongo::Collection</code></a> to query.</p>
</div>
  </li>
  <li>
    <span class='name'>filter</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>The query filter.</p>
</div>
  </li>
  <li>
    <span class='name'>options</span>
    <span class='type'>(<code>Hash</code>)</span>
    <em class='default'>(defaults to: <tt>{}</tt>)</em>
&mdash;    <div class='inline'>
<p>The additional query options.</p>
</div>
  </li>
</ul>
    <p class='tag_title'>Options Hash (<tt>options</tt>):</p>
    <ul class='option'>
        <li>
          <span class='name'>:allow_disk_use</span>
          <span class='type'>(<code>true</code>, <code>false</code>)</span>
            &mdash; <div class='inline'>
<p>When set to true, the server can write temporary data to disk while executing the find operation. This option is only available on MongoDB server versions 4.4 and newer.</p>
</div>        </li>
        <li>
          <span class='name'>:batch_size</span>
          <span class='type'>(<code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>The number of documents to return in each response from MongoDB.</p>
</div>        </li>
        <li>
          <span class='name'>:collation</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>The collation to use.</p>
</div>        </li>
        <li>
          <span class='name'>:comment</span>
          <span class='type'>(<code>String</code>)</span>
            &mdash; <div class='inline'>
<p>Associate a comment with the query.</p>
</div>        </li>
        <li>
          <span class='name'>:cursor_type</span>
          <span class='type'>(<code>:tailable</code>, <code>:tailable_await</code>)</span>
            &mdash; <div class='inline'>
<p>The type of cursor to use.</p>
</div>        </li>
        <li>
          <span class='name'>:explain</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>Execute an explain with the provided explain options (known options are <code>:verbose</code> and <code>:verbosity</code>) rather than a find.</p>
</div>        </li>
        <li>
          <span class='name'>:hint</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>Override the default index selection and force MongoDB to use a specific index for the query.</p>
</div>        </li>
        <li>
          <span class='name'>:limit</span>
          <span class='type'>(<code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>Max number of documents to return.</p>
</div>        </li>
        <li>
          <span class='name'>:max_scan</span>
          <span class='type'>(<code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>Constrain the query to only scan the specified number of documents. Use to prevent queries from running for too long. Deprecated as of MongoDB server version 4.0.</p>
</div>        </li>
        <li>
          <span class='name'>:projection</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>The fields to include or exclude in the returned documents.</p>
</div>        </li>
        <li>
          <span class='name'>:read</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>The read preference to use for the query. If none is provided, the collection’s default read preference is used.</p>
</div>        </li>
        <li>
          <span class='name'>:read_concern</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>The read concern to use for the query.</p>
</div>        </li>
        <li>
          <span class='name'>:show_disk_loc</span>
          <span class='type'>(<code>true</code> | <code>false</code>)</span>
            &mdash; <div class='inline'>
<p>Return disk location info as a field in each doc.</p>
</div>        </li>
        <li>
          <span class='name'>:skip</span>
          <span class='type'>(<code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>The number of documents to skip.</p>
</div>        </li>
        <li>
          <span class='name'>:snapshot</span>
          <span class='type'>(<code>true</code> | <code>false</code>)</span>
            &mdash; <div class='inline'>
<p>Prevents returning a document more than once. Deprecated as of MongoDB server version 4.0.</p>
</div>        </li>
        <li>
          <span class='name'>:sort</span>
          <span class='type'>(<code>Hash</code>)</span>
            &mdash; <div class='inline'>
<p>The key and direction pairs used to sort the results.</p>
</div>        </li>
        <li>
          <span class='name'>:timeout_mode</span>
          <span class='type'>(<code>:cursor_lifetime</code> | <code>:iteration</code>)</span>
            &mdash; <div class='inline'>
<p>How to interpret <code>:timeout_ms</code> (whether it applies to the lifetime of the cursor, or per iteration).</p>
</div>        </li>
        <li>
          <span class='name'>:timeout_ms</span>
          <span class='type'>(<code>Integer</code>)</span>
            &mdash; <div class='inline'>
<p>The operation timeout in milliseconds. Must be a non-negative integer. An explicit value of 0 means infinite. The default value is unset which means the value is inherited from the collection or the database or the client.</p>
</div>        </li>
    </ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L171-L191'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='171' data-end='191'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 171</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_validate_doc!'>validate_doc!</span>(<span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>)

  <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span> <span class='op'>=</span> <span class='const'>BSON</span><span class='op'>::</span><span class='const'>Document</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>)
  <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span> <span class='op'>=</span> <span class='const'>BSON</span><span class='op'>::</span><span class='const'>Document</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>)

  <span class='ivar'>@collection</span> <span class='op'>=</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span>
  <span class='ivar'>@operation_timeout_ms</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Collection::View#timeout_ms (method)">timeout_ms</a></span>)

  <span class='id identifier rubyid_validate_timeout_mode!'>validate_timeout_mode!</span>(<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>)

  <span class='comment'># This is when users pass $query in filter and other modifiers
</span>  <span class='comment'># alongside?
</span>  <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='gvar'>$query</span>)
  <span class='comment'># This makes modifiers contain the filter if filter wasn&#39;t
</span>  <span class='comment'># given via $query but as top-level keys, presumably
</span>  <span class='comment'># downstream code ignores non-modifier keys in the modifiers?
</span>  <span class='id identifier rubyid_modifiers'>modifiers</span> <span class='op'>=</span> <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_modifiers'>modifiers</span>) <span class='op'>||</span> {})
  <span class='ivar'>@filter</span> <span class='op'>=</span> (<span class='id identifier rubyid_query'>query</span> <span class='op'>||</span> <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>).<span class='id identifier rubyid_freeze'>freeze</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='const'><a href="../Operation.html" title="Mongo::Operation (module)">Operation</a></span><span class='op'>::</span><span class='const'><a href="../Operation/Find.html" title="Mongo::Operation::Find (class)">Find</a></span><span class='op'>::</span><span class='const'><a href="../Operation/Find/Builder.html" title="Mongo::Operation::Find::Builder (module)">Builder</a></span><span class='op'>::</span><span class='const'><a href="../Operation/Find/Builder/Modifiers.html" title="Mongo::Operation::Find::Builder::Modifiers (module)">Modifiers</a></span>.<span class='id identifier rubyid_map_driver_options'>map_driver_options</span>(<span class='id identifier rubyid_modifiers'>modifiers</span>).<span class='id identifier rubyid_merge!'>merge!</span>(<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>).<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="collection-instance_method">
  <h3 class='signature ro first'>
    #<strong>collection</strong>  &#x21d2; <a href="../Collection.html" title="Mongo::Collection (class)">Collection</a>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../Collection.html" title="Mongo::Collection (class)">Collection</a>)</span>
&mdash;    <div class='inline'>
<p>The <a href="../Collection.html" title="Mongo::Collection (class)"><code>::Mongo::Collection</code></a> to query.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L56-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_collection'>collection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filter-instance_method">
  <h3 class='signature ro'>
    #<strong>filter</strong>  &#x21d2; <code>Hash</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#selector</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>The query filter.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L59-L59'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='59' data-end='59'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 59</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filter'>filter</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="operation_timeout_ms-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>operation_timeout_ms</strong>  &#x21d2; <code>Integer</code> | <code>nil</code> | <code>The</code> <a href="#timeout_ms-instance_method" title="Mongo::Collection::View#timeout_ms (method)">timeout_ms</a> <code>value</code> <code>that</code> <code>was</code> <code>passed</code> <code>as</code> <code>an</code>
<code>option</code> <code>to</code> <code>the</code> <a href="#view-instance_method" title="Mongo::Collection::View#view (method)">view</a>.  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code> | <code>nil</code> | <code>The</code> <a href="#timeout_ms-instance_method" title="Mongo::Collection::View#timeout_ms (method)">timeout_ms</a> <code>value</code> <code>that</code> <code>was</code> <code>passed</code> <code>as</code> <code>an</code>
<code>option</code> <code>to</code> <code>the</code> <a href="#view-instance_method" title="Mongo::Collection::View#view (method)">view</a>.)</span>
&mdash;    <div class='inline'>
<p>Integer | nil | The timeout_ms value that was passed as an option to the view.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L83-L83'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='83' data-end='83'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 83</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_operation_timeout_ms'>operation_timeout_ms</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="selector-instance_method">
  <h3 class='signature ro'>
    #<strong>selector</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">#filter</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L77-L77'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='77' data-end='77'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 77</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selector'>selector</span> <span class='symbeg'>:</span><span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="==-instance_method">
  <h3 class='signature  first'>
    #<strong>==</strong>(other)  &#x21d2; <code>true</code>, <code>false</code> 
    <span class='aliases'>Also known as: <span class='names'>#eql?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Compare two <code>View</code> objects.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Compare the view with another object.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'><a href="#view-instance_method" title="Mongo::Collection::View#view (method)">view</a></span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>true</code>, <code>false</code>)</span>
&mdash;    <div class='inline'>
<p>Equal if collection, filter, and options of two <code>View</code> match.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L94-L99'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='94' data-end='99'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 94</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>==</span>(<span class='id identifier rubyid_other'>other</span>)
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>View</span>)
  <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span> <span class='op'>&amp;&amp;</span>
      <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span> <span class='op'>&amp;&amp;</span>
      <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eql?-instance_method">
  <h3 class='signature '>
    #<strong>eql?</strong>(other)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#==-instance_method" title="Mongo::Collection::View#== (method)">#==</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L100-L100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='100' data-end='100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_eql?'>eql?</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='op'>==</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="hash-instance_method">
  <h3 class='signature '>
    #<strong>hash</strong>  &#x21d2; <code>Integer</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>A hash value for the <code>View</code> composed of the collection namespace, hash of the options and hash of the filter.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the hash value.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'><a href="#view-instance_method" title="Mongo::Collection::View#view (method)">view</a></span>.<span class='id identifier rubyid_hash'>hash</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code>)</span>
&mdash;    <div class='inline'>
<p>A hash value of the <code>View</code> object.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L111-L113'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='111' data-end='113'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 111</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_hash'>hash</span>
  [ <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_namespace'><a href="../Collection.html#namespace-instance_method" title="Mongo::Collection#namespace (method)">namespace</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>.<span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span> <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>.<span class='id identifier rubyid_hash'>hash</span> ].<span class='id identifier rubyid_hash'>hash</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_copy-instance_method">
  <h3 class='signature priv'>
    #<strong>initialize_copy</strong>(other)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L242-L246'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='242' data-end='246'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 242</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_copy'>initialize_copy</span>(<span class='id identifier rubyid_other'>other</span>)
  <span class='ivar'>@collection</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='ivar'>@filter</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>.<span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <code>String</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get a human-readable string representation of <code>View</code>.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the inspection.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'><a href="#view-instance_method" title="Mongo::Collection::View#view (method)">view</a></span>.<span class='id identifier rubyid_inspect'>inspect</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>String</code>)</span>
&mdash;    <div class='inline'>
<p>A string representation of a <code>View</code> instance.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L209-L212'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='209' data-end='212'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 209</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;Mongo::Collection::View:0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object_id'>object_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> namespace=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_namespace'><a href="../Collection.html#namespace-instance_method" title="Mongo::Collection#namespace (method)">namespace</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> @filter=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'> @options=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="new-instance_method">
  <h3 class='signature priv'>
    #<strong>new</strong>(options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L248-L251'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='248' data-end='251'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 248</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>)
  <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span> <span class='op'>=</span> <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>timeout_ms:</span> <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Collection::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>) <span class='kw'>if</span> <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Collection::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>
  <span class='const'>View</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Mongo::Collection::View.new (method)">new</a></span>(<span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filter'><a href="#filter-instance_method" title="Mongo::Collection::View#filter (method)">filter</a></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="operation_timeouts-instance_method">
  <h3 class='signature nodoc'>
    #<strong>operation_timeouts</strong>(opts = {})  &#x21d2; <code>Hash</code> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Hash</code>)</span>
&mdash;    <div class='inline'>
<p>timeout_ms value set on the operation level (if any), and/or timeout_ms that is set on collection/database/client level (if any).</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L230-L238'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='230' data-end='238'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 230</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_operation_timeouts'>operation_timeouts</span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  {}.<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Collection::View#timeout_ms (method)">timeout_ms</a></span>] <span class='op'>||</span> <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Collection::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>
      <span class='id identifier rubyid_result'>result</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Collection::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>] <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Collection::View#timeout_ms (method)">timeout_ms</a></span>] <span class='op'>||</span> <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Collection::View#operation_timeout_ms (method)">operation_timeout_ms</a></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_result'>result</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_inherited_timeout_ms'>inherited_timeout_ms</span>] <span class='op'>=</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_timeout_ms'><a href="#timeout_ms-instance_method" title="Mongo::Collection::View#timeout_ms (method)">timeout_ms</a></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timeout_ms-instance_method">
  <h3 class='signature '>
    #<strong>timeout_ms</strong>  &#x21d2; <code>Integer</code> | <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The timeout_ms value to use for this operation; either specified as an option to the view, or inherited from the collection.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Integer</code> | <code>nil</code>)</span>
&mdash;    <div class='inline'>
<p>the timeout_ms for this operation</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L197-L199'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='197' data-end='199'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 197</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout_ms'>timeout_ms</span>
  <span class='id identifier rubyid_operation_timeout_ms'><a href="#operation_timeout_ms-instance_method" title="Mongo::Collection::View#operation_timeout_ms (method)">operation_timeout_ms</a></span> <span class='op'>||</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_timeout_ms'>timeout_ms</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="view-instance_method">
  <h3 class='signature priv'>
    #<strong>view</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L253-L253'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='253' data-end='253'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 253</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_view'>view</span><span class='semicolon'>;</span> <span class='kw'>self</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="with_session-instance_method">
  <h3 class='signature priv'>
    #<strong>with_session</strong>(opts = {}, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L255-L257'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='255' data-end='257'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 255</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_with_session'>with_session</span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_client'>client</span>.<span class='id identifier rubyid_with_session'>with_session</span>(<span class='ivar'>@options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_opts'>opts</span>)<span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_concern-instance_method">
  <h3 class='signature '>
    #<strong>write_concern</strong>  &#x21d2; <a href="../WriteConcern.html" title="Mongo::WriteConcern (module)">Mongo::WriteConcern</a> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the write concern on this <code>View</code>.</p>

  </div>
</div>
<div class='tags'>
    <div class='examples'>
    <p class='tag_title'>Examples:</p>
        <p class='example_title'><div class='inline'>
<p>Get the write concern.</p>
</div></p>
      <pre class='example code ruby'><code><span class='id identifier rubyid_view'><a href="#view-instance_method" title="Mongo::Collection::View#view (method)">view</a></span>.<span class='id identifier rubyid_write_concern'>write_concern</span></code></pre>
  </div>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<a href="../WriteConcern.html" title="Mongo::WriteConcern (module)">Mongo::WriteConcern</a>)</span>
&mdash;    <div class='inline'>
<p>The write concern.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Since:</p>
<ul class='since'>
  <li>
    <div class='inline'>
<p>2.0.0</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection/view.rb#L222-L224'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='222' data-end='224'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mongo/collection/view.rb', line 222</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_concern'>write_concern</span>
  <span class='const'><a href="../WriteConcern.html" title="Mongo::WriteConcern (module)">WriteConcern</a></span>.<span class='id identifier rubyid_get'><a href="../WriteConcern.html#get-instance_method" title="Mongo::WriteConcern#get (method)">get</a></span>(<span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_write_concern'>write_concern</span>] <span class='op'>||</span> <span class='id identifier rubyid_options'><a href="../Collection.html#options-instance_method" title="Mongo::Collection#options (method)">options</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_write'>write</span>] <span class='op'>||</span> <span class='id identifier rubyid_collection'><a href="#collection-instance_method" title="Mongo::Collection::View#collection (method)">collection</a></span>.<span class='id identifier rubyid_write_concern'>write_concern</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>