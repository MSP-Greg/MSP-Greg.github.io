<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Mysql2::Client &mdash; Mysql2 master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Mysql2::Client",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Mysql2 master</a> &raquo; 
      <a href='../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Client&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Mysql2::Client</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="EM/Client.html" title="Mysql2::EM::Client (class)">EM::Client</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L2'>lib/mysql2/client.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1596'>ext/mysql2/client.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#default_query_options-class_method" title=".default_query_options (class method)">.<strong>default_query_options</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#escape-class_method" title="escape (class method)">.<strong>escape</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Escape <code>string</code> so that it may be used in a SQL statement.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#info-class_method" title="info (class method)">.<strong>info</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string that represents the client library version.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(opts = {})  &#x21d2; Client </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#local_offset-class_method" title=".local_offset (class method)">.<strong>local_offset</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#automatic_close=-instance_method" title="#automatic_close= (instance method)">#<strong>automatic_close=</strong>(false)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set this to <code>false</code> to leave the connection open after it is garbage collected.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#automatic_close%3F-instance_method" title="#automatic_close? (instance method)">#<strong>automatic_close?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#more_results%3F-instance_method" title="#more_results? (instance method)">#<strong>more_results?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true or false if there are more results to process.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#query_options-instance_method" title="#query_options (instance method)">#<strong>query_options</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#read_timeout-instance_method" title="#read_timeout (instance method)">#<strong>read_timeout</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#reconnect=-instance_method" title="#reconnect= (instance method)">#<strong>reconnect=</strong>(true)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Enable or disable the automatic reconnect behavior of libmysql.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#charset_name=-instance_method" title="#charset_name= (instance method)">#<strong>charset_name=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#connect_timeout=-instance_method" title="#connect_timeout= (instance method)">#<strong>connect_timeout=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#default_auth=-instance_method" title="#default_auth= (instance method)">#<strong>default_auth=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#default_file=-instance_method" title="#default_file= (instance method)">#<strong>default_file=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#default_group=-instance_method" title="#default_group= (instance method)">#<strong>default_group=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#enable_cleartext_plugin=-instance_method" title="#enable_cleartext_plugin= (instance method)">#<strong>enable_cleartext_plugin=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#get_server_public_key=-instance_method" title="#get_server_public_key= (instance method)">#<strong>get_server_public_key=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#init_command=-instance_method" title="#init_command= (instance method)">#<strong>init_command=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#local_infile=-instance_method" title="#local_infile= (instance method)">#<strong>local_infile=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature rw priv'>
      <a href="#read_timeout=-instance_method" title="#read_timeout= (instance method)">#<strong>read_timeout=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#secure_auth=-instance_method" title="#secure_auth= (instance method)">#<strong>secure_auth=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#ssl_mode=-instance_method" title="#ssl_mode= (instance method)">#<strong>ssl_mode=</strong>(setting)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature wo priv'>
      <a href="#write_timeout=-instance_method" title="#write_timeout= (instance method)">#<strong>write_timeout=</strong>(value)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#abandon_results!-instance_method" title="#abandon_results! (instance method)">#<strong>abandon_results!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>When using MULTI_STATEMENTS support, calling this will throw away any unprocessed results as fast as it can in order to put the connection back into a state where queries can be issued again.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#affected_rows-instance_method" title="#affected_rows (instance method)">#<strong>affected_rows</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>returns the number of rows changed, deleted, or inserted by the last statement if it was an UPDATE, DELETE, or INSERT.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#async_result-instance_method" title="#async_result (instance method)">#<strong>async_result</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the result for the last async issued query.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Immediately disconnect from the server; normally the garbage collector will disconnect automatically when a connection is no longer needed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#database-instance_method" title="#database (instance method)">#<strong>database</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the currently selected database.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the encoding set on the client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#escape-instance_method" title="#escape (instance method)">#<strong>escape</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Escape <code>string</code> so that it may be used in a SQL statement.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#find_default_ca_path-instance_method" title="#find_default_ca_path (instance method)">#<strong>find_default_ca_path</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Find any default system CA paths to handle system roots by default if stricter validation is requested and no path is provide.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#info-instance_method" title="#info (instance method)">#<strong>info</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#last_id-instance_method" title="#last_id (instance method)">#<strong>last_id</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value generated for an AUTO_INCREMENT column by the previous INSERT or UPDATE statement.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#next_result-instance_method" title="#next_result (instance method)">#<strong>next_result</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Fetch the next result set from the server.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_connect_attrs-instance_method" title="#parse_connect_attrs (instance method)">#<strong>parse_connect_attrs</strong>(conn_attrs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Set default program_name in performance_schema.session_connect_attrs and performance_schema.session_account_connect_attrs.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_flags_array-instance_method" title="#parse_flags_array (instance method)">#<strong>parse_flags_array</strong>(flags, initial = 0)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_ssl_mode-instance_method" title="#parse_ssl_mode (instance method)">#<strong>parse_ssl_mode</strong>(mode)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ping-instance_method" title="#ping (instance method)">#<strong>ping</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks whether the connection to the server is working.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prepare-instance_method" title="#prepare (instance method)">#<strong>prepare</strong>(#)  &#x21d2; Mysql2::Statement </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new prepared statement.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#query-instance_method" title="#query (instance method)">#<strong>query</strong>(sql, options = {})  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#query_info-instance_method" title="#query_info (instance method)">#<strong>query_info</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#query_info_string-instance_method" title="#query_info_string (instance method)">#<strong>query_info_string</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#select_db-instance_method" title="#select_db (instance method)">#<strong>select_db</strong>(name)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Causes the database specified by <code>name</code> to become the default (current) database on the connection specified by mysql.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#server_info-instance_method" title="#server_info (instance method)">#<strong>server_info</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string that represents the server version number.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#session_track-instance_method" title="#session_track (instance method)">#<strong>session_track</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns information about changes to the session state on the server.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_server_option-instance_method" title="#set_server_option (instance method)">#<strong>set_server_option</strong>(value)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Enables or disables an option for the connection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#socket-instance_method" title="#socket (instance method)">#<strong>socket</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ssl_cipher-instance_method" title="#ssl_cipher (instance method)">#<strong>ssl_cipher</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#store_result-instance_method" title="#store_result (instance method)">#<strong>store_result</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return the next result object from a query which yielded multiple result sets.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#thread_id-instance_method" title="#thread_id (instance method)">#<strong>thread_id</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the thread ID of the current connection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#warning_count-instance_method" title="#warning_count (instance method)">#<strong>warning_count</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#_query-instance_method" title="#query (instance method)">#<strong>query</strong>(sql, options = {})  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Query the database with <code>sql</code>, with optional <code>options</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#check_and_clean_query_options-instance_method" title="#check_and_clean_query_options (instance method)">#<strong>check_and_clean_query_options</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#connect-instance_method" title="#connect (instance method)">#<strong>connect</strong>(user, pass, host, port, database, socket, flags, conn_attrs)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#initialize_ext-instance_method" title="#initialize_ext (instance method)">#<strong>initialize_ext</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#ssl_set-instance_method" title="#ssl_set (instance method)">#<strong>ssl_set</strong>(key, cert, ca, capath, cipher)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(opts = {})  &#x21d2; <code>Client</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="Error.html" title="Mysql2::Error (class)">Mysql2::Error</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L21-L93'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='21' data-end='93'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 21</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> {})
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'><a href="Error.html" title="Mysql2::Error (class)">Error</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Options parameter must be a Hash</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Hash</span>

  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'><a href="Util.html" title="Mysql2::Util (module)">Util</a></span>.<span class='id identifier rubyid_key_hash_as_symbols'><a href="Util.html#key_hash_as_symbols-class_method" title="Mysql2::Util.key_hash_as_symbols (method)">key_hash_as_symbols</a></span>(<span class='id identifier rubyid_opts'>opts</span>)
  <span class='ivar'>@read_timeout</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@query_options</span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_default_query_options'><a href="#default_query_options-class_method" title="Mysql2::Client.default_query_options (method)">default_query_options</a></span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='ivar'>@query_options</span>.<span class='id identifier rubyid_merge!'>merge!</span> <span class='id identifier rubyid_opts'>opts</span>

  <span class='id identifier rubyid_initialize_ext'><a href="#initialize_ext-instance_method" title="Mysql2::Client#initialize_ext (method)">initialize_ext</a></span>

  <span class='comment'># Set default connect_timeout to avoid unlimited retries from signal interruption
</span>  <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_connect_timeout'>connect_timeout</span>] <span class='op'>=</span> <span class='int'>120</span> <span class='kw'>unless</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_connect_timeout'>connect_timeout</span>)

  <span class='comment'># TODO: stricter validation rather than silent massaging
</span>  <span class='qsymbols'><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>reconnect</span><span class='words_sep'> </span><span class='tstring_content'>connect_timeout</span><span class='words_sep'> </span><span class='tstring_content'>local_infile</span><span class='words_sep'> </span><span class='tstring_content'>read_timeout</span><span class='words_sep'> </span><span class='tstring_content'>write_timeout</span><span class='words_sep'> </span><span class='tstring_content'>default_file</span><span class='words_sep'> </span><span class='tstring_content'>default_group</span><span class='words_sep'> </span><span class='tstring_content'>secure_auth</span><span class='words_sep'> </span><span class='tstring_content'>init_command</span><span class='words_sep'> </span><span class='tstring_content'>automatic_close</span><span class='words_sep'> </span><span class='tstring_content'>enable_cleartext_plugin</span><span class='words_sep'> </span><span class='tstring_content'>default_auth</span><span class='words_sep'> </span><span class='tstring_content'>get_server_public_key</span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_key'>key</span>)

    <span class='kw'>case</span> <span class='id identifier rubyid_key'>key</span>
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_reconnect'>reconnect</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_local_infile'>local_infile</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_secure_auth'>secure_auth</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_automatic_close'>automatic_close</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_enable_cleartext_plugin'>enable_cleartext_plugin</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get_server_public_key'>get_server_public_key</span>
      <span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_opts'>opts</span>[<span class='id identifier rubyid_key'>key</span>]) <span class='comment'># rubocop:disable Style/DoubleNegation
</span>    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_connect_timeout'>connect_timeout</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_read_timeout'><a href="#read_timeout-instance_method" title="Mysql2::Client#read_timeout (method)">read_timeout</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_write_timeout'>write_timeout</span>
      <span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_opts'>opts</span>[<span class='id identifier rubyid_key'>key</span>])) <span class='kw'>unless</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='id identifier rubyid_key'>key</span>].<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='id identifier rubyid_key'>key</span>])
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># force the encoding to utf8mb4
</span>  <span class='kw'>self</span>.<span class='id identifier rubyid_charset_name'>charset_name</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Mysql2::Client#encoding (method)">encoding</a></span>] <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>utf8mb4</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_ssl_mode'><a href="#parse_ssl_mode-instance_method" title="Mysql2::Client#parse_ssl_mode (method)">parse_ssl_mode</a></span>(<span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_ssl_mode'>ssl_mode</span>]) <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_ssl_mode'>ssl_mode</span>]
  <span class='kw'>if</span> (<span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='const'>SSL_MODE_VERIFY_CA</span> <span class='op'>||</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='const'>SSL_MODE_VERIFY_IDENTITY</span>) <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_sslca'>sslca</span>]
    <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_sslca'>sslca</span>] <span class='op'>=</span> <span class='id identifier rubyid_find_default_ca_path'><a href="#find_default_ca_path-instance_method" title="Mysql2::Client#find_default_ca_path (method)">find_default_ca_path</a></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ssl_options'>ssl_options</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_values_at'>values_at</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_sslkey'>sslkey</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sslcert'>sslcert</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sslca'>sslca</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sslcapath'>sslcapath</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_sslcipher'>sslcipher</span>)
  <span class='id identifier rubyid_ssl_set'><a href="#ssl_set-instance_method" title="Mysql2::Client#ssl_set (method)">ssl_set</a></span>(<span class='op'>*</span><span class='id identifier rubyid_ssl_options'>ssl_options</span>) <span class='kw'>if</span> <span class='id identifier rubyid_ssl_options'>ssl_options</span>.<span class='id identifier rubyid_any?'>any?</span> <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_sslverify'>sslverify</span>)
  <span class='kw'>self</span>.<span class='id identifier rubyid_ssl_mode'>ssl_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_mode'>mode</span> <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span>

  <span class='id identifier rubyid_flags'>flags</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_flags'>flags</span>]
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_parse_flags_array'><a href="#parse_flags_array-instance_method" title="Mysql2::Client#parse_flags_array (method)">parse_flags_array</a></span>(<span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_flags'>flags</span>]<span class='comma'>,</span> <span class='ivar'>@query_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_connect_flags'>connect_flags</span>])
  <span class='kw'>when</span> <span class='const'>String</span>
    <span class='id identifier rubyid_parse_flags_array'><a href="#parse_flags_array-instance_method" title="Mysql2::Client#parse_flags_array (method)">parse_flags_array</a></span>(<span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_flags'>flags</span>].<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)<span class='comma'>,</span> <span class='ivar'>@query_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_connect_flags'>connect_flags</span>])
  <span class='kw'>when</span> <span class='const'>Integer</span>
    <span class='ivar'>@query_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_connect_flags'>connect_flags</span>] <span class='op'>|</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_flags'>flags</span>]
  <span class='kw'>else</span>
    <span class='ivar'>@query_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_connect_flags'>connect_flags</span>]
  <span class='kw'>end</span>

  <span class='comment'># SSL verify is a connection flag rather than a mysql_ssl_set option
</span>  <span class='id identifier rubyid_flags'>flags</span> <span class='op'>|=</span> <span class='const'>SSL_VERIFY_SERVER_CERT</span> <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_sslverify'>sslverify</span>]

  <span class='id identifier rubyid_check_and_clean_query_options'><a href="#check_and_clean_query_options-instance_method" title="Mysql2::Client#check_and_clean_query_options (method)">check_and_clean_query_options</a></span>

  <span class='id identifier rubyid_user'>user</span>     <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_username'>username</span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_user'>user</span>]
  <span class='id identifier rubyid_pass'>pass</span>     <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_password'>password</span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_pass'>pass</span>]
  <span class='id identifier rubyid_host'>host</span>     <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_host'>host</span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_hostname'>hostname</span>]
  <span class='id identifier rubyid_port'>port</span>     <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_port'>port</span>]
  <span class='id identifier rubyid_database'><a href="#database-instance_method" title="Mysql2::Client#database (method)">database</a></span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_database'><a href="#database-instance_method" title="Mysql2::Client#database (method)">database</a></span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dbname'>dbname</span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_db'>db</span>]
  <span class='id identifier rubyid_socket'><a href="#socket-instance_method" title="Mysql2::Client#socket (method)">socket</a></span>   <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_socket'><a href="#socket-instance_method" title="Mysql2::Client#socket (method)">socket</a></span>] <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_sock'>sock</span>]

  <span class='comment'># Correct the data types before passing these values down to the C level
</span>  <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user'>user</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_pass'>pass</span> <span class='op'>=</span> <span class='id identifier rubyid_pass'>pass</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='id identifier rubyid_pass'>pass</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_host'>host</span> <span class='op'>=</span> <span class='id identifier rubyid_host'>host</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='id identifier rubyid_host'>host</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='id identifier rubyid_port'>port</span>.<span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>unless</span> <span class='id identifier rubyid_port'>port</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_database'><a href="#database-instance_method" title="Mysql2::Client#database (method)">database</a></span> <span class='op'>=</span> <span class='id identifier rubyid_database'><a href="#database-instance_method" title="Mysql2::Client#database (method)">database</a></span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='id identifier rubyid_database'><a href="#database-instance_method" title="Mysql2::Client#database (method)">database</a></span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_socket'><a href="#socket-instance_method" title="Mysql2::Client#socket (method)">socket</a></span> <span class='op'>=</span> <span class='id identifier rubyid_socket'><a href="#socket-instance_method" title="Mysql2::Client#socket (method)">socket</a></span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='id identifier rubyid_socket'><a href="#socket-instance_method" title="Mysql2::Client#socket (method)">socket</a></span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_conn_attrs'>conn_attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_connect_attrs'><a href="#parse_connect_attrs-instance_method" title="Mysql2::Client#parse_connect_attrs (method)">parse_connect_attrs</a></span>(<span class='id identifier rubyid_opts'>opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_connect_attrs'>connect_attrs</span>])

  <span class='id identifier rubyid_connect'><a href="#connect-instance_method" title="Mysql2::Client#connect (method)">connect</a></span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_pass'>pass</span><span class='comma'>,</span> <span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_database'><a href="#database-instance_method" title="Mysql2::Client#database (method)">database</a></span><span class='comma'>,</span> <span class='id identifier rubyid_socket'><a href="#socket-instance_method" title="Mysql2::Client#socket (method)">socket</a></span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span> <span class='id identifier rubyid_conn_attrs'>conn_attrs</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="default_query_options-class_method">
  <h3 class='signature  first'>
    .<strong>default_query_options</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L5-L19'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5' data-end='19'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 5</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_default_query_options'>default_query_options</span>
  <span class='ivar'>@default_query_options</span> <span class='op'>||=</span> {
    <span class='label'>as:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span>                   <span class='comment'># the type of object you want each row back as; also supports :array (an array of values)
</span>    <span class='label'>async:</span> <span class='kw'>false</span><span class='comma'>,</span>                <span class='comment'># don&#39;t wait for a result after sending the query, you&#39;ll have to monitor the socket yourself then eventually call Mysql2::Client#async_result
</span>    <span class='label'>cast_booleans:</span> <span class='kw'>false</span><span class='comma'>,</span>        <span class='comment'># cast tinyint(1) fields as true/false in ruby
</span>    <span class='label'>symbolize_keys:</span> <span class='kw'>false</span><span class='comma'>,</span>       <span class='comment'># return field names as symbols instead of strings
</span>    <span class='label'>database_timezone:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_local'>local</span><span class='comma'>,</span>   <span class='comment'># timezone Mysql2 will assume datetime objects are stored in
</span>    <span class='label'>application_timezone:</span> <span class='kw'>nil</span><span class='comma'>,</span>   <span class='comment'># timezone Mysql2 will convert to before handing the object back to the caller
</span>    <span class='label'>cache_rows:</span> <span class='kw'>true</span><span class='comma'>,</span>            <span class='comment'># tells Mysql2 to use its internal row cache for results
</span>    <span class='label'>connect_flags:</span> <span class='const'>REMEMBER_OPTIONS</span> <span class='op'>|</span> <span class='const'>LONG_PASSWORD</span> <span class='op'>|</span> <span class='const'>LONG_FLAG</span> <span class='op'>|</span> <span class='const'>TRANSACTIONS</span> <span class='op'>|</span> <span class='const'>PROTOCOL_41</span> <span class='op'>|</span> <span class='const'>SECURE_CONNECTION</span> <span class='op'>|</span> <span class='const'>CONNECT_ATTRS</span><span class='comma'>,</span>
    <span class='label'>cast:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>default_file:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>default_group:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="escape-class_method">
  <h3 class='signature '>
    .<strong>escape</strong>(string)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Escape <code>string</code> so that it may be used in a SQL statement. Note that this escape method is not connection encoding aware. If you need encoding support use <a href="#escape-instance_method" title="Mysql2::Client#escape (method)">#escape</a> instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L430-L451'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='430' data-end='451'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 430</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_escape(RB_MYSQL_UNUSED VALUE klass, VALUE str) {
  unsigned char *newStr;
  VALUE rb_str;
  unsigned long newLen, oldLen;

  Check_Type(str, T_STRING);

  oldLen = RSTRING_LEN(str);
  newStr = xmalloc(oldLen*2+1);

  newLen = mysql_escape_string((char *)newStr, RSTRING_PTR(str), oldLen);
  if (newLen == oldLen) {
    /* no need to return a new ruby string if nothing changed */
    xfree(newStr);
    return str;
  } else {
    rb_str = rb_str_new((const char*)newStr, newLen);
    rb_enc_copy(rb_str, str);
    xfree(newStr);
    return rb_str;
  }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="info-class_method">
  <h3 class='signature '>
    .<strong>info</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string that represents the client library version.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1055-L1070'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1055' data-end='1070'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1055</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_info(RB_MYSQL_UNUSED VALUE klass) {
  VALUE version_info, version, header_version;
  version_info = rb_hash_new();

  version = rb_str_new2(mysql_get_client_info());
  header_version = rb_str_new2(MYSQL_LINK_VERSION);

  rb_enc_associate(version, rb_usascii_encoding());
  rb_enc_associate(header_version, rb_usascii_encoding());

  rb_hash_aset(version_info, sym_id, LONG2NUM(mysql_get_client_version()));
  rb_hash_aset(version_info, sym_version, version);
  rb_hash_aset(version_info, sym_header_version, header_version);

  return version_info;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="local_offset-class_method">
  <h3 class='signature priv'>
    .<strong>local_offset</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L181-L183'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='181' data-end='183'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 181</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_local_offset'>local_offset</span>
  <span class='op'>::</span><span class='const'>Time</span>.<span class='id identifier rubyid_local'>local</span>(<span class='int'>2010</span>).<span class='id identifier rubyid_utc_offset'>utc_offset</span>.<span class='id identifier rubyid_to_r'>to_r</span> <span class='op'>/</span> <span class='int'>86400</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="automatic_close=-instance_method">
  <h3 class='signature rw first'>
    #<strong>automatic_close=</strong>(false)   <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set this to <code>false</code> to leave the connection open after it is garbage collected. To avoid “Aborted connection” errors on the server, explicitly call <a href="#close-instance_method" title="Mysql2::Client#close (method)">#close</a> when the connection is no longer needed.</p>

  </div>
</div>
<div class='tags'>
    <p class='tag_title'>See Also:</p>
  <ul class='see'>
      <li><a href="http://dev.mysql.com/doc/en/communication-errors.html" target="_parent" title="http://dev.mysql.com/doc/en/communication-errors.html">http://dev.mysql.com/doc/en/communication-errors.html</a></li>
      </ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1378-L1390'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1378' data-end='1390'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1378</span></pre>
<pre class='code cpp'>

static VALUE set_automatic_close(VALUE self, VALUE value) {
  GET_CLIENT(self);
  if (RTEST(value)) {
    wrapper-&gt;automatic_close = 1;
  } else {
#ifndef _WIN32
    wrapper-&gt;automatic_close = 0;
#else
    rb_warn(&quot;Connections are always closed by garbage collector on Windows&quot;);
#endif
  }
  return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="automatic_close?-instance_method">
  <h3 class='signature rw'>
    #<strong>automatic_close?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1364-L1367'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1364' data-end='1367'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1364</span></pre>
<pre class='code cpp'>

static VALUE get_automatic_close(VALUE self) {
  GET_CLIENT(self);
  return wrapper-&gt;automatic_close ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="charset_name=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>charset_name=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1441-L1467'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1441' data-end='1467'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1441</span></pre>
<pre class='code cpp'>

static VALUE set_charset_name(VALUE self, VALUE value) {
  char *charset_name;
  const struct mysql2_mysql_enc_name_to_rb_map *mysql2rb;
  rb_encoding *enc;
  VALUE rb_enc;
  GET_CLIENT(self);

  Check_Type(value, T_STRING);
  charset_name = RSTRING_PTR(value);

  mysql2rb = mysql2_mysql_enc_name_to_rb(charset_name, (unsigned int)RSTRING_LEN(value));
  if (mysql2rb == NULL || mysql2rb-&gt;rb_name == NULL) {
    VALUE inspect = rb_inspect(value);
    rb_raise(cMysql2Error, &quot;Unsupported charset: &#39;%s&#39;&quot;, RSTRING_PTR(inspect));
  } else {
    enc = rb_enc_find(mysql2rb-&gt;rb_name);
    rb_enc = rb_enc_from_encoding(enc);
    wrapper-&gt;encoding = rb_enc;
  }

  if (mysql_options(wrapper-&gt;client, MYSQL_SET_CHARSET_NAME, charset_name)) {
    /* TODO: warning - unable to set charset */
    rb_warn(&quot;%s\n&quot;, mysql_error(wrapper-&gt;client));
  }

  return value;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="closed?-instance_method">
  <h3 class='signature ro'>
    #<strong>closed?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L587-L590'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='587' data-end='590'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 587</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_closed(VALUE self) {
  GET_CLIENT(self);
  return CONNECTED(wrapper) ? Qfalse : Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="connect_timeout=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>connect_timeout=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1407-L1415'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1407' data-end='1415'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1407</span></pre>
<pre class='code cpp'>

static VALUE set_connect_timeout(VALUE self, VALUE value) {
  long int sec;
  Check_Type(value, T_FIXNUM);
  sec = FIX2INT(value);
  if (sec &lt; 0) {
    rb_raise(cMysql2Error, &quot;connect_timeout must be a positive integer, you passed %ld&quot;, sec);
  }
  return _mysql_client_options(self, MYSQL_OPT_CONNECT_TIMEOUT, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_auth=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>default_auth=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1530-L1536'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1530' data-end='1536'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1530</span></pre>
<pre class='code cpp'>

static VALUE set_default_auth(VALUE self, VALUE value) {
#ifdef HAVE_MYSQL_DEFAULT_AUTH
  return _mysql_client_options(self, MYSQL_DEFAULT_AUTH, value);
#else
  rb_raise(cMysql2Error, &quot;pluggable authentication is not available, you may need a newer MySQL client library&quot;);
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_file=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>default_file=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1510-L1512'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1510' data-end='1512'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1510</span></pre>
<pre class='code cpp'>

static VALUE set_read_default_file(VALUE self, VALUE value) {
  return _mysql_client_options(self, MYSQL_READ_DEFAULT_FILE, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_group=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>default_group=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1514-L1516'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1514' data-end='1516'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1514</span></pre>
<pre class='code cpp'>

static VALUE set_read_default_group(VALUE self, VALUE value) {
  return _mysql_client_options(self, MYSQL_READ_DEFAULT_GROUP, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enable_cleartext_plugin=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>enable_cleartext_plugin=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1538-L1544'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1538' data-end='1544'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1538</span></pre>
<pre class='code cpp'>

static VALUE set_enable_cleartext_plugin(VALUE self, VALUE value) {
#ifdef HAVE_CONST_MYSQL_ENABLE_CLEARTEXT_PLUGIN
  return _mysql_client_options(self, MYSQL_ENABLE_CLEARTEXT_PLUGIN, value);
#else
  rb_raise(cMysql2Error, &quot;enable-cleartext-plugin is not available, you may need a newer MySQL client library&quot;);
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_server_public_key=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>get_server_public_key=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1522-L1528'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1522' data-end='1528'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1522</span></pre>
<pre class='code cpp'>

static VALUE set_get_server_public_key(VALUE self, VALUE value) {
#ifdef HAVE_CONST_MYSQL_OPT_GET_SERVER_PUBLIC_KEY
  return _mysql_client_options(self, MYSQL_OPT_GET_SERVER_PUBLIC_KEY, value);
#else
  rb_raise(cMysql2Error, &quot;get-server-public-key is not available, you may need a newer MySQL client library&quot;);
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="init_command=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>init_command=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1518-L1520'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1518' data-end='1520'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1518</span></pre>
<pre class='code cpp'>

static VALUE set_init_command(VALUE self, VALUE value) {
  return _mysql_client_options(self, MYSQL_INIT_COMMAND, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="local_infile=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>local_infile=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1403-L1405'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1403' data-end='1405'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1403</span></pre>
<pre class='code cpp'>

static VALUE set_local_infile(VALUE self, VALUE value) {
  return _mysql_client_options(self, MYSQL_OPT_LOCAL_INFILE, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="more_results?-instance_method">
  <h3 class='signature ro'>
    #<strong>more_results?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true or false if there are more results to process.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1266-L1273'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1266' data-end='1273'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1266</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_more_results(VALUE self)
{
  GET_CLIENT(self);
  if (mysql_more_results(wrapper-&gt;client) == 0)
    return Qfalse;
  else
    return Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="query_options-instance_method">
  <h3 class='signature ro'>
    #<strong>query_options</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L3-L3'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3' data-end='3'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 3</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_query_options'>query_options</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_read_timeout'><a href="#read_timeout-instance_method" title="Mysql2::Client#read_timeout (method)">read_timeout</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_timeout-instance_method">
  <h3 class='signature rw'>
    #<strong>read_timeout</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L3-L3'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3' data-end='3'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 3</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_query_options'><a href="#query_options-instance_method" title="Mysql2::Client#query_options (method)">query_options</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_read_timeout'>read_timeout</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_timeout=-instance_method">
  <h3 class='signature rw priv'>
    #<strong>read_timeout=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1417-L1429'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1417' data-end='1429'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1417</span></pre>
<pre class='code cpp'>

static VALUE set_read_timeout(VALUE self, VALUE value) {
  long int sec;
  Check_Type(value, T_FIXNUM);
  sec = FIX2INT(value);
  if (sec &lt; 0) {
    rb_raise(cMysql2Error, &quot;read_timeout must be a positive integer, you passed %ld&quot;, sec);
  }
  /* Set the instance variable here even though _mysql_client_options
     might not succeed, because the timeout is used in other ways
     elsewhere */
  rb_ivar_set(self, intern_read_timeout, value);
  return _mysql_client_options(self, MYSQL_OPT_READ_TIMEOUT, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reconnect=-instance_method">
  <h3 class='signature wo'>
    #<strong>reconnect=</strong>(true)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Enable or disable the automatic reconnect behavior of libmysql. Read <a href="http://dev.mysql.com/doc/refman/5.5/en/auto-reconnect.html">dev.mysql.com/doc/refman/5.5/en/auto-reconnect.html</a> for more information.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1399-L1401'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1399' data-end='1401'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1399</span></pre>
<pre class='code cpp'>

static VALUE set_reconnect(VALUE self, VALUE value) {
  return _mysql_client_options(self, MYSQL_OPT_RECONNECT, value);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="secure_auth=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>secure_auth=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1501-L1508'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1501' data-end='1508'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1501</span></pre>
<pre class='code cpp'>

static VALUE set_secure_auth(VALUE self, VALUE value) {
/* This option was deprecated in MySQL 5.x and removed in MySQL 8.0 */
#ifdef MYSQL_SECURE_AUTH
  return _mysql_client_options(self, MYSQL_SECURE_AUTH, value);
#else
  return Qfalse;
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ssl_mode=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>ssl_mode=</strong>(setting)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L124-L198'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='124' data-end='198'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 124</span></pre>
<pre class='code cpp'>

static VALUE rb_set_ssl_mode_option(VALUE self, VALUE setting) {
  unsigned long version = mysql_get_client_version();
  const char *version_str = mysql_get_client_info();

  /* Warn about versions that are known to be incomplete; these are pretty
   * ancient, we want people to upgrade if they need SSL/TLS to work
   *
   * MySQL 5.x before 5.6.30 -- ssl_mode introduced but not fully working until 5.6.36)
   * MySQL 5.7 before 5.7.3 -- ssl_mode introduced but not fully working until 5.7.11)
   */
  if ((version &gt;= 50000 &amp;&amp; version &lt; 50630) || (version &gt;= 50700 &amp;&amp; version &lt; 50703)) {
    rb_warn(&quot;Your mysql client library version %s does not support setting ssl_mode; full support comes with 5.6.36+, 5.7.11+, 8.0+&quot;, version_str);
    return Qnil;
  }

  /* For these versions, map from the options we&#39;re exposing to Ruby to the constant available:
   *   ssl_mode: :verify_identity to MYSQL_OPT_SSL_VERIFY_SERVER_CERT = 1
   *   ssl_mode: :required to MYSQL_OPT_SSL_ENFORCE = 1
   *   ssl_mode: :disabled to MYSQL_OPT_SSL_ENFORCE = 0
   */
#if defined(HAVE_CONST_MYSQL_OPT_SSL_VERIFY_SERVER_CERT) || defined(HAVE_CONST_MYSQL_OPT_SSL_ENFORCE)
  GET_CLIENT(self);
  int val = NUM2INT(setting);

  /* Expected code path for MariaDB 10.x and MariaDB Connector/C 3.x
   * Workaround code path for MySQL 5.7.3 - 5.7.10 and MySQL Connector/C 6.1.3 - 6.1.x
   */
  if (version &gt;= 100000                         // MariaDB (all versions numbered 10.x)
    || (version &gt;= 30000 &amp;&amp; version &lt; 40000)    // MariaDB Connector/C (all versions numbered 3.x)
    || (version &gt;= 50703 &amp;&amp; version &lt; 50711)    // Workaround for MySQL 5.7.3 - 5.7.10
    || (version &gt;= 60103 &amp;&amp; version &lt; 60200)) { // Workaround for MySQL Connector/C 6.1.3 - 6.1.x
#ifdef HAVE_CONST_MYSQL_OPT_SSL_VERIFY_SERVER_CERT
    if (val == SSL_MODE_VERIFY_IDENTITY) {
      my_bool b = 1;
      int result = mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_VERIFY_SERVER_CERT, &amp;b);
      return INT2NUM(result);
    }
#endif
#ifdef HAVE_CONST_MYSQL_OPT_SSL_ENFORCE
    if (val == SSL_MODE_DISABLED || val == SSL_MODE_REQUIRED) {
      my_bool b = (val == SSL_MODE_REQUIRED);
      int result = mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_ENFORCE, &amp;b);
      return INT2NUM(result);
    }
#endif
    rb_warn(&quot;Your mysql client library version %s does not support ssl_mode %d&quot;, version_str, val);
    return Qnil;
  } else {
    rb_warn(&quot;Your mysql client library version %s does not support ssl_mode as expected&quot;, version_str);
    return Qnil;
  }
#endif

  /* For other versions -- known to be MySQL 5.6.36+, 5.7.11+, 8.0+
   * pass the value of the argument to MYSQL_OPT_SSL_MODE -- note the code
   * mapping from atoms / constants is in the MySQL::Client Ruby class
   */
#ifdef FULL_SSL_MODE_SUPPORT
  GET_CLIENT(self);
  int val = NUM2INT(setting);

  if (val != SSL_MODE_DISABLED &amp;&amp; val != SSL_MODE_PREFERRED &amp;&amp; val != SSL_MODE_REQUIRED &amp;&amp; val != SSL_MODE_VERIFY_CA &amp;&amp; val != SSL_MODE_VERIFY_IDENTITY) {
    rb_raise(cMysql2Error, &quot;ssl_mode= takes DISABLED, PREFERRED, REQUIRED, VERIFY_CA, VERIFY_IDENTITY, you passed: %d&quot;, val );
  }
  int result = mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_MODE, &amp;val);

  return INT2NUM(result);
#endif

  // Warn if we get this far
#ifdef NO_SSL_MODE_SUPPORT
  rb_warn(&quot;Your mysql client library does not support setting ssl_mode&quot;);
  return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_timeout=-instance_method">
  <h3 class='signature wo priv'>
    #<strong>write_timeout=</strong>(value)   <span class="extras">(<span class='writeonly'>writeonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1431-L1439'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1431' data-end='1439'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1431</span></pre>
<pre class='code cpp'>

static VALUE set_write_timeout(VALUE self, VALUE value) {
  long int sec;
  Check_Type(value, T_FIXNUM);
  sec = FIX2INT(value);
  if (sec &lt; 0) {
    rb_raise(cMysql2Error, &quot;write_timeout must be a positive integer, you passed %ld&quot;, sec);
  }
  return _mysql_client_options(self, MYSQL_OPT_WRITE_TIMEOUT, value);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="_query-instance_method">
  <h3 class='signature priv first'>
    #<strong>query</strong>(sql, options = {})   <span class="extras">(<span class='priv'>private</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Query the database with <code>sql</code>, with optional <code>options</code>.  For the possible options, see default_query_options on the <code>Client</code> class.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L855-L899'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='855' data-end='899'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 855</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_query(VALUE self, VALUE sql, VALUE current) {
#ifndef _WIN32
  struct async_query_args async_args;
#endif
  struct nogvl_send_query_args args;
  GET_CLIENT(self);

  REQUIRE_CONNECTED(wrapper);
  args.mysql = wrapper-&gt;client;

  (void)RB_GC_GUARD(current);
  Check_Type(current, T_HASH);
  rb_ivar_set(self, intern_current_query_options, current);

  Check_Type(sql, T_STRING);
  /* ensure the string is in the encoding the connection is expecting */
  args.sql = rb_str_export_to_enc(sql, rb_to_encoding(wrapper-&gt;encoding));
  args.sql_ptr = RSTRING_PTR(args.sql);
  args.sql_len = RSTRING_LEN(args.sql);
  args.wrapper = wrapper;

  rb_mysql_client_set_active_fiber(self);

#ifndef _WIN32
  rb_rescue2(do_send_query, (VALUE)&amp;args, disconnect_and_raise, self, rb_eException, (VALUE)0);
  (void)RB_GC_GUARD(sql);

  if (rb_hash_aref(current, sym_async) == Qtrue) {
    return Qnil;
  } else {
    async_args.fd = wrapper-&gt;client-&gt;net.fd;
    async_args.self = self;

    rb_rescue2(do_query, (VALUE)&amp;async_args, disconnect_and_raise, self, rb_eException, (VALUE)0);

    return rb_ensure(rb_mysql_client_async_result, self, disconnect_and_mark_inactive, self);
  }
#else
  do_send_query((VALUE)&amp;args);
  (void)RB_GC_GUARD(sql);

  /* this will just block until the result is ready */
  return rb_ensure(rb_mysql_client_async_result, self, disconnect_and_mark_inactive, self);
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="abandon_results!-instance_method">
  <h3 class='signature '>
    #<strong>abandon_results!</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>When using MULTI_STATEMENTS support, calling this will throw away any unprocessed results as fast as it can in order to put the connection back into a state where queries can be issued again.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L827-L847'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='827' data-end='847'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 827</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_abandon_results(VALUE self) {
  MYSQL_RES *result;
  int ret;

  GET_CLIENT(self);

  while (mysql_more_results(wrapper-&gt;client) == 1) {
    ret = mysql_next_result(wrapper-&gt;client);
    if (ret &gt; 0) {
      rb_raise_mysql2_error(wrapper);
    }

    result = (MYSQL_RES *)rb_thread_call_without_gvl(nogvl_store_result, wrapper, RUBY_UBF_IO, 0);

    if (result != NULL) {
      mysql_free_result(result);
    }
  }

  return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="affected_rows-instance_method">
  <h3 class='signature '>
    #<strong>affected_rows</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>returns the number of rows changed, deleted, or inserted by the last statement if it was an UPDATE, DELETE, or INSERT.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1163-L1173'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1163' data-end='1173'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1163</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_affected_rows(VALUE self) {
  uint64_t retVal;
  GET_CLIENT(self);

  REQUIRE_CONNECTED(wrapper);
  retVal = wrapper-&gt;affected_rows;
  if (retVal == (my_ulonglong)-1) {
    rb_raise_mysql2_error(wrapper);
  }
  return ULL2NUM(retVal);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="async_result-instance_method">
  <h3 class='signature '>
    #<strong>async_result</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the result for the last async issued query.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L660-L704'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='660' data-end='704'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 660</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_async_result(VALUE self) {
  MYSQL_RES * result;
  VALUE resultObj;
  VALUE current, is_streaming;
  GET_CLIENT(self);

  /* if we&#39;re not waiting on a result, do nothing */
  if (NIL_P(wrapper-&gt;active_fiber))
    return Qnil;

  REQUIRE_CONNECTED(wrapper);
  if ((VALUE)rb_thread_call_without_gvl(nogvl_read_query_result, wrapper-&gt;client, RUBY_UBF_IO, 0) == Qfalse) {
    /* an error occurred, mark this connection inactive */
    wrapper-&gt;active_fiber = Qnil;
    rb_raise_mysql2_error(wrapper);
  }

  is_streaming = rb_hash_aref(rb_ivar_get(self, intern_current_query_options), sym_stream);
  if (is_streaming == Qtrue) {
    result = (MYSQL_RES *)rb_thread_call_without_gvl(nogvl_use_result, wrapper, RUBY_UBF_IO, 0);
  } else {
    result = (MYSQL_RES *)rb_thread_call_without_gvl(nogvl_store_result, wrapper, RUBY_UBF_IO, 0);
  }

  wrapper-&gt;affected_rows = mysql_affected_rows(wrapper-&gt;client);

  if (result == NULL) {
    if (mysql_errno(wrapper-&gt;client) != 0) {
      wrapper-&gt;active_fiber = Qnil;
      rb_raise_mysql2_error(wrapper);
    }
    /* no data and no error, so query was not a SELECT */
    return Qnil;
  }

  // Duplicate the options hash and put the copy in the Result object
  current = rb_hash_dup(rb_ivar_get(self, intern_current_query_options));
  (void)RB_GC_GUARD(current);
  Check_Type(current, T_HASH);
  resultObj = rb_mysql_result_to_obj(self, wrapper-&gt;encoding, current, result, Qnil);

  rb_mysql_set_server_query_flags(wrapper-&gt;client, resultObj);

  return resultObj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_and_clean_query_options-instance_method">
  <h3 class='signature priv'>
    #<strong>check_and_clean_query_options</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L165-L176'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='165' data-end='176'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 165</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_and_clean_query_options'>check_and_clean_query_options</span>
  <span class='kw'>if</span> <span class='qsymbols'><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>user</span><span class='words_sep'> </span><span class='tstring_content'>pass</span><span class='words_sep'> </span><span class='tstring_content'>hostname</span><span class='words_sep'> </span><span class='tstring_content'>dbname</span><span class='words_sep'> </span><span class='tstring_content'>db</span><span class='words_sep'> </span><span class='tstring_content'>sock</span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_any?'>any?</span> { <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='ivar'>@query_options</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_k'>k</span>) }
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>============= WARNING FROM mysql2 =============</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The options :user, :pass, :hostname, :dbname, :db, and :sock are deprecated and will be removed at some point in the future.</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Instead, please use :username, :password, :host, :port, :database, :socket, :flags for the options.</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>============= END WARNING FROM mysql2 =========</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># avoid logging sensitive data via #inspect
</span>  <span class='ivar'>@query_options</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_password'>password</span>)
  <span class='ivar'>@query_options</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_pass'>pass</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close-instance_method">
  <h3 class='signature '>
    #<strong>close</strong>  &#x21d2; <code>nil</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Immediately disconnect from the server; normally the garbage collector will disconnect automatically when a connection is no longer needed. Explicitly closing this will free up server resources sooner than waiting for the garbage collector.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L572-L580'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='572' data-end='580'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 572</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_close(VALUE self) {
  GET_CLIENT(self);

  if (wrapper-&gt;client) {
    rb_thread_call_without_gvl(nogvl_close, wrapper, RUBY_UBF_IO, 0);
  }

  return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="connect-instance_method">
  <h3 class='signature priv'>
    #<strong>connect</strong>(user, pass, host, port, database, socket, flags, conn_attrs)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L510-L562'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='510' data-end='562'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 510</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_connect(VALUE self, VALUE user, VALUE pass, VALUE host, VALUE port, VALUE database, VALUE socket, VALUE flags, VALUE conn_attrs) {
  struct nogvl_connect_args args;
  time_t start_time, end_time, elapsed_time, connect_timeout;
  VALUE rv;
  GET_CLIENT(self);

  args.host        = NIL_P(host)     ? NULL : StringValueCStr(host);
  args.unix_socket = NIL_P(socket)   ? NULL : StringValueCStr(socket);
  args.port        = NIL_P(port)     ? 0    : NUM2INT(port);
  args.user        = NIL_P(user)     ? NULL : StringValueCStr(user);
  args.passwd      = NIL_P(pass)     ? NULL : StringValueCStr(pass);
  args.db          = NIL_P(database) ? NULL : StringValueCStr(database);
  args.mysql       = wrapper-&gt;client;
  args.client_flag = NUM2ULONG(flags);

#ifdef CLIENT_CONNECT_ATTRS
  mysql_options(wrapper-&gt;client, MYSQL_OPT_CONNECT_ATTR_RESET, 0);
  rb_hash_foreach(conn_attrs, opt_connect_attr_add_i, (VALUE)wrapper);
#endif

  if (wrapper-&gt;connect_timeout)
    time(&amp;start_time);
  rv = (VALUE) rb_thread_call_without_gvl(nogvl_connect, &amp;args, RUBY_UBF_IO, 0);
  if (rv == Qfalse) {
    while (rv == Qfalse &amp;&amp; errno == EINTR) {
      if (wrapper-&gt;connect_timeout) {
        time(&amp;end_time);
        /* avoid long connect timeout from system time changes */
        if (end_time &lt; start_time)
          start_time = end_time;
        elapsed_time = end_time - start_time;
        /* avoid an early timeout due to time truncating milliseconds off the start time */
        if (elapsed_time &gt; 0)
          elapsed_time--;
        if (elapsed_time &gt;= (time_t)wrapper-&gt;connect_timeout)
          break;
        connect_timeout = wrapper-&gt;connect_timeout - elapsed_time;
        mysql_options(wrapper-&gt;client, MYSQL_OPT_CONNECT_TIMEOUT, &amp;connect_timeout);
      }
      errno = 0;
      rv = (VALUE) rb_thread_call_without_gvl(nogvl_connect, &amp;args, RUBY_UBF_IO, 0);
    }
    /* restore the connect timeout for reconnecting */
    if (wrapper-&gt;connect_timeout)
      mysql_options(wrapper-&gt;client, MYSQL_OPT_CONNECT_TIMEOUT, &amp;wrapper-&gt;connect_timeout);
    if (rv == Qfalse)
      rb_raise_mysql2_error(wrapper);
  }

  wrapper-&gt;closed = 0;
  wrapper-&gt;server_version = mysql_get_server_version(wrapper-&gt;client);
  return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="database-instance_method">
  <h3 class='signature '>
    #<strong>database</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the currently selected database.</p>

<p>The result may be stale if <code>session_track_schema</code> is disabled.  Read <a href="https://dev.mysql.com/doc/refman/5.7/en/session-state-tracking.html">dev.mysql.com/doc/refman/5.7/en/session-state-tracking.html</a> for more information.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1348-L1357'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1348' data-end='1357'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1348</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_database(VALUE self) {
  GET_CLIENT(self);

  char *db = wrapper-&gt;client-&gt;db;
  if (!db) {
    return Qnil;
  }

  return rb_str_new_cstr(wrapper-&gt;client-&gt;db);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encoding-instance_method">
  <h3 class='signature '>
    #<strong>encoding</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the encoding set on the client.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1334-L1337'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1334' data-end='1337'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1334</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_encoding(VALUE self) {
  GET_CLIENT(self);
  return wrapper-&gt;encoding;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="escape-instance_method">
  <h3 class='signature '>
    #<strong>escape</strong>(string)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Escape <code>string</code> so that it may be used in a SQL statement.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L906-L941'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='906' data-end='941'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 906</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_real_escape(VALUE self, VALUE str) {
  unsigned char *newStr;
  VALUE rb_str;
  unsigned long newLen, oldLen;
  rb_encoding *default_internal_enc;
  rb_encoding *conn_enc;
  GET_CLIENT(self);

  REQUIRE_CONNECTED(wrapper);
  Check_Type(str, T_STRING);
  default_internal_enc = rb_default_internal_encoding();
  conn_enc = rb_to_encoding(wrapper-&gt;encoding);
  /* ensure the string is in the encoding the connection is expecting */
  str = rb_str_export_to_enc(str, conn_enc);

  oldLen = RSTRING_LEN(str);
  newStr = xmalloc(oldLen*2+1);

  newLen = mysql_real_escape_string(wrapper-&gt;client, (char *)newStr, RSTRING_PTR(str), oldLen);
  if (newLen == oldLen) {
    /* no need to return a new ruby string if nothing changed */
    if (default_internal_enc) {
      str = rb_str_export_to_enc(str, default_internal_enc);
    }
    xfree(newStr);
    return str;
  } else {
    rb_str = rb_str_new((const char*)newStr, newLen);
    rb_enc_associate(rb_str, conn_enc);
    if (default_internal_enc) {
      rb_str = rb_str_export_to_enc(rb_str, default_internal_enc);
    }
    xfree(newStr);
    return rb_str;
  }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="find_default_ca_path-instance_method">
  <h3 class='signature '>
    #<strong>find_default_ca_path</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Find any default system CA paths to handle system roots by default if stricter validation is requested and no path is provide.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L123-L130'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='123' data-end='130'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 123</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_find_default_ca_path'>find_default_ca_path</span>
  [
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/etc/ssl/certs/ca-certificates.crt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/etc/pki/tls/certs/ca-bundle.crt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/etc/ssl/ca-bundle.pem</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/etc/ssl/cert.pem</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  ].<span class='id identifier rubyid_find'>find</span> { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_f'>f</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="info-instance_method">
  <h3 class='signature '>
    #<strong>info</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L159-L161'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='159' data-end='161'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 159</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_info'>info</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_info'>info</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_ext-instance_method">
  <h3 class='signature priv'>
    #<strong>initialize_ext</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1546-L1556'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1546' data-end='1556'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1546</span></pre>
<pre class='code cpp'>

static VALUE initialize_ext(VALUE self) {
  GET_CLIENT(self);

  if ((VALUE)rb_thread_call_without_gvl(nogvl_init, wrapper, RUBY_UBF_IO, 0) == Qfalse) {
    /* TODO: warning - not enough memory? */
    rb_raise_mysql2_error(wrapper);
  }

  wrapper-&gt;initialized = 1;
  return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="last_id-instance_method">
  <h3 class='signature '>
    #<strong>last_id</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value generated for an AUTO_INCREMENT column by the previous INSERT or UPDATE statement.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1121-L1125'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1121' data-end='1125'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1121</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_last_id(VALUE self) {
  GET_CLIENT(self);
  REQUIRE_CONNECTED(wrapper);
  return ULL2NUM(mysql_insert_id(wrapper-&gt;client));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="next_result-instance_method">
  <h3 class='signature '>
    #<strong>next_result</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Fetch the next result set from the server. Returns nothing.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1281-L1295'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1281' data-end='1295'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1281</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_next_result(VALUE self)
{
    int ret;
    GET_CLIENT(self);
    ret = mysql_next_result(wrapper-&gt;client);
    wrapper-&gt;affected_rows = mysql_affected_rows(wrapper-&gt;client);
    if (ret &gt; 0) {
      rb_raise_mysql2_error(wrapper);
      return Qfalse;
    } else if (ret == 0) {
      return Qtrue;
    } else {
      return Qfalse;
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_connect_attrs-instance_method">
  <h3 class='signature '>
    #<strong>parse_connect_attrs</strong>(conn_attrs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set default program_name in performance_schema.session_connect_attrs and performance_schema.session_account_connect_attrs</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L134-L142'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='134' data-end='142'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 134</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_connect_attrs'>parse_connect_attrs</span>(<span class='id identifier rubyid_conn_attrs'>conn_attrs</span>)
  <span class='kw'>return</span> {} <span class='kw'>if</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span><span class='op'>::</span><span class='const'>CONNECT_ATTRS</span>.<span class='id identifier rubyid_zero?'>zero?</span>

  <span class='id identifier rubyid_conn_attrs'>conn_attrs</span> <span class='op'>||=</span> {}
  <span class='id identifier rubyid_conn_attrs'>conn_attrs</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_program_name'>program_name</span>] <span class='op'>||=</span> <span class='gvar'>$PROGRAM_NAME</span>
  <span class='id identifier rubyid_conn_attrs'>conn_attrs</span>.<span class='id identifier rubyid_each_with_object'>each_with_object</span>({}) <span class='kw'>do</span> <span class='op'>|</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>)<span class='comma'>,</span> <span class='id identifier rubyid_hash'>hash</span><span class='op'>|</span>
    <span class='id identifier rubyid_hash'>hash</span>[<span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_to_s'>to_s</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_flags_array-instance_method">
  <h3 class='signature '>
    #<strong>parse_flags_array</strong>(flags, initial = 0)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L106-L118'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='106' data-end='118'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 106</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_flags_array'>parse_flags_array</span>(<span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span> <span class='id identifier rubyid_initial'>initial</span> <span class='op'>=</span> <span class='int'>0</span>)
  <span class='id identifier rubyid_flags'>flags</span>.<span class='id identifier rubyid_reduce'>reduce</span>(<span class='id identifier rubyid_initial'>initial</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_memo'>memo</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='id identifier rubyid_fneg'>fneg</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>?</span> <span class='id identifier rubyid_f'>f</span>[<span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>] <span class='op'>:</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_fneg'>fneg</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_fneg'>fneg</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\w+$</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_defined?'>const_defined?</span>(<span class='id identifier rubyid_fneg'>fneg</span>)
      <span class='id identifier rubyid_memo'>memo</span> <span class='op'>&amp;</span> <span class='op'>~</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_get'>const_get</span>(<span class='id identifier rubyid_fneg'>fneg</span>)
    <span class='kw'>elsif</span> <span class='id identifier rubyid_f'>f</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_f'>f</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\w+$</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_defined?'>const_defined?</span>(<span class='id identifier rubyid_f'>f</span>)
      <span class='id identifier rubyid_memo'>memo</span> <span class='op'>|</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_get'>const_get</span>(<span class='id identifier rubyid_f'>f</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown MySQL connection flag: &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_memo'>memo</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_ssl_mode-instance_method">
  <h3 class='signature '>
    #<strong>parse_ssl_mode</strong>(mode)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L95-L104'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='95' data-end='104'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 95</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_ssl_mode'>parse_ssl_mode</span>(<span class='id identifier rubyid_mode'>mode</span>)
  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_mode'>mode</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_upcase'>upcase</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SSL_MODE_</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>return</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_get'>const_get</span>(<span class='id identifier rubyid_m'>m</span>) <span class='kw'>if</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_defined?'>const_defined?</span>(<span class='id identifier rubyid_m'>m</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SSL_MODE_</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_m'>m</span>
    <span class='kw'>return</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_get'>const_get</span>(<span class='id identifier rubyid_x'>x</span>) <span class='kw'>if</span> <span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_const_defined?'>const_defined?</span>(<span class='id identifier rubyid_x'>x</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown MySQL ssl_mode flag: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ping-instance_method">
  <h3 class='signature '>
    #<strong>ping</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Checks whether the connection to the server is working. If the connection has gone down and auto-reconnect is enabled an attempt to reconnect is made. If the connection is down and auto-reconnect is disabled, ping returns an error.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1234-L1242'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1234' data-end='1242'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1234</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_ping(VALUE self) {
  GET_CLIENT(self);

  if (!CONNECTED(wrapper)) {
    return Qfalse;
  } else {
    return (VALUE)rb_thread_call_without_gvl(nogvl_ping, wrapper-&gt;client, RUBY_UBF_IO, 0);
  }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prepare-instance_method">
  <h3 class='signature '>
    #<strong>prepare</strong>(#)  &#x21d2; <a href="Statement.html" title="Mysql2::Statement (class)">Mysql2::Statement</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new prepared statement.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1562-L1567'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1562' data-end='1567'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1562</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_prepare_statement(VALUE self, VALUE sql) {
  GET_CLIENT(self);
  REQUIRE_CONNECTED(wrapper);

  return rb_mysql_stmt_new(self, sql);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="query-instance_method">
  <h3 class='signature '>
    #<strong>query</strong>(sql, options = {})  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L144-L148'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='144' data-end='148'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 144</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_query'>query</span>(<span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {})
  <span class='const'>Thread</span>.<span class='id identifier rubyid_handle_interrupt'>handle_interrupt</span>(<span class='op'>::</span><span class='const'><a href="../Mysql2.html" title="Mysql2 (module)">Mysql2</a></span><span class='op'>::</span><span class='const'><a href="Util.html" title="Mysql2::Util (module)">Util</a></span><span class='op'>::</span><span class='const'><a href="Util.html#TIMEOUT_ERROR_NEVER-constant" title="Mysql2::Util::TIMEOUT_ERROR_NEVER (constant)">TIMEOUT_ERROR_NEVER</a></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid__query'><a href="#_query-instance_method" title="Mysql2::Client#_query (method)">_query</a></span>(<span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span> <span class='ivar'>@query_options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_options'>options</span>))
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="query_info-instance_method">
  <h3 class='signature '>
    #<strong>query_info</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L150-L157'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='150' data-end='157'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/mysql2/client.rb', line 150</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_query_info'>query_info</span>
  <span class='id identifier rubyid_info'><a href="#info-class_method" title="Mysql2::Client.info (method)">info</a></span> <span class='op'>=</span> <span class='id identifier rubyid_query_info_string'><a href="#query_info_string-instance_method" title="Mysql2::Client#query_info_string (method)">query_info_string</a></span>
  <span class='kw'>return</span> {} <span class='kw'>unless</span> <span class='id identifier rubyid_info'><a href="#info-class_method" title="Mysql2::Client.info (method)">info</a></span>

  <span class='id identifier rubyid_info_hash'>info_hash</span> <span class='op'>=</span> {}
  <span class='id identifier rubyid_info'><a href="#info-class_method" title="Mysql2::Client.info (method)">info</a></span>.<span class='id identifier rubyid_split'>split</span>.<span class='id identifier rubyid_each_slice'>each_slice</span>(<span class='int'>2</span>) { <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_info_hash'>info_hash</span>[<span class='id identifier rubyid_s'>s</span>[<span class='int'>0</span>].<span class='id identifier rubyid_downcase'>downcase</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_to_sym'>to_sym</span>] <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'>to_i</span> }
  <span class='id identifier rubyid_info_hash'>info_hash</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="query_info_string-instance_method">
  <h3 class='signature '>
    #<strong>query_info_string</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L462-L477'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='462' data-end='477'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 462</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_info(VALUE self) {
  const char *info;
  VALUE rb_str;
  GET_CLIENT(self);

  info = mysql_info(wrapper-&gt;client);

  if (info == NULL) {
    return Qnil;
  }

  rb_str = rb_str_new2(info);
  rb_enc_associate(rb_str, rb_utf8_encoding());

  return rb_str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="select_db-instance_method">
  <h3 class='signature '>
    #<strong>select_db</strong>(name)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Causes the database specified by <code>name</code> to become the default (current) database on the connection specified by mysql.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1204-L1218'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1204' data-end='1218'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1204</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_select_db(VALUE self, VALUE db)
{
  struct nogvl_select_db_args args;

  GET_CLIENT(self);
  REQUIRE_CONNECTED(wrapper);

  args.mysql = wrapper-&gt;client;
  args.db = StringValueCStr(db);

  if (rb_thread_call_without_gvl(nogvl_select_db, &amp;args, RUBY_UBF_IO, 0) == Qfalse)
    rb_raise_mysql2_error(wrapper);

  return db;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="server_info-instance_method">
  <h3 class='signature '>
    #<strong>server_info</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string that represents the server version number</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1077-L1096'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1077' data-end='1096'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1077</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_server_info(VALUE self) {
  VALUE version, server_info;
  rb_encoding *default_internal_enc;
  rb_encoding *conn_enc;
  GET_CLIENT(self);

  REQUIRE_CONNECTED(wrapper);
  default_internal_enc = rb_default_internal_encoding();
  conn_enc = rb_to_encoding(wrapper-&gt;encoding);

  version = rb_hash_new();
  rb_hash_aset(version, sym_id, LONG2FIX(mysql_get_server_version(wrapper-&gt;client)));
  server_info = rb_str_new2(mysql_get_server_info(wrapper-&gt;client));
  rb_enc_associate(server_info, conn_enc);
  if (default_internal_enc) {
    server_info = rb_str_export_to_enc(server_info, default_internal_enc);
  }
  rb_hash_aset(version, sym_version, server_info);
  return version;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="session_track-instance_method">
  <h3 class='signature '>
    #<strong>session_track</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns information about changes to the session state on the server.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1132-L1155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1132' data-end='1155'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1132</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_session_track(VALUE self, VALUE type) {
#ifdef CLIENT_SESSION_TRACK
  const char *data;
  size_t length;
  my_ulonglong retVal;
  GET_CLIENT(self);

  REQUIRE_CONNECTED(wrapper);
  retVal = mysql_session_track_get_first(wrapper-&gt;client, NUM2INT(type), &amp;data, &amp;length);
  if (retVal != 0) {
    return Qnil;
  }
  VALUE rbAry = rb_ary_new();
  VALUE rbFirst = rb_str_new(data, length);
  rb_ary_push(rbAry, rbFirst);
  while(mysql_session_track_get_next(wrapper-&gt;client, NUM2INT(type), &amp;data, &amp;length) == 0) {
    VALUE rbNext = rb_str_new(data, length);
    rb_ary_push(rbAry, rbNext);
  }
  return rbAry;
#else
  return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_server_option-instance_method">
  <h3 class='signature '>
    #<strong>set_server_option</strong>(value)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Enables or disables an option for the connection. Read <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-set-server-option.html">dev.mysql.com/doc/refman/5.7/en/mysql-set-server-option.html</a> for more information.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1251-L1259'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1251' data-end='1259'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1251</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_set_server_option(VALUE self, VALUE value) {
  GET_CLIENT(self);

  if (mysql_set_server_option(wrapper-&gt;client, NUM2INT(value)) == 0) {
    return Qtrue;
  } else {
    return Qfalse;
  }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="socket-instance_method">
  <h3 class='signature '>
    #<strong>socket</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1110-L1112'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1110' data-end='1112'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1110</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_socket(RB_MYSQL_UNUSED VALUE self) {
  rb_raise(cMysql2Error, &quot;Raw access to the mysql file descriptor isn&#39;t supported on Windows&quot;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ssl_cipher-instance_method">
  <h3 class='signature '>
    #<strong>ssl_cipher</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L479-L495'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='479' data-end='495'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 479</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_get_ssl_cipher(VALUE self)
{
  const char *cipher;
  VALUE rb_str;
  GET_CLIENT(self);

  cipher = mysql_get_ssl_cipher(wrapper-&gt;client);

  if (cipher == NULL) {
    return Qnil;
  }

  rb_str = rb_str_new2(cipher);
  rb_enc_associate(rb_str, rb_utf8_encoding());

  return rb_str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ssl_set-instance_method">
  <h3 class='signature priv'>
    #<strong>ssl_set</strong>(key, cert, ca, capath, cipher)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1469-L1499'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1469' data-end='1499'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1469</span></pre>
<pre class='code cpp'>

static VALUE set_ssl_options(VALUE self, VALUE key, VALUE cert, VALUE ca, VALUE capath, VALUE cipher) {
  GET_CLIENT(self);

#ifdef HAVE_MYSQL_SSL_SET
  mysql_ssl_set(wrapper-&gt;client,
      NIL_P(key)    ? NULL : StringValueCStr(key),
      NIL_P(cert)   ? NULL : StringValueCStr(cert),
      NIL_P(ca)     ? NULL : StringValueCStr(ca),
      NIL_P(capath) ? NULL : StringValueCStr(capath),
      NIL_P(cipher) ? NULL : StringValueCStr(cipher));
#else
  /* mysql 8.3 does not provide mysql_ssl_set */
  if (!NIL_P(key)) {
    mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_KEY, StringValueCStr(key));
  }
  if (!NIL_P(cert)) {
    mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_CERT, StringValueCStr(cert));
  }
  if (!NIL_P(ca)) {
    mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_CA, StringValueCStr(ca));
  }
  if (!NIL_P(capath)) {
    mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_CAPATH, StringValueCStr(capath));
  }
  if (!NIL_P(cipher)) {
    mysql_options(wrapper-&gt;client, MYSQL_OPT_SSL_CIPHER, StringValueCStr(cipher));
  }
#endif

  return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="store_result-instance_method">
  <h3 class='signature '>
    #<strong>store_result</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return the next result object from a query which yielded multiple result sets.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1303-L1327'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1303' data-end='1327'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1303</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_store_result(VALUE self)
{
  MYSQL_RES * result;
  VALUE resultObj;
  VALUE current;
  GET_CLIENT(self);

  result = (MYSQL_RES *)rb_thread_call_without_gvl(nogvl_store_result, wrapper, RUBY_UBF_IO, 0);

  if (result == NULL) {
    if (mysql_errno(wrapper-&gt;client) != 0) {
      rb_raise_mysql2_error(wrapper);
    }
    /* no data and no error, so query was not a SELECT */
    return Qnil;
  }

  // Duplicate the options hash and put the copy in the Result object
  current = rb_hash_dup(rb_ivar_get(self, intern_current_query_options));
  (void)RB_GC_GUARD(current);
  Check_Type(current, T_HASH);
  resultObj = rb_mysql_result_to_obj(self, wrapper-&gt;encoding, current, result, Qnil);

  return resultObj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_id-instance_method">
  <h3 class='signature '>
    #<strong>thread_id</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the thread ID of the current connection.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L1180-L1187'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1180' data-end='1187'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 1180</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_thread_id(VALUE self) {
  unsigned long retVal;
  GET_CLIENT(self);

  REQUIRE_CONNECTED(wrapper);
  retVal = mysql_thread_id(wrapper-&gt;client);
  return ULL2NUM(retVal);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="warning_count-instance_method">
  <h3 class='signature '>
    #<strong>warning_count</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/brianmario/mysql2/blob/master/ext/mysql2/client.c#L453-L460'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='453' data-end='460'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/mysql2/client.c', line 453</span></pre>
<pre class='code cpp'>

static VALUE rb_mysql_client_warning_count(VALUE self) {
  unsigned int warning_count;
  GET_CLIENT(self);

  warning_count = mysql_warning_count(wrapper-&gt;client);

  return UINT2NUM(warning_count);
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>