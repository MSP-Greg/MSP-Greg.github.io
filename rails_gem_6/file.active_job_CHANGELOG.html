<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Active Job CHANGELOG &mdash; Rails 6.1.7.7</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "active_job_CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rails 6.1.7.7</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Active Job CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h2>Rails 6.1.7.7 (February 21, 2024)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.6 (August 22, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.5 (August 22, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.4 (June 26, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.3 (March 13, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.2 (January 24, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.1 (January 17, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7 (September 09, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.6.1 (July 12, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.6 (May 09, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.5.1 (April 26, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.5 (March 09, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.7 (March 08, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.6 (February 11, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.5 (February 11, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.4 (December 15, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.3 (December 14, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.2 (December 14, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.1 (August 19, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4 (June 24, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.3.2 (May 05, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.3.1 (March 26, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.3 (February 17, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.2.1 (February 10, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.2 (February 09, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.1 (January 07, 2021)</h2>

<ul>
<li><p>Make <code>retry_job</code> return the job that was created.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Include <a href="ActiveSupport/Testing/Assertions.html" title="ActiveSupport::Testing::Assertions (module)"><code>::ActiveSupport::Testing::Assertions</code></a> in <code>ActiveJob::TestHelpers</code>.</p>

<p><em>Mikkel Malmberg</em></p></li>
</ul>

<h2>Rails 6.1.0 (December 09, 2020)</h2>

<ul>
<li><p>Recover nano precision when serializing <a href="Time.html" title="Time (class)"><code>Time</code></a>, <code>TimeWithZone</code> and <a href="DateTime.html" title="DateTime (class)"><code>DateTime</code></a> objects.</p>

<p><em>Alan Tan</em></p></li>
<li><p>Deprecate <code>config.active_job.return_false_on_aborted_enqueue</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Return <code>false</code> when enqueuing a job is aborted.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>While using <code>perform_enqueued_jobs</code> test helper enqueued jobs must be stored for the later check with
<code>assert_enqueued_with</code>.</p>

<p><em>Dmitry Polushkin</em></p></li>
<li><p><code>ActiveJob::TestCase#perform_enqueued_jobs</code> without a block removes performed jobs from the queue.</p>

<p>That way the helper can be called multiple times and not perform a job invocation multiple times.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_test_jobs'>test_jobs</span>
  <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rafael</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span> <span class='comment'># only runs with &quot;rafael&quot;
</span>  <span class='const'>HelloJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>david</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_perform_enqueued_jobs'>perform_enqueued_jobs</span> <span class='comment'># only runs with &quot;david&quot;
</span><span class='kw'>end</span></code></pre>

<p><em>Étienne Barrié</em></p></li>
<li><p><code>ActiveJob::TestCase#perform_enqueued_jobs</code> will no longer perform retries:</p>

<p>When calling <code>perform_enqueued_jobs</code> without a block, the adapter will
now perform jobs that are <strong>already</strong> in the queue. Jobs that will end up in
the queue afterwards won&#39;t be performed.</p>

<p>This change only affects <code>perform_enqueued_jobs</code> when no block is given.</p>

<p><em>Edouard Chin</em></p></li>
<li><p>Add queue name support to Que adapter.</p>

<p><em>Brad Nauta</em>, <em>Wojciech Wnętrzak</em></p></li>
<li><p>Don&#39;t run <code>after_enqueue</code> and <code>after_perform</code> callbacks if the callback chain is halted.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MyJob</span> <span class='op'>&lt;</span> <span class='const'>ApplicationJob</span>
  <span class='id identifier rubyid_before_enqueue'>before_enqueue</span> { <span class='id identifier rubyid_throw'>throw</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_abort'>abort</span>) }
  <span class='id identifier rubyid_after_enqueue'>after_enqueue</span> { <span class='comment'># won&#39;t enter here anymore }
</span><span class='kw'>end</span></code></pre>

<p><code>after_enqueue</code> and <code>after_perform</code> callbacks will no longer run if the callback chain is halted.
This behaviour is a breaking change and won&#39;t take effect until Rails 7.0.
To enable this behaviour in your app right now, you can add in your app&#39;s configuration file
<code>config.active_job.skip_after_callbacks_if_terminated = true</code>.</p>

<p><em>Edouard Chin</em></p></li>
<li><p>Fix enqueuing and performing incorrect logging message.</p>

<p>Jobs will no longer always log &quot;Enqueued MyJob&quot; or &quot;Performed MyJob&quot; when they actually didn&#39;t get enqueued/performed.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MyJob</span> <span class='op'>&lt;</span> <span class='const'>ApplicationJob</span>
  <span class='id identifier rubyid_before_enqueue'>before_enqueue</span> { <span class='id identifier rubyid_throw'>throw</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_abort'>abort</span>) }
<span class='kw'>end</span>

<span class='const'>MyJob</span>.<span class='id identifier rubyid_perform_later'>perform_later</span> <span class='comment'># Will no longer log &quot;Enqueued MyJob&quot; since job wasn&#39;t even enqueued through adapter.</span></code></pre>

<p>A new message will be logged in case a job couldn&#39;t be enqueued, either because the callback chain was halted or
because an exception happened during enqueuing. (i.e. Redis is down when you try to enqueue your job)</p>

<p><em>Edouard Chin</em></p></li>
<li><p>Add an option to disable logging of the job arguments when enqueuing and executing the job.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>SensitiveJob</span> <span class='op'>&lt;</span> <span class='const'>ApplicationJob</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_log_arguments'>log_arguments</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_perform'>perform</span>(<span class='id identifier rubyid_my_sensitive_argument'>my_sensitive_argument</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>When dealing with sensitive arguments as password and tokens it is now possible to configure the job
to not put the sensitive argument in the logs.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Changes in <code>queue_name_prefix</code> of a job no longer affects all other jobs.</p>

<p>Fixes #37084.</p>

<p><em>Lucas Mansur</em></p></li>
<li><p>Allow <a href="Class.html" title="Class (class)"><code>Class</code></a> and <a href="Module.html" title="Module (class)"><code>Module</code></a> instances to be serialized.</p>

<p><em>Kevin Deisz</em></p></li>
<li><p>Log potential matches in <code>assert_enqueued_with</code> and <code>assert_performed_with</code>.</p>

<p><em>Gareth du Plooy</em></p></li>
<li><p>Add <code>at</code> argument to the <code>perform_enqueued_jobs</code> test helper.</p>

<p><em>John Crepezzi</em>, <em>Eileen Uchitelle</em></p></li>
<li><p><code>assert_enqueued_with</code> and <code>assert_performed_with</code> can now test jobs with relative delay.</p>

<p><em>Vlado Cingel</em></p></li>
<li><p>Add jitter to <code>ActiveJob::Exceptions.retry_on</code>.</p>

<p><code>ActiveJob::Exceptions.retry_on</code> now uses a random amount of jitter in order to
prevent the <a href="https://en.wikipedia.org/wiki/Thundering_herd_problem">thundering herd effect</a>. Defaults to
15% (represented as 0.15) but overridable via the <code>:jitter</code> option when using <code>retry_on</code>.
Jitter is applied when an <a href="Integer.html" title="Integer (class)"><code>Integer</code></a>, <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)"><code>::ActiveSupport::Duration</code></a> or <code>:exponentially_longer</code>, is passed to the <code>wait</code> argument in <code>retry_on</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_retry_on'>retry_on</span>(<span class='const'>MyError</span><span class='comma'>,</span> <span class='label'>wait:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_exponentially_longer'>exponentially_longer</span><span class='comma'>,</span> <span class='label'>jitter:</span> <span class='float'>0.30</span>)</code></pre>

<p><em>Anthony Ross</em></p></li>
</ul>

<p>Please check [6-0-stable]) for previous changes.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>