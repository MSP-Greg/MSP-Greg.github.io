<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Active Support CHANGELOG &mdash; Rails 6.1.7.10</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "active_support_CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rails 6.1.7.10</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Active Support CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h2>Rails 6.1.7.10 (October 23, 2024)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.9 (October 15, 2024)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.8 (June 04, 2024)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.7 (February 21, 2024)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.6 (August 22, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.5 (August 22, 2023)</h2>

<ul>
<li><p>Use a temporary file for storing unencrypted files while editing</p>

<p>[CVE-2023-38037]</p></li>
</ul>

<h2>Rails 6.1.7.4 (June 26, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.3 (March 13, 2023)</h2>

<ul>
<li><p>Implement SafeBuffer#bytesplice</p>

<p>[CVE-2023-28120]</p></li>
</ul>

<h2>Rails 6.1.7.2 (January 24, 2023)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.7.1 (January 17, 2023)</h2>

<ul>
<li><p>Avoid regex backtracking in Inflector.underscore</p>

<p>[CVE-2023-22796]</p></li>
</ul>

<h2>Rails 6.1.7 (September 09, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.6.1 (July 12, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.6 (May 09, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.5.1 (April 26, 2022)</h2>

<ul>
<li><p>Fix and add protections for XSS in <a href="ActionView/Helpers.html" title="ActionView::Helpers (module)"><code>::ActionView::Helpers</code></a> and <a href="ERB/Util.html" title="ERB::Util (module)"><code>::ERB::Util</code></a>.</p>

<p>Add the method <a href="ERB/Util.html#xml_name_escape-class_method" title="ERB::Util.xml_name_escape (method)">ERB::Util.xml_name_escape</a> to escape dangerous characters
in names of tags and names of attributes, following the specification of XML.</p>

<p><em>Álvaro Martín Fraguas</em></p></li>
</ul>

<h2>Rails 6.1.5 (March 09, 2022)</h2>

<ul>
<li><p>Fix <a href="ActiveSupport/Duration.html#build-class_method" title="ActiveSupport::Duration.build (method)">ActiveSupport::Duration.build</a> to support negative values.</p>

<p>The algorithm to collect the <code>parts</code> of the <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)"><code>::ActiveSupport::Duration</code></a>
ignored the sign of the <code>value</code> and accumulated incorrect part values. This
impacted ActiveSupport::Duration#sum (which is dependent on <code>parts</code>) but
not <a href="ActiveSupport/Duration.html#eql%3F-instance_method" title="ActiveSupport::Duration#eql? (method)">ActiveSupport::Duration#eql?</a> (which is dependent on <code>value</code>).</p>

<p><em>Caleb Buxton</em>, <em>Braden Staudacher</em></p></li>
<li><p><a href="Time.html#change-instance_method" title="Time#change (method)">Time#change</a> and methods that call it (eg. <a href="Time.html#advance-instance_method" title="Time#advance (method)">Time#advance</a>) will now
return a <a href="Time.html" title="Time (class)"><code>Time</code></a> with the timezone argument provided, if the caller was
initialized with a timezone argument.</p>

<p>Fixes <a href="https://github.com/rails/rails/issues/42467">#42467</a>.</p>

<p><em>Alex Ghiculescu</em></p></li>
<li><p>Clone to keep extended Logger methods for tagged logger.</p>

<p><em>Orhan Toy</em></p></li>
<li><p><code>assert_changes</code> works on including <code>ActiveSupport::Assertions</code> module.</p>

<p><em>Pedro Medeiros</em></p></li>
</ul>

<h2>Rails 6.1.4.7 (March 08, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.6 (February 11, 2022)</h2>

<ul>
<li>  Fix Reloader method signature to work with the new Executor signature</li>
</ul>

<h2>Rails 6.1.4.5 (February 11, 2022)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.4 (December 15, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.3 (December 14, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.2 (December 14, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4.1 (August 19, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.4 (June 24, 2021)</h2>

<ul>
<li><p>MemCacheStore: convert any underlying value (including <code>false</code>) to an <code>Entry</code>.</p>

<p>See <a href="https://github.com/rails/rails/pull/42559">#42559</a>.</p>

<p><em>Alex Ghiculescu</em></p></li>
<li><p>Fix bug in <code>number_with_precision</code> when using large <a href="BigDecimal.html" title="BigDecimal (class)"><code>BigDecimal</code></a> values.</p>

<p>Fixes #42302.</p>

<p><em>Federico Aldunate</em>, <em>Zachary Scott</em></p></li>
<li><p>Check byte size instead of length on <code>secure_compare</code>.</p>

<p><em>Tietew</em></p></li>
<li><p>Fix <a href="Time.html#at-class_method" title="Time.at (method)">Time.at</a> to not lose <code>:in</code> option.</p>

<p><em>Ryuta Kamizono</em></p></li>
<li><p>Require a path for <code>config.cache_store = :file_store</code>.</p>

<p><em>Alex Ghiculescu</em></p></li>
<li><p>Avoid having to store complex object in the default translation file.</p>

<p><em>Rafael Mendonça França</em></p></li>
</ul>

<h2>Rails 6.1.3.2 (May 05, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.3.1 (March 26, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.3 (February 17, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.2.1 (February 10, 2021)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 6.1.2 (February 09, 2021)</h2>

<ul>
<li><p><a href="ActiveSupport/Cache/MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)"><code>::ActiveSupport::Cache::MemCacheStore</code></a> now accepts an explicit <code>nil</code> for its <code>addresses</code> argument.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_cache_store'>cache_store</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mem_cache_store'>mem_cache_store</span><span class='comma'>,</span> <span class='kw'>nil</span>

<span class='comment'># is now equivalent to
</span>
<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_cache_store'>cache_store</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mem_cache_store'>mem_cache_store</span>

<span class='comment'># and is also equivalent to
</span>
<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_cache_store'>cache_store</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mem_cache_store'>mem_cache_store</span><span class='comma'>,</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MEMCACHE_SERVERS</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>localhost:11211</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># which is the fallback behavior of Dalli</span></code></pre>

<p>This helps those migrating from <code>:dalli_store</code>, where an explicit <code>nil</code> was permitted.</p>

<p><em>Michael Overmeyer</em></p></li>
</ul>

<h2>Rails 6.1.1 (January 07, 2021)</h2>

<ul>
<li><p>Change <code>IPAddr#to_json</code> to match the behavior of the json gem returning the string representation
instead of the instance variables of the object.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="IPAddr.html" title="IPAddr (class)">IPAddr</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_json'>to_json</span>
<span class='comment'># =&gt; &quot;{\&quot;addr\&quot;:2130706433,\&quot;family\&quot;:2,\&quot;mask_addr\&quot;:4294967295}&quot;</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="IPAddr.html" title="IPAddr (class)">IPAddr</a></span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_json'>to_json</span>
<span class='comment'># =&gt; &quot;\&quot;127.0.0.1\&quot;&quot;</span></code></pre></li>
</ul>

<h2>Rails 6.1.0 (December 09, 2020)</h2>

<ul>
<li><p>Ensure <code>MemoryStore</code> disables compression by default. Reverts behavior of
<code>MemoryStore</code> to its prior rails <code>5.1</code> behavior.</p>

<p><em>Max Gurewitz</em></p></li>
<li><p>Calling <code>iso8601</code> on negative durations retains the negative sign on individual
digits instead of prepending it.</p>

<p>This change is required so we can interoperate with PostgreSQL, which prefers
negative signs for each component.</p>

<p>Compatibility with other iso8601 parsers which support leading negatives as well
as negatives per component is still retained.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby">(<span class='op'>-</span><span class='int'>1</span>.<span class='id identifier rubyid_year'>year</span> <span class='op'>-</span> <span class='int'>1</span>.<span class='id identifier rubyid_day'>day</span>).<span class='id identifier rubyid_iso8601'>iso8601</span>
<span class='comment'># =&gt; &quot;-P1Y1D&quot;</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby">(<span class='op'>-</span><span class='int'>1</span>.<span class='id identifier rubyid_year'>year</span> <span class='op'>-</span> <span class='int'>1</span>.<span class='id identifier rubyid_day'>day</span>).<span class='id identifier rubyid_iso8601'>iso8601</span>
<span class='comment'># =&gt; &quot;P-1Y-1D&quot;</span></code></pre>

<p><em>Vipul A M</em></p></li>
<li><p>Remove deprecated <code>ActiveSupport::Notifications::Instrumenter#end=</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Deprecate <a href="ActiveSupport/Multibyte/Unicode.html#default_normalization_form-instance_method" title="ActiveSupport::Multibyte::Unicode#default_normalization_form (method)">ActiveSupport::Multibyte::Unicode#default_normalization_form</a>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated <code>ActiveSupport::Multibyte::Unicode.pack_graphemes</code>,
<code>ActiveSupport::Multibyte::Unicode.unpack_graphemes</code>,
<code>ActiveSupport::Multibyte::Unicode.normalize</code>,
<code>ActiveSupport::Multibyte::Unicode.downcase</code>,
<code>ActiveSupport::Multibyte::Unicode.upcase</code> and <code>ActiveSupport::Multibyte::Unicode.swapcase</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated <code>ActiveSupport::Multibyte::Chars#consumes?</code> and <code>ActiveSupport::Multibyte::Chars#normalize</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated file <code>active_support/core_ext/range/include_range</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated file <code>active_support/core_ext/hash/transform_values</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated file <code>active_support/core_ext/hash/compact</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated file <code>active_support/core_ext/array/prepend_and_append</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated file <code>active_support/core_ext/numeric/inquiry</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated file <code>active_support/core_ext/module/reachable</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated <code>Module#parent_name</code>, <code>Module#parent</code> and <code>Module#parents</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated <code>ActiveSupport::LoggerThreadSafeLevel#after_initialize</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated <code>LoggerSilence</code> constant.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated fallback to <code>I18n.default_local</code> when <code>config.i18n.fallbacks</code> is empty.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove entries from local cache on <code>RedisCacheStore#delete_matched</code></p>

<p>Fixes #38627</p>

<p><em>ojab</em></p></li>
<li><p>Speed up <a href="ActiveSupport/SecurityUtils.html#fixed_length_secure_compare-class_method" title="ActiveSupport::SecurityUtils.fixed_length_secure_compare (method)">ActiveSupport::SecurityUtils.fixed_length_secure_compare</a> by using
<code>OpenSSL.fixed_length_secure_compare</code>, if available.</p>

<p><em>Nate Matykiewicz</em></p></li>
<li><p><a href="ActiveSupport/Cache/MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)"><code>::ActiveSupport::Cache::MemCacheStore</code></a> now checks <code>ENV["MEMCACHE_SERVERS"]</code> before falling back to <code>&quot;localhost:11211&quot;</code> if configured without any addresses.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_cache_store'>cache_store</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mem_cache_store'>mem_cache_store</span>

<span class='comment'># is now equivalent to
</span>
<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_cache_store'>cache_store</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mem_cache_store'>mem_cache_store</span><span class='comma'>,</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MEMCACHE_SERVERS</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>localhost:11211</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># instead of
</span>
<span class='id identifier rubyid_config'>config</span>.<span class='id identifier rubyid_cache_store'>cache_store</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_mem_cache_store'>mem_cache_store</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>localhost:11211</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># ignores ENV[&quot;MEMCACHE_SERVERS&quot;]</span></code></pre>

<p><em>Sam Bostock</em></p></li>
<li><p><code>ActiveSupport::Subscriber#attach_to</code> now accepts an <code>inherit_all:</code> argument. When set to true,
it allows a subscriber to receive events for methods defined in the subscriber&#39;s ancestor class(es).</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>ActionControllerSubscriber</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Subscriber.html" title="ActiveSupport::Subscriber (class)">Subscriber</a></span>
  <span class='id identifier rubyid_attach_to'>attach_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_action_controller'>action_controller</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_start_processing'>start_processing</span>(<span class='id identifier rubyid_event'>event</span>)
    <span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Processing by </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span>.<span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_controller'>controller</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span>.<span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_action'>action</span>]<span class='embexpr_end'>}</span><span class='tstring_content'> as </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format'>format</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_redirect_to'>redirect_to</span>(<span class='id identifier rubyid_event'>event</span>)
    <span class='id identifier rubyid_info'>info</span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Redirected to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span>.<span class='id identifier rubyid_payload'>payload</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_location'>location</span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> }
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># We detach ActionControllerSubscriber from the :action_controller namespace so that our CustomActionControllerSubscriber
</span><span class='comment'># can provide its own instrumentation for certain events in the namespace
</span><span class='const'>ActionControllerSubscriber</span>.<span class='id identifier rubyid_detach_from'>detach_from</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_action_controller'>action_controller</span>)

<span class='kw'>class</span> <span class='const'>CustomActionControllerSubscriber</span> <span class='op'>&lt;</span> <span class='const'>ActionControllerSubscriber</span>
  <span class='id identifier rubyid_attach_to'>attach_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_action_controller'>action_controller</span><span class='comma'>,</span> <span class='label'>inherit_all:</span> <span class='kw'>true</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_start_processing'>start_processing</span>(<span class='id identifier rubyid_event'>event</span>)
    <span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A custom response to start_processing events</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># =&gt; CustomActionControllerSubscriber will process events for &quot;start_processing.action_controller&quot; notifications
</span>  <span class='comment'># using its own #start_processing implementation, while retaining ActionControllerSubscriber&#39;s instrumentation
</span>  <span class='comment'># for &quot;redirect_to.action_controller&quot; notifications
</span><span class='kw'>end</span></code></pre>

<p><em>Adrianna Chang</em></p></li>
<li><p>Allow the digest class used to generate non-sensitive digests to be configured with <code>config.active_support.hash_digest_class</code>.</p>

<p><code>config.active_support.use_sha1_digests</code> is deprecated in favour of <code>config.active_support.hash_digest_class = ::Digest::SHA1</code>.</p>

<p><em>Dirkjan Bussink</em></p></li>
<li><p>Fix bug to make memcached write_entry expire correctly with unless_exist</p>

<p><em>Jye Lee</em></p></li>
<li><p>Add <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)"><code>::ActiveSupport::Duration</code></a> conversion methods</p>

<p><code>in_seconds</code>, <code>in_minutes</code>, <code>in_hours</code>, <code>in_days</code>, <code>in_weeks</code>, <code>in_months</code>, and <code>in_years</code> return the respective duration covered.</p>

<p><em>Jason York</em></p></li>
<li><p>Fixed issue in <a href="ActiveSupport/Cache/RedisCacheStore.html" title="ActiveSupport::Cache::RedisCacheStore (class)"><code>::ActiveSupport::Cache::RedisCacheStore</code></a> not passing options
to <code>read_multi</code> causing <code>fetch_multi</code> to not work properly</p>

<p><em>Rajesh Sharma</em></p></li>
<li><p>Fixed issue in <a href="ActiveSupport/Cache/MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)"><code>::ActiveSupport::Cache::MemCacheStore</code></a> which caused duplicate compression,
and caused the provided <code>compression_threshold</code> to not be respected.</p>

<p><em>Max Gurewitz</em></p></li>
<li><p>Prevent <code>RedisCacheStore</code> and <code>MemCacheStore</code> from performing compression
when reading entries written with <code>raw: true</code>.</p>

<p><em>Max Gurewitz</em></p></li>
<li><p><a href="URI.html#parser-class_method" title="URI.parser (method)">URI.parser</a> is deprecated and will be removed in <a href="Rails.html" title="Rails (module)"><code>Rails</code></a> 7.0. Use
<code>URI::DEFAULT_PARSER</code> instead.</p>

<p><em>Jean Boussier</em></p></li>
<li><p><code>require_dependency</code> has been documented to be <em>obsolete</em> in <code>:zeitwerk</code>
mode. The method is not deprecated as such (yet), but applications are
encouraged to not use it.</p>

<p>In <code>:zeitwerk</code> mode, semantics match Ruby&#39;s and you do not need to be
defensive with load order. Just refer to classes and modules normally. If
the constant name is dynamic, camelize if needed, and constantize.</p>

<p><em>Xavier Noria</em></p></li>
<li><p>Add 3rd person aliases of <a href="Symbol.html#start_with%3F-instance_method" title="Symbol#start_with? (method)">Symbol#start_with?</a> and <a href="Symbol.html#end_with%3F-instance_method" title="Symbol#end_with? (method)">Symbol#end_with?</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>.<span class='id identifier rubyid_starts_with?'>starts_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>f</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; true
</span><span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>.<span class='id identifier rubyid_ends_with?'>ends_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>o</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># =&gt; true</span></code></pre>

<p><em>Ryuta Kamizono</em></p></li>
<li><p>Add override of unary plus for <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)"><code>::ActiveSupport::Duration</code></a>.</p>

<p><code>+ 1.second</code> is now identical to <code>+1.second</code> to prevent errors
where a seemingly innocent change of formatting leads to a change in the code behavior.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='int'>+1</span>.<span class='id identifier rubyid_second'>second</span>.<span class='id identifier rubyid_class'>class</span>
<span class='comment'># =&gt; ActiveSupport::Duration
</span>(<span class='op'>+</span> <span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span>).<span class='id identifier rubyid_class'>class</span>
<span class='comment'># =&gt; Integer</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='int'>+1</span>.<span class='id identifier rubyid_second'>second</span>.<span class='id identifier rubyid_class'>class</span>
<span class='comment'># =&gt; ActiveSupport::Duration
</span>(<span class='op'>+</span> <span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span>).<span class='id identifier rubyid_class'>class</span>
<span class='comment'># =&gt; ActiveSupport::Duration</span></code></pre>

<p>Fixes #39079.</p>

<p><em>Roman Kushnir</em></p></li>
<li><p>Add subsec to <a href="ActiveSupport/TimeWithZone.html#inspect-instance_method" title="ActiveSupport::TimeWithZone#inspect (method)">ActiveSupport::TimeWithZone#inspect</a>.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='int'>1498099140</span>).<span class='id identifier rubyid_in_time_zone'>in_time_zone</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'># =&gt; &quot;Thu, 22 Jun 2017 02:39:00 UTC +00:00&quot;
</span><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='int'>1498099140</span><span class='comma'>,</span> <span class='int'>123456780</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_nsec'>nsec</span>).<span class='id identifier rubyid_in_time_zone'>in_time_zone</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'># =&gt; &quot;Thu, 22 Jun 2017 02:39:00 UTC +00:00&quot;
</span><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='int'>1498099140</span> <span class='op'>+</span> <span class='const'>Rational</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1/3</span><span class='tstring_end'>&quot;</span></span>)).<span class='id identifier rubyid_in_time_zone'>in_time_zone</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'># =&gt; &quot;Thu, 22 Jun 2017 02:39:00 UTC +00:00&quot;</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='int'>1498099140</span>).<span class='id identifier rubyid_in_time_zone'>in_time_zone</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'># =&gt; &quot;Thu, 22 Jun 2017 02:39:00.000000000 UTC +00:00&quot;
</span><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='int'>1498099140</span><span class='comma'>,</span> <span class='int'>123456780</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_nsec'>nsec</span>).<span class='id identifier rubyid_in_time_zone'>in_time_zone</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'># =&gt; &quot;Thu, 22 Jun 2017 02:39:00.123456780 UTC +00:00&quot;
</span><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_at'>at</span>(<span class='int'>1498099140</span> <span class='op'>+</span> <span class='const'>Rational</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1/3</span><span class='tstring_end'>&quot;</span></span>)).<span class='id identifier rubyid_in_time_zone'>in_time_zone</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='comment'># =&gt; &quot;Thu, 22 Jun 2017 02:39:00.333333333 UTC +00:00&quot;</span></code></pre>

<p><em>akinomaeni</em></p></li>
<li><p>Calling <a href="ActiveSupport/TaggedLogging.html#tagged-instance_method" title="ActiveSupport::TaggedLogging#tagged (method)">ActiveSupport::TaggedLogging#tagged</a> without a block now returns a tagged logger.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_logger'>logger</span>.<span class='id identifier rubyid_tagged'>tagged</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BCX</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_info'>info</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Funky time!</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [BCX] Funky time!</span></code></pre>

<p><em>Eugene Kenny</em></p></li>
<li><p>Align <code>Range#cover?</code> extension behavior with Ruby behavior for backwards ranges.</p>

<p><code>(1..10).cover?(5..3)</code> now returns <code>false</code>, as it does in plain Ruby.</p>

<p>Also update <code>#include?</code> and <code>#===</code> behavior to match.</p>

<p><em>Michael Groeneman</em></p></li>
<li><p>Update to TZInfo v2.0.0.</p>

<p>This changes the output of <a href="ActiveSupport/TimeZone.html#utc_to_local-instance_method" title="ActiveSupport::TimeZone#utc_to_local (method)">ActiveSupport::TimeZone#utc_to_local</a>, but
can be controlled with the
<a href="ActiveSupport.html#utc_to_local_returns_utc_offset_times-class_method" title="ActiveSupport.utc_to_local_returns_utc_offset_times (method)">ActiveSupport.utc_to_local_returns_utc_offset_times</a> config.</p>

<p>New Rails 6.1 apps have it enabled by default, existing apps can upgrade
via the config in config/initializers/new_framework_defaults_6_1.rb</p>

<p>See the <code>utc_to_local_returns_utc_offset_times</code> documentation for details.</p>

<p><em>Phil Ross</em>, <em>Jared Beck</em></p></li>
<li><p>Add Date and <a href="Time.html" title="Time (class)"><code>Time</code></a> <code>#yesterday?</code> and <code>#tomorrow?</code> alongside <code>#today?</code>.</p>

<p>Aliased to <code>#prev_day?</code> and <code>#next_day?</code> to match the existing <code>#prev/next_day</code> methods.</p>

<p><em>Jatin Dhankhar</em></p></li>
<li><p>Add <a href="Enumerable.html#pick-instance_method" title="Enumerable#pick (method)">Enumerable#pick</a> to complement <code>ActiveRecord::Relation#pick</code>.</p>

<p><em>Eugene Kenny</em></p></li>
<li><p>[Breaking change] ActiveSupport::Callbacks#halted_callback_hook now receive a 2nd argument:</p>

<p>ActiveSupport::Callbacks#halted_callback_hook now receive the name of the callback
being halted as second argument.
This change will allow you to differentiate which callbacks halted the chain
and act accordingly.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Book</span> <span class='op'>&lt;</span> <span class='const'>ApplicationRecord</span>
  <span class='id identifier rubyid_before_save'>before_save</span> { <span class='id identifier rubyid_throw'>throw</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_abort'>abort</span>) }
  <span class='id identifier rubyid_before_create'>before_create</span> { <span class='id identifier rubyid_throw'>throw</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_abort'>abort</span>) }

  <span class='kw'>def</span> <span class='id identifier rubyid_halted_callback_hook'>halted_callback_hook</span>(<span class='id identifier rubyid_filter'>filter</span><span class='comma'>,</span> <span class='id identifier rubyid_callback_name'>callback_name</span>)
    <span class='const'><a href="Rails.html" title="Rails (module)">Rails</a></span>.<span class='id identifier rubyid_logger'><a href="Rails.html#logger-class_method" title="Rails.logger (method)">logger</a></span>.<span class='id identifier rubyid_info'>info</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Book couldn&#39;t be </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_callback_name'>callback_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>d</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>

  <span class='const'>Book</span>.<span class='id identifier rubyid_create'>create</span> <span class='comment'># =&gt; &quot;Book couldn&#39;t be created&quot;
</span>  <span class='id identifier rubyid_book'>book</span>.<span class='id identifier rubyid_save'>save</span> <span class='comment'># =&gt; &quot;Book couldn&#39;t be saved&quot;
</span><span class='kw'>end</span></code></pre>

<p><em>Edouard Chin</em></p></li>
<li><p>Support <code>prepend</code> with <a href="ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)"><code>::ActiveSupport::Concern</code></a>.</p>

<p>Allows a module with <code>extend ActiveSupport::Concern</code> to be prepended.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>Imposter</span>
  <span class='id identifier rubyid_extend'>extend</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">Concern</a></span>

  <span class='comment'># Same as `included`, except only run when prepended.
</span>  <span class='id identifier rubyid_prepended'>prepended</span> <span class='kw'>do</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Person</span>
  <span class='id identifier rubyid_prepend'>prepend</span> <span class='const'>Imposter</span>
<span class='kw'>end</span></code></pre>

<p>Class methods are prepended to the base class, concerning is also
updated: <code>concerning :Imposter, prepend: true do</code>.</p>

<p><em>Jason Karns</em>, <em>Elia Schito</em></p></li>
<li><p>Deprecate using <code>Range#include?</code> method to check the inclusion of a value
in a date time range. It is recommended to use <code>Range#cover?</code> method
instead of <code>Range#include?</code> to check the inclusion of a value
in a date time range.</p>

<p><em>Vishal Telangre</em></p></li>
<li><p>Support added for a <code>round_mode</code> parameter, in all number helpers. (See: <code>BigDecimal::mode</code>.)</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_number_to_currency'>number_to_currency</span>(<span class='float'>1234567890.50</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>round_mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_half_down'>half_down</span>) <span class='comment'># =&gt; &quot;$1,234,567,890&quot;
</span><span class='id identifier rubyid_number_to_percentage'>number_to_percentage</span>(<span class='float'>302.24398923423</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>5</span><span class='comma'>,</span> <span class='label'>round_mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_down'>down</span>) <span class='comment'># =&gt; &quot;302.24398%&quot;
</span><span class='id identifier rubyid_number_to_rounded'>number_to_rounded</span>(<span class='float'>389.32314</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>round_mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ceil'>ceil</span>) <span class='comment'># =&gt; &quot;390&quot;
</span><span class='id identifier rubyid_number_to_human_size'>number_to_human_size</span>(<span class='int'>483989</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>round_mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_up'>up</span>) <span class='comment'># =&gt; &quot;480 KB&quot;
</span><span class='id identifier rubyid_number_to_human'>number_to_human</span>(<span class='int'>489939</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>round_mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_floor'>floor</span>) <span class='comment'># =&gt; &quot;480 Thousand&quot;
</span>
<span class='int'>485000</span>.<span class='id identifier rubyid_to_s'>to_s</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_human'>human</span><span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>round_mode:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_half_even'>half_even</span>) <span class='comment'># =&gt; &quot;480 Thousand&quot;</span></code></pre>

<p><em>Tom Lord</em></p></li>
<li><p><a href="Array.html#to_sentence-instance_method" title="Array#to_sentence (method)">Array#to_sentence</a> no longer returns a frozen string.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>one</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>two</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_to_sentence'>to_sentence</span>.<span class='id identifier rubyid_frozen?'>frozen?</span>
<span class='comment'># =&gt; true</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>one</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>two</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_to_sentence'>to_sentence</span>.<span class='id identifier rubyid_frozen?'>frozen?</span>
<span class='comment'># =&gt; false</span></code></pre>

<p><em>Nicolas Dular</em></p></li>
<li><p>When an instance of <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)"><code>::ActiveSupport::Duration</code></a> is converted to an <code>iso8601</code> duration string, if <code>weeks</code> are mixed with <code>date</code> parts, the <code>week</code> part will be converted to days.
This keeps the parser and serializer on the same page.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_duration'>duration</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_build'><a href="ActiveSupport/Duration.html#build-class_method" title="ActiveSupport::Duration.build (method)">build</a></span>(<span class='int'>1000000</span>)
<span class='comment'># 1 week, 4 days, 13 hours, 46 minutes, and 40.0 seconds
</span>
<span class='id identifier rubyid_duration_iso'>duration_iso</span> <span class='op'>=</span> <span class='id identifier rubyid_duration'>duration</span>.<span class='id identifier rubyid_iso8601'>iso8601</span>
<span class='comment'># P11DT13H46M40S
</span>
<span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_parse'><a href="ActiveSupport/Duration.html#parse-class_method" title="ActiveSupport::Duration.parse (method)">parse</a></span>(<span class='id identifier rubyid_duration_iso'>duration_iso</span>)
<span class='comment'># 11 days, 13 hours, 46 minutes, and 40 seconds
</span>
<span class='id identifier rubyid_duration'>duration</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_build'><a href="ActiveSupport/Duration.html#build-class_method" title="ActiveSupport::Duration.build (method)">build</a></span>(<span class='int'>604800</span>)
<span class='comment'># 1 week
</span>
<span class='id identifier rubyid_duration_iso'>duration_iso</span> <span class='op'>=</span> <span class='id identifier rubyid_duration'>duration</span>.<span class='id identifier rubyid_iso8601'>iso8601</span>
<span class='comment'># P1W
</span>
<span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_parse'><a href="ActiveSupport/Duration.html#parse-class_method" title="ActiveSupport::Duration.parse (method)">parse</a></span>(<span class='id identifier rubyid_duration_iso'>duration_iso</span>)
<span class='comment'># 1 week</span></code></pre>

<p><em>Abhishek Sarkar</em></p></li>
<li><p>Add block support to <a href="ActiveSupport/Testing/TimeHelpers.html#travel_back-instance_method" title="ActiveSupport::Testing::TimeHelpers#travel_back (method)">ActiveSupport::Testing::TimeHelpers#travel_back</a>.</p>

<p><em>Tim Masliuchenko</em></p></li>
<li><p>Update ActiveSupport::Messages::Metadata#fresh? to work for cookies with expiry set when
<code>ActiveSupport.parse_json_times = true</code>.</p>

<p><em>Christian Gregg</em></p></li>
<li><p>Support symbolic links for <code>content_path</code> in <a href="ActiveSupport/EncryptedFile.html" title="ActiveSupport::EncryptedFile (class)"><code>::ActiveSupport::EncryptedFile</code></a>.</p>

<p><em>Takumi Shotoku</em></p></li>
<li><p>Improve <code>Range#===</code>, <code>Range#include?</code>, and <code>Range#cover?</code> to work with beginless (startless)
and endless range targets.</p>

<p><em>Allen Hsu</em>, <em>Andrew Hodgkinson</em></p></li>
<li><p>Don&#39;t use <code>Process#clock_gettime(CLOCK_THREAD_CPUTIME_ID)</code> on Solaris.</p>

<p><em>Iain Beeston</em></p></li>
<li><p>Prevent <code>ActiveSupport::Duration.build(value)</code> from creating instances of
<a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)"><code>::ActiveSupport::Duration</code></a> unless <code>value</code> is of type <a href="Numeric.html" title="Numeric (class)"><code>Numeric</code></a>.</p>

<p>Addresses the errant set of behaviours described in #37012 where
<a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)"><code>::ActiveSupport::Duration</code></a> comparisons would fail confusingly
or return unexpected results when comparing durations built from instances of <a href="String.html" title="String (class)"><code>String</code></a>.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_small_duration_from_string'>small_duration_from_string</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_build'><a href="ActiveSupport/Duration.html#build-class_method" title="ActiveSupport::Duration.build (method)">build</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_large_duration_from_string'>large_duration_from_string</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_build'><a href="ActiveSupport/Duration.html#build-class_method" title="ActiveSupport::Duration.build (method)">build</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>100000000000000</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_small_duration_from_int'>small_duration_from_int</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_build'><a href="ActiveSupport/Duration.html#build-class_method" title="ActiveSupport::Duration.build (method)">build</a></span>(<span class='int'>9</span>)

<span class='id identifier rubyid_large_duration_from_string'>large_duration_from_string</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_small_duration_from_string'>small_duration_from_string</span>
<span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_small_duration_from_string'>small_duration_from_string</span> <span class='op'>==</span> <span class='id identifier rubyid_small_duration_from_int'>small_duration_from_int</span>
<span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_small_duration_from_int'>small_duration_from_int</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_large_duration_from_string'>large_duration_from_string</span>
<span class='comment'># =&gt; ArgumentError (comparison of ActiveSupport::Duration::Scalar with ActiveSupport::Duration failed)
</span>
<span class='id identifier rubyid_large_duration_from_string'>large_duration_from_string</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_small_duration_from_int'>small_duration_from_int</span>
<span class='comment'># =&gt; ArgumentError (comparison of String with ActiveSupport::Duration failed)</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_small_duration_from_string'>small_duration_from_string</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">Duration</a></span>.<span class='id identifier rubyid_build'><a href="ActiveSupport/Duration.html#build-class_method" title="ActiveSupport::Duration.build (method)">build</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; TypeError (can&#39;t build an ActiveSupport::Duration from a String)</span></code></pre>

<p><em>Alexei Emam</em></p></li>
<li><p>Add <a href="ActiveSupport/Cache/Store.html#delete_multi-instance_method" title="ActiveSupport::Cache::Store#delete_multi (method)">ActiveSupport::Cache::Store#delete_multi</a> method to delete multiple keys from the cache store.</p>

<p><em>Peter Zhu</em></p></li>
<li><p>Support multiple arguments in <a href="#HashWithIndifferentAccess-constant" title="HashWithIndifferentAccess (constant)">HashWithIndifferentAccess</a> for <code>merge</code> and <code>update</code> methods, to
follow Ruby 2.6 addition.</p>

<p><em>Wojciech Wnętrzak</em></p></li>
<li><p>Allow initializing <code>thread_mattr_*</code> attributes via <code>:default</code> option.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Scraper</span>
  <span class='id identifier rubyid_thread_mattr_reader'>thread_mattr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_client'>client</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='const'>Api</span><span class='op'>::</span><span class='const'>Client</span>.<span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span></code></pre>

<p><em>Guilherme Mansur</em></p></li>
<li><p>Add <code>compact_blank</code> for those times when you want to remove #blank? values from
an Enumerable (also <code>compact_blank!</code> on Hash, Array, ActionController::Parameters).</p>

<p><em>Dana Sherson</em></p></li>
<li><p>Make ActiveSupport::Logger Fiber-safe.</p>

<p>Use <code>Fiber.current.<strong>id</strong></code> in <code>ActiveSupport::Logger#local_level=</code> in order
to make log level local to Ruby Fibers in addition to Threads.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_logger'>logger</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/Logger.html" title="ActiveSupport::Logger (class)">Logger</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/Logger.html#new-class_method" title="ActiveSupport::Logger.new (method)">new</a></span>(<span class='const'>STDOUT</span>)
<span class='id identifier rubyid_logger'>logger</span>.<span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='int'>1</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Main is debug? </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_logger'>logger</span>.<span class='id identifier rubyid_debug?'>debug?</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

<span class='const'>Fiber</span>.<span class='id identifier rubyid_new'>new</span> {
  <span class='id identifier rubyid_logger'>logger</span>.<span class='id identifier rubyid_local_level'>local_level</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Thread is debug? </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_logger'>logger</span>.<span class='id identifier rubyid_debug?'>debug?</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
}.<span class='id identifier rubyid_resume'>resume</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Main is debug? </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_logger'>logger</span>.<span class='id identifier rubyid_debug?'>debug?</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Main</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_debug?'>debug?</span> <span class='kw'>false</span>
<span class='const'>Thread</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_debug?'>debug?</span> <span class='kw'>true</span>
<span class='const'>Main</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_debug?'>debug?</span> <span class='kw'>true</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Main</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_debug?'>debug?</span> <span class='kw'>false</span>
<span class='const'>Thread</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_debug?'>debug?</span> <span class='kw'>true</span>
<span class='const'>Main</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_debug?'>debug?</span> <span class='kw'>false</span></code></pre>

<p>Fixes #36752.</p>

<p><em>Alexander Varnin</em></p></li>
<li><p>Allow the <code>on_rotation</code> proc used when decrypting/verifying a message to be
passed at the constructor level.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_crypt'>crypt</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/MessageEncryptor.html" title="ActiveSupport::MessageEncryptor (class)">MessageEncryptor</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/MessageEncryptor.html#new-class_method" title="ActiveSupport::MessageEncryptor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>long_secret</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_crypt'>crypt</span>.<span class='id identifier rubyid_decrypt_and_verify'>decrypt_and_verify</span>(<span class='id identifier rubyid_encrypted_message'>encrypted_message</span><span class='comma'>,</span> <span class='label'>on_rotation:</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='op'>...</span> })
<span class='id identifier rubyid_crypt'>crypt</span>.<span class='id identifier rubyid_decrypt_and_verify'>decrypt_and_verify</span>(<span class='id identifier rubyid_another_encrypted_message'>another_encrypted_message</span><span class='comma'>,</span> <span class='label'>on_rotation:</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='op'>...</span> })</code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_crypt'>crypt</span> <span class='op'>=</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/MessageEncryptor.html" title="ActiveSupport::MessageEncryptor (class)">MessageEncryptor</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/MessageEncryptor.html#new-class_method" title="ActiveSupport::MessageEncryptor.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>long_secret</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>on_rotation:</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='op'>...</span> })
<span class='id identifier rubyid_crypt'>crypt</span>.<span class='id identifier rubyid_decrypt_and_verify'>decrypt_and_verify</span>(<span class='id identifier rubyid_encrypted_message'>encrypted_message</span>)
<span class='id identifier rubyid_crypt'>crypt</span>.<span class='id identifier rubyid_decrypt_and_verify'>decrypt_and_verify</span>(<span class='id identifier rubyid_another_encrypted_message'>another_encrypted_message</span>)</code></pre>

<p><em>Edouard Chin</em></p></li>
<li><p><code>delegate_missing_to</code> would raise a <code>DelegationError</code> if the object
delegated to was <code>nil</code>. Now the <code>allow_nil</code> option has been added to enable
the user to specify they want <code>nil</code> returned in this case.</p>

<p><em>Matthew Tanous</em></p></li>
<li><p><code>truncate</code> would return the original string if it was too short to be truncated
and a frozen string if it were long enough to be truncated. Now truncate will
consistently return an unfrozen string regardless. This behavior is consistent
with <code>gsub</code> and <code>strip</code>.</p>

<p>Before:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_truncate'>truncate</span>(<span class='int'>5</span>).<span class='id identifier rubyid_frozen?'>frozen?</span>
<span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_truncate'>truncate</span>(<span class='int'>6</span>).<span class='id identifier rubyid_frozen?'>frozen?</span>
<span class='comment'># =&gt; false</span></code></pre>

<p>After:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_truncate'>truncate</span>(<span class='int'>5</span>).<span class='id identifier rubyid_frozen?'>frozen?</span>
<span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_truncate'>truncate</span>(<span class='int'>6</span>).<span class='id identifier rubyid_frozen?'>frozen?</span>
<span class='comment'># =&gt; false</span></code></pre>

<p><em>Jordan Thomas</em></p></li>
</ul>

<p>Please check [6-0-stable]) for previous changes.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>