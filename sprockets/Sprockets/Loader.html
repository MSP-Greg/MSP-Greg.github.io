<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Sprockets::Loader &mdash; Sprockets main</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Sprockets::Loader",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../'>Sprockets main</a> &raquo; 
      <a href='../_index.html#alpha_L'>Index (L)</a> &raquo; 
        <a href="../Sprockets.html" title="Sprockets (module)">Sprockets</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Loader&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Sprockets::Loader</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="Base.html" title="Sprockets::Base (class)"><code>Base</code></a>,
          <a href="CachedEnvironment.html" title="Sprockets::CachedEnvironment (class)"><code>CachedEnvironment</code></a>,
          <a href="Environment.html" title="Sprockets::Environment (class)"><code>Environment</code></a>
      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Mime.html" title="Sprockets::Mime (module)"><code>Mime</code></a>,
          <a href="Processing.html" title="Sprockets::Processing (module)"><code>Processing</code></a>,
          <a href="Resolve.html" title="Sprockets::Resolve (module)"><code>Resolve</code></a>,
          <a href="PathDependencyUtils.html" title="Sprockets::PathDependencyUtils (module)"><code>PathDependencyUtils</code></a>,
          <a href="Transformers.html" title="Sprockets::Transformers (module)"><code>Transformers</code></a>,
          <a href="HTTPUtils.html" title="Sprockets::HTTPUtils (module)"><code>HTTPUtils</code></a>,
          <a href="Utils.html" title="Sprockets::Utils (module)"><code>Utils</code></a>,
          <a href="DigestUtils.html" title="Sprockets::DigestUtils (module)"><code>DigestUtils</code></a>,
          <a href="PathUtils.html" title="Sprockets::PathUtils (module)"><code>PathUtils</code></a>,
          <a href="ProcessorUtils.html" title="Sprockets::ProcessorUtils (module)"><code>ProcessorUtils</code></a>,
          <a href="URIUtils.html" title="Sprockets::URIUtils (module)"><code>URIUtils</code></a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L19'>lib/sprockets/loader.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The loader phase takes a asset URI location and returns a constructed <a href="Asset.html" title="Sprockets::Asset (class)"><code>Asset</code></a> object.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
  <h3 class='inherited'><a href="ProcessorUtils.html" title="Sprockets::ProcessorUtils (module)"><code>ProcessorUtils</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="ProcessorUtils.html#VALID_METADATA_COMPOUND_TYPES-constant" title="Sprockets::ProcessorUtils::VALID_METADATA_COMPOUND_TYPES (constant)">VALID_METADATA_COMPOUND_TYPES</a>, 
    <a href="ProcessorUtils.html#VALID_METADATA_COMPOUND_TYPES_HASH-constant" title="Sprockets::ProcessorUtils::VALID_METADATA_COMPOUND_TYPES_HASH (constant)">VALID_METADATA_COMPOUND_TYPES_HASH</a>, 
    <a href="ProcessorUtils.html#VALID_METADATA_TYPES-constant" title="Sprockets::ProcessorUtils::VALID_METADATA_TYPES (constant)">VALID_METADATA_TYPES</a>, 
    <a href="ProcessorUtils.html#VALID_METADATA_VALUE_TYPES-constant" title="Sprockets::ProcessorUtils::VALID_METADATA_VALUE_TYPES (constant)">VALID_METADATA_VALUE_TYPES</a>, 
    <a href="ProcessorUtils.html#VALID_METADATA_VALUE_TYPES_HASH-constant" title="Sprockets::ProcessorUtils::VALID_METADATA_VALUE_TYPES_HASH (constant)">VALID_METADATA_VALUE_TYPES_HASH</a>
  </p>
  <h3 class='inherited'><a href="PathUtils.html" title="Sprockets::PathUtils (module)"><code>PathUtils</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="PathUtils.html#SEPARATOR_PATTERN-constant" title="Sprockets::PathUtils::SEPARATOR_PATTERN (constant)">SEPARATOR_PATTERN</a>
  </p>
  <h3 class='inherited'><a href="DigestUtils.html" title="Sprockets::DigestUtils (module)"><code>DigestUtils</code></a> - Included</h3>
  <p  class='inherited'>
    <a class='priv ' href="DigestUtils.html#ADD_VALUE_TO_DIGEST-constant" title="Sprockets::DigestUtils::ADD_VALUE_TO_DIGEST (constant)">ADD_VALUE_TO_DIGEST</a>, 
    <a href="DigestUtils.html#DIGEST_SIZES-constant" title="Sprockets::DigestUtils::DIGEST_SIZES (constant)">DIGEST_SIZES</a>, 
    <a href="DigestUtils.html#HASH_ALGORITHMS-constant" title="Sprockets::DigestUtils::HASH_ALGORITHMS (constant)">HASH_ALGORITHMS</a>
  </p>
  <h3 class='inherited'><a href="Utils.html" title="Sprockets::Utils (module)"><code>Utils</code></a> - Included</h3>
  <p  class='inherited'>
    <a class='priv ' href="Utils.html#MODULE_INCLUDE_MUTEX-constant" title="Sprockets::Utils::MODULE_INCLUDE_MUTEX (constant)">MODULE_INCLUDE_MUTEX</a>, 
    <a class='priv ' href="Utils.html#WHITESPACE_ORDINALS-constant" title="Sprockets::Utils::WHITESPACE_ORDINALS (constant)">WHITESPACE_ORDINALS</a>
  </p>
</div>

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#load-instance_method" title="#load (instance method)">#<strong>load</strong>(uri)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Public: Load Asset by <a href="Asset.html" title="Sprockets::Asset (class)"><code>Asset</code></a> URI.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#asset_from_cache-instance_method" title="#asset_from_cache (instance method)">#<strong>asset_from_cache</strong>(key)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Internal: Load asset hash from cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#compress_key_from_hash-instance_method" title="#compress_key_from_hash (instance method)">#<strong>compress_key_from_hash</strong>(hash, key)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#expand_key_from_hash-instance_method" title="#expand_key_from_hash (instance method)">#<strong>expand_key_from_hash</strong>(hash, key)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#fetch_asset_from_dependency_cache-instance_method" title="#fetch_asset_from_dependency_cache (instance method)">#<strong>fetch_asset_from_dependency_cache</strong>(unloaded, limit = 3)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Internal: Retrieves an asset based on its digest.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#load_from_unloaded-instance_method" title="#load_from_unloaded (instance method)">#<strong>load_from_unloaded</strong>(unloaded)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Internal: Loads an asset and saves it to cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#resolve_dependencies-instance_method" title="#resolve_dependencies (instance method)">#<strong>resolve_dependencies</strong>(uris)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Internal: <a href="Resolve.html" title="Sprockets::Resolve (module)"><code>Resolve</code></a> set of dependency URIs.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#store_asset-instance_method" title="#store_asset (instance method)">#<strong>store_asset</strong>(asset, unloaded)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Internal: Save a given asset to the cache.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Mime.html" title="Sprockets::Mime (module)"><code>Mime</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Mime.html#mime_exts-instance_method" title="Sprockets::Mime#mime_exts (method)">#mime_exts</a></td>
      <td><div class='inline'><p>Internal: Mapping of MIME extension Strings to MIME type Strings.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Mime.html#mime_type_charset_detecter-instance_method" title="Sprockets::Mime#mime_type_charset_detecter (method)">#mime_type_charset_detecter</a></td>
      <td><div class='inline'><p>Internal: Get detecter function for MIME type.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Mime.html#mime_types-instance_method" title="Sprockets::Mime#mime_types (method)">#mime_types</a></td>
      <td><div class='inline'><p>Public: Mapping of MIME type Strings to properties Hash.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Mime.html#read_file-instance_method" title="Sprockets::Mime#read_file (method)">#read_file</a></td>
      <td><div class='inline'><p>Public: Read file on disk with MIME type specific encoding.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Mime.html#register_mime_type-instance_method" title="Sprockets::Mime#register_mime_type (method)">#register_mime_type</a></td>
      <td><div class='inline'><p>Public: Register a new mime type.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Processing.html" title="Sprockets::Processing (module)"><code>Processing</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#bundle_processors-instance_method" title="Sprockets::Processing#bundle_processors (method)">#bundle_processors</a></td>
      <td><div class='inline'><p><a href="Bundle.html" title="Sprockets::Bundle (class)"><code>Bundle</code></a> Processors are ran on concatenated assets rather than individual files.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Processing.html#pipelines-instance_method" title="Sprockets::Processing#pipelines (method)">#pipelines</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#postprocessors-instance_method" title="Sprockets::Processing#postprocessors (method)">#postprocessors</a></td>
      <td><div class='inline'><p>Postprocessors are ran after <a href="Preprocessors.html" title="Sprockets::Preprocessors (module)"><code>Preprocessors</code></a> and Engine processors.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#preprocessors-instance_method" title="Sprockets::Processing#preprocessors (method)">#preprocessors</a></td>
      <td><div class='inline'><p><a href="Preprocessors.html" title="Sprockets::Preprocessors (module)"><code>Preprocessors</code></a> are ran before Postprocessors and Engine processors.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#processors-instance_method" title="Sprockets::Processing#processors (method)">#processors</a></td>
      <td><div class='inline'><p>Alias for <a href="Processing.html#preprocessors-instance_method" title="Sprockets::Processing#preprocessors (method)">Processing#preprocessors</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#register_bundle_metadata_reducer-instance_method" title="Sprockets::Processing#register_bundle_metadata_reducer (method)">#register_bundle_metadata_reducer</a></td>
      <td><div class='inline'><p>Public: Register bundle metadata reducer function.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#register_bundle_processor-instance_method" title="Sprockets::Processing#register_bundle_processor (method)">#register_bundle_processor</a></td>
      <td><div class='inline'><p>Registers a new <a href="Bundle.html" title="Sprockets::Bundle (class)"><code>Bundle</code></a> Processor <code>klass</code> for <code>mime_type</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#register_pipeline-instance_method" title="Sprockets::Processing#register_pipeline (method)">#register_pipeline</a></td>
      <td><div class='inline'><p>Registers a pipeline that will be called by <code>call_processor</code> method.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#register_postprocessor-instance_method" title="Sprockets::Processing#register_postprocessor (method)">#register_postprocessor</a></td>
      <td><div class='inline'><p>Registers a new Postprocessor <code>klass</code> for <code>mime_type</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#register_preprocessor-instance_method" title="Sprockets::Processing#register_preprocessor (method)">#register_preprocessor</a></td>
      <td><div class='inline'><p>Registers a new Preprocessor <code>klass</code> for <code>mime_type</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#register_processor-instance_method" title="Sprockets::Processing#register_processor (method)">#register_processor</a></td>
      <td><div class='inline'><p>Alias for <a href="Processing.html#register_preprocessor-instance_method" title="Sprockets::Processing#register_preprocessor (method)">Processing#register_preprocessor</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#unregister_bundle_processor-instance_method" title="Sprockets::Processing#unregister_bundle_processor (method)">#unregister_bundle_processor</a></td>
      <td><div class='inline'><p>Remove Bundle Processor <code>klass</code> for <code>mime_type</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#unregister_postprocessor-instance_method" title="Sprockets::Processing#unregister_postprocessor (method)">#unregister_postprocessor</a></td>
      <td><div class='inline'><p>Remove Postprocessor <code>klass</code> for <code>mime_type</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#unregister_preprocessor-instance_method" title="Sprockets::Processing#unregister_preprocessor (method)">#unregister_preprocessor</a></td>
      <td><div class='inline'><p>Remove Preprocessor <code>klass</code> for <code>mime_type</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Processing.html#unregister_processor-instance_method" title="Sprockets::Processing#unregister_processor (method)">#unregister_processor</a></td>
      <td><div class='inline'><p>Alias for <a href="Processing.html#unregister_preprocessor-instance_method" title="Sprockets::Processing#unregister_preprocessor (method)">Processing#unregister_preprocessor</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Processing.html#register_config_processor-instance_method" title="Sprockets::Processing#register_config_processor (method)">#register_config_processor</a>,
        <a class='i_m priv' href="Processing.html#unregister_config_processor-instance_method" title="Sprockets::Processing#unregister_config_processor (method)">#unregister_config_processor</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Resolve.html" title="Sprockets::Resolve (module)"><code>Resolve</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Resolve.html#resolve-instance_method" title="Sprockets::Resolve#resolve (method)">#resolve</a></td>
      <td><div class='inline'><p>Public: Find Asset URI for given a logical path by searching the environment’s load paths.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Resolve.html#resolve!-instance_method" title="Sprockets::Resolve#resolve! (method)">#resolve!</a></td>
      <td><div class='inline'><p>Public: Same as resolve() but raises a <a href="FileNotFound.html" title="Sprockets::FileNotFound (class)"><code>FileNotFound</code></a> exception instead of nil if no assets are found.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="PathDependencyUtils.html" title="Sprockets::PathDependencyUtils (module)"><code>PathDependencyUtils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathDependencyUtils.html#entries_with_dependencies-instance_method" title="Sprockets::PathDependencyUtils#entries_with_dependencies (method)">#entries_with_dependencies</a></td>
      <td><div class='inline'><p>Internal: List directory entries and return a set of dependencies that would invalid the cached return result.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathDependencyUtils.html#stat_directory_with_dependencies-instance_method" title="Sprockets::PathDependencyUtils#stat_directory_with_dependencies (method)">#stat_directory_with_dependencies</a></td>
      <td><div class='inline'><p>Internal: List directory filenames and associated Stats under a directory.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathDependencyUtils.html#stat_sorted_tree_with_dependencies-instance_method" title="Sprockets::PathDependencyUtils#stat_sorted_tree_with_dependencies (method)">#stat_sorted_tree_with_dependencies</a></td>
      <td><div class='inline'><p>Internal: List directory filenames and associated Stats under an entire directory tree.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Transformers.html" title="Sprockets::Transformers (module)"><code>Transformers</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Transformers.html#compose_transformers-instance_method" title="Sprockets::Transformers#compose_transformers (method)">#compose_transformers</a></td>
      <td><div class='inline'><p>Internal: Compose multiple transformer steps into a single processor function.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Transformers.html#expand_transform_accepts-instance_method" title="Sprockets::Transformers#expand_transform_accepts (method)">#expand_transform_accepts</a></td>
      <td><div class='inline'><p>Internal: Expand accept type list to include possible transformed types.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Transformers.html#register_transformer-instance_method" title="Sprockets::Transformers#register_transformer (method)">#register_transformer</a></td>
      <td><div class='inline'><p>Public: Register a transformer from and to a mime type.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Transformers.html#register_transformer_suffix-instance_method" title="Sprockets::Transformers#register_transformer_suffix (method)">#register_transformer_suffix</a></td>
      <td><div class='inline'><p>Internal: Register transformer for existing type adding a suffix.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Transformers.html#resolve_transform_type-instance_method" title="Sprockets::Transformers#resolve_transform_type (method)">#resolve_transform_type</a></td>
      <td><div class='inline'><p>Internal: <a href="Resolve.html" title="Sprockets::Resolve (module)"><code>Resolve</code></a> target mime type that the source type should be transformed to.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Transformers.html#transformers-instance_method" title="Sprockets::Transformers#transformers (method)">#transformers</a></td>
      <td><div class='inline'><p>Public: Two level mapping of a source mime type to a target mime type.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="Transformers.html#compose_transformer_list-instance_method" title="Sprockets::Transformers#compose_transformer_list (method)">#compose_transformer_list</a>,
        <a class='i_m priv' href="Transformers.html#compute_transformers!-instance_method" title="Sprockets::Transformers#compute_transformers! (method)">#compute_transformers!</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="HTTPUtils.html" title="Sprockets::HTTPUtils (module)"><code>HTTPUtils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="HTTPUtils.html#find_best_mime_type_match-instance_method" title="Sprockets::HTTPUtils#find_best_mime_type_match (method)">#find_best_mime_type_match</a></td>
      <td><div class='inline'><p>Internal: Find the best qvalue match from an Array of available mime type options.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="HTTPUtils.html#find_best_q_match-instance_method" title="Sprockets::HTTPUtils#find_best_q_match (method)">#find_best_q_match</a></td>
      <td><div class='inline'><p>Internal: Find the best qvalue match from an Array of available options.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="HTTPUtils.html#find_mime_type_matches-instance_method" title="Sprockets::HTTPUtils#find_mime_type_matches (method)">#find_mime_type_matches</a></td>
      <td><div class='inline'><p>Internal: Find the all qvalue match from an Array of available mime type options.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="HTTPUtils.html#find_q_matches-instance_method" title="Sprockets::HTTPUtils#find_q_matches (method)">#find_q_matches</a></td>
      <td><div class='inline'><p>Internal: Find all qvalue matches from an Array of available options.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="HTTPUtils.html#match_mime_type%3F-instance_method" title="Sprockets::HTTPUtils#match_mime_type? (method)">#match_mime_type?</a></td>
      <td><div class='inline'><p>Public: Test mime type against mime range.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="HTTPUtils.html#match_mime_type_keys-instance_method" title="Sprockets::HTTPUtils#match_mime_type_keys (method)">#match_mime_type_keys</a></td>
      <td><div class='inline'><p>Public: Return values from Hash where the key matches the mime type.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="HTTPUtils.html#parse_q_values-instance_method" title="Sprockets::HTTPUtils#parse_q_values (method)">#parse_q_values</a></td>
      <td><div class='inline'><p>Internal: Parse Accept header quality values.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Utils.html" title="Sprockets::Utils (module)"><code>Utils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#concat_javascript_sources-instance_method" title="Sprockets::Utils#concat_javascript_sources (method)">#concat_javascript_sources</a></td>
      <td><div class='inline'><p>Internal: Accumulate asset source to buffer and append a trailing semicolon if necessary.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#dfs-instance_method" title="Sprockets::Utils#dfs (method)">#dfs</a></td>
      <td><div class='inline'><p>Internal: Post-order Depth-First search algorithm.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#dfs_paths-instance_method" title="Sprockets::Utils#dfs_paths (method)">#dfs_paths</a></td>
      <td><div class='inline'><p>Internal: Post-order Depth-First search algorithm that gathers all paths along the way.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#duplicable%3F-instance_method" title="Sprockets::Utils#duplicable? (method)">#duplicable?</a></td>
      <td><div class='inline'><p>Internal: Check if object can safely be .dup’d.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#hash_reassoc-instance_method" title="Sprockets::Utils#hash_reassoc (method)">#hash_reassoc</a></td>
      <td><div class='inline'><p>Internal: Duplicate and store key/value on new frozen hash.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#hash_reassoc1-instance_method" title="Sprockets::Utils#hash_reassoc1 (method)">#hash_reassoc1</a></td>
      <td><div class='inline'><p>Internal: Duplicate and store key/value on new frozen hash.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#module_include-instance_method" title="Sprockets::Utils#module_include (method)">#module_include</a></td>
      <td><div class='inline'><p>Internal: Inject into target module for the duration of the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Utils.html#string_end_with_semicolon%3F-instance_method" title="Sprockets::Utils#string_end_with_semicolon? (method)">#string_end_with_semicolon?</a></td>
      <td><div class='inline'><p>Internal: Check if string has a trailing semicolon.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="DigestUtils.html" title="Sprockets::DigestUtils (module)"><code>DigestUtils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#already_digested%3F-instance_method" title="Sprockets::DigestUtils#already_digested? (method)">#already_digested?</a></td>
      <td><div class='inline'><p>Internal: Checks an asset name for a valid digest.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#detect_digest_class-instance_method" title="Sprockets::DigestUtils#detect_digest_class (method)">#detect_digest_class</a></td>
      <td><div class='inline'><p>Internal: Detect digest class hash algorithm for digest bytes.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#digest-instance_method" title="Sprockets::DigestUtils#digest (method)">#digest</a></td>
      <td><div class='inline'><p>Internal: Generate a hexdigest for a nested JSON serializable object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#digest_class-instance_method" title="Sprockets::DigestUtils#digest_class (method)">#digest_class</a></td>
      <td><div class='inline'><p>Internal: Default digest class.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#hexdigest-instance_method" title="Sprockets::DigestUtils#hexdigest (method)">#hexdigest</a></td>
      <td><div class='inline'><p>Internal: Generate a hexdigest for a nested JSON serializable object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#hexdigest_integrity_uri-instance_method" title="Sprockets::DigestUtils#hexdigest_integrity_uri (method)">#hexdigest_integrity_uri</a></td>
      <td><div class='inline'><p>Public: Generate hash for use in the <code>integrity</code> attribute of an asset tag as per the subresource integrity specification.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#integrity_uri-instance_method" title="Sprockets::DigestUtils#integrity_uri (method)">#integrity_uri</a></td>
      <td><div class='inline'><p>Public: Generate hash for use in the <code>integrity</code> attribute of an asset tag as per the subresource integrity specification.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#pack_base64digest-instance_method" title="Sprockets::DigestUtils#pack_base64digest (method)">#pack_base64digest</a></td>
      <td><div class='inline'><p>Internal: Pack a binary digest to a base64 encoded string.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#pack_hexdigest-instance_method" title="Sprockets::DigestUtils#pack_hexdigest (method)">#pack_hexdigest</a></td>
      <td><div class='inline'><p>Internal: Pack a binary digest to a hex encoded string.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#pack_urlsafe_base64digest-instance_method" title="Sprockets::DigestUtils#pack_urlsafe_base64digest (method)">#pack_urlsafe_base64digest</a></td>
      <td><div class='inline'><p>Internal: Pack a binary digest to a urlsafe base64 encoded string.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="DigestUtils.html#unpack_hexdigest-instance_method" title="Sprockets::DigestUtils#unpack_hexdigest (method)">#unpack_hexdigest</a></td>
      <td><div class='inline'><p>Internal: Unpack a hex encoded digest string into binary bytes.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m priv' href="DigestUtils.html#build_digest-instance_method" title="Sprockets::DigestUtils#build_digest (method)">#build_digest</a>
      </td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="PathUtils.html" title="Sprockets::PathUtils (module)"><code>PathUtils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#absolute_path%3F-instance_method" title="Sprockets::PathUtils#absolute_path? (method)">#absolute_path?</a></td>
      <td><div class='inline'><p>On Windows, ALT_SEPARATOR is \ Delegate to Pathname since the logic gets complex.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#atomic_write-instance_method" title="Sprockets::PathUtils#atomic_write (method)">#atomic_write</a></td>
      <td><div class='inline'><p>Public: Write to a file atomically.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#directory%3F-instance_method" title="Sprockets::PathUtils#directory? (method)">#directory?</a></td>
      <td><div class='inline'><p>Public: Like <code>File.directory?</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#entries-instance_method" title="Sprockets::PathUtils#entries (method)">#entries</a></td>
      <td><div class='inline'><p>Public: A version of <code>Dir.entries</code> that filters out ‘.` files and <code>~</code> swap files.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#file%3F-instance_method" title="Sprockets::PathUtils#file? (method)">#file?</a></td>
      <td><div class='inline'><p>Public: Like <code>File.file?</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#find_matching_path_for_extensions-instance_method" title="Sprockets::PathUtils#find_matching_path_for_extensions (method)">#find_matching_path_for_extensions</a></td>
      <td><div class='inline'><p>Internal: Match paths in a directory against available extensions.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#find_upwards-instance_method" title="Sprockets::PathUtils#find_upwards (method)">#find_upwards</a></td>
      <td><div class='inline'><p>Internal: Find target basename checking upwards from path.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#join-instance_method" title="Sprockets::PathUtils#join (method)">#join</a></td>
      <td><div class='inline'><p>Public: Joins path to base path.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#match_path_extname-instance_method" title="Sprockets::PathUtils#match_path_extname (method)">#match_path_extname</a></td>
      <td><div class='inline'><p>Internal: Match path extnames against available extensions.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#path_extnames-instance_method" title="Sprockets::PathUtils#path_extnames (method)">#path_extnames</a></td>
      <td><div class='inline'><p>Internal: Get path’s extensions.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#path_parents-instance_method" title="Sprockets::PathUtils#path_parents (method)">#path_parents</a></td>
      <td><div class='inline'><p>Internal: Returns all parents for path.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#paths_split-instance_method" title="Sprockets::PathUtils#paths_split (method)">#paths_split</a></td>
      <td><div class='inline'><p>Internal: Detect root path and base for file in a set of paths.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#relative_path%3F-instance_method" title="Sprockets::PathUtils#relative_path? (method)">#relative_path?</a></td>
      <td><div class='inline'><p>Public: Check if path is explicitly relative.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#relative_path_from-instance_method" title="Sprockets::PathUtils#relative_path_from (method)">#relative_path_from</a></td>
      <td><div class='inline'><p>Public: Get relative path from <code>start</code> to <code>dest</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#set_pipeline-instance_method" title="Sprockets::PathUtils#set_pipeline (method)">#set_pipeline</a></td>
      <td><div class='inline'><p>Public: Sets pipeline for path.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#split_subpath-instance_method" title="Sprockets::PathUtils#split_subpath (method)">#split_subpath</a></td>
      <td><div class='inline'><p>Internal: Get relative path for root path and subpath.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#stat-instance_method" title="Sprockets::PathUtils#stat (method)">#stat</a></td>
      <td><div class='inline'><p>Public: Like <code>File.stat</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#stat_directory-instance_method" title="Sprockets::PathUtils#stat_directory (method)">#stat_directory</a></td>
      <td><div class='inline'><p>Public: Stat all the files under a directory.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#stat_sorted_tree-instance_method" title="Sprockets::PathUtils#stat_sorted_tree (method)">#stat_sorted_tree</a></td>
      <td><div class='inline'><p>Public: Recursive stat all the files under a directory in alphabetical order.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="PathUtils.html#stat_tree-instance_method" title="Sprockets::PathUtils#stat_tree (method)">#stat_tree</a></td>
      <td><div class='inline'><p>Public: Recursive stat all the files under a directory.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="ProcessorUtils.html" title="Sprockets::ProcessorUtils (module)"><code>ProcessorUtils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ProcessorUtils.html#call_processor-instance_method" title="Sprockets::ProcessorUtils#call_processor (method)">#call_processor</a></td>
      <td><div class='inline'><p>Public: Invoke processor.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ProcessorUtils.html#call_processors-instance_method" title="Sprockets::ProcessorUtils#call_processors (method)">#call_processors</a></td>
      <td><div class='inline'><p>Public: Invoke list of processors in right to left order.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ProcessorUtils.html#compose_processors-instance_method" title="Sprockets::ProcessorUtils#compose_processors (method)">#compose_processors</a></td>
      <td><div class='inline'><p>Public: Compose processors in right to left order.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ProcessorUtils.html#processor_cache_key-instance_method" title="Sprockets::ProcessorUtils#processor_cache_key (method)">#processor_cache_key</a></td>
      <td><div class='inline'><p>Internal: Get processor defined cached key.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ProcessorUtils.html#processors_cache_keys-instance_method" title="Sprockets::ProcessorUtils#processors_cache_keys (method)">#processors_cache_keys</a></td>
      <td><div class='inline'><p>Internal: Get combined cache keys for set of processors.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="ProcessorUtils.html#validate_processor_result!-instance_method" title="Sprockets::ProcessorUtils#validate_processor_result! (method)">#validate_processor_result!</a></td>
      <td><div class='inline'><p>Internal: Validate returned result of calling a processor pipeline and raise a friendly user error message.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="URIUtils.html" title="Sprockets::URIUtils (module)"><code>URIUtils</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#build_asset_uri-instance_method" title="Sprockets::URIUtils#build_asset_uri (method)">#build_asset_uri</a></td>
      <td><div class='inline'><p>Internal: Build Asset URI.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#build_file_digest_uri-instance_method" title="Sprockets::URIUtils#build_file_digest_uri (method)">#build_file_digest_uri</a></td>
      <td><div class='inline'><p>Internal: Build file-digest dependency URI.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#encode_uri_query_params-instance_method" title="Sprockets::URIUtils#encode_uri_query_params (method)">#encode_uri_query_params</a></td>
      <td><div class='inline'><p>Internal: Serialize hash of params into query string.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#join_file_uri-instance_method" title="Sprockets::URIUtils#join_file_uri (method)">#join_file_uri</a></td>
      <td><div class='inline'><p>Internal: Join file: URI component parts into String.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#join_uri-instance_method" title="Sprockets::URIUtils#join_uri (method)">#join_uri</a></td>
      <td><div class='inline'><p>Internal: Join URI component parts into String.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#parse_asset_uri-instance_method" title="Sprockets::URIUtils#parse_asset_uri (method)">#parse_asset_uri</a></td>
      <td><div class='inline'><p>Internal: Parse Asset URI.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#parse_file_digest_uri-instance_method" title="Sprockets::URIUtils#parse_file_digest_uri (method)">#parse_file_digest_uri</a></td>
      <td><div class='inline'><p>Internal: Parse file-digest dependency URI.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#parse_uri_query_params-instance_method" title="Sprockets::URIUtils#parse_uri_query_params (method)">#parse_uri_query_params</a></td>
      <td><div class='inline'><p>Internal: Parse query string into hash of params.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#split_file_uri-instance_method" title="Sprockets::URIUtils#split_file_uri (method)">#split_file_uri</a></td>
      <td><div class='inline'><p>Internal: Parse file: URI into component parts.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#split_uri-instance_method" title="Sprockets::URIUtils#split_uri (method)">#split_uri</a></td>
      <td><div class='inline'><p>Internal: Parse URI into component parts.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="URIUtils.html#valid_asset_uri%3F-instance_method" title="Sprockets::URIUtils#valid_asset_uri? (method)">#valid_asset_uri?</a></td>
      <td><div class='inline'><p>Internal: Check if String is a valid <a href="Asset.html" title="Sprockets::Asset (class)"><code>Asset</code></a> URI.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="asset_from_cache-instance_method">
  <h3 class='signature priv first'>
    #<strong>asset_from_cache</strong>(key)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Internal: Load asset hash from cache</p>

<p>key - A String containing lookup information for an asset</p>

<p>This method converts all “compressed” paths to absolute paths. Returns a hash of values representing an asset</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L111-L131'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='111' data-end='131'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 111</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_asset_from_cache'>asset_from_cache</span>(<span class='id identifier rubyid_key'>key</span>)
  <span class='id identifier rubyid_asset'>asset</span> <span class='op'>=</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='kw'>true</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_asset'>asset</span>
    <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span>]       <span class='op'>=</span> <span class='id identifier rubyid_expand_from_root'>expand_from_root</span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span>])
    <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_load_path'>load_path</span>] <span class='op'>=</span> <span class='id identifier rubyid_expand_from_root'>expand_from_root</span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_load_path'>load_path</span>])
    <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_filename'>filename</span>]  <span class='op'>=</span> <span class='id identifier rubyid_expand_from_root'>expand_from_root</span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_filename'>filename</span>])
    <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_included'>included</span>)
    <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_links'>links</span>)
    <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_stubbed'>stubbed</span>)
    <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_required'>required</span>)
    <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_load'>to_load</span>)
    <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_link'>to_link</span>)
    <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dependencies'>dependencies</span>) { <span class='op'>|</span><span class='id identifier rubyid_uri'>uri</span><span class='op'>|</span> <span class='id identifier rubyid_uri'>uri</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest://</span><span class='tstring_end'>&quot;</span></span>) }

    <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>].<span class='id identifier rubyid_each_key'>each_key</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>_dependencies\z</span><span class='regexp_end'>/</span></span>) <span class='comment'># rubocop:disable Performance/EndWith
</span>      <span class='id identifier rubyid_expand_key_from_hash'><a href="#expand_key_from_hash-instance_method" title="Sprockets::Loader#expand_key_from_hash (method)">expand_key_from_hash</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_asset'>asset</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compress_key_from_hash-instance_method">
  <h3 class='signature priv'>
    #<strong>compress_key_from_hash</strong>(hash, key)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L67-L84'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='67' data-end='84'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 67</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_compress_key_from_hash'>compress_key_from_hash</span>(<span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_key'>key</span>)
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span>[<span class='id identifier rubyid_key'>key</span>].<span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_value'>value</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='kw'>yield</span> <span class='id identifier rubyid_x'>x</span>
       <span class='id identifier rubyid_compress_from_root'>compress_from_root</span>(<span class='id identifier rubyid_x'>x</span>)
      <span class='kw'>else</span>
       <span class='id identifier rubyid_x'>x</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_map!'>map!</span> { <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_compress_from_root'>compress_from_root</span>(<span class='id identifier rubyid_x'>x</span>) }
  <span class='kw'>end</span>
  <span class='id identifier rubyid_hash'>hash</span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expand_key_from_hash-instance_method">
  <h3 class='signature priv'>
    #<strong>expand_key_from_hash</strong>(hash, key)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L87-L103'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='87' data-end='103'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 87</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expand_key_from_hash'>expand_key_from_hash</span>(<span class='id identifier rubyid_hash'>hash</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_key'>key</span>)
  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span>[<span class='id identifier rubyid_key'>key</span>].<span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_value'>value</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='kw'>yield</span> <span class='id identifier rubyid_x'>x</span>
        <span class='id identifier rubyid_expand_from_root'>expand_from_root</span>(<span class='id identifier rubyid_x'>x</span>)
      <span class='kw'>else</span>
        <span class='id identifier rubyid_x'>x</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_map!'>map!</span> { <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_expand_from_root'>expand_from_root</span>(<span class='id identifier rubyid_x'>x</span>) }
  <span class='kw'>end</span>
  <span class='id identifier rubyid_hash'>hash</span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch_asset_from_dependency_cache-instance_method">
  <h3 class='signature priv'>
    #<strong>fetch_asset_from_dependency_cache</strong>(unloaded, limit = 3)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Internal: Retrieves an asset based on its digest</p>

<p>unloaded - An UnloadedAsset limit    - An Integer which sets the maximum number of versions of “histories”</p>

<pre class="code ruby"><code class="ruby">stored in the cache</code></pre>

<p>This method attempts to retrieve the last <code>limit</code> number of histories of an asset from the cache a “history” which is an array of unresolved “dependencies” that the asset needs to compile. In this case a dependency can refer to either an asset e.g. index.js may rely on jquery.js (so jquery.js is a dependency), or other factors that may affect compilation, such as the <a href="../Sprockets.html#VERSION-constant" title="Sprockets::VERSION (constant)">VERSION</a> of <a href="../Sprockets.html" title="Sprockets (module)"><code>::Sprockets</code></a> (i.e. the environment) and what “processors” are used.</p>

<p>For example a history array may look something like this</p>

<pre class="code ruby"><code class="ruby">[[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment-version</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment-paths</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>processors:type=text/css&amp;file_type=text/css</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest:///Full/path/app/assets/stylesheets/application.css</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>processors:type=text/css&amp;file_digesttype=text/css&amp;pipeline=self</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest:///Full/path/app/assets/stylesheets</span><span class='tstring_end'>&quot;</span></span>]]</code></pre>

<p>Where the first entry is a Set of dependencies for last generated version of that asset. Multiple versions are stored since <a href="../Sprockets.html" title="Sprockets (module)"><code>::Sprockets</code></a> keeps the last <code>limit</code> number of assets generated present in the system.</p>

<p>If a “history” of dependencies is present in the cache, each version of “history” will be yielded to the passed block which is responsible for loading the asset. If found, the existing history will be saved with the dependency that found a valid asset moved to the front.</p>

<p>If no history is present, or if none of the histories could be resolved to a valid asset then, the block is yielded to and expected to return a valid asset. When this happens the dependencies for the returned asset are added to the “history”, and older entries are removed if the “history” is above <code>limit</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L325-L345'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='325' data-end='345'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 325</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_asset_from_dependency_cache'>fetch_asset_from_dependency_cache</span>(<span class='id identifier rubyid_unloaded'>unloaded</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='int'>3</span>)
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_dependency_history_key'>dependency_history_key</span>

  <span class='id identifier rubyid_history'>history</span> <span class='op'>=</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_key'>key</span>) <span class='op'>||</span> []
  <span class='id identifier rubyid_history'>history</span>.<span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_deps'>deps</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='id identifier rubyid_expanded_deps'>expanded_deps</span> <span class='op'>=</span> <span class='id identifier rubyid_deps'>deps</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
      <span class='id identifier rubyid_path'>path</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest://</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>?</span> <span class='id identifier rubyid_expand_from_root'>expand_from_root</span>(<span class='id identifier rubyid_path'>path</span>) <span class='op'>:</span> <span class='id identifier rubyid_path'>path</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_asset'>asset</span> <span class='op'>=</span> <span class='kw'>yield</span>(<span class='id identifier rubyid_expanded_deps'>expanded_deps</span>)
      <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_set'>set</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_history'>history</span>.<span class='id identifier rubyid_rotate!'>rotate!</span>(<span class='id identifier rubyid_index'>index</span>)) <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_asset'>asset</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_asset'>asset</span> <span class='op'>=</span> <span class='kw'>yield</span>
  <span class='id identifier rubyid_deps'>deps</span>  <span class='op'>=</span> <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>][<span class='symbeg'>:</span><span class='id identifier rubyid_dependencies'>dependencies</span>].<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_uri'>uri</span><span class='op'>|</span>
    <span class='id identifier rubyid_uri'>uri</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest://</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>?</span> <span class='id identifier rubyid_compress_from_root'>compress_from_root</span>(<span class='id identifier rubyid_uri'>uri</span>) <span class='op'>:</span> <span class='id identifier rubyid_uri'>uri</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_set'>set</span>(<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_history'>history</span>.<span class='id identifier rubyid_unshift'>unshift</span>(<span class='id identifier rubyid_deps'>deps</span>).<span class='id identifier rubyid_take'>take</span>(<span class='id identifier rubyid_limit'>limit</span>))
  <span class='id identifier rubyid_asset'>asset</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load-instance_method">
  <h3 class='signature '>
    #<strong>load</strong>(uri)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Public: Load Asset by <a href="Asset.html" title="Sprockets::Asset (class)"><code>Asset</code></a> URI.</p>

<p>uri - A String containing complete URI to a file including schema</p>

<pre class="code ruby"><code class="ruby">and full path such as:
&quot;file:///Path/app/assets/js/app.js?type=application/javascript&quot;</code></pre>

<p>Returns Asset.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L31-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='31' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 31</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load'>load</span>(<span class='id identifier rubyid_uri'>uri</span>)
  <span class='id identifier rubyid_unloaded'>unloaded</span> <span class='op'>=</span> <span class='const'><a href="UnloadedAsset.html" title="Sprockets::UnloadedAsset (class)">UnloadedAsset</a></span>.<span class='id identifier rubyid_new'><a href="UnloadedAsset.html#new-class_method" title="Sprockets::UnloadedAsset.new (method)">new</a></span>(<span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>self</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>)
    <span class='kw'>unless</span> <span class='id identifier rubyid_asset'>asset</span> <span class='op'>=</span> <span class='id identifier rubyid_asset_from_cache'><a href="#asset_from_cache-instance_method" title="Sprockets::Loader#asset_from_cache (method)">asset_from_cache</a></span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_asset_key'>asset_key</span>)
      <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>)
      <span class='id identifier rubyid_uri_without_id'>uri_without_id</span> <span class='op'>=</span> <span class='id identifier rubyid_build_asset_uri'>build_asset_uri</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>)
      <span class='id identifier rubyid_asset'>asset</span> <span class='op'>=</span> <span class='id identifier rubyid_load_from_unloaded'><a href="#load_from_unloaded-instance_method" title="Sprockets::Loader#load_from_unloaded (method)">load_from_unloaded</a></span>(<span class='const'><a href="UnloadedAsset.html" title="Sprockets::UnloadedAsset (class)">UnloadedAsset</a></span>.<span class='id identifier rubyid_new'><a href="UnloadedAsset.html#new-class_method" title="Sprockets::UnloadedAsset.new (method)">new</a></span>(<span class='id identifier rubyid_uri_without_id'>uri_without_id</span><span class='comma'>,</span> <span class='kw'>self</span>))
      <span class='kw'>if</span> <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>] <span class='op'>!=</span> <span class='id identifier rubyid_id'>id</span>
        <span class='ivar'>@logger</span>.<span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sprockets load error: Tried to find </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>, but latest was id </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>]<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_asset'>asset</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch_asset_from_dependency_cache'><a href="#fetch_asset_from_dependency_cache-instance_method" title="Sprockets::Loader#fetch_asset_from_dependency_cache (method)">fetch_asset_from_dependency_cache</a></span>(<span class='id identifier rubyid_unloaded'>unloaded</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_paths'>paths</span><span class='op'>|</span>
      <span class='comment'># When asset is previously generated, its &quot;dependencies&quot; are stored in the cache.
</span>      <span class='comment'># The presence of `paths` indicates dependencies were stored.
</span>      <span class='comment'># We can check to see if the dependencies have not changed by &quot;resolving&quot; them and
</span>      <span class='comment'># generating a digest key from the resolved entries. If this digest key has not
</span>      <span class='comment'># changed, the asset will be pulled from cache.
</span>      <span class='comment'>#
</span>      <span class='comment'># If this `paths` is present but the cache returns nothing then `fetch_asset_from_dependency_cache`
</span>      <span class='comment'># will confusingly be called again with `paths` set to nil where the asset will be
</span>      <span class='comment'># loaded from disk.
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_paths'>paths</span>
        <span class='id identifier rubyid_digest'>digest</span> <span class='op'>=</span> <span class='const'><a href="DigestUtils.html" title="Sprockets::DigestUtils (module)">DigestUtils</a></span>.<span class='id identifier rubyid_digest'><a href="DigestUtils.html#digest-instance_method" title="Sprockets::DigestUtils#digest (method)">digest</a></span>(<span class='id identifier rubyid_resolve_dependencies'><a href="#resolve_dependencies-instance_method" title="Sprockets::Loader#resolve_dependencies (method)">resolve_dependencies</a></span>(<span class='id identifier rubyid_paths'>paths</span>))
        <span class='kw'>if</span> <span class='id identifier rubyid_uri_from_cache'>uri_from_cache</span> <span class='op'>=</span> <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_get'>get</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_digest_key'>digest_key</span>(<span class='id identifier rubyid_digest'>digest</span>)<span class='comma'>,</span> <span class='kw'>true</span>)
          <span class='id identifier rubyid_asset_from_cache'><a href="#asset_from_cache-instance_method" title="Sprockets::Loader#asset_from_cache (method)">asset_from_cache</a></span>(<span class='const'><a href="UnloadedAsset.html" title="Sprockets::UnloadedAsset (class)">UnloadedAsset</a></span>.<span class='id identifier rubyid_new'><a href="UnloadedAsset.html#new-class_method" title="Sprockets::UnloadedAsset.new (method)">new</a></span>(<span class='id identifier rubyid_uri_from_cache'>uri_from_cache</span><span class='comma'>,</span> <span class='kw'>self</span>).<span class='id identifier rubyid_asset_key'><a href="UnloadedAsset.html#asset_key-instance_method" title="Sprockets::UnloadedAsset#asset_key (method)">asset_key</a></span>)
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_load_from_unloaded'><a href="#load_from_unloaded-instance_method" title="Sprockets::Loader#load_from_unloaded (method)">load_from_unloaded</a></span>(<span class='id identifier rubyid_unloaded'>unloaded</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='const'><a href="Asset.html" title="Sprockets::Asset (class)">Asset</a></span>.<span class='id identifier rubyid_new'><a href="Asset.html#new-class_method" title="Sprockets::Asset.new (method)">new</a></span>(<span class='id identifier rubyid_asset'>asset</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_from_unloaded-instance_method">
  <h3 class='signature priv'>
    #<strong>load_from_unloaded</strong>(unloaded)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Internal: Loads an asset and saves it to cache</p>

<p>unloaded - An UnloadedAsset</p>

<p>This method is only called when the given unloaded asset could not be successfully pulled from cache.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L139-L230'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='139' data-end='230'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 139</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_from_unloaded'>load_from_unloaded</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>)
  <span class='kw'>unless</span> <span class='id identifier rubyid_file?'>file?</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="FileNotFound.html" title="Sprockets::FileNotFound (class)">FileNotFound</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>could not find file: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_path_to_split'>path_to_split</span> <span class='op'>=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_index_alias'>index_alias</span> <span class='op'>=</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_index_alias'>index_alias</span>]
      <span class='id identifier rubyid_expand_from_root'>expand_from_root</span> <span class='id identifier rubyid_index_alias'>index_alias</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_load_path'>load_path</span><span class='comma'>,</span> <span class='id identifier rubyid_logical_path'>logical_path</span> <span class='op'>=</span> <span class='id identifier rubyid_paths_split'>paths_split</span>(<span class='id identifier rubyid_config'>config</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_paths'>paths</span>]<span class='comma'>,</span> <span class='id identifier rubyid_path_to_split'>path_to_split</span>)

  <span class='kw'>unless</span> <span class='id identifier rubyid_load_path'>load_path</span>
    <span class='id identifier rubyid_target'>target</span> <span class='op'>=</span> <span class='id identifier rubyid_path_to_split'>path_to_split</span>
    <span class='id identifier rubyid_target'>target</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> (index alias of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_index_alias'>index_alias</span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="FileOutsidePaths.html" title="Sprockets::FileOutsidePaths (class)">FileOutsidePaths</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_target'>target</span><span class='embexpr_end'>}</span><span class='tstring_content'> is no longer under a load path: </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_paths'>paths</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_extname'>extname</span><span class='comma'>,</span> <span class='id identifier rubyid_file_type'>file_type</span> <span class='op'>=</span> <span class='id identifier rubyid_match_path_extname'>match_path_extname</span>(<span class='id identifier rubyid_logical_path'>logical_path</span><span class='comma'>,</span> <span class='id identifier rubyid_mime_exts'>mime_exts</span>)
  <span class='id identifier rubyid_logical_path'>logical_path</span> <span class='op'>=</span> <span class='id identifier rubyid_logical_path'>logical_path</span>.<span class='id identifier rubyid_chomp'>chomp</span>(<span class='id identifier rubyid_extname'>extname</span>)
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_logical_path'>logical_path</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_pipeline'>pipeline</span> <span class='op'>=</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_pipeline'>pipeline</span>]
    <span class='id identifier rubyid_logical_path'>logical_path</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pipeline'>pipeline</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span>]
    <span class='id identifier rubyid_extensions'>extensions</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_mime_types'>mime_types</span>][<span class='id identifier rubyid_type'>type</span>][<span class='symbeg'>:</span><span class='id identifier rubyid_extensions'>extensions</span>]
    <span class='id identifier rubyid_extension'>extension</span> <span class='op'>=</span> <span class='id identifier rubyid_extensions'>extensions</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_extname'>extname</span>) <span class='op'>?</span> <span class='id identifier rubyid_extname'>extname</span> <span class='op'>:</span> <span class='id identifier rubyid_extensions'>extensions</span>.<span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_logical_path'>logical_path</span> <span class='op'>+=</span> <span class='id identifier rubyid_extension'>extension</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>!=</span> <span class='id identifier rubyid_file_type'>file_type</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_config'>config</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_transformers'>transformers</span>][<span class='id identifier rubyid_file_type'>file_type</span>][<span class='id identifier rubyid_type'>type</span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="ConversionError.html" title="Sprockets::ConversionError (class)">ConversionError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>could not convert </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_type'>file_type</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_processors'>processors</span> <span class='op'>=</span> <span class='id identifier rubyid_processors_for'>processors_for</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_file_type'>file_type</span><span class='comma'>,</span> <span class='id identifier rubyid_pipeline'>pipeline</span>)

  <span class='id identifier rubyid_processors_dep_uri'>processors_dep_uri</span> <span class='op'>=</span> <span class='id identifier rubyid_build_processors_uri'>build_processors_uri</span>(<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_file_type'>file_type</span><span class='comma'>,</span> <span class='id identifier rubyid_pipeline'>pipeline</span>)
  <span class='id identifier rubyid_dependencies'>dependencies</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dependencies'>dependencies</span>] <span class='op'>+</span> [<span class='id identifier rubyid_processors_dep_uri'>processors_dep_uri</span>]

  <span class='comment'># Read into memory and process if theres a processor pipeline
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_processors'>processors</span>.<span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_call_processors'>call_processors</span>(<span class='id identifier rubyid_processors'>processors</span><span class='comma'>,</span> {
      <span class='label'>environment:</span> <span class='kw'>self</span><span class='comma'>,</span>
      <span class='label'>cache:</span> <span class='kw'>self</span>.<span class='id identifier rubyid_cache'>cache</span><span class='comma'>,</span>
      <span class='label'>uri:</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span>
      <span class='label'>filename:</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span>
      <span class='label'>load_path:</span> <span class='id identifier rubyid_load_path'>load_path</span><span class='comma'>,</span>
      <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>content_type:</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span>
      <span class='label'>metadata:</span> {
        <span class='label'>dependencies:</span> <span class='id identifier rubyid_dependencies'>dependencies</span>
      }
    })
    <span class='id identifier rubyid_validate_processor_result!'>validate_processor_result!</span>(<span class='id identifier rubyid_result'>result</span>)
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_data'>data</span>)
    <span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>
    <span class='id identifier rubyid_metadata'>metadata</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_charset'>charset</span>] <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_encoding'>encoding</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_downcase'>downcase</span> <span class='kw'>unless</span> <span class='id identifier rubyid_metadata'>metadata</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_charset'>charset</span>)
    <span class='id identifier rubyid_metadata'>metadata</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_digest'>digest</span>]  <span class='op'>=</span> <span class='id identifier rubyid_digest'>digest</span>(<span class='id identifier rubyid_source'>source</span>)
    <span class='id identifier rubyid_metadata'>metadata</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_length'>length</span>]  <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>
    <span class='id identifier rubyid_metadata'>metadata</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_environment_version'>environment_version</span>] <span class='op'>=</span> <span class='id identifier rubyid_version'>version</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_dependencies'>dependencies</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_build_file_digest_uri'>build_file_digest_uri</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span>)
    <span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>=</span> {
      <span class='label'>digest:</span> <span class='id identifier rubyid_file_digest'>file_digest</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span>)<span class='comma'>,</span>
      <span class='label'>length:</span> <span class='kw'>self</span>.<span class='id identifier rubyid_stat'>stat</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span>).<span class='id identifier rubyid_size'>size</span><span class='comma'>,</span>
      <span class='label'>dependencies:</span> <span class='id identifier rubyid_dependencies'>dependencies</span><span class='comma'>,</span>
      <span class='label'>environment_version:</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span>
    }
  <span class='kw'>end</span>

  <span class='id identifier rubyid_asset'>asset</span> <span class='op'>=</span> {
    <span class='label'>uri:</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span>
    <span class='label'>load_path:</span> <span class='id identifier rubyid_load_path'>load_path</span><span class='comma'>,</span>
    <span class='label'>filename:</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span>
    <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='label'>logical_path:</span> <span class='id identifier rubyid_logical_path'>logical_path</span><span class='comma'>,</span>
    <span class='label'>content_type:</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span>
    <span class='label'>source:</span> <span class='id identifier rubyid_source'>source</span><span class='comma'>,</span>
    <span class='label'>metadata:</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='comma'>,</span>
    <span class='label'>dependencies_digest:</span> <span class='const'><a href="DigestUtils.html" title="Sprockets::DigestUtils (module)">DigestUtils</a></span>.<span class='id identifier rubyid_digest'><a href="DigestUtils.html#digest-instance_method" title="Sprockets::DigestUtils#digest (method)">digest</a></span>(<span class='id identifier rubyid_resolve_dependencies'><a href="#resolve_dependencies-instance_method" title="Sprockets::Loader#resolve_dependencies (method)">resolve_dependencies</a></span>(<span class='id identifier rubyid_metadata'>metadata</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dependencies'>dependencies</span>]))
  }

  <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>]  <span class='op'>=</span> <span class='id identifier rubyid_hexdigest'>hexdigest</span>(<span class='id identifier rubyid_asset'>asset</span>)
  <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span>] <span class='op'>=</span> <span class='id identifier rubyid_build_asset_uri'>build_asset_uri</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_params'>params</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>id:</span> <span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span>]))

  <span class='id identifier rubyid_store_asset'><a href="#store_asset-instance_method" title="Sprockets::Loader#store_asset (method)">store_asset</a></span>(<span class='id identifier rubyid_asset'>asset</span><span class='comma'>,</span> <span class='id identifier rubyid_unloaded'>unloaded</span>)
  <span class='id identifier rubyid_asset'>asset</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="resolve_dependencies-instance_method">
  <h3 class='signature priv'>
    #<strong>resolve_dependencies</strong>(uris)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Internal: <a href="Resolve.html" title="Sprockets::Resolve (module)"><code>Resolve</code></a> set of dependency URIs.</p>

<p>uris - An Array of “dependencies” for example:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment-version</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment-paths</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>processors:type=text/css&amp;file_type=text/css</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest:///Full/path/app/assets/stylesheets/application.css</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>processors:type=text/css&amp;file_type=text/css&amp;pipeline=self</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest:///Full/path/app/assets/stylesheets</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Returns back array of things that the given uri depends on For example the environment version, if you’re using a different version of sprockets then the dependencies should be different, this is used only for generating cache key for example the “environment-version” may be resolved to “environment-1.0-3.2.0” for version “3.2.0” of sprockets.</p>

<p>Any paths that are returned are converted to relative paths</p>

<p>Returns array of resolved dependencies</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L289-L291'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='289' data-end='291'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 289</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_resolve_dependencies'>resolve_dependencies</span>(<span class='id identifier rubyid_uris'>uris</span>)
  <span class='id identifier rubyid_uris'>uris</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_uri'>uri</span><span class='op'>|</span> <span class='id identifier rubyid_resolve_dependency'>resolve_dependency</span>(<span class='id identifier rubyid_uri'>uri</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="store_asset-instance_method">
  <h3 class='signature priv'>
    #<strong>store_asset</strong>(asset, unloaded)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Internal: Save a given asset to the cache</p>

<p>asset - A hash containing values of loaded asset unloaded - The UnloadedAsset used to lookup the <code>asset</code></p>

<p>This method converts all absolute paths to “compressed” paths which are relative if they’re in the root.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/sprockets/blob/main/lib/sprockets/loader.rb#L239-L269'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='239' data-end='269'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/sprockets/loader.rb', line 239</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_store_asset'>store_asset</span>(<span class='id identifier rubyid_asset'>asset</span><span class='comma'>,</span> <span class='id identifier rubyid_unloaded'>unloaded</span>)
  <span class='comment'># Save the asset in the cache under the new URI
</span>  <span class='id identifier rubyid_cached_asset'>cached_asset</span>             <span class='op'>=</span> <span class='id identifier rubyid_asset'>asset</span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span>]       <span class='op'>=</span> <span class='id identifier rubyid_compress_from_root'>compress_from_root</span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span>])
  <span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_filename'>filename</span>]  <span class='op'>=</span> <span class='id identifier rubyid_compress_from_root'>compress_from_root</span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_filename'>filename</span>])
  <span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_load_path'>load_path</span>] <span class='op'>=</span> <span class='id identifier rubyid_compress_from_root'>compress_from_root</span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_load_path'>load_path</span>])

  <span class='kw'>if</span> <span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]
    <span class='comment'># Deep dup to avoid modifying `asset`
</span>    <span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>] <span class='op'>=</span> <span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>].<span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_included'>included</span>)
    <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_links'>links</span>)
    <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_stubbed'>stubbed</span>)
    <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_required'>required</span>)
    <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_load'>to_load</span>)
    <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_to_link'>to_link</span>)
    <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_dependencies'>dependencies</span>) { <span class='op'>|</span><span class='id identifier rubyid_uri'>uri</span><span class='op'>|</span> <span class='id identifier rubyid_uri'>uri</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file-digest://</span><span class='tstring_end'>&quot;</span></span>) }

    <span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>].<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_key'>key</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>_dependencies\z</span><span class='regexp_end'>/</span></span>) <span class='comment'># rubocop:disable Performance/EndWith
</span>      <span class='id identifier rubyid_compress_key_from_hash'><a href="#compress_key_from_hash-instance_method" title="Sprockets::Loader#compress_key_from_hash (method)">compress_key_from_hash</a></span>(<span class='id identifier rubyid_cached_asset'>cached_asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_metadata'>metadata</span>]<span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Unloaded asset and stored_asset now have a different URI
</span>  <span class='id identifier rubyid_stored_asset'>stored_asset</span> <span class='op'>=</span> <span class='const'><a href="UnloadedAsset.html" title="Sprockets::UnloadedAsset (class)">UnloadedAsset</a></span>.<span class='id identifier rubyid_new'><a href="UnloadedAsset.html#new-class_method" title="Sprockets::UnloadedAsset.new (method)">new</a></span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span>]<span class='comma'>,</span> <span class='kw'>self</span>)
  <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_set'>set</span>(<span class='id identifier rubyid_stored_asset'>stored_asset</span>.<span class='id identifier rubyid_asset_key'>asset_key</span><span class='comma'>,</span> <span class='id identifier rubyid_cached_asset'>cached_asset</span><span class='comma'>,</span> <span class='kw'>true</span>)

  <span class='comment'># Save the new relative path for the digest key of the unloaded asset
</span>  <span class='id identifier rubyid_cache'>cache</span>.<span class='id identifier rubyid_set'>set</span>(<span class='id identifier rubyid_unloaded'>unloaded</span>.<span class='id identifier rubyid_digest_key'>digest_key</span>(<span class='id identifier rubyid_asset'>asset</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dependencies_digest'>dependencies_digest</span>])<span class='comma'>,</span> <span class='id identifier rubyid_stored_asset'>stored_asset</span>.<span class='id identifier rubyid_compressed_path'>compressed_path</span><span class='comma'>,</span> <span class='kw'>true</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>