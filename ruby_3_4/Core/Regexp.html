<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Regexp &mdash; Core  Ruby-3.4.8 p72</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Regexp",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.4.8</a> &raquo; 
      <a href='.'>Core</a> &raquo; 
      <a href='_index.html#alpha_R'>Index (R)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Regexp&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Regexp</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="Regexp/TimeoutError.html" title="Regexp::TimeoutError (class)"><code>TimeoutError</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4825'>re.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/encoding.c#L1234'>encoding.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4801'>re.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>A <a href="https://en.wikipedia.org/wiki/Regular_expression" target="_parent" title="regular expression">regular expression</a> (also called a <em>regexp</em>) is a <em>match pattern</em> (also simply called a <em>pattern</em>).</p>

<p>A common notation for a regexp uses enclosing slash characters:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span></code></pre>

<p>A regexp may be applied to a <em>target string</em>; The part of the string (if any) that matches the pattern is called a <em>match</em>, and may be said <em>to match</em>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>red</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>redirect</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true   # Match at beginning of target.
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bored</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; true   # Match at end of target.
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>credit</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; true   # Match within target.
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; false  # No match.</span></code></pre>

<h2 id="label-Regexp+Uses">Regexp Uses</h2>

<p>A regexp may be used:</p>
<ul><li>
<p>To extract substrings based on a given pattern:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>              <span class='comment'># =&gt; /foo/
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>)        <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>good</span><span class='tstring_end'>&#39;</span></span>)        <span class='comment'># =&gt; nil</span></code></pre>

<p>See sections <a href="Regexp.html#label-Method+match" title="Method match">Method match</a> and <a href="rdoc-ref:Regexp@Operator+-3D~">Operator =~</a>.</p>
</li><li>
<p>To determine whether a string matches a given pattern:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>good</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; false</span></code></pre>

<p>See section <a href="rdoc-ref:Regexp@Method+match-3F">Method match?</a>.</p>
</li><li>
<p>As an argument for calls to certain methods in other classes and modules; most such methods accept an argument that may be either a string or the (much more powerful) regexp.</p>

<p>See <a href="../language/regexp/methods.html" title=" Methods"> Methods</a>.</p>
</li></ul>

<h2 id="label-Regexp+Objects">Regexp Objects</h2>

<p>A regexp object has:</p>
<ul><li>
<p>A source; see <a href="Regexp.html#label-Sources" title="Sources">Sources</a>.</p>
</li><li>
<p>Several modes; see <a href="Regexp.html#label-Modes" title="Modes">Modes</a>.</p>
</li><li>
<p>A timeout; see <a href="Regexp.html#label-Timeouts" title="Timeouts">Timeouts</a>.</p>
</li><li>
<p>An encoding; see <a href="Regexp.html#label-Encodings" title="Encodings">Encodings</a>.</p>
</li></ul>

<h2 id="label-Creating+a+Regexp">Creating a Regexp</h2>

<p>A regular expression may be created with:</p>
<ul><li>
<p>A regexp literal using slash characters (see <a href="../syntax/literals.html#label-Regexp%2BLiterals" title=" Literals"> Literals</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># This is a very common usage.
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; /foo/</span></code></pre>
</li><li>
<p>A <code>%r</code> regexp literal (see <a href="rdoc-ref:syntax/literals.rdoc@25r-3A+Regexp+Literals">%r: Regexp Literals</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Same delimiter character at beginning and end;
</span><span class='comment'># useful for avoiding escaping characters
</span><span class='tstring'><span class='regexp_beg'>%r/</span><span class='tstring_content'>name\/value pair</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; /name\/value pair/
</span><span class='tstring'><span class='regexp_beg'>%r:</span><span class='tstring_content'>name/value pair</span><span class='regexp_end'>:</span></span>  <span class='comment'># =&gt; /name\/value pair/
</span><span class='tstring'><span class='regexp_beg'>%r|</span><span class='tstring_content'>name/value pair</span><span class='regexp_end'>|</span></span>  <span class='comment'># =&gt; /name\/value pair/
</span>
<span class='comment'># Certain &quot;paired&quot; characters can be delimiters.
</span><span class='tstring'><span class='regexp_beg'>%r[</span><span class='tstring_content'>foo</span><span class='regexp_end'>]</span></span> <span class='comment'># =&gt; /foo/
</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>foo</span><span class='regexp_end'>}</span></span> <span class='comment'># =&gt; /foo/
</span><span class='tstring'><span class='regexp_beg'>%r(</span><span class='tstring_content'>foo</span><span class='regexp_end'>)</span></span> <span class='comment'># =&gt; /foo/
</span><span class='tstring'><span class='regexp_beg'>%r&lt;</span><span class='tstring_content'>foo</span><span class='regexp_end'>&gt;</span></span> <span class='comment'># =&gt; /foo/</span></code></pre>
</li><li>
<p><a href="Method.html" title="Method (class)"><code>::Method</code></a> <a href="#new-class_method" title="Regexp.new (method)">.new</a>.</p>
</li></ul>

<h2 id="label-Method+-7Bmatch-7D">Method <a href="#match-instance_method" title="Regexp#match (method)">#match</a></h2>

<p>Each of the methods <a href="#match-instance_method" title="Regexp#match (method)">#match</a>, <a href="String.html#match-instance_method" title="String#match (method)">String#match</a>, and <a href="Symbol.html#match-instance_method" title="Symbol#match (method)">Symbol#match</a> returns a <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object if a match was found, <code>nil</code> otherwise; each also sets <a href="Regexp.html#label-Global+Variables" title="global variables">global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<h2 id="label-Operator+-7B-3D~-7D">Operator <a href="#=~-instance_method" title="Regexp#=~ (method)">#=~</a></h2>

<p>Each of the operators <a href="#=~-instance_method" title="Regexp#=~ (method)">#=~</a>, <a href="String.html#=~-instance_method" title="String#=~ (method)">String#=~</a>, and <a href="Symbol.html#=~-instance_method" title="Symbol#=~ (method)">Symbol#=~</a> returns an integer offset if a match was found, <code>nil</code> otherwise; each also sets <a href="Regexp.html#label-Global+Variables" title="global variables">global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; 4
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; 4
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>baz</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; nil</span></code></pre>

<h2 id="label-Method+-7Bmatch-3F-7D">Method <a href="#match%3F-instance_method" title="Regexp#match? (method)">#match?</a></h2>

<p>Each of the methods <a href="#match%3F-instance_method" title="Regexp#match? (method)">#match?</a>, <a href="String.html#match%3F-instance_method" title="String#match? (method)">String#match?</a>, and <a href="Symbol.html#match%3F-instance_method" title="Symbol#match? (method)">Symbol#match?</a> returns <code>true</code> if a match was found, <code>false</code> otherwise; none sets <a href="Regexp.html#label-Global+Variables" title="global variables">global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; false</span></code></pre>

<h2 id="label-Global+Variables">Global Variables</h2>

<p>Certain regexp-oriented methods assign values to global variables:</p>
<ul><li>
<p><a href="#match-instance_method" title="Regexp#match (method)">#match</a>: see <a href="Regexp.html#label-Method+match" title="{Method">{Method</a> match}.</p>
</li><li>
<p><a href="#=~-instance_method" title="Regexp#=~ (method)">#=~</a>: see <a href="rdoc-ref:Regexp@Operator+-3D~">Operator =~</a>.</p>
</li></ul>

<p>The affected global variables are:</p>
<ul><li>
<p><code>$~</code>: Returns a <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object, or <code>nil</code>.</p>
</li><li>
<p><code>$&amp;</code>: Returns the matched part of the string, or <code>nil</code>.</p>
</li><li>
<p><code>$`</code>: Returns the part of the string to the left of the match, or <code>nil</code>.</p>
</li><li>
<p><code>$&#39;</code>: Returns the part of the string to the right of the match, or <code>nil</code>.</p>
</li><li>
<p><code>$+</code>: Returns the last group matched, or <code>nil</code>.</p>
</li><li>
<p><code>$1</code>, <code>$2</code>, etc.: Returns the first, second, etc., matched group, or <code>nil</code>. Note that <code>$0</code> is quite different; it returns the name of the currently executing program.</p>
</li></ul>

<p>These variables, except for <code>$~</code>, are shorthands for methods of <code>$~</code>.  See MatchData@Global+variables+equivalence.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Matched string, but no matched groups.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar bar baz</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>)
<span class='gvar'>$~</span> <span class='comment'># =&gt; #&lt;MatchData &quot;bar&quot;&gt;
</span><span class='backref'>$&amp;</span> <span class='comment'># =&gt; &quot;bar&quot;
</span><span class='backref'>$`</span> <span class='comment'># =&gt; &quot;foo &quot;
</span><span class='backref'>$&#39;</span> <span class='comment'># =&gt; &quot; bar baz&quot;
</span><span class='backref'>$+</span> <span class='comment'># =&gt; nil
</span><span class='backref'>$1</span> <span class='comment'># =&gt; nil
</span>
<span class='comment'># Matched groups.
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>s(\w{2}).*(c)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>haystack</span><span class='tstring_end'>&#39;</span></span>)
<span class='gvar'>$~</span> <span class='comment'># =&gt; #&lt;MatchData &quot;stac&quot; 1:&quot;ta&quot; 2:&quot;c&quot;&gt;
</span><span class='backref'>$&amp;</span> <span class='comment'># =&gt; &quot;stac&quot;
</span><span class='backref'>$`</span> <span class='comment'># =&gt; &quot;hay&quot;
</span><span class='backref'>$&#39;</span> <span class='comment'># =&gt; &quot;k&quot;
</span><span class='backref'>$+</span> <span class='comment'># =&gt; &quot;c&quot;
</span><span class='backref'>$1</span> <span class='comment'># =&gt; &quot;ta&quot;
</span><span class='backref'>$2</span> <span class='comment'># =&gt; &quot;c&quot;
</span><span class='backref'>$3</span> <span class='comment'># =&gt; nil
</span>
<span class='comment'># No match.
</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>)
<span class='gvar'>$~</span> <span class='comment'># =&gt; nil
</span><span class='backref'>$&amp;</span> <span class='comment'># =&gt; nil
</span><span class='backref'>$`</span> <span class='comment'># =&gt; nil
</span><span class='backref'>$&#39;</span> <span class='comment'># =&gt; nil
</span><span class='backref'>$+</span> <span class='comment'># =&gt; nil
</span><span class='backref'>$1</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>Note that <a href="#match%3F-instance_method" title="Regexp#match? (method)">#match?</a>, <a href="String.html#match%3F-instance_method" title="String#match? (method)">String#match?</a>, and <a href="Symbol.html#match%3F-instance_method" title="Symbol#match? (method)">Symbol#match?</a> do not set global variables.</p>

<h2 id="label-Sources">Sources</h2>

<p>As seen above, the simplest regexp uses a literal expression as its source:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>              <span class='comment'># =&gt; /foo/
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>)        <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>good</span><span class='tstring_end'>&#39;</span></span>)        <span class='comment'># =&gt; nil</span></code></pre>

<p>A rich collection of available <em>subexpressions</em> gives the regexp great power and flexibility:</p>
<ul><li>
<p><a href="Regexp.html#label-Special+Characters" title="Special characters">Special characters</a></p>
</li><li>
<p><a href="Regexp.html#label-Source+Literals" title="Source literals">Source literals</a></p>
</li><li>
<p><a href="Regexp.html#label-Character+Classes" title="Character classes">Character classes</a></p>
</li><li>
<p><a href="Regexp.html#label-Shorthand+Character+Classes" title="Shorthand character classes">Shorthand character classes</a></p>
</li><li>
<p><a href="Regexp.html#label-Anchors" title="Anchors">Anchors</a></p>
</li><li>
<p><a href="Regexp.html#label-Alternation" title="Alternation">Alternation</a></p>
</li><li>
<p><a href="Regexp.html#label-Quantifiers" title="Quantifiers">Quantifiers</a></p>
</li><li>
<p><a href="Regexp.html#label-Groups+and+Captures" title="Groups and captures">Groups and captures</a></p>
</li><li>
<p><a href="Regexp.html#label-Unicode" title="Unicode">Unicode</a></p>
</li><li>
<p><a href="Regexp.html#label-POSIX+Bracket+Expressions" title="POSIX Bracket Expressions">POSIX Bracket Expressions</a></p>
</li><li>
<p><a href="Regexp.html#label-Comments" title="Comments">Comments</a></p>
</li></ul>

<h3 id="label-Special+Characters">Special Characters</h3>

<p>Regexp special characters, called <em>metacharacters</em>, have special meanings in certain contexts; depending on the context, these are sometimes metacharacters:</p>

<pre class="code ruby"><code class="ruby">. <span class='op'>?</span> <span class='op'>-</span> <span class='op'>+</span> <span class='op'>*</span> <span class='op'>^</span> \ <span class='op'>|</span> <span class='gvar'>$ </span>( ) [ ] { }</code></pre>

<p>To match a metacharacter literally, backslash-escape it:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Matches one or more &#39;o&#39; characters.
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o+</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; #&lt;MatchData &quot;oo&quot;&gt;
</span><span class='comment'># Would match &#39;o+&#39;.
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>o\+</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>To match a backslash literally, backslash-escape it:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\.</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; #&lt;MatchData &quot;.&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\.</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\.</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\\.&quot;&gt;</span></code></pre>

<p><a href="Method.html" title="Method (class)"><code>::Method</code></a> <a href="#escape-class_method" title="Regexp.escape (method)">.escape</a> returns an escaped string:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_escape'><a href="#escape-class_method" title="Regexp.escape (method)">escape</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.?-+*^\|$()[]{}</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; &quot;\\.\\?\\-\\+\\*\\^\\\\\\|\\$\\(\\)\\[\\]\\{\\}&quot;</span></code></pre>

<h3 id="label-Source+Literals">Source Literals</h3>

<p>The source literal largely behaves like a double-quoted string; see <a href="../syntax/literals.html#label-Double-Quoted%2BString%2BLiterals" title="Double-Quoted {String">Double-Quoted {String</a> Literals}.</p>

<p>In particular, a source literal may contain interpolated expressions:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>         <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span>            <span class='comment'># =&gt; /foo/
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_capitalize'>capitalize</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; /Foo/
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='int'>2</span> <span class='op'>+</span> <span class='int'>2</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span>        <span class='comment'># =&gt; /4/</span></code></pre>

<p>There are differences between an ordinary string literal and a source literal; see <a href="Regexp.html#label-Shorthand+Character+Classes" title="Shorthand Character Classes">Shorthand Character Classes</a>.</p>
<ul><li>
<p><code>\s</code> in an ordinary string literal is equivalent to a space character; in a source literal, it’s shorthand for matching a whitespace character.</p>
</li><li>
<p>In an ordinary string literal, these are (needlessly) escaped characters; in a source literal, they are shorthands for various matching characters:</p>

<pre class="code ruby"><code class="ruby"><span class='CHAR'>\</span><span class='id identifier rubyid_w'>w</span> <span class='CHAR'>\</span><span class='const'>W</span> <span class='CHAR'>\</span><span class='id identifier rubyid_d'>d</span> <span class='CHAR'>\</span><span class='const'>D</span> <span class='CHAR'>\</span><span class='id identifier rubyid_h'>h</span> <span class='CHAR'>\</span><span class='const'>H</span> <span class='CHAR'>\</span><span class='const'>S</span> <span class='CHAR'>\</span><span class='const'>R</span></code></pre>
</li></ul>

<h3 id="label-Character+Classes">Character Classes</h3>

<p>A <em>character class</em> is delimited by square brackets; it specifies that certain characters match at a given point in the target string:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># This character class will match any vowel.
</span><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>B[aeiou]rd</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bird</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;Bird&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bard</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;Bard&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Byrd</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>A character class may contain hyphen characters to specify ranges of characters:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># These regexps have the same effect.
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[abcdef]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-f]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-cd-f]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;</span></code></pre>

<p>When the first character of a character class is a caret (<code>^</code>), the sense of the class is inverted: it matches any character <em>except</em> those specified.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^a-eg-z]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;</span></code></pre>

<p>A character class may contain another character class. By itself this isn’t useful because <code>[a-z[0-9]]</code> describes the same set as <code>[a-z0-9]</code>.</p>

<p>However, character classes also support the <code>&amp;&amp;</code> operator, which performs set intersection on its arguments. The two can be combined as follows:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-w&amp;&amp;[^c-g]z]</span><span class='regexp_end'>/</span></span> <span class='comment'># ([a-w] AND ([^c-g] OR z))</span></code></pre>

<p>This is equivalent to:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[abh-w]</span><span class='regexp_end'>/</span></span></code></pre>

<h3 id="label-Shorthand+Character+Classes">Shorthand Character Classes</h3>

<p>Each of the following metacharacters serves as a shorthand for a character class:</p>
<ul><li>
<p><code>/./</code>: Matches any character except a newline:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)  <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/./m</code>: Matches any character, including a newline; see <a href="Regexp.html#label-Multiline+Mode" title="Multiline Mode">Multiline Mode</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.</span><span class='regexp_end'>/m</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\n&quot;&gt;</span></code></pre>
</li><li>
<p><code>/\w/</code>: Matches a word character: equivalent to <code>[a-zA-Z0-9_]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> _</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;_&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\W/</code>: Matches a non-word character: equivalent to <code>[^a-zA-Z0-9_]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\W</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot; &quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\W</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\d/</code>: Matches a digit character: equivalent to <code>[0-9]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\d</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>THX1138</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;1&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\d</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\D/</code>: Matches a non-digit character: equivalent to <code>[^0-9]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\D</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123Jump!</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;J&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\D</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\h/</code>: Matches a hexdigit character: equivalent to <code>[0-9a-fA-F]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\h</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz fedcba9876543210</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\h</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>)                  <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\H/</code>: Matches a non-hexdigit character: equivalent to <code>[^0-9a-fA-F]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\H</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fedcba9876543210xyz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;x&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\H</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fedcba9876543210</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\s/</code>: Matches a whitespace character: equivalent to <code>/[ \t\r\n\f\v]/</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot; &quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\S/</code>: Matches a non-whitespace character: equivalent to <code>/[^ \t\r\n\f\v]/</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\S</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> \t\r\n\f\v foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;f&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\S</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> \t\r\n\f\v</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>/\R/</code>: Matches a linebreak, platform-independently:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; #&lt;MatchData &quot;\r&quot;&gt;     # Carriage return (CR)
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; #&lt;MatchData &quot;\n&quot;&gt;     # Newline (LF)
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\f</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; #&lt;MatchData &quot;\f&quot;&gt;     # Formfeed (FF)
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\v</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; #&lt;MatchData &quot;\v&quot;&gt;     # Vertical tab (VT)
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;\r\n&quot;&gt;   # CRLF
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u0085</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\u0085&quot;&gt; # Next line (NEL)
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u2028</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\u2028&quot;&gt; # Line separator (LSEP)
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\R</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u2029</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\u2029&quot;&gt; # Paragraph separator (PSEP)</span></code></pre>
</li></ul>

<h3 id="label-Anchors">Anchors</h3>

<p>An anchor is a metasequence that matches a zero-width position between characters in the target string.</p>

<p>For a subexpression with no anchor, matching may begin anywhere in the target string:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>real</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>surrealist</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;real&quot;&gt;</span></code></pre>

<p>For a subexpression with an anchor, matching must begin at the matched anchor.</p>

<h4 id="label-Boundary+Anchors">Boundary Anchors</h4>

<p>Each of these anchors matches a boundary:</p>
<ul><li>
<p><code>^</code>: Matches the beginning of a line:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^bar</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\nbar</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;bar&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^ar</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\nbar</span><span class='tstring_end'>&quot;</span></span>)  <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>$</code>: Matches the end of a line:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar$</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\nbar</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;bar&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ba$</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\nbar</span><span class='tstring_end'>&quot;</span></span>)  <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>\A</code>: Matches the beginning of the string:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\Afoo</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\Afoo</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> foo bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>\Z</code>: Matches the end of the string; if string ends with a single newline, it matches just before the ending newline:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\Z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar foo</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\Z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\Z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar foo\n</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\Z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar foo\n\n</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>\z</code>: Matches the end of the string:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar foo</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar foo\n</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>\b</code>: Matches word boundary when not inside brackets; matches backspace (<code>&quot;0x08&quot;</code>) when inside brackets:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\b</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\b</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>\B</code>: Matches non-word boundary:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\B</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\B</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>\G</code>: Matches first matching position:</p>

<p>In methods like String#gsub and String#scan, it changes on each iteration. It initially matches the beginning of subject, and in each following iteration it matches where the last match finished.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    a b c</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> </span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;____a_b_c&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    a b c</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\G </span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;____a b c&quot;</span></code></pre>

<p>In methods like Regexp#match and String#match that take an optional offset, it matches where the search begins.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>,</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>3</span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;,&quot;&gt;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\G,</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; nil</span></code></pre>
</li></ul>

<h4 id="label-Lookaround+Anchors">Lookaround Anchors</h4>

<p>Lookahead anchors:</p>
<ul><li>
<p><code>(?=<em>pat</em>)</code>: Positive lookahead assertion: ensures that the following characters match <em>pat</em>, but doesn’t include those characters in the matched substring.</p>
</li><li>
<p><code>(?!<em>pat</em>)</code>: Negative lookahead assertion: ensures that the following characters <em>do not</em> match <em>pat</em>, but doesn’t include those characters in the matched substring.</p>
</li></ul>

<p>Lookbehind anchors:</p>
<ul><li>
<p><code>(?&lt;=<em>pat</em>)</code>: Positive lookbehind assertion: ensures that the preceding characters match <em>pat</em>, but doesn’t include those characters in the matched substring.</p>
</li><li>
<p><code>(?&lt;!<em>pat</em>)</code>: Negative lookbehind assertion: ensures that the preceding characters do not match <em>pat</em>, but doesn’t include those characters in the matched substring.</p>
</li></ul>

<p>The pattern below uses positive lookahead and positive lookbehind to match text appearing in <strong>…</strong> tags without including the tags in the match:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;=&lt;b&gt;)\w+(?=&lt;\/b&gt;)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fortune favors the &lt;b&gt;bold&lt;/b&gt;.</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;bold&quot;&gt;</span></code></pre>

<p>The pattern in lookbehind must be fixed-width. But top-level alternatives can be of various lengths. ex. (?&lt;=a|bc) is OK. (?&lt;=aaa(?:b|cd)) is not allowed.</p>

<h4 id="label-Match-Reset+Anchor">Match-Reset Anchor</h4>
<ul><li>
<p><code>\K</code>: Match reset: the matched content preceding <code>\K</code> in the regexp is excluded from the result. For example, the following two regexps are almost equivalent:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ab\Kc</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;c&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;=ab)c</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;c&quot;&gt;</span></code></pre>

<p>These match same string and <code>$&amp;</code> equals <code>&#39;c&#39;</code>, while the matched position is different.</p>

<p>As are the following two regexps:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(a)\K(b)\Kc</span><span class='regexp_end'>/</span></span>
<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;=(?&lt;=(a))(b))c</span><span class='regexp_end'>/</span></span></code></pre>
</li></ul>

<h3 id="label-Alternation">Alternation</h3>

<p>The vertical bar metacharacter (<code>|</code>) may be used within parentheses to express alternation: two or more subexpressions any of which may match the target string.</p>

<p>Two alternatives:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(a|b)</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;b&quot; 1:&quot;b&quot;&gt;</span></code></pre>

<p>Four alternatives:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(a|b|c|d)</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shazam</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;a&quot; 1:&quot;a&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cold</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;c&quot; 1:&quot;c&quot;&gt;</span></code></pre>

<p>Each alternative is a subexpression, and may be composed of other subexpressions:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([a-c]|[x-z])</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;b&quot; 1:&quot;b&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ooz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;z&quot; 1:&quot;z&quot;&gt;</span></code></pre>

<p><a href="Method.html" title="Method (class)"><code>::Method</code></a> <a href="#union-class_method" title="Regexp.union (method)">.union</a> provides a convenient way to construct a regexp with alternatives.</p>

<h3 id="label-Quantifiers">Quantifiers</h3>

<p>A simple regexp matches one character:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; #&lt;MatchData &quot;H&quot;&gt;</span></code></pre>

<p>An added <em>quantifier</em> specifies how many matches are required or allowed:</p>
<ul><li>
<p><code>*</code> - Matches zero or more times:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w*</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w*</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;x&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w*</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;xyz&quot;&gt;</span></code></pre>
</li><li>
<p><code>+</code> - Matches one or more times:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;x&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;xyz&quot;&gt;</span></code></pre>
</li><li>
<p><code>?</code> - Matches zero or one times:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w?</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w?</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;x&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w?</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;x&quot;&gt;</span></code></pre>
</li><li>
<p><code>{</code><em>n</em><code>}</code> - Matches exactly <em>n</em> times:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;xy&quot;&gt;</span></code></pre>
</li><li>
<p><code>{</code><em>min</em><code>,}</code> - Matches <em>min</em> or more times:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{2,}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{2,}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{2,}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xy</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; #&lt;MatchData &quot;xy&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{2,}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;xyz&quot;&gt;</span></code></pre>
</li><li>
<p><code>{,</code><em>max</em><code>}</code> - Matches <em>max</em> or fewer times:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{,2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{,2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;x&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{,2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;xy&quot;&gt;</span></code></pre>
</li><li>
<p><code>{</code><em>min</em><code>,</code><em>max</em><code>}</code> - Matches at least <em>min</em> times and at most <em>max</em> times:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{1,2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{1,2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;x&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w{1,2}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;xy&quot;&gt;</span></code></pre>
</li></ul>

<h4 id="label-Greedy-2C+Lazy-2C+or+Possessive+Matching">Greedy, Lazy, or Possessive Matching</h4>

<p>Quantifier matching may be greedy, lazy, or possessive:</p>
<ul><li>
<p>In <em>greedy</em> matching, as many occurrences as possible are matched while still allowing the overall match to succeed. Greedy quantifiers: <code>*</code>, <code>+</code>, <code>?</code>, <code>{min, max}</code> and its variants.</p>
</li><li>
<p>In <em>lazy</em> matching, the minimum number of occurrences are matched. Lazy quantifiers: <code>*?</code>, <code>+?</code>, <code>??</code>, <code>{min, max}?</code> and its variants.</p>
</li><li>
<p>In <em>possessive</em> matching, once a match is found, there is no backtracking; that match is retained, even if it jeopardises the overall match. Possessive quantifiers: <code>*+</code>, <code>++</code>, <code>?+</code>. Note that <code>{min, max}</code> and its variants do <em>not</em> support possessive matching.</p>
</li></ul>

<p>More:</p>
<ul><li>
<p>About greedy and lazy matching, see <a href="https://doc.lagout.org/programmation/Regular%20Expressions/Regular%20Expressions%20Cookbook_%20Detailed%20Solutions%20in%20Eight%20Programming%20Languages%20%282nd%20ed.%29%20%5BGoyvaerts%20%26%20Levithan%202012-09-06%5D.pdf#tutorial-backtrack" target="_parent" title="Choosing Minimal or Maximal Repetition">Choosing Minimal or Maximal Repetition</a>.</p>
</li><li>
<p>About possessive matching, see <a href="https://doc.lagout.org/programmation/Regular%20Expressions/Regular%20Expressions%20Cookbook_%20Detailed%20Solutions%20in%20Eight%20Programming%20Languages%20%282nd%20ed.%29%20%5BGoyvaerts%20%26%20Levithan%202012-09-06%5D.pdf#tutorial-backtrack" target="_parent" title="Eliminate Needless Backtracking">Eliminate Needless Backtracking</a>.</p>
</li></ul>

<h3 id="label-Groups+and+Captures">Groups and Captures</h3>

<p>A simple regexp has (at most) one match:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\d\d\d\d-\d\d-\d\d</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1943-02-04</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot;1943-02-04&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1943-02-04</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_size'>size</span> <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)             <span class='comment'># =&gt; nil</span></code></pre>

<p>Adding one or more pairs of parentheses, <code>(<em>subexpression</em>)</code>, defines <em>groups</em>, which may result in multiple matched substrings, called <em>captures</em>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\d\d\d\d)-(\d\d)-(\d\d)</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1943-02-04</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot;1943-02-04&quot; 1:&quot;1943&quot; 2:&quot;02&quot; 3:&quot;04&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1943-02-04</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_size'>size</span> <span class='comment'># =&gt; 4</span></code></pre>

<p>The first capture is the entire matched string; the other captures are the matched substrings from the groups.</p>

<p>A group may have a <a href="Regexp.html#label-Quantifiers" title="quantifier">quantifier</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>July 4(th)?</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>July 4</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;July 4&quot; 1:nil&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>July 4th</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;July 4th&quot; 1:&quot;th&quot;&gt;
</span>
<span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(foo)*</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; #&lt;MatchData &quot;&quot; 1:nil&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot; 1:&quot;foo&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foofoo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;foofoo&quot; 1:&quot;foo&quot;&gt;
</span>
<span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(foo)+</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;foo&quot; 1:&quot;foo&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foofoo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;foofoo&quot; 1:&quot;foo&quot;&gt;</span></code></pre>

<p>The returned MatchData object gives access to the matched substrings:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\d\d\d\d)-(\d\d)-(\d\d)</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1943-02-04</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;1943-02-04&quot; 1:&quot;1943&quot; 2:&quot;02&quot; 3:&quot;04&quot;&gt;
</span><span class='id identifier rubyid_md'>md</span>[<span class='int'>0</span>] <span class='comment'># =&gt; &quot;1943-02-04&quot;
</span><span class='id identifier rubyid_md'>md</span>[<span class='int'>1</span>] <span class='comment'># =&gt; &quot;1943&quot;
</span><span class='id identifier rubyid_md'>md</span>[<span class='int'>2</span>] <span class='comment'># =&gt; &quot;02&quot;
</span><span class='id identifier rubyid_md'>md</span>[<span class='int'>3</span>] <span class='comment'># =&gt; &quot;04&quot;</span></code></pre>

<h4 id="label-Non-Capturing+Groups">Non-Capturing Groups</h4>

<p>A group may be made non-capturing; it is still a group (and, for example, can have a quantifier), but its matching substring is not included among the captures.</p>

<p>A non-capturing group begins with <code>?:</code> (inside the parentheses):</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Don&#39;t capture the year.
</span><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?:\d\d\d\d)-(\d\d)-(\d\d)</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1943-02-04</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;1943-02-04&quot; 1:&quot;02&quot; 2:&quot;04&quot;&gt;</span></code></pre>

<h4 id="label-Backreferences">Backreferences</h4>

<p>A group match may also be referenced within the regexp itself; such a reference is called a <code>backreference</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[csh](..) [csh]\1 in</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The cat sat in the hat</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;cat sat in&quot; 1:&quot;at&quot;&gt;</span></code></pre>

<p>This table shows how each subexpression in the regexp above matches a substring in the target string:</p>

<pre class="code ruby"><code class="ruby"><span class='op'>|</span> <span class='const'>Subexpression</span> <span class='kw'>in</span> <span class='const'>Regexp</span>   <span class='op'>|</span> <span class='const'>Matching</span> <span class='const'>Substring</span> <span class='kw'>in</span> <span class='const'>Target</span> <span class='const'><a href="String.html" title="String (class)">String</a></span> <span class='op'>|</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>|</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>|</span>
<span class='op'>|</span>       <span class='const'>First</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[csh]</span><span class='tstring_end'>&#39;</span></span>       <span class='op'>|</span>            <span class='const'>Character</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span>            <span class='op'>|</span>
<span class='op'>|</span>          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(..)</span><span class='tstring_end'>&#39;</span></span>           <span class='op'>|</span>        <span class='const'>First</span> <span class='id identifier rubyid_substring'>substring</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>at</span><span class='tstring_end'>&#39;</span></span>         <span class='op'>|</span>
<span class='op'>|</span>      <span class='const'>First</span> <span class='id identifier rubyid_space'>space</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>      <span class='op'>|</span>      <span class='const'>First</span> <span class='id identifier rubyid_space'>space</span> <span class='id identifier rubyid_character'>character</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>      <span class='op'>|</span>
<span class='op'>|</span>       <span class='const'>Second</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[csh]</span><span class='tstring_end'>&#39;</span></span>      <span class='op'>|</span>            <span class='const'>Character</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span>            <span class='op'>|</span>
<span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\1</span><span class='tstring_end'>&#39;</span></span> (<span class='id identifier rubyid_backreference'>backreference</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>at</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>|</span>        <span class='const'>Second</span> <span class='id identifier rubyid_substring'>substring</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>at</span><span class='tstring_end'>&#39;</span></span>        <span class='op'>|</span>
<span class='op'>|</span>           <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> in</span><span class='tstring_end'>&#39;</span></span>           <span class='op'>|</span>            <span class='const'>Substring</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> in</span><span class='tstring_end'>&#39;</span></span>          <span class='op'>|</span></code></pre>

<p>A regexp may contain any number of groups:</p>
<ul><li>
<p>For a large number of groups:</p>
<ul><li>
<p>The ordinary <code>\<em>n</em></code> notation applies only for <em>n</em> in range (1..9).</p>
</li><li>
<p>The <code>MatchData[<em>n</em>]</code> notation applies for any non-negative <em>n</em>.</p>
</li></ul>
</li><li>
<p><code>\0</code> is a special backreference, referring to the entire matched string; it may not be used within the regexp itself, but may be used outside it (for example, in a substitution method call):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The cat sat in the hat</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[csh]at</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\0s</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; &quot;The cats sats in the hats&quot;</span></code></pre>
</li></ul>

<h4 id="label-Named+Captures">Named Captures</h4>

<p>As seen above, a capture can be referred to by its number. A capture can also have a name, prefixed as <code>?&lt;<em>name</em>&gt;</code> or <code>?&#39;<em>name</em>&#39;</code>, and the name (symbolized) may be used as an index in <code>MatchData[]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\$(?&lt;dollars&gt;\d)\.(?&#39;cents&#39;\d)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$3.67</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;$3.67&quot; dollars:&quot;3&quot; cents:&quot;67&quot;&gt;
</span><span class='id identifier rubyid_md'>md</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_dollars'>dollars</span>]  <span class='comment'># =&gt; &quot;3&quot;
</span><span class='id identifier rubyid_md'>md</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_cents'>cents</span>]    <span class='comment'># =&gt; &quot;67&quot;
</span><span class='comment'># The capture numbers are still valid.
</span><span class='id identifier rubyid_md'>md</span>[<span class='int'>2</span>]         <span class='comment'># =&gt; &quot;67&quot;</span></code></pre>

<p>When a regexp contains a named capture, there are no unnamed captures:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\$(?&lt;dollars&gt;\d)\.(\d)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$3.67</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;$3.67&quot; dollars:&quot;3&quot;&gt;</span></code></pre>

<p>A named group may be backreferenced as <code>\k&lt;<em>name</em>&gt;</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;vowel&gt;[aeiou]).\k&lt;vowel&gt;.\k&lt;vowel&gt;</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ototomy</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;ototo&quot; vowel:&quot;o&quot;&gt;</span></code></pre>

<p>When (and only when) a regexp contains named capture groups and appears before the <a href="#=~-instance_method" title="Regexp#=~ (method)">#=~</a> operator, the captured substrings are assigned to local variables with corresponding names:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\$(?&lt;dollars&gt;\d)\.(?&lt;cents&gt;\d)</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$3.67</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_dollars'>dollars</span> <span class='comment'># =&gt; &quot;3&quot;
</span><span class='id identifier rubyid_cents'>cents</span>   <span class='comment'># =&gt; &quot;67&quot;</span></code></pre>

<p><a href="Method.html" title="Method (class)"><code>::Method</code></a> <a href="#named_captures-instance_method" title="Regexp#named_captures (method)">#named_captures</a> returns a hash of the capture names and substrings; method <a href="#names-instance_method" title="Regexp#names (method)">#names</a> returns an array of the capture names.</p>

<h4 id="label-Atomic+Grouping">Atomic Grouping</h4>

<p>A group may be made <em>atomic</em> with <code>(?&gt;</code><em>subexpression</em><code>)</code>.</p>

<p>This causes the subexpression to be matched independently of the rest of the expression, so that the matched substring becomes fixed for the remainder of the match, unless the entire subexpression must be abandoned and subsequently revisited.</p>

<p>In this way <em>subexpression</em> is treated as a non-divisible whole. Atomic grouping is typically used to optimise patterns to prevent needless backtracking .</p>

<p>Example (without atomic grouping):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&quot;.*&quot;</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;Quote&quot;</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\&quot;Quote\&quot;&quot;&gt;</span></code></pre>

<p>Analysis:</p>
<ol><li>
<p>The leading subexpression <code>&quot;</code> in the pattern matches the first character <code>&quot;</code> in the target string.</p>
</li><li>
<p>The next subexpression <code>.*</code> matches the next substring <code>Quote&quot;</code> (including the trailing double-quote).</p>
</li><li>
<p>Now there is nothing left in the target string to match the trailing subexpression <code>&quot;</code> in the pattern; this would cause the overall match to fail.</p>
</li><li>
<p>The matched substring is backtracked by one position: <code>Quote</code>.</p>
</li><li>
<p>The final subexpression <code>&quot;</code> now matches the final substring <code>&quot;</code>, and the overall match succeeds.</p>
</li></ol>

<p>If subexpression <code>.*</code> is grouped atomically, the backtracking is disabled, and the overall match fails:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&quot;(?&gt;.*)&quot;</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;Quote&quot;</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Atomic grouping can affect performance; see <a href="https://www.regular-expressions.info/atomic.html" target="_parent" title="Atomic Group">Atomic Group</a>.</p>

<h4 id="label-Subexpression+Calls">Subexpression Calls</h4>

<p>As seen above, a backreference number (<code>\<em>n</em></code>) or name (<code>\k&lt;<em>name</em>&gt;</code>) gives access to a captured <em>substring</em>; the corresponding regexp <em>subexpression</em> may also be accessed, via the number (<code>\g<em>n</em></code>) or name (<code>\g&lt;<em>name</em>&gt;</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?&lt;paren&gt;\(\g&lt;paren&gt;*\))*\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(())</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># ^1
</span><span class='comment'>#      ^2
</span><span class='comment'>#           ^3
</span><span class='comment'>#                 ^4
</span><span class='comment'>#      ^5
</span><span class='comment'>#           ^6
</span><span class='comment'>#                      ^7
</span><span class='comment'>#                       ^8
</span><span class='comment'>#                       ^9
</span><span class='comment'>#                           ^10</span></code></pre>

<p>The pattern:</p>
<ol><li>
<p>Matches at the beginning of the string, i.e. before the first character.</p>
</li><li>
<p>Enters a named group <code>paren</code>.</p>
</li><li>
<p>Matches the first character in the string, <code>&#39;(&#39;</code>.</p>
</li><li>
<p>Calls the <code>paren</code> group again, i.e. recurses back to the  second step.</p>
</li><li>
<p>Re-enters the <code>paren</code> group.</p>
</li><li>
<p>Matches the second character in the string, <code>&#39;(&#39;</code>.</p>
</li><li>
<p>Attempts to call <code>paren</code> a third time, but fails because doing so would prevent an overall successful match.</p>
</li><li>
<p>Matches the third character in the string, <code>&#39;)&#39;</code>; marks the end of the second recursive call</p>
</li><li>
<p>Matches the fourth character in the string, <code>&#39;)&#39;</code>.</p>
</li><li>
<p>Matches the end of the string.</p>
</li></ol>

<p>See <a href="https://learnbyexample.github.io/Ruby_Regexp/groupings-and-backreferences.html?highlight=subexpression#subexpression-calls" target="_parent" title="Subexpression calls">Subexpression calls</a>.</p>

<h4 id="label-Conditionals">Conditionals</h4>

<p>The conditional construct takes the form <code>(?(<em>cond</em>)<em>yes</em>|<em>no</em>)</code>, where:</p>
<ul><li>
<p><em>cond</em> may be a capture number or name.</p>
</li><li>
<p>The match to be applied is <em>yes</em> if <em>cond</em> is captured; otherwise the match to be applied is <em>no</em>.</p>
</li><li>
<p>If not needed, <code>|<em>no</em></code> may be omitted.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(foo)?(?(1)(T)|(F))\z</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fooT</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;fooT&quot; 1:&quot;foo&quot; 2:&quot;T&quot; 3:nil&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;F&quot; 1:nil 2:nil 3:&quot;F&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fooF</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>T</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?&lt;xyzzy&gt;foo)?(?(&lt;xyzzy&gt;)(T)|(F))\z</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fooT</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;fooT&quot; xyzzy:&quot;foo&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; #&lt;MatchData &quot;F&quot; xyzzy:nil&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fooF</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>T</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil</span></code></pre>

<h4 id="label-Absence+Operator">Absence Operator</h4>

<p>The absence operator is a special group that matches anything which does <em>not</em> match the contained subexpressions.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?~real)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>surrealist</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;surrea&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?~real)ist</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>surrealist</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;ealist&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>sur(?~real)ist</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>surrealist</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<h3 id="label-Unicode">Unicode</h3>

<h4 id="label-Unicode+Properties">Unicode Properties</h4>

<p>The <code>/\p{<em>property_name</em>}/</code> construct (with lowercase <code>p</code>) matches characters using a Unicode property name, much like a character class; property <code>Alpha</code> specifies alphabetic characters:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{Alpha}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;a&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{Alpha}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>A property can be inverted by prefixing the name with a caret character (<code>^</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{^Alpha}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;1&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{^Alpha}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Or by using <code>\P</code> (uppercase <code>P</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\P{Alpha}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;1&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\P{Alpha}</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>See <a href="../language/regexp/unicode_properties.html" title="Unicode Properties">Unicode Properties</a> for regexps based on the numerous properties.</p>

<p>Some commonly-used properties correspond to POSIX bracket expressions:</p>
<ul><li>
<p><code>/\p{Alnum}/</code>: Alphabetic and numeric character</p>
</li><li>
<p><code>/\p{Alpha}/</code>: Alphabetic character</p>
</li><li>
<p><code>/\p{Blank}/</code>: Space or tab</p>
</li><li>
<p><code>/\p{Cntrl}/</code>: Control character</p>
</li><li>
<p><code>/\p{Digit}/</code>: Digit characters, and similar)</p>
</li><li>
<p><code>/\p{Lower}/</code>: Lowercase alphabetical character</p>
</li><li>
<p><code>/\p{Print}/</code>: Like <code>\p{Graph}</code>, but includes the space character</p>
</li><li>
<p><code>/\p{Punct}/</code>: Punctuation character</p>
</li><li>
<p><code>/\p{Space}/</code>: Whitespace character (<code>[:blank:]</code>, newline, carriage return, etc.)</p>
</li><li>
<p><code>/\p{Upper}/</code>: Uppercase alphabetical</p>
</li><li>
<p><code>/\p{XDigit}/</code>: Digit allowed in a hexadecimal number (i.e., 0-9a-fA-F)</p>
</li></ul>

<p>These are also commonly used:</p>
<ul><li>
<p><code>/\p{Emoji}/</code>: Unicode emoji.</p>
</li><li>
<p><code>/\p{Graph}/</code>: Characters excluding <code>/\p{Cntrl}/</code> and <code>/\p{Space}/</code>. Note that invisible characters under the Unicode <a href="https://www.compart.com/en/unicode/category/Cf">“Format”</a> category are included.</p>
</li><li>
<p><code>/\p{Word}/</code>: A member in one of these Unicode character categories (see below) or having one of these Unicode properties:</p>
<ul><li>
<p>Unicode categories:</p>
<ul><li>
<p><code>Mark</code> (<code>M</code>).</p>
</li><li>
<p><code>Decimal Number</code> (<code>Nd</code>)</p>
</li><li>
<p><code>Connector Punctuation</code> (<code>Pc</code>).</p>
</li></ul>
</li><li>
<p>Unicode properties:</p>
<ul><li>
<p><code>Alpha</code></p>
</li><li>
<p><code>Join_Control</code></p>
</li></ul>
</li></ul>
</li><li>
<p><code>/\p{ASCII}/</code>: A character in the ASCII character set.</p>
</li><li>
<p><code>/\p{Any}/</code>: Any Unicode character (including unassigned characters).</p>
</li><li>
<p><code>/\p{Assigned}/</code>: An assigned character.</p>
</li></ul>

<h4 id="label-Unicode+Character+Categories">Unicode Character Categories</h4>

<p>A Unicode character category name:</p>
<ul><li>
<p>May be either its full name or its abbreviated name.</p>
</li><li>
<p>Is case-insensitive.</p>
</li><li>
<p>Treats a space, a hyphen, and an underscore as equivalent.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{lu}</span><span class='regexp_end'>/</span></span>                <span class='comment'># =&gt; /\p{lu}/
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{LU}</span><span class='regexp_end'>/</span></span>                <span class='comment'># =&gt; /\p{LU}/
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{Uppercase Letter}</span><span class='regexp_end'>/</span></span>  <span class='comment'># =&gt; /\p{Uppercase Letter}/
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{Uppercase_Letter}</span><span class='regexp_end'>/</span></span>  <span class='comment'># =&gt; /\p{Uppercase_Letter}/
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\p{UPPERCASE-LETTER}</span><span class='regexp_end'>/</span></span>  <span class='comment'># =&gt; /\p{UPPERCASE-LETTER}/</span></code></pre>

<p>Below are the Unicode character category abbreviations and names. Enumerations of characters in each category are at the links.</p>

<p>Letters:</p>
<ul><li>
<p><code>L</code>, <code>Letter</code>: <code>LC</code>, <code>Lm</code>, or <code>Lo</code>.</p>
</li><li>
<p><code>LC</code>, <code>Cased_Letter</code>: <code>Ll</code>, <code>Lt</code>, or <code>Lu</code>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Ll">Lu, Lowercase_Letter</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Lm">Lu, Modifier_Letter</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Lo">Lu, Other_Letter</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Lt">Lu, Titlecase_Letter</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Lu">Lu, Uppercase_Letter</a>.</p>
</li></ul>

<p>Marks:</p>
<ul><li>
<p><code>M</code>, <code>Mark</code>: <code>Mc</code>, <code>Me</code>, or <code>Mn</code>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Mc">Mc, Spacing_Mark</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Me">Me, Enclosing_Mark</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Mn">Mn, Nonapacing_Mark</a>.</p>
</li></ul>

<p>Numbers:</p>
<ul><li>
<p><code>N</code>, <code>Number</code>: <code>Nd</code>, <code>Nl</code>, or <code>No</code>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Nd">Nd, Decimal_Number</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Nl">Nl, Letter_Number</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/No">No, Other_Number</a>.</p>
</li></ul>

<p>Punctuation:</p>
<ul><li>
<p><code>P</code>, <code>Punctuation</code>: <code>Pc</code>, <code>Pd</code>, <code>Pe</code>, <code>Pf</code>, <code>Pi</code>, <code>Po</code>, or <code>Ps</code>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Pc">Pc, Connector_Punctuation</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Pd">Pd, Dash_Punctuation</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Pe">Pe, Close_Punctuation</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Pf">Pf, Final_Punctuation</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Pi">Pi, Initial_Punctuation</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Po">Po, Other_Punctuation</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Ps">Ps, Open_Punctuation</a>.</p>
</li><li>
<p><code>S</code>, <a href="Symbol.html" title="Symbol (class)"><code>::Symbol</code></a>: <code>Sc</code>, <code>Sk</code>, <code>Sm</code>, or <code>So</code>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Sc">Sc, Currency_Symbol</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Sk">Sk, Modifier_Symbol</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Sm">Sm, Math_Symbol</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/So">So, Other_Symbol</a>.</p>
</li><li>
<p><code>Z</code>, <code>Separator</code>: <code>Zl</code>, <code>Zp</code>, or <code>Zs</code>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Zl">Zl, Line_Separator</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Zp">Zp, Paragraph_Separator</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Zs">Zs, Space_Separator</a>.</p>
</li><li>
<p><code>C</code>, <code>Other</code>: <code>Cc</code>, <code>Cf</code>, <code>Cn</code>, <code>Co</code>, or <code>Cs</code>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Cc">Cc, Control</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Cf">Cf, Format</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Cn">Cn, Unassigned</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Co">Co, Private_Use</a>.</p>
</li><li>
<p><a href="https://www.compart.com/en/unicode/category/Cs">Cs, Surrogate</a>.</p>
</li></ul>

<h4 id="label-Unicode+Scripts+and+Blocks">Unicode Scripts and Blocks</h4>

<p>Among the Unicode properties are:</p>
<ul><li>
<p><a href="https://en.wikipedia.org/wiki/Script_(Unicode" target="_parent" title=") Unicode scripts">) Unicode scripts</a>; see <a href="https://www.unicode.org/standard/supported.html" target="_parent" title="supported scripts">supported scripts</a>.</p>
</li><li>
<p><a href="https://en.wikipedia.org/wiki/Unicode_block" target="_parent" title="Unicode blocks">Unicode blocks</a>; see <a href="http://www.unicode.org/Public/UNIDATA/Blocks.txt" target="_parent" title="supported blocks">supported blocks</a>.</p>
</li></ul>

<h3 id="label-POSIX+Bracket+Expressions">POSIX Bracket Expressions</h3>

<p>A POSIX <em>bracket expression</em> is also similar to a character class. These expressions provide a portable alternative to the above, with the added benefit of encompassing non-ASCII characters:</p>
<ul><li>
<p><code>/\d/</code> matches only ASCII decimal digits <code>0</code> through <code>9</code>.</p>
</li><li>
<p><code>/[[:digit:]]/</code> matches any character in the Unicode <code>Decimal Number</code> (<code>Nd</code>) category; see below.</p>
</li></ul>

<p>The POSIX bracket expressions:</p>
<ul><li>
<p><code>/[[:digit:]]/</code>: Matches a <a href="https://www.compart.com/en/unicode/category/Nd" target="_parent" title="Unicode digit">Unicode digit</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:digit:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9</span><span class='tstring_end'>&#39;</span></span>)       <span class='comment'># =&gt; #&lt;MatchData &quot;9&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:digit:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u1fbf9</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;9&quot;&gt;</span></code></pre>
</li><li>
<p><code>/[[:xdigit:]]/</code>: Matches a digit allowed in a hexadecimal number; equivalent to <code>[0-9a-fA-F]</code>.</p>
</li><li>
<p><code>/[[:upper:]]/</code>: Matches a <a href="https://www.compart.com/en/unicode/category/Lu" target="_parent" title="Unicode uppercase letter">Unicode uppercase letter</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:upper:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot;A&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:upper:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u00c6</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;Æ&quot;&gt;</span></code></pre>
</li><li>
<p><code>/[[:lower:]]/</code>: Matches a <a href="https://www.compart.com/en/unicode/category/Ll" target="_parent" title="Unicode lowercase letter">Unicode lowercase letter</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:lower:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot;a&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:lower:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u01fd</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;ǽ&quot;&gt;</span></code></pre>
</li><li>
<p><code>/[[:alpha:]]/</code>: Matches <code>/[[:upper:]]/</code> or <code>/[[:lower:]]/</code>.</p>
</li><li>
<p><code>/[[:alnum:]]/</code>: Matches <code>/[[:alpha:]]/</code> or <code>/[[:digit:]]/</code>.</p>
</li><li>
<p><code>/[[:space:]]/</code>: Matches <a href="https://www.compart.com/en/unicode/category/Zs" target="_parent" title="Unicode space character">Unicode space character</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:space:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot; &quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:space:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u2005</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot; &quot;&gt;</span></code></pre>
</li><li>
<p><code>/[[:blank:]]/</code>: Matches <code>/[[:space:]]/</code> or tab character:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:blank:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot; &quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:blank:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u2005</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot; &quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:blank:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; #&lt;MatchData &quot;\t&quot;&gt;</span></code></pre>
</li><li>
<p><code>/[[:cntrl:]]/</code>: Matches <a href="https://www.compart.com/en/unicode/category/Cc" target="_parent" title="Unicode control character">Unicode control character</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:cntrl:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u0000</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\u0000&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[[:cntrl:]]</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u009f</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;\u009F&quot;&gt;</span></code></pre>
</li><li>
<p><code>/[[:graph:]]/</code>: Matches any character except <code>/[[:space:]]/</code> or <code>/[[:cntrl:]]/</code>.</p>
</li><li>
<p><code>/[[:print:]]/</code>: Matches <code>/[[:graph:]]/</code> or space character.</p>
</li><li>
<p><code>/[[:punct:]]/</code>: Matches any (Unicode punctuation character}[<a href="https://www.compart.com/en/unicode/category/Po">www.compart.com/en/unicode/category/Po</a>]:</p>
</li></ul>

<p><a href="Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> also supports these (non-POSIX) bracket expressions:</p>
<ul><li>
<p><code>/[[:ascii:]]/</code>: Matches a character in the ASCII character set.</p>
</li><li>
<p><code>/[[:word:]]/</code>: Matches a character in one of these Unicode character categories or having one of these Unicode properties:</p>
<ul><li>
<p>Unicode categories:</p>
<ul><li>
<p><code>Mark</code> (<code>M</code>).</p>
</li><li>
<p><code>Decimal Number</code> (<code>Nd</code>)</p>
</li><li>
<p><code>Connector Punctuation</code> (<code>Pc</code>).</p>
</li></ul>
</li><li>
<p>Unicode properties:</p>
<ul><li>
<p><code>Alpha</code></p>
</li><li>
<p><code>Join_Control</code></p>
</li></ul>
</li></ul>
</li></ul>

<h3 id="label-Comments">Comments</h3>

<p>A comment may be included in a regexp pattern using the <code>(?#</code><em>comment</em><code>)</code> construct, where <em>comment</em> is a substring that is to be ignored. arbitrary text ignored by the regexp engine:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo(?#Ignore me)bar</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;foobar&quot;&gt;</span></code></pre>

<p>The comment may not include an unescaped terminator character.</p>

<p>See also <a href="Regexp.html#label-Extended+Mode" title="Extended Mode">Extended Mode</a>.</p>

<h2 id="label-Modes">Modes</h2>

<p>Each of these modifiers sets a mode for the regexp:</p>
<ul><li>
<p><code>i</code>: <code>/<em>pattern</em>/i</code> sets <a href="Regexp.html#label-Case-Insensitive+Mode" title="Case-Insensitive Mode">Case-Insensitive Mode</a>.</p>
</li><li>
<p><code>m</code>: <code>/<em>pattern</em>/m</code> sets <a href="Regexp.html#label-Multiline+Mode" title="Multiline Mode">Multiline Mode</a>.</p>
</li><li>
<p><code>x</code>: <code>/<em>pattern</em>/x</code> sets <a href="Regexp.html#label-Extended+Mode" title="Extended Mode">Extended Mode</a>.</p>
</li><li>
<p><code>o</code>: <code>/<em>pattern</em>/o</code> sets <a href="Regexp.html#label-Interpolation+Mode" title="Interpolation Mode">Interpolation Mode</a>.</p>
</li></ul>

<p>Any, all, or none of these may be applied.</p>

<p>Modifiers <code>i</code>, <code>m</code>, and <code>x</code> may be applied to subexpressions:</p>
<ul><li>
<p><code>(?<em>modifier</em>)</code> turns the mode “on” for ensuing subexpressions</p>
</li><li>
<p><code>(?-<em>modifier</em>)</code> turns the mode “off” for ensuing subexpressions</p>
</li><li>
<p><code>(?<em>modifier</em>:<em>subexp</em>)</code> turns the mode “on” for <em>subexp</em> within the group</p>
</li><li>
<p><code>(?-<em>modifier</em>:<em>subexp</em>)</code> turns the mode “off” for <em>subexp</em> within the group</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?i)te(?-i)st</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;test&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TEst</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;TEst&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TEST</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>teST</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>t(?i:e)st</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;test&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tEst</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;tEst&quot;&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tEST</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p><a href="Method.html" title="Method (class)"><code>::Method</code></a> <a href="#options-instance_method" title="Regexp#options (method)">#options</a> returns an integer whose value showing the settings for case-insensitivity mode, multiline mode, and extended mode.</p>

<h3 id="label-Case-Insensitive+Mode">Case-Insensitive Mode</h3>

<p>By default, a regexp is case-sensitive:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; nil</span></code></pre>

<p>Modifier <code>i</code> enables case-insensitive mode:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/i</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; #&lt;MatchData &quot;FOO&quot;&gt;</span></code></pre>

<p><a href="Method.html" title="Method (class)"><code>::Method</code></a> <a href="#casefold%3F-instance_method" title="Regexp#casefold? (method)">#casefold?</a> returns whether the mode is case-insensitive.</p>

<h3 id="label-Multiline+Mode">Multiline Mode</h3>

<p>The multiline-mode in <a href="Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> is what is commonly called a “dot-all mode”:</p>
<ul><li>
<p>Without the <code>m</code> modifier, the subexpression <code>.</code> does not match newlines:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a.c</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a\nc</span><span class='tstring_end'>&quot;</span></span>)  <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p>With the modifier, it does match:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a.c</span><span class='regexp_end'>/m</span></span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a\nc</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;a\nc&quot;&gt;</span></code></pre>
</li></ul>

<p>Unlike other languages, the modifier <code>m</code> does not affect the anchors <code>^</code> and <code>$</code>. These anchors always match at line-boundaries in <a href="Ruby.html" title="Ruby (module)"><code>::Ruby</code></a>.</p>

<h3 id="label-Extended+Mode">Extended Mode</h3>

<p>Modifier <code>x</code> enables extended mode, which means that:</p>
<ul><li>
<p>Literal white space in the pattern is to be ignored.</p>
</li><li>
<p>Character <code>#</code> marks the remainder of its containing line as a comment, which is also to be ignored for matching purposes.</p>
</li></ul>

<p>In extended mode, whitespace and comments may be used to form a self-documented regexp.</p>

<p><code>Regexp</code> not in extended mode (matches some Roman numerals):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^M{0,3}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MCMXLIII</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;MCMXLIII&quot; 1:&quot;CM&quot; 2:&quot;XL&quot; 3:&quot;III&quot;&gt;</span></code></pre>

<p><code>Regexp</code> in extended mode:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>  ^                   # beginning of string
  M{0,3}              # thousands - 0 to 3 Ms
  (CM|CD|D?C{0,3})    # hundreds - 900 (CM), 400 (CD), 0-300 (0 to 3 Cs),
                      #            or 500-800 (D, followed by 0 to 3 Cs)
  (XC|XL|L?X{0,3})    # tens - 90 (XC), 40 (XL), 0-30 (0 to 3 Xs),
                      #        or 50-80 (L, followed by 0 to 3 Xs)
  (IX|IV|V?I{0,3})    # ones - 9 (IX), 4 (IV), 0-3 (0 to 3 Is),
                      #        or 5-8 (V, followed by 0 to 3 Is)
  $                   # end of string
</span><span class='heredoc_end'>EOT
</span><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='embexpr_end'>}</span><span class='regexp_end'>/x</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MCMXLIII</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;MatchData &quot;MCMXLIII&quot; 1:&quot;CM&quot; 2:&quot;XL&quot; 3:&quot;III&quot;&gt;</span></code></pre>

<h3 id="label-Interpolation+Mode">Interpolation Mode</h3>

<p>Modifier <code>o</code> means that the first time a literal regexp with interpolations is encountered, the generated <code>Regexp</code> object is saved and used for all future evaluations of that literal regexp. Without modifier <code>o</code>, the generated <code>Regexp</code> is not saved, so each evaluation of the literal regexp generates a new <code>Regexp</code> object.</p>

<p>Without modifier <code>o</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_letters'>letters</span><span class='semicolon'>;</span> <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>5</span><span class='semicolon'>;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[A-Z][a-z]</span><span class='regexp_end'>/</span></span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='id identifier rubyid_words'>words</span> <span class='op'>=</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>abc</span><span class='words_sep'> </span><span class='tstring_content'>def</span><span class='words_sep'> </span><span class='tstring_content'>xyz</span><span class='tstring_end'>]</span></span>
<span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'><a href="Time.html#now-class_method" title="Time.now (method)">now</a></span>
<span class='id identifier rubyid_words'>words</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_word'>word</span><span class='op'>|</span> <span class='id identifier rubyid_word'>word</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_letters'>letters</span><span class='embexpr_end'>}</span><span class='tstring_content'>]+\z</span><span class='regexp_end'>/</span></span>) }
<span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'><a href="Time.html#now-class_method" title="Time.now (method)">now</a></span> <span class='op'>-</span> <span class='id identifier rubyid_start'>start</span> <span class='comment'># =&gt; 15.0174892</span></code></pre>

<p>With modifier <code>o</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'><a href="Time.html#now-class_method" title="Time.now (method)">now</a></span>
<span class='id identifier rubyid_words'>words</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_word'>word</span><span class='op'>|</span> <span class='id identifier rubyid_word'>word</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_letters'>letters</span><span class='embexpr_end'>}</span><span class='tstring_content'>]+\z</span><span class='regexp_end'>/o</span></span>) }
<span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'><a href="Time.html#now-class_method" title="Time.now (method)">now</a></span> <span class='op'>-</span> <span class='id identifier rubyid_start'>start</span> <span class='comment'># =&gt; 5.0010866</span></code></pre>

<p>Note that if the literal regexp does not have interpolations, the <code>o</code> behavior is the default.</p>

<h2 id="label-Encodings">Encodings</h2>

<p>By default, a regexp with only US-ASCII characters has US-ASCII encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_source'><a href="#source-instance_method" title="Regexp#source (method)">source</a></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span>        <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;</span></code></pre>

<p>A regular expression containing non-US-ASCII characters is assumed to use the source encoding. This can be overridden with one of the following modifiers.</p>
<ul><li>
<p><code>/<em>pat</em>/n</code>: US-ASCII if only containing US-ASCII characters, otherwise ASCII-8BIT:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/n</span></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span>     <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\xff</span><span class='regexp_end'>/n</span></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:ASCII-8BIT&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo\x7f</span><span class='regexp_end'>/n</span></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;</span></code></pre>
</li><li>
<p><code>/<em>pat</em>/u</code>: UTF-8</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/u</span></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>
</li><li>
<p><code>/<em>pat</em>/e</code>: EUC-JP</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/e</span></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:EUC-JP&gt;</span></code></pre>
</li><li>
<p><code>/<em>pat</em>/s</code>: Windows-31J</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/s</span></span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:Windows-31J&gt;</span></code></pre>
</li></ul>

<p>A regexp can be matched against a target string when either:</p>
<ul><li>
<p>They have the same encoding.</p>
</li><li>
<p>The regexp’s encoding is a fixed encoding and the string contains only ASCII characters. Method Regexp#fixed_encoding? returns whether the regexp has a <em>fixed</em> encoding.</p>
</li></ul>

<p>If a match between incompatible encodings is attempted an <a href="Encoding/CompatibilityError.html" title="Encoding::CompatibilityError (class)"><code>::Encoding::CompatibilityError</code></a> exception is raised.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># encoding: ISO-8859-1\n/foo\\xff?/</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span>                 <span class='comment'># =&gt; #&lt;Encoding:ISO-8859-1&gt;
</span><span class='id identifier rubyid_re'>re</span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_re'>re</span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\u0100</span><span class='tstring_end'>&quot;</span></span>           <span class='comment'># Raises Encoding::CompatibilityError</span></code></pre>

<p>The encoding may be explicitly fixed by including <a href="#FIXEDENCODING-constant" title="Regexp::FIXEDENCODING (constant)">FIXEDENCODING</a> in the second argument for <a href="#new-class_method" title="Regexp.new (method)">.new</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Regexp with encoding ISO-8859-1.
</span><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>iso-8859-1</span><span class='tstring_end'>&#39;</span></span>)<span class='comma'>,</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#FIXEDENCODING-constant" title="Regexp::FIXEDENCODING (constant)">FIXEDENCODING</a></span>)
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span>  <span class='comment'># =&gt; #&lt;Encoding:ISO-8859-1&gt;
</span><span class='comment'># Target string with encoding UTF-8.
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a\u3042</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span>   <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='id identifier rubyid_s'>s</span>)  <span class='comment'># Raises Encoding::CompatibilityError.</span></code></pre>

<h2 id="label-Timeouts">Timeouts</h2>

<p>When either a regexp source or a target string comes from untrusted input, malicious values could become a denial-of-service attack; to prevent such an attack, it is wise to set a timeout.</p>

<p>Regexp has two timeout values:</p>
<ul><li>
<p>A class default timeout, used for a regexp whose instance timeout is <code>nil</code>; this default is initially <code>nil</code>, and may be set by method Regexp.timeout=:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span> <span class='comment'># =&gt; nil
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span> <span class='op'>=</span> <span class='float'>3.0</span>
<span class='const'>Regexp</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span> <span class='comment'># =&gt; 3.0</span></code></pre>
</li><li>
<p>An instance timeout, which defaults to <code>nil</code> and may be set in <a href="#new-class_method" title="Regexp.new (method)">.new</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>timeout:</span> <span class='float'>5.0</span>)
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span> <span class='comment'># =&gt; 5.0</span></code></pre>
</li></ul>

<p>When regexp.timeout is <code>nil</code>, the timeout “falls through” to <code>Regexp.timeout;</code> when regexp.timeout is non-<code>nil</code>, that value controls timing out:</p>

<pre class="code ruby"><code class="ruby"><span class='op'>|</span> <span class='id identifier rubyid_regexp'>regexp</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span> <span class='const'>Value</span> <span class='op'>|</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span> <span class='const'>Value</span> <span class='op'>|</span>            <span class='const'>Result</span>           <span class='op'>|</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>|</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>|</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>|</span>
<span class='op'>|</span>         <span class='kw'>nil</span>          <span class='op'>|</span>          <span class='kw'>nil</span>         <span class='op'>|</span>       <span class='const'>Never</span> <span class='id identifier rubyid_times'>times</span> <span class='id identifier rubyid_out'>out</span>.      <span class='op'>|</span>
<span class='op'>|</span>         <span class='kw'>nil</span>          <span class='op'>|</span>         <span class='const'><a href="Float.html" title="Float (class)">Float</a></span>        <span class='op'>|</span> <span class='const'>Times</span> <span class='id identifier rubyid_out'>out</span> <span class='kw'>in</span> <span class='const'><a href="Float.html" title="Float (class)">Float</a></span> <span class='id identifier rubyid_seconds'>seconds</span>. <span class='op'>|</span>
<span class='op'>|</span>        <span class='const'><a href="Float.html" title="Float (class)">Float</a></span>         <span class='op'>|</span>          <span class='const'>Any</span>         <span class='op'>|</span> <span class='const'>Times</span> <span class='id identifier rubyid_out'>out</span> <span class='kw'>in</span> <span class='const'><a href="Float.html" title="Float (class)">Float</a></span> <span class='id identifier rubyid_seconds'>seconds</span>. <span class='op'>|</span></code></pre>

<h2 id="label-Optimization">Optimization</h2>

<p>For certain values of the pattern and target string, matching time can grow polynomially or exponentially in relation to the input size; the potential vulnerability arising from this is the <a href="https://en.wikipedia.org/wiki/ReDoS" target="_parent" title="regular expression denial-of-service">regular expression denial-of-service</a> (ReDoS) attack.</p>

<p>Regexp matching can apply an optimization to prevent ReDoS attacks. When the optimization is applied, matching time increases linearly (not polynomially or exponentially) in relation to the input size, and a ReDoS attack is not possible.</p>

<p>This optimization is applied if the pattern meets these criteria:</p>
<ul><li>
<p>No backreferences.</p>
</li><li>
<p>No subexpression calls.</p>
</li><li>
<p>No nested lookaround anchors or atomic groups.</p>
</li><li>
<p>No nested quantifiers with counting (i.e. no nested <code>{n}</code>, <code>{min,}</code>, <code>{,max}</code>, or <code>{min,max}</code> style quantifiers)</p>
</li></ul>

<p>You can use method <a href="#linear_time%3F-class_method" title="Regexp.linear_time? (method)">.linear_time?</a> to determine whether a pattern meets these criteria:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_linear_time?'><a href="#linear_time%3F-class_method" title="Regexp.linear_time? (method)">linear_time?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a*</span><span class='regexp_end'>/</span></span>)     <span class='comment'># =&gt; true
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_linear_time?'><a href="#linear_time%3F-class_method" title="Regexp.linear_time? (method)">linear_time?</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a*</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; true
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_linear_time?'><a href="#linear_time%3F-class_method" title="Regexp.linear_time? (method)">linear_time?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(a*)\1</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; false</span></code></pre>

<p>However, an untrusted source may not be safe even if the method returns <code>true</code>, because the optimization uses memoization (which may invoke large memory consumption).</p>

<h2 id="label-References">References</h2>

<p>Read:</p>
<ul><li>
<p><em>Mastering Regular Expressions</em> by Jeffrey E.F. Friedl.</p>
</li><li>
<p><em>Regular Expressions Cookbook</em> by Jan Goyvaerts &amp; Steven Levithan.</p>
</li></ul>

<p>Explore, test:</p>
<ul><li>
<p><a href="https://rubular.com" target="_parent" title="/ Rubular">/ Rubular</a>: interactive online editor.</p>
</li></ul>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='EXTENDED-constant' class='summary_signature'>EXTENDED =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>see <a href="#options-instance_method" title="Regexp#options (method)">#options</a> and <a href="#new-class_method" title="Regexp.new (method)">.new</a></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4864'># File 're.c', line 4864</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>ONIG_OPTION_EXTEND</span>)</pre>
  </li>
  <li>
    <span id='FIXEDENCODING-constant' class='summary_signature'>FIXEDENCODING =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>see <a href="#options-instance_method" title="Regexp#options (method)">#options</a> and <a href="#new-class_method" title="Regexp.new (method)">.new</a></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4868'># File 're.c', line 4868</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>ARG_ENCODING_FIXED</span>)</pre>
  </li>
  <li>
    <span id='IGNORECASE-constant' class='summary_signature'>IGNORECASE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>see <a href="#options-instance_method" title="Regexp#options (method)">#options</a> and <a href="#new-class_method" title="Regexp.new (method)">.new</a></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4862'># File 're.c', line 4862</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>ONIG_OPTION_IGNORECASE</span>)</pre>
  </li>
  <li>
    <span id='MULTILINE-constant' class='summary_signature'>MULTILINE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>see <a href="#options-instance_method" title="Regexp#options (method)">#options</a> and <a href="#new-class_method" title="Regexp.new (method)">.new</a></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4866'># File 're.c', line 4866</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>ONIG_OPTION_MULTILINE</span>)</pre>
  </li>
  <li>
    <span id='NOENCODING-constant' class='summary_signature'>NOENCODING =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>see <a href="#options-instance_method" title="Regexp#options (method)">#options</a> and <a href="#new-class_method" title="Regexp.new (method)">.new</a></p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4870'># File 're.c', line 4870</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'>ARG_ENCODING_NONE</span>)</pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#timeout-class_method" title="timeout (class method)">.<strong>timeout</strong>  &#x21d2; Float<sup>?</sup> </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>It returns the current default timeout interval for <code>Regexp</code> matching in second.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#timeout=-class_method" title="timeout= (class method)">.<strong>timeout=</strong>(float or nil)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>It sets the default timeout interval for <code>Regexp</code> matching in second.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#compile-class_method" title=".compile (class method)">.<strong>compile</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#new-class_method" title="Regexp.new (method)">.new</a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#escape-class_method" title="escape (class method)">.<strong>escape</strong>(string)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#quote-class_method" title="Regexp.quote (method)">.quote</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#last_match-class_method" title="last_match (class method)">.<strong>last_match</strong>  &#x21d2; MatchData<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With no argument, returns the value of <code>$~</code>, which is the result of the most recent pattern match (see <a href="Regexp.html#label-Global+Variables" title="&lt;code&gt;Regexp&lt;/code&gt; global variables"><code>Regexp</code> global variables</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#linear_time%3F-class_method" title="linear_time? (class method)">.<strong>linear_time?</strong>(re)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if matching against <code>re</code> can be done in linear time to the input string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(string, options = 0, timeout: nil)  &#x21d2; Regexp </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>With argument <code>string</code> given, returns a new regexp with the given string and options:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#escape-class_method" title="escape (class method)">.<strong>escape</strong>(string)  &#x21d2; String </a>
      (also: .escape)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new string that escapes any characters that have special meaning in a regular expression:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#try_convert-class_method" title="try_convert (class method)">.<strong>try_convert</strong>(object)  &#x21d2; Regexp<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>object</code> if it is a regexp:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#union-class_method" title="union (class method)">.<strong>union</strong>(*patterns)  &#x21d2; Regexp </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new regexp that is the union of the given patterns:</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#casefold%3F-instance_method" title="#casefold? (instance method)">#<strong>casefold?</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the case-insensitivity flag in <code>self</code> is set, <code>false</code> otherwise:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#fixed_encoding%3F-instance_method" title="#fixed_encoding? (instance method)">#<strong>fixed_encoding?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>false</code> if <code>self</code> is applicable to a string with any ASCII-compatible encoding; otherwise returns <code>true</code>:</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#==-instance_method" title="#== (instance method)">#<strong>==</strong>(object)  &#x21d2; Boolean </a>
      (also: #eql?)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if <code>object</code> is another Regexp whose pattern, flags, and encoding are the same as <code>self</code>, <code>false</code> otherwise:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#===-instance_method" title="#=== (instance method)">#<strong>===</strong>(string)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if <code>self</code> finds a match in <code>string</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#=~-instance_method" title="#=~ (instance method)">#<strong>=~</strong>(string)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer index (in characters) of the first match for <code>self</code> and <code>string</code>, or <code>nil</code> if none; also sets the <a href="Regexp.html#label-Global+Variables" title="Regexp global variables">Regexp global variables</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  &#x21d2; Encoding </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of <code>self</code>; see <a href="../encodings.html" title="Encodings">Encodings</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eql%3F-instance_method" title="#eql? (instance method)">#<strong>eql?</strong>(object)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#==-instance_method" title="Regexp#== (method)">#==</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hash-instance_method" title="#hash (instance method)">#<strong>hash</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer hash value for <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a nicely-formatted string representation of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match-instance_method" title="#match (instance method)">#<strong>match</strong>(string, offset = 0)  &#x21d2; MatchData<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>With no block given, returns the <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object that describes the match, if any, or <code>nil</code> if none; the search begins at the given character <code>offset</code> in <code>string</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match%3F-instance_method" title="#match? (instance method)">#<strong>match?</strong>(string)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> or <code>false</code> to indicate whether the regexp is matched or not without updating $~ and other related variables.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#named_captures-instance_method" title="#named_captures (instance method)">#<strong>named_captures</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash representing named captures of <code>self</code> (see <a href="Regexp.html#label-Named+Captures" title="Named Captures">Named Captures</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#names-instance_method" title="#names (instance method)">#<strong>names</strong>  &#x21d2; array_of_names </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of names of captures (see <a href="Regexp.html#label-Named+Captures" title="Named Captures">Named Captures</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an integer whose bits show the options set in <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#source-instance_method" title="#source (instance method)">#<strong>source</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the original string of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#timeout-instance_method" title="#timeout (instance method)">#<strong>timeout</strong>  &#x21d2; Float<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>It returns the timeout interval for <code>Regexp</code> matching in second.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string showing the options and string of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#~-instance_method" title="#~ (instance method)">#<strong>~</strong>(rxp)  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Equivalent to <code><em>rxp</em> =~ $_</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">#<strong>initialize_copy</strong>(re)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>new</strong>(string, options = 0, timeout: nil)  &#x21d2; <code>Regexp</code> </span>
      <span class='overload'>.<strong>new</strong>(regexp, timeout: nil)  &#x21d2; <code>Regexp</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With argument <code>string</code> given, returns a new regexp with the given string and options:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; /foo/
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_source'><a href="#source-instance_method" title="Regexp#source (method)">source</a></span>              <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_options'><a href="#options-instance_method" title="Regexp#options (method)">options</a></span>             <span class='comment'># =&gt; 0</span></code></pre>

<p>Optional argument <a href="#options-instance_method" title="Regexp#options (method)">#options</a> is one of the following:</p>
<ul><li>
<p>A String of options:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; /foo/i
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>im</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; /foo/im</span></code></pre>
</li><li>
<p>The bit-wise OR of one or more of the constants Regexp::EXTENDED, Regexp::IGNORECASE, Regexp::MULTILINE, and Regexp::NOENCODING:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#IGNORECASE-constant" title="Regexp::IGNORECASE (constant)">IGNORECASE</a></span>) <span class='comment'># =&gt; /foo/i
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#EXTENDED-constant" title="Regexp::EXTENDED (constant)">EXTENDED</a></span>)   <span class='comment'># =&gt; /foo/x
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#MULTILINE-constant" title="Regexp::MULTILINE (constant)">MULTILINE</a></span>)  <span class='comment'># =&gt; /foo/m
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#NOENCODING-constant" title="Regexp::NOENCODING (constant)">NOENCODING</a></span>)  <span class='comment'># =&gt; /foo/n
</span><span class='id identifier rubyid_flags'>flags</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#IGNORECASE-constant" title="Regexp::IGNORECASE (constant)">IGNORECASE</a></span> <span class='op'>|</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#EXTENDED-constant" title="Regexp::EXTENDED (constant)">EXTENDED</a></span> <span class='op'>|</span>  <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#MULTILINE-constant" title="Regexp::MULTILINE (constant)">MULTILINE</a></span>
<span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span>)              <span class='comment'># =&gt; /foo/mix</span></code></pre>
</li><li>
<p><code>nil</code> or <code>false</code>, which is ignored.</p>
</li><li>
<p>Any other truthy value, in which case the regexp will be case-insensitive.</p>
</li></ul>

<p>If optional keyword argument <a href="#timeout-class_method" title="Regexp.timeout (method)">.timeout</a> is given, its float value overrides the timeout interval for the class, <a href="#timeout-class_method" title="Regexp.timeout (method)">.timeout</a>. If <code>nil</code> is passed as +timeout, it uses the timeout interval for the class, <a href="#timeout-class_method" title="Regexp.timeout (method)">.timeout</a>.</p>

<p>With argument <code>regexp</code> given, returns a new regexp. The source, options, timeout are the same as <code>regexp</code>. <a href="#options-instance_method" title="Regexp#options (method)">#options</a> and <code>n_flag</code> arguments are ineffective.  The timeout can be overridden by <a href="#timeout-class_method" title="Regexp.timeout (method)">.timeout</a> keyword.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_options'><a href="#options-instance_method" title="Regexp#options (method)">options</a></span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#MULTILINE-constant" title="Regexp::MULTILINE (constant)">MULTILINE</a></span>
<span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'><a href="#options-instance_method" title="Regexp#options (method)">options</a></span><span class='comma'>,</span> <span class='label'>timeout:</span> <span class='float'>1.1</span>) <span class='comment'># =&gt; /foo/m
</span><span class='id identifier rubyid_r2'>r2</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_r'>r</span>)                           <span class='comment'># =&gt; /foo/m
</span><span class='id identifier rubyid_r2'>r2</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span>                                   <span class='comment'># =&gt; 1.1
</span><span class='id identifier rubyid_r3'>r3</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='label'>timeout:</span> <span class='float'>3.14</span>)            <span class='comment'># =&gt; /foo/m
</span><span class='id identifier rubyid_r3'>r3</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span>                                   <span class='comment'># =&gt; 3.14</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4029-L4045'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4029' data-end='4045'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4029</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_initialize_m(int argc, VALUE *argv, VALUE self)
{
    struct reg_init_args args;
    VALUE re = reg_extract_args(argc, argv, &amp;args);

    if (NIL_P(re)) {
        reg_init_args(self, args.str, args.enc, args.flags);
    }
    else {
        reg_copy(self, re);
    }

    set_timeout(&amp;RREGEXP_PTR(self)-&gt;timelimit, args.timeout);

    return self;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="timeout-class_method">
  <h3 class='signature rw first'>
    .<strong>timeout</strong>  &#x21d2; <a href="Float.html" title="Float (class)">Float</a><sup>?</sup>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>It returns the current default timeout interval for <code>Regexp</code> matching in second. <code>nil</code> means no default timeout configuration.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4729-L4735'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4729' data-end='4735'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4729</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_s_timeout_get(VALUE dummy)
{
    double d = hrtime2double(rb_reg_match_time_limit);
    if (d == 0.0) return Qnil;
    return DBL2NUM(d);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timeout=-class_method">
  <h3 class='signature rw'>
    .<strong>timeout=</strong>(float or nil)   <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>It sets the default timeout interval for <code>Regexp</code> matching in second. <code>nil</code> means no default timeout configuration. This configuration is process-global. If you want to set timeout for each <code>Regexp</code>, use <a href="#timeout-class_method" title="Regexp.timeout (method)">.timeout</a> keyword for <a href="#new-class_method" title="Regexp.new (method)">.new</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_timeout'><a href="#timeout-class_method" title="Regexp.timeout (method)">timeout</a></span> <span class='op'>=</span> <span class='int'>1</span>
<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^a*b?a*$</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>100000</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span> <span class='comment'>#=&gt; regexp match timeout (RuntimeError)</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4750-L4758'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4750' data-end='4758'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4750</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_s_timeout_set(VALUE dummy, VALUE timeout)
{
    rb_ractor_ensure_main_ractor(&quot;can not access Regexp.timeout from non-main Ractors&quot;);

    set_timeout(&amp;rb_reg_match_time_limit, timeout);

    return timeout;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="compile-class_method">
  <h3 class='signature  first'>
    .<strong>compile</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#new-class_method" title="Regexp.new (method)">.new</a></p>

  </div>
</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4827'>GitHub</a> ]</span>

</section>

<section class='method_details' id="escape-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>escape</strong>(string)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>.<strong>escape</strong>(string)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#quote-class_method" title="Regexp.quote (method)">.quote</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="last_match-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>last_match</strong>  &#x21d2; <a href="MatchData.html" title="MatchData (class)">MatchData</a><sup>?</sup> </span>
      <span class='overload'>.<strong>last_match</strong>(n)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
      <span class='overload'>.<strong>last_match</strong>(name)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With no argument, returns the value of <code>$~</code>, which is the result of the most recent pattern match (see <a href="Regexp.html#label-Global+Variables" title="&lt;code&gt;Regexp&lt;/code&gt; global variables"><code>Regexp</code> global variables</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>c(.)t</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cat</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># =&gt; 0
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span> <span class='comment'># =&gt; #&lt;MatchData &quot;cat&quot; 1:&quot;a&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>      <span class='comment'># =&gt; nil
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>With non-negative integer argument <code>n</code>, returns the _n_th field in the matchdata, if any, or nil if none:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>c(.)t</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cat</span><span class='tstring_end'>&#39;</span></span>     <span class='comment'># =&gt; 0
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>(<span class='int'>0</span>) <span class='comment'># =&gt; &quot;cat&quot;
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>(<span class='int'>1</span>) <span class='comment'># =&gt; &quot;a&quot;
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>(<span class='int'>2</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>With negative integer argument <code>n</code>, counts backwards from the last field:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>(<span class='op'>-</span><span class='int'>1</span>)       <span class='comment'># =&gt; &quot;a&quot;</span></code></pre>

<p>With string or symbol argument <code>name</code>, returns the string value for the named capture, if any:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;lhs&gt;\w)\s*=\s*(?&lt;rhs&gt;\w)</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>var = val</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>        <span class='comment'># =&gt; #&lt;MatchData &quot;var = val&quot; lhs:&quot;var&quot;rhs:&quot;val&quot;&gt;
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_lhs'>lhs</span>)  <span class='comment'># =&gt; &quot;var&quot;
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rhs</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;val&quot;
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_last_match'>last_match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Raises IndexError.</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4667-L4678'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4667' data-end='4678'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4667</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_s_last_match(int argc, VALUE *argv, VALUE _)
{
    if (rb_check_arity(argc, 0, 1) == 1) {
        VALUE match = rb_backref_get();
        int n;
        if (NIL_P(match)) return Qnil;
        n = match_backref_number(match, argv[0]);
        return rb_reg_nth_match(n, match);
    }
    return match_getter();
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="linear_time?-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>linear_time?</strong>(re)  </span>
      <span class='overload'>.<strong>linear_time?</strong>(string, options = 0)  </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if matching against <code>re</code> can be done in linear time to the input string.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_linear_time?'>linear_time?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>re</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; true</span></code></pre>

<p>Note that this is a property of the ruby interpreter, not of the argument regular expression.  Identical regexp can or cannot run in linear time depending on your ruby binary.  Neither forward nor backward compatibility is guaranteed about the return value of this method.  Our current algorithm is (*1) but this is subject to change in the future.  Alternative implementations can also behave differently.  They might always return false for everything.</p>

<p>(*1): <a href="https://doi.org/10.1109/SP40001.2021.00032">doi.org/10.1109/SP40001.2021.00032</a></p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4444-L4455'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4444' data-end='4455'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4444</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_s_linear_time_p(int argc, VALUE *argv, VALUE self)
{
    struct reg_init_args args;
    VALUE re = reg_extract_args(argc, argv, &amp;args);

    if (NIL_P(re)) {
        re = reg_init_args(rb_reg_alloc(), args.str, args.enc, args.flags);
    }

    return RBOOL(onig_check_linear_time(RREGEXP_PTR(re)));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quote-class_method">
  <h3 class='signature '>
    .<strong>escape</strong>(string)  &#x21d2; <a href="String.html" title="String (class)">String</a>     <span class='aliases'>Also known as: <span class='names'>.escape</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new string that escapes any characters that have special meaning in a regular expression:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_escape'><a href="#escape-class_method" title="Regexp.escape (method)">escape</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\*?{}.</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; &quot;\\\\\\*\\?\\{\\}\\.&quot;</span></code></pre>

<p>For any string <code>s</code>, this call returns a <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='const'>Regexp</span>.<span class='id identifier rubyid_escape'><a href="#escape-class_method" title="Regexp.escape (method)">escape</a></span>(<span class='id identifier rubyid_s'>s</span>)) <span class='comment'># =&gt; /\\\\\\\*\\\?\\\{\\\}\\\./
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='id identifier rubyid_s'>s</span>)                       <span class='comment'># =&gt; #&lt;MatchData &quot;\\\\\\*\\?\\{\\}\\.&quot;&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4216-L4220'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4216' data-end='4220'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4216</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_s_quote(VALUE c, VALUE str)
{
    return rb_reg_quote(reg_operand(str, TRUE));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="try_convert-class_method">
  <h3 class='signature '>
    .<strong>try_convert</strong>(object)  &#x21d2; <code>Regexp</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>object</code> if it is a regexp:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>re</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; /re/</span></code></pre>

<p>Otherwise if <code>object</code> responds to <code>:to_regexp</code>, calls <code>object.to_regexp</code> and returns the result.</p>

<p>Returns <code>nil</code> if <code>object</code> does not respond to <code>:to_regexp</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>re</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Raises an exception unless <code>object.to_regexp</code> returns a regexp.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4258-L4262'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4258' data-end='4262'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4258</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_s_try_convert(VALUE dummy, VALUE re)
{
    return rb_check_regexp_type(re);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="union-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>union</strong>(*patterns)  &#x21d2; <code>Regexp</code> </span>
      <span class='overload'>.<strong>union</strong>(array_of_patterns)  &#x21d2; <code>Regexp</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new regexp that is the union of the given patterns:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span>(<span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>cat</span><span class='words_sep'> </span><span class='tstring_content'>dog</span><span class='tstring_end'>]</span></span>)      <span class='comment'># =&gt; /cat|dog/
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cat</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot;cat&quot;&gt;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dog</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot;dog&quot;&gt;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="Regexp#match (method)">match</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cog</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; nil</span></code></pre>

<p>For each pattern that is a string, <code>Regexp.new(pattern)</code> is used:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>penzance</span><span class='tstring_end'>&#39;</span></span>)             <span class='comment'># =&gt; /penzance/
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a+b*c</span><span class='tstring_end'>&#39;</span></span>)                <span class='comment'># =&gt; /a\+b\*c/
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>skiing</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sledding</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; /skiing|sledding/
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>skiing</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sledding</span><span class='tstring_end'>&#39;</span></span>]) <span class='comment'># =&gt; /skiing|sledding/</span></code></pre>

<p>For each pattern that is a regexp, it is used as is, including its flags:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>baz</span><span class='regexp_end'>/x</span></span>)
<span class='comment'># =&gt; /(?i-mx:foo)|(?m-ix:bar)|(?x-mi:baz)/
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span>([<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>baz</span><span class='regexp_end'>/x</span></span>])
<span class='comment'># =&gt; /(?i-mx:foo)|(?m-ix:bar)|(?x-mi:baz)/</span></code></pre>

<p>With no arguments, returns <code>/(?!)/</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span>.<span class='id identifier rubyid_union'>union</span> <span class='comment'># =&gt; /(?!)/</span></code></pre>

<p>If any regexp pattern contains captures, the behavior is unspecified.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4412-L4421'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4412' data-end='4421'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4412</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_s_union_m(VALUE self, VALUE args)
{
    VALUE v;
    if (RARRAY_LEN(args) == 1 &amp;&amp;
        !NIL_P(v = rb_check_array_type(rb_ary_entry(args, 0)))) {
        return rb_reg_s_union(self, v);
    }
    return rb_reg_s_union(self, args);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="casefold?-instance_method">
  <h3 class='signature ro first'>
    #<strong>casefold?</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the case-insensitivity flag in <code>self</code> is set, <code>false</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_casefold?'>casefold?</span>           <span class='comment'># =&gt; false
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a</span><span class='regexp_end'>/i</span></span>.<span class='id identifier rubyid_casefold?'>casefold?</span>          <span class='comment'># =&gt; true
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?i:a)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_casefold?'>casefold?</span>      <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L740-L745'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='740' data-end='745'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 740</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_casefold_p(VALUE re)
{
    rb_reg_check(re);
    return RBOOL(RREGEXP_PTR(re)-&gt;options &amp; ONIG_OPTION_IGNORECASE);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fixed_encoding?-instance_method">
  <h3 class='signature ro'>
    #<strong>fixed_encoding?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>false</code> if <code>self</code> is applicable to a string with any ASCII-compatible encoding; otherwise returns <code>true</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a</span><span class='regexp_end'>/</span></span>                                          <span class='comment'># =&gt; /a/
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_fixed_encoding?'>fixed_encoding?</span>                               <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{6666} a</span><span class='tstring_end'>&quot;</span></span>)                          <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xa1\xa2 a</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&quot;</span></span>)) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&quot;</span></span>))        <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>a</span><span class='regexp_end'>/u</span></span>                                        <span class='comment'># =&gt; /a/
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_fixed_encoding?'>fixed_encoding?</span>                               <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{6666} a</span><span class='tstring_end'>&quot;</span></span>)                          <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xa1\xa2</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&quot;</span></span>))   <span class='comment'># Raises exception.
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&quot;</span></span>))        <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\u{6666}</span><span class='regexp_end'>/</span></span>                                  <span class='comment'># =&gt; /\u{6666}/
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_fixed_encoding?'>fixed_encoding?</span>                               <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="Regexp#encoding (method)">encoding</a></span>                                      <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{6666} a</span><span class='tstring_end'>&quot;</span></span>)                          <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xa1\xa2</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&quot;</span></span>))   <span class='comment'># Raises exception.
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="Regexp#match? (method)">match?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&quot;</span></span>))        <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L1561-L1565'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1561' data-end='1565'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 1561</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_fixed_encoding_p(VALUE re)
{
    return RBOOL(FL_TEST(re, KCODE_FIXED));
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="==-instance_method">
  <h3 class='signature  first'>
    #<strong>==</strong>(object)  &#x21d2; <code>Boolean</code>     <span class='aliases'>Also known as: <span class='names'>#eql?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if <code>object</code> is another Regexp whose pattern, flags, and encoding are the same as <code>self</code>, <code>false</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span> <span class='op'>==</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)                          <span class='comment'># =&gt; true
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span> <span class='op'>==</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/i</span></span>                                     <span class='comment'># =&gt; false
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span> <span class='op'>==</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>food</span><span class='tstring_end'>&#39;</span></span>)                         <span class='comment'># =&gt; false
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span> <span class='op'>==</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&quot;</span></span>)) <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L3558-L3569'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3558' data-end='3569'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 3558</span></pre>
<pre class='code cpp'>

VALUE
rb_reg_equal(VALUE re1, VALUE re2)
{
    if (re1 == re2) return Qtrue;
    if (!RB_TYPE_P(re2, T_REGEXP)) return Qfalse;
    rb_reg_check(re1); rb_reg_check(re2);
    if (FL_TEST(re1, KCODE_FIXED) != FL_TEST(re2, KCODE_FIXED)) return Qfalse;
    if (RREGEXP_PTR(re1)-&gt;options != RREGEXP_PTR(re2)-&gt;options) return Qfalse;
    if (RREGEXP_SRC_LEN(re1) != RREGEXP_SRC_LEN(re2)) return Qfalse;
    if (ENCODING_GET(re1) != ENCODING_GET(re2)) return Qfalse;
    return RBOOL(memcmp(RREGEXP_SRC_PTR(re1), RREGEXP_SRC_PTR(re2), RREGEXP_SRC_LEN(re1)) == 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="===-instance_method">
  <h3 class='signature '>
    #<strong>===</strong>(string)  &#x21d2; <code>Boolean</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if <code>self</code> finds a match in <code>string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[a-z]*$</span><span class='regexp_end'>/</span></span> <span class='op'>===</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HELLO</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; false
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[A-Z]*$</span><span class='regexp_end'>/</span></span> <span class='op'>===</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HELLO</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; true</span></code></pre>

<p>This method is called in case statements:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HELLO</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>case</span> <span class='id identifier rubyid_s'>s</span>
<span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[a-z]*\z</span><span class='regexp_end'>/</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lower case\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A[A-Z]*\z</span><span class='regexp_end'>/</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Upper case\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>               <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mixed case\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span> <span class='comment'># =&gt; &quot;Upper case&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L3748-L3760'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3748' data-end='3760'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 3748</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_eqq(VALUE re, VALUE str)
{
    long start;

    str = reg_operand(str, FALSE);
    if (NIL_P(str)) {
        rb_backref_set(Qnil);
        return Qfalse;
    }
    start = rb_reg_search(re, str, 0, 0);
    return RBOOL(start &gt;= 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="=~-instance_method">
  <h3 class='signature '>
    #<strong>=~</strong>(string)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer index (in characters) of the first match for <code>self</code> and <code>string</code>, or <code>nil</code> if none; also sets the <a href="Regexp.html#label-Global+Variables" title="Regexp global variables">Regexp global variables</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>at</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>input data</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; 7
</span><span class='gvar'>$~</span>                   <span class='comment'># =&gt; #&lt;MatchData &quot;at&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ax</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>input data</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; nil
</span><span class='gvar'>$~</span>                   <span class='comment'># =&gt; nil</span></code></pre>

<p>Assigns named captures to local variables of the same names if and only if <code>self</code>:</p>
<ul><li>
<p>Is a regexp literal; see <a href="../syntax/literals.html#label-Regexp%2BLiterals" title="Regexp Literals">Regexp Literals</a>.</p>
</li><li>
<p>Does not contain interpolations; see <a href="Regexp.html#label-Interpolation+Mode" title="Regexp interpolation">Regexp interpolation</a>.</p>
</li><li>
<p>Is at the left of the expression.</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;lhs&gt;\w)\s*=\s*(?&lt;rhs&gt;\w)</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  x = y  </span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_lhs'>lhs</span> <span class='comment'># =&gt; &quot;x&quot;
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_rhs'>rhs</span> <span class='comment'># =&gt; &quot;y&quot;</span></code></pre>

<p>Assigns <code>nil</code> if not matched:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;lhs&gt;\w)\s*=\s*(?&lt;rhs&gt;\w)</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  x = </span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_lhs'>lhs</span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_rhs'>rhs</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>Does not make local variable assignments if <code>self</code> is not a regexp literal:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;\w)\s*=\s*(?&lt;foo&gt;\w)</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_r'>r</span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  x = y  </span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_foo'>foo</span> <span class='comment'># Undefined local variable
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_bar'>bar</span> <span class='comment'># Undefined local variable</span></code></pre>

<p>The assignment does not occur if the regexp is not at the left:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>  x = y  </span><span class='tstring_end'>&#39;</span></span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;\w)\s*=\s*(?&lt;foo&gt;\w)</span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_foo'>foo</span><span class='comma'>,</span> <span class='id identifier rubyid_foo'>foo</span> <span class='comment'># Undefined local variables</span></code></pre>

<p>A regexp interpolation, <code>#{}</code>, also disables the assignment:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;\w+)</span><span class='regexp_end'>/</span></span>
<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;\w+)\s*=\s*</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_r'>r</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x = y</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_foo'>foo</span> <span class='comment'># Undefined local variable</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L3719-L3726'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3719' data-end='3726'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 3719</span></pre>
<pre class='code cpp'>

VALUE
rb_reg_match(VALUE re, VALUE str)
{
    long pos = reg_match_pos(re, &amp;str, 0, NULL);
    if (pos &lt; 0) return Qnil;
    pos = rb_str_sublen(str, pos);
    return LONG2FIX(pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encoding-instance_method">
  <h3 class='signature '>
    #<strong>encoding</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of <code>self</code>; see <a href="../encodings.html" title="Encodings">Encodings</a>.</p>

<p>Related: see <a href="String.html#label-Querying" title="Querying">Querying</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/encoding.c#L1234-L1242'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1234' data-end='1242'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'encoding.c', line 1234</span></pre>
<pre class='code cpp'>

VALUE
rb_obj_encoding(VALUE obj)
{
    int idx = rb_enc_get_index(obj);
    if (idx &lt; 0) {
        rb_raise(rb_eTypeError, &quot;unknown encoding&quot;);
    }
    return rb_enc_from_encoding_index(idx &amp; ENC_INDEX_MASK);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eql?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>==</strong>(object)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>eql?</strong>(object)  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#==-instance_method" title="Regexp#== (method)">#==</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="hash-instance_method">
  <h3 class='signature '>
    #<strong>hash</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer hash value for <code>self</code>.</p>

<p>Related: <a href="Object.html#hash-instance_method" title="Object#hash (method)">Object#hash</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L3525-L3530'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3525' data-end='3530'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 3525</span></pre>
<pre class='code cpp'>

VALUE
rb_reg_hash(VALUE re)
{
    st_index_t hashval = reg_hash(re);
    return ST2FIX(hashval);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_copy-instance_method">
  <h3 class='signature nodoc'>
    #<strong>initialize_copy</strong>(re)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4458-L4464'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4458' data-end='4464'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4458</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_init_copy(VALUE copy, VALUE re)
{
    if (!OBJ_INIT_COPY(copy, re)) return copy;
    rb_reg_check(re);
    return reg_copy(copy, re);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a nicely-formatted string representation of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ab+c</span><span class='regexp_end'>/ix</span></span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;/ab+c/ix&quot;</span></code></pre>

<p>Related: <a href="#to_s-instance_method" title="Regexp#to_s (method)">#to_s</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L522-L529'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='522' data-end='529'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 522</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_inspect(VALUE re)
{
    if (!RREGEXP_PTR(re) || !RREGEXP_SRC(re) || !RREGEXP_SRC_PTR(re)) {
        return rb_any_to_s(re);
    }
    return rb_reg_desc(re);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>match</strong>(string, offset = 0)  &#x21d2; <a href="MatchData.html" title="MatchData (class)">MatchData</a><sup>?</sup> </span>
      <span class='overload'>#<strong>match</strong>(string, offset = 0) {|matchdata| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>With no block given, returns the <a href="MatchData.html" title="MatchData (class)"><code>::MatchData</code></a> object that describes the match, if any, or <code>nil</code> if none; the search begins at the given character <code>offset</code> in <code>string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; #&lt;MatchData &quot;abra&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>4</span>)   <span class='comment'># =&gt; #&lt;MatchData &quot;abra&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>8</span>)   <span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>800</span>) <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{5d0 5d1 5e8 5d0}cadabra</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='int'>7</span>)          <span class='comment'>#=&gt; #&lt;MatchData &quot;abra&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='int'>8</span>)          <span class='comment'>#=&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='int'>8</span>)        <span class='comment'>#=&gt; #&lt;MatchData &quot;abra&quot;&gt;</span></code></pre>

<p>With a block given, calls the block if and only if a match is found; returns the block’s value:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_matchdata'>matchdata</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_matchdata'>matchdata</span> }
<span class='comment'># =&gt; #&lt;MatchData &quot;abra&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>4</span>) {<span class='op'>|</span><span class='id identifier rubyid_matchdata'>matchdata</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_matchdata'>matchdata</span> }
<span class='comment'># =&gt; #&lt;MatchData &quot;abra&quot;&gt;
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>8</span>) {<span class='op'>|</span><span class='id identifier rubyid_matchdata'>matchdata</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_matchdata'>matchdata</span> }
<span class='comment'># =&gt; nil
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>abra</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abracadabra</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>8</span>) {<span class='op'>|</span><span class='id identifier rubyid_marchdata'>marchdata</span><span class='op'>|</span> <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot happen</span><span class='tstring_end'>&#39;</span></span> }
<span class='comment'># =&gt; nil</span></code></pre>

<p>Output (from the first two blocks above):</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#&lt;MatchData &quot;abra&quot;&gt;
</span><span class='comment'>#&lt;MatchData &quot;abra&quot;&gt;
</span>
 <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.)(.)(.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>)[<span class='int'>2</span>] <span class='comment'># =&gt; &quot;b&quot;
</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.)(.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>)[<span class='int'>2</span>] <span class='comment'># =&gt; &quot;c&quot;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L3835-L3858'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3835' data-end='3858'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 3835</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_match_m(int argc, VALUE *argv, VALUE re)
{
    VALUE result = Qnil, str, initpos;
    long pos;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;str, &amp;initpos) == 2) {
        pos = NUM2LONG(initpos);
    }
    else {
        pos = 0;
    }

    pos = reg_match_pos(re, &amp;str, pos, &amp;result);
    if (pos &lt; 0) {
        rb_backref_set(Qnil);
        return Qnil;
    }
    rb_match_busy(result);
    if (!NIL_P(result) &amp;&amp; rb_block_given_p()) {
        return rb_yield(result);
    }
    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match?-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>match?</strong>(string)  &#x21d2; <code>Boolean</code> </span>
      <span class='overload'>#<strong>match?</strong>(string, offset = 0)  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> or <code>false</code> to indicate whether the regexp is matched or not without updating $~ and other related variables. If the second parameter is present, it specifies the position in the string to begin the search.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>R...</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby</span><span class='tstring_end'>&quot;</span></span>)    <span class='comment'># =&gt; true
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>R...</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>) <span class='comment'># =&gt; false
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>P...</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby</span><span class='tstring_end'>&quot;</span></span>)    <span class='comment'># =&gt; false
</span><span class='backref'>$&amp;</span>                       <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L3876-L3881'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3876' data-end='3881'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 3876</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_match_m_p(int argc, VALUE *argv, VALUE re)
{
    long pos = rb_check_arity(argc, 1, 2) &gt; 1 ? NUM2LONG(argv[1]) : 0;
    return rb_reg_match_p(re, argv[0], pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="named_captures-instance_method">
  <h3 class='signature '>
    #<strong>named_captures</strong>  &#x21d2; <a href="Hash.html" title="Hash (class)">Hash</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash representing named captures of <code>self</code> (see <a href="Regexp.html#label-Named+Captures" title="Named Captures">Named Captures</a>):</p>
<ul><li>
<p>Each key is the name of a named capture.</p>
</li><li>
<p>Each value is an array of integer indexes for that named capture.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;.)(?&lt;bar&gt;.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_named_captures'>named_captures</span> <span class='comment'># =&gt; {&quot;foo&quot;=&gt;[1], &quot;bar&quot;=&gt;[2]}
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;.)(?&lt;foo&gt;.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_named_captures'>named_captures</span> <span class='comment'># =&gt; {&quot;foo&quot;=&gt;[1, 2]}
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.)(.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_named_captures'>named_captures</span>             <span class='comment'># =&gt; {}</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L858-L865'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='858' data-end='865'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 858</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_named_captures(VALUE re)
{
    regex_t *reg = (rb_reg_check(re), RREGEXP_PTR(re));
    VALUE hash = rb_hash_new_with_size(onig_number_of_names(reg));
    onig_foreach_name(reg, reg_named_captures_iter, (void*)hash);
    return hash;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="names-instance_method">
  <h3 class='signature '>
    #<strong>names</strong>  &#x21d2; <code>array_of_names</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of names of captures (see <a href="Regexp.html#label-Named+Captures" title="Named Captures">Named Captures</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;.)(?&lt;bar&gt;.)(?&lt;baz&gt;.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_names'>names</span> <span class='comment'># =&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;foo&gt;.)(?&lt;foo&gt;.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_names'>names</span>          <span class='comment'># =&gt; [&quot;foo&quot;]
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.)(.)</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_names'>names</span>                      <span class='comment'># =&gt; []</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L814-L822'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='814' data-end='822'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 814</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_names(VALUE re)
{
    VALUE ary;
    rb_reg_check(re);
    ary = rb_ary_new_capa(onig_number_of_names(RREGEXP_PTR(re)));
    onig_foreach_name(RREGEXP_PTR(re), reg_names_iter, (void*)ary);
    return ary;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="options-instance_method">
  <h3 class='signature '>
    #<strong>options</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an integer whose bits show the options set in <code>self</code>.</p>

<p>The option bits are:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#IGNORECASE-constant" title="Regexp::IGNORECASE (constant)">IGNORECASE</a></span> <span class='comment'># =&gt; 1
</span><span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#EXTENDED-constant" title="Regexp::EXTENDED (constant)">EXTENDED</a></span>   <span class='comment'># =&gt; 2
</span><span class='const'>Regexp</span><span class='op'>::</span><span class='const'><a href="#MULTILINE-constant" title="Regexp::MULTILINE (constant)">MULTILINE</a></span>  <span class='comment'># =&gt; 4</span></code></pre>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_options'>options</span>    <span class='comment'># =&gt; 0
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/i</span></span>.<span class='id identifier rubyid_options'>options</span>   <span class='comment'># =&gt; 1
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/x</span></span>.<span class='id identifier rubyid_options'>options</span>   <span class='comment'># =&gt; 2
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/m</span></span>.<span class='id identifier rubyid_options'>options</span>   <span class='comment'># =&gt; 4
</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/mix</span></span>.<span class='id identifier rubyid_options'>options</span> <span class='comment'># =&gt; 7</span></code></pre>

<p>Note that additional bits may be set in the returned integer; these are maintained internally in <code>self</code>, are ignored if passed to <a href="#new-class_method" title="Regexp.new (method)">.new</a>, and may be ignored by the caller:</p>

<p>Returns the set of bits corresponding to the options used when creating this regexp (see <a href="#new-class_method" title="Regexp.new (method)">.new</a> for details). Note that additional bits may be set in the returned options: these are used internally by the regular expression code. These extra bits are ignored if the options are passed to <a href="#new-class_method" title="Regexp.new (method)">.new</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\xa1\xa2</span><span class='regexp_end'>/e</span></span>                 <span class='comment'># =&gt; /\xa1\xa2/
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_source'><a href="#source-instance_method" title="Regexp#source (method)">source</a></span>                        <span class='comment'># =&gt; &quot;\\xa1\\xa2&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_options'>options</span>                       <span class='comment'># =&gt; 16
</span><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_source'><a href="#source-instance_method" title="Regexp#source (method)">source</a></span><span class='comma'>,</span> <span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_options'>options</span>) <span class='comment'># =&gt; /\xa1\xa2/</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L785-L790'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='785' data-end='790'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 785</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_options_m(VALUE re)
{
    int options = rb_reg_options(re);
    return INT2NUM(options);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="source-instance_method">
  <h3 class='signature '>
    #<strong>source</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the original string of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ab+c</span><span class='regexp_end'>/ix</span></span>.<span class='id identifier rubyid_source'>source</span> <span class='comment'># =&gt; &quot;ab+c&quot;</span></code></pre>

<p><code>Regexp</code> escape sequences are retained:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\x20\+</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_source'>source</span>  <span class='comment'># =&gt; &quot;\\x20\\+&quot;</span></code></pre>

<p>Lexer escape characters are not retained:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_source'>source</span>  <span class='comment'># =&gt; &quot;/&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L501-L509'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='501' data-end='509'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 501</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_source(VALUE re)
{
    VALUE str;

    rb_reg_check(re);
    str = rb_str_dup(RREGEXP_SRC(re));
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timeout-instance_method">
  <h3 class='signature '>
    #<strong>timeout</strong>  &#x21d2; <a href="Float.html" title="Float (class)">Float</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>It returns the timeout interval for <code>Regexp</code> matching in second. <code>nil</code> means no default timeout configuration.</p>

<p>This configuration is per-object. The global configuration set by <a href="#timeout=-class_method" title="Regexp.timeout= (method)">.timeout=</a> is ignored if per-object configuration is set.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_re'>re</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^a*b?a*$</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>timeout:</span> <span class='int'>1</span>)
<span class='id identifier rubyid_re'>re</span>.<span class='id identifier rubyid_timeout'>timeout</span>               <span class='comment'>#=&gt; 1.0
</span><span class='id identifier rubyid_re'>re</span> <span class='op'>=~</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>100000</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span> <span class='comment'>#=&gt; regexp match timeout (RuntimeError)</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L4775-L4782'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4775' data-end='4782'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 4775</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_timeout_get(VALUE re)
{
    rb_reg_check(re);
    double d = hrtime2double(RREGEXP_PTR(re)-&gt;timelimit);
    if (d == 0.0) return Qnil;
    return DBL2NUM(d);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_s-instance_method">
  <h3 class='signature '>
    #<strong>to_s</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string showing the options and string of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r0'>r0</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ab+c</span><span class='regexp_end'>/ix</span></span>
<span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='id identifier rubyid_r0'>r0</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'># =&gt; &quot;(?ix-m:ab+c)&quot;</span></code></pre>

<p>The returned string may be used as an argument to <a href="#new-class_method" title="Regexp.new (method)">.new</a>, or as interpolated text for a <a href="Regexp.html#label-Interpolation+Mode" title="&lt;code&gt;Regexp&lt;/code&gt; interpolation"><code>Regexp</code> interpolation</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r1'>r1</span> <span class='op'>=</span> <span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Regexp.new (method)">new</a></span>(<span class='id identifier rubyid_s0'>s0</span>) <span class='comment'># =&gt; /(?ix-m:ab+c)/
</span><span class='id identifier rubyid_r2'>r2</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s0'>s0</span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span>        <span class='comment'># =&gt; /(?ix-m:ab+c)/</span></code></pre>

<p>Note that <code>r1</code> and <code>r2</code> are not equal to <code>r0</code> because their original strings are different:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r0'>r0</span> <span class='op'>==</span> <span class='id identifier rubyid_r1'>r1</span>  <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_r0'>r0</span>.<span class='id identifier rubyid_source'><a href="#source-instance_method" title="Regexp#source (method)">source</a></span> <span class='comment'># =&gt; &quot;ab+c&quot;
</span><span class='id identifier rubyid_r1'>r1</span>.<span class='id identifier rubyid_source'><a href="#source-instance_method" title="Regexp#source (method)">source</a></span> <span class='comment'># =&gt; &quot;(?ix-m:ab+c)&quot;</span></code></pre>

<p>Related: <a href="#inspect-instance_method" title="Regexp#inspect (method)">#inspect</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L560-L564'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='560' data-end='564'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 560</span></pre>
<pre class='code cpp'>

static VALUE
rb_reg_to_s(VALUE re)
{
    return rb_reg_str_with_term(re, &#39;/&#39;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="~-instance_method">
  <h3 class='signature '>
    #<strong>~</strong>(rxp)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Equivalent to <code><em>rxp</em> =~ $_</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$_</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>input data</span><span class='tstring_end'>&quot;</span></span>
<span class='op'>~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>at</span><span class='regexp_end'>/</span></span> <span class='comment'># =&gt; 7</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_8/re.c#L3774-L3791'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3774' data-end='3791'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 're.c', line 3774</span></pre>
<pre class='code cpp'>

VALUE
rb_reg_match2(VALUE re)
{
    long start;
    VALUE line = rb_lastline_get();

    if (!RB_TYPE_P(line, T_STRING)) {
        rb_backref_set(Qnil);
        return Qnil;
    }

    start = rb_reg_search(re, line, 0, 0);
    if (start &lt; 0) {
        return Qnil;
    }
    start = rb_str_sublen(line, start);
    return LONG2FIX(start);
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>