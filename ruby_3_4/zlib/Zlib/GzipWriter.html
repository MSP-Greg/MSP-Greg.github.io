<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Zlib::GzipWriter &mdash; zlib  Ruby-3.4.6 p54</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Zlib::GzipWriter",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.4.6</a> &raquo; 
      <a href='../'>zlib</a> &raquo; 
      <a href='../_index.html#alpha_G'>Index (G)</a> &raquo; 
        <a href="../Zlib.html" title="Zlib (module)">Zlib</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>GzipWriter&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Zlib::GzipWriter</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="GzipFile.html" title="Zlib::GzipFile (class)"><code>GzipFile</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="GzipFile.html" title="Zlib::GzipFile (class)"><code>GzipFile</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="GzipFile.html" title="Zlib::GzipFile (class)">Zlib::GzipFile</a></span>
        <ul class='fullTree'>
          <li><a href="../Object.html" title="Object (class)"><code>::Object</code></a></li>
          <li class='next'><a href="GzipFile.html" title="Zlib::GzipFile (class)">Zlib::GzipFile</a></li>
          <li class='next'>Zlib::GzipWriter</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L4919'>ext/zlib/zlib.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3725'>ext/zlib/zlib.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>GzipWriter</code> is a class for writing gzipped files.  <code>GzipWriter</code> should be used with an instance of IO, or IO-like, object.</p>

<p>Following two example generate the same result.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../Zlib.html" title="Zlib (module)">Zlib</a></span><span class='op'>::</span><span class='const'>GzipWriter</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="Zlib::GzipWriter.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.gz</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_gz'>gz</span><span class='op'>|</span>
  <span class='id identifier rubyid_gz'>gz</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="Zlib::GzipWriter#write (method)">write</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jugemu jugemu gokou no surikire...</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="Zlib::GzipWriter.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.gz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_gz'>gz</span> <span class='op'>=</span> <span class='const'><a href="../Zlib.html" title="Zlib (module)">Zlib</a></span><span class='op'>::</span><span class='const'>GzipWriter</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Zlib::GzipWriter.new (method)">new</a></span>(<span class='id identifier rubyid_f'>f</span>)
  <span class='id identifier rubyid_gz'>gz</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="Zlib::GzipWriter#write (method)">write</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jugemu jugemu gokou no surikire...</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_gz'>gz</span>.<span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span></code></pre>

<p>To make like gzip(1) does, run following:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_orig'>orig</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.txt</span><span class='tstring_end'>&#39;</span></span>
<span class='const'><a href="../Zlib.html" title="Zlib (module)">Zlib</a></span><span class='op'>::</span><span class='const'>GzipWriter</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="Zlib::GzipWriter.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.gz</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_gz'>gz</span><span class='op'>|</span>
  <span class='id identifier rubyid_gz'>gz</span>.<span class='id identifier rubyid_mtime'>mtime</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_mtime'>mtime</span>(<span class='id identifier rubyid_orig'>orig</span>)
  <span class='id identifier rubyid_gz'>gz</span>.<span class='id identifier rubyid_orig_name'>orig_name</span> <span class='op'>=</span> <span class='id identifier rubyid_orig'>orig</span>
  <span class='id identifier rubyid_gz'>gz</span>.<span class='id identifier rubyid_write'><a href="#write-instance_method" title="Zlib::GzipWriter#write (method)">write</a></span> <span class='const'>IO</span>.<span class='id identifier rubyid_binread'>binread</span>(<span class='id identifier rubyid_orig'>orig</span>)
<span class='kw'>end</span></code></pre>

<p>NOTE: Due to the limitation of Ruby’s finalizer, you must explicitly close <code>GzipWriter</code> objects by <code>Zlib::GzipWriter#close</code> etc.  Otherwise, <code>GzipWriter</code> will be not able to write the gzip footer and will generate a broken gzip file.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(io, level = nil, strategy = nil, options = {})  </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a <code>GzipWriter</code> object associated with <code>io</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename, level = nil, strategy = nil) {|gz| ... } </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens a file specified by <code>filename</code> for writing gzip compressed data, and returns a <code>GzipWriter</code> object associated with that file.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="GzipFile.html" title="Zlib::GzipFile (class)"><code>GzipFile</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#wrap-class_method" title="Zlib::GzipFile.wrap (method)">.wrap</a></td>
      <td><div class='inline'><p>Creates a <a href="GzipReader.html" title="Zlib::GzipReader (class)"><code>GzipReader</code></a> or <code>GzipWriter</code> associated with <code>io</code>, passing in any necessary extra options, and executes the block with the newly created object just like <code>File.open</code>.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature wo'>
      <a href="#comment=-instance_method" title="#comment= (instance method)">#<strong>comment=</strong>(str)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Specify the comment (<code>str</code>) in the gzip header.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#mtime=-instance_method" title="#mtime= (instance method)">#<strong>mtime=</strong>(mtime)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Specify the modification time (<code>mtime</code>) in the gzip header.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#orig_name=-instance_method" title="#orig_name= (instance method)">#<strong>orig_name=</strong>(str)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Specify the original name (<code>str</code>) in the gzip header.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="GzipFile.html" title="Zlib::GzipFile (class)"><code>GzipFile</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ro' href="GzipFile.html#closed%3F-instance_method" title="Zlib::GzipFile#closed? (method)">#closed?</a></td>
      <td><div class='inline'><p>Same as <code>IO#closed?</code></p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="GzipFile.html#sync-instance_method" title="Zlib::GzipFile#sync (method)">#sync</a></td>
      <td><div class='inline'><p>Same as <code>IO#sync</code></p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="GzipFile.html#sync=-instance_method" title="Zlib::GzipFile#sync= (method)">#sync=</a></td>
      <td><div class='inline'><p>Same as IO.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>(flush = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Flushes all the internal buffers of the <code>GzipWriter</code> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pos-instance_method" title="#pos (instance method)">#<strong>pos</strong>  </a>
      (also: #tell)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Total number of input bytes read so far.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#print-instance_method" title="#print (instance method)">#<strong>print</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as IO.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#printf-instance_method" title="#printf (instance method)">#<strong>printf</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as IO.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#putc-instance_method" title="#putc (instance method)">#<strong>putc</strong>(ch)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as IO.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#puts-instance_method" title="#puts (instance method)">#<strong>puts</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as IO.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tell-instance_method" title="#tell (instance method)">#<strong>tell</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#pos-instance_method" title="Zlib::GzipWriter#pos (method)">#pos</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(*args)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as IO.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="GzipFile.html" title="Zlib::GzipFile (class)"><code>GzipFile</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#close-instance_method" title="Zlib::GzipFile#close (method)">#close</a></td>
      <td><div class='inline'><p>Closes the <a href="GzipFile.html" title="Zlib::GzipFile (class)"><code>GzipFile</code></a> object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#comment-instance_method" title="Zlib::GzipFile#comment (method)">#comment</a></td>
      <td><div class='inline'><p>Returns comments recorded in the gzip file header, or nil if the comments is not present.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#crc-instance_method" title="Zlib::GzipFile#crc (method)">#crc</a></td>
      <td><div class='inline'><p>Returns CRC value of the uncompressed data.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#finish-instance_method" title="Zlib::GzipFile#finish (method)">#finish</a></td>
      <td><div class='inline'><p>Closes the <a href="GzipFile.html" title="Zlib::GzipFile (class)"><code>GzipFile</code></a> object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#level-instance_method" title="Zlib::GzipFile#level (method)">#level</a></td>
      <td><div class='inline'><p>Returns compression level.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#mtime-instance_method" title="Zlib::GzipFile#mtime (method)">#mtime</a></td>
      <td><div class='inline'><p>Returns last modification time recorded in the gzip file header.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#orig_name-instance_method" title="Zlib::GzipFile#orig_name (method)">#orig_name</a></td>
      <td><div class='inline'><p>Returns original filename recorded in the gzip file header, or <code>nil</code> if original filename is not present.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#os_code-instance_method" title="Zlib::GzipFile#os_code (method)">#os_code</a></td>
      <td><div class='inline'><p>Returns OS code number recorded in the gzip file header.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="GzipFile.html#to_io-instance_method" title="Zlib::GzipFile#to_io (method)">#to_io</a></td>
      <td><div class='inline'><p>Same as IO.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(io, level = nil, strategy = nil, options = {})    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a <code>GzipWriter</code> object associated with <code>io</code>. <code>level</code> and <code>strategy</code> should be the same as the arguments of <a href="Deflate.html#new-class_method" title="Zlib::Deflate.new (method)">Deflate.new</a>.  The GzipWriter object writes gzipped data to <code>io</code>.  <code>io</code> must respond to the <a href="#write-instance_method" title="Zlib::GzipWriter#write (method)">#write</a> method that behaves the same as <code>IO#write</code>.</p>

<p>The <code>options</code> hash may be used to set the encoding of the data. <code>:external_encoding</code>, <code>:internal_encoding</code> and <code>:encoding</code> may be set as in <code>IO.new</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3758-L3790'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3758' data-end='3790'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3758</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_initialize(int argc, VALUE *argv, VALUE obj)
{
    struct gzfile *gz;
    VALUE io, level, strategy, opt = Qnil;
    int err;

    if (argc &gt; 1) {
	opt = rb_check_convert_type(argv[argc-1], T_HASH, &quot;Hash&quot;, &quot;to_hash&quot;);
	if (!NIL_P(opt)) argc--;
    }

    rb_scan_args(argc, argv, &quot;12&quot;, &amp;io, &amp;level, &amp;strategy);
    TypedData_Get_Struct(obj, struct gzfile, &amp;gzfile_data_type, gz);

    /* this is undocumented feature of zlib */
    gz-&gt;level = ARG_LEVEL(level);
    err = deflateInit2(&amp;gz-&gt;z.stream, gz-&gt;level, Z_DEFLATED,
		       -MAX_WBITS, DEF_MEM_LEVEL, ARG_STRATEGY(strategy));
    if (err != Z_OK) {
	raise_zlib_error(err, gz-&gt;z.stream.msg);
    }
    gz-&gt;io = io;
    ZSTREAM_READY(&amp;gz-&gt;z);
    rb_gzfile_ecopts(gz, opt);

    if (rb_respond_to(io, id_path)) {
	/* File#path may raise IOError in case when a path is unavailable */
	rb_rescue2(gzfile_initialize_path_partial, obj, NULL, Qnil, rb_eIOError, (VALUE)0);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="open-class_method">
  <h3 class='signature  first'>
    .<strong>open</strong>(filename, level = nil, strategy = nil) {|gz| ... }   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens a file specified by <code>filename</code> for writing gzip compressed data, and returns a <code>GzipWriter</code> object associated with that file.  Further details of this method are found in <a href="#new-class_method" title="Zlib::GzipWriter.new (method)">.new</a> and <a href="GzipFile.html#wrap-class_method" title="Zlib::GzipFile.wrap (method)">GzipFile.wrap</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3739-L3743'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3739' data-end='3743'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3739</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_s_open(int argc, VALUE *argv, VALUE klass)
{
    return gzfile_s_open(argc, argv, klass, &quot;wb&quot;);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="comment=-instance_method">
  <h3 class='signature wo first'>
    #<strong>comment=</strong>(str)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Specify the comment (<code>str</code>) in the gzip header.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3499-L3516'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3499' data-end='3516'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3499</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_set_comment(VALUE obj, VALUE str)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE s;
    char *p;

    if (gz-&gt;z.flags &amp; GZFILE_FLAG_HEADER_FINISHED) {
	rb_raise(cGzError, &quot;header is already written&quot;);
    }
    s = rb_str_dup(rb_str_to_str(str));
    p = memchr(RSTRING_PTR(s), &#39;\0&#39;, RSTRING_LEN(s));
    if (p) {
	rb_str_resize(s, p - RSTRING_PTR(s));
    }
    gz-&gt;comment = s;
    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mtime=-instance_method">
  <h3 class='signature wo'>
    #<strong>mtime=</strong>(mtime)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Specify the modification time (<code>mtime</code>) in the gzip header. Using an Integer.</p>

<p>Setting the mtime in the gzip header does not effect the mtime of the file generated. Different utilities that expand the gzipped files may use the mtime header. For example the gunzip utility can use the <code>-N</code> flag which will set the resultant file’s mtime to the value in the header. By default many tools will set the mtime of the expanded file to the mtime of the gzipped file, not the mtime in the header.</p>

<p>If you do not set an mtime, the default value will be the time when compression started. Setting a value of 0 indicates no time stamp is available.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3453-L3468'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3453' data-end='3468'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3453</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_set_mtime(VALUE obj, VALUE mtime)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE val;

    if (gz-&gt;z.flags &amp; GZFILE_FLAG_HEADER_FINISHED) {
	rb_raise(cGzError, &quot;header is already written&quot;);
    }

    val = rb_Integer(mtime);
    gz-&gt;mtime = NUM2UINT(val);
    gz-&gt;z.flags |= GZFILE_FLAG_MTIME_IS_SET;

    return mtime;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="orig_name=-instance_method">
  <h3 class='signature wo'>
    #<strong>orig_name=</strong>(str)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Specify the original name (<code>str</code>) in the gzip header.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3475-L3492'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3475' data-end='3492'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3475</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_set_orig_name(VALUE obj, VALUE str)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE s;
    char *p;

    if (gz-&gt;z.flags &amp; GZFILE_FLAG_HEADER_FINISHED) {
	rb_raise(cGzError, &quot;header is already written&quot;);
    }
    s = rb_str_dup(rb_str_to_str(str));
    p = memchr(RSTRING_PTR(s), &#39;\0&#39;, RSTRING_LEN(s));
    if (p) {
	rb_str_resize(s, p - RSTRING_PTR(s));
    }
    gz-&gt;orig_name = s;
    return str;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>  
  </h3>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L4955'>GitHub</a> ]</span>

</section>

<section class='method_details' id="flush-instance_method">
  <h3 class='signature '>
    #<strong>flush</strong>(flush = nil)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Flushes all the internal buffers of the <code>GzipWriter</code> object.  The meaning of <code>flush</code> is same as in <a href="Deflate.html#deflate-instance_method" title="Zlib::Deflate#deflate (method)">Deflate#deflate</a>.  <a href="../Zlib.html#SYNC_FLUSH-constant" title="Zlib::SYNC_FLUSH (constant)">SYNC_FLUSH</a> is used if <code>flush</code> is omitted.  It is no use giving flush <a href="../Zlib.html#NO_FLUSH-constant" title="Zlib::NO_FLUSH (constant)">NO_FLUSH</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3799-L3818'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3799' data-end='3818'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3799</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_flush(int argc, VALUE *argv, VALUE obj)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE v_flush;
    int flush;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;v_flush);

    flush = FIXNUMARG(v_flush, Z_SYNC_FLUSH);
    if (flush != Z_NO_FLUSH) {  /* prevent Z_BUF_ERROR */
	zstream_run(&amp;gz-&gt;z, (Bytef*)&quot;&quot;, 0, flush);
    }

    gzfile_write_raw(gz);
    if (rb_respond_to(gz-&gt;io, id_flush)) {
	rb_funcall(gz-&gt;io, id_flush, 0);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pos-instance_method">
  <h3 class='signature '>
    #<strong>pos</strong>  
    <span class='aliases'>Also known as: <span class='names'>#tell</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Total number of input bytes read so far.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3626-L3630'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3626' data-end='3630'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3626</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_total_in(VALUE obj)
{
    return rb_uint2inum(get_gzfile(obj)-&gt;z.stream.total_in);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="print-instance_method">
  <h3 class='signature '>
    #<strong>print</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Same as IO.</p>

  </div>
</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L4957'>GitHub</a> ]</span>

</section>

<section class='method_details' id="printf-instance_method">
  <h3 class='signature '>
    #<strong>printf</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Same as IO.</p>

  </div>
</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L4956'>GitHub</a> ]</span>

</section>

<section class='method_details' id="putc-instance_method">
  <h3 class='signature '>
    #<strong>putc</strong>(ch)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Same as IO.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3846-L3854'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3846' data-end='3854'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3846</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_putc(VALUE obj, VALUE ch)
{
    struct gzfile *gz = get_gzfile(obj);
    char c = NUM2CHR(ch);

    gzfile_write(gz, (Bytef*)&amp;c, 1);
    return ch;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="puts-instance_method">
  <h3 class='signature '>
    #<strong>puts</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Same as IO.</p>

  </div>
</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L4958'>GitHub</a> ]</span>

</section>

<section class='method_details' id="tell-instance_method">
  <h3 class='signature '>
    #<strong>tell</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#pos-instance_method" title="Zlib::GzipWriter#pos (method)">#pos</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="write-instance_method">
  <h3 class='signature '>
    #<strong>write</strong>(*args)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Same as IO.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_4_6/ext/zlib/zlib.c#L3823-L3841'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3823' data-end='3841'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3823</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_write(int argc, VALUE *argv, VALUE obj)
{
    struct gzfile *gz = get_gzfile(obj);
    size_t total = 0;

    while (argc-- &gt; 0) {
	VALUE str = *argv++;
	if (!RB_TYPE_P(str, T_STRING))
	    str = rb_obj_as_string(str);
	if (gz-&gt;enc2 &amp;&amp; gz-&gt;enc2 != rb_ascii8bit_encoding()) {
	    str = rb_str_conv_enc(str, rb_enc_get(str), gz-&gt;enc2);
	}
	gzfile_write(gz, (Bytef*)RSTRING_PTR(str), RSTRING_LEN(str));
	total += RSTRING_LEN(str);
	RB_GC_GUARD(str);
    }
    return SIZET2NUM(total);
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>