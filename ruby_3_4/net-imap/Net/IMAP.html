<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Net::IMAP &mdash; net-imap  Ruby-3.4.7 p58</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Net::IMAP",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.4.7</a> &raquo; 
      <a href='../'>net-imap</a> &raquo; 
      <a href='../_index.html#alpha_I'>Index (I)</a> &raquo; 
        <a href="../Net.html" title="Net (module)">Net</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>IMAP&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Net::IMAP</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="IMAP/Authenticators.html" title="Net::IMAP::Authenticators (module)"><code>Authenticators</code></a>,
        <a href="IMAP/BodyStructure.html" title="Net::IMAP::BodyStructure (module)"><code>BodyStructure</code></a>,
        <a href="IMAP/DeprecatedClientOptions.html" title="Net::IMAP::DeprecatedClientOptions (module)"><code>DeprecatedClientOptions</code></a>,
        <a href="IMAP/NumValidator.html" title="Net::IMAP::NumValidator (module)"><code>NumValidator</code></a>,
        <a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)"><code>SASL</code></a>,
        <a href="IMAP/StringFormatter.html" title="Net::IMAP::StringFormatter (module)"><code>StringFormatter</code></a>,
        <a href="IMAP/StringPrep.html" title="Net::IMAP::StringPrep (module)"><code>StringPrep</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="IMAP/Address.html" title="Net::IMAP::Address (class)"><code>Address</code></a>,
        <a href="IMAP/AppendUIDData.html" title="Net::IMAP::AppendUIDData (class)"><code>AppendUIDData</code></a>,
        <a class='nodoc' href="IMAP/Atom.html" title="Net::IMAP::Atom (class)"><code>Atom</code></a>,
        <a href="IMAP/BodyTypeBasic.html" title="Net::IMAP::BodyTypeBasic (class)"><code>BodyTypeBasic</code></a>,
        <a href="IMAP/BodyTypeMessage.html" title="Net::IMAP::BodyTypeMessage (class)"><code>BodyTypeMessage</code></a>,
        <a href="IMAP/BodyTypeMultipart.html" title="Net::IMAP::BodyTypeMultipart (class)"><code>BodyTypeMultipart</code></a>,
        <a href="IMAP/BodyTypeText.html" title="Net::IMAP::BodyTypeText (class)"><code>BodyTypeText</code></a>,
        <a class='nodoc' href="IMAP/ClientID.html" title="Net::IMAP::ClientID (class)"><code>ClientID</code></a>,
        <a href="IMAP/Config.html" title="Net::IMAP::Config (class)"><code>Config</code></a>,
        <a class='nodoc' href="IMAP/ConnectionState.html" title="Net::IMAP::ConnectionState (class)"><code>ConnectionState</code></a>,
        <a href="IMAP/ContentDisposition.html" title="Net::IMAP::ContentDisposition (class)"><code>ContentDisposition</code></a>,
        <a href="IMAP/ContinuationRequest.html" title="Net::IMAP::ContinuationRequest (class)"><code>ContinuationRequest</code></a>,
        <a href="IMAP/CopyUIDData.html" title="Net::IMAP::CopyUIDData (class)"><code>CopyUIDData</code></a>,
        <a href="IMAP/DataLite.html" title="Net::IMAP::DataLite (class)"><code>DataLite</code></a>,
        <a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)"><code>ESearchResult</code></a>,
        <a href="IMAP/Envelope.html" title="Net::IMAP::Envelope (class)"><code>Envelope</code></a>,
        <a href="IMAP/ExtensionData.html" title="Net::IMAP::ExtensionData (class)"><code>ExtensionData</code></a>,
        <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)"><code>FetchData</code></a>,
        <a href="IMAP/FetchStruct.html" title="Net::IMAP::FetchStruct (class)"><code>FetchStruct</code></a>,
        <a href="IMAP/IgnoredResponse.html" title="Net::IMAP::IgnoredResponse (class)"><code>IgnoredResponse</code></a>,
        <a class='nodoc' href="IMAP/Literal.html" title="Net::IMAP::Literal (class)"><code>Literal</code></a>,
        <a href="IMAP/MailboxACLItem.html" title="Net::IMAP::MailboxACLItem (class)"><code>MailboxACLItem</code></a>,
        <a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)"><code>MailboxList</code></a>,
        <a href="IMAP/MailboxQuota.html" title="Net::IMAP::MailboxQuota (class)"><code>MailboxQuota</code></a>,
        <a href="IMAP/MailboxQuotaRoot.html" title="Net::IMAP::MailboxQuotaRoot (class)"><code>MailboxQuotaRoot</code></a>,
        <a class='nodoc' href="IMAP/MessageSet.html" title="Net::IMAP::MessageSet (class)"><code>MessageSet</code></a>,
        <a href="IMAP/Namespace.html" title="Net::IMAP::Namespace (class)"><code>Namespace</code></a>,
        <a href="IMAP/Namespaces.html" title="Net::IMAP::Namespaces (class)"><code>Namespaces</code></a>,
        <a class='nodoc' href="IMAP/PartialRange.html" title="Net::IMAP::PartialRange (class)"><code>PartialRange</code></a>,
        <a class='nodoc' href="IMAP/QuotedString.html" title="Net::IMAP::QuotedString (class)"><code>QuotedString</code></a>,
        <a class='nodoc' href="IMAP/RawData.html" title="Net::IMAP::RawData (class)"><code>RawData</code></a>,
        <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>ResponseCode</code></a>,
        <a href="IMAP/ResponseParser.html" title="Net::IMAP::ResponseParser (class)"><code>ResponseParser</code></a>,
        <a class='nodoc' href="IMAP/ResponseReader.html" title="Net::IMAP::ResponseReader (class)"><code>ResponseReader</code></a>,
        <a href="IMAP/ResponseText.html" title="Net::IMAP::ResponseText (class)"><code>ResponseText</code></a>,
        <a href="IMAP/SASLAdapter.html" title="Net::IMAP::SASLAdapter (class)"><code>SASLAdapter</code></a>,
        <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>SearchResult</code></a>,
        <a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)"><code>SequenceSet</code></a>,
        <a href="IMAP/StatusData.html" title="Net::IMAP::StatusData (class)"><code>StatusData</code></a>,
        <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>TaggedResponse</code></a>,
        <a href="IMAP/ThreadMember.html" title="Net::IMAP::ThreadMember (class)"><code>ThreadMember</code></a>,
        <a href="IMAP/UIDFetchData.html" title="Net::IMAP::UIDFetchData (class)"><code>UIDFetchData</code></a>,
        <a href="IMAP/UIDPlusData.html" title="Net::IMAP::UIDPlusData (class)"><code>UIDPlusData</code></a>,
        <a href="IMAP/UnparsedData.html" title="Net::IMAP::UnparsedData (class)"><code>UnparsedData</code></a>,
        <a href="IMAP/UnparsedNumericResponseData.html" title="Net::IMAP::UnparsedNumericResponseData (class)"><code>UnparsedNumericResponseData</code></a>,
        <a href="IMAP/UntaggedResponse.html" title="Net::IMAP::UntaggedResponse (class)"><code>UntaggedResponse</code></a>,
        <a href="IMAP/VanishedData.html" title="Net::IMAP::VanishedData (class)"><code>VanishedData</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="IMAP/BadResponseError.html" title="Net::IMAP::BadResponseError (class)"><code>BadResponseError</code></a>,
        <a href="IMAP/ByeResponseError.html" title="Net::IMAP::ByeResponseError (class)"><code>ByeResponseError</code></a>,
        <a href="IMAP/DataFormatError.html" title="Net::IMAP::DataFormatError (class)"><code>DataFormatError</code></a>,
        <a href="IMAP/Error.html" title="Net::IMAP::Error (class)"><code>Error</code></a>,
        <a href="IMAP/InvalidResponseError.html" title="Net::IMAP::InvalidResponseError (class)"><code>InvalidResponseError</code></a>,
        <a href="IMAP/LoginDisabledError.html" title="Net::IMAP::LoginDisabledError (class)"><code>LoginDisabledError</code></a>,
        <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>NoResponseError</code></a>,
        <a href="IMAP/ResponseError.html" title="Net::IMAP::ResponseError (class)"><code>ResponseError</code></a>,
        <a href="IMAP/ResponseParseError.html" title="Net::IMAP::ResponseParseError (class)"><code>ResponseParseError</code></a>,
        <a href="IMAP/ResponseReadError.html" title="Net::IMAP::ResponseReadError (class)"><code>ResponseReadError</code></a>,
        <a href="IMAP/ResponseTooLargeError.html" title="Net::IMAP::ResponseTooLargeError (class)"><code>ResponseTooLargeError</code></a>,
        <a href="IMAP/UnknownResponseError.html" title="Net::IMAP::UnknownResponseError (class)"><code>UnknownResponseError</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Protocol
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          SSL,
          OpenSSL,
          MonitorMixin,
          Protocol
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Protocol</span>
        <ul class='fullTree'>
          <li>Object</li>
          <li class='next'>Protocol</li>
          <li class='next'>Net::IMAP</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L790'>lib/net/imap.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/authenticators.rb#L31'>lib/net/imap/authenticators.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L9'>lib/net/imap/command_data.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/config.rb#L8'>lib/net/imap/config.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/connection_state.rb#L4'>lib/net/imap/connection_state.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L9'>lib/net/imap/data_encoding.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_lite.rb#L45'>lib/net/imap/data_lite.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_lite.rb#L29'>lib/net/imap/data_lite.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/deprecated_client_options.rb#L4'>lib/net/imap/deprecated_client_options.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/errors.rb#L4'>lib/net/imap/errors.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/esearch_result.rb#L4'>lib/net/imap/esearch_result.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/fetch_data.rb#L4'>lib/net/imap/fetch_data.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L4'>lib/net/imap/flags.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/response_data.rb#L4'>lib/net/imap/response_data.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/response_parser.rb#L7'>lib/net/imap/response_parser.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/response_reader.rb#L4'>lib/net/imap/response_reader.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl.rb#L4'>lib/net/imap/sasl.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl_adapter.rb#L4'>lib/net/imap/sasl_adapter.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/search_result.rb#L4'>lib/net/imap/search_result.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sequence_set.rb#L6'>lib/net/imap/sequence_set.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/stringprep.rb#L4'>lib/net/imap/stringprep.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/uidplus_data.rb#L4'>lib/net/imap/uidplus_data.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/vanished_data.rb#L4'>lib/net/imap/vanished_data.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/config/attr_accessors.rb#L6'>lib/net/imap/config/attr_accessors.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/config/attr_inheritance.rb#L4'>lib/net/imap/config/attr_inheritance.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/config/attr_type_coercion.rb#L4'>lib/net/imap/config/attr_type_coercion.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/response_parser/parser_utils.rb#L4'>lib/net/imap/response_parser/parser_utils.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/anonymous_authenticator.rb#L4'>lib/net/imap/sasl/anonymous_authenticator.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/authentication_exchange.rb#L4'>lib/net/imap/sasl/authentication_exchange.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/client_adapter.rb#L6'>lib/net/imap/sasl/client_adapter.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/external_authenticator.rb#L4'>lib/net/imap/sasl/external_authenticator.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/gs2_header.rb#L4'>lib/net/imap/sasl/gs2_header.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/oauthbearer_authenticator.rb#L6'>lib/net/imap/sasl/oauthbearer_authenticator.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/protocol_adapters.rb#L4'>lib/net/imap/sasl/protocol_adapters.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/scram_algorithm.rb#L4'>lib/net/imap/sasl/scram_algorithm.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/sasl/scram_authenticator.rb#L10'>lib/net/imap/sasl/scram_authenticator.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/stringprep/nameprep.rb#L4'>lib/net/imap/stringprep/nameprep.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/stringprep/saslprep.rb#L4'>lib/net/imap/stringprep/saslprep.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/stringprep/trace.rb#L4'>lib/net/imap/stringprep/trace.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>IMAP</code> implements Internet Message Access Protocol (IMAP) client functionality.  The protocol is described in <a href="https://www.rfc-editor.org/rfc/rfc3501" target="_parent" title="IMAP4rev1 [RFC3501]">IMAP4rev1 [RFC3501]</a> and <a href="https://www.rfc-editor.org/rfc/rfc9051" target="_parent" title="IMAP4rev2 [RFC9051]">IMAP4rev2 [RFC9051]</a>.</p>

<h3 id="label-IMAP+Overview">IMAP Overview</h3>

<p>An IMAP client connects to a server, and then authenticates itself using either <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> or <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>.  Having authenticated itself, there is a range of commands available to it.  Most work with mailboxes, which may be arranged in an hierarchical namespace, and each of which contains zero or more messages.  How this is implemented on the server is implementation-dependent; on a UNIX server, it will frequently be implemented as files in mailbox format within a hierarchy of directories.</p>

<p>To work on the messages within a mailbox, the client must first select that mailbox, using either <a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a> or <a href="#examine-instance_method" title="Net::IMAP#examine (method)">#examine</a> (for read-only access).  Once the client has successfully selected a mailbox, they enter the <code>selected</code> state, and that mailbox becomes the <em>current</em> mailbox, on which mail-item related commands implicitly operate.</p>

<h4 id="label-Connection+state">Connection state</h4>

<p>Once an <code>IMAP</code> connection is established, the connection is in one of four states: <code>not authenticated</code>, <code>authenticated</code>, <code>selected</code>, and <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>.  Most commands are valid only in certain states.</p>

<p>See <a href="#connection_state-instance_method" title="Net::IMAP#connection_state (method)">#connection_state</a>.</p>

<h4 id="label-Sequence+numbers+and+UIDs">Sequence numbers and UIDs</h4>

<p>Messages have two sorts of identifiers: message sequence numbers and UIDs.</p>

<p>Message sequence numbers number messages within a mailbox from 1 up to the number of items in the mailbox.  If a new message arrives during a session, it receives a sequence number equal to the new size of the mailbox.  If messages are expunged from the mailbox, remaining messages have their sequence numbers “shuffled down” to fill the gaps.</p>

<p>To avoid sequence number race conditions, servers must not expunge messages when no command is in progress, nor when responding to <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>, <a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a>, or <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>.  Expunges <em>may</em> be sent during any other command, including <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a>, <a href="#uid_store-instance_method" title="Net::IMAP#uid_store (method)">#uid_store</a>, and <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>.  The <a href="#noop-instance_method" title="Net::IMAP#noop (method)">#noop</a> and <a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a> commands are both useful for this side-effect: they allow the server to send all mailbox updates, including expunges.</p>

<p>UIDs, on the other hand, are permanently guaranteed not to identify another message within the same mailbox, even if the existing message is deleted.  UIDs are required to be assigned in ascending (but not necessarily sequential) order within a mailbox; this means that if a non-IMAP client rearranges the order of mail items within a mailbox, the UIDs have to be reassigned.  An IMAP client thus cannot rearrange message orders.</p>

<h4 id="label-Examples+of+Usage">Examples of Usage</h4>

<h5 id="label-List+sender+and+subject+of+all+recent+messages+in+the+default+mailbox">List sender and subject of all recent messages in the default mailbox</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'><a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">authenticate</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>joe_user</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>joes_password</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_examine'><a href="#examine-instance_method" title="Net::IMAP#examine (method)">examine</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INBOX</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'><a href="#search-instance_method" title="Net::IMAP#search (method)">search</a></span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RECENT</span><span class='tstring_end'>&quot;</span></span>]).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_message_id'>message_id</span><span class='op'>|</span>
  <span class='id identifier rubyid_envelope'>envelope</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_fetch'><a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">fetch</a></span>(<span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ENVELOPE</span><span class='tstring_end'>&quot;</span></span>)[<span class='int'>0</span>].<span class='id identifier rubyid_attr'>attr</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ENVELOPE</span><span class='tstring_end'>&quot;</span></span>]
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_envelope'>envelope</span>.<span class='id identifier rubyid_from'>from</span>[<span class='int'>0</span>].<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: \t</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_envelope'>envelope</span>.<span class='id identifier rubyid_subject'>subject</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<h5 id="label-Move+all+messages+from+April+2003+from+-22Mail-2Fsent-mail-22+to+-22Mail-2Fsent-apr03-22">Move all messages from April 2003 from “Mail/sent-mail” to “Mail/sent-apr03”</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'><a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">authenticate</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>joe_user</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>joes_password</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_select'><a href="#select-instance_method" title="Net::IMAP#select (method)">select</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mail/sent-mail</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_list'><a href="#list-instance_method" title="Net::IMAP#list (method)">list</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mail/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sent-apr03</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mail/sent-apr03</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'><a href="#search-instance_method" title="Net::IMAP#search (method)">search</a></span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BEFORE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>30-Apr-2003</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SINCE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1-Apr-2003</span><span class='tstring_end'>&quot;</span></span>]).<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_message_id'>message_id</span><span class='op'>|</span>
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_copy'><a href="#copy-instance_method" title="Net::IMAP#copy (method)">copy</a></span>(<span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mail/sent-apr03</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_store'><a href="#store-instance_method" title="Net::IMAP#store (method)">store</a></span>(<span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+FLAGS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='const'>Deleted</span>])
<span class='kw'>end</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_expunge'><a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">expunge</a></span></code></pre>

<h3 id="label-Capabilities">Capabilities</h3>

<p>Most <code>IMAP</code> methods do not <em>currently</em> modify their behaviour according to the server’s advertised <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>.  Users of this class must check that the server is capable of extension commands or command arguments before sending them.  Special care should be taken to follow the <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> requirements for <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>, <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>, and <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>.</p>

<p>See <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>, <a href="#auth_mechanisms-instance_method" title="Net::IMAP#auth_mechanisms (method)">#auth_mechanisms</a> to discover server capabilities.  For relevant capability requirements, see the documentation on each IMAP command.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>(<span class='symbeg'>:</span><span class='const'>IMAP4rev1</span>) <span class='kw'>or</span> <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Not an IMAP4rev1 server</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_starttls'><a href="IMAP/DeprecatedClientOptions.html#starttls-instance_method" title="Net::IMAP::DeprecatedClientOptions#starttls (method)">starttls</a></span>)  <span class='kw'>or</span> <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot start TLS</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_starttls'><a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">starttls</a></span>

<span class='kw'>if</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_capable?'><a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">auth_capable?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'><a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">authenticate</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span>
<span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capability?'><a href="#capability%3F-instance_method" title="Net::IMAP#capability? (method)">capability?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGINDISABLED</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_login'><a href="#login-instance_method" title="Net::IMAP#login (method)">login</a></span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span>
<span class='kw'>else</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No acceptable authentication mechanisms</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># Support for &quot;UTF8=ACCEPT&quot; implies support for &quot;ENABLE&quot;
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_enable'><a href="#enable-instance_method" title="Net::IMAP#enable (method)">enable</a></span> <span class='symbeg'>:</span><span class='id identifier rubyid_utf8'>utf8</span> <span class='kw'>if</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF8=ACCEPT</span><span class='tstring_end'>&quot;</span></span>)

<span class='id identifier rubyid_namespaces'>namespaces</span>  <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="Net::IMAP#namespace (method)">namespace</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_namespace'><a href="#namespace-instance_method" title="Net::IMAP#namespace (method)">namespace</a></span>)
<span class='id identifier rubyid_mbox_prefix'>mbox_prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_namespaces'>namespaces</span><span class='op'>&amp;.</span><span class='id identifier rubyid_personal'>personal</span><span class='op'>&amp;.</span><span class='id identifier rubyid_first'>first</span><span class='op'>&amp;.</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_mbox_delim'>mbox_delim</span>  <span class='op'>=</span> <span class='id identifier rubyid_namespaces'>namespaces</span><span class='op'>&amp;.</span><span class='id identifier rubyid_personal'>personal</span><span class='op'>&amp;.</span><span class='id identifier rubyid_first'>first</span><span class='op'>&amp;.</span><span class='id identifier rubyid_delim'>delim</span>  <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_mbox_path'>mbox_path</span>   <span class='op'>=</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>path</span><span class='words_sep'> </span><span class='tstring_content'>to</span><span class='words_sep'> </span><span class='tstring_content'>my</span><span class='words_sep'> </span><span class='tstring_content'>mailbox</span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_delim'>delim</span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span> <span class='id identifier rubyid_mbox_path'>mbox_path</span></code></pre>

<h4 id="label-Basic+IMAP4rev1+capabilities">Basic IMAP4rev1 capabilities</h4>

<p>IMAP4rev1 servers must advertise <code>IMAP4rev1</code> in their capabilities list. IMAP4rev1 servers must <em>implement</em> the <code>STARTTLS</code>, <code>AUTH=PLAIN</code>, and <code>LOGINDISABLED</code> capabilities.  See <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>, <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>, and <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> for the implications of these capabilities.</p>

<h4 id="label-Caching+-7BCAPABILITY-7D+responses">Caching <code>CAPABILITY</code> responses</h4>

<p><code>IMAP</code> automatically stores and discards capability data according to the the requirements and recommendations in <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.1.1" target="_parent" title="IMAP4rev2 §6.1.1">IMAP4rev2 §6.1.1</a>, <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.2" target="_parent" title="§6.2">§6.2</a>, and <a href="https://www.rfc-editor.org/rfc/rfc9051#section-7.1" target="_parent" title="§7.1">§7.1</a>. Use <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, or <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> to use this cache and avoid sending the <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a> command unnecessarily.</p>

<p>The server may advertise its initial capabilities using the <code>CAPABILITY</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>ResponseCode</code></a> in a <code>PREAUTH</code> or <code>OK</code> <a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">#greeting</a>.  When TLS has started (#starttls) and after authentication (#login or <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>), the server’s capabilities may change and cached capabilities are discarded.  The server may send updated capabilities with an <code>OK</code> <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>TaggedResponse</code></a> to <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a> or <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>, and these will be cached by <code>IMAP</code>.  But the <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>TaggedResponse</code></a> to <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a> MUST be ignored–it is sent before TLS starts and is unprotected.</p>

<p>When storing capability values to variables, be careful that they are discarded or reset appropriately, especially following <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>.</p>

<h4 id="label-Using+IMAP4rev1+extensions">Using IMAP4rev1 extensions</h4>

<p>See the <a href="http://www.iana.org/assignments/imap4-capabilities">IANA IMAP4 capabilities registry</a> for a list of all standard capabilities, and their reference RFCs.</p>

<p>IMAP4rev1 servers must not activate behavior that is incompatible with the base specification until an explicit client action invokes a capability, e.g. sending a command or command argument specific to that capability. Servers may send data with backward compatible behavior, such as response codes or mailbox attributes, at any time without client action.</p>

<p>Invoking capabilities which are unknown to <code>IMAP</code> may cause unexpected behavior and errors.  For example, <a href="IMAP/ResponseParseError.html" title="Net::IMAP::ResponseParseError (class)"><code>ResponseParseError</code></a> is raised when unknown response syntax is received.  Invoking commands or command parameters that are unsupported by the server may raise <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>NoResponseError</code></a>, <a href="IMAP/BadResponseError.html" title="Net::IMAP::BadResponseError (class)"><code>BadResponseError</code></a>, or cause other unexpected behavior.</p>

<p>Some capabilities must be explicitly activated using the <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a> command. See <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a> for details.</p>

<h3 id="label-Thread+Safety">Thread Safety</h3>

<p><code>IMAP</code> supports concurrent threads. For example,</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>imap.foo.net</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>imap2</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'><a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">authenticate</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>scram-md5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>password</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_select'><a href="#select-instance_method" title="Net::IMAP#select (method)">select</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_fetch_thread'>fetch_thread</span> <span class='op'>=</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_start'>start</span> { <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_fetch'><a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">fetch</a></span>(<span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span>) }
<span class='id identifier rubyid_search_result'>search_result</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'><a href="#search-instance_method" title="Net::IMAP#search (method)">search</a></span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BODY</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span>])
<span class='id identifier rubyid_fetch_result'>fetch_result</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch_thread'>fetch_thread</span>.<span class='id identifier rubyid_value'>value</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_disconnect'><a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">disconnect</a></span></code></pre>

<p>This script invokes the FETCH command and the SEARCH command concurrently.</p>

<p>When running multiple commands, care must be taken to avoid ambiguity.  For example, SEARCH responses are ambiguous about which command they are responding to, so search commands should not run simultaneously, unless the server supports <code>ESEARCH</code> <a href="https://rfc-editor.org/rfc/rfc4731" target="_parent" title="[RFC4731]">[RFC4731]</a> or <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a>.  See <a href="https://www.rfc-editor.org/rfc/rfc9051.html#section-5.5">RFC9051 §5.5</a> for other examples of command sequences which should not be pipelined.</p>

<h3 id="label-Unbounded+memory+use">Unbounded memory use</h3>

<p><code>IMAP</code> reads server responses in a separate receiver thread per client. Unhandled response data is saved to <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a>, and response_handlers run inside the receiver thread.  See the list of methods for <a href="rdoc-ref:Net::IMAP@Handling+server+responses">handling server responses</a>, below.</p>

<p>Because the receiver thread continuously reads and saves new responses, some scenarios must be careful to avoid unbounded memory use:</p>
<ul><li>
<p>Commands such as <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> or <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a> can have an enormous number of responses.</p>
</li><li>
<p>Commands such as <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a> can result in an enormous size per response.</p>
</li><li>
<p>Long-lived connections will gradually accumulate unsolicited server responses, especially <code>EXISTS</code>, <code>FETCH</code>, and <code>EXPUNGE</code> responses.</p>
</li><li>
<p>A buggy or untrusted server could send inappropriate responses, which could be very numerous, very large, and very rapid.</p>
</li></ul>

<p>Use paginated or limited versions of commands whenever possible.</p>

<p>Use <code>Config#max_response_size</code> to impose a limit on incoming server responses as they are being read.  <em>This is especially important for untrusted servers.</em></p>

<p>Use <a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">#add_response_handler</a> to handle responses after each one is received. Use the <a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">#response_handlers</a> argument to <a href="#new-class_method" title="Net::IMAP.new (method)">.new</a> to assign response handlers before the receiver thread is started.  Use <a href="#extract_responses-instance_method" title="Net::IMAP#extract_responses (method)">#extract_responses</a>, <a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">#clear_responses</a>, or <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a> (with a block) to prune responses.</p>

<h3 id="label-Errors">Errors</h3>

<p>An IMAP server can send three different types of responses to indicate failure:</p>
<dl class="rdoc-list note-list"><dt>NO</dt>
<dd>
<p>the attempted command could not be successfully completed.  For instance, the username/password used for logging in are incorrect; the selected mailbox does not exist; etc.</p>
</dd><dt>BAD</dt>
<dd>
<p>the request from the client does not follow the server’s understanding of the IMAP protocol.  This includes attempting commands from the wrong client state; for instance, attempting to perform a SEARCH command without having SELECTed a current mailbox.  It can also signal an internal server failure (such as a disk crash) has occurred.</p>
</dd><dt>BYE</dt>
<dd>
<p>the server is saying goodbye.  This can be part of a normal logout sequence, and can be used as part of a login sequence to indicate that the server is (for some reason) unwilling to accept your connection.  As a response to any other command, it indicates either that the server is shutting down, or that the server is timing out the client connection due to inactivity.</p>
</dd></dl>

<p>These three error response are represented by the errors <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>NoResponseError</code></a>, <a href="IMAP/BadResponseError.html" title="Net::IMAP::BadResponseError (class)"><code>BadResponseError</code></a>, and <a href="IMAP/ByeResponseError.html" title="Net::IMAP::ByeResponseError (class)"><code>ByeResponseError</code></a>, all of which are subclasses of <a href="IMAP/ResponseError.html" title="Net::IMAP::ResponseError (class)"><code>ResponseError</code></a>.  Essentially, all methods that involve sending a request to the server can generate one of these errors. Only the most pertinent instances have been documented below.</p>

<p>Because the <code>IMAP</code> class uses Sockets for communication, its methods are also susceptible to the various errors that can occur when working with sockets.  These are generally represented as Errno errors.  For instance, any method that involves sending a request to the server and/or receiving a response from it could raise an <code>Errno::EPIPE</code> error if the network connection unexpectedly goes down.  See the socket(7), ip(7), tcp(7), socket(2), connect(2), and associated man pages.</p>

<p>Finally, a <a href="IMAP/DataFormatError.html" title="Net::IMAP::DataFormatError (class)"><code>DataFormatError</code></a> is thrown if low-level data is found to be in an incorrect format (for instance, when converting between UTF-8 and UTF-16), and <a href="IMAP/ResponseParseError.html" title="Net::IMAP::ResponseParseError (class)"><code>ResponseParseError</code></a> is thrown if a server response is non-parseable.</p>

<h3 id="label-What-27s+here-3F">What’s here?</h3>
<ul><li>
<p><a href="Net::IMAP.html#label-Connection+control+methods" title="Connection control">Connection control</a></p>
</li><li>
<p><a href="Net::IMAP.html#label-Server+capabilities" title="Server capabilities">Server capabilities</a></p>
</li><li>
<p><a href="Net::IMAP.html#label-Handling+server+responses" title="Handling server responses">Handling server responses</a></p>
</li><li>
<p><a href="Net::IMAP.html#label-Core+IMAP+commands" title="Core IMAP commands">Core IMAP commands</a></p>
<ul><li>
<p><a href="Net::IMAP.html#label-Any+state" title="for any state">for any state</a></p>
</li><li>
<p><a href="Net::IMAP.html#label-Not+Authenticated+state" title="for the “not authenticated” state">for the “not authenticated” state</a></p>
</li><li>
<p><a href="Net::IMAP.html#label-Authenticated+state" title="for the “authenticated” state">for the “authenticated” state</a></p>
</li><li>
<p><a href="Net::IMAP.html#label-Selected+state" title="for the “selected” state">for the “selected” state</a></p>
</li><li>
<p><a href="Net::IMAP.html#label-Logout+state" title="for the “logout” state">for the “logout” state</a></p>
</li></ul>
</li><li>
<p><a href="Net::IMAP.html#label-IMAP+extension+support" title="&lt;code&gt;IMAP&lt;/code&gt; extension support"><code>IMAP</code> extension support</a></p>
</li></ul>

<h4 id="label-Connection+control+methods">Connection control methods</h4>
<ul><li>
<p><a href="#new-class_method" title="Net::IMAP.new (method)">.new</a>: Creates a new IMAP client which connects immediately and waits for a successful server greeting before the method returns.</p>
</li><li>
<p><a href="#connection_state-instance_method" title="Net::IMAP#connection_state (method)">#connection_state</a>: Returns the connection state.</p>
</li><li>
<p><a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>: Asks the server to upgrade a clear-text connection to use TLS.</p>
</li><li>
<p><a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>: Tells the server to end the session.  Enters the <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> state.</p>
</li><li>
<p><a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">#disconnect</a>: Disconnects the connection (without sending <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> first).</p>
</li><li>
<p><a href="#disconnected%3F-instance_method" title="Net::IMAP#disconnected? (method)">#disconnected?</a>: True if the connection has been closed.</p>
</li></ul>

<h4 id="label-Server+capabilities">Server capabilities</h4>
<ul><li>
<p><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>: Returns whether the server supports a given capability.</p>
</li><li>
<p><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>: Returns the server’s capabilities as an array of strings.</p>
</li><li>
<p><a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>: Returns whether the server advertises support for a given SASL mechanism, for use with #authenticate.</p>
</li><li>
<p><a href="#auth_mechanisms-instance_method" title="Net::IMAP#auth_mechanisms (method)">#auth_mechanisms</a>: Returns the <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> <a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)"><code>SASL</code></a> mechanisms which the server claims to support as an array of strings.</p>
</li><li>
<p><a href="#clear_cached_capabilities-instance_method" title="Net::IMAP#clear_cached_capabilities (method)">#clear_cached_capabilities</a>: Clears cached capabilities.</p>

<p><em>The capabilities cache is automatically cleared after completing #starttls, #login, or #authenticate.</em></p>
</li><li>
<p><a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>: Sends the <code>CAPABILITY</code> command and returns the <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>.</p>

<p><em>In general, #capable? should be used rather than explicitly sending a <code>CAPABILITY</code> command to the server.</em></p>
</li></ul>

<h4 id="label-Handling+server+responses">Handling server responses</h4>
<ul><li>
<p><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">#greeting</a>: The server’s initial untagged response, which can indicate a pre-authenticated connection.</p>
</li><li>
<p><a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a>: Yields unhandled <a href="IMAP/UntaggedResponse.html#data-instance_method" title="Net::IMAP::UntaggedResponse#data (method)">UntaggedResponse#data</a> and <em>non-<code>nil</em></code> ResponseCode#data.</p>
</li><li>
<p><a href="#extract_responses-instance_method" title="Net::IMAP#extract_responses (method)">#extract_responses</a>: Removes and returns the responses for which the block returns a true value.</p>
</li><li>
<p><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">#clear_responses</a>: Deletes unhandled data from <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a> and returns it.</p>
</li><li>
<p><a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">#add_response_handler</a>: Add a block to be called inside the receiver thread with every server response.</p>
</li><li>
<p><a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">#response_handlers</a>: Returns the list of response handlers.</p>
</li><li>
<p><a href="#remove_response_handler-instance_method" title="Net::IMAP#remove_response_handler (method)">#remove_response_handler</a>: Remove a previously added response handler.</p>
</li></ul>

<h4 id="label-Core+IMAP+commands">Core IMAP commands</h4>

<p>The following commands are defined either by the [<a href="https://www.rfc-editor.org/rfc/rfc3501">IMAP4rev1</a>] base specification, or by one of the following extensions: [<a href="https://www.rfc-editor.org/rfc/rfc2177">IDLE</a>], [<a href="https://www.rfc-editor.org/rfc/rfc2342">NAMESPACE</a>], [<a href="https://www.rfc-editor.org/rfc/rfc3691">UNSELECT</a>], [<a href="https://www.rfc-editor.org/rfc/rfc5161">ENABLE</a>], [<a href="https://www.rfc-editor.org/rfc/rfc6851">MOVE</a>]. These extensions are widely supported by modern IMAP4rev1 servers and have all been integrated into [<a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a>]. <strong><em>NOTE:</strong> <code>IMAP</code> doesn’t support IMAP4rev2 yet.</em></p>

<h5 id="label-Any+state">Any state</h5>
<ul><li>
<p><a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>: Returns the server’s capabilities as an array of strings.</p>

<p><em>In general, #capable? should be used rather than explicitly sending a <code>CAPABILITY</code> command to the server.</em></p>
</li><li>
<p><a href="#noop-instance_method" title="Net::IMAP#noop (method)">#noop</a>: Allows the server to send unsolicited untagged <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a>.</p>
</li><li>
<p><a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>: Tells the server to end the session. Enters the <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> state.</p>
</li></ul>

<h5 id="label-Not+Authenticated+state">Not Authenticated state</h5>

<p>In addition to the commands for any state, the following commands are valid in the <code>not_authenticated</code> state:</p>
<ul><li>
<p><a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>: Upgrades a clear-text connection to use TLS.</p>

<p><em>Requires the <code>STARTTLS</code> capability.</em></p>
</li><li>
<p><a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>: Identifies the client to the server using the given <a href="https://www.iana.org/assignments/sasl-mechanisms/sasl-mechanisms.xhtml" target="_parent" title="SASL mechanism">SASL mechanism</a> and credentials.  Enters the <code>authenticated</code> state.</p>

<p><em>The server should list <code>&quot;AUTH=#{mechanism}&quot;</code> capabilities for supported mechanisms.</em></p>
</li><li>
<p><a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>: Identifies the client to the server using a plain text password. Using #authenticate is preferred.  Enters the <code>authenticated</code> state.</p>

<p><em>The <code>LOGINDISABLED</code> capability</em> <strong>must NOT</strong> <em>be listed.</em></p>
</li></ul>

<h5 id="label-Authenticated+state">Authenticated state</h5>

<p>In addition to the commands for any state, the following commands are valid in the <code>authenticated</code> state:</p>
<ul><li>
<p><a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a>: Enables backwards incompatible server extensions. <em>Requires the <code>ENABLE</code> or <code>IMAP4rev2</code> capability.</em></p>
</li><li>
<p><a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a>:  Open a mailbox and enter the <code>selected</code> state.</p>
</li><li>
<p><a href="#examine-instance_method" title="Net::IMAP#examine (method)">#examine</a>: Open a mailbox read-only, and enter the <code>selected</code> state.</p>
</li><li>
<p><a href="#create-instance_method" title="Net::IMAP#create (method)">#create</a>: Creates a new mailbox.</p>
</li><li>
<p><a href="#delete-instance_method" title="Net::IMAP#delete (method)">#delete</a>: Permanently remove a mailbox.</p>
</li><li>
<p><a href="#rename-instance_method" title="Net::IMAP#rename (method)">#rename</a>: Change the name of a mailbox.</p>
</li><li>
<p><a href="#subscribe-instance_method" title="Net::IMAP#subscribe (method)">#subscribe</a>: Adds a mailbox to the “subscribed” set.</p>
</li><li>
<p><a href="#unsubscribe-instance_method" title="Net::IMAP#unsubscribe (method)">#unsubscribe</a>: Removes a mailbox from the “subscribed” set.</p>
</li><li>
<p><a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a>: Returns names and attributes of mailboxes matching a given pattern.</p>
</li><li>
<p><a href="#namespace-instance_method" title="Net::IMAP#namespace (method)">#namespace</a>: Returns mailbox namespaces, with path prefixes and delimiters. <em>Requires the <code>NAMESPACE</code> or <code>IMAP4rev2</code> capability.</em></p>
</li><li>
<p><a href="#status-instance_method" title="Net::IMAP#status (method)">#status</a>: Returns mailbox information, e.g. message count, unseen message count, <code>UIDVALIDITY</code> and <code>UIDNEXT</code>.</p>
</li><li>
<p><a href="#append-instance_method" title="Net::IMAP#append (method)">#append</a>: Appends a message to the end of a mailbox.</p>
</li><li>
<p><a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a>: Allows the server to send updates to the client, without the client needing to poll using #noop. <em>Requires the <code>IDLE</code> or <code>IMAP4rev2</code> capability.</em></p>
</li><li>
<p><strong>Obsolete</strong> <a href="#lsub-instance_method" title="Net::IMAP#lsub (method)">#lsub</a>: <em>Replaced by <code>LIST-EXTENDED</code> and removed from <code>IMAP4rev2</code>.</em>  Lists mailboxes in the “subscribed” set.</p>

<p><strong><em>Note:</strong> Net::IMAP hasn’t implemented <code>LIST-EXTENDED</code> yet.</em></p>
</li></ul>

<h5 id="label-Selected+state">Selected state</h5>

<p>In addition to the commands for any state and the <code>authenticated</code> commands, the following commands are valid in the <code>selected</code> state:</p>
<ul><li>
<p><a href="#close-instance_method" title="Net::IMAP#close (method)">#close</a>: Closes the mailbox and returns to the <code>authenticated</code> state, expunging deleted messages, unless the mailbox was opened as read-only.</p>
</li><li>
<p><a href="#unselect-instance_method" title="Net::IMAP#unselect (method)">#unselect</a>: Closes the mailbox and returns to the <code>authenticated</code> state, without expunging any messages. <em>Requires the <code>UNSELECT</code> or <code>IMAP4rev2</code> capability.</em></p>
</li><li>
<p><a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">#expunge</a>: Permanently removes messages which have the Deleted flag set.</p>
</li><li>
<p><a href="#uid_expunge-instance_method" title="Net::IMAP#uid_expunge (method)">#uid_expunge</a>: Restricts expunge to only remove the specified UIDs. <em>Requires the <code>UIDPLUS</code> or <code>IMAP4rev2</code> capability.</em></p>
</li><li>
<p><a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>: Returns sequence numbers or UIDs of messages that match the given searching criteria.</p>
</li><li>
<p><a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>, <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a>: Returns data associated with a set of messages, specified by sequence number or UID.</p>
</li><li>
<p><a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a>, <a href="#uid_store-instance_method" title="Net::IMAP#uid_store (method)">#uid_store</a>: Alters a message’s flags.</p>
</li><li>
<p><a href="#copy-instance_method" title="Net::IMAP#copy (method)">#copy</a>, <a href="#uid_copy-instance_method" title="Net::IMAP#uid_copy (method)">#uid_copy</a>: Copies the specified messages to the end of the specified destination mailbox.</p>
</li><li>
<p><a href="#move-instance_method" title="Net::IMAP#move (method)">#move</a>, <a href="#uid_move-instance_method" title="Net::IMAP#uid_move (method)">#uid_move</a>: Moves the specified messages to the end of the specified destination mailbox, expunging them from the current mailbox. <em>Requires the <code>MOVE</code> or <code>IMAP4rev2</code> capability.</em></p>
</li><li>
<p><a href="#check-instance_method" title="Net::IMAP#check (method)">#check</a>: <strong><em>Obsolete:</strong> removed from <code>IMAP4rev2</code>.</em> Can be replaced with #noop or #idle.</p>
</li></ul>

<h5 id="label-Logout+state">Logout state</h5>

<p>No IMAP commands are valid in the <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> state.  If the socket is still open, <code>IMAP</code> will close it after receiving server confirmation. Exceptions will be raised by IMAP commands that have already started and are waiting for a response, as well as any that are called after logout.</p>

<h4 id="label-IMAP+extension+support">IMAP extension support</h4>

<h5 id="label-RFC9051-3A+-7BIMAP4rev2-7D">RFC9051: <code>IMAP4rev2</code></h5>

<p>Although <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a> is not supported yet, <code>IMAP</code> supports several extensions that have been folded into it: <code>ENABLE</code>, <code>IDLE</code>, <code>MOVE</code>, <code>NAMESPACE</code>, <code>SASL-IR</code>, <code>UIDPLUS</code>, <code>UNSELECT</code>, <code>STATUS=SIZE</code>, and the fetch side of <code>BINARY</code>. Commands for these extensions are listed with the <code><code>IMAP</code> commands</code>[rdoc-ref:Net::IMAP@Core+IMAP+commands], above.</p>

<blockquote>
<p><em>The following are folded into <code>IMAP4rev2</code> but are currently unsupported or incompletely supported by</em> Net::IMAP<em>: RFC4466 extensions, <code>SEARCHRES</code>, <code>LIST-EXTENDED</code>, <code>LIST-STATUS</code>, <code>LITERAL-</code>, and <code>SPECIAL-USE</code>.</em></p>
</blockquote>

<h5 id="label-RFC2087-3A+-7BQUOTA-7D">RFC2087: <code>QUOTA</code></h5>
<ul><li>
<p><a href="#getquota-instance_method" title="Net::IMAP#getquota (method)">#getquota</a>: returns the resource usage and limits for a quota root</p>
</li><li>
<p><a href="#getquotaroot-instance_method" title="Net::IMAP#getquotaroot (method)">#getquotaroot</a>: returns the list of quota roots for a mailbox, as well as their resource usage and limits.</p>
</li><li>
<p><a href="#setquota-instance_method" title="Net::IMAP#setquota (method)">#setquota</a>: sets the resource limits for a given quota root.</p>
</li></ul>

<h5 id="label-RFC2177-3A+-7BIDLE-7D">RFC2177: <code>IDLE</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a> and also included above with <a href="Net::IMAP.html#label-Core+IMAP+commands" title="Core IMAP commands">Core IMAP commands</a>.</p>
<ul><li>
<p><a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a>: Allows the server to send updates to the client, without the client needing to poll using #noop.</p>
</li></ul>

<h5 id="label-RFC2342-3A+-7BNAMESPACE-7D">RFC2342: <code>NAMESPACE</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a> and also included above with <a href="Net::IMAP.html#label-Core+IMAP+commands" title="Core IMAP commands">Core IMAP commands</a>.</p>
<ul><li>
<p><a href="#namespace-instance_method" title="Net::IMAP#namespace (method)">#namespace</a>: Returns mailbox namespaces, with path prefixes and delimiters.</p>
</li></ul>

<h5 id="label-RFC2971-3A+-7BID-7D">RFC2971: <code>ID</code></h5>
<ul><li>
<p><a href="#id-instance_method" title="Net::IMAP#id (method)">#id</a>: exchanges client and server implementation information.</p>
</li></ul>

<h5 id="label-RFC3516-3A+-7BBINARY-7D">RFC3516: <code>BINARY</code></h5>

<p>The fetch side of <code>BINARY</code> has been folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a>.</p>
<ul><li>
<p>Updates <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a> and <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> with the <code>BINARY</code>, <code>BINARY.PEEK</code>, and <code>BINARY.SIZE</code> items.  See FetchData#binary and FetchData#binary_size.</p>
</li></ul>

<blockquote>
<p><strong>NOTE:</strong> The binary extension the #append command is <em>not</em> supported yet.</p>
</blockquote>

<h5 id="label-RFC3691-3A+-7BUNSELECT-7D">RFC3691: <code>UNSELECT</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a> and also included above with <a href="Net::IMAP.html#label-Core+IMAP+commands" title="Core IMAP commands">Core IMAP commands</a>.</p>
<ul><li>
<p><a href="#unselect-instance_method" title="Net::IMAP#unselect (method)">#unselect</a>: Closes the mailbox and returns to the <code>authenticated</code> state, without expunging any messages.</p>
</li></ul>

<h5 id="label-RFC4314-3A+-7BACL-7D">RFC4314: <code>ACL</code></h5>
<ul><li>
<p><a href="#getacl-instance_method" title="Net::IMAP#getacl (method)">#getacl</a>: lists the authenticated user’s access rights to a mailbox.</p>
</li><li>
<p><a href="#setacl-instance_method" title="Net::IMAP#setacl (method)">#setacl</a>: sets the access rights for a user on a mailbox</p>
</li></ul>

<blockquote>
<p><strong>NOTE:</strong> <code>DELETEACL</code>, <code>LISTRIGHTS</code>, and <code>MYRIGHTS</code> are not supported yet.</p>
</blockquote>

<h5 id="label-RFC4315-3A+-7BUIDPLUS-7D">RFC4315: <code>UIDPLUS</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a> and also included above with <a href="Net::IMAP.html#label-Core+IMAP+commands" title="Core IMAP commands">Core IMAP commands</a>.</p>
<ul><li>
<p><a href="#uid_expunge-instance_method" title="Net::IMAP#uid_expunge (method)">#uid_expunge</a>: Restricts <a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">#expunge</a> to only remove the specified UIDs.</p>
</li><li>
<p>Updates <a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a>, <a href="#examine-instance_method" title="Net::IMAP#examine (method)">#examine</a> with the <code>UIDNOTSTICKY</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>ResponseCode</code></a></p>
</li><li>
<p>Updates <a href="#append-instance_method" title="Net::IMAP#append (method)">#append</a> with the <code>APPENDUID</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>ResponseCode</code></a></p>
</li><li>
<p>Updates <a href="#copy-instance_method" title="Net::IMAP#copy (method)">#copy</a>, <a href="#move-instance_method" title="Net::IMAP#move (method)">#move</a> with the <code>COPYUID</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>ResponseCode</code></a></p>
</li></ul>

<h5 id="label-RFC4731-3A+-7BESEARCH-7D">RFC4731: <code>ESEARCH</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a>.</p>
<ul><li>
<p>Updates <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a> with <code>return</code> options and <a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)"><code>ESearchResult</code></a>.</p>
</li></ul>

<h5 id="label-RFC4959-3A+-7BSASL-IR-7D">RFC4959: <code>SASL-IR</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a>.</p>
<ul><li>
<p>Updates <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> with the option to send an initial response.</p>
</li></ul>

<h5 id="label-RFC5161-3A+-7BENABLE-7D">RFC5161: <code>ENABLE</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a> and also included above with <a href="Net::IMAP.html#label-Core+IMAP+commands" title="Core IMAP commands">Core IMAP commands</a>.</p>
<ul><li>
<p><a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a>: Enables backwards incompatible server extensions.</p>
</li></ul>

<h5 id="label-RFC5256-3A+-7BSORT-7D">RFC5256: <code>SORT</code></h5>
<ul><li>
<p><a href="#sort-instance_method" title="Net::IMAP#sort (method)">#sort</a>, <a href="#uid_sort-instance_method" title="Net::IMAP#uid_sort (method)">#uid_sort</a>: An alternate version of <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a> or <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a> which sorts the results by specified keys.</p>
</li></ul>

<h5 id="label-RFC5256-3A+-7BTHREAD-7D">RFC5256: <code>THREAD</code></h5>
<ul><li>
<p><a href="#thread-instance_method" title="Net::IMAP#thread (method)">#thread</a>, <a href="#uid_thread-instance_method" title="Net::IMAP#uid_thread (method)">#uid_thread</a>: An alternate version of <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a> or <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>, which arranges the results into ordered groups or threads according to a chosen algorithm.</p>
</li></ul>

<h5 id="label-7BX-GM-EXT-1-7D"><code>X-GM-EXT-1</code></h5>

<p><code>X-GM-EXT-1</code> is a non-standard Gmail extension.  See <a href="https://developers.google.com/gmail/imap/imap-extensions">Google’s documentation</a>.</p>
<ul><li>
<p>Updates <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a> and <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> with support for <code>X-GM-MSGID</code> (unique message ID), <code>X-GM-THRID</code> (thread ID), and <code>X-GM-LABELS</code> (Gmail labels).</p>
</li><li>
<p>Updates <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a> with the <code>X-GM-RAW</code> search attribute.</p>
</li><li>
<p><a href="#xlist-instance_method" title="Net::IMAP#xlist (method)">#xlist</a>: replaced by <code>SPECIAL-USE</code> attributes in <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> responses.</p>
</li></ul>

<p><strong>NOTE:</strong> The <code>OBJECTID</code> extension should replace <code>X-GM-MSGID</code> and <code>X-GM-THRID</code>, but Gmail does not support it (as of 2023-11-10).</p>

<h5 id="label-RFC6851-3A+-7BMOVE-7D">RFC6851: <code>MOVE</code></h5>

<p>Folded into <a href="https://www.rfc-editor.org/rfc/rfc9051">IMAP4rev2</a> and also included above with <a href="Net::IMAP.html#label-Core+IMAP+commands" title="Core IMAP commands">Core IMAP commands</a>.</p>
<ul><li>
<p><a href="#move-instance_method" title="Net::IMAP#move (method)">#move</a>, <a href="#uid_move-instance_method" title="Net::IMAP#uid_move (method)">#uid_move</a>: Moves the specified messages to the end of the specified destination mailbox, expunging them from the current mailbox.</p>
</li></ul>

<h5 id="label-RFC6855-3A+UTF8-3DACCEPT-2C+UTF8-3DONLY">RFC6855: <code>UTF8=ACCEPT</code>, <code>UTF8=ONLY</code></h5>
<ul><li>
<p>See <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a> for information about support for UTF-8 string encoding.</p>
</li></ul>

<h5 id="label-RFC7162-3A+-7BCONDSTORE-7D">RFC7162: <code>CONDSTORE</code></h5>
<ul><li>
<p>Updates <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a> with <code>CONDSTORE</code> parameter.  <code>CONDSTORE</code> will also be enabled by using any of the extension’s command parameters, listed below.</p>
</li><li>
<p>Updates <a href="#status-instance_method" title="Net::IMAP#status (method)">#status</a> with the <code>HIGHESTMODSEQ</code> status attribute.</p>
</li><li>
<p>Updates <a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a> and <a href="#examine-instance_method" title="Net::IMAP#examine (method)">#examine</a> with the <code>condstore</code> modifier, and adds either a <code>HIGHESTMODSEQ</code> or <code>NOMODSEQ</code> ResponseCode to the responses.</p>
</li><li>
<p>Updates <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>, <a href="#sort-instance_method" title="Net::IMAP#sort (method)">#sort</a>, and <a href="#uid_sort-instance_method" title="Net::IMAP#uid_sort (method)">#uid_sort</a> with the <code>MODSEQ</code> search criterion, and adds SearchResult#modseq to the search response.</p>
</li><li>
<p>Updates <a href="#thread-instance_method" title="Net::IMAP#thread (method)">#thread</a> and <a href="#uid_thread-instance_method" title="Net::IMAP#uid_thread (method)">#uid_thread</a> with the <code>MODSEQ</code> search criterion <em>(but thread responses are unchanged)</em>.</p>
</li><li>
<p>Updates <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a> and <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> with the <code>changedsince</code> modifier and <code>MODSEQ</code> FetchData attribute.</p>
</li><li>
<p>Updates <a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a> and <a href="#uid_store-instance_method" title="Net::IMAP#uid_store (method)">#uid_store</a> with the <code>unchangedsince</code> modifier and adds the <code>MODIFIED</code> ResponseCode to the tagged response.</p>
</li></ul>

<h5 id="label-RFC8438-3A+STATUS-3DSIZE">RFC8438: <code>STATUS=SIZE</code></h5>
<ul><li>
<p>Updates <a href="#status-instance_method" title="Net::IMAP#status (method)">#status</a> with the <code>SIZE</code> status attribute.</p>
</li></ul>

<h5 id="label-RFC8474-3A+-7BOBJECTID-7D">RFC8474: <code>OBJECTID</code></h5>
<ul><li>
<p>Adds <code>MAILBOXID</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>ResponseCode</code></a> to <a href="#create-instance_method" title="Net::IMAP#create (method)">#create</a> tagged response.</p>
</li><li>
<p>Adds <code>MAILBOXID</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>ResponseCode</code></a> to <a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a> and <a href="#examine-instance_method" title="Net::IMAP#examine (method)">#examine</a> untagged response.</p>
</li><li>
<p>Updates <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a> and <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> with the <code>EMAILID</code> and <code>THREADID</code> items. See FetchData#emailid and FetchData#emailid.</p>
</li><li>
<p>Updates <a href="#status-instance_method" title="Net::IMAP#status (method)">#status</a> with support for the <code>MAILBOXID</code> status attribute.</p>
</li></ul>

<h5 id="label-RFC9394-3A+-7BPARTIAL-7D">RFC9394: <code>PARTIAL</code></h5>
<ul><li>
<p>Updates <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a> with the <code>PARTIAL</code> return option which adds ESearchResult#partial return data.</p>
</li><li>
<p>Updates <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> with the <code>partial</code> modifier.</p>
</li></ul>

<h5 id="label-RFC9586-3A+-7BUIDONLY-7D">RFC9586: <code>UIDONLY</code></h5>
<ul><li>
<p>Updates <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a> with <code>UIDONLY</code> parameter.</p>
</li><li>
<p>Updates <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> and <a href="#uid_store-instance_method" title="Net::IMAP#uid_store (method)">#uid_store</a> to return <code>UIDFETCH</code> response.</p>
</li><li>
<p>Updates <a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">#expunge</a> and <a href="#uid_expunge-instance_method" title="Net::IMAP#uid_expunge (method)">#uid_expunge</a> to return <code>VANISHED</code> response.</p>
</li><li>
<p>Prohibits use of message sequence numbers in responses or requests.</p>
</li></ul>

<h3 id="label-References">References</h3>
<dl class="rdoc-list note-list"><dt>[<a href="https://www.rfc-editor.org/rfc/rfc3501.html" target="_parent" title="IMAP4rev1">IMAP4rev1</a>]</dt>
<dd>
<p>Crispin, M., “INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1”, RFC 3501, DOI 10.17487/RFC3501, March 2003, &lt;<a href="https://www.rfc-editor.org/info/rfc3501">www.rfc-editor.org/info/rfc3501</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc4466.html">IMAP-ABNF-EXT</a>]</dt>
<dd>
<p>Melnikov, A. and C. Daboo, “Collected Extensions to IMAP4 ABNF”, RFC 4466, DOI 10.17487/RFC4466, April 2006, &lt;<a href="https://www.rfc-editor.org/info/rfc4466">www.rfc-editor.org/info/rfc4466</a>&gt;.</p>

<p><em>Note: Net::IMAP cannot parse the entire RFC4466 grammar yet.</em></p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc9051.html" target="_parent" title="IMAP4rev2">IMAP4rev2</a>]</dt>
<dd>
<p>Melnikov, A., Ed., and B. Leiba, Ed., “Internet Message Access Protocol (IMAP) - Version 4rev2”, RFC 9051, DOI 10.17487/RFC9051, August 2021, &lt;<a href="https://www.rfc-editor.org/info/rfc9051">www.rfc-editor.org/info/rfc9051</a>&gt;.</p>

<p><em>Note: Net::IMAP is not fully compatible with IMAP4rev2 yet.</em></p>
</dd><dt>[<a href="https://www.rfc-editor.org/info/rfc2683">IMAP-IMPLEMENTATION</a>]</dt>
<dd>
<p>Leiba, B., “IMAP4 Implementation Recommendations”, RFC 2683, DOI 10.17487/RFC2683, September 1999, &lt;<a href="https://www.rfc-editor.org/info/rfc2683">www.rfc-editor.org/info/rfc2683</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/info/rfc2180">IMAP-MULTIACCESS</a>]</dt>
<dd>
<p>Gahrns, M., “IMAP4 Multi-Accessed Mailbox Practice”, RFC 2180, DOI 10.17487/RFC2180, July 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2180">www.rfc-editor.org/info/rfc2180</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2152">UTF7</a>]</dt>
<dd>
<p>Goldsmith, D. and M. Davis, “UTF-7 A Mail-Safe Transformation Format of Unicode”, RFC 2152, DOI 10.17487/RFC2152, May 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2152">www.rfc-editor.org/info/rfc2152</a>&gt;.</p>
</dd></dl>

<h4 id="label-Message+envelope+and+body+structure">Message envelope and body structure</h4>
<dl class="rdoc-list note-list"><dt>[<a href="https://www.rfc-editor.org/rfc/rfc5322">RFC5322</a>]</dt>
<dd>
<p>Resnick, P., Ed., “Internet Message Format”, RFC 5322, DOI 10.17487/RFC5322, October 2008, &lt;<a href="https://www.rfc-editor.org/info/rfc5322">www.rfc-editor.org/info/rfc5322</a>&gt;.</p>

<p><em>Note: obsoletes</em> <a href="https://www.rfc-editor.org/rfc/rfc2822">RFC-2822</a><em> (April 2001) and</em> <a href="https://www.rfc-editor.org/rfc/rfc822">RFC-822</a><em> (August 1982).</em></p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2978">CHARSET</a>]</dt>
<dd>
<p>Freed, N. and J. Postel, “IANA Charset Registration Procedures”, BCP 19, RFC 2978, DOI 10.17487/RFC2978, October 2000, &lt;<a href="https://www.rfc-editor.org/info/rfc2978">www.rfc-editor.org/info/rfc2978</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2183">DISPOSITION</a>]</dt>
<dd>
<p>Troost, R., Dorner, S., and K. Moore, Ed., “Communicating Presentation Information in Internet Messages: The Content-Disposition Header Field”, RFC 2183, DOI 10.17487/RFC2183, August 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2183">www.rfc-editor.org/info/rfc2183</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2045">MIME-IMB</a>]</dt>
<dd>
<p>Freed, N. and N. Borenstein, “Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies”, RFC 2045, DOI 10.17487/RFC2045, November 1996, &lt;<a href="https://www.rfc-editor.org/info/rfc2045">www.rfc-editor.org/info/rfc2045</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2046">MIME-IMT</a>]</dt>
<dd>
<p>Freed, N. and N. Borenstein, “Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types”, RFC 2046, DOI 10.17487/RFC2046, November 1996, &lt;<a href="https://www.rfc-editor.org/info/rfc2046">www.rfc-editor.org/info/rfc2046</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2047">MIME-HDRS</a>]</dt>
<dd>
<p>Moore, K., “MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text”, RFC 2047, DOI 10.17487/RFC2047, November 1996, &lt;<a href="https://www.rfc-editor.org/info/rfc2047">www.rfc-editor.org/info/rfc2047</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2231">RFC2231</a>]</dt>
<dd>
<p>Freed, N. and K. Moore, “MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations”, RFC 2231, DOI 10.17487/RFC2231, November 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2231">www.rfc-editor.org/info/rfc2231</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc6532">I18n-HDRS</a>]</dt>
<dd>
<p>Yang, A., Steele, S., and N. Freed, “Internationalized Email Headers”, RFC 6532, DOI 10.17487/RFC6532, February 2012, &lt;<a href="https://www.rfc-editor.org/info/rfc6532">www.rfc-editor.org/info/rfc6532</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/info/rfc3282">LANGUAGE-TAGS</a>]</dt>
<dd>
<p>Alvestrand, H., “Content Language Headers”, RFC 3282, DOI 10.17487/RFC3282, May 2002, &lt;<a href="https://www.rfc-editor.org/info/rfc3282">www.rfc-editor.org/info/rfc3282</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/info/rfc2557">LOCATION</a>]</dt>
<dd>
<p>Palme, J., Hopmann, A., and N. Shelness, “MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)”, RFC 2557, DOI 10.17487/RFC2557, March 1999, &lt;<a href="https://www.rfc-editor.org/info/rfc2557">www.rfc-editor.org/info/rfc2557</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc1864">MD5</a>]</dt>
<dd>
<p>Myers, J. and M. Rose, “The Content-MD5 Header Field”, RFC 1864, DOI 10.17487/RFC1864, October 1995, &lt;<a href="https://www.rfc-editor.org/info/rfc1864">www.rfc-editor.org/info/rfc1864</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc3503">RFC3503</a>]</dt>
<dd>
<p>Melnikov, A., “Message Disposition Notification (MDN) profile for Internet Message Access Protocol (IMAP)”, RFC 3503, DOI 10.17487/RFC3503, March 2003, &lt;<a href="https://www.rfc-editor.org/info/rfc3503">www.rfc-editor.org/info/rfc3503</a>&gt;.</p>
</dd></dl>

<h4 id="label-IMAP+Extensions">IMAP Extensions</h4>
<dl class="rdoc-list note-list"><dt>[<a href="https://www.rfc-editor.org/rfc/rfc9208">QUOTA</a>]</dt>
<dd>
<p>Melnikov, A., “IMAP QUOTA Extension”, RFC 9208, DOI 10.17487/RFC9208, March 2022, &lt;<a href="https://www.rfc-editor.org/info/rfc9208">www.rfc-editor.org/info/rfc9208</a>&gt;.</p>

<p><em>Note: obsoletes</em> <a href="https://www.rfc-editor.org/rfc/rfc2087">RFC-2087</a><em> (January 1997)</em>. <em>Net::IMAP does not fully support the RFC9208 updates yet.</em></p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2177">IDLE</a>]</dt>
<dd>
<p>Leiba, B., “IMAP4 IDLE command”, RFC 2177, DOI 10.17487/RFC2177, June 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2177">www.rfc-editor.org/info/rfc2177</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2342">NAMESPACE</a>]</dt>
<dd>
<p>Gahrns, M. and C. Newman, “IMAP4 Namespace”, RFC 2342, DOI 10.17487/RFC2342, May 1998, &lt;<a href="https://www.rfc-editor.org/info/rfc2342">www.rfc-editor.org/info/rfc2342</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc2971">ID</a>]</dt>
<dd>
<p>Showalter, T., “IMAP4 ID extension”, RFC 2971, DOI 10.17487/RFC2971, October 2000, &lt;<a href="https://www.rfc-editor.org/info/rfc2971">www.rfc-editor.org/info/rfc2971</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc3516">BINARY</a>]</dt>
<dd>
<p>Nerenberg, L., “IMAP4 Binary Content Extension”, RFC 3516, DOI 10.17487/RFC3516, April 2003, &lt;<a href="https://www.rfc-editor.org/info/rfc3516">www.rfc-editor.org/info/rfc3516</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc4314">ACL</a>]</dt>
<dd>
<p>Melnikov, A., “IMAP4 Access Control List (ACL) Extension”, RFC 4314, DOI 10.17487/RFC4314, December 2005, &lt;<a href="https://www.rfc-editor.org/info/rfc4314">www.rfc-editor.org/info/rfc4314</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc4315.html">UIDPLUS</a>]</dt>
<dd>
<p>Crispin, M., “Internet Message Access Protocol (IMAP) - UIDPLUS extension”, RFC 4315, DOI 10.17487/RFC4315, December 2005, &lt;<a href="https://www.rfc-editor.org/info/rfc4315">www.rfc-editor.org/info/rfc4315</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc5256">SORT</a>]</dt>
<dd>
<p>Crispin, M. and K. Murchison, “Internet Message Access Protocol - SORT and THREAD Extensions”, RFC 5256, DOI 10.17487/RFC5256, June 2008, &lt;<a href="https://www.rfc-editor.org/info/rfc5256">www.rfc-editor.org/info/rfc5256</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc5256">THREAD</a>]</dt>
<dd>
<p>Crispin, M. and K. Murchison, “Internet Message Access Protocol - SORT and THREAD Extensions”, RFC 5256, DOI 10.17487/RFC5256, June 2008, &lt;<a href="https://www.rfc-editor.org/info/rfc5256">www.rfc-editor.org/info/rfc5256</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc5530.html">RFC5530</a>]</dt>
<dd>
<p>Gulbrandsen, A., “IMAP Response Codes”, RFC 5530, DOI 10.17487/RFC5530, May 2009, &lt;<a href="https://www.rfc-editor.org/info/rfc5530">www.rfc-editor.org/info/rfc5530</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc6851">MOVE</a>]</dt>
<dd>
<p>Gulbrandsen, A. and N. Freed, Ed., “Internet Message Access Protocol (IMAP) - MOVE Extension”, RFC 6851, DOI 10.17487/RFC6851, January 2013, &lt;<a href="https://www.rfc-editor.org/info/rfc6851">www.rfc-editor.org/info/rfc6851</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc6855">UTF8=ACCEPT</a>]</dt>
<dt>[<a href="https://www.rfc-editor.org/rfc/rfc6855">UTF8=ONLY</a>]</dt>
<dd>
<p>Resnick, P., Ed., Newman, C., Ed., and S. Shen, Ed., “IMAP Support for UTF-8”, RFC 6855, DOI 10.17487/RFC6855, March 2013, &lt;<a href="https://www.rfc-editor.org/info/rfc6855">www.rfc-editor.org/info/rfc6855</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc7162">CONDSTORE</a>]</dt>
<dt>[<a href="https://www.rfc-editor.org/rfc/rfc7162">QRESYNC</a>]</dt>
<dd>
<p>Melnikov, A. and D. Cridland, “IMAP Extensions: Quick Flag Changes Resynchronization (CONDSTORE) and Quick Mailbox Resynchronization (QRESYNC)”, RFC 7162, DOI 10.17487/RFC7162, May 2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7162">www.rfc-editor.org/info/rfc7162</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc8474">OBJECTID</a>]</dt>
<dd>
<p>Gondwana, B., Ed., “IMAP Extension for Object Identifiers”, RFC 8474, DOI 10.17487/RFC8474, September 2018, &lt;<a href="https://www.rfc-editor.org/info/rfc8474">www.rfc-editor.org/info/rfc8474</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/info/rfc9394">PARTIAL</a>]</dt>
<dd>
<p>Melnikov, A., Achuthan, A., Nagulakonda, V., and L. Alves, “IMAP PARTIAL Extension for Paged SEARCH and FETCH”, RFC 9394, DOI 10.17487/RFC9394, June 2023, &lt;<a href="https://www.rfc-editor.org/info/rfc9394">www.rfc-editor.org/info/rfc9394</a>&gt;.</p>
</dd><dt>[<a href="https://www.rfc-editor.org/rfc/rfc9586.pdf">UIDONLY</a>]</dt>
<dd>
<p>Melnikov, A., Achuthan, A., Nagulakonda, V., Singh, A., and L. Alves, “IMAP Extension for Using and Returning Unique Identifiers (UIDs) Only”, RFC 9586, DOI 10.17487/RFC9586, May 2024, &lt;<a href="https://www.rfc-editor.org/info/rfc9586">www.rfc-editor.org/info/rfc9586</a>&gt;.</p>
</dd></dl>

<h4 id="label-IANA+registries">IANA registries</h4>
<ul><li>
<p><a href="http://www.iana.org/assignments/imap4-capabilities" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; Capabilities"><code>IMAP</code> Capabilities</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/imap-response-codes/imap-response-codes.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; Response Codes"><code>IMAP</code> Response Codes</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/imap-mailbox-name-attributes/imap-mailbox-name-attributes.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; Mailbox Name Attributes"><code>IMAP</code> Mailbox Name Attributes</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/imap-jmap-keywords/imap-jmap-keywords.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; and JMAP Keywords"><code>IMAP</code> and JMAP Keywords</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/imap-threading-algorithms/imap-threading-algorithms.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; Threading Algorithms"><code>IMAP</code> Threading Algorithms</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/sasl-mechanisms/sasl-mechanisms.xhtml" target="_parent" title="{Net::IMAP::SASL">{Net::IMAP::SASL</a> Mechanisms and <a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)"><code>SASL</code></a> SCRAM Family Mechanisms}</p>
</li><li>
<p><a href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml" target="_parent" title="Service Name and Transport Protocol Port Number Registry">Service Name and Transport Protocol Port Number Registry</a>: <code>imap</code>: tcp/143, <code>imaps</code>: tcp/993</p>
</li><li>
<p><a href="https://www.iana.org/assignments/gssapi-service-names/gssapi-service-names.xhtml" target="_parent" title="GSSAPI/Kerberos/SASL Service Names">GSSAPI/Kerberos/SASL Service Names</a>: <code>imap</code></p>
</li><li>
<p><a href="https://www.iana.org/assignments/character-sets/character-sets.xhtml" target="_parent" title="Character sets">Character sets</a></p>
</li></ul>

<h5 id="label-For+currently+unsupported+features-3A">For currently unsupported features:</h5>
<ul><li>
<p><a href="http://www.iana.org/assignments/imap4-capabilities#imap-capabilities-2" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; Quota Resource Types"><code>IMAP</code> Quota Resource Types</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/imap-list-extended/imap-list-extended.xhtml" target="_parent" title="LIST-EXTENDED options and responses">LIST-EXTENDED options and responses</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/imap-metadata/imap-metadata.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; METADATA Server Entry and Mailbox Entry Registries"><code>IMAP</code> METADATA Server Entry and Mailbox Entry Registries</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/imap-annotate-extension/imap-annotate-extension.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; ANNOTATE Extension Entries and Attributes"><code>IMAP</code> ANNOTATE Extension Entries and Attributes</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/urlauth-access-ids/urlauth-access-ids.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; URLAUTH Access Identifiers and Prefixes"><code>IMAP</code> URLAUTH Access Identifiers and Prefixes</a></p>
</li><li>
<p><a href="https://www.iana.org/assignments/urlauth-authorization-mechanism-registry/urlauth-authorization-mechanism-registry.xhtml" target="_parent" title="&lt;code&gt;IMAP&lt;/code&gt; URLAUTH Authorization Mechanism Registry"><code>IMAP</code> URLAUTH Authorization Mechanism Registry</a></p>
</li></ul>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='ALL-constant' class='summary_signature'>ALL =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating that this mailbox presents all messages in the user’s message store. Implementations MAY omit some messages, such as, perhaps, those in Trash and Junk. When this special use is supported, it is almost certain to represent a virtual mailbox</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L218-L218'># File 'lib/net/imap/flags.rb', line 218</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>All</span></pre>
  </li>
  <li>
    <span id='ANSWERED-constant' class='summary_signature'>ANSWERED =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Flag indicating a message has been answered.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L33-L33'># File 'lib/net/imap/flags.rb', line 33</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Answered</span></pre>
  </li>
  <li>
    <span id='ARCHIVE-constant' class='summary_signature'>ARCHIVE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating that this mailbox is used to archive messages. The meaning of an “archival” mailbox is server dependent; typically, it will be used to get messages out of the inbox, or otherwise keep them out of the user’s way, while still making them accessible</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L224-L224'># File 'lib/net/imap/flags.rb', line 224</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Archive</span></pre>
  </li>
  <li>
    <span id='CRLF-constant' class='summary_signature nodoc'>CRLF =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3317-L3317'># File 'lib/net/imap.rb', line 3317</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='CommandData-constant' class='summary_signature nodoc'>CommandData =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L123-L130'># File 'lib/net/imap/command_data.rb', line 123</a>    <pre class='code ruby'><span class='const'><a href="#Data-constant" title="Net::IMAP::Data (constant)">Data</a></span>.<span class='id identifier rubyid_define'>define</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_data'>data</span>) <span class='kw'>do</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_send_data'><a href="#send_data-instance_method" title="Net::IMAP#send_data (method)">send_data</a></span>(<span class='id identifier rubyid_imap'>imap</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NoMethodError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> must implement </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___method__'>__method__</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_validate'>validate</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </li>
  <li>
    <span id='DELETED-constant' class='summary_signature'>DELETED =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Flag indicating a message has been marked for deletion.  This will occur when the mailbox is closed or expunged.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L47-L47'># File 'lib/net/imap/flags.rb', line 47</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Deleted</span></pre>
  </li>
  <li>
    <span id='DRAFT-constant' class='summary_signature'>DRAFT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Flag indicating a message is only a draft or work-in-progress version.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L50-L50'># File 'lib/net/imap/flags.rb', line 50</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Draft</span></pre>
  </li>
  <li>
    <span id='DRAFTS-constant' class='summary_signature'>DRAFTS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating that this mailbox is used to hold draft messages – typically, messages that are being composed but have not yet been sent. In some server implementations, this might be a virtual mailbox, containing messages from other mailboxes that are marked with the “Draft” message flag. Alternatively, this might just be advice that a client put drafts here</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L232-L232'># File 'lib/net/imap/flags.rb', line 232</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Drafts</span></pre>
  </li>
  <li>
    <span id='Data-constant' class='summary_signature'>Data =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_lite.rb#L36-L36'># File 'lib/net/imap/data_lite.rb', line 36</a>    <pre class='code ruby'><span class='const'><a href="IMAP/DataLite.html" title="Net::IMAP::DataLite (class)">DataLite</a></span></pre>
  </li>
  <li>
    <span id='ENABLE_ALIASES-constant' class='summary_signature'>ENABLE_ALIASES =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Aliases for supported capabilities, to be used with the <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a> command.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L794-L797'># File 'lib/net/imap.rb', line 794</a>    <pre class='code ruby'>{
  <span class='label'>utf8:</span>          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF8=ACCEPT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF8=ONLY</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF8=ACCEPT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
}.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='FLAGGED-constant' class='summary_signature'>FLAGGED =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>A message flag indicating a message has been flagged for special or urgent attention.</p>

<p>Also a mailbox special use attribute, which indicates that this mailbox presents all messages marked in some way as “important”.  When this special use is supported, it is likely to represent a virtual mailbox collecting messages (from other mailboxes) that are marked with the “Flagged” message flag.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L43-L43'># File 'lib/net/imap/flags.rb', line 43</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Flagged</span></pre>
  </li>
  <li>
    <span id='HASCHILDREN-constant' class='summary_signature'>HASCHILDREN =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#HAS_CHILDREN-constant" title="Net::IMAP::HAS_CHILDREN (constant)">HAS_CHILDREN</a>, to match the IMAP spelling.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L183-L183'># File 'lib/net/imap/flags.rb', line 183</a>    <pre class='code ruby'><span class='const'><a href="#HAS_CHILDREN-constant" title="Net::IMAP::HAS_CHILDREN (constant)">HAS_CHILDREN</a></span></pre>
  </li>
  <li>
    <span id='HASNOCHILDREN-constant' class='summary_signature'>HASNOCHILDREN =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#HAS_NO_CHILDREN-constant" title="Net::IMAP::HAS_NO_CHILDREN (constant)">HAS_NO_CHILDREN</a>, to match the IMAP spelling.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L185-L185'># File 'lib/net/imap/flags.rb', line 185</a>    <pre class='code ruby'><span class='const'><a href="#HAS_NO_CHILDREN-constant" title="Net::IMAP::HAS_NO_CHILDREN (constant)">HAS_NO_CHILDREN</a></span></pre>
  </li>
  <li>
    <span id='HAS_CHILDREN-constant' class='summary_signature'>HAS_CHILDREN =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The presence of this attribute indicates that the mailbox has child mailboxes. A server SHOULD NOT set this attribute if there are child mailboxes and the user does not have permission to access any of them.  In this case, <code>HasNoChildren</code> SHOULD be used. In many cases, however, a server may not be able to efficiently compute whether a user has access to any child mailboxes. Note that even though the <code>HasChildren</code> attribute for a mailbox must be correct at the time of processing the mailbox, a client must be prepared to deal with a situation when a mailbox is marked with the <code>HasChildren</code> attribute, but no child mailbox appears in the response to the <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> command. This might happen, for example, due to child mailboxes being deleted or made inaccessible to the user (using access control) by another client before the server is able to list them.</p>

<p>It is an error for the server to return both a <code>HasChildren</code> and a <code>HasNoChildren</code> attribute in the same <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> response. A client that encounters a <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> response with both <code>HasChildren</code> and <code>HasNoChildren</code> attributes present should act as if both are absent in the <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> response.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L136-L136'># File 'lib/net/imap/flags.rb', line 136</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Haschildren</span></pre>
  </li>
  <li>
    <span id='HAS_NO_CHILDREN-constant' class='summary_signature'>HAS_NO_CHILDREN =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The presence of this attribute indicates that the mailbox has NO child mailboxes that are accessible to the currently authenticated user.</p>

<p>It is an error for the server to return both a <code>HasChildren</code> and a <code>HasNoChildren</code> attribute in the same <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> response. A client that encounters a <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> response with both <code>HasChildren</code> and <code>HasNoChildren</code> attributes present should act as if both are absent in the <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> response.</p>

<p>Note: the <code>HasNoChildren</code> attribute should not be confused with the <code>NoInferiors</code> attribute, which indicates that no child mailboxes exist now and none can be created in the future.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L149-L149'># File 'lib/net/imap/flags.rb', line 149</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Hasnochildren</span></pre>
  </li>
  <li>
    <span id='JUNK-constant' class='summary_signature'>JUNK =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating that this mailbox is where messages deemed to be junk mail are held. Some server implementations might put messages here automatically.  Alternatively, this might just be advice to a client-side spam filter.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L242-L242'># File 'lib/net/imap/flags.rb', line 242</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Junk</span></pre>
  </li>
  <li>
    <span id='MARKED-constant' class='summary_signature'>MARKED =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The mailbox has been marked “interesting” by the server; the mailbox probably contains messages that have been added since the last time the mailbox was selected.</p>

<p>If it is not feasible for the server to determine whether or not the mailbox is “interesting”, the server SHOULD NOT send either <code>Marked</code> or <code>Unmarked</code>. The server MUST NOT send more than one of <code>Marked</code>, <code>Unmarked</code>, and <code>NoSelect</code> for a single mailbox, and it MAY send none of these.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L160-L160'># File 'lib/net/imap/flags.rb', line 160</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Marked</span></pre>
  </li>
  <li>
    <span id='NOINFERIORS-constant' class='summary_signature'>NOINFERIORS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#NO_INFERIORS-constant" title="Net::IMAP::NO_INFERIORS (constant)">NO_INFERIORS</a>, to match the IMAP spelling.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L179-L179'># File 'lib/net/imap/flags.rb', line 179</a>    <pre class='code ruby'><span class='const'><a href="#NO_INFERIORS-constant" title="Net::IMAP::NO_INFERIORS (constant)">NO_INFERIORS</a></span></pre>
  </li>
  <li>
    <span id='NONEXISTENT-constant' class='summary_signature'>NONEXISTENT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The <code>NonExistent</code> attribute indicates that a mailbox name does not refer to an existing mailbox. Note that this attribute is not meaningful by itself, as mailbox names that match the canonical <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a> pattern but don’t exist must not be returned unless one of the two conditions listed below is also satisfied:</p>
<ol><li>
<p>The mailbox name also satisfies the selection criteria (for example, it is subscribed and the “SUBSCRIBED” selection option has been specified).</p>
</li><li>
<p>“RECURSIVEMATCH” has been specified, and the mailbox name has at least one descendant mailbox name that does not match the #list pattern and does match the selection criteria.</p>
</li></ol>

<p>In practice, this means that the <code>NonExistent</code> attribute is usually returned with one or more of <code>Subscribed</code>, <code>Remote</code>, <code>HasChildren</code>, or the CHILDINFO extended data item.</p>

<p>The client must treat the presence of the <code>NonExistent</code> attribute as if the <code>NoSelect</code> attribute was also sent by the server</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L105-L105'># File 'lib/net/imap/flags.rb', line 105</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Nonexistent</span></pre>
  </li>
  <li>
    <span id='NOSELECT-constant' class='summary_signature'>NOSELECT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#NO_SELECT-constant" title="Net::IMAP::NO_SELECT (constant)">NO_SELECT</a>, to match the IMAP spelling.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L181-L181'># File 'lib/net/imap/flags.rb', line 181</a>    <pre class='code ruby'><span class='const'><a href="#NO_SELECT-constant" title="Net::IMAP::NO_SELECT (constant)">NO_SELECT</a></span></pre>
  </li>
  <li>
    <span id='NO_INFERIORS-constant' class='summary_signature'>NO_INFERIORS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating it is not possible for any child levels of hierarchy to exist under this name; no child levels exist now and none can be created in the future children.</p>

<p>The client must treat the presence of the <code>NoInferiors</code> attribute as if the <code>HasNoChildren</code> attribute was also sent by the server</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L113-L113'># File 'lib/net/imap/flags.rb', line 113</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Noinferiors</span></pre>
  </li>
  <li>
    <span id='NO_SELECT-constant' class='summary_signature'>NO_SELECT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating it is not possible to use this name as a selectable mailbox.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L117-L117'># File 'lib/net/imap/flags.rb', line 117</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Noselect</span></pre>
  </li>
  <li>
    <span id='PORT-constant' class='summary_signature nodoc'>PORT =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3318-L3318'># File 'lib/net/imap.rb', line 3318</a>    <pre class='code ruby'><span class='int'>143</span></pre>
  </li>
  <li>
    <span id='PlainAuthenticator-constant' class='summary_signature nodoc'>PlainAuthenticator =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/authenticators.rb#L32-L32'># File 'lib/net/imap/authenticators.rb', line 32</a>    <pre class='code ruby'><span class='const'><a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)">SASL</a></span><span class='op'>::</span><span class='const'><a href="IMAP/SASL/PlainAuthenticator.html" title="Net::IMAP::SASL::PlainAuthenticator (class)">PlainAuthenticator</a></span></pre>
  </li>
  <li>
    <span id='RECENT-constant' class='summary_signature'>RECENT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Flag indicating that the message is “recent,” meaning that this session is the first session in which the client has been notified of this message.</p>

<p>This flag was defined by <a href="https://www.rfc-editor.org/rfc/rfc3501.html">IMAP4rev1</a> and is deprecated by <a href="https://www.rfc-editor.org/rfc/rfc9051.html">IMAP4rev2</a>.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L60-L60'># File 'lib/net/imap/flags.rb', line 60</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Recent</span></pre>
  </li>
  <li>
    <span id='REMOTE-constant' class='summary_signature'>REMOTE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The mailbox is a remote mailbox.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L176-L176'># File 'lib/net/imap/flags.rb', line 176</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Remove</span></pre>
  </li>
  <li>
    <span id='RESPONSES_DEPRECATION_MSG-constant' class='summary_signature priv'>RESPONSES_DEPRECATION_MSG =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3092-L3096'># File 'lib/net/imap.rb', line 3092</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pass a type or block to #responses, </span><span class='tstring_end'>&quot;</span></span> \
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>set config.responses_without_block to :frozen_dup </span><span class='tstring_end'>&quot;</span></span> \
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>or :silence_deprecation_warning, </span><span class='tstring_end'>&quot;</span></span> \
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>or use #extract_responses or #clear_responses.</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='RESPONSE_ERRORS-constant' class='summary_signature nodoc'>RESPONSE_ERRORS =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/errors.rb#L113-L113'># File 'lib/net/imap/errors.rb', line 113</a>    <pre class='code ruby'><span class='const'>Hash</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='const'><a href="IMAP/ResponseError.html" title="Net::IMAP::ResponseError (class)">ResponseError</a></span>)</pre>
  </li>
  <li>
    <span id='RETURN_START-constant' class='summary_signature priv'>RETURN_START =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3580-L3580'># File 'lib/net/imap.rb', line 3580</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\ARETURN\b</span><span class='regexp_end'>/i</span></span></pre>
  </li>
  <li>
    <span id='RETURN_WHOLE-constant' class='summary_signature priv'>RETURN_WHOLE =</span>
    <span class='note title private'>private</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3579-L3579'># File 'lib/net/imap.rb', line 3579</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\ARETURN\z</span><span class='regexp_end'>/i</span></span></pre>
  </li>
  <li>
    <span id='SEEN-constant' class='summary_signature'>SEEN =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Flag indicating a message has been read.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L30-L30'># File 'lib/net/imap/flags.rb', line 30</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Seen</span></pre>
  </li>
  <li>
    <span id='SENT-constant' class='summary_signature'>SENT =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating that this mailbox is used to hold copies of messages that have been sent. Some server implementations might put messages here automatically. Alternatively, this might just be advice that a client save sent messages here.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L248-L248'># File 'lib/net/imap/flags.rb', line 248</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Sent</span></pre>
  </li>
  <li>
    <span id='SSL_PORT-constant' class='summary_signature nodoc'>SSL_PORT =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3319-L3319'># File 'lib/net/imap.rb', line 3319</a>    <pre class='code ruby'><span class='int'>993</span></pre>
  </li>
  <li>
    <span id='STRFDATE-constant' class='summary_signature'>STRFDATE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>strftime/strptime format for an IMAP4 <code>date</code>, excluding optional dquotes. Use via the encode_date and decode_date methods.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_date'>date</span>            <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_text'>text</span> <span class='op'>/</span> <span class='const'>DQUOTE</span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_text'>text</span> <span class='const'>DQUOTE</span>
<span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_text'>text</span>       <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_day'>day</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_month'>month</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_year'>year</span>

<span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_day'>day</span>        <span class='op'>=</span> <span class='int'>1</span><span class='op'>*</span><span class='int'>2</span><span class='const'>DIGIT</span>
                    <span class='semicolon'>;</span> <span class='const'>Day</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_month'>month</span>
<span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_month'>month</span>      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jan</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Feb</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mar</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Apr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>May</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jun</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jul</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Aug</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sep</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Oct</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Nov</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dec</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_year'>year</span>       <span class='op'>=</span> <span class='int'>4</span><span class='const'>DIGIT</span></code></pre>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L22-L22'># File 'lib/net/imap/data_encoding.rb', line 22</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d-%b-%Y</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='STRFTIME-constant' class='summary_signature'>STRFTIME =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>strftime/strptime format for an IMAP4 <code>date-time</code>, including dquotes. See the encode_datetime and decode_datetime methods.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_time'>time</span>       <span class='op'>=</span> <span class='const'>DQUOTE</span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_day'>day</span><span class='op'>-</span><span class='id identifier rubyid_fixed'>fixed</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_month'>month</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_year'>year</span>
                  <span class='const'>SP</span> <span class='id identifier rubyid_time'>time</span> <span class='const'>SP</span> <span class='id identifier rubyid_zone'>zone</span> <span class='const'>DQUOTE</span>

<span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_day'>day</span><span class='op'>-</span><span class='id identifier rubyid_fixed'>fixed</span>  <span class='op'>=</span> (<span class='const'>SP</span> <span class='const'>DIGIT</span>) <span class='op'>/</span> <span class='int'>2</span><span class='const'>DIGIT</span>
                    <span class='semicolon'>;</span> <span class='const'>Fixed</span><span class='op'>-</span><span class='id identifier rubyid_format'>format</span> <span class='id identifier rubyid_version'>version</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_day'>day</span>
<span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_month'>month</span>      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jan</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Feb</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mar</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Apr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>May</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jun</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jul</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Aug</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sep</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Oct</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Nov</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dec</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_date'>date</span><span class='op'>-</span><span class='id identifier rubyid_year'>year</span>       <span class='op'>=</span> <span class='int'>4</span><span class='const'>DIGIT</span>
<span class='id identifier rubyid_time'>time</span>            <span class='op'>=</span> <span class='int'>2</span><span class='const'>DIGIT</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='int'>2</span><span class='const'>DIGIT</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='int'>2</span><span class='const'>DIGIT</span>
                    <span class='semicolon'>;</span> <span class='const'>Hours</span> <span class='id identifier rubyid_minutes'>minutes</span> <span class='id identifier rubyid_seconds'>seconds</span>
<span class='id identifier rubyid_zone'>zone</span>            <span class='op'>=</span> (<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>) <span class='int'>4</span><span class='const'>DIGIT</span>
                    <span class='semicolon'>;</span> <span class='const'>Signed</span> <span class='id identifier rubyid_four'>four</span><span class='op'>-</span><span class='id identifier rubyid_digit'>digit</span> <span class='id identifier rubyid_value'>value</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_hhmm'>hhmm</span> <span class='id identifier rubyid_representing'>representing</span>
                    <span class='semicolon'>;</span> <span class='id identifier rubyid_hours'>hours</span> <span class='kw'>and</span> <span class='id identifier rubyid_minutes'>minutes</span> <span class='id identifier rubyid_east'>east</span> <span class='id identifier rubyid_of'>of</span> <span class='const'>Greenwich</span> (<span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_is'>is</span><span class='comma'>,</span>
                    <span class='semicolon'>;</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_amount'>amount</span> <span class='id identifier rubyid_that'>that</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_given'>given</span> <span class='id identifier rubyid_time'>time</span> <span class='id identifier rubyid_differs'>differs</span> <span class='id identifier rubyid_from'>from</span>
                    <span class='semicolon'>;</span> <span class='const'>Universal</span> <span class='const'>Time</span>).  <span class='const'>Subtracting</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_timezone'>timezone</span>
                    <span class='semicolon'>;</span> <span class='id identifier rubyid_from'>from</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_given'>given</span> <span class='id identifier rubyid_time'>time</span> <span class='id identifier rubyid_will'>will</span> <span class='id identifier rubyid_give'>give</span> <span class='id identifier rubyid_the'>the</span> <span class='const'>UT</span> <span class='id identifier rubyid_form'>form</span>.
                    <span class='semicolon'>;</span> <span class='const'>The</span> <span class='const'>Universal</span> <span class='const'>Time</span> <span class='id identifier rubyid_zone'>zone</span> <span class='id identifier rubyid_is'>is</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+0000</span><span class='tstring_end'>&quot;</span></span>.</code></pre>

<p>Note that <code>Time.strptime</code> <code>&quot;%d&quot;</code> flexibly parses either space or zero padding.  However, the DQUOTEs are <strong>not</strong> optional.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L47-L47'># File 'lib/net/imap/data_encoding.rb', line 47</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;%d-%b-%Y %H:%M:%S %z&quot;</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='SUBSCRIBED-constant' class='summary_signature'>SUBSCRIBED =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The mailbox name was subscribed to using the <a href="#subscribe-instance_method" title="Net::IMAP#subscribe (method)">#subscribe</a> command.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L173-L173'># File 'lib/net/imap/flags.rb', line 173</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Subscribed</span></pre>
  </li>
  <li>
    <span id='TRASH-constant' class='summary_signature'>TRASH =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Mailbox attribute indicating that this mailbox is used to hold messages that have been deleted or marked for deletion. In some server implementations, this might be a virtual mailbox, containing messages from other mailboxes that are marked with the <code>Deleted</code> message flag. Alternatively, this might just be advice that a client that chooses not to use the IMAP <code>Deleted</code> model should use as its trash location. In server implementations that strictly expect the IMAP <code>Deleted</code> model, this special use is likely not to be supported.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L258-L258'># File 'lib/net/imap/flags.rb', line 258</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Trash</span></pre>
  </li>
  <li>
    <span id='UNMARKED-constant' class='summary_signature'>UNMARKED =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The mailbox does not contain any additional messages since the last time the mailbox was selected.</p>

<p>If it is not feasible for the server to determine whether or not the mailbox is “interesting”, the server SHOULD NOT send either <code>Marked</code> or <code>Unmarked</code>. The server MUST NOT send more than one of <code>Marked</code>, <code>Unmarked</code>, and <code>NoSelect</code> for a single mailbox, and it MAY send none of these.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/flags.rb#L170-L170'># File 'lib/net/imap/flags.rb', line 170</a>    <pre class='code ruby'><span class='symbeg'>:</span><span class='const'>Unmarked</span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L791-L791'># File 'lib/net/imap.rb', line 791</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0.5.8</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
  <li>
    <span id='XOauth2Authenticator-constant' class='summary_signature nodoc'>XOauth2Authenticator =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/authenticators.rb#L35-L35'># File 'lib/net/imap/authenticators.rb', line 35</a>    <pre class='code ruby'><span class='const'><a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)">SASL</a></span><span class='op'>::</span><span class='const'><a href="IMAP/SASL/XOAuth2Authenticator.html" title="Net::IMAP::SASL::XOAuth2Authenticator (class)">XOAuth2Authenticator</a></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#debug-class_method" title=".debug (class method)">.<strong>debug</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the global debug mode.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#debug=-class_method" title=".debug= (class method)">.<strong>debug=</strong>(val)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the global debug mode.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#config-class_method" title=".config (class method)">.<strong>config</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the global <a href="IMAP/Config.html" title="Net::IMAP::Config (class)"><code>Config</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#decode_date-class_method" title="decode_date (class method)">.<strong>decode_date</strong>(string)  &#x21d2; Date </a>
      (also: .parse_date)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Decodes <code>string</code> as an <code>IMAP</code> formatted “date”.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#decode_datetime-class_method" title="decode_datetime (class method)">.<strong>decode_datetime</strong>(string)  &#x21d2; DateTime </a>
      (also: .parse_datetime)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Decodes <code>string</code> as an IMAP4 formatted “date-time”.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#decode_time-class_method" title="decode_time (class method)">.<strong>decode_time</strong>(string)  &#x21d2; Time </a>
      (also: .parse_time)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Decodes <code>string</code> as an IMAP4 formatted “date-time”.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#decode_utf7-class_method" title=".decode_utf7 (class method)">.<strong>decode_utf7</strong>(s)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Decode a string from modified UTF-7 format to UTF-8.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_imap_port-class_method" title=".default_imap_port (class method)">.<strong>default_imap_port</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#default_port-class_method" title="Net::IMAP.default_port (method)">.default_port</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_imaps_port-class_method" title=".default_imaps_port (class method)">.<strong>default_imaps_port</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#default_tls_port-class_method" title="Net::IMAP.default_tls_port (method)">.default_tls_port</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_port-class_method" title=".default_port (class method)">.<strong>default_port</strong>  </a>
      (also: .default_imap_port)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The default port for <code>IMAP</code> connections, port 143.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_ssl_port-class_method" title=".default_ssl_port (class method)">.<strong>default_ssl_port</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#default_tls_port-class_method" title="Net::IMAP.default_tls_port (method)">.default_tls_port</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#default_tls_port-class_method" title=".default_tls_port (class method)">.<strong>default_tls_port</strong>  </a>
      (also: .default_imaps_port, .default_ssl_port)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The default port for IMAPS connections, port 993.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encode_date-class_method" title=".encode_date (class method)">.<strong>encode_date</strong>(date)  </a>
      (also: .format_date)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Formats <code>time</code> as an IMAP4 date.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encode_datetime-class_method" title="encode_datetime (class method)">.<strong>encode_datetime</strong>(time)  &#x21d2; String </a>
      (also: .encode_time)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Formats <code>time</code> as an IMAP4 date-time.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encode_time-class_method" title=".encode_time (class method)">.<strong>encode_time</strong>(time)  </a>
      (also: .format_time)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#encode_datetime-class_method" title="Net::IMAP.encode_datetime (method)">.encode_datetime</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#encode_utf7-class_method" title=".encode_utf7 (class method)">.<strong>encode_utf7</strong>(s)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Encode a string from UTF-8 format to modified UTF-7.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#format_date-class_method" title=".format_date (class method)">.<strong>format_date</strong>(date)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#encode_date-class_method" title="Net::IMAP.encode_date (method)">.encode_date</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#format_datetime-class_method" title=".format_datetime (class method)">.<strong>format_datetime</strong>(time)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><dl class="rdoc-list note-list"><dt>DEPRECATED</dt><dd><p>The original version returned incorrectly formatted strings.</p></dd></dl></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#format_time-class_method" title=".format_time (class method)">.<strong>format_time</strong>(time)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#encode_time-class_method" title="Net::IMAP.encode_time (method)">.encode_time</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(host, port: nil, ssl: nil, response_handlers: nil, config: Config.global, **config_options)  &#x21d2; IMAP </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new <code>IMAP</code> object and connects it to the specified <a href="#host-instance_method" title="Net::IMAP#host (method)">#host</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_date-class_method" title=".parse_date (class method)">.<strong>parse_date</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#decode_date-class_method" title="Net::IMAP.decode_date (method)">.decode_date</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_datetime-class_method" title=".parse_datetime (class method)">.<strong>parse_datetime</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#decode_datetime-class_method" title="Net::IMAP.decode_datetime (method)">.decode_datetime</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_time-class_method" title=".parse_time (class method)">.<strong>parse_time</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#decode_time-class_method" title="Net::IMAP.decode_time (method)">.decode_time</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#saslprep-class_method" title=".saslprep (class method)">.<strong>saslprep</strong>(string, **opts)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Delegates to <a href="IMAP/StringPrep/SASLprep.html#saslprep-instance_method" title="Net::IMAP::StringPrep::SASLprep#saslprep (method)">StringPrep::SASLprep#saslprep</a>.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#capabilities_cached%3F-instance_method" title="#capabilities_cached? (instance method)">#<strong>capabilities_cached?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether capabilities have been cached.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#config-instance_method" title="#config (instance method)">#<strong>config</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The client configuration.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#connection_state-instance_method" title="#connection_state (instance method)">#<strong>connection_state</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current connection state.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#disconnected%3F-instance_method" title="#disconnected? (instance method)">#<strong>disconnected?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true if disconnected from the server.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#greeting-instance_method" title="#greeting (instance method)">#<strong>greeting</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the initial greeting sent by the server, an <a href="IMAP/UntaggedResponse.html" title="Net::IMAP::UntaggedResponse (class)"><code>UntaggedResponse</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#host-instance_method" title="#host (instance method)">#<strong>host</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The hostname this client connected to.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#port-instance_method" title="#port (instance method)">#<strong>port</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The port this client connected to.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#ssl_ctx-instance_method" title="#ssl_ctx (instance method)">#<strong>ssl_ctx</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html" target="_parent" title="SSLContext">SSLContext</a> used by the SSLSocket when TLS is attempted, even when the TLS handshake is unsuccessful.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#ssl_ctx_params-instance_method" title="#ssl_ctx_params (instance method)">#<strong>ssl_ctx_params</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the parameters that were sent to <a href="#ssl_ctx-instance_method" title="Net::IMAP#ssl_ctx (method)">#ssl_ctx</a> <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#method-i-set_params" target="_parent" title="set_params">set_params</a> when the connection tries to use TLS (even when unsuccessful).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#tls_verified%3F-instance_method" title="#tls_verified? (instance method)">#<strong>tls_verified?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true after the TLS negotiation has completed and the remote hostname has been verified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#enforce_logindisabled%3F-instance_method" title="#enforce_logindisabled? (instance method)">#<strong>enforce_logindisabled?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#max_response_size-instance_method" title="#max_response_size (instance method)">#<strong>max_response_size</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#max_response_size=-instance_method" title="#max_response_size= (instance method)">#<strong>max_response_size=</strong>(val)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#add_response_handler-instance_method" title="#add_response_handler (instance method)">#<strong>add_response_handler</strong>(handler = nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds a response handler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#append-instance_method" title="#append (instance method)">#<strong>append</strong>(mailbox, message, flags = nil, date_time = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.11" target="_parent" title="APPEND command [IMAP4rev1 §6.3.11]">APPEND command [IMAP4rev1 §6.3.11]</a> to append the <code>message</code> to the end of the <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#auth_capable%3F-instance_method" title="#auth_capable? (instance method)">#<strong>auth_capable?</strong>(mechanism)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether the server supports a given <a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)"><code>SASL</code></a> <code>mechanism</code> for use with the <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> command.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#auth_mechanisms-instance_method" title="#auth_mechanisms (instance method)">#<strong>auth_mechanisms</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> mechanisms that the server claims to support.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#authenticate-instance_method" title="#authenticate (instance method)">#<strong>authenticate</strong>(mechanism, *, sasl_ir: config.sasl_ir, registry: Net::IMAP::SASL.authenticators, **, &amp;)  &#x21d2; ok_resp </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.2.2" target="_parent" title="AUTHENTICATE command [IMAP4rev1 §6.2.2]">AUTHENTICATE command [IMAP4rev1 §6.2.2]</a> to authenticate the client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#capabilities-instance_method" title="#capabilities (instance method)">#<strong>capabilities</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the server capabilities.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#capability-instance_method" title="#capability (instance method)">#<strong>capability</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.1.1" target="_parent" title="CAPABILITY command [IMAP4rev1 §6.1.1]">CAPABILITY command [IMAP4rev1 §6.1.1]</a> and returns an array of capabilities that are supported by the server.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#capability%3F-instance_method" title="#capability? (instance method)">#<strong>capability?</strong>(capability)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#capable%3F-instance_method" title="#capable? (instance method)">#<strong>capable?</strong>(capability)  &#x21d2; Boolean </a>
      (also: #capability?)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns whether the server supports a given <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check-instance_method" title="#check (instance method)">#<strong>check</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.1" target="_parent" title="CHECK command [IMAP4rev1 §6.4.1]">CHECK command [IMAP4rev1 §6.4.1]</a> to request a checkpoint of the currently selected mailbox.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear_cached_capabilities-instance_method" title="#clear_cached_capabilities (instance method)">#<strong>clear_cached_capabilities</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Clears capabilities that have been remembered by the <code>IMAP</code> client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear_responses-instance_method" title="#clear_responses (instance method)">#<strong>clear_responses</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Clears and returns the unhandled <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a> hash or the unhandled responses array for a single response <code>type</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.2" target="_parent" title="CLOSE command [IMAP4rev1 §6.4.2]">CLOSE command [IMAP4rev1 §6.4.2]</a> to close the currently selected mailbox.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#copy-instance_method" title="#copy (instance method)">#<strong>copy</strong>(set, mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.7" target="_parent" title="COPY command [IMAP4rev1 §6.4.7]">COPY command [IMAP4rev1 §6.4.7]</a> to copy the specified message(s) to the end of the specified destination <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#create-instance_method" title="#create (instance method)">#<strong>create</strong>(mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.3" target="_parent" title="CREATE command [IMAP4rev1 §6.3.3]">CREATE command [IMAP4rev1 §6.3.3]</a> to create a new <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.4" target="_parent" title="DELETE command [IMAP4rev1 §6.3.4]">DELETE command [IMAP4rev1 §6.3.4]</a> to remove the <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disconnect-instance_method" title="#disconnect (instance method)">#<strong>disconnect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Disconnects from the server.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#enable-instance_method" title="#enable (instance method)">#<strong>enable</strong>(*capabilities)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc5161#section-3.1" target="_parent" title="ENABLE command [RFC5161 §3.2]">ENABLE command [RFC5161 §3.2]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.3.1" target="_parent" title="[IMAP4rev2 §6.3.1]">[IMAP4rev2 §6.3.1]</a> to enable the specified server <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#examine-instance_method" title="#examine (instance method)">#<strong>examine</strong>(mailbox, condstore: false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.2" target="_parent" title="EXAMINE command [IMAP4rev1 §6.3.2]">EXAMINE command [IMAP4rev1 §6.3.2]</a> to select a <code>mailbox</code> so that messages in the <code>mailbox</code> can be accessed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#expunge-instance_method" title="#expunge (instance method)">#<strong>expunge</strong>  &#x21d2; array of message sequence numbers </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.3" target="_parent" title="EXPUNGE command [IMAP4rev1 §6.4.3]">EXPUNGE command [IMAP4rev1 §6.4.3]</a> to permanently remove all messages with the <code>Deleted</code> flag from the currently selected mailbox.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#extract_responses-instance_method" title="#extract_responses (instance method)">#<strong>extract_responses</strong>(type) {|response| ... } &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Yields all of the unhandled <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a> for a single response <code>type</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(set, attr, changedsince: nil)  &#x21d2; array of FetchData </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.5" target="_parent" title="FETCH command [IMAP4rev1 §6.4.5]">FETCH command [IMAP4rev1 §6.4.5]</a> to retrieve data associated with a message in the mailbox.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getacl-instance_method" title="#getacl (instance method)">#<strong>getacl</strong>(mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc4314#section-3.3" target="_parent" title="GETACL command [RFC4314 §3.3]">GETACL command [RFC4314 §3.3]</a> along with a specified <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getquota-instance_method" title="#getquota (instance method)">#<strong>getquota</strong>(mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2087#section-4.2" target="_parent" title="GETQUOTA command [RFC2087 §4.2]">GETQUOTA command [RFC2087 §4.2]</a> along with specified <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getquotaroot-instance_method" title="#getquotaroot (instance method)">#<strong>getquotaroot</strong>(mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2087#section-4.3" target="_parent" title="GETQUOTAROOT command [RFC2087 §4.3]">GETQUOTAROOT command [RFC2087 §4.3]</a> along with the specified <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#id-instance_method" title="#id (instance method)">#<strong>id</strong>(client_id = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc2971#section-3.1" target="_parent" title="ID command [RFC2971 §3.1]">ID command [RFC2971 §3.1]</a> and returns a hash of the server’s response, or nil if the server does not identify itself.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#idle-instance_method" title="#idle (instance method)">#<strong>idle</strong>(timeout = nil, &amp;response_handler)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc6851#section-3" target="_parent" title="IDLE command [RFC2177 §3]">IDLE command [RFC2177 §3]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.3.13" target="_parent" title="[IMAP4rev2 §6.3.13]">[IMAP4rev2 §6.3.13]</a> that waits for notifications of new or expunged messages.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#idle_done-instance_method" title="#idle_done (instance method)">#<strong>idle_done</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Leaves IDLE, allowing <a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a> to return.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#list-instance_method" title="#list (instance method)">#<strong>list</strong>(refname, mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.8" target="_parent" title="LIST command [IMAP4rev1 §6.3.8]">LIST command [IMAP4rev1 §6.3.8]</a> and returns a subset of names from the complete set of all names available to the client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#login-instance_method" title="#login (instance method)">#<strong>login</strong>(user, password)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.2.3" target="_parent" title="LOGIN command [IMAP4rev1 §6.2.3]">LOGIN command [IMAP4rev1 §6.2.3]</a> to identify the client and carries the plaintext <code>password</code> authenticating this <code>user</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#logout-instance_method" title="#logout (instance method)">#<strong>logout</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.1.3" target="_parent" title="LOGOUT command [IMAP4rev1 §6.1.3]">LOGOUT command [IMAP4rev1 §6.1.3]</a> to inform the command to inform the server that the client is done with the connection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#logout!-instance_method" title="#logout! (instance method)">#<strong>logout!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> then, after receiving the <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>TaggedResponse</code></a> for the <code>LOGOUT</code>, calls <a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">#disconnect</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lsub-instance_method" title="#lsub (instance method)">#<strong>lsub</strong>(refname, mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.9" target="_parent" title="LSUB command [IMAP4rev1 §6.3.9]">LSUB command [IMAP4rev1 §6.3.9]</a> and returns a subset of names from the set of names that the user has declared as being “active” or “subscribed.”  <code>refname</code> and <code>mailbox</code> are interpreted as for <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#move-instance_method" title="#move (instance method)">#<strong>move</strong>(set, mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc6851#section-3.1" target="_parent" title="MOVE command [RFC6851 §3.1]">MOVE command [RFC6851 §3.1]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.8" target="_parent" title="[IMAP4rev2 §6.4.8]">[IMAP4rev2 §6.4.8]</a> to move the specified message(s) to the end of the specified destination <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#namespace-instance_method" title="#namespace (instance method)">#<strong>namespace</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2342#section-5" target="_parent" title="NAMESPACE command [RFC2342 §5]">NAMESPACE command [RFC2342 §5]</a> and returns the namespaces that are available.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#noop-instance_method" title="#noop (instance method)">#<strong>noop</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.1.2" target="_parent" title="NOOP command [IMAP4rev1 §6.1.2]">NOOP command [IMAP4rev1 §6.1.2]</a> to the server.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#remove_response_handler-instance_method" title="#remove_response_handler (instance method)">#<strong>remove_response_handler</strong>(handler)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Removes the response handler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rename-instance_method" title="#rename (instance method)">#<strong>rename</strong>(mailbox, newname)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.5" target="_parent" title="RENAME command [IMAP4rev1 §6.3.5]">RENAME command [IMAP4rev1 §6.3.5]</a> to change the name of the <code>mailbox</code> to <code>newname</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#response_handlers-instance_method" title="#response_handlers (instance method)">#<strong>response_handlers</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns all response handlers, including those that are added internally by commands.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#responses-instance_method" title="#responses (instance method)">#<strong>responses</strong>  &#x21d2; hash of {String] </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Yields or returns unhandled server responses.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#search-instance_method" title="#search (instance method)">#<strong>search</strong>(criteria, charset = nil)  &#x21d2; result </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.4" target="_parent" title="SEARCH command [IMAP4rev1 §6.4.4]">SEARCH command [IMAP4rev1 §6.4.4]</a> to search the mailbox for messages that match the given search <code>criteria</code>, and returns either a <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>SearchResult</code></a> or an <a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)"><code>ESearchResult</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#select-instance_method" title="#select (instance method)">#<strong>select</strong>(mailbox, condstore: false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.1" target="_parent" title="SELECT command [IMAP4rev1 §6.3.1]">SELECT command [IMAP4rev1 §6.3.1]</a> to select a <code>mailbox</code> so that messages in the <code>mailbox</code> can be accessed.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#setacl-instance_method" title="#setacl (instance method)">#<strong>setacl</strong>(mailbox, user, rights)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc4314#section-3.1" target="_parent" title="SETACL command [RFC4314 §3.1]">SETACL command [RFC4314 §3.1]</a> along with <code>mailbox</code>, <code>user</code> and the <code>rights</code> that user is to have on that mailbox.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#setquota-instance_method" title="#setquota (instance method)">#<strong>setquota</strong>(mailbox, quota)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2087#section-4.1" target="_parent" title="SETQUOTA command [RFC2087 §4.1]">SETQUOTA command [RFC2087 §4.1]</a> along with the specified <code>mailbox</code> and <code>quota</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sort-instance_method" title="#sort (instance method)">#<strong>sort</strong>(sort_keys, search_keys, charset)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="SORT command [RFC5256 §3]">SORT command [RFC5256 §3]</a> to search a mailbox for messages that match <code>search_keys</code> and return an array of message sequence numbers, sorted by <code>sort_keys</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#starttls-instance_method" title="#starttls (instance method)">#<strong>starttls</strong>(**options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.2.1" target="_parent" title="STARTTLS command [IMAP4rev1 §6.2.1]">STARTTLS command [IMAP4rev1 §6.2.1]</a> to start a TLS session.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>(mailbox, attr)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.10" target="_parent" title="STATUS command [IMAP4rev1 §6.3.10]">STATUS command [IMAP4rev1 §6.3.10]</a> and returns the status of the indicated <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#store-instance_method" title="#store (instance method)">#<strong>store</strong>(set, attr, value, unchangedsince: nil)  &#x21d2; array of FetchData </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.6" target="_parent" title="STORE command [IMAP4rev1 §6.4.6]">STORE command [IMAP4rev1 §6.4.6]</a> to alter data associated with messages in the mailbox, in particular their flags.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#subscribe-instance_method" title="#subscribe (instance method)">#<strong>subscribe</strong>(mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.6" target="_parent" title="SUBSCRIBE command [IMAP4rev1 §6.3.6]">SUBSCRIBE command [IMAP4rev1 §6.3.6]</a> to add the specified <code>mailbox</code> name to the server’s set of “active” or “subscribed” mailboxes as returned by <a href="#lsub-instance_method" title="Net::IMAP#lsub (method)">#lsub</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#thread-instance_method" title="#thread (instance method)">#<strong>thread</strong>(algorithm, search_keys, charset)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="THREAD command [RFC5256 §3]">THREAD command [RFC5256 §3]</a> to search a mailbox and return message sequence numbers in threaded format, as a <a href="IMAP/ThreadMember.html" title="Net::IMAP::ThreadMember (class)"><code>ThreadMember</code></a> tree.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_copy-instance_method" title="#uid_copy (instance method)">#<strong>uid_copy</strong>(set, mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID COPY command [IMAP4rev1 §6.4.8]">UID COPY command [IMAP4rev1 §6.4.8]</a> to copy the specified message(s) to the end of the specified destination <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_expunge-instance_method" title="#uid_expunge (instance method)">#<strong>uid_expunge</strong>  &#x21d2; array of message sequence numbers </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc4315#section-2.1" target="_parent" title="UID EXPUNGE command [RFC4315 §2.1]">UID EXPUNGE command [RFC4315 §2.1]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.9" target="_parent" title="[IMAP4rev2 §6.4.9]">[IMAP4rev2 §6.4.9]</a> to permanently remove all messages that have both the <code>\Deleted</code> flag set and a UID that is included in <code>uid_set</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_fetch-instance_method" title="#uid_fetch (instance method)">#<strong>uid_fetch</strong>(set, attr, changedsince: nil, partial: nil)  &#x21d2; array of FetchData (or UIDFetchData) </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID FETCH command [IMAP4rev1 §6.4.8]">UID FETCH command [IMAP4rev1 §6.4.8]</a> to retrieve data associated with a message in the mailbox.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_move-instance_method" title="#uid_move (instance method)">#<strong>uid_move</strong>(set, mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc6851#section-3.2" target="_parent" title="UID MOVE command [RFC6851 §3.2]">UID MOVE command [RFC6851 §3.2]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.9" target="_parent" title="[IMAP4rev2 §6.4.9]">[IMAP4rev2 §6.4.9]</a> to move the specified message(s) to the end of the specified destination <code>mailbox</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_search-instance_method" title="#uid_search (instance method)">#<strong>uid_search</strong>(criteria, charset = nil)  &#x21d2; result </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID SEARCH command [IMAP4rev1 §6.4.8]">UID SEARCH command [IMAP4rev1 §6.4.8]</a> to search the mailbox for messages that match the given searching criteria, and returns unique identifiers (<code>UID</code>s).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_sort-instance_method" title="#uid_sort (instance method)">#<strong>uid_sort</strong>(sort_keys, search_keys, charset)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="UID SORT command [RFC5256 §3]">UID SORT command [RFC5256 §3]</a> to search a mailbox for messages that match <code>search_keys</code> and return an array of unique identifiers, sorted by <code>sort_keys</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_store-instance_method" title="#uid_store (instance method)">#<strong>uid_store</strong>(set, attr, value, unchangedsince: nil)  &#x21d2; array of FetchData (or UIDFetchData) </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID STORE command [IMAP4rev1 §6.4.8]">UID STORE command [IMAP4rev1 §6.4.8]</a> to alter data associated with messages in the mailbox, in particular their flags.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#uid_thread-instance_method" title="#uid_thread (instance method)">#<strong>uid_thread</strong>(algorithm, search_keys, charset)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="UID THREAD command [RFC5256 §3]">UID THREAD command [RFC5256 §3]</a> Similar to <a href="#thread-instance_method" title="Net::IMAP#thread (method)">#thread</a>, but returns unique identifiers instead of message sequence numbers.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unselect-instance_method" title="#unselect (instance method)">#<strong>unselect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3691#section-3" target="_parent" title="UNSELECT command [RFC3691 §2]">UNSELECT command [RFC3691 §2]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.2" target="_parent" title="[IMAP4rev2 §6.4.2]">[IMAP4rev2 §6.4.2]</a> to free the session resources for a mailbox and return to the “<em>authenticated</em>” state.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unsubscribe-instance_method" title="#unsubscribe (instance method)">#<strong>unsubscribe</strong>(mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.7" target="_parent" title="UNSUBSCRIBE command [IMAP4rev1 §6.3.7]">UNSUBSCRIBE command [IMAP4rev1 §6.3.7]</a> to remove the specified <code>mailbox</code> name from the server’s set of “active” or “subscribed” mailboxes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#xlist-instance_method" title="#xlist (instance method)">#<strong>xlist</strong>(refname, mailbox)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Sends a XLIST command, and returns a subset of names from the complete set of all names available to the client.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_ssl_ctx-instance_method" title="#build_ssl_ctx (instance method)">#<strong>build_ssl_ctx</strong>(ssl)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#capabilities_from_resp_code-instance_method" title="#capabilities_from_resp_code (instance method)">#<strong>capabilities_from_resp_code</strong>(resp)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>NOTE: only call this for greeting, login, and authenticate.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#coerce_search_arg_to_seqset%3F-instance_method" title="#coerce_search_arg_to_seqset? (instance method)">#<strong>coerce_search_arg_to_seqset?</strong>(obj)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#coerce_search_array_arg_to_seqset%3F-instance_method" title="#coerce_search_array_arg_to_seqset? (instance method)">#<strong>coerce_search_array_arg_to_seqset?</strong>(obj)  &#x21d2; Boolean </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#convert_return_opts-instance_method" title="#convert_return_opts (instance method)">#<strong>convert_return_opts</strong>(unconverted)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#copy_internal-instance_method" title="#copy_internal (instance method)">#<strong>copy_internal</strong>(cmd, set, mailbox)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#expunge_internal-instance_method" title="#expunge_internal (instance method)">#<strong>expunge_internal</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#fetch_internal-instance_method" title="#fetch_internal (instance method)">#<strong>fetch_internal</strong>(cmd, set, attr, mod = nil, partial: nil, changedsince: nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#generate_tag-instance_method" title="#generate_tag (instance method)">#<strong>generate_tag</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#get_response-instance_method" title="#get_response (instance method)">#<strong>get_response</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#get_server_greeting-instance_method" title="#get_server_greeting (instance method)">#<strong>get_server_greeting</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#get_tagged_response-instance_method" title="#get_tagged_response (instance method)">#<strong>get_tagged_response</strong>(tag, cmd, timeout = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_searching_criteria-instance_method" title="#normalize_searching_criteria (instance method)">#<strong>normalize_searching_criteria</strong>(criteria)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#put_string-instance_method" title="#put_string (instance method)">#<strong>put_string</strong>(str)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#receive_responses-instance_method" title="#receive_responses (instance method)">#<strong>receive_responses</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#record_untagged_response-instance_method" title="#record_untagged_response (instance method)">#<strong>record_untagged_response</strong>(resp)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>store name =&gt; […, data].</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#record_untagged_response_code-instance_method" title="#record_untagged_response_code (instance method)">#<strong>record_untagged_response_code</strong>(resp)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>store code.name =&gt; […, code.data].</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#sasl_adapter-instance_method" title="#sasl_adapter (instance method)">#<strong>sasl_adapter</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#search_args-instance_method" title="#search_args (instance method)">#<strong>search_args</strong>(keys, charset_arg = nil, return: nil, charset: nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#search_internal-instance_method" title="#search_internal (instance method)">#<strong>search_internal</strong>(cmd)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_command-instance_method" title="#send_command (instance method)">#<strong>send_command</strong>(cmd, *args, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_command_returning_fetch_results-instance_method" title="#send_command_returning_fetch_results (instance method)">#<strong>send_command_returning_fetch_results</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_command_with_continuations-instance_method" title="#send_command_with_continuations (instance method)">#<strong>send_command_with_continuations</strong>(cmd, *args)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls send_command, yielding the text of each <a href="IMAP/ContinuationRequest.html" title="Net::IMAP::ContinuationRequest (class)"><code>ContinuationRequest</code></a> and responding with each block result.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_data-instance_method" title="#send_data (instance method)">#<strong>send_data</strong>(data, tag = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_date_data-instance_method" title="#send_date_data (instance method)">#<strong>send_date_data</strong>(date)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_list_data-instance_method" title="#send_list_data (instance method)">#<strong>send_list_data</strong>(list, tag = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_literal-instance_method" title="#send_literal (instance method)">#<strong>send_literal</strong>(str, tag = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_number_data-instance_method" title="#send_number_data (instance method)">#<strong>send_number_data</strong>(num)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_quoted_string-instance_method" title="#send_quoted_string (instance method)">#<strong>send_quoted_string</strong>(str)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_string_data-instance_method" title="#send_string_data (instance method)">#<strong>send_string_data</strong>(str, tag = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_symbol_data-instance_method" title="#send_symbol_data (instance method)">#<strong>send_symbol_data</strong>(symbol)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#send_time_data-instance_method" title="#send_time_data (instance method)">#<strong>send_time_data</strong>(time)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#sort_internal-instance_method" title="#sort_internal (instance method)">#<strong>sort_internal</strong>(cmd, sort_keys, search_keys, charset)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#start_imap_connection-instance_method" title="#start_imap_connection (instance method)">#<strong>start_imap_connection</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#start_receiver_thread-instance_method" title="#start_receiver_thread (instance method)">#<strong>start_receiver_thread</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#start_tls_session-instance_method" title="#start_tls_session (instance method)">#<strong>start_tls_session</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#state_authenticated!-instance_method" title="#state_authenticated! (instance method)">#<strong>state_authenticated!</strong>(resp = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#state_logout!-instance_method" title="#state_logout! (instance method)">#<strong>state_logout!</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#state_selected!-instance_method" title="#state_selected! (instance method)">#<strong>state_selected!</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#state_unselected!-instance_method" title="#state_unselected! (instance method)">#<strong>state_unselected!</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#store_internal-instance_method" title="#store_internal (instance method)">#<strong>store_internal</strong>(cmd, set, attr, flags, unchangedsince: nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#tcp_socket-instance_method" title="#tcp_socket (instance method)">#<strong>tcp_socket</strong>(host, port)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#thread_internal-instance_method" title="#thread_internal (instance method)">#<strong>thread_internal</strong>(cmd, algorithm, search_keys, charset)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#validate_data-instance_method" title="#validate_data (instance method)">#<strong>validate_data</strong>(data)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#idle_response_timeout-instance_method" title="#idle_response_timeout (instance method)">#<strong>idle_response_timeout</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#open_timeout-instance_method" title="#open_timeout (instance method)">#<strong>open_timeout</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(host, port: nil, ssl: nil, response_handlers: nil, config: Config.global, **config_options)  &#x21d2; <code>IMAP</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new <code>IMAP</code> object and connects it to the specified <a href="#host-instance_method" title="Net::IMAP#host (method)">#host</a>.</p>

<h4 id="label-Options">Options</h4>

<p>Accepts the following options:</p>
<dl class="rdoc-list label-list"><dt>port</dt>
<dd>
<p>Port number.  Defaults to 993 when <code>ssl</code> is truthy, and 143 otherwise.</p>
</dd><dt>ssl</dt>
<dd>
<p>If <code>true</code>, the connection will use TLS with the default params set by <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#method-i-set_params" target="_parent" title="OpenSSL::SSL::SSLContext#set_params">OpenSSL::SSL::SSLContext#set_params</a>. If <code>ssl</code> is a hash, it’s passed to <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#method-i-set_params" target="_parent" title="OpenSSL::SSL::SSLContext#set_params">OpenSSL::SSL::SSLContext#set_params</a>; the keys are names of attribute assignment methods on <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html">SSLContext</a>.  For example:</p>
<dl class="rdoc-list label-list"><dt><a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#attribute-i-ca_file" target="_parent" title="ca_file">ca_file</a></dt>
<dd>
<p>The path to a file containing a PEM-format CA certificate.</p>
</dd><dt><a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#attribute-i-ca_path" target="_parent" title="ca_path">ca_path</a></dt>
<dd>
<p>The path to a directory containing CA certificates in PEM format.</p>
</dd><dt><a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#method-i-min_version-3D" target="_parent" title="min_version">min_version</a></dt>
<dd>
<p>Sets the lower bound on the supported SSL/TLS protocol version. Set to an <code>OpenSSL</code> constant such as <code>OpenSSL::SSL::TLS1_2_VERSION</code>,</p>
</dd><dt><a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#attribute-i-verify_mode" target="_parent" title="verify_mode">verify_mode</a></dt>
<dd>
<p>SSL session verification mode.  Valid modes include <code>OpenSSL::SSL::VERIFY_PEER</code> and <code>OpenSSL::SSL::VERIFY_NONE</code>.</p>
</dd></dl>

<p>See <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html" target="_parent" title="OpenSSL::SSL::SSLContext">OpenSSL::SSL::SSLContext</a> for other valid SSL context params.</p>

<p>See DeprecatedClientOptions.new for deprecated SSL arguments.</p>
</dd><dt>response_handlers</dt>
<dd>
<p>A list of response handlers to be added before the receiver thread is started.  This ensures every server response is handled, including the #greeting.  Note that the greeting is handled in the current thread, but all other responses are handled in the receiver thread.</p>
</dd><dt>config</dt>
<dd>
<p>A Net::IMAP::Config object to use as the basis for #config.  By default, the global Net::IMAP.config is used.</p>

<blockquote>
<p><strong>NOTE:</strong> <a href="#config-class_method" title="Net::IMAP.config (method)">.config</a> does not set #config directly—it sets the <em>parent</em> config for inheritance.  Every client creates its own unique #config.</p>
</blockquote>

<p>All other keyword arguments are forwarded to Net::IMAP::Config.new, to initialize the client’s #config. For example:</p>
<dl class="rdoc-list label-list"><dt><code>open_timeout</code></dt>
<dd>
<p>Seconds to wait until a connection is opened</p>
</dd><dt><code>idle_response_timeout</code></dt>
<dd>
<p>Seconds to wait until an IDLE response is received</p>
</dd></dl>

<p>See Net::IMAP::Config for other valid options.</p>
</dd></dl>

<h4 id="label-Examples">Examples</h4>

<p>Connect to cleartext port 143 at mail.example.com and receive the server greeting:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>ssl:</span> <span class='kw'>false</span>) <span class='comment'># =&gt; #&lt;Net::IMAP:0x00007f79b0872bd0&gt;
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span>          <span class='op'>=&gt;</span> <span class='int'>143</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_tls_verified?'><a href="#tls_verified%3F-instance_method" title="Net::IMAP#tls_verified? (method)">tls_verified?</a></span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>      <span class='op'>=&gt;</span> <span class='label'>name:</span> (<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span> <span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PREAUTH</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>=&gt;</span> <span class='id identifier rubyid_status'><a href="#status-instance_method" title="Net::IMAP#status (method)">status</a></span>
<span class='id identifier rubyid_status'><a href="#status-instance_method" title="Net::IMAP#status (method)">status</a></span> <span class='comment'># =&gt; &quot;OK&quot;
</span><span class='comment'># The client is connected in the &quot;Not Authenticated&quot; state.</span></code></pre>

<p>Connect with TLS to port 993</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>ssl:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; #&lt;Net::IMAP:0x00007f79b0872bd0&gt;
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span>          <span class='op'>=&gt;</span> <span class='int'>993</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_tls_verified?'><a href="#tls_verified%3F-instance_method" title="Net::IMAP#tls_verified? (method)">tls_verified?</a></span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>      <span class='op'>=&gt;</span> <span class='label'>name:</span> (<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>OK</span><span class='regexp_end'>/i</span></span> <span class='op'>|</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>PREAUTH</span><span class='regexp_end'>/i</span></span>) <span class='op'>=&gt;</span> <span class='id identifier rubyid_status'><a href="#status-instance_method" title="Net::IMAP#status (method)">status</a></span>
<span class='kw'>case</span> <span class='id identifier rubyid_status'><a href="#status-instance_method" title="Net::IMAP#status (method)">status</a></span>
<span class='kw'>in</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>OK</span><span class='regexp_end'>/i</span></span>
  <span class='comment'># The client is connected in the &quot;Not Authenticated&quot; state.
</span>  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'><a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">authenticate</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>joe_user</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>joes_password</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>in</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>PREAUTH</span><span class='regexp_end'>/i</span></span>
  <span class='comment'># The client is connected in the &quot;Authenticated&quot; state.
</span><span class='kw'>end</span></code></pre>

<p>Connect with prior authentication, for example using an SSL certificate:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ssl_ctx_params'><a href="#ssl_ctx_params-instance_method" title="Net::IMAP#ssl_ctx_params (method)">ssl_ctx_params</a></span> <span class='op'>=</span> {
  <span class='label'>cert:</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Certificate</span>.<span class='id identifier rubyid_new'>new</span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>client.crt</span><span class='tstring_end'>&quot;</span></span>))<span class='comma'>,</span>
  <span class='label'>key:</span>  <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>EC</span>.<span class='id identifier rubyid_new'>new</span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>client.key</span><span class='tstring_end'>&#39;</span></span>))<span class='comma'>,</span>
  <span class='label'>extra_chain_cert:</span> [
    <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>X509</span><span class='op'>::</span><span class='const'>Certificate</span>.<span class='id identifier rubyid_new'>new</span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>intermediate.crt</span><span class='tstring_end'>&quot;</span></span>))<span class='comma'>,</span>
  ]<span class='comma'>,</span>
}
<span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>ssl:</span> <span class='id identifier rubyid_ssl_ctx_params'><a href="#ssl_ctx_params-instance_method" title="Net::IMAP#ssl_ctx_params (method)">ssl_ctx_params</a></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span>          <span class='op'>=&gt;</span> <span class='int'>993</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_tls_verified?'><a href="#tls_verified%3F-instance_method" title="Net::IMAP#tls_verified? (method)">tls_verified?</a></span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>      <span class='op'>=&gt;</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PREAUTH</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># The client is connected in the &quot;Authenticated&quot; state.</span></code></pre>

<h4 id="label-Exceptions">Exceptions</h4>

<p>The most common errors are:</p>
<dl class="rdoc-list label-list"><dt>Errno::ECONNREFUSED</dt>
<dd>
<p>Connection refused by <a href="#host-instance_method" title="Net::IMAP#host (method)">#host</a> or an intervening firewall.</p>
</dd><dt>Errno::ETIMEDOUT</dt>
<dd>
<p>Connection timed out (possibly due to packets being dropped by an intervening firewall).</p>
</dd><dt>Errno::ENETUNREACH</dt>
<dd>
<p>There is no route to that network.</p>
</dd><dt>SocketError</dt>
<dd>
<p>Hostname not known or other socket error.</p>
</dd><dt>Net::IMAP::ByeResponseError</dt>
<dd>
<p>Connected to the host successfully, but it immediately said goodbye.</p>
</dd></dl>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1065-L1108'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1065' data-end='1108'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1065</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'><a href="IMAP/DeprecatedClientOptions.html#initialize-instance_method" title="Net::IMAP::DeprecatedClientOptions#initialize (method)">initialize</a></span>(<span class='id identifier rubyid_host'><a href="#host-instance_method" title="Net::IMAP#host (method)">host</a></span><span class='comma'>,</span> <span class='label'>port:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>ssl:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>response_handlers:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>config:</span> <span class='const'><a href="IMAP/Config.html" title="Net::IMAP::Config (class)">Config</a></span>.<span class='id identifier rubyid_global'><a href="IMAP/Config.html#global-class_method" title="Net::IMAP::Config.global (method)">global</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_config_options'>config_options</span>)
  <span class='kw'>super</span>()
  <span class='comment'># Config options
</span>  <span class='ivar'>@host</span> <span class='op'>=</span> <span class='id identifier rubyid_host'><a href="#host-instance_method" title="Net::IMAP#host (method)">host</a></span>
  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='const'><a href="IMAP/Config.html" title="Net::IMAP::Config (class)">Config</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/Config.html#new-class_method" title="Net::IMAP::Config.new (method)">new</a></span>(<span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_config_options'>config_options</span>)
  <span class='ivar'>@port</span> <span class='op'>=</span> <span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span> <span class='op'>||</span> (<span class='id identifier rubyid_ssl'>ssl</span> <span class='op'>?</span> <span class='const'><a href="#SSL_PORT-constant" title="Net::IMAP::SSL_PORT (constant)">SSL_PORT</a></span> <span class='op'>:</span> <span class='const'><a href="#PORT-constant" title="Net::IMAP::PORT (constant)">PORT</a></span>)
  <span class='ivar'>@ssl_ctx_params</span><span class='comma'>,</span> <span class='ivar'>@ssl_ctx</span> <span class='op'>=</span> <span class='id identifier rubyid_build_ssl_ctx'><a href="#build_ssl_ctx-instance_method" title="Net::IMAP#build_ssl_ctx (method)">build_ssl_ctx</a></span>(<span class='id identifier rubyid_ssl'>ssl</span>)

  <span class='comment'># Basic Client State
</span>  <span class='ivar'>@utf8_strings</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@debug_output_bol</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@greeting</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@tls_verified</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@connection_state</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ConnectionState.html" title="Net::IMAP::ConnectionState (class)">ConnectionState</a></span><span class='op'>::</span><span class='const'><a href="IMAP/ConnectionState.html#NotAuthenticated-constant" title="Net::IMAP::ConnectionState::NotAuthenticated (constant)">NotAuthenticated</a></span>.<span class='id identifier rubyid_new'>new</span>

  <span class='comment'># Client Protocol Receiver
</span>  <span class='ivar'>@parser</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ResponseParser.html" title="Net::IMAP::ResponseParser (class)">ResponseParser</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/ResponseParser.html#new-class_method" title="Net::IMAP::ResponseParser.new (method)">new</a></span>(<span class='label'>config:</span> <span class='ivar'>@config</span>)
  <span class='ivar'>@responses</span> <span class='op'>=</span> <span class='const'>Hash</span>.<span class='id identifier rubyid_new'>new</span> {<span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span>[<span class='id identifier rubyid_k'>k</span>] <span class='op'>=</span> [] }
  <span class='ivar'>@response_handlers</span> <span class='op'>=</span> []
  <span class='ivar'>@receiver_thread</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@receiver_thread_exception</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@receiver_thread_terminating</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_response_handlers'><a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">response_handlers</a></span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='id identifier rubyid_add_response_handler'><a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">add_response_handler</a></span>(<span class='id identifier rubyid__1'>_1</span>) <span class='kw'>end</span>

  <span class='comment'># Client Protocol Sender (including state for currently running commands)
</span>  <span class='ivar'>@tag_prefix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RUBY</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@tagno</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@tagged_responses</span> <span class='op'>=</span> {}
  <span class='ivar'>@tagged_response_arrival</span> <span class='op'>=</span> <span class='id identifier rubyid_new_cond'>new_cond</span>
  <span class='ivar'>@continued_command_tag</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@continuation_request_arrival</span> <span class='op'>=</span> <span class='id identifier rubyid_new_cond'>new_cond</span>
  <span class='ivar'>@continuation_request_exception</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@idle_done_cond</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@logout_command_tag</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='comment'># Connection
</span>  <span class='ivar'>@sock</span> <span class='op'>=</span> <span class='id identifier rubyid_tcp_socket'><a href="#tcp_socket-instance_method" title="Net::IMAP#tcp_socket (method)">tcp_socket</a></span>(<span class='ivar'>@host</span><span class='comma'>,</span> <span class='ivar'>@port</span>)
  <span class='ivar'>@reader</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ResponseReader.html" title="Net::IMAP::ResponseReader (class)">ResponseReader</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/ResponseReader.html#new-class_method" title="Net::IMAP::ResponseReader.new (method)">new</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='ivar'>@sock</span>)
  <span class='id identifier rubyid_start_tls_session'><a href="#start_tls_session-instance_method" title="Net::IMAP#start_tls_session (method)">start_tls_session</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_ssl_ctx'><a href="#ssl_ctx-instance_method" title="Net::IMAP#ssl_ctx (method)">ssl_ctx</a></span>
  <span class='id identifier rubyid_start_imap_connection'><a href="#start_imap_connection-instance_method" title="Net::IMAP#start_imap_connection (method)">start_imap_connection</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="debug-class_method">
  <h3 class='signature rw first'>
    .<strong>debug</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the global debug mode. Delegates to <code>{Net::IMAP.config</code>.debug}.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L817-L817'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='817' data-end='817'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 817</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_debug'>debug</span><span class='semicolon'>;</span> <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_debug'>debug</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="debug=-class_method">
  <h3 class='signature rw'>
    .<strong>debug=</strong>(val)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the global debug mode. Delegates to <code>{Net::IMAP.config</code>.debug=}.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L821-L823'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='821' data-end='823'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 821</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_debug='>debug=</span>(<span class='id identifier rubyid_val'>val</span>)
  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Net::IMAP.debug (method)">debug</a></span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="config-class_method">
  <h3 class='signature  first'>
    .<strong>config</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the global <a href="IMAP/Config.html" title="Net::IMAP::Config (class)"><code>IMAP::Config</code></a> object</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L813-L813'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='813' data-end='813'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 813</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_config'>config</span><span class='semicolon'>;</span> <span class='const'><a href="IMAP/Config.html" title="Net::IMAP::Config (class)">Config</a></span>.<span class='id identifier rubyid_global'><a href="IMAP/Config.html#global-class_method" title="Net::IMAP::Config.global (method)">global</a></span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="decode_date-class_method">
  <h3 class='signature '>
    .<strong>decode_date</strong>(string)  &#x21d2; <code>Date</code>     <span class='aliases'>Also known as: <span class='names'>.parse_date</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Decodes <code>string</code> as an <code>IMAP</code> formatted “date”.</p>

<p>Double quotes are optional.  Day of month may be padded with zero or space.  See STRFDATE.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L90-L93'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='90' data-end='93'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 90</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_decode_date'>decode_date</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_delete_suffix'>delete_suffix</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span>)
  <span class='const'>Date</span>.<span class='id identifier rubyid_strptime'>strptime</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='const'><a href="#STRFDATE-constant" title="Net::IMAP::STRFDATE (constant)">STRFDATE</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="decode_datetime-class_method">
  <h3 class='signature '>
    .<strong>decode_datetime</strong>(string)  &#x21d2; <code>DateTime</code>     <span class='aliases'>Also known as: <span class='names'>.parse_datetime</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Decodes <code>string</code> as an IMAP4 formatted “date-time”.</p>

<p>NOTE: Although double-quotes are not optional in the <code>IMAP</code> grammar, <code>IMAP</code> currently parses “date-time” values as “quoted” strings and this removes the quotation marks.  To be useful for strings which have already been parsed as a quoted string, this method makes double-quotes optional.</p>

<p>See STRFTIME.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L112-L117'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='112' data-end='117'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 112</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_decode_datetime'>decode_datetime</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='kw'>unless</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='CHAR'>?&quot;</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='CHAR'>?&quot;</span>)
    <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;%s&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> [<span class='id identifier rubyid_string'>string</span>]
  <span class='kw'>end</span>
  <span class='const'>DateTime</span>.<span class='id identifier rubyid_strptime'>strptime</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='const'><a href="#STRFTIME-constant" title="Net::IMAP::STRFTIME (constant)">STRFTIME</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="decode_time-class_method">
  <h3 class='signature '>
    .<strong>decode_time</strong>(string)  &#x21d2; <code>Time</code>     <span class='aliases'>Also known as: <span class='names'>.parse_time</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Decodes <code>string</code> as an IMAP4 formatted “date-time”.</p>

<p>Same as <a href="#decode_datetime-class_method" title="Net::IMAP.decode_datetime (method)">.decode_datetime</a>, but returning a Time instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L124-L129'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='124' data-end='129'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 124</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_decode_time'>decode_time</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='kw'>unless</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='CHAR'>?&quot;</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='CHAR'>?&quot;</span>)
    <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;%s&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> [<span class='id identifier rubyid_string'>string</span>]
  <span class='kw'>end</span>
  <span class='const'>Time</span>.<span class='id identifier rubyid_strptime'>strptime</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='const'><a href="#STRFTIME-constant" title="Net::IMAP::STRFTIME (constant)">STRFTIME</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="decode_utf7-class_method">
  <h3 class='signature '>
    .<strong>decode_utf7</strong>(s)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Decode a string from modified UTF-7 format to UTF-8.</p>

<p>UTF-7 is a 7-bit encoding of Unicode [UTF7].  <code>IMAP</code> uses a slightly modified version of this to encode mailbox names containing non-ASCII characters; see [IMAP] section 5.1.3.</p>

<p><code>IMAP</code> does <em>not</em> automatically encode and decode mailbox names to and from UTF-7.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L57-L65'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='57' data-end='65'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 57</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_decode_utf7'>decode_utf7</span>(<span class='id identifier rubyid_s'>s</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;([A-Za-z0-9,])?-</span><span class='regexp_end'>/n</span></span>) {
    <span class='kw'>if</span> <span class='id identifier rubyid_base64'>base64</span> <span class='op'>=</span> <span class='backref'>$1</span>
      (<span class='id identifier rubyid_base64'>base64</span>.<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>===</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_unpack1'>unpack1</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_encode'>encode</span>(<span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16BE</span>)
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_imap_port-class_method">
  <h3 class='signature '>
    .<strong>default_imap_port</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#default_port-class_method" title="Net::IMAP.default_port (method)">.default_port</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L836-L836'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='836' data-end='836'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 836</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_default_imap_port'>default_imap_port</span> <span class='id identifier rubyid_default_port'><a href="#default_port-class_method" title="Net::IMAP.default_port (method)">default_port</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_imaps_port-class_method">
  <h3 class='signature '>
    .<strong>default_imaps_port</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#default_tls_port-class_method" title="Net::IMAP.default_tls_port (method)">.default_tls_port</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L837-L837'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='837' data-end='837'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 837</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_default_imaps_port'>default_imaps_port</span> <span class='id identifier rubyid_default_tls_port'><a href="#default_tls_port-class_method" title="Net::IMAP.default_tls_port (method)">default_tls_port</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_port-class_method">
  <h3 class='signature '>
    .<strong>default_port</strong>  
    <span class='aliases'>Also known as: <span class='names'>.default_imap_port</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The default port for <code>IMAP</code> connections, port 143</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L826-L828'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='826' data-end='828'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 826</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_default_port'>default_port</span>
  <span class='kw'>return</span> <span class='const'><a href="#PORT-constant" title="Net::IMAP::PORT (constant)">PORT</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_ssl_port-class_method">
  <h3 class='signature '>
    .<strong>default_ssl_port</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#default_tls_port-class_method" title="Net::IMAP.default_tls_port (method)">.default_tls_port</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L838-L838'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='838' data-end='838'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 838</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_default_ssl_port'>default_ssl_port</span> <span class='id identifier rubyid_default_tls_port'><a href="#default_tls_port-class_method" title="Net::IMAP.default_tls_port (method)">default_tls_port</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="default_tls_port-class_method">
  <h3 class='signature '>
    .<strong>default_tls_port</strong>  
    <span class='aliases'>Also known as: <span class='names'>.default_imaps_port, .default_ssl_port</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The default port for IMAPS connections, port 993</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L831-L833'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='831' data-end='833'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 831</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_default_tls_port'>default_tls_port</span>
  <span class='kw'>return</span> <span class='const'><a href="#SSL_PORT-constant" title="Net::IMAP::SSL_PORT (constant)">SSL_PORT</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encode_date-class_method">
  <h3 class='signature '>
    .<strong>encode_date</strong>(date)  
    <span class='aliases'>Also known as: <span class='names'>.format_date</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Formats <code>time</code> as an IMAP4 date.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L80-L82'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='80' data-end='82'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 80</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_encode_date'>encode_date</span>(<span class='id identifier rubyid_date'>date</span>)
  <span class='id identifier rubyid_date'>date</span>.<span class='id identifier rubyid_to_date'>to_date</span>.<span class='id identifier rubyid_strftime'>strftime</span> <span class='const'><a href="#STRFDATE-constant" title="Net::IMAP::STRFDATE (constant)">STRFDATE</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encode_datetime-class_method">
  <h3 class='signature '>
    .<strong>encode_datetime</strong>(time)  &#x21d2; <code>String</code>     <span class='aliases'>Also known as: <span class='names'>.encode_time</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Formats <code>time</code> as an IMAP4 date-time.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L98-L100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='98' data-end='100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 98</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_encode_datetime'>encode_datetime</span>(<span class='id identifier rubyid_time'>time</span>)
  <span class='id identifier rubyid_time'>time</span>.<span class='id identifier rubyid_to_datetime'>to_datetime</span>.<span class='id identifier rubyid_strftime'>strftime</span> <span class='const'><a href="#STRFTIME-constant" title="Net::IMAP::STRFTIME (constant)">STRFTIME</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encode_time-class_method">
  <h3 class='signature '>
    .<strong>encode_time</strong>(time)  
    <span class='aliases'>Also known as: <span class='names'>.format_time</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#encode_datetime-class_method" title="Net::IMAP.encode_datetime (method)">.encode_datetime</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L132-L132'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='132' data-end='132'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 132</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_encode_time'>encode_time</span>     <span class='id identifier rubyid_encode_datetime'><a href="#encode_datetime-class_method" title="Net::IMAP.encode_datetime (method)">encode_datetime</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encode_utf7-class_method">
  <h3 class='signature '>
    .<strong>encode_utf7</strong>(s)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Encode a string from UTF-8 format to modified UTF-7.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L68-L77'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='68' data-end='77'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 68</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_encode_utf7'>encode_utf7</span>(<span class='id identifier rubyid_s'>s</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(&amp;)|[^\x20-\x7e]+</span><span class='regexp_end'>/</span></span>) {
    <span class='kw'>if</span> <span class='backref'>$1</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;-</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_base64'>base64</span> <span class='op'>=</span> [<span class='backref'>$&amp;</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16BE</span>)].<span class='id identifier rubyid_pack'>pack</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m0</span><span class='tstring_end'>&quot;</span></span>)
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_base64'>base64</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="Net::IMAP#delete (method)">delete</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_tr'>tr</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  }.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="format_date-class_method">
  <h3 class='signature '>
    .<strong>format_date</strong>(date)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#encode_date-class_method" title="Net::IMAP.encode_date (method)">.encode_date</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L133-L133'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='133' data-end='133'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 133</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_format_date'>format_date</span>     <span class='id identifier rubyid_encode_date'><a href="#encode_date-class_method" title="Net::IMAP.encode_date (method)">encode_date</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="format_datetime-class_method">
  <h3 class='signature '>
    .<strong>format_datetime</strong>(time)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <dl class="rdoc-list note-list"><dt>DEPRECATED</dt>
<dd>
<p>The original version returned incorrectly formatted strings. Strings returned by encode_datetime or format_time use the correct IMAP4rev1 syntax for “date-time”.</p>
</dd></dl>

<p>This invalid format has been temporarily retained for backward compatibility.  A future release will change this method to return the correct format.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L149-L154'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='149' data-end='154'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 149</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_format_datetime'>format_datetime</span>(<span class='id identifier rubyid_time'>time</span>)
  <span class='id identifier rubyid_warn'>warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'>.format_datetime incorrectly formats IMAP date-time. </span><span class='tstring_end'>&quot;</span></span> \
       <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Convert to </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'>.encode_datetime or </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'>.format_time instead.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='label'>uplevel:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>category:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_deprecated'>deprecated</span>)
  <span class='id identifier rubyid_time'>time</span>.<span class='id identifier rubyid_strftime'>strftime</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d-%b-%Y %H:%M %z</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="format_time-class_method">
  <h3 class='signature '>
    .<strong>format_time</strong>(time)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#encode_time-class_method" title="Net::IMAP.encode_time (method)">.encode_time</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L134-L134'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='134' data-end='134'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 134</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_format_time'>format_time</span>     <span class='id identifier rubyid_encode_time'><a href="#encode_time-class_method" title="Net::IMAP.encode_time (method)">encode_time</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_date-class_method">
  <h3 class='signature '>
    .<strong>parse_date</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#decode_date-class_method" title="Net::IMAP.decode_date (method)">.decode_date</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L135-L135'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='135' data-end='135'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 135</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_parse_date'>parse_date</span>      <span class='id identifier rubyid_decode_date'><a href="#decode_date-class_method" title="Net::IMAP.decode_date (method)">decode_date</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_datetime-class_method">
  <h3 class='signature '>
    .<strong>parse_datetime</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#decode_datetime-class_method" title="Net::IMAP.decode_datetime (method)">.decode_datetime</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L136-L136'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='136' data-end='136'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 136</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_parse_datetime'>parse_datetime</span>  <span class='id identifier rubyid_decode_datetime'><a href="#decode_datetime-class_method" title="Net::IMAP.decode_datetime (method)">decode_datetime</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_time-class_method">
  <h3 class='signature '>
    .<strong>parse_time</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#decode_time-class_method" title="Net::IMAP.decode_time (method)">.decode_time</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/data_encoding.rb#L137-L137'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='137' data-end='137'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/data_encoding.rb', line 137</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_parse_time'>parse_time</span>      <span class='id identifier rubyid_decode_time'><a href="#decode_time-class_method" title="Net::IMAP.decode_time (method)">decode_time</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="saslprep-class_method">
  <h3 class='signature priv'>
    .<strong>saslprep</strong>(string, **opts)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Delegates to <a href="IMAP/StringPrep/SASLprep.html#saslprep-instance_method" title="Net::IMAP::StringPrep::SASLprep#saslprep (method)">StringPrep::SASLprep#saslprep</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3813-L3815'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3813' data-end='3815'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3813</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_saslprep'>saslprep</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opts'>opts</span>)
  <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span><span class='op'>::</span><span class='const'><a href="IMAP/StringPrep.html" title="Net::IMAP::StringPrep (module)">StringPrep</a></span><span class='op'>::</span><span class='const'><a href="IMAP/StringPrep/SASLprep.html" title="Net::IMAP::StringPrep::SASLprep (module)">SASLprep</a></span>.<span class='id identifier rubyid_saslprep'><a href="IMAP/StringPrep/SASLprep.html#saslprep-class_method" title="Net::IMAP::StringPrep::SASLprep.saslprep (method)">saslprep</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opts'>opts</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="capabilities_cached?-instance_method">
  <h3 class='signature ro first'>
    #<strong>capabilities_cached?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether capabilities have been cached.  When true, <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a> and <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> don’t require sending a <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a> command to the server.</p>

<p>See Net::IMAP@Capabilities for more about IMAP capabilities.</p>

<p>Related: <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>, <a href="#clear_cached_capabilities-instance_method" title="Net::IMAP#clear_cached_capabilities (method)">#clear_cached_capabilities</a></p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1223-L1225'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1223' data-end='1225'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1223</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_capabilities_cached?'>capabilities_cached?</span>
  <span class='op'>!</span><span class='op'>!</span><span class='ivar'>@capabilities</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="config-instance_method">
  <h3 class='signature ro'>
    #<strong>config</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The client configuration.  See <a href="IMAP/Config.html" title="Net::IMAP::Config (class)"><code>IMAP::Config</code></a>.</p>

<p>By default, the client’s local configuration inherits from the global <a href="#config-class_method" title="Net::IMAP.config (method)">.config</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L848-L848'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='848' data-end='848'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 848</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'>config</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="connection_state-instance_method">
  <h3 class='signature ro'>
    #<strong>connection_state</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current connection state.</p>

<p>Once an <code>IMAP</code> connection is established, the connection is in one of four states: <code>not_authenticated</code>, <code>authenticated</code>, <code>selected</code>, and <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>. Most commands are valid only in certain states.</p>

<p>The connection state object responds to <code>to_sym</code> and <code>name</code> with the name of the current connection state, as a Symbol or String.  Future versions of <code>net-imap</code> may store additional information on the state object.</p>

<p>From <a href="https://www.rfc-editor.org/rfc/rfc9051#section-3" target="_parent" title="RFC9051">RFC9051</a>:</p>

<pre class="code ruby"><code class="ruby">       {<span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span>}
       <span class='op'>|</span><span class='id identifier rubyid_connection'>connection</span> <span class='id identifier rubyid_established'>established</span><span class='op'>|</span>
       {<span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span>}
                  <span class='op'>|</span><span class='op'>|</span>
                  <span class='CHAR'>\</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>
{--------------------------------------}
|          server greeting             |
{--------------------------------------}
          || (1)       || (2)        || (3)
          \/           ||            ||
{-----------------}    ||            ||
|Not Authenticated|    ||            ||
{-----------------}    ||            ||
 || (7)   || (4)       ||            ||
 ||       \/           \/            ||
 ||     {----------------}           ||
 ||     | Authenticated  |&lt;=++       ||
 ||     {----------------}  ||       ||
 ||       || (7)   || (5)   || (6)   ||
 ||       ||       \/       ||       ||
 ||       ||    {--------}  ||       ||
 ||       ||    |Selected|==++       ||
 ||       ||    {--------}           ||
 ||       ||       || (7)            ||
 \/       \/       \/                \/
{--------------------------------------}
|               Logout                 |
{--------------------------------------}
                  ||
                  \/
    {-------------------------------}
    |both sides close the connection|
    {-------------------------------}</span></code></pre>

<blockquote>
<p>Legend for the above diagram:</p>
<ol><li>
<p>connection without pre-authentication (<code>OK</code> #greeting)</p>
</li><li>
<p>pre-authenticated connection (<code>PREAUTH</code> #greeting)</p>
</li><li>
<p>rejected connection (<code>BYE</code> #greeting)</p>
</li><li>
<p>successful #login or #authenticate command</p>
</li><li>
<p>successful #select or #examine command</p>
</li><li>
<p>#close or #unselect command, unsolicited <code>CLOSED</code> response code, or failed #select or #examine command</p>
</li><li>
<p>#logout command, server shutdown, or connection closed</p>
</li></ol>
</blockquote>

<p>Before the server greeting, the state is <code>not_authenticated</code>. After the connection closes, the state remains <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L953-L953'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='953' data-end='953'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 953</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_connection_state'>connection_state</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disconnected?-instance_method">
  <h3 class='signature ro'>
    #<strong>disconnected?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true if disconnected from the server.</p>

<p>Related: <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>, <a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">#disconnect</a></p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1144-L1146'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1144' data-end='1146'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1144</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_disconnected?'>disconnected?</span>
  <span class='kw'>return</span> <span class='ivar'>@sock</span>.<span class='id identifier rubyid_closed?'>closed?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enforce_logindisabled?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>enforce_logindisabled?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3555-L3561'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3555' data-end='3561'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3555</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_enforce_logindisabled?'>enforce_logindisabled?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_enforce_logindisabled'>enforce_logindisabled</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_when_capabilities_cached'>when_capabilities_cached</span>
    <span class='id identifier rubyid_capabilities_cached?'><a href="#capabilities_cached%3F-instance_method" title="Net::IMAP#capabilities_cached? (method)">capabilities_cached?</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_enforce_logindisabled'>enforce_logindisabled</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="greeting-instance_method">
  <h3 class='signature ro'>
    #<strong>greeting</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the initial greeting sent by the server, an <a href="IMAP/UntaggedResponse.html" title="Net::IMAP::UntaggedResponse (class)"><code>IMAP::UntaggedResponse</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L842-L842'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='842' data-end='842'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 842</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_greeting'>greeting</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="host-instance_method">
  <h3 class='signature ro'>
    #<strong>host</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The hostname this client connected to</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L874-L874'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='874' data-end='874'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 874</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_host'>host</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="max_response_size-instance_method">
  <h3 class='signature rw  nodoc'>
    #<strong>max_response_size</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L869-L869'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='869' data-end='869'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 869</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_max_response_size'>max_response_size</span><span class='semicolon'>;</span>      <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_max_response_size'>max_response_size</span>       <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="max_response_size=-instance_method">
  <h3 class='signature rw  nodoc'>
    #<strong>max_response_size=</strong>(val)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L870-L870'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='870' data-end='870'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 870</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_max_response_size='>max_response_size=</span>(<span class='id identifier rubyid_val'>val</span>) <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_max_response_size'><a href="#max_response_size-instance_method" title="Net::IMAP#max_response_size (method)">max_response_size</a></span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="port-instance_method">
  <h3 class='signature ro'>
    #<strong>port</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The port this client connected to</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L877-L877'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='877' data-end='877'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 877</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_port'>port</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ssl_ctx-instance_method">
  <h3 class='signature ro'>
    #<strong>ssl_ctx</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html" target="_parent" title="SSLContext">SSLContext</a> used by the SSLSocket when TLS is attempted, even when the TLS handshake is unsuccessful.  The context object will be frozen.</p>

<p>Returns <code>nil</code> for a plaintext connection.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L885-L885'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='885' data-end='885'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 885</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ssl_ctx'>ssl_ctx</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ssl_ctx_params-instance_method">
  <h3 class='signature ro'>
    #<strong>ssl_ctx_params</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the parameters that were sent to <a href="#ssl_ctx-instance_method" title="Net::IMAP#ssl_ctx (method)">#ssl_ctx</a> <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#method-i-set_params" target="_parent" title="set_params">set_params</a> when the connection tries to use TLS (even when unsuccessful).</p>

<p>Returns <code>false</code> for a plaintext connection.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L892-L892'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='892' data-end='892'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 892</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ssl_ctx_params'>ssl_ctx_params</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tls_verified?-instance_method">
  <h3 class='signature ro'>
    #<strong>tls_verified?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true after the TLS negotiation has completed and the remote hostname has been verified.  Returns false when TLS has been established but peer verification was disabled.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1113-L1113'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1113' data-end='1113'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1113</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tls_verified?'>tls_verified?</span><span class='semicolon'>;</span> <span class='ivar'>@tls_verified</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="add_response_handler-instance_method">
  <h3 class='signature  first'>
    #<strong>add_response_handler</strong>(handler = nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds a response handler. For example, to detect when the server sends a new EXISTS response (which normally indicates new messages being added to the mailbox), add the following handler after selecting the mailbox:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_add_response_handler'>add_response_handler</span> { <span class='op'>|</span><span class='id identifier rubyid_resp'>resp</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span>(<span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span><span class='op'>::</span><span class='const'><a href="IMAP/UntaggedResponse.html" title="Net::IMAP::UntaggedResponse (class)">UntaggedResponse</a></span>) <span class='kw'>and</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXISTS</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mailbox now has </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_data'>data</span><span class='embexpr_end'>}</span><span class='tstring_content'> messages</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
}</code></pre>

<p>Response handlers can also be added when the client is created before the receiver thread is started, by the <a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">#response_handlers</a> argument to <a href="#new-class_method" title="Net::IMAP.new (method)">.new</a>. This ensures every server response is handled, including the <a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">#greeting</a>.</p>

<p>Related: <a href="#remove_response_handler-instance_method" title="Net::IMAP#remove_response_handler (method)">#remove_response_handler</a>, <a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">#response_handlers</a></p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3299-L3304'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3299' data-end='3304'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3299</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_response_handler'>add_response_handler</span>(<span class='id identifier rubyid_handler'>handler</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>two Procs are passed</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_handler'>handler</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@response_handlers</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_block'>block</span> <span class='op'>||</span> <span class='id identifier rubyid_handler'>handler</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="append-instance_method">
  <h3 class='signature '>
    #<strong>append</strong>(mailbox, message, flags = nil, date_time = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.11" target="_parent" title="APPEND command [IMAP4rev1 §6.3.11]">APPEND command [IMAP4rev1 §6.3.11]</a> to append the <code>message</code> to the end of the <code>mailbox</code>. The optional <code>flags</code> argument is an array of flags initially passed to the new message.  The optional <code>date_time</code> argument specifies the creation time to assign to the new message; it defaults to the current time.</p>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_append'>append</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='heredoc_beg'>&lt;&lt;EOF</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> [<span class='symbeg'>:</span><span class='const'>Seen</span>]<span class='comma'>,</span> <span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>)
<span class='tstring_content'>Subject: hello
From: shugo@ruby-lang.org
To: shugo@ruby-lang.org

hello world
</span><span class='heredoc_end'>EOF</span></code></pre>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if the mailbox does not exist (it is not created automatically), or if the flags, date_time, or message arguments contain errors.</p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>If <code>UIDPLUS</code> [<a href="https://www.rfc-editor.org/rfc/rfc4315.html">RFC4315</a>] is supported and the destination supports persistent UIDs, the server’s response should include an <code>APPENDUID</code> response code with <a href="IMAP/UIDPlusData.html" title="Net::IMAP::UIDPlusData (class)"><code>IMAP::UIDPlusData</code></a>. This will report the UIDVALIDITY of the destination mailbox and the assigned UID of the appended message.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2018-L2026'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2018' data-end='2026'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2018</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_append'>append</span>(<span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_date_time'>date_time</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> []
  <span class='kw'>if</span> <span class='id identifier rubyid_flags'>flags</span>
    <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_flags'>flags</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_push'>push</span>(<span class='id identifier rubyid_date_time'>date_time</span>) <span class='kw'>if</span> <span class='id identifier rubyid_date_time'>date_time</span>
  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_push'>push</span>(<span class='const'><a href="IMAP/Literal.html" title="Net::IMAP::Literal (class)">Literal</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_message'>message</span>))
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>APPEND</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="auth_capable?-instance_method">
  <h3 class='signature '>
    #<strong>auth_capable?</strong>(mechanism)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether the server supports a given <a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)"><code>IMAP::SASL</code></a> <code>mechanism</code> for use with the <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> command.  The <code>mechanism</code> is supported when <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> includes <code>&quot;AUTH=#{mechanism.to_s.upcase}&quot;</code>.  When available, cached capabilities are used without sending a new <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a> command to the server.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AUTH=PLAIN</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_capable?'>auth_capable?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&quot;</span></span>       <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_capable?'>auth_capable?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>blurdybloop</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># =&gt; false</span></code></pre>

<p>Related: <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>, <a href="#auth_mechanisms-instance_method" title="Net::IMAP#auth_mechanisms (method)">#auth_mechanisms</a>, <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a></p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1213-L1215'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1213' data-end='1215'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1213</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_auth_capable?'>auth_capable?</span>(<span class='id identifier rubyid_mechanism'>mechanism</span>)
  <span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AUTH=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mechanism'>mechanism</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="auth_mechanisms-instance_method">
  <h3 class='signature '>
    #<strong>auth_mechanisms</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> mechanisms that the server claims to support. These are derived from the <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> with an <code>AUTH=</code> prefix.</p>

<p>This may be different when the connection is cleartext or using TLS.  Most servers will drop all <code>AUTH=</code> mechanisms from <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> after the connection has authenticated.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='label'>ssl:</span> <span class='kw'>false</span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span>    <span class='comment'># =&gt; [&quot;IMAP4REV1&quot;, &quot;LOGINDISABLED&quot;]
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_mechanisms'>auth_mechanisms</span> <span class='comment'># =&gt; []
</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_starttls'><a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">starttls</a></span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span>    <span class='comment'># =&gt; [&quot;IMAP4REV1&quot;, &quot;AUTH=PLAIN&quot;, &quot;AUTH=XOAUTH2&quot;,
</span>                     <span class='comment'>#     &quot;AUTH=OAUTHBEARER&quot;]
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_mechanisms'>auth_mechanisms</span> <span class='comment'># =&gt; [&quot;PLAIN&quot;, &quot;XOAUTH2&quot;, &quot;OAUTHBEARER&quot;]
</span>
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'><a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">authenticate</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>XOAUTH2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_oauth2_access_token'>oauth2_access_token</span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_mechanisms'>auth_mechanisms</span> <span class='comment'># =&gt; []</span></code></pre>

<p>Related: <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>, <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1196-L1200'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1196' data-end='1200'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1196</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_auth_mechanisms'>auth_mechanisms</span>
  <span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span>
    .<span class='id identifier rubyid_grep'>grep</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\AAUTH=</span><span class='regexp_end'>/i</span></span>)
    .<span class='id identifier rubyid_map'>map</span> { <span class='id identifier rubyid__1'>_1</span>.<span class='id identifier rubyid_delete_prefix'>delete_prefix</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AUTH=</span><span class='tstring_end'>&quot;</span></span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="authenticate-instance_method">
  <h3 class='signature '>
    #<strong>authenticate</strong>(mechanism, *, sasl_ir: config.sasl_ir, registry: Net::IMAP::SASL.authenticators, **, &amp;)  &#x21d2; <code>ok_resp</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.2.2" target="_parent" title="AUTHENTICATE command [IMAP4rev1 §6.2.2]">AUTHENTICATE command [IMAP4rev1 §6.2.2]</a> to authenticate the client.  If successful, the connection enters the “<em>authenticated</em>” state.</p>

<p><code>mechanism</code> is the name of the SASL authentication mechanism to be used.</p>

<p><code>sasl_ir</code> allows or disallows sending an “initial response” (see the <code>SASL-IR</code> capability, below).  Defaults to the <a href="#config-instance_method" title="Net::IMAP#config (method)">#config</a> value for <code>sasl_ir</code>, which defaults to <code>true</code>.</p>

<p>The <code>registry</code> kwarg can be used to select the mechanism implementation from a custom registry.  See <a href="IMAP/SASL.html#authenticator-class_method" title="Net::IMAP::SASL.authenticator (method)">SASL.authenticator</a> and <a href="IMAP/SASL/Authenticators.html" title="Net::IMAP::SASL::Authenticators (class)"><code>IMAP::SASL::Authenticators</code></a>.</p>

<p>All other arguments are forwarded to the registered <a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)"><code>IMAP::SASL</code></a> authenticator for the requested mechanism.  <em>The documentation for each individual mechanism must be consulted for its specific parameters.</em></p>

<p>Related: <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>, <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>, <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, <a href="#auth_mechanisms-instance_method" title="Net::IMAP#auth_mechanisms (method)">#auth_mechanisms</a></p>

<h4 id="label-Mechanisms">Mechanisms</h4>

<p>Each mechanism has different properties and requirements.  Please consult the documentation for the specific mechanisms you are using:</p>
<dl class="rdoc-list note-list"><dt><code>ANONYMOUS</code></dt>
<dd>
<p>See <a href="rdoc-ref:Net::IMAP::SASL::AnonymousAuthenticator">AnonymousAuthenticator</a>.</p>

<p>Allows the user to gain access to public services or resources without authenticating or disclosing an identity.</p>
</dd><dt><code>EXTERNAL</code></dt>
<dd>
<p>See <a href="rdoc-ref:Net::IMAP::SASL::ExternalAuthenticator">ExternalAuthenticator</a>.</p>

<p>Authenticates using already established credentials, such as a TLS certificate or IPsec.</p>
</dd><dt><code>OAUTHBEARER</code></dt>
<dd>
<p>See <a href="rdoc-ref:Net::IMAP::SASL::OAuthBearerAuthenticator">OAuthBearerAuthenticator</a>.</p>

<p>Login using an OAuth2 Bearer token.  This is the standard mechanism for using OAuth2 with SASL, but it is not yet deployed as widely as <code>XOAUTH2</code>.</p>
</dd><dt><code>PLAIN</code></dt>
<dd>
<p>See <a href="rdoc-ref:Net::IMAP::SASL::PlainAuthenticator">PlainAuthenticator</a>.</p>

<p>Login using clear-text username and password.</p>
</dd><dt><code>SCRAM-SHA-1</code></dt>
<dt><code>SCRAM-SHA-256</code></dt>
<dd>
<p>See <a href="rdoc-ref:Net::IMAP::SASL::ScramAuthenticator">ScramAuthenticator</a>.</p>

<p>Login by username and password.  The password is not sent to the server but is used in a salted challenge/response exchange. <code>SCRAM-SHA-1</code> and <code>SCRAM-SHA-256</code> are directly supported by Net::IMAP::SASL.  New authenticators can easily be added for any other <code>SCRAM-*</code> mechanism if the digest algorithm is supported by OpenSSL::Digest.</p>
</dd><dt><code>XOAUTH2</code></dt>
<dd>
<p>See <a href="rdoc-ref:Net::IMAP::SASL::XOAuth2Authenticator">XOAuth2Authenticator</a>.</p>

<p>Login using a username and an OAuth2 access token.  Non-standard and obsoleted by <code>OAUTHBEARER</code>, but widely supported.</p>
</dd></dl>

<p>See the <a href="https://www.iana.org/assignments/sasl-mechanisms/sasl-mechanisms.xhtml">SASL mechanism registry</a> for a list of all <a href="IMAP/SASL.html" title="Net::IMAP::SASL (module)"><code>IMAP::SASL</code></a> mechanisms and their specifications.  To register new authenticators, see <a href="IMAP/Authenticators.html" title="Net::IMAP::Authenticators (module)"><code>IMAP::Authenticators</code></a>.</p>

<h5 id="label-Deprecated+mechanisms">Deprecated mechanisms</h5>

<p><em>Obsolete mechanisms should be avoided, but are still available for backwards compatibility.  See</em> Net::IMAP::SASL@Deprecated+mechanisms. <em>Using a deprecated mechanism will print a warning.</em></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p><code>&quot;AUTH=#{mechanism}&quot;</code> capabilities indicate server support for mechanisms.  Use <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a> or <a href="#auth_mechanisms-instance_method" title="Net::IMAP#auth_mechanisms (method)">#auth_mechanisms</a> to check for support before using a particular mechanism.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>if</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_capable?'><a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">auth_capable?</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>XOAUTH2</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'>authenticate</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>XOAUTH2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_oauth2_access_token'>oauth2_access_token</span>
<span class='kw'>elsif</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_auth_capable?'><a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">auth_capable?</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_authenticate'>authenticate</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span>
<span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_capability?'><a href="#capability%3F-instance_method" title="Net::IMAP#capability? (method)">capability?</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGINDISABLED</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_login'><a href="#login-instance_method" title="Net::IMAP#login (method)">login</a></span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span>
<span class='kw'>else</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No acceptable authentication mechanism is available</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>Although servers should list all supported SASL mechanisms, they may allow authentication with an unlisted <code>mechanism</code>.</p>

<p>If [<a href="https://www.rfc-editor.org/rfc/rfc4959.html">SASL-IR</a>] is supported and the appropriate <code>&quot;AUTH=#{mechanism}&quot;</code> capability is present, an “initial response” may be sent as an argument to the <code>AUTHENTICATE</code> command, saving a round-trip.  The SASL exchange allows for server challenges and client responses, but many mechanisms expect the client to “respond” first.  The initial response will only be sent for “client-first” mechanisms.</p>

<p>Server capabilities may change after <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>, <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>, and <code>#authenticate</code>. Previously cached <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> will be cleared when this method completes.  If the <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>IMAP::TaggedResponse</code></a> to <code>#authenticate</code> includes updated capabilities, they will be cached.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1508-L1511'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1508' data-end='1511'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1508</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_authenticate'>authenticate</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>sasl_ir:</span> <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_sasl_ir'>sasl_ir</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_props'>props</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_callback'>callback</span>)
  <span class='id identifier rubyid_sasl_adapter'><a href="#sasl_adapter-instance_method" title="Net::IMAP#sasl_adapter (method)">sasl_adapter</a></span>.<span class='id identifier rubyid_authenticate'>authenticate</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>sasl_ir:</span> <span class='id identifier rubyid_sasl_ir'>sasl_ir</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_props'>props</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_callback'>callback</span>)
    .<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='id identifier rubyid_state_authenticated!'><a href="#state_authenticated!-instance_method" title="Net::IMAP#state_authenticated! (method)">state_authenticated!</a></span> <span class='id identifier rubyid__1'>_1</span> <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_ssl_ctx-instance_method">
  <h3 class='signature priv'>
    #<strong>build_ssl_ctx</strong>(ssl)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3750-L3763'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3750' data-end='3763'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3750</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_ssl_ctx'>build_ssl_ctx</span>(<span class='id identifier rubyid_ssl'>ssl</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_ssl'>ssl</span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> (<span class='const'>Hash</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='id identifier rubyid_ssl'>ssl</span>) <span class='op'>||</span> {}).<span class='id identifier rubyid_freeze'>freeze</span>
    <span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'>SSLContext</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>
    <span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_set_params'>set_params</span>(<span class='id identifier rubyid_params'>params</span>)
    <span class='kw'>if</span> <span class='kw'>defined?</span>(<span class='const'>VerifyCallbackProc</span>)
      <span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_verify_callback'>verify_callback</span> <span class='op'>=</span> <span class='const'>VerifyCallbackProc</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_context'>context</span>.<span class='id identifier rubyid_freeze'>freeze</span>
    [<span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='id identifier rubyid_context'>context</span>]
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="capabilities-instance_method">
  <h3 class='signature '>
    #<strong>capabilities</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the server capabilities.  When available, cached capabilities are used without sending a new <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a> command to the server.</p>

<p>To ensure a case-insensitive comparison, <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a> can be used instead.</p>

<p><strong><em>NOTE:</strong> Most <code>IMAP</code> methods do not currently modify their behaviour according to the server’s advertised <code>#capabilities</code>.</em></p>

<p>See Net::IMAP@Capabilities for more about IMAP capabilities.</p>

<p>Related: <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, <a href="#auth_mechanisms-instance_method" title="Net::IMAP#auth_mechanisms (method)">#auth_mechanisms</a>, <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>, <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1172-L1174'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1172' data-end='1174'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1172</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_capabilities'>capabilities</span>
  <span class='ivar'>@capabilities</span> <span class='op'>||</span> <span class='id identifier rubyid_capability'><a href="#capability-instance_method" title="Net::IMAP#capability (method)">capability</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="capabilities_from_resp_code-instance_method">
  <h3 class='signature priv'>
    #<strong>capabilities_from_resp_code</strong>(resp)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>NOTE: only call this for greeting, login, and authenticate</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3486-L3491'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3486' data-end='3491'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3486</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_capabilities_from_resp_code'>capabilities_from_resp_code</span>(<span class='id identifier rubyid_resp'>resp</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>PREAUTH</span><span class='words_sep'> </span><span class='tstring_content'>OK</span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_any?'>any?</span> { <span class='id identifier rubyid__1'>_1</span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_name'>name</span> }
  <span class='kw'>return</span> <span class='kw'>unless</span> (<span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_code'>code</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_code'>code</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_casecmp?'>casecmp?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CAPABILITY</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_code'>code</span>.<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="capability-instance_method">
  <h3 class='signature '>
    #<strong>capability</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.1.1" target="_parent" title="CAPABILITY command [IMAP4rev1 §6.1.1]">CAPABILITY command [IMAP4rev1 §6.1.1]</a> and returns an array of capabilities that are supported by the server. The result is stored for use by <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a> and <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>.</p>

<p><strong><em>NOTE:</strong> Most <code>IMAP</code> methods do not currently modify their behaviour according to the server’s advertised <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>.</em></p>

<p><code>IMAP</code> automatically stores and discards capability data according to the requirements and recommendations in <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.1.1" target="_parent" title="IMAP4rev2 §6.1.1">IMAP4rev2 §6.1.1</a>, <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.2" target="_parent" title="§6.2">§6.2</a>, and <a href="https://www.rfc-editor.org/rfc/rfc9051#section-7.1" target="_parent" title="§7.1">§7.1</a>. Use <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, or <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> to this cache and avoid sending the <code>#capability</code> command unnecessarily.</p>

<p>See Net::IMAP@Capabilities for more about IMAP capabilities.</p>

<p>Related: <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, <code>#capability</code>, <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1261-L1266'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1261' data-end='1266'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1261</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_capability'>capability</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CAPABILITY</span><span class='tstring_end'>&quot;</span></span>)
    <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CAPABILITY</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span>.<span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="capability?-instance_method">
  <h3 class='signature '>
    #<strong>capability?</strong>(capability)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1159-L1159'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1159' data-end='1159'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1159</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_capability?'>capability?</span> <span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="capable?-instance_method">
  <h3 class='signature '>
    #<strong>capable?</strong>(capability)  &#x21d2; <code>Boolean</code> 
    <span class='aliases'>Also known as: <span class='names'>#capability?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns whether the server supports a given <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>.  When available, cached <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> are used without sending a new <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a> command to the server.</p>

<p><strong><em>NOTE:</strong> Most <code>IMAP</code> methods do not currently modify their behaviour according to the server’s advertised <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>.</em></p>

<p>See Net::IMAP@Capabilities for more about IMAP capabilities.</p>

<p>Related: <a href="#auth_capable%3F-instance_method" title="Net::IMAP#auth_capable? (method)">#auth_capable?</a>, <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>, <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>, <a href="#enable-instance_method" title="Net::IMAP#enable (method)">#enable</a></p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1158-L1158'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1158' data-end='1158'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1158</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_capable?'>capable?</span>(<span class='id identifier rubyid_capability'><a href="#capability-instance_method" title="Net::IMAP#capability (method)">capability</a></span>) <span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span>.<span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_capability'><a href="#capability-instance_method" title="Net::IMAP#capability (method)">capability</a></span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_upcase'>upcase</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check-instance_method">
  <h3 class='signature '>
    #<strong>check</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.1" target="_parent" title="CHECK command [IMAP4rev1 §6.4.1]">CHECK command [IMAP4rev1 §6.4.1]</a> to request a checkpoint of the currently selected mailbox.  This performs implementation-specific housekeeping; for instance, reconciling the mailbox’s in-memory and on-disk state.</p>

<p>Related: <a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a>, <a href="#noop-instance_method" title="Net::IMAP#noop (method)">#noop</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2034-L2036'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2034' data-end='2036'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2034</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check'>check</span>
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CHECK</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_cached_capabilities-instance_method">
  <h3 class='signature '>
    #<strong>clear_cached_capabilities</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Clears capabilities that have been remembered by the <code>IMAP</code> client. This forces a <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a> command to be sent the next time a <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> query method is called.</p>

<p><code>IMAP</code> automatically discards its cached capabilities when they can change.  Explicitly calling this <em>should</em> be unnecessary for well-behaved servers.</p>

<p>Related: <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a>, <a href="#capabilities_cached%3F-instance_method" title="Net::IMAP#capabilities_cached? (method)">#capabilities_cached?</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1236-L1241'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1236' data-end='1241'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1236</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_cached_capabilities'>clear_cached_capabilities</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CAPABILITY</span><span class='tstring_end'>&quot;</span></span>)
    <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_responses-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>clear_responses</strong>  &#x21d2; <code>Hash</code> </span>
      <span class='overload'>#<strong>clear_responses</strong>(type)  &#x21d2; <code>Array</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Clears and returns the unhandled <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a> hash or the unhandled responses array for a single response <code>type</code>.</p>

<p>Clearing responses is synchronized with other threads.  The lock is released before returning.</p>

<p>Related: <a href="#extract_responses-instance_method" title="Net::IMAP#extract_responses (method)">#extract_responses</a>, <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a>, <a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">#response_handlers</a></p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3228-L3239'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3228' data-end='3239'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3228</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_responses'>clear_responses</span>(<span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> {
    <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span>
      <span class='ivar'>@responses</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="Net::IMAP#delete (method)">delete</a></span>(<span class='id identifier rubyid_type'>type</span>) <span class='op'>||</span> []
    <span class='kw'>else</span>
      <span class='ivar'>@responses</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_transform_values'>transform_values</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span>)
        .<span class='id identifier rubyid_tap'>tap</span> { <span class='id identifier rubyid__1'>_1</span>.<span class='id identifier rubyid_default'>default</span> <span class='op'>=</span> [].<span class='id identifier rubyid_freeze'>freeze</span> }
        .<span class='id identifier rubyid_tap'>tap</span> { <span class='ivar'>@responses</span>.<span class='id identifier rubyid_clear'>clear</span> }
    <span class='kw'>end</span>
  }
    .<span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close-instance_method">
  <h3 class='signature '>
    #<strong>close</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.2" target="_parent" title="CLOSE command [IMAP4rev1 §6.4.2]">CLOSE command [IMAP4rev1 §6.4.2]</a> to close the currently selected mailbox.  The CLOSE command permanently removes from the mailbox all messages that have the <code>\Deleted</code> flag set.</p>

<p>Related: <a href="#unselect-instance_method" title="Net::IMAP#unselect (method)">#unselect</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2044-L2047'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2044' data-end='2047'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2044</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CLOSE</span><span class='tstring_end'>&quot;</span></span>)
    .<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='id identifier rubyid_state_authenticated!'><a href="#state_authenticated!-instance_method" title="Net::IMAP#state_authenticated! (method)">state_authenticated!</a></span> <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="coerce_search_arg_to_seqset?-instance_method">
  <h3 class='signature priv'>
    #<strong>coerce_search_arg_to_seqset?</strong>(obj)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3732-L3739'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3732' data-end='3739'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3732</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_coerce_search_arg_to_seqset?'>coerce_search_arg_to_seqset?</span>(<span class='id identifier rubyid_obj'>obj</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_obj'>obj</span>
  <span class='kw'>when</span> <span class='const'>Set</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='op'>*</span> <span class='kw'>then</span> <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='const'>Range</span>       <span class='kw'>then</span> <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='const'>Array</span>       <span class='kw'>then</span> <span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_all?'>all?</span> { <span class='id identifier rubyid_coerce_search_array_arg_to_seqset?'><a href="#coerce_search_array_arg_to_seqset%3F-instance_method" title="Net::IMAP#coerce_search_array_arg_to_seqset? (method)">coerce_search_array_arg_to_seqset?</a></span> <span class='id identifier rubyid__1'>_1</span> }
  <span class='kw'>else</span>                  <span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_to_sequence_set'>to_sequence_set</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="coerce_search_array_arg_to_seqset?-instance_method">
  <h3 class='signature priv'>
    #<strong>coerce_search_array_arg_to_seqset?</strong>(obj)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3741-L3748'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3741' data-end='3748'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3741</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_coerce_search_array_arg_to_seqset?'>coerce_search_array_arg_to_seqset?</span>(<span class='id identifier rubyid_obj'>obj</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_obj'>obj</span>
  <span class='kw'>when</span> <span class='const'>Integer</span> <span class='kw'>then</span> <span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_positive?'>positive?</span> <span class='op'>||</span> <span class='id identifier rubyid_obj'>obj</span> <span class='op'>==</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='kw'>when</span> <span class='const'>String</span>  <span class='kw'>then</span> <span class='const'><a href="IMAP/ResponseParser.html" title="Net::IMAP::ResponseParser (class)">ResponseParser</a></span><span class='op'>::</span><span class='const'><a href="IMAP/ResponseParser/Patterns.html" title="Net::IMAP::ResponseParser::Patterns (module)">Patterns</a></span><span class='op'>::</span><span class='const'><a href="IMAP/ResponseParser/Patterns.html#SEQUENCE_SET_STR-constant" title="Net::IMAP::ResponseParser::Patterns::SEQUENCE_SET_STR (constant)">SEQUENCE_SET_STR</a></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_obj'>obj</span>.<span class='id identifier rubyid_b'>b</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_coerce_search_arg_to_seqset?'><a href="#coerce_search_arg_to_seqset%3F-instance_method" title="Net::IMAP#coerce_search_arg_to_seqset? (method)">coerce_search_arg_to_seqset?</a></span>(<span class='id identifier rubyid_obj'>obj</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="convert_return_opts-instance_method">
  <h3 class='signature priv'>
    #<strong>convert_return_opts</strong>(unconverted)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3617-L3630'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3617' data-end='3630'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3617</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_convert_return_opts'>convert_return_opts</span>(<span class='id identifier rubyid_unconverted'>unconverted</span>)
  <span class='id identifier rubyid_return_opts'>return_opts</span> <span class='op'>=</span> <span class='const'>Array</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='id identifier rubyid_unconverted'>unconverted</span>) <span class='kw'>or</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected return options to be Array, got %s</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> [
      <span class='id identifier rubyid_unconverted'>unconverted</span>.<span class='id identifier rubyid_class'>class</span>
    ]
  <span class='id identifier rubyid_return_opts'>return_opts</span>.<span class='id identifier rubyid_map'>map</span> {<span class='op'>|</span><span class='id identifier rubyid_opt'>opt</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_opt'>opt</span>
    <span class='kw'>when</span> <span class='const'>Symbol</span>                 <span class='kw'>then</span> <span class='id identifier rubyid_opt'>opt</span>.<span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>when</span> <span class='const'><a href="IMAP/PartialRange.html" title="Net::IMAP::PartialRange (class)">PartialRange</a></span><span class='op'>::</span><span class='const'><a href="IMAP/PartialRange.html#Negative-constant" title="Net::IMAP::PartialRange::Negative (constant)">Negative</a></span> <span class='kw'>then</span> <span class='const'><a href="IMAP/PartialRange.html" title="Net::IMAP::PartialRange (class)">PartialRange</a></span>[<span class='id identifier rubyid_opt'>opt</span>]
    <span class='kw'>when</span> <span class='const'>Range</span>                  <span class='kw'>then</span> <span class='const'><a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)">SequenceSet</a></span>[<span class='id identifier rubyid_opt'>opt</span>]
    <span class='kw'>else</span>                             <span class='id identifier rubyid_opt'>opt</span>
    <span class='kw'>end</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="copy-instance_method">
  <h3 class='signature '>
    #<strong>copy</strong>(set, mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.7" target="_parent" title="COPY command [IMAP4rev1 §6.4.7]">COPY command [IMAP4rev1 §6.4.7]</a> to copy the specified message(s) to the end of the specified destination <code>mailbox</code>. The <code>set</code> parameter is a number, an array of numbers, or a Range object.  The number is a message sequence number.</p>

<p>Related: <a href="#uid_copy-instance_method" title="Net::IMAP#uid_copy (method)">#uid_copy</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>If <code>UIDPLUS</code> [<a href="https://www.rfc-editor.org/rfc/rfc4315.html">RFC4315</a>] is supported, the server’s response should include a <code>COPYUID</code> response code with <a href="IMAP/UIDPlusData.html" title="Net::IMAP::UIDPlusData (class)"><code>IMAP::UIDPlusData</code></a>.  This will report the UIDVALIDITY of the destination mailbox, the UID set of the source messages, and the assigned UID set of the moved messages.</p>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, the <code>COPY</code> command is prohibited.  Use <a href="#uid_copy-instance_method" title="Net::IMAP#uid_copy (method)">#uid_copy</a> instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2773-L2775'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2773' data-end='2775'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2773</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_copy'>copy</span>(<span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_copy_internal'><a href="#copy_internal-instance_method" title="Net::IMAP#copy_internal (method)">copy_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>COPY</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="copy_internal-instance_method">
  <h3 class='signature priv'>
    #<strong>copy_internal</strong>(cmd, set, mailbox)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3701-L3703'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3701' data-end='3703'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3701</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_copy_internal'>copy_internal</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='const'><a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)">SequenceSet</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/SequenceSet.html#new-class_method" title="Net::IMAP::SequenceSet.new (method)">new</a></span>(<span class='id identifier rubyid_set'>set</span>)<span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="create-instance_method">
  <h3 class='signature '>
    #<strong>create</strong>(mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.3" target="_parent" title="CREATE command [IMAP4rev1 §6.3.3]">CREATE command [IMAP4rev1 §6.3.3]</a> to create a new <code>mailbox</code>.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if a mailbox with that name cannot be created.</p>

<p>Related: <a href="#rename-instance_method" title="Net::IMAP#rename (method)">#rename</a>, <a href="#delete-instance_method" title="Net::IMAP#delete (method)">#delete</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1618-L1620'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1618' data-end='1620'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1618</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_create'>create</span>(<span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CREATE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete-instance_method">
  <h3 class='signature '>
    #<strong>delete</strong>(mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.4" target="_parent" title="DELETE command [IMAP4rev1 §6.3.4]">DELETE command [IMAP4rev1 §6.3.4]</a> to remove the <code>mailbox</code>.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if a mailbox with that name cannot be deleted, either because it does not exist or because the client does not have permission to delete it.</p>

<p>Related: <a href="#create-instance_method" title="Net::IMAP#create (method)">#create</a>, <a href="#rename-instance_method" title="Net::IMAP#rename (method)">#rename</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1630-L1632'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1630' data-end='1632'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1630</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span>(<span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DELETE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disconnect-instance_method">
  <h3 class='signature '>
    #<strong>disconnect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Disconnects from the server.</p>

<p>Related: <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>, <a href="#logout!-instance_method" title="Net::IMAP#logout! (method)">#logout!</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1118-L1139'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1118' data-end='1139'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1118</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_disconnect'>disconnect</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_disconnected?'><a href="#disconnected%3F-instance_method" title="Net::IMAP#disconnected? (method)">disconnected?</a></span>
  <span class='id identifier rubyid_state_logout!'><a href="#state_logout!-instance_method" title="Net::IMAP#state_logout! (method)">state_logout!</a></span>
  <span class='kw'>begin</span>
    <span class='kw'>begin</span>
      <span class='comment'># try to call SSL::SSLSocket#io.
</span>      <span class='ivar'>@sock</span>.<span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_shutdown'>shutdown</span>
    <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
      <span class='comment'># @sock is not an SSL::SSLSocket.
</span>      <span class='ivar'>@sock</span>.<span class='id identifier rubyid_shutdown'>shutdown</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTCONN</span>
    <span class='comment'># ignore `Errno::ENOTCONN: Socket is not connected&#39; on some platforms.
</span>  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='ivar'>@receiver_thread</span>.<span class='id identifier rubyid_raise'>raise</span>(<span class='id identifier rubyid_e'>e</span>)
  <span class='kw'>end</span>
  <span class='ivar'>@receiver_thread</span>.<span class='id identifier rubyid_join'>join</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@sock</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="Net::IMAP#close (method)">close</a></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span> <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enable-instance_method">
  <h3 class='signature '>
    #<strong>enable</strong>(*capabilities)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc5161#section-3.1" target="_parent" title="ENABLE command [RFC5161 §3.2]">ENABLE command [RFC5161 §3.2]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.3.1" target="_parent" title="[IMAP4rev2 §6.3.1]">[IMAP4rev2 §6.3.1]</a> to enable the specified server <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>.  Each capability may be an array, string, or symbol.  Returns a list of the capabilities that were enabled.</p>

<p>The <code>ENABLE</code> command is only valid in the <em>authenticated</em> state, before any mailbox is selected.</p>

<p>Related: <a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">#capable?</a>, <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a>, <a href="#capability-instance_method" title="Net::IMAP#capability (method)">#capability</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>ENABLE</code> [<a href="https://www.rfc-editor.org/rfc/rfc5161">RFC5161</a>] or <code>IMAP4REV2</code> [<a href="https://www.rfc-editor.org/rfc/rfc9051">RFC9051</a>].</p>

<p>Additionally, the server capabilities must include a capability matching each enabled extension (usually the same name as the enabled extension). The following capabilities may be enabled:</p>
<dl class="rdoc-list label-list"><dt><code>CONDSTORE</code> <a href="https://www.rfc-editor.org/rfc/rfc7162.html" target="_parent" title="[RFC7162]">[RFC7162]</a></dt>
<dd>
<p>Updates various commands to return <code>CONDSTORE</code> extension responses.  It is not necessary to explicitly enable <code>CONDSTORE</code>—using any of the command parameters defined by the extension will implicitly enable it. See <a href="https://www.rfc-editor.org/rfc/rfc7162.html#section-3.1" target="_parent" title="[RFC7162 §3.1]">[RFC7162 §3.1]</a>.</p>
</dd><dt><code>:utf8</code> — an alias for <code>&quot;UTF8=ACCEPT&quot;</code></dt>
<dd>
<p>In a future release, <code>enable(:utf8)</code> will enable either <code>&quot;UTF8=ACCEPT&quot;</code> or <code>&quot;IMAP4rev2&quot;</code>, depending on server capabilities.</p>
</dd><dt><code>&quot;UTF8=ACCEPT&quot;</code> [<a href="https://www.rfc-editor.org/rfc/rfc6855">RFC6855</a>]</dt>
<dd>
<p>The server’s capabilities must include <code>UTF8=ACCEPT</code> <em>or</em> <code>UTF8=ONLY</code>.</p>

<p>This allows the server to send strings encoded as UTF-8 which might otherwise need to use a 7-bit encoding, such as <a href="::decode_utf7">modified UTF-7</a> for mailbox names, or RFC2047 encoded-words for message headers.</p>

<p><strong>Note:</strong> <em>A future update may set string encodings slightly differently</em>, e.g: “US-ASCII” when UTF-8 is not enabled, and “UTF-8” when it is.  Currently, the encoding of strings sent as “quoted” or “text” will <em>always</em> be “UTF-8”, even when only ASCII characters are used (e.g. “Subject: Agenda”) And currently, string “literals” sent by the server will always have an “ASCII-8BIT” (binary) encoding, even if they generally contain UTF-8 data, if they are text at all.</p>
</dd><dt><code>&quot;UTF8=ONLY&quot;</code> [<a href="https://www.rfc-editor.org/rfc/rfc6855">RFC6855</a>]</dt>
<dd>
<p>A server that reports the <code>UTF8=ONLY</code> capability <em>requires</em> that the client <code>enable(&quot;UTF8=ACCEPT&quot;)</code> before any mailboxes may be selected.  For convenience, <code>enable(&quot;UTF8=ONLY&quot;)</code> is aliased to <code>enable(&quot;UTF8=ACCEPT&quot;)</code>.</p>
</dd><dt><code>UIDONLY</code> <a href="https://www.rfc-editor.org/rfc/rfc9586.pdf" target="_parent" title="[RFC9586]">[RFC9586]</a></dt>
<dd>
<p>When UIDONLY is enabled, the #fetch, #store, #search, #copy, and #move commands are prohibited and result in a tagged BAD response. Clients should instead use uid_fetch, uid_store, uid_search, uid_copy, or uid_move, respectively. All <code>FETCH</code> responses that would be returned are replaced by <code>UIDFETCH</code> responses. All <code>EXPUNGED</code> responses that would be returned are replaced by <code>VANISHED</code> responses. The “&lt;sequence set&gt;” uid_search criterion is prohibited.</p>
</dd></dl>

<h5 id="label-Unsupported+capabilities">Unsupported capabilities</h5>

<p><strong>Note:</strong> Some extensions that use ENABLE permit the server to send syntax that <code>IMAP</code> cannot parse, which may raise an exception and disconnect. Some extensions may work, but the support may be incomplete, untested, or experimental.</p>

<p>Until a capability is documented here as supported, enabling it may result in undocumented behavior and a future release may update with incompatible behavior <em>without warning or deprecation</em>.</p>

<p><em>Caution is advised.</em></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3003-L3016'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3003' data-end='3016'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3003</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_enable'>enable</span>(<span class='op'>*</span><span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span>)
  <span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span> <span class='op'>=</span> <span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span>
    .<span class='id identifier rubyid_flatten'>flatten</span>
    .<span class='id identifier rubyid_map'>map</span> {<span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='const'><a href="#ENABLE_ALIASES-constant" title="Net::IMAP::ENABLE_ALIASES (constant)">ENABLE_ALIASES</a></span>[<span class='id identifier rubyid_e'>e</span>] <span class='op'>||</span> <span class='id identifier rubyid_e'>e</span> }
    .<span class='id identifier rubyid_uniq'>uniq</span>
    .<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ENABLE </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_capabilities'><a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">capabilities</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ENABLED</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span> <span class='op'>||</span> []
    <span class='ivar'>@utf8_strings</span> <span class='op'>||=</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF8=ACCEPT</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@utf8_strings</span> <span class='op'>||=</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMAP4REV2</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="examine-instance_method">
  <h3 class='signature '>
    #<strong>examine</strong>(mailbox, condstore: false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.2" target="_parent" title="EXAMINE command [IMAP4rev1 §6.3.2]">EXAMINE command [IMAP4rev1 §6.3.2]</a> to select a <code>mailbox</code> so that messages in the <code>mailbox</code> can be accessed. Behaves the same as <a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a>, except that the selected <code>mailbox</code> is identified as read-only.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if the mailbox does not exist or is for some reason non-examinable.</p>

<p>Related: <a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1600-L1609'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1600' data-end='1609'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1600</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_examine'>examine</span>(<span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='label'>condstore:</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXAMINE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>]
  <span class='id identifier rubyid_args'>args</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CONDSTORE</span><span class='tstring_end'>&quot;</span></span>] <span class='kw'>if</span> <span class='id identifier rubyid_condstore'>condstore</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_state_unselected!'><a href="#state_unselected!-instance_method" title="Net::IMAP#state_unselected! (method)">state_unselected!</a></span> <span class='comment'># implicitly closes current mailbox
</span>    <span class='ivar'>@responses</span>.<span class='id identifier rubyid_clear'>clear</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
      .<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='id identifier rubyid_state_selected!'><a href="#state_selected!-instance_method" title="Net::IMAP#state_selected! (method)">state_selected!</a></span> <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expunge-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>expunge</strong>  &#x21d2; <code>array</code> <code>of</code> <code>message</code> <code>sequence</code> <code>numbers</code> </span>
      <span class='overload'>#<strong>expunge</strong>  &#x21d2; <a href="IMAP/VanishedData.html" title="Net::IMAP::VanishedData (class)">VanishedData</a> <code>of</code> <code>UIDs</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.3" target="_parent" title="EXPUNGE command [IMAP4rev1 §6.4.3]">EXPUNGE command [IMAP4rev1 §6.4.3]</a> to permanently remove all messages with the <code>Deleted</code> flag from the currently selected mailbox.</p>

<p>Returns either an array of expunged message <em>sequence numbers</em> or (when the appropriate capability is enabled) <a href="IMAP/VanishedData.html" title="Net::IMAP::VanishedData (class)"><code>IMAP::VanishedData</code></a> of expunged UIDs.  Previously unhandled <code>EXPUNGE</code> or <code>VANISHED</code> responses are merged with the direct response to this command.  <code>VANISHED (EARLIER)</code> responses will <em>not</em> be merged.</p>

<p>When no messages have been expunged, an empty array is returned, regardless of which extensions are enabled.  In a future release, an empty <a href="IMAP/VanishedData.html" title="Net::IMAP::VanishedData (class)"><code>IMAP::VanishedData</code></a> may be returned, based on the currently enabled extensions.</p>

<p>Related: <a href="#uid_expunge-instance_method" title="Net::IMAP#uid_expunge (method)">#uid_expunge</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>When either <a href="https://www.rfc-editor.org/rfc/rfc7162">QRESYNC</a> or <a href="https://www.rfc-editor.org/rfc/rfc9586">UIDONLY</a> are enabled, <code>#expunge</code> returns <a href="IMAP/VanishedData.html" title="Net::IMAP::VanishedData (class)"><code>IMAP::VanishedData</code></a>, which contains UIDs—<em>not message sequence numbers</em>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2092-L2094'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2092' data-end='2094'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2092</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expunge'>expunge</span>
  <span class='id identifier rubyid_expunge_internal'><a href="#expunge_internal-instance_method" title="Net::IMAP#expunge_internal (method)">expunge_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXPUNGE</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expunge_internal-instance_method">
  <h3 class='signature priv'>
    #<strong>expunge_internal</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3563-L3577'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3563' data-end='3577'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3563</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expunge_internal'>expunge_internal</span>(<span class='op'>...</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='op'>...</span>)
    <span class='id identifier rubyid_expunged_array'>expunged_array</span> <span class='op'>=</span> <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXPUNGE</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_vanished_array'>vanished_array</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_responses'><a href="#extract_responses-instance_method" title="Net::IMAP#extract_responses (method)">extract_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VANISHED</span><span class='tstring_end'>&quot;</span></span>) { <span class='op'>!</span><span class='id identifier rubyid__1'>_1</span>.<span class='id identifier rubyid_earlier?'>earlier?</span> }
    <span class='kw'>if</span> <span class='id identifier rubyid_vanished_array'>vanished_array</span>.<span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_expunged_array'>expunged_array</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_vanished_array'>vanished_array</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='id identifier rubyid_vanished_array'>vanished_array</span>.<span class='id identifier rubyid_first'>first</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_merged_uids'>merged_uids</span> <span class='op'>=</span> <span class='const'><a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)">SequenceSet</a></span>[<span class='op'>*</span><span class='id identifier rubyid_vanished_array'>vanished_array</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_uids'>uids</span>)]
      <span class='const'><a href="IMAP/VanishedData.html" title="Net::IMAP::VanishedData (class)">VanishedData</a></span>[<span class='label'>uids:</span> <span class='id identifier rubyid_merged_uids'>merged_uids</span><span class='comma'>,</span> <span class='label'>earlier:</span> <span class='kw'>false</span>]
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="extract_responses-instance_method">
  <h3 class='signature '>
    #<strong>extract_responses</strong>(type) {|response| ... } &#x21d2; <code>Array</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Yields all of the unhandled <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a> for a single response <code>type</code>. Removes and returns the responses for which the block returns a true value.</p>

<p>Extracting responses is synchronized with other threads.  The lock is released before returning.</p>

<p>Related: <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a>, <a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">#clear_responses</a></p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3252-L3263'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3252' data-end='3263'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3252</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_responses'>extract_responses</span>(<span class='id identifier rubyid_type'>type</span>)
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='const'>String</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='id identifier rubyid_type'>type</span>) <span class='kw'>or</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type must be a string</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must provide a block</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_extracted'>extracted</span> <span class='op'>=</span> []
  <span class='id identifier rubyid_responses'><a href="#responses-instance_method" title="Net::IMAP#responses (method)">responses</a></span>(<span class='id identifier rubyid_type'>type</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_all'>all</span><span class='op'>|</span>
    <span class='id identifier rubyid_all'>all</span>.<span class='id identifier rubyid_reject!'>reject!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_response'>response</span><span class='op'>|</span>
      <span class='id identifier rubyid_extracted'>extracted</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_response'>response</span> <span class='kw'>if</span> <span class='kw'>yield</span> <span class='id identifier rubyid_response'>response</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_extracted'>extracted</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch-instance_method">
  <h3 class='signature '>
    #<strong>fetch</strong>(set, attr, changedsince: nil)  &#x21d2; <code>array</code> <code>of</code> <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)">FetchData</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.5" target="_parent" title="FETCH command [IMAP4rev1 §6.4.5]">FETCH command [IMAP4rev1 §6.4.5]</a> to retrieve data associated with a message in the mailbox.</p>

<p><code>set</code> is the message sequence numbers to fetch, and may be any valid input to <a href="SequenceSet.html#label-Creating+sequence+sets" title="&lt;a href=&quot;...&quot;&gt;SequenceSet&lt;/a&gt;"><a href="...">SequenceSet</a></a>. (For UIDs, use <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> instead.)</p>

<p><code>attr</code> is a list of attributes to fetch; see <a href="IMAP/FetchStruct.html" title="Net::IMAP::FetchStruct (class)"><code>IMAP::FetchStruct</code></a> documentation for a list of supported attributes.</p>

<p><code>changedsince</code> is an optional integer mod-sequence.  It limits results to messages with a mod-sequence greater than <code>changedsince</code>.</p>

<p>The return value is an array of <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)"><code>IMAP::FetchData</code></a>.</p>

<p>Related: <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a>, <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)"><code>IMAP::FetchData</code></a></p>

<h4 id="label-For+example-3A">For example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='int'>6</span><span class='op'>..</span><span class='int'>8</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; [#&lt;Net::IMAP::FetchData seqno=6, attr={&quot;UID&quot;=&gt;98}&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=7, attr={&quot;UID&quot;=&gt;99}&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=8, attr={&quot;UID&quot;=&gt;100}&gt;]
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_fetch'>fetch</span>(<span class='int'>6</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BODY[HEADER.FIELDS (SUBJECT)]</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; [#&lt;Net::IMAP::FetchData seqno=6, attr={&quot;BODY[HEADER.FIELDS (SUBJECT)]&quot;=&gt;&quot;Subject: test\r\n\r\n&quot;}&gt;]
</span><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_uid_fetch'><a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">uid_fetch</a></span>(<span class='int'>98</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RFC822.SIZE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INTERNALDATE</span><span class='tstring_end'>&quot;</span></span>])[<span class='int'>0</span>]
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_seqno'>seqno</span>
<span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_attr'>attr</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RFC822.SIZE</span><span class='tstring_end'>&quot;</span></span>]
<span class='comment'>#=&gt; 611
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_attr'>attr</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INTERNALDATE</span><span class='tstring_end'>&quot;</span></span>]
<span class='comment'>#=&gt; &quot;12-Oct-2000 22:40:59 +0900&quot;
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_attr'>attr</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span>]
<span class='comment'>#=&gt; 98</span></code></pre>

<h4 id="label-Capabilities">Capabilities</h4>

<p>Many extensions define new message <code>attr</code> names.  See FetchStruct for a list of supported extension fields.</p>

<p>The server’s capabilities must include <code>CONDSTORE</code> <a href="https://www.rfc-editor.org/rfc/rfc7162" target="_parent" title="[RFC7162]">[RFC7162]</a> in order to use the <code>changedsince</code> argument.  Using <code>changedsince</code> implicitly enables the <code>CONDSTORE</code> extension.</p>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, the <code>FETCH</code> command is prohibited.  Use <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a> instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2617-L2619'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2617' data-end='2619'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2617</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch'>fetch</span>(<span class='op'>...</span>)
  <span class='id identifier rubyid_fetch_internal'><a href="#fetch_internal-instance_method" title="Net::IMAP#fetch_internal (method)">fetch_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>...</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch_internal-instance_method">
  <h3 class='signature priv'>
    #<strong>fetch_internal</strong>(cmd, set, attr, mod = nil, partial: nil, changedsince: nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3658-L3680'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3658' data-end='3680'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3658</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_internal'>fetch_internal</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_mod'>mod</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>partial:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>changedsince:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_set'>set</span> <span class='op'>=</span> <span class='const'><a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)">SequenceSet</a></span>[<span class='id identifier rubyid_set'>set</span>]
  <span class='kw'>if</span> <span class='id identifier rubyid_partial'>partial</span>
    <span class='id identifier rubyid_mod'>mod</span> <span class='op'>||=</span> []
    <span class='id identifier rubyid_mod'>mod</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PARTIAL</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="IMAP/PartialRange.html" title="Net::IMAP::PartialRange (class)">PartialRange</a></span>[<span class='id identifier rubyid_partial'>partial</span>]
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_changedsince'>changedsince</span>
    <span class='id identifier rubyid_mod'>mod</span> <span class='op'>||=</span> []
    <span class='id identifier rubyid_mod'>mod</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CHANGEDSINCE</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_changedsince'>changedsince</span>)
  <span class='kw'>end</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_attr'>attr</span>
  <span class='kw'>when</span> <span class='const'>String</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_attr'>attr</span> <span class='op'>=</span> <span class='const'><a href="IMAP/RawData.html" title="Net::IMAP::RawData (class)">RawData</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_attr'>attr</span>)
  <span class='kw'>when</span> <span class='const'>Array</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_attr'>attr</span> <span class='op'>=</span> <span class='id identifier rubyid_attr'>attr</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
      <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>String</span>) <span class='op'>?</span> <span class='const'><a href="IMAP/RawData.html" title="Net::IMAP::RawData (class)">RawData</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_arg'>arg</span>) <span class='op'>:</span> <span class='id identifier rubyid_arg'>arg</span>
    }
  <span class='kw'>end</span>

  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> [<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span>]
  <span class='id identifier rubyid_args'>args</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_mod'>mod</span> <span class='kw'>if</span> <span class='id identifier rubyid_mod'>mod</span>
  <span class='id identifier rubyid_send_command_returning_fetch_results'><a href="#send_command_returning_fetch_results-instance_method" title="Net::IMAP#send_command_returning_fetch_results (method)">send_command_returning_fetch_results</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_tag-instance_method">
  <h3 class='signature priv'>
    #<strong>generate_tag</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3535-L3538'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3535' data-end='3538'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3535</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_tag'>generate_tag</span>
  <span class='ivar'>@tagno</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_format'>format</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s%04d</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@tag_prefix</span><span class='comma'>,</span> <span class='ivar'>@tagno</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_response-instance_method">
  <h3 class='signature priv'>
    #<strong>get_response</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3462-L3467'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3462' data-end='3467'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3462</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_response'>get_response</span>
  <span class='id identifier rubyid_buff'>buff</span> <span class='op'>=</span> <span class='ivar'>@reader</span>.<span class='id identifier rubyid_read_response_buffer'>read_response_buffer</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_buff'>buff</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_print'>print</span>(<span class='id identifier rubyid_buff'>buff</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='regexp_end'>/n</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>S: </span><span class='tstring_end'>&quot;</span></span>)) <span class='kw'>if</span> <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_debug?'>debug?</span>
  <span class='ivar'>@parser</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_buff'>buff</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_server_greeting-instance_method">
  <h3 class='signature priv'>
    #<strong>get_server_greeting</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="IMAP/Error.html" title="Net::IMAP::Error (class)">Error</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3332-L3341'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3332' data-end='3341'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3332</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_server_greeting'>get_server_greeting</span>
  <span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span> <span class='op'>=</span> <span class='id identifier rubyid_get_response'><a href="#get_response-instance_method" title="Net::IMAP#get_response (method)">get_response</a></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="IMAP/Error.html" title="Net::IMAP::Error (class)">Error</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No server greeting - connection closed</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>
  <span class='id identifier rubyid_record_untagged_response_code'><a href="#record_untagged_response_code-instance_method" title="Net::IMAP#record_untagged_response_code (method)">record_untagged_response_code</a></span> <span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>
  <span class='kw'>case</span> <span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>.<span class='id identifier rubyid_name'>name</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PREAUTH</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_state_authenticated!'><a href="#state_authenticated!-instance_method" title="Net::IMAP#state_authenticated! (method)">state_authenticated!</a></span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BYE</span><span class='tstring_end'>&quot;</span></span>     <span class='kw'>then</span> <span class='id identifier rubyid_state_logout!'><a href="#state_logout!-instance_method" title="Net::IMAP#state_logout! (method)">state_logout!</a></span><span class='semicolon'>;</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="IMAP/ByeResponseError.html" title="Net::IMAP::ByeResponseError (class)">ByeResponseError</a></span><span class='comma'>,</span> <span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_greeting'><a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">greeting</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_tagged_response-instance_method">
  <h3 class='signature priv'>
    #<strong>get_tagged_response</strong>(tag, cmd, timeout = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3434-L3460'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3434' data-end='3460'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3434</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_tagged_response'>get_tagged_response</span>(<span class='id identifier rubyid_tag'>tag</span><span class='comma'>,</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_timeout'>timeout</span>
    <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>=</span> <span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='id identifier rubyid_timeout'>timeout</span>
  <span class='kw'>end</span>
  <span class='kw'>until</span> <span class='ivar'>@tagged_responses</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='id identifier rubyid_tag'>tag</span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='ivar'>@exception</span> <span class='kw'>if</span> <span class='ivar'>@exception</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_timeout'>timeout</span>
      <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>=</span> <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>-</span> <span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
        <span class='kw'>return</span> <span class='kw'>nil</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='ivar'>@tagged_response_arrival</span>.<span class='id identifier rubyid_wait'>wait</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='ivar'>@tagged_responses</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="Net::IMAP#delete (method)">delete</a></span>(<span class='id identifier rubyid_tag'>tag</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_name'>name</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?:OK)\z</span><span class='regexp_end'>/ni</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_resp'>resp</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?:NO)\z</span><span class='regexp_end'>/ni</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)">NoResponseError</a></span><span class='comma'>,</span> <span class='id identifier rubyid_resp'>resp</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?:BAD)\z</span><span class='regexp_end'>/ni</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="IMAP/BadResponseError.html" title="Net::IMAP::BadResponseError (class)">BadResponseError</a></span><span class='comma'>,</span> <span class='id identifier rubyid_resp'>resp</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_disconnect'><a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">disconnect</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="IMAP/InvalidResponseError.html" title="Net::IMAP::InvalidResponseError (class)">InvalidResponseError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid tagged resp: %p</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> [<span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_raw'>raw</span>.<span class='id identifier rubyid_chomp'>chomp</span>]
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getacl-instance_method">
  <h3 class='signature '>
    #<strong>getacl</strong>(mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc4314#section-3.3" target="_parent" title="GETACL command [RFC4314 §3.3]">GETACL command [RFC4314 §3.3]</a> along with a specified <code>mailbox</code>.  If this mailbox exists, an array containing objects of <a href="IMAP/MailboxACLItem.html" title="Net::IMAP::MailboxACLItem (class)"><code>IMAP::MailboxACLItem</code></a> will be returned.</p>

<p>Related: <a href="#setacl-instance_method" title="Net::IMAP#setacl (method)">#setacl</a>, <a href="IMAP/MailboxACLItem.html" title="Net::IMAP::MailboxACLItem (class)"><code>IMAP::MailboxACLItem</code></a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>ACL</code> [<a href="https://www.rfc-editor.org/rfc/rfc4314">RFC4314</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1898-L1903'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1898' data-end='1903'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1898</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_getacl'>getacl</span>(<span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GETACL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ACL</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getquota-instance_method">
  <h3 class='signature '>
    #<strong>getquota</strong>(mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2087#section-4.2" target="_parent" title="GETQUOTA command [RFC2087 §4.2]">GETQUOTA command [RFC2087 §4.2]</a> along with specified <code>mailbox</code>.  If this mailbox exists, then an array containing a <a href="IMAP/MailboxQuota.html" title="Net::IMAP::MailboxQuota (class)"><code>IMAP::MailboxQuota</code></a> object is returned.  This command is generally only available to server admin.</p>

<p>Related: <a href="#getquotaroot-instance_method" title="Net::IMAP#getquotaroot (method)">#getquotaroot</a>, <a href="#setquota-instance_method" title="Net::IMAP#setquota (method)">#setquota</a>, <a href="IMAP/MailboxQuota.html" title="Net::IMAP::MailboxQuota (class)"><code>IMAP::MailboxQuota</code></a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>QUOTA</code> [<a href="https://www.rfc-editor.org/rfc/rfc2087">RFC2087</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1842-L1847'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1842' data-end='1847'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1842</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_getquota'>getquota</span>(<span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GETQUOTA</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>QUOTA</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getquotaroot-instance_method">
  <h3 class='signature '>
    #<strong>getquotaroot</strong>(mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2087#section-4.3" target="_parent" title="GETQUOTAROOT command [RFC2087 §4.3]">GETQUOTAROOT command [RFC2087 §4.3]</a> along with the specified <code>mailbox</code>.  This command is generally available to both admin and user.  If this mailbox exists, it returns an array containing objects of type <a href="IMAP/MailboxQuotaRoot.html" title="Net::IMAP::MailboxQuotaRoot (class)"><code>IMAP::MailboxQuotaRoot</code></a> and <a href="IMAP/MailboxQuota.html" title="Net::IMAP::MailboxQuota (class)"><code>IMAP::MailboxQuota</code></a>.</p>

<p>Related: <a href="#getquota-instance_method" title="Net::IMAP#getquota (method)">#getquota</a>, <a href="#setquota-instance_method" title="Net::IMAP#setquota (method)">#setquota</a>, <a href="IMAP/MailboxQuotaRoot.html" title="Net::IMAP::MailboxQuotaRoot (class)"><code>IMAP::MailboxQuotaRoot</code></a>, <a href="IMAP/MailboxQuota.html" title="Net::IMAP::MailboxQuota (class)"><code>IMAP::MailboxQuota</code></a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>QUOTA</code> [<a href="https://www.rfc-editor.org/rfc/rfc2087">RFC2087</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1821-L1829'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1821' data-end='1829'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1821</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_getquotaroot'>getquotaroot</span>(<span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GETQUOTAROOT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> []
    <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>QUOTAROOT</span><span class='tstring_end'>&quot;</span></span>))
    <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>QUOTA</span><span class='tstring_end'>&quot;</span></span>))
    <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="id-instance_method">
  <h3 class='signature '>
    #<strong>id</strong>(client_id = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc2971#section-3.1" target="_parent" title="ID command [RFC2971 §3.1]">ID command [RFC2971 §3.1]</a> and returns a hash of the server’s response, or nil if the server does not identify itself.</p>

<p>Note that the user should first check if the server supports the ID capability. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>if</span> <span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>(<span class='symbeg'>:</span><span class='const'>ID</span>)
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_id'>id</span>(
    <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my IMAP client (ruby)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>version:</span> <span class='const'>MyIMAP</span><span class='op'>::</span><span class='const'><a href="#VERSION-constant" title="Net::IMAP::VERSION (constant)">VERSION</a></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>support-url</span><span class='label_end'>&quot;:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mailto:bugs@example.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>os:</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>host_os</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span>
  )
<span class='kw'>end</span></code></pre>

<p>See [<a href="https://www.rfc-editor.org/rfc/rfc2971">ID</a>] for field definitions.</p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>ID</code> [<a href="https://www.rfc-editor.org/rfc/rfc2971">RFC2971</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1290-L1295'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1290' data-end='1295'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1290</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_id'>id</span>(<span class='id identifier rubyid_client_id'>client_id</span><span class='op'>=</span><span class='kw'>nil</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="IMAP/ClientID.html" title="Net::IMAP::ClientID (class)">ClientID</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_client_id'>client_id</span>))
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ID</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="idle-instance_method">
  <h3 class='signature '>
    #<strong>idle</strong>(timeout = nil, &amp;response_handler)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc6851#section-3" target="_parent" title="IDLE command [RFC2177 §3]">IDLE command [RFC2177 §3]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.3.13" target="_parent" title="[IMAP4rev2 §6.3.13]">[IMAP4rev2 §6.3.13]</a> that waits for notifications of new or expunged messages.  Yields responses from the server during the IDLE.</p>

<p>Use <a href="#idle_done-instance_method" title="Net::IMAP#idle_done (method)">#idle_done</a> to leave IDLE.</p>

<p>If <code>timeout</code> is given, this method returns after <code>timeout</code> seconds passed. <code>timeout</code> can be used for keep-alive.  For example, the following code checks the connection for each 60 seconds.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_idle'>idle</span>(<span class='int'>60</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_response'>response</span><span class='op'>|</span>
    <span class='id identifier rubyid_do_something_with'>do_something_with</span>(<span class='id identifier rubyid_response'>response</span>)
    <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_idle_done'><a href="#idle_done-instance_method" title="Net::IMAP#idle_done (method)">idle_done</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_some_condition?'>some_condition?</span>(<span class='id identifier rubyid_response'>response</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Returns the server’s response to indicate the IDLE state has ended. Returns <code>nil</code> if the server does not respond to <a href="#idle_done-instance_method" title="Net::IMAP#idle_done (method)">#idle_done</a> within <code>config.idle_response_timeout</code> seconds.</p>

<p>Related: <a href="#idle_done-instance_method" title="Net::IMAP#idle_done (method)">#idle_done</a>, <a href="#noop-instance_method" title="Net::IMAP#noop (method)">#noop</a>, <a href="#check-instance_method" title="Net::IMAP#check (method)">#check</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include either <code>IMAP4rev2</code> or <code>IDLE</code> [<a href="https://www.rfc-editor.org/rfc/rfc2177">RFC2177</a>].</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>LocalJumpError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3047-L3074'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3047' data-end='3074'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3047</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_idle'>idle</span>(<span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_response_handler'>response_handler</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>LocalJumpError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_response_handler'>response_handler</span>

  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='const'>Thread</span>.<span class='id identifier rubyid_current'>current</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_net_imap_tag'>net_imap_tag</span>] <span class='op'>=</span> <span class='id identifier rubyid_generate_tag'><a href="#generate_tag-instance_method" title="Net::IMAP#generate_tag (method)">generate_tag</a></span>
    <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tag'>tag</span><span class='embexpr_end'>}</span><span class='tstring_content'> IDLE</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#CRLF-constant" title="Net::IMAP::CRLF (constant)">CRLF</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)

    <span class='kw'>begin</span>
      <span class='id identifier rubyid_add_response_handler'><a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">add_response_handler</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_response_handler'>response_handler</span>)
      <span class='ivar'>@idle_done_cond</span> <span class='op'>=</span> <span class='id identifier rubyid_new_cond'>new_cond</span>
      <span class='ivar'>@idle_done_cond</span>.<span class='id identifier rubyid_wait'>wait</span>(<span class='id identifier rubyid_timeout'>timeout</span>)
      <span class='ivar'>@idle_done_cond</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>if</span> <span class='ivar'>@receiver_thread_terminating</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='ivar'>@exception</span> <span class='op'>||</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span><span class='op'>::</span><span class='const'><a href="IMAP/Error.html" title="Net::IMAP::Error (class)">Error</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connection closed</span><span class='tstring_end'>&quot;</span></span>)
      <span class='kw'>end</span>
    <span class='kw'>ensure</span>
      <span class='kw'>unless</span> <span class='ivar'>@receiver_thread_terminating</span>
        <span class='id identifier rubyid_remove_response_handler'><a href="#remove_response_handler-instance_method" title="Net::IMAP#remove_response_handler (method)">remove_response_handler</a></span>(<span class='id identifier rubyid_response_handler'>response_handler</span>)
        <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DONE</span><span class='embexpr_beg'>#{</span><span class='const'><a href="#CRLF-constant" title="Net::IMAP::CRLF (constant)">CRLF</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_get_tagged_response'><a href="#get_tagged_response-instance_method" title="Net::IMAP#get_tagged_response (method)">get_tagged_response</a></span>(<span class='id identifier rubyid_tag'>tag</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IDLE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_idle_response_timeout'><a href="#idle_response_timeout-instance_method" title="Net::IMAP#idle_response_timeout (method)">idle_response_timeout</a></span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="idle_done-instance_method">
  <h3 class='signature '>
    #<strong>idle_done</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Leaves IDLE, allowing <a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a> to return.</p>

<p>If the server does not respond within <code>config.idle_response_timeout</code> seconds, <a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a> will return <code>nil</code>.</p>

<p>Related: <a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3083-L3090'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3083' data-end='3090'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3083</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_idle_done'>idle_done</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='ivar'>@idle_done_cond</span>.<span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span><span class='op'>::</span><span class='const'><a href="IMAP/Error.html" title="Net::IMAP::Error (class)">Error</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not during IDLE</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='ivar'>@idle_done_cond</span>.<span class='id identifier rubyid_signal'>signal</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="idle_response_timeout-instance_method">
  <h3 class='signature nodoc'>
    #<strong>idle_response_timeout</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L868-L868'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='868' data-end='868'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 868</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_idle_response_timeout'>idle_response_timeout</span><span class='semicolon'>;</span>  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_idle_response_timeout'>idle_response_timeout</span>   <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="list-instance_method">
  <h3 class='signature '>
    #<strong>list</strong>(refname, mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.8" target="_parent" title="LIST command [IMAP4rev1 §6.3.8]">LIST command [IMAP4rev1 §6.3.8]</a> and returns a subset of names from the complete set of all names available to the client.  <code>refname</code> provides a context (for instance, a base directory in a directory-based mailbox hierarchy).  <code>mailbox</code> specifies a mailbox or (via wildcards) mailboxes under that context.  Two wildcards may be used in <code>mailbox</code>: <code>&quot;*&quot;</code>, which matches all characters <strong>including</strong> the hierarchy delimiter (for instance, “/” on a UNIX-hosted directory-based mailbox hierarchy); and <code>&quot;%&quot;</code>, which matches all characters <strong>except</strong> the hierarchy delimiter.</p>

<p>If <code>refname</code> is empty, <code>mailbox</code> is used directly to determine which mailboxes to match.  If <code>mailbox</code> is empty, the root name of <code>refname</code> and the hierarchy delimiter are returned.</p>

<p>The return value is an array of <a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)"><code>IMAP::MailboxList</code></a>.</p>

<p>Related: <a href="#lsub-instance_method" title="Net::IMAP#lsub (method)">#lsub</a>, <a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)"><code>IMAP::MailboxList</code></a></p>

<h4 id="label-For+example-3A">For example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/bar</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/baz</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_list'>list</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/%</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; [#&lt;Net::IMAP::MailboxList attr=[:Noselect], delim=&quot;/&quot;, name=&quot;foo/&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors, :Marked], delim=&quot;/&quot;, name=&quot;foo/bar&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors], delim=&quot;/&quot;, name=&quot;foo/baz&quot;&gt;]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1702-L1707'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1702' data-end='1707'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1702</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_list'>list</span>(<span class='id identifier rubyid_refname'>refname</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LIST</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_refname'>refname</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LIST</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="login-instance_method">
  <h3 class='signature '>
    #<strong>login</strong>(user, password)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.2.3" target="_parent" title="LOGIN command [IMAP4rev1 §6.2.3]">LOGIN command [IMAP4rev1 §6.2.3]</a> to identify the client and carries the plaintext <code>password</code> authenticating this <code>user</code>.  If successful, the connection enters the “<em>authenticated</em>” state.</p>

<p>Using <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> <a href="https://www.rfc-editor.org/rfc/rfc9051.html#name-login-command">should be preferred</a> over <code>#login</code>.  The LOGIN command is not the same as <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a> with the “LOGIN” <code>mechanism</code>.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if authentication fails.</p>

<p>Related: <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>, <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>An IMAP client MUST NOT call <code>#login</code> when the server advertises the <code>LOGINDISABLED</code> capability.  By default, <code>IMAP</code> will raise a <a href="IMAP/LoginDisabledError.html" title="Net::IMAP::LoginDisabledError (class)"><code>IMAP::LoginDisabledError</code></a> when that capability is present.  See <code>Config#enforce_logindisabled</code>.</p>

<p>Server capabilities may change after <a href="#starttls-instance_method" title="Net::IMAP#starttls (method)">#starttls</a>, <code>#login</code>, and <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>. Cached capabilities <em>must</em> be invalidated after this method completes. The TaggedResponse to <code>#login</code> may include updated capabilities in its <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>IMAP::ResponseCode</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1539-L1545'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1539' data-end='1545'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1539</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_login'>login</span>(<span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_enforce_logindisabled?'><a href="#enforce_logindisabled%3F-instance_method" title="Net::IMAP#enforce_logindisabled? (method)">enforce_logindisabled?</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_capability?'><a href="#capability%3F-instance_method" title="Net::IMAP#capability? (method)">capability?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGINDISABLED</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="IMAP/LoginDisabledError.html" title="Net::IMAP::LoginDisabledError (class)">LoginDisabledError</a></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span>)
    .<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='id identifier rubyid_state_authenticated!'><a href="#state_authenticated!-instance_method" title="Net::IMAP#state_authenticated! (method)">state_authenticated!</a></span> <span class='id identifier rubyid__1'>_1</span> <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="logout-instance_method">
  <h3 class='signature '>
    #<strong>logout</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.1.3" target="_parent" title="LOGOUT command [IMAP4rev1 §6.1.3]">LOGOUT command [IMAP4rev1 §6.1.3]</a> to inform the command to inform the server that the client is done with the connection.</p>

<p>Related: <a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">#disconnect</a>, <a href="#logout!-instance_method" title="Net::IMAP#logout! (method)">#logout!</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1318-L1320'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1318' data-end='1320'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1318</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_logout'>logout</span>
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGOUT</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="logout!-instance_method">
  <h3 class='signature '>
    #<strong>logout!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> then, after receiving the <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>IMAP::TaggedResponse</code></a> for the <code>LOGOUT</code>, calls <a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">#disconnect</a>.  Returns the <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>IMAP::TaggedResponse</code></a> from <code>LOGOUT</code>.  Returns <code>nil</code> when the client is already disconnected, in contrast to <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> which raises an exception.</p>

<p>If <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> raises a StandardError, a warning will be printed but the exception will not be re-raised.</p>

<p>This is useful in situations where the connection must be dropped, for example for security or after tests.  If logout errors need to be handled, use <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a> and <a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">#disconnect</a> instead.</p>

<p>Related: <a href="#logout-instance_method" title="Net::IMAP#logout (method)">#logout</a>, <a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">#disconnect</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1335-L1343'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1335' data-end='1343'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1335</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_logout!'>logout!</span>
  <span class='id identifier rubyid_logout'><a href="#logout-instance_method" title="Net::IMAP#logout (method)">logout</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_disconnected?'><a href="#disconnected%3F-instance_method" title="Net::IMAP#disconnected? (method)">disconnected?</a></span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s during &lt;Net::IMAP %s:%s&gt; logout!: %s</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> [
    <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_class'>class</span><span class='comma'>,</span> <span class='id identifier rubyid_host'><a href="#host-instance_method" title="Net::IMAP#host (method)">host</a></span><span class='comma'>,</span> <span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span>
  ]
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_disconnect'><a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">disconnect</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lsub-instance_method">
  <h3 class='signature '>
    #<strong>lsub</strong>(refname, mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.9" target="_parent" title="LSUB command [IMAP4rev1 §6.3.9]">LSUB command [IMAP4rev1 §6.3.9]</a> and returns a subset of names from the set of names that the user has declared as being “active” or “subscribed.”  <code>refname</code> and <code>mailbox</code> are interpreted as for <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a>.</p>

<p>The return value is an array of <a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)"><code>IMAP::MailboxList</code></a> objects.</p>

<p>Related: <a href="#subscribe-instance_method" title="Net::IMAP#subscribe (method)">#subscribe</a>, <a href="#unsubscribe-instance_method" title="Net::IMAP#unsubscribe (method)">#unsubscribe</a>, <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a>, <a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)"><code>IMAP::MailboxList</code></a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1913-L1918'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1913' data-end='1918'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1913</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lsub'>lsub</span>(<span class='id identifier rubyid_refname'>refname</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LSUB</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_refname'>refname</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LSUB</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="move-instance_method">
  <h3 class='signature '>
    #<strong>move</strong>(set, mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc6851#section-3.1" target="_parent" title="MOVE command [RFC6851 §3.1]">MOVE command [RFC6851 §3.1]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.8" target="_parent" title="[IMAP4rev2 §6.4.8]">[IMAP4rev2 §6.4.8]</a> to move the specified message(s) to the end of the specified destination <code>mailbox</code>. The <code>set</code> parameter is a number, an array of numbers, or a Range object. The number is a message sequence number.</p>

<p>Related: <a href="#uid_move-instance_method" title="Net::IMAP#uid_move (method)">#uid_move</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include either <code>IMAP4rev2</code> or <code>MOVE</code> [<a href="https://www.rfc-editor.org/rfc/rfc6851">RFC6851</a>].</p>

<p>If <code>UIDPLUS</code> [<a href="https://www.rfc-editor.org/rfc/rfc4315.html">RFC4315</a>] is supported, the server’s response should include a <code>COPYUID</code> response code with <a href="IMAP/UIDPlusData.html" title="Net::IMAP::UIDPlusData (class)"><code>IMAP::UIDPlusData</code></a>.  This will report the UIDVALIDITY of the destination mailbox, the UID set of the source messages, and the assigned UID set of the moved messages.</p>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, the <code>MOVE</code> command is prohibited.  Use <a href="#uid_move-instance_method" title="Net::IMAP#uid_move (method)">#uid_move</a> instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2814-L2816'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2814' data-end='2816'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2814</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_move'>move</span>(<span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_copy_internal'><a href="#copy_internal-instance_method" title="Net::IMAP#copy_internal (method)">copy_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MOVE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="namespace-instance_method">
  <h3 class='signature '>
    #<strong>namespace</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2342#section-5" target="_parent" title="NAMESPACE command [RFC2342 §5]">NAMESPACE command [RFC2342 §5]</a> and returns the namespaces that are available.  The NAMESPACE command allows a client to discover the prefixes of namespaces used by a server for personal mailboxes, other users’ mailboxes, and shared mailboxes.</p>

<p>The return value is a <a href="IMAP/Namespaces.html" title="Net::IMAP::Namespaces (class)"><code>IMAP::Namespaces</code></a> object which has <code>personal</code>, <code>other</code>, and <code>shared</code> fields, each an array of <a href="IMAP/Namespace.html" title="Net::IMAP::Namespace (class)"><code>IMAP::Namespace</code></a> objects.  These arrays will be empty when the server responds with <code>nil</code>.</p>

<p>Many IMAP servers are configured with the default personal namespaces as <code>(&quot;&quot; &quot;/&quot;)</code>: no prefix and the “<code>/</code>” hierarchy delimiter. In that common case, the naive client may not have any trouble naming mailboxes. But many servers are configured with the default personal namespace as e.g.  <code>(&quot;INBOX.&quot; &quot;.&quot;)</code>, placing all personal folders under INBOX, with “<code>.</code>” as the hierarchy delimiter. If the client does not check for this, but naively assumes it can use the same folder names for all servers, then folder creation (and listing, moving, etc) can lead to errors.</p>

<p>From <a href="https://www.rfc-editor.org/rfc/rfc2342">RFC2342</a>:</p>

<blockquote>
<p><em>Although typically a server will support only a single Personal Namespace, and a single Other User’s Namespace, circumstances exist where there MAY be multiples of these, and a client MUST be prepared for them.  If a client is configured such that it is required to create a certain mailbox, there can be circumstances where it is unclear which Personal Namespaces it should create the mailbox in.  In these situations a client SHOULD let the user select which namespaces to create the mailbox in.</em></p>
</blockquote>

<p>Related: <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a>, <a href="IMAP/Namespaces.html" title="Net::IMAP::Namespaces (class)"><code>IMAP::Namespaces</code></a>, <a href="IMAP/Namespace.html" title="Net::IMAP::Namespace (class)"><code>IMAP::Namespace</code></a></p>

<h4 id="label-For+example-3A">For example:</h4>

<pre class="code ruby"><code class="ruby"><span class='kw'>if</span> <span class='id identifier rubyid_capable?'><a href="#capable%3F-instance_method" title="Net::IMAP#capable? (method)">capable?</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NAMESPACE</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_namespaces'>namespaces</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_namespace'>namespace</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_namespaces'>namespaces</span>.<span class='id identifier rubyid_personal'>personal</span>.<span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span>.<span class='id identifier rubyid_prefix'>prefix</span>  <span class='comment'># e.g. &quot;&quot; or &quot;INBOX.&quot;
</span>    <span class='id identifier rubyid_delim'>delim</span>  <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span>.<span class='id identifier rubyid_delim'>delim</span>   <span class='comment'># e.g. &quot;/&quot; or &quot;.&quot;
</span>    <span class='comment'># personal folders should use the prefix and delimiter
</span>    <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>path</span><span class='words_sep'> </span><span class='tstring_content'>to</span><span class='words_sep'> </span><span class='tstring_content'>my</span><span class='words_sep'> </span><span class='tstring_content'>folder</span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_join'>join</span>(<span class='id identifier rubyid_delim'>delim</span>))
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include either <code>IMAP4rev2</code> or <code>NAMESPACE</code> [<a href="https://www.rfc-editor.org/rfc/rfc2342">RFC2342</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1759-L1764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1759' data-end='1764'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1759</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_namespace'>namespace</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NAMESPACE</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NAMESPACE</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="noop-instance_method">
  <h3 class='signature '>
    #<strong>noop</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.1.2" target="_parent" title="NOOP command [IMAP4rev1 §6.1.2]">NOOP command [IMAP4rev1 §6.1.2]</a> to the server.</p>

<p>This allows the server to send unsolicited untagged EXPUNGE <a href="#responses-instance_method" title="Net::IMAP#responses (method)">#responses</a>, but does not execute any client request.  IMAP servers are permitted to send unsolicited untagged responses at any time, except for <code>EXPUNGE</code>:</p>
<ul><li>
<p><code>EXPUNGE</code> can only be sent while a command is in progress.</p>
</li><li>
<p><code>EXPUNGE</code> must <em>not</em> be sent during <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>, <a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a>, or <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>.</p>
</li><li>
<p><code>EXPUNGE</code> may be sent during <a href="#uid_fetch-instance_method" title="Net::IMAP#uid_fetch (method)">#uid_fetch</a>, <a href="#uid_store-instance_method" title="Net::IMAP#uid_store (method)">#uid_store</a>, or <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>.</p>
</li></ul>

<p>Related: <a href="#idle-instance_method" title="Net::IMAP#idle (method)">#idle</a>, <a href="#check-instance_method" title="Net::IMAP#check (method)">#check</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1309-L1311'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1309' data-end='1311'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1309</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_noop'>noop</span>
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOOP</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_searching_criteria-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_searching_criteria</strong>(criteria)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3721-L3730'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3721' data-end='3730'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3721</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_searching_criteria'>normalize_searching_criteria</span>(<span class='id identifier rubyid_criteria'>criteria</span>)
  <span class='kw'>return</span> [<span class='const'><a href="IMAP/RawData.html" title="Net::IMAP::RawData (class)">RawData</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_criteria'>criteria</span>)] <span class='kw'>if</span> <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>String</span>)
  <span class='id identifier rubyid_criteria'>criteria</span>.<span class='id identifier rubyid_map'>map</span> {<span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_coerce_search_arg_to_seqset?'><a href="#coerce_search_arg_to_seqset%3F-instance_method" title="Net::IMAP#coerce_search_arg_to_seqset? (method)">coerce_search_arg_to_seqset?</a></span>(<span class='id identifier rubyid_i'>i</span>)
      <span class='const'><a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)">SequenceSet</a></span>[<span class='id identifier rubyid_i'>i</span>]
    <span class='kw'>else</span>
      <span class='id identifier rubyid_i'>i</span>
    <span class='kw'>end</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="open_timeout-instance_method">
  <h3 class='signature nodoc'>
    #<strong>open_timeout</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L867-L867'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='867' data-end='867'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 867</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_open_timeout'>open_timeout</span><span class='semicolon'>;</span>           <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_open_timeout'>open_timeout</span>            <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="put_string-instance_method">
  <h3 class='signature priv'>
    #<strong>put_string</strong>(str)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3540-L3553'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3540' data-end='3553'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3540</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_put_string'>put_string</span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='ivar'>@sock</span>.<span class='id identifier rubyid_print'>print</span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_debug?'>debug?</span>
    <span class='kw'>if</span> <span class='ivar'>@debug_output_bol</span>
      <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_print'>print</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C: </span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>
    <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_print'>print</span>(<span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n</span><span class='regexp_end'>/n</span></span>) { <span class='backref'>$&#39;</span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='backref'>$&amp;</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nC: </span><span class='tstring_end'>&quot;</span></span> })
    <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n\z</span><span class='regexp_end'>/n</span></span>.<span class='id identifier rubyid_match'>match</span>(<span class='id identifier rubyid_str'>str</span>)
      <span class='ivar'>@debug_output_bol</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='ivar'>@debug_output_bol</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="receive_responses-instance_method">
  <h3 class='signature priv'>
    #<strong>receive_responses</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3363-L3432'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3363' data-end='3432'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3363</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_receive_responses'>receive_responses</span>
  <span class='id identifier rubyid_connection_closed'>connection_closed</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>until</span> <span class='id identifier rubyid_connection_closed'>connection_closed</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_get_response'><a href="#get_response-instance_method" title="Net::IMAP#get_response (method)">get_response</a></span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_state_logout!'><a href="#state_logout!-instance_method" title="Net::IMAP#state_logout! (method)">state_logout!</a></span>
        <span class='ivar'>@sock</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="Net::IMAP#close (method)">close</a></span>
        <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='id identifier rubyid_e'>e</span>
      <span class='kw'>end</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_resp'>resp</span>
      <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='const'>EOFError</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>end of file reached</span><span class='tstring_end'>&quot;</span></span>)
      <span class='kw'>end</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='kw'>case</span> <span class='id identifier rubyid_resp'>resp</span>
        <span class='kw'>when</span> <span class='const'><a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)">TaggedResponse</a></span>
          <span class='ivar'>@tagged_responses</span>[<span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_tag'>tag</span>] <span class='op'>=</span> <span class='id identifier rubyid_resp'>resp</span>
          <span class='ivar'>@tagged_response_arrival</span>.<span class='id identifier rubyid_broadcast'>broadcast</span>
          <span class='kw'>case</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_tag'>tag</span>
          <span class='kw'>when</span> <span class='ivar'>@logout_command_tag</span>
            <span class='id identifier rubyid_state_logout!'><a href="#state_logout!-instance_method" title="Net::IMAP#state_logout! (method)">state_logout!</a></span>
            <span class='kw'>return</span>
          <span class='kw'>when</span> <span class='ivar'>@continued_command_tag</span>
            <span class='ivar'>@continuation_request_exception</span> <span class='op'>=</span>
              <span class='const'><a href="#RESPONSE_ERRORS-constant" title="Net::IMAP::RESPONSE_ERRORS (constant)">RESPONSE_ERRORS</a></span>[<span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_name'>name</span>].<span class='id identifier rubyid_new'><a href="IMAP/DeprecatedClientOptions.html#initialize-instance_method" title="Net::IMAP::DeprecatedClientOptions#initialize (method)">new</a></span>(<span class='id identifier rubyid_resp'>resp</span>)
            <span class='ivar'>@continuation_request_arrival</span>.<span class='id identifier rubyid_signal'>signal</span>
          <span class='kw'>end</span>
        <span class='kw'>when</span> <span class='const'><a href="IMAP/UntaggedResponse.html" title="Net::IMAP::UntaggedResponse (class)">UntaggedResponse</a></span>
          <span class='id identifier rubyid_record_untagged_response'><a href="#record_untagged_response-instance_method" title="Net::IMAP#record_untagged_response (method)">record_untagged_response</a></span>(<span class='id identifier rubyid_resp'>resp</span>)
          <span class='kw'>if</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BYE</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@logout_command_tag</span>.<span class='id identifier rubyid_nil?'>nil?</span>
            <span class='id identifier rubyid_state_logout!'><a href="#state_logout!-instance_method" title="Net::IMAP#state_logout! (method)">state_logout!</a></span>
            <span class='ivar'>@sock</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="Net::IMAP#close (method)">close</a></span>
            <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ByeResponseError.html" title="Net::IMAP::ByeResponseError (class)">ByeResponseError</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/ResponseError.html#new-class_method" title="Net::IMAP::ResponseError.new (method)">new</a></span>(<span class='id identifier rubyid_resp'>resp</span>)
            <span class='id identifier rubyid_connection_closed'>connection_closed</span> <span class='op'>=</span> <span class='kw'>true</span>
          <span class='kw'>end</span>
        <span class='kw'>when</span> <span class='const'><a href="IMAP/ContinuationRequest.html" title="Net::IMAP::ContinuationRequest (class)">ContinuationRequest</a></span>
          <span class='ivar'>@continuation_request_arrival</span>.<span class='id identifier rubyid_signal'>signal</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_state_unselected!'><a href="#state_unselected!-instance_method" title="Net::IMAP#state_unselected! (method)">state_unselected!</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_resp'>resp</span> <span class='kw'>in</span> {<span class='label'>data:</span> {<span class='label'>code:</span> {<span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CLOSED</span><span class='tstring_end'>&quot;</span></span>}}}
        <span class='ivar'>@response_handlers</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_handler'>handler</span><span class='op'>|</span>
          <span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_resp'>resp</span>)
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='ivar'>@tagged_response_arrival</span>.<span class='id identifier rubyid_broadcast'>broadcast</span>
        <span class='ivar'>@continuation_request_arrival</span>.<span class='id identifier rubyid_broadcast'>broadcast</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@receiver_thread_terminating</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='ivar'>@tagged_response_arrival</span>.<span class='id identifier rubyid_broadcast'>broadcast</span>
    <span class='ivar'>@continuation_request_arrival</span>.<span class='id identifier rubyid_broadcast'>broadcast</span>
    <span class='kw'>if</span> <span class='ivar'>@idle_done_cond</span>
      <span class='ivar'>@idle_done_cond</span>.<span class='id identifier rubyid_signal'>signal</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="record_untagged_response-instance_method">
  <h3 class='signature priv'>
    #<strong>record_untagged_response</strong>(resp)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>store name =&gt; […, data]</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3473-L3476'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3473' data-end='3476'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3473</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_record_untagged_response'>record_untagged_response</span>(<span class='id identifier rubyid_resp'>resp</span>)
  <span class='ivar'>@responses</span>[<span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_name'>name</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_data'>data</span>
  <span class='id identifier rubyid_record_untagged_response_code'><a href="#record_untagged_response_code-instance_method" title="Net::IMAP#record_untagged_response_code (method)">record_untagged_response_code</a></span> <span class='id identifier rubyid_resp'>resp</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="record_untagged_response_code-instance_method">
  <h3 class='signature priv'>
    #<strong>record_untagged_response_code</strong>(resp)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>store code.name =&gt; […, code.data]</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3479-L3483'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3479' data-end='3483'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3479</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_record_untagged_response_code'>record_untagged_response_code</span>(<span class='id identifier rubyid_resp'>resp</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="IMAP/ResponseText.html" title="Net::IMAP::ResponseText (class)">ResponseText</a></span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> (<span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_code'>code</span>)
  <span class='ivar'>@responses</span>[<span class='id identifier rubyid_code'>code</span>.<span class='id identifier rubyid_name'>name</span>] <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_code'>code</span>.<span class='id identifier rubyid_data'>data</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_response_handler-instance_method">
  <h3 class='signature '>
    #<strong>remove_response_handler</strong>(handler)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Removes the response handler.</p>

<p>Related: <a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">#add_response_handler</a>, <a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">#response_handlers</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3309-L3313'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3309' data-end='3313'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3309</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_response_handler'>remove_response_handler</span>(<span class='id identifier rubyid_handler'>handler</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@response_handlers</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="Net::IMAP#delete (method)">delete</a></span>(<span class='id identifier rubyid_handler'>handler</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rename-instance_method">
  <h3 class='signature '>
    #<strong>rename</strong>(mailbox, newname)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.5" target="_parent" title="RENAME command [IMAP4rev1 §6.3.5]">RENAME command [IMAP4rev1 §6.3.5]</a> to change the name of the <code>mailbox</code> to <code>newname</code>.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if a mailbox with the name <code>mailbox</code> cannot be renamed to <code>newname</code> for whatever reason; for instance, because <code>mailbox</code> does not exist, or because there is already a mailbox with the name <code>newname</code>.</p>

<p>Related: <a href="#create-instance_method" title="Net::IMAP#create (method)">#create</a>, <a href="#delete-instance_method" title="Net::IMAP#delete (method)">#delete</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1643-L1645'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1643' data-end='1645'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1643</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_rename'>rename</span>(<span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_newname'>newname</span>)
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RENAME</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_newname'>newname</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="response_handlers-instance_method">
  <h3 class='signature '>
    #<strong>response_handlers</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns all response handlers, including those that are added internally by commands.  Each response handler will be called with every new <a href="IMAP/UntaggedResponse.html" title="Net::IMAP::UntaggedResponse (class)"><code>IMAP::UntaggedResponse</code></a>, <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>IMAP::TaggedResponse</code></a>, and <a href="IMAP/ContinuationRequest.html" title="Net::IMAP::ContinuationRequest (class)"><code>IMAP::ContinuationRequest</code></a>.</p>

<p>Response handlers are called with a mutex inside the receiver thread.  New responses cannot be processed and commands from other threads must wait until all response_handlers return.  An exception will shut-down the receiver thread and close the connection.</p>

<p>For thread-safety, the returned array is a frozen copy of the internal array.</p>

<p>Related: <a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">#add_response_handler</a>, <a href="#remove_response_handler-instance_method" title="Net::IMAP#remove_response_handler (method)">#remove_response_handler</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3278-L3280'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3278' data-end='3280'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3278</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_response_handlers'>response_handlers</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@response_handlers</span>.<span class='id identifier rubyid_clone'>clone</span>.<span class='id identifier rubyid_freeze'>freeze</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="responses-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>responses</strong>  &#x21d2; <code>hash</code> <code>of</code> {<code>String</code>] </span>
      <span class='overload'>#<strong>responses</strong>(type)  &#x21d2; <code>frozen</code> <code>array</code> </span>
      <span class='overload'>#<strong>responses</strong> {|hash| ... } &#x21d2; <code>block</code> <code>result</code> </span>
      <span class='overload'>#<strong>responses</strong>(type) {|array| ... } &#x21d2; <code>block</code> <code>result</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Yields or returns unhandled server responses.  Unhandled responses are stored in a hash, with arrays of <a href="IMAP/UntaggedResponse.html#data-instance_method" title="Net::IMAP::UntaggedResponse#data (method)">UntaggedResponse#data</a> keyed by <a href="IMAP/UntaggedResponse.html#name-instance_method" title="Net::IMAP::UntaggedResponse#name (method)">UntaggedResponse#name</a> and <em>non-<code>nil</em></code> untagged <a href="IMAP/ResponseCode.html#data-instance_method" title="Net::IMAP::ResponseCode#data (method)">ResponseCode#data</a> keyed by <a href="IMAP/ResponseCode.html#name-instance_method" title="Net::IMAP::ResponseCode#name (method)">ResponseCode#name</a>.</p>

<p>When a block is given, yields unhandled responses and returns the block’s result.  Without a block, returns the unhandled responses.</p>
<dl class="rdoc-list label-list"><dt>With <code>type</code></dt>
<dd>
<p>Yield or return only the array of responses for that <code>type</code>. When no block is given, the returned array is a frozen copy.</p>
</dd><dt>Without <code>type</code></dt>
<dd>
<p>Yield or return the entire responses hash.</p>

<p>When no block is given, the behavior is determined by Config#responses_without_block:</p>

<blockquote><dl class="rdoc-list label-list"><dt><code>:silence_deprecation_warning</code> <em>(original behavior)</em></dt>
<dd>
<p>Returns the mutable responses hash (without any warnings). <em>This is not thread-safe.</em></p>
</dd><dt><code>:warn</code> <em>(default since <code>v0.5</code>)</em></dt>
<dd>
<p>Prints a warning and returns the mutable responses hash. <em>This is not thread-safe.</em></p>
</dd><dt><code>:frozen_dup</code> <em>(planned default for <code>v0.6</code>)</em></dt>
<dd>
<p>Returns a frozen copy of the unhandled responses hash, with frozen array values.</p>
</dd><dt><code>:raise</code></dt>
<dd>
<p>Raise an <code>ArgumentError</code> with the deprecation warning.</p>
</dd></dl>
</blockquote>
</dd></dl>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_select'><a href="#select-instance_method" title="Net::IMAP#select (method)">select</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_responses'>responses</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXISTS</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span>
<span class='comment'>#=&gt; 2
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_responses'>responses</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDNEXT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_last'>last</span>)
<span class='comment'>#=&gt; 123456
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_responses'>responses</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDVALIDITY</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_last'>last</span>)
<span class='comment'>#=&gt; 968263756
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_responses'>responses</span> {<span class='op'>|</span><span class='id identifier rubyid_responses'>responses</span><span class='op'>|</span>
  {
    <span class='label'>exists:</span>      <span class='id identifier rubyid_responses'>responses</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="Net::IMAP#delete (method)">delete</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXISTS</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span><span class='comma'>,</span>
    <span class='label'>uidnext:</span>     <span class='id identifier rubyid_responses'>responses</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="Net::IMAP#delete (method)">delete</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDNEXT</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span><span class='comma'>,</span>
    <span class='label'>uidvalidity:</span> <span class='id identifier rubyid_responses'>responses</span>.<span class='id identifier rubyid_delete'><a href="#delete-instance_method" title="Net::IMAP#delete (method)">delete</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDVALIDITY</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span><span class='comma'>,</span>
  }
}
<span class='comment'>#=&gt; {:exists=&gt;2, :uidnext=&gt;123456, :uidvalidity=&gt;968263756}
</span><span class='comment'># &quot;EXISTS&quot;, &quot;UIDNEXT&quot;, and &quot;UIDVALIDITY&quot; have been removed:
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_responses'>responses</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_keys'>keys</span>)
<span class='comment'>#=&gt; [&quot;FLAGS&quot;, &quot;OK&quot;, &quot;PERMANENTFLAGS&quot;, &quot;RECENT&quot;, &quot;HIGHESTMODSEQ&quot;]</span></code></pre>

<p>Related: <a href="#extract_responses-instance_method" title="Net::IMAP#extract_responses (method)">#extract_responses</a>, <a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">#clear_responses</a>, <a href="#response_handlers-instance_method" title="Net::IMAP#response_handlers (method)">#response_handlers</a>, <a href="#greeting-instance_method" title="Net::IMAP#greeting (method)">#greeting</a></p>

<h4 id="label-Thread+safety">Thread safety</h4>

<blockquote>
<p><strong>Note:</strong> Access to the responses hash is synchronized for thread-safety. The receiver thread and response_handlers cannot process new responses until the block completes.  Accessing either the response hash or its response type arrays outside of the block is unsafe.  They can be safely updated inside the block.  Consider using #clear_responses or #extract_responses instead.</p>

<p>Net::IMAP will add and remove responses from the responses hash and its array values, in the calling threads for commands and in the receiver thread, but will not modify any responses after adding them to the responses hash.</p>
</blockquote>

<h4 id="label-Clearing+responses">Clearing responses</h4>

<p>Previously unhandled responses are automatically cleared before entering a mailbox with <a href="#select-instance_method" title="Net::IMAP#select (method)">#select</a> or <a href="#examine-instance_method" title="Net::IMAP#examine (method)">#examine</a>.  Long-lived connections can receive many unhandled server responses, which must be pruned or they will continually consume more memory.  Update or clear the responses hash or arrays inside the block, or remove responses with <a href="#extract_responses-instance_method" title="Net::IMAP#extract_responses (method)">#extract_responses</a>, <a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">#clear_responses</a>, or <a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">#add_response_handler</a>.</p>

<h4 id="label-Missing+responses">Missing responses</h4>

<p>Only non-<code>nil</code> data is stored.  Many important response codes have no data of their own, but are used as “tags” on the <a href="IMAP/ResponseText.html" title="Net::IMAP::ResponseText (class)"><code>IMAP::ResponseText</code></a> object they are attached to.  <a href="IMAP/ResponseText.html" title="Net::IMAP::ResponseText (class)"><code>IMAP::ResponseText</code></a> will be accessible by its response types: “<code>OK</code>”, “<code>NO</code>”, “<code>BAD</code>”, “<code>BYE</code>”, or “<code>PREAUTH</code>”.</p>

<p><a href="IMAP/TaggedResponse.html#data-instance_method" title="Net::IMAP::TaggedResponse#data (method)">TaggedResponse#data</a> is not saved to <code>#responses</code>, nor is any <a href="IMAP/ResponseCode.html#data-instance_method" title="Net::IMAP::ResponseCode#data (method)">ResponseCode#data</a> on tagged responses.  Although some command methods do return the <a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)"><code>IMAP::TaggedResponse</code></a> directly, <a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">#add_response_handler</a> must be used to handle all response codes.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3194-L3215'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3194' data-end='3215'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3194</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_responses'>responses</span>(<span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='kw'>yield</span>(<span class='id identifier rubyid_type'>type</span> <span class='op'>?</span> <span class='ivar'>@responses</span>[<span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_upcase'>upcase</span>] <span class='op'>:</span> <span class='ivar'>@responses</span>) }
  <span class='kw'>elsif</span> <span class='id identifier rubyid_type'>type</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='ivar'>@responses</span>[<span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_upcase'>upcase</span>].<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_freeze'>freeze</span> }
  <span class='kw'>else</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_config'><a href="#config-class_method" title="Net::IMAP.config (method)">config</a></span>.<span class='id identifier rubyid_responses_without_block'>responses_without_block</span>
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_raise'>raise</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='const'><a href="#RESPONSES_DEPRECATION_MSG-constant" title="Net::IMAP::RESPONSES_DEPRECATION_MSG (constant)">RESPONSES_DEPRECATION_MSG</a></span>
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_warn'>warn</span>
      <span class='id identifier rubyid_warn'>warn</span>(<span class='const'><a href="#RESPONSES_DEPRECATION_MSG-constant" title="Net::IMAP::RESPONSES_DEPRECATION_MSG (constant)">RESPONSES_DEPRECATION_MSG</a></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>category:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_deprecated'>deprecated</span>)
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_frozen_dup'>frozen_dup</span>
      <span class='id identifier rubyid_synchronize'>synchronize</span> {
        <span class='id identifier rubyid_responses'>responses</span> <span class='op'>=</span> <span class='ivar'>@responses</span>.<span class='id identifier rubyid_transform_values'>transform_values</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_freeze'>freeze</span>)
        <span class='id identifier rubyid_responses'>responses</span>.<span class='id identifier rubyid_default_proc'>default_proc</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_responses'>responses</span>.<span class='id identifier rubyid_default'>default</span> <span class='op'>=</span> [].<span class='id identifier rubyid_freeze'>freeze</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_responses'>responses</span>.<span class='id identifier rubyid_freeze'>freeze</span>
      }
    <span class='kw'>end</span>
    <span class='ivar'>@responses</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sasl_adapter-instance_method">
  <h3 class='signature priv'>
    #<strong>sasl_adapter</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3803-L3805'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3803' data-end='3805'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3803</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sasl_adapter'>sasl_adapter</span>
  <span class='const'><a href="IMAP/SASLAdapter.html" title="Net::IMAP::SASLAdapter (class)">SASLAdapter</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/SASL/ClientAdapter.html#new-class_method" title="Net::IMAP::SASL::ClientAdapter.new (method)">new</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_send_command_with_continuations'><a href="#send_command_with_continuations-instance_method" title="Net::IMAP#send_command_with_continuations (method)">send_command_with_continuations</a></span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="search-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>search</strong>(criteria, charset = nil)  &#x21d2; <code>result</code> </span>
      <span class='overload'>#<strong>search</strong>(criteria, charset: nil, return: nil)  &#x21d2; <code>result</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.4" target="_parent" title="SEARCH command [IMAP4rev1 §6.4.4]">SEARCH command [IMAP4rev1 §6.4.4]</a> to search the mailbox for messages that match the given search <code>criteria</code>, and returns either a <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a> or an <a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)"><code>IMAP::ESearchResult</code></a>.  <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a> inherits from Array (for backward compatibility) but adds <a href="IMAP/SearchResult.html#modseq-instance_method" title="Net::IMAP::SearchResult#modseq (method)">SearchResult#modseq</a> when the <code>CONDSTORE</code> capability has been enabled. <a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)"><code>IMAP::ESearchResult</code></a> also implements <a href="IMAP/ESearchResult.html#to_a-instance_method" title="Net::IMAP::ESearchResult#to_a (method)">#to_a</a>, for compatibility with <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a>.</p>

<p><code>criteria</code> is one or more search keys and their arguments, which may be provided as an array or a string. See <a href="#search.html#label-Argument+translation" title="“Argument translation”">“Argument translation”</a> and <a href="#search.html#label-Search+criteria" title="“Search criteria”">“Search criteria”</a>, below.</p>

<p><code>return</code> options control what kind of information is returned about messages matching the search <code>criteria</code>.  Specifying <code>return</code> should force the server to return an <a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)"><code>IMAP::ESearchResult</code></a> instead of a <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a>, but some servers disobey this requirement.  <em>Requires an extended search capability, such as <code>ESEARCH</code> or <code>IMAP4rev2</code>.</em> See <a href="#search.html#label-Argument+translation" title="“Argument translation”">“Argument translation”</a> and <a href="#search.html#label-Supported+return+options" title="“Supported return options”">“Supported return options”</a>, below.</p>

<p><code>charset</code> is the name of the <a href="https://www.iana.org/assignments/character-sets/character-sets.xhtml">registered character set</a> used by strings in the search <code>criteria</code>.  When <code>charset</code> isn’t specified, either <code>&quot;US-ASCII&quot;</code> or <code>&quot;UTF-8&quot;</code> is assumed, depending on the server’s capabilities.</p>

<p><em>NOTE:</em> Return options and charset may be sent as part of <code>criteria</code>.  Do not use the <code>return</code> or <code>charset</code> arguments when either return options or charset are embedded in <code>criteria</code>.</p>

<p>Related: <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a></p>

<h4 id="label-For+example-3A">For example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'>search</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SUBJECT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SEEN</span><span class='tstring_end'>&quot;</span></span>])
<span class='comment'>#=&gt; [1, 6, 7, 8]</span></code></pre>

<p>The following assumes the server supports <code>ESEARCH</code> and <code>CONDSTORE</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_uid_search'><a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">uid_search</a></span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>12345</span><span class='op'>..</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MODSEQ</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>620_162_338</span>]<span class='comma'>,</span>
                         <span class='label'>return:</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>all</span><span class='words_sep'> </span><span class='tstring_content'>count</span><span class='words_sep'> </span><span class='tstring_content'>min</span><span class='words_sep'> </span><span class='tstring_content'>max</span><span class='tstring_end'>)</span></span>)
<span class='comment'># =&gt; #&lt;data Net::IMAP::ESearchResult tag=&quot;RUBY0123&quot;, uid=true,
</span><span class='comment'>#       data=[[&quot;ALL&quot;, Net::IMAP::SequenceSet[&quot;12346:12349,22222:22230&quot;]],
</span><span class='comment'>#             [&quot;COUNT&quot;, 13], [&quot;MIN&quot;, 12346], [&quot;MAX&quot;, 22230],
</span><span class='comment'>#             [&quot;MODSEQ&quot;, 917162488]]&gt;
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_to_a'>to_a</span>   <span class='comment'># =&gt; [12346, 12347, 12348, 12349, 22222, 22223, 22224,
</span>              <span class='comment'>#     22225, 22226, 22227, 22228, 22229, 22230]
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_uid?'>uid?</span>   <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_count'>count</span>  <span class='comment'># =&gt; 13
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_min'>min</span>    <span class='comment'># =&gt; 12346
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_max'>max</span>    <span class='comment'># =&gt; 22230
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_modseq'>modseq</span> <span class='comment'># =&gt; 917162488</span></code></pre>

<p>Using <code>return</code> options to limit the result to only min, max, and count:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_uid_search'><a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">uid_search</a></span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>12345</span><span class='op'>..</span><span class='comma'>,</span>]<span class='comma'>,</span> <span class='label'>return:</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>count</span><span class='words_sep'> </span><span class='tstring_content'>min</span><span class='words_sep'> </span><span class='tstring_content'>max</span><span class='tstring_end'>)</span></span>)
<span class='comment'># =&gt; #&lt;data Net::IMAP::ESearchResult tag=&quot;RUBY0124&quot;, uid=true,
</span><span class='comment'>#       data=[[&quot;COUNT&quot;, 13], [&quot;MIN&quot;, 12346], [&quot;MAX&quot;, 22230]]&gt;
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_to_a'>to_a</span>   <span class='comment'># =&gt; []
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_count'>count</span>  <span class='comment'># =&gt; 13
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_min'>min</span>    <span class='comment'># =&gt; 12346
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_max'>max</span>    <span class='comment'># =&gt; 22230</span></code></pre>

<p>Return options and charset may be sent as keyword args or embedded in the <code>criteria</code> arg, but they must be in the correct order: <code>&quot;RETURN (...) CHARSET ... criteria...&quot;</code>.  The following searches send the exact same command to the server:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Return options and charset as keyword arguments (preferred)
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'>search</span>(<span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>OR</span><span class='words_sep'> </span><span class='tstring_content'>UNSEEN</span><span class='words_sep'> </span><span class='tstring_content'>FLAGGED</span><span class='tstring_end'>)</span></span><span class='comma'>,</span> <span class='label'>return:</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>MIN</span><span class='words_sep'> </span><span class='tstring_content'>MAX</span><span class='tstring_end'>)</span></span><span class='comma'>,</span> <span class='label'>charset:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># Embedding return and charset in the criteria array
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'>search</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RETURN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>MIN</span><span class='words_sep'> </span><span class='tstring_content'>MAX</span><span class='tstring_end'>)</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CHARSET</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>*</span><span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>OR</span><span class='words_sep'> </span><span class='tstring_content'>UNSEEN</span><span class='words_sep'> </span><span class='tstring_content'>FLAGGED</span><span class='tstring_end'>)</span></span>])
<span class='comment'># Embedding return and charset in the criteria string
</span><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'>search</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RETURN (MIN MAX) CHARSET UTF-8 OR UNSEEN FLAGGED</span><span class='tstring_end'>&quot;</span></span>)</code></pre>

<p>Sending charset as the second positional argument is supported for backward compatibility.  Future versions may print a deprecation warning:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'>search</span>(<span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>OR</span><span class='words_sep'> </span><span class='tstring_content'>UNSEEN</span><span class='words_sep'> </span><span class='tstring_content'>FLAGGED</span><span class='tstring_end'>)</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>return:</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>MIN</span><span class='words_sep'> </span><span class='tstring_content'>MAX</span><span class='tstring_end'>)</span></span>)</code></pre>

<h4 id="label-Argument+translation">Argument translation</h4>
<dl class="rdoc-list label-list"><dt><code>return</code> options</dt>
<dd>
<p>Must be an Array.  Return option names may be either strings or symbols. <code>Range</code> elements which begin and end with negative integers are encoded for use with <code>PARTIAL</code>–any other ranges are converted to SequenceSet. Unlike <code>criteria</code>, other return option arguments are not automatically converted to SequenceSet.</p>
</dd><dt>When <code>criteria</code> is an Array</dt>
<dd>
<p>When the array begins with <code>&quot;RETURN&quot;</code> (case insensitive), the second array element is translated like the <code>return</code> parameter (as described above).</p>

<p>Every other member is a <code>SEARCH</code> command argument:</p>
<dl class="rdoc-list label-list"><dt>SequenceSet</dt>
<dd>
<p>Encoded as an IMAP <code>sequence-set</code> with SequenceSet#valid_string.</p>
</dd><dt>Set, Range, <code>-1</code>, <code>:*</code>, responds to <code>#to_sequence_set</code></dt>
<dd>
<p>Converted to SequenceSet for validation and encoding.</p>
</dd><dt>nested sequence-set <code>Array</code></dt>
<dd>
<p>When every element in a nested array is one of the above types, a positive <code>Integer</code>, a sequence-set formatted <code>String</code>, or a deeply nested <code>Array</code> of these same types, the array will be converted to SequenceSet for validation and encoding.</p>
</dd><dt>Any other nested <code>Array</code></dt>
<dd>
<p>Otherwise, a nested array is encoded as a parenthesized list, to combine multiple search keys (e.g., for use with <code>OR</code> and <code>NOT</code>).</p>
</dd><dt><code>String</code></dt>
<dd>
<p>Sent verbatim when it is a valid IMAP <code>atom</code>, and encoded as an IMAP <code>quoted</code> or <code>literal</code> string otherwise.  Every standard search key name is a valid IMAP <code>atom</code> and every standard search key string argument is an <code>astring</code> which may be encoded as <code>atom</code>, <code>quoted</code>, or <code>literal</code>.</p>

<p><strong>Note:</strong> <code>*</code> is not a valid IMAP <code>atom</code> character.  Any string containing <code>*</code> will be encoded as a <code>quoted</code> string, <em>not</em> a <code>sequence-set</code>.</p>
</dd><dt><code>Integer</code> (except for <code>-1</code>)</dt>
<dd>
<p>Encoded using <code>#to_s</code>.</p>
</dd><dt><code>Date</code></dt>
<dd>
<p>Encoded as an IMAP date (see ::encode_date).</p>
</dd></dl>
</dd><dt>When <code>criteria</code> is a String</dt>
<dd>
<p><code>criteria</code> will be sent directly to the server <em>without any validation or encoding</em>.</p>

<p><strong><em>WARNING:</strong> This is vulnerable to injection attacks when external inputs are used.</em></p>
</dd></dl>

<h4 id="label-Supported+return+options">Supported return options</h4>

<p>For full definitions of the standard return options and return data, see the relevant RFCs.</p>
<dl class="rdoc-list label-list"><dt><code>ALL</code></dt>
<dd>
<p>Returns ESearchResult#all with a SequenceSet of all matching sequence numbers or UIDs.  This is the default, when return options are empty.</p>

<p>For compatibility with SearchResult, ESearchResult#to_a returns an Array of message sequence numbers or UIDs.</p>

<p><em>Requires either the <code>ESEARCH</code> or <code>IMAP4rev2</code> capabability.</em> <a href="https://rfc-editor.org/rfc/rfc4731" target="_parent" title="[RFC4731]">[RFC4731]</a> <a href="https://rfc-editor.org/rfc/rfc9051" target="_parent" title="[RFC9051]">[RFC9051]</a></p>
</dd><dt><code>COUNT</code></dt>
<dd>
<p>Returns ESearchResult#count with the number of matching messages.</p>

<p><em>Requires either the <code>ESEARCH</code> or <code>IMAP4rev2</code> capabability.</em> <a href="https://rfc-editor.org/rfc/rfc4731" target="_parent" title="[RFC4731]">[RFC4731]</a> <a href="https://rfc-editor.org/rfc/rfc9051" target="_parent" title="[RFC9051]">[RFC9051]</a></p>
</dd><dt><code>MAX</code></dt>
<dd>
<p>Returns ESearchResult#max with the highest matching sequence number or UID.</p>

<p><em>Requires either the <code>ESEARCH</code> or <code>IMAP4rev2</code> capabability.</em> <a href="https://rfc-editor.org/rfc/rfc4731" target="_parent" title="[RFC4731]">[RFC4731]</a> <a href="https://rfc-editor.org/rfc/rfc9051" target="_parent" title="[RFC9051]">[RFC9051]</a></p>
</dd><dt><code>MIN</code></dt>
<dd>
<p>Returns ESearchResult#min with the lowest matching sequence number or UID.</p>

<p><em>Requires either the <code>ESEARCH</code> or <code>IMAP4rev2</code> capabability.</em> <a href="https://rfc-editor.org/rfc/rfc4731" target="_parent" title="[RFC4731]">[RFC4731]</a> <a href="https://rfc-editor.org/rfc/rfc9051" target="_parent" title="[RFC9051]">[RFC9051]</a></p>
</dd><dt><code>PARTIAL</code> <em>range</em></dt>
<dd>
<p>Returns ESearchResult#partial with a SequenceSet of a subset of matching sequence numbers or UIDs, as selected by <em>range</em>.  As with sequence numbers, the first result is <code>1</code>: <code>1..500</code> selects the first 500 search results (in mailbox order), <code>501..1000</code> the second 500, and so on.  <em>range</em> may also be negative: <code>-500..-1</code> selects the last 500 search results.</p>

<p><em>Requires either the <code>CONTEXT=SEARCH</code> or <code>PARTIAL</code> capabability.</em> <a href="https://rfc-editor.org/rfc/rfc5267" target="_parent" title="[RFC5267]">[RFC5267]</a> <a href="https://rfc-editor.org/rfc/rfc9394" target="_parent" title="[RFC9394]">[RFC9394]</a></p>
</dd></dl>

<h5 id="label-7BMODSEQ-7D+return+data"><code>MODSEQ</code> return data</h5>

<p><a href="IMAP/ESearchResult.html#modseq-instance_method" title="Net::IMAP::ESearchResult#modseq (method)">ESearchResult#modseq</a> return data does not have a corresponding return option.  Instead, it is returned if the <code>MODSEQ</code> search key is used or when the <code>CONDSTORE</code> extension is enabled for the selected mailbox. See [<a href="https://www.rfc-editor.org/rfc/rfc4731#section-3.2" target="_parent" title="RFC4731 §3.2">RFC4731 §3.2</a>] or [<a href="https://www.rfc-editor.org/rfc/rfc7162#section-3.1.5" target="_parent" title="RFC7162 §2.1.5">RFC7162 §2.1.5</a>].</p>

<h5 id="label-7BRFC4466-7D+compatible+extensions"><code>RFC4466</code> compatible extensions</h5>

<p><a href="https://www.rfc-editor.org/rfc/rfc4466.html#section-2.6" target="_parent" title="RFC4466 §2.6">RFC4466 §2.6</a> defines standard syntax for search extensions.  <code>IMAP</code> allows sending unsupported search return options and will parse unsupported search extensions’ return values into <a href="IMAP/ExtensionData.html" title="Net::IMAP::ExtensionData (class)"><code>IMAP::ExtensionData</code></a>.  Please note that this is an intentionally <em>unstable</em> API.  Future releases may return different (incompatible) objects, <em>without deprecation or warning</em>.</p>

<h4 id="label-Search+keys">Search keys</h4>

<p>For full definitions of the standard search <code>criteria</code>, see [<a href="https://www.rfc-editor.org/rfc/rfc3501.html#section-6.4.4" target="_parent" title="IMAP4rev1 §6.4.4">IMAP4rev1 §6.4.4</a>], or  [<a href="https://www.rfc-editor.org/rfc/rfc9051.html#section-6.4.4" target="_parent" title="IMAP4rev2 §6.4.4">IMAP4rev2 §6.4.4</a>], in addition to documentation for any <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> which may define additional search filters, such as <code>CONDSTORE</code>, <code>WITHIN</code>, <code>FILTERS</code>, <code>SEARCH=FUZZY</code>, <code>OBJECTID</code>, or <code>SAVEDATE</code>.</p>

<p>With the exception of <em>sequence-set</em> and <em>parenthesized list</em>, all search keys are composed of prefix label with zero or more arguments.  The number and type of arguments is specific to each search key.</p>

<h5 id="label-Search+keys+that+match+all+messages">Search keys that match all messages</h5>
<dl class="rdoc-list label-list"><dt><code>ALL</code></dt>
<dd>
<p>The default initial key.  Matches every message in the mailbox.</p>
</dd><dt><code>SAVEDATESUPPORTED</code></dt>
<dd>
<p>Matches every message in the mailbox when the mailbox supports the save date attribute.  Otherwise, it matches no messages.</p>

<p><em>Requires <code>SAVEDATE</code> capability</em>. <a href="https://www.rfc-editor.org/rfc/rfc8514.html#section-4.3" target="_parent" title="[RFC8514]">[RFC8514]</a></p>
</dd></dl>

<h5 id="label-Sequence+set+search+keys">Sequence set search keys</h5>
<dl class="rdoc-list label-list"><dt><em>sequence-set</em></dt>
<dd>
<p>Matches messages with message sequence numbers in <em>sequence-set</em>.</p>

<p><em>Note:</em> this search key has no label.</p>

<p><code><em>UIDONLY</code> must <strong>not</strong> be enabled.</em> <a href="https://www.rfc-editor.org/rfc/rfc9586.html" target="_parent" title="[RFC9586]">[RFC9586]</a></p>
</dd><dt><code>UID</code> <em>sequence-set</em></dt>
<dd>
<p>Matches messages with a UID in <em>sequence-set</em>.</p>
</dd></dl>

<h5 id="label-Compound+search+keys">Compound search keys</h5>
<dl class="rdoc-list label-list"><dt>(<em>search-key</em> <em>search-key</em>…)</dt>
<dd>
<p>Combines one or more <em>search-key</em> arguments to match messages which match all contained search keys.  Useful for <code>OR</code>, <code>NOT</code>, and other search keys with <em>search-key</em> arguments.</p>

<p><em>Note:</em> this search key has no label.</p>
</dd><dt><code>OR</code> <em>search-key</em> <em>search-key</em></dt>
<dd>
<p>Matches messages which match either <em>search-key</em> argument.</p>
</dd><dt><code>NOT</code> <em>search-key</em></dt>
<dd>
<p>Matches messages which do not match <em>search-key</em>.</p>
</dd><dt><code>FUZZY</code> <em>search-key</em></dt>
<dd>
<p>Uses fuzzy matching for the specified search key.</p>

<p><em>Requires <code>SEARCH=FUZZY</code> capability.</em> <a href="https://www.rfc-editor.org/rfc/rfc6203.html#section-6" target="_parent" title="[RFC6203]">[RFC6203]</a>.</p>
</dd></dl>

<h5 id="label-Flags+search+keys">Flags search keys</h5>
<dl class="rdoc-list label-list"><dt><code>ANSWERED</code>, <code>UNANSWERED</code></dt>
<dd>
<p>Matches messages with or without the <code>\Answered</code> flag.</p>
</dd><dt><code>DELETED</code>, <code>UNDELETED</code></dt>
<dd>
<p>Matches messages with or without the <code>\Deleted</code> flag.</p>
</dd><dt><code>DRAFT</code>, <code>UNDRAFT</code></dt>
<dd>
<p>Matches messages with or without the <code>\Draft</code> flag.</p>
</dd><dt><code>FLAGGED</code>, <code>UNFLAGGED</code></dt>
<dd>
<p>Matches messages with or without the <code>\Flagged</code> flag.</p>
</dd><dt><code>SEEN</code>, <code>UNSEEN</code></dt>
<dd>
<p>Matches messages with or without the <code>\Seen</code> flag.</p>
</dd><dt><code>KEYWORD</code> <em>keyword</em>, <code>UNKEYWORD</code> <em>keyword</em></dt>
<dd>
<p>Matches messages with or without the specified <em>keyword</em>.</p>
</dd><dt><code>RECENT</code>, <code>UNRECENT</code></dt>
<dd>
<p>Matches messages with or without the <code>\Recent</code> flag.</p>

<p><strong>NOTE:</strong> The <code>\Recent</code> flag has been removed from <code>IMAP4rev2</code>.</p>
</dd><dt><code>NEW</code></dt>
<dd>
<p>Equivalent to <code>(RECENT UNSEEN)</code>.</p>

<p><strong>NOTE:</strong> The <code>\Recent</code> flag has been removed from <code>IMAP4rev2</code>.</p>
</dd></dl>

<h5 id="label-Header+field+substring+search+keys">Header field substring search keys</h5>
<dl class="rdoc-list label-list"><dt><code>BCC</code> <em>substring</em></dt>
<dd>
<p>Matches when <em>substring</em> is in the envelope’s <code>BCC</code> field.</p>
</dd><dt><code>CC</code> <em>substring</em></dt>
<dd>
<p>Matches when <em>substring</em> is in the envelope’s <code>CC</code> field.</p>
</dd><dt><code>FROM</code> <em>substring</em></dt>
<dd>
<p>Matches when <em>substring</em> is in the envelope’s <code>FROM</code> field.</p>
</dd><dt><code>SUBJECT</code> <em>substring</em></dt>
<dd>
<p>Matches when <em>substring</em> is in the envelope’s <code>SUBJECT</code> field.</p>
</dd><dt><code>TO</code> <em>substring</em></dt>
<dd>
<p>Matches when <em>substring</em> is in the envelope’s <code>TO</code> field.</p>
</dd><dt><code>HEADER</code> <em>field</em> <em>substring</em></dt>
<dd>
<p>Matches when <em>substring</em> is in the specified header <em>field</em>.</p>
</dd></dl>

<h5 id="label-Body+text+search+keys">Body text search keys</h5>
<dl class="rdoc-list label-list"><dt><code>BODY</code> <em>string</em></dt>
<dd>
<p>Matches when <em>string</em> is in the body of the message. Does not match on header fields.</p>

<p>The server <em>may</em> use flexible matching, rather than simple substring matches.  For example, this may use stemming or match only full words.</p>
</dd><dt><code>TEXT</code> <em>string</em></dt>
<dd>
<p>Matches when <em>string</em> is in the header or body of the message.</p>

<p>The server <em>may</em> use flexible matching, rather than simple substring matches.  For example, this may use stemming or match only full words.</p>
</dd></dl>

<h5 id="label-Date-2FTime+search+keys">Date/Time search keys</h5>
<dl class="rdoc-list label-list"><dt><code>SENTBEFORE</code> <em>date</em></dt>
<dt><code>SENTON</code> <em>date</em></dt>
<dt><code>SENTSINCE</code> <em>date</em></dt>
<dd>
<p>Matches when the <code>Date</code> header is earlier than, on, or later than <em>date</em>.</p>
</dd><dt><code>BEFORE</code> <em>date</em></dt>
<dt><code>ON</code> <em>date</em></dt>
<dt><code>SINCE</code> <em>date</em></dt>
<dd>
<p>Matches when the <code>INTERNALDATE</code> is earlier than, on, or later than <em>date</em>.</p>
</dd><dt><code>OLDER</code> <em>interval</em></dt>
<dt><code>YOUNGER</code> <em>interval</em></dt>
<dd>
<p>Matches when the <code>INTERNALDATE</code> is more/less than <em>interval</em> seconds ago.</p>

<p><em>Requires <code>WITHIN</code> capability</em>. <a href="https://www.rfc-editor.org/rfc/rfc5032.html" target="_parent" title="[RFC5032]">[RFC5032]</a></p>
</dd><dt><code>SAVEDBEFORE</code> <em>date</em></dt>
<dt><code>SAVEDON</code> <em>date</em></dt>
<dt><code>SAVEDSINCE</code> <em>date</em></dt>
<dd>
<p>Matches when the save date is earlier than, on, or later than <em>date</em>.</p>

<p><em>Requires <code>SAVEDATE</code> capability.</em> <a href="https://www.rfc-editor.org/rfc/rfc8514.html#section-4.3" target="_parent" title="[RFC8514]">[RFC8514]</a></p>
</dd></dl>

<h5 id="label-Other+message+attribute+search+keys">Other message attribute search keys</h5>
<dl class="rdoc-list label-list"><dt><code>SMALLER</code> <em>bytes</em></dt>
<dt><code>LARGER</code> <em>bytes</em></dt>
<dd>
<p>Matches when <code>RFC822.SIZE</code> is smaller or larger than <em>bytes</em>.</p>
</dd><dt><code>ANNOTATION</code> <em>entry</em> <em>attr</em> <em>value</em></dt>
<dd>
<p>Matches messages that have annotations with entries matching <em>entry</em>, attributes matching <em>attr</em>, and <em>value</em> in the attribute’s values.</p>

<p><em>Requires <code>ANNOTATE-EXPERIMENT-1</code> capability</em>. <a href="https://www.rfc-editor.org/rfc/rfc5257.html" target="_parent" title="[RFC5257]">[RFC5257]</a>.</p>
</dd><dt><code>FILTER</code> <em>filter</em></dt>
<dd>
<p>References a <em>filter</em> that is stored on the server and matches all messages which would be matched by that filter’s search criteria.</p>

<p><em>Requires <code>FILTERS</code> capability</em>. <a href="https://www.rfc-editor.org/rfc/rfc5466.html#section-3.1" target="_parent" title="[RFC5466]">[RFC5466]</a></p>
</dd><dt><code>MODSEQ</code> <em>modseq</em></dt>
<dd>
<p>Matches when <code>MODSEQ</code> is greater than or equal to <em>modseq</em>.</p>

<p><em>Requires <code>CONDSTORE</code> capability</em>. <a href="https://www.rfc-editor.org/rfc/rfc7162.html#section-3.1.5" target="_parent" title="[RFC7162]">[RFC7162]</a>.</p>
</dd><dt><code>MODSEQ</code> <em>entry</em> <em>entry-type</em> <em>modseq</em></dt>
<dd>
<p>Matches when a specific metadata <em>entry</em> has been updated since <em>modseq</em>.</p>

<p>For flags, the corresponding <em>entry</em> name is <code>&quot;/flags/#{flag_name}&quot;</code>, where <em>flag_name</em> includes the <code>\</code> prefix.  <em>entry-type</em> can be one of <code>&quot;shared&quot;</code>, <code>&quot;priv&quot;</code> (private), or <code>&quot;all&quot;</code>.</p>

<p><em>Requires <code>CONDSTORE</code> capability</em>. <a href="https://www.rfc-editor.org/rfc/rfc7162.html#section-3.1.5" target="_parent" title="[RFC7162]">[RFC7162]</a>.</p>
</dd><dt><code>EMAILID</code> <em>objectid</em></dt>
<dt><code>THREADID</code> <em>objectid</em></dt>
<dd>
<p>Matches when <code>EMAILID+/+THREADID</code> is equal to <em>objectid</em> (substring matches are not supported).</p>

<p><em>Requires <code>OBJECTID</code> capability</em>. <a href="https://www.rfc-editor.org/rfc/rfc8474.html#section-6" target="_parent" title="[RFC8474]">[RFC8474]</a></p>
</dd></dl>

<h4 id="label-Capabilities">Capabilities</h4>

<p>Return options should only be specified when the server supports <code>IMAP4rev2</code> or an extension that allows them, such as <code>ESEARCH</code> [<a href="https://rfc-editor.org/rfc/rfc4731#section-3.1">RFC4731</a>].</p>

<p>When <code>IMAP4rev2</code> is enabled, or when the server supports <code>IMAP4rev2</code> but not <code>IMAP4rev1</code>, <a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)"><code>IMAP::ESearchResult</code></a> is always returned instead of <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a>.</p>

<p>If <a href="https://www.rfc-editor.org/rfc/rfc7162.html">CONDSTORE</a> is supported and enabled for the selected mailbox, a non-empty <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a> will include a <code>MODSEQ</code> value.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_select'><a href="#select-instance_method" title="Net::IMAP#select (method)">select</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mbox</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>condstore:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_search'>search</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SUBJECT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hi there</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new</span><span class='tstring_end'>&quot;</span></span>])
<span class='comment'>#=&gt; Net::IMAP::SearchResult[1, 6, 7, 8, modseq: 5594]
</span><span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_modseq'>modseq</span> <span class='comment'># =&gt; 5594</span></code></pre>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, the <code>SEARCH</code> command is prohibited.  Use <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a> instead.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2536-L2538'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2536' data-end='2538'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2536</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_search'>search</span>(<span class='op'>...</span>)
  <span class='id identifier rubyid_search_internal'><a href="#search_internal-instance_method" title="Net::IMAP#search_internal (method)">search_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SEARCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>...</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="search_args-instance_method">
  <h3 class='signature priv'>
    #<strong>search_args</strong>(keys, charset_arg = nil, return: nil, charset: nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3583-L3615'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3583' data-end='3615'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3583</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_search_args'>search_args</span>(<span class='id identifier rubyid_keys'>keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset_arg'>charset_arg</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>return:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>charset:</span> <span class='kw'>nil</span>)
  {<span class='label'>return:</span>} <span class='op'>=&gt;</span> {<span class='label'>return:</span> <span class='id identifier rubyid_return_kw'>return_kw</span>}
  <span class='kw'>case</span> [<span class='id identifier rubyid_return_kw'>return_kw</span><span class='comma'>,</span> <span class='id identifier rubyid_keys'>keys</span>]
  <span class='kw'>in</span> [<span class='kw'>nil</span><span class='comma'>,</span> <span class='const'>Array</span>[<span class='const'><a href="#RETURN_WHOLE-constant" title="Net::IMAP::RETURN_WHOLE (constant)">RETURN_WHOLE</a></span><span class='comma'>,</span> <span class='id identifier rubyid_return_opts'>return_opts</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_keys'>keys</span>]]
    <span class='id identifier rubyid_return_opts'>return_opts</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_return_opts'><a href="#convert_return_opts-instance_method" title="Net::IMAP#convert_return_opts (method)">convert_return_opts</a></span>(<span class='id identifier rubyid_return_opts'>return_opts</span>)
    <span class='id identifier rubyid_esearch'>esearch</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>in</span> [<span class='kw'>nil</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_return_opts'>return_opts</span><span class='comma'>,</span> <span class='const'><a href="#RETURN_START-constant" title="Net::IMAP::RETURN_START (constant)">RETURN_START</a></span>]
    <span class='id identifier rubyid_esearch'>esearch</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>in</span> [<span class='kw'>nil</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_return_opts'>return_opts</span><span class='comma'>,</span> <span class='id identifier rubyid_keys'>keys</span>]
    <span class='id identifier rubyid_esearch'>esearch</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>in</span> [<span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='const'>Array</span>[<span class='const'><a href="#RETURN_WHOLE-constant" title="Net::IMAP::RETURN_WHOLE (constant)">RETURN_WHOLE</a></span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='op'>*</span>] <span class='op'>|</span> <span class='const'><a href="#RETURN_START-constant" title="Net::IMAP::RETURN_START (constant)">RETURN_START</a></span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>conflicting return options</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>in</span> [<span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='const'>Array</span>[<span class='const'><a href="#RETURN_WHOLE-constant" title="Net::IMAP::RETURN_WHOLE (constant)">RETURN_WHOLE</a></span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='op'>*</span>]] <span class='comment'># workaround for https://bugs.ruby-lang.org/issues/20956
</span>    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>conflicting return options</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>in</span> [<span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='const'><a href="#RETURN_START-constant" title="Net::IMAP::RETURN_START (constant)">RETURN_START</a></span>]              <span class='comment'># workaround for https://bugs.ruby-lang.org/issues/20956
</span>    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>conflicting return options</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>in</span> [<span class='id identifier rubyid_return_opts'>return_opts</span><span class='comma'>,</span> <span class='id identifier rubyid_keys'>keys</span>]
    <span class='id identifier rubyid_return_opts'>return_opts</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_return_opts'><a href="#convert_return_opts-instance_method" title="Net::IMAP#convert_return_opts (method)">convert_return_opts</a></span>(<span class='id identifier rubyid_return_opts'>return_opts</span>)
    <span class='id identifier rubyid_esearch'>esearch</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_charset'>charset</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_charset_arg'>charset_arg</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>multiple charset arguments</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_charset'>charset</span> <span class='op'>||=</span> <span class='id identifier rubyid_charset_arg'>charset_arg</span>
  <span class='comment'># NOTE: not handling combined RETURN and CHARSET for raw strings
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_charset'>charset</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_keys'>keys</span> <span class='kw'>in</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\ACHARSET\b</span><span class='regexp_end'>/i</span></span> <span class='op'>|</span> <span class='const'>Array</span>[<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\ACHARSET\z</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='op'>*</span>]
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>multiple charset arguments</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_searching_criteria'><a href="#normalize_searching_criteria-instance_method" title="Net::IMAP#normalize_searching_criteria (method)">normalize_searching_criteria</a></span>(<span class='id identifier rubyid_keys'>keys</span>)
  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_prepend'>prepend</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CHARSET</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)     <span class='kw'>if</span> <span class='id identifier rubyid_charset'>charset</span>
  <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_prepend'>prepend</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RETURN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='id identifier rubyid_return_opts'>return_opts</span>) <span class='kw'>if</span> <span class='id identifier rubyid_return_opts'>return_opts</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_esearch'>esearch</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="search_internal-instance_method">
  <h3 class='signature priv'>
    #<strong>search_internal</strong>(cmd)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3632-L3656'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3632' data-end='3656'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3632</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_search_internal'>search_internal</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='op'>...</span>)
  <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_esearch'>esearch</span> <span class='op'>=</span> <span class='id identifier rubyid_search_args'><a href="#search_args-instance_method" title="Net::IMAP#search_args (method)">search_args</a></span>(<span class='op'>...</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tagged'>tagged</span> <span class='op'>=</span> <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
    <span class='id identifier rubyid_tag'>tag</span>    <span class='op'>=</span> <span class='id identifier rubyid_tagged'>tagged</span>.<span class='id identifier rubyid_tag'>tag</span>
    <span class='comment'># Only the last ESEARCH or SEARCH is used.  Excess results are ignored.
</span>    <span class='id identifier rubyid_esearch_result'>esearch_result</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_responses'><a href="#extract_responses-instance_method" title="Net::IMAP#extract_responses (method)">extract_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ESEARCH</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_response'>response</span><span class='op'>|</span>
      <span class='id identifier rubyid_response'>response</span> <span class='kw'>in</span> <span class='const'><a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)">ESearchResult</a></span>(<span class='label'>tag:</span> <span class='op'>^</span><span class='id identifier rubyid_tag'>tag</span>)
    }.<span class='id identifier rubyid_last'>last</span>
    <span class='id identifier rubyid_search_result'>search_result</span> <span class='op'>=</span> <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SEARCH</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_esearch_result'>esearch_result</span>
      <span class='comment'># silently ignore SEARCH results, if any
</span>      <span class='id identifier rubyid_esearch_result'>esearch_result</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_search_result'>search_result</span>
      <span class='comment'># warn EXPECTED_ESEARCH_RESULT if esearch
</span>      <span class='id identifier rubyid_search_result'>search_result</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_esearch'>esearch</span>
      <span class='comment'># warn NO_SEARCH_RESPONSE
</span>      <span class='const'><a href="IMAP/ESearchResult.html" title="Net::IMAP::ESearchResult (class)">ESearchResult</a></span>[<span class='label'>tag:</span><span class='comma'>,</span> <span class='label'>uid:</span> <span class='id identifier rubyid_cmd'>cmd</span>.<span class='id identifier rubyid_start_with?'>start_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID </span><span class='tstring_end'>&quot;</span></span>)]
    <span class='kw'>else</span>
      <span class='comment'># warn NO_SEARCH_RESPONSE
</span>      <span class='const'><a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)">SearchResult</a></span>[]
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="select-instance_method">
  <h3 class='signature '>
    #<strong>select</strong>(mailbox, condstore: false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.1" target="_parent" title="SELECT command [IMAP4rev1 §6.3.1]">SELECT command [IMAP4rev1 §6.3.1]</a> to select a <code>mailbox</code> so that messages in the <code>mailbox</code> can be accessed.</p>

<p>After you have selected a mailbox, you may retrieve the number of items in that mailbox from <code>imap.responses(&quot;EXISTS&quot;, &amp;:last)</code>, and the number of recent messages from <code>imap.responses(&quot;RECENT&quot;, &amp;:last)</code>. Note that these values can change if new messages arrive during a session or when existing messages are expunged; see <a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">#add_response_handler</a> for a way to detect these events.</p>

<p>When the <code>condstore</code> keyword argument is true, the server is told to enable the extension.  If <code>mailbox</code> supports persistence of mod-sequences, the <code>HIGHESTMODSEQ</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>IMAP::ResponseCode</code></a> will be sent as an untagged response to <code>#select</code> and all <code>FETCH</code> responses will include <code>FetchData#modseq</code>. Otherwise, the <code>NOMODSEQ</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>IMAP::ResponseCode</code></a> will be sent.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if the mailbox does not exist or is for some reason non-selectable.</p>

<p>Related: <a href="#examine-instance_method" title="Net::IMAP#examine (method)">#examine</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>If [<a href="https://www.rfc-editor.org/rfc/rfc4315.html">UIDPLUS</a>] is supported, the server may return an untagged “NO” response with a “UIDNOTSTICKY” response code indicating that the mailstore does not support persistent UIDs:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_responses'><a href="#responses-instance_method" title="Net::IMAP#responses (method)">responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NO</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_last'>last</span>)<span class='op'>&amp;.</span><span class='id identifier rubyid_code'>code</span><span class='op'>&amp;.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDNOTSTICKY</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>If [<a href="https://www.rfc-editor.org/rfc/rfc7162.html">CONDSTORE</a>] is supported, the <code>condstore</code> keyword parameter may be used.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_select'>select</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mbox</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>condstore:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_modseq'>modseq</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_responses'><a href="#responses-instance_method" title="Net::IMAP#responses (method)">responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HIGHESTMODSEQ</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_last'>last</span>)</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1580-L1589'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1580' data-end='1589'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1580</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_select'>select</span>(<span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='label'>condstore:</span> <span class='kw'>false</span>)
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>]
  <span class='id identifier rubyid_args'>args</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CONDSTORE</span><span class='tstring_end'>&quot;</span></span>] <span class='kw'>if</span> <span class='id identifier rubyid_condstore'>condstore</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_state_unselected!'><a href="#state_unselected!-instance_method" title="Net::IMAP#state_unselected! (method)">state_unselected!</a></span> <span class='comment'># implicitly closes current mailbox
</span>    <span class='ivar'>@responses</span>.<span class='id identifier rubyid_clear'>clear</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
      .<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='id identifier rubyid_state_selected!'><a href="#state_selected!-instance_method" title="Net::IMAP#state_selected! (method)">state_selected!</a></span> <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_command-instance_method">
  <h3 class='signature priv'>
    #<strong>send_command</strong>(cmd, *args, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3507-L3533'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3507' data-end='3533'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3507</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_command'>send_command</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='id identifier rubyid_validate_data'><a href="#validate_data-instance_method" title="Net::IMAP#validate_data (method)">validate_data</a></span>(<span class='id identifier rubyid_i'>i</span>)
    <span class='kw'>end</span>
    <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='id identifier rubyid_generate_tag'><a href="#generate_tag-instance_method" title="Net::IMAP#generate_tag (method)">generate_tag</a></span>
    <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='id identifier rubyid_tag'>tag</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_cmd'>cmd</span>)
    <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>)
      <span class='id identifier rubyid_send_data'><a href="#send_data-instance_method" title="Net::IMAP#send_data (method)">send_data</a></span>(<span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
    <span class='kw'>end</span>
    <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='const'><a href="#CRLF-constant" title="Net::IMAP::CRLF (constant)">CRLF</a></span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGOUT</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@logout_command_tag</span> <span class='op'>=</span> <span class='id identifier rubyid_tag'>tag</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
      <span class='id identifier rubyid_add_response_handler'><a href="#add_response_handler-instance_method" title="Net::IMAP#add_response_handler (method)">add_response_handler</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_get_tagged_response'><a href="#get_tagged_response-instance_method" title="Net::IMAP#get_tagged_response (method)">get_tagged_response</a></span>(<span class='id identifier rubyid_tag'>tag</span><span class='comma'>,</span> <span class='id identifier rubyid_cmd'>cmd</span>)
    <span class='kw'>ensure</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
        <span class='id identifier rubyid_remove_response_handler'><a href="#remove_response_handler-instance_method" title="Net::IMAP#remove_response_handler (method)">remove_response_handler</a></span>(<span class='id identifier rubyid_block'>block</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_command_returning_fetch_results-instance_method">
  <h3 class='signature priv'>
    #<strong>send_command_returning_fetch_results</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3690-L3699'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3690' data-end='3699'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3690</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_command_returning_fetch_results'>send_command_returning_fetch_results</span>(<span class='op'>...</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDFETCH</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='op'>...</span>)
    <span class='id identifier rubyid_fetches'>fetches</span>    <span class='op'>=</span> <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_uidfetches'>uidfetches</span> <span class='op'>=</span> <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDFETCH</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_uidfetches'>uidfetches</span>.<span class='id identifier rubyid_any?'>any?</span> <span class='op'>?</span> <span class='id identifier rubyid_uidfetches'>uidfetches</span> <span class='op'>:</span> <span class='id identifier rubyid_fetches'>fetches</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_command_with_continuations-instance_method">
  <h3 class='signature priv'>
    #<strong>send_command_with_continuations</strong>(cmd, *args)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls send_command, yielding the text of each <a href="IMAP/ContinuationRequest.html" title="Net::IMAP::ContinuationRequest (class)"><code>IMAP::ContinuationRequest</code></a> and responding with each block result.  Returns TaggedResponse.  Raises <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> or <a href="IMAP/BadResponseError.html" title="Net::IMAP::BadResponseError (class)"><code>IMAP::BadResponseError</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3498-L3505'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3498' data-end='3505'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3498</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_command_with_continuations'>send_command_with_continuations</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_server_response'>server_response</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_server_response'>server_response</span>.<span class='id identifier rubyid_instance_of?'>instance_of?</span>(<span class='const'><a href="IMAP/ContinuationRequest.html" title="Net::IMAP::ContinuationRequest (class)">ContinuationRequest</a></span>)
      <span class='id identifier rubyid_client_response'>client_response</span> <span class='op'>=</span> <span class='kw'>yield</span> <span class='id identifier rubyid_server_response'>server_response</span>.<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_text'>text</span>
      <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='id identifier rubyid_client_response'>client_response</span> <span class='op'>+</span> <span class='const'><a href="#CRLF-constant" title="Net::IMAP::CRLF (constant)">CRLF</a></span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_data-instance_method">
  <h3 class='signature priv'>
    #<strong>send_data</strong>(data, tag = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L34-L53'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='34' data-end='53'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 34</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_data'>send_data</span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span>
  <span class='kw'>when</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NIL</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>when</span> <span class='const'>String</span>
    <span class='id identifier rubyid_send_string_data'><a href="#send_string_data-instance_method" title="Net::IMAP#send_string_data (method)">send_string_data</a></span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
  <span class='kw'>when</span> <span class='const'>Integer</span>
    <span class='id identifier rubyid_send_number_data'><a href="#send_number_data-instance_method" title="Net::IMAP#send_number_data (method)">send_number_data</a></span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_send_list_data'><a href="#send_list_data-instance_method" title="Net::IMAP#send_list_data (method)">send_list_data</a></span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
  <span class='kw'>when</span> <span class='const'>Time</span><span class='comma'>,</span> <span class='const'>DateTime</span>
    <span class='id identifier rubyid_send_time_data'><a href="#send_time_data-instance_method" title="Net::IMAP#send_time_data (method)">send_time_data</a></span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>when</span> <span class='const'>Date</span>
    <span class='id identifier rubyid_send_date_data'><a href="#send_date_data-instance_method" title="Net::IMAP#send_date_data (method)">send_date_data</a></span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>when</span> <span class='const'>Symbol</span>
    <span class='id identifier rubyid_send_symbol_data'><a href="#send_symbol_data-instance_method" title="Net::IMAP#send_symbol_data (method)">send_symbol_data</a></span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_send_data'>send_data</span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_date_data-instance_method">
  <h3 class='signature priv'>
    #<strong>send_date_data</strong>(date)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L116-L116'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='116' data-end='116'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 116</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_date_data'>send_date_data</span>(<span class='id identifier rubyid_date'>date</span>) <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_encode_date'><a href="#encode_date-class_method" title="Net::IMAP.encode_date (method)">encode_date</a></span>(<span class='id identifier rubyid_date'>date</span>) <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_list_data-instance_method">
  <h3 class='signature priv'>
    #<strong>send_list_data</strong>(list, tag = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L102-L114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='102' data-end='114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 102</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_list_data'>send_list_data</span>(<span class='id identifier rubyid_list'><a href="#list-instance_method" title="Net::IMAP#list (method)">list</a></span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_first'>first</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_list'><a href="#list-instance_method" title="Net::IMAP#list (method)">list</a></span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_first'>first</span>
      <span class='id identifier rubyid_first'>first</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>
    <span class='id identifier rubyid_send_data'><a href="#send_data-instance_method" title="Net::IMAP#send_data (method)">send_data</a></span>(<span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_literal-instance_method">
  <h3 class='signature priv'>
    #<strong>send_literal</strong>(str, tag = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L81-L96'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='81' data-end='96'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 81</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_literal'>send_literal</span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='const'><a href="#CRLF-constant" title="Net::IMAP::CRLF (constant)">CRLF</a></span>)
    <span class='ivar'>@continued_command_tag</span> <span class='op'>=</span> <span class='id identifier rubyid_tag'>tag</span>
    <span class='ivar'>@continuation_request_exception</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>begin</span>
      <span class='ivar'>@continuation_request_arrival</span>.<span class='id identifier rubyid_wait'>wait</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='ivar'>@continuation_request_exception</span> <span class='op'>||</span> <span class='ivar'>@exception</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span> <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='id identifier rubyid_str'>str</span>)
    <span class='kw'>ensure</span>
      <span class='ivar'>@continued_command_tag</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='ivar'>@continuation_request_exception</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_number_data-instance_method">
  <h3 class='signature priv'>
    #<strong>send_number_data</strong>(num)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L98-L100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='98' data-end='100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 98</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_number_data'>send_number_data</span>(<span class='id identifier rubyid_num'>num</span>)
  <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='id identifier rubyid_num'>num</span>.<span class='id identifier rubyid_to_s'>to_s</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_quoted_string-instance_method">
  <h3 class='signature priv'>
    #<strong>send_quoted_string</strong>(str)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L77-L79'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='77' data-end='79'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 77</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_quoted_string'>send_quoted_string</span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&quot;\\]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\\\\\&amp;</span><span class='tstring_end'>&quot;</span></span>) <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_string_data-instance_method">
  <h3 class='signature priv'>
    #<strong>send_string_data</strong>(str, tag = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L55-L75'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='55' data-end='75'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 55</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_string_data'>send_string_data</span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;&quot;</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>elsif</span> <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\r\n]</span><span class='regexp_end'>/n</span></span>)
    <span class='comment'># literal, because multiline
</span>    <span class='id identifier rubyid_send_literal'><a href="#send_literal-instance_method" title="Net::IMAP#send_literal (method)">send_literal</a></span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_ascii_only?'>ascii_only?</span>
    <span class='kw'>if</span> <span class='ivar'>@utf8_strings</span>
      <span class='comment'># quoted string
</span>      <span class='id identifier rubyid_send_quoted_string'><a href="#send_quoted_string-instance_method" title="Net::IMAP#send_quoted_string (method)">send_quoted_string</a></span>(<span class='id identifier rubyid_str'>str</span>)
    <span class='kw'>else</span>
      <span class='comment'># literal, because of non-ASCII bytes
</span>      <span class='id identifier rubyid_send_literal'><a href="#send_literal-instance_method" title="Net::IMAP#send_literal (method)">send_literal</a></span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span>)
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[(){ \x00-\x1f\x7f%*&quot;\\]</span><span class='regexp_end'>/n</span></span>)
    <span class='comment'># quoted string
</span>    <span class='id identifier rubyid_send_quoted_string'><a href="#send_quoted_string-instance_method" title="Net::IMAP#send_quoted_string (method)">send_quoted_string</a></span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='id identifier rubyid_str'>str</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_symbol_data-instance_method">
  <h3 class='signature priv'>
    #<strong>send_symbol_data</strong>(symbol)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L119-L121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='119' data-end='121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 119</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_symbol_data'>send_symbol_data</span>(<span class='id identifier rubyid_symbol'>symbol</span>)
  <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_symbol'>symbol</span>.<span class='id identifier rubyid_to_s'>to_s</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_time_data-instance_method">
  <h3 class='signature priv'>
    #<strong>send_time_data</strong>(time)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L117-L117'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='117' data-end='117'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 117</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_time_data'>send_time_data</span>(<span class='id identifier rubyid_time'>time</span>) <span class='id identifier rubyid_put_string'><a href="#put_string-instance_method" title="Net::IMAP#put_string (method)">put_string</a></span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>IMAP</span>.<span class='id identifier rubyid_encode_time'><a href="#encode_time-class_method" title="Net::IMAP.encode_time (method)">encode_time</a></span>(<span class='id identifier rubyid_time'>time</span>) <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setacl-instance_method">
  <h3 class='signature '>
    #<strong>setacl</strong>(mailbox, user, rights)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc4314#section-3.1" target="_parent" title="SETACL command [RFC4314 §3.1]">SETACL command [RFC4314 §3.1]</a> along with <code>mailbox</code>, <code>user</code> and the <code>rights</code> that user is to have on that mailbox.  If <code>rights</code> is nil, then that user will be stripped of any rights to that mailbox.</p>

<p>Related: <a href="#getacl-instance_method" title="Net::IMAP#getacl (method)">#getacl</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>ACL</code> [<a href="https://www.rfc-editor.org/rfc/rfc4314">RFC4314</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1880-L1886'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1880' data-end='1886'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1880</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setacl'>setacl</span>(<span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_rights'>rights</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_rights'>rights</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SETACL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SETACL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_rights'>rights</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setquota-instance_method">
  <h3 class='signature '>
    #<strong>setquota</strong>(mailbox, quota)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc2087#section-4.1" target="_parent" title="SETQUOTA command [RFC2087 §4.1]">SETQUOTA command [RFC2087 §4.1]</a> along with the specified <code>mailbox</code> and <code>quota</code>.  If <code>quota</code> is nil, then <code>quota</code> will be unset for that mailbox.  Typically one needs to be logged in as a server admin for this to work.</p>

<p>Related: <a href="#getquota-instance_method" title="Net::IMAP#getquota (method)">#getquota</a>, <a href="#getquotaroot-instance_method" title="Net::IMAP#getquotaroot (method)">#getquotaroot</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>QUOTA</code> [<a href="https://www.rfc-editor.org/rfc/rfc2087">RFC2087</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1860-L1867'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1860' data-end='1867'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1860</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setquota'>setquota</span>(<span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_quota'>quota</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_quota'>quota</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>()</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(STORAGE </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_quota'>quota</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>)</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SETQUOTA</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='const'><a href="IMAP/RawData.html" title="Net::IMAP::RawData (class)">RawData</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_data'>data</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sort-instance_method">
  <h3 class='signature '>
    #<strong>sort</strong>(sort_keys, search_keys, charset)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="SORT command [RFC5256 §3]">SORT command [RFC5256 §3]</a> to search a mailbox for messages that match <code>search_keys</code> and return an array of message sequence numbers, sorted by <code>sort_keys</code>.  <code>search_keys</code> are interpreted the same as for <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>.</p>

<p>Related: <a href="#uid_sort-instance_method" title="Net::IMAP#uid_sort (method)">#uid_sort</a>, <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>, <a href="#thread-instance_method" title="Net::IMAP#thread (method)">#thread</a>, <a href="#uid_thread-instance_method" title="Net::IMAP#uid_thread (method)">#uid_thread</a></p>

<h4 id="label-For+example-3A">For example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_sort'>sort</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FROM</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ALL</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; [1, 2, 3, 5, 6, 7, 8, 4, 9]
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_sort'>sort</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATE</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SUBJECT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; [6, 7, 8, 1]</span></code></pre>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>SORT</code> [<a href="https://www.rfc-editor.org/rfc/rfc5256">RFC5256</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2862-L2864'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2862' data-end='2864'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2862</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sort'>sort</span>(<span class='id identifier rubyid_sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_sort_internal'><a href="#sort_internal-instance_method" title="Net::IMAP#sort_internal (method)">sort_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SORT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sort_internal-instance_method">
  <h3 class='signature priv'>
    #<strong>sort_internal</strong>(cmd, sort_keys, search_keys, charset)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3705-L3711'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3705' data-end='3711'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3705</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sort_internal'>sort_internal</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
  <span class='id identifier rubyid_search_keys'>search_keys</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_searching_criteria'><a href="#normalize_searching_criteria-instance_method" title="Net::IMAP#normalize_searching_criteria (method)">normalize_searching_criteria</a></span>(<span class='id identifier rubyid_search_keys'>search_keys</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_search_keys'>search_keys</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SORT</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span> <span class='op'>||</span> []
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start_imap_connection-instance_method">
  <h3 class='signature priv'>
    #<strong>start_imap_connection</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3321-L3330'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3321' data-end='3330'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3321</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_imap_connection'>start_imap_connection</span>
  <span class='ivar'>@greeting</span>        <span class='op'>=</span> <span class='id identifier rubyid_get_server_greeting'><a href="#get_server_greeting-instance_method" title="Net::IMAP#get_server_greeting (method)">get_server_greeting</a></span>
  <span class='ivar'>@capabilities</span>    <span class='op'>=</span> <span class='id identifier rubyid_capabilities_from_resp_code'><a href="#capabilities_from_resp_code-instance_method" title="Net::IMAP#capabilities_from_resp_code (method)">capabilities_from_resp_code</a></span> <span class='ivar'>@greeting</span>
  <span class='ivar'>@response_handlers</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_handler'>handler</span><span class='op'>|</span> <span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_call'>call</span>(<span class='ivar'>@greeting</span>) <span class='kw'>end</span>
  <span class='ivar'>@receiver_thread</span> <span class='op'>=</span> <span class='id identifier rubyid_start_receiver_thread'><a href="#start_receiver_thread-instance_method" title="Net::IMAP#start_receiver_thread (method)">start_receiver_thread</a></span>
<span class='kw'>rescue</span> <span class='const'>Exception</span>
  <span class='id identifier rubyid_state_logout!'><a href="#state_logout!-instance_method" title="Net::IMAP#state_logout! (method)">state_logout!</a></span>
  <span class='ivar'>@sock</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="Net::IMAP#close (method)">close</a></span>
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start_receiver_thread-instance_method">
  <h3 class='signature priv'>
    #<strong>start_receiver_thread</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3343-L3352'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3343' data-end='3352'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3343</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_receiver_thread'>start_receiver_thread</span>
  <span class='const'>Thread</span>.<span class='id identifier rubyid_start'>start</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_receive_responses'><a href="#receive_responses-instance_method" title="Net::IMAP#receive_responses (method)">receive_responses</a></span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
    <span class='ivar'>@receiver_thread_exception</span> <span class='op'>=</span> <span class='id identifier rubyid_ex'>ex</span>
    <span class='comment'># don&#39;t exit the thread with an exception
</span>  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_state_logout!'><a href="#state_logout!-instance_method" title="Net::IMAP#state_logout! (method)">state_logout!</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="start_tls_session-instance_method">
  <h3 class='signature priv'>
    #<strong>start_tls_session</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3765-L3778'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3765' data-end='3778'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3765</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_start_tls_session'>start_tls_session</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SSL extension not installed</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='kw'>defined?</span>(<span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>already using SSL</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@sock</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span>(<span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLSocket</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cannot start TLS without SSLContext</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_ssl_ctx'><a href="#ssl_ctx-instance_method" title="Net::IMAP#ssl_ctx (method)">ssl_ctx</a></span>
  <span class='ivar'>@sock</span> <span class='op'>=</span> <span class='const'>SSLSocket</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='ivar'>@sock</span><span class='comma'>,</span> <span class='id identifier rubyid_ssl_ctx'><a href="#ssl_ctx-instance_method" title="Net::IMAP#ssl_ctx (method)">ssl_ctx</a></span>)
  <span class='ivar'>@reader</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ResponseReader.html" title="Net::IMAP::ResponseReader (class)">ResponseReader</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/ResponseReader.html#new-class_method" title="Net::IMAP::ResponseReader.new (method)">new</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='ivar'>@sock</span>)
  <span class='ivar'>@sock</span>.<span class='id identifier rubyid_sync_close'>sync_close</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@sock</span>.<span class='id identifier rubyid_hostname'>hostname</span> <span class='op'>=</span> <span class='ivar'>@host</span> <span class='kw'>if</span> <span class='ivar'>@sock</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_hostname='>hostname=</span>
  <span class='id identifier rubyid_ssl_socket_connect'>ssl_socket_connect</span>(<span class='ivar'>@sock</span><span class='comma'>,</span> <span class='id identifier rubyid_open_timeout'><a href="#open_timeout-instance_method" title="Net::IMAP#open_timeout (method)">open_timeout</a></span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_ssl_ctx'><a href="#ssl_ctx-instance_method" title="Net::IMAP#ssl_ctx (method)">ssl_ctx</a></span>.<span class='id identifier rubyid_verify_mode'>verify_mode</span> <span class='op'>!=</span> <span class='const'>VERIFY_NONE</span>
    <span class='ivar'>@sock</span>.<span class='id identifier rubyid_post_connection_check'>post_connection_check</span>(<span class='ivar'>@host</span>)
    <span class='ivar'>@tls_verified</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="starttls-instance_method">
  <h3 class='signature '>
    #<strong>starttls</strong>(**options)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.2.1" target="_parent" title="STARTTLS command [IMAP4rev1 §6.2.1]">STARTTLS command [IMAP4rev1 §6.2.1]</a> to start a TLS session.</p>

<p>Any <code>options</code> are forwarded directly to <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html#method-i-set_params" target="_parent" title="OpenSSL::SSL::SSLContext#set_params">OpenSSL::SSL::SSLContext#set_params</a>; the keys are names of attribute assignment methods on <a href="https://docs.ruby-lang.org/en/master/OpenSSL/SSL/SSLContext.html">SSLContext</a>.</p>

<p>See <a href="IMAP/DeprecatedClientOptions.html#starttls-instance_method" title="Net::IMAP::DeprecatedClientOptions#starttls (method)">DeprecatedClientOptions#starttls</a> for deprecated arguments.</p>

<p>This method returns after TLS negotiation and hostname verification are both successful.  Any error indicates that the connection has not been secured.</p>

<p>After the server agrees to start a TLS connection, this method waits up to <code>config.open_timeout</code> before raising <code>Net::OpenTimeout</code>.</p>

<p><strong>Note:</strong></p>

<blockquote>
<p>Any #response_handlers added before STARTTLS should be aware that the TaggedResponse to STARTTLS is sent clear-text, <em>before</em> TLS negotiation. TLS starts immediately <em>after</em> that response.  Any response code sent with the response (e.g. CAPABILITY) is insecure and cannot be trusted.</p>
</blockquote>

<p>Related: <a href="#new-class_method" title="Net::IMAP.new (method)">.new</a>, <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>, <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a></p>

<h4 id="label-Capability">Capability</h4>

<p>Clients should not call <code>#starttls</code> unless the server advertises the <code>STARTTLS</code> capability.</p>

<p>Server capabilities may change after <code>#starttls</code>, <a href="#login-instance_method" title="Net::IMAP#login (method)">#login</a>, and <a href="#authenticate-instance_method" title="Net::IMAP#authenticate (method)">#authenticate</a>. Cached <a href="#capabilities-instance_method" title="Net::IMAP#capabilities (method)">#capabilities</a> will be cleared when this method completes.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1379-L1396'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1379' data-end='1396'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1379</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_starttls'><a href="IMAP/DeprecatedClientOptions.html#starttls-instance_method" title="Net::IMAP::DeprecatedClientOptions#starttls (method)">starttls</a></span>(<span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='ivar'>@ssl_ctx_params</span><span class='comma'>,</span> <span class='ivar'>@ssl_ctx</span> <span class='op'>=</span> <span class='id identifier rubyid_build_ssl_ctx'><a href="#build_ssl_ctx-instance_method" title="Net::IMAP#build_ssl_ctx (method)">build_ssl_ctx</a></span>(<span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ok'>ok</span> <span class='op'>=</span> <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STARTTLS</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_resp'>resp</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span>(<span class='const'><a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)">TaggedResponse</a></span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_resp'>resp</span>.<span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_clear_cached_capabilities'><a href="#clear_cached_capabilities-instance_method" title="Net::IMAP#clear_cached_capabilities (method)">clear_cached_capabilities</a></span>
      <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>
      <span class='id identifier rubyid_start_tls_session'><a href="#start_tls_session-instance_method" title="Net::IMAP#start_tls_session (method)">start_tls_session</a></span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='comment'># note that the error backtrace is in the receiver_thread
</span>  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_error'>error</span>
    <span class='id identifier rubyid_disconnect'><a href="#disconnect-instance_method" title="Net::IMAP#disconnect (method)">disconnect</a></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_error'>error</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ok'>ok</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state_authenticated!-instance_method">
  <h3 class='signature priv'>
    #<strong>state_authenticated!</strong>(resp = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3780-L3785'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3780' data-end='3785'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3780</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_state_authenticated!'>state_authenticated!</span>(<span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='id identifier rubyid_capabilities_from_resp_code'><a href="#capabilities_from_resp_code-instance_method" title="Net::IMAP#capabilities_from_resp_code (method)">capabilities_from_resp_code</a></span> <span class='id identifier rubyid_resp'>resp</span> <span class='kw'>if</span> <span class='id identifier rubyid_resp'>resp</span>
    <span class='ivar'>@connection_state</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ConnectionState.html" title="Net::IMAP::ConnectionState (class)">ConnectionState</a></span><span class='op'>::</span><span class='const'><a href="IMAP/ConnectionState.html#Authenticated-constant" title="Net::IMAP::ConnectionState::Authenticated (constant)">Authenticated</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state_logout!-instance_method">
  <h3 class='signature priv'>
    #<strong>state_logout!</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3797-L3801'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3797' data-end='3801'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3797</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_state_logout!'>state_logout!</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@connection_state</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ConnectionState.html" title="Net::IMAP::ConnectionState (class)">ConnectionState</a></span><span class='op'>::</span><span class='const'><a href="IMAP/ConnectionState.html#Logout-constant" title="Net::IMAP::ConnectionState::Logout (constant)">Logout</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state_selected!-instance_method">
  <h3 class='signature priv'>
    #<strong>state_selected!</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3787-L3791'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3787' data-end='3791'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3787</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_state_selected!'>state_selected!</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@connection_state</span> <span class='op'>=</span> <span class='const'><a href="IMAP/ConnectionState.html" title="Net::IMAP::ConnectionState (class)">ConnectionState</a></span><span class='op'>::</span><span class='const'><a href="IMAP/ConnectionState.html#Selected-constant" title="Net::IMAP::ConnectionState::Selected (constant)">Selected</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="state_unselected!-instance_method">
  <h3 class='signature priv'>
    #<strong>state_unselected!</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3793-L3795'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3793' data-end='3795'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3793</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_state_unselected!'>state_unselected!</span>
  <span class='id identifier rubyid_state_authenticated!'><a href="#state_authenticated!-instance_method" title="Net::IMAP#state_authenticated! (method)">state_authenticated!</a></span> <span class='kw'>if</span> <span class='id identifier rubyid_connection_state'><a href="#connection_state-instance_method" title="Net::IMAP#connection_state (method)">connection_state</a></span>.<span class='id identifier rubyid_to_sym'>to_sym</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_selected'>selected</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="status-instance_method">
  <h3 class='signature '>
    #<strong>status</strong>(mailbox, attr)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.10" target="_parent" title="STATUS command [IMAP4rev1 §6.3.10]">STATUS command [IMAP4rev1 §6.3.10]</a> and returns the status of the indicated <code>mailbox</code>. <code>attr</code> is a list of one or more attributes whose statuses are to be requested.</p>

<p>The return value is a hash of attributes.  Most status attributes return integer values, but some return other value types (documented below).</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if status values for <code>mailbox</code> cannot be returned; for instance, because it does not exist.</p>

<h4 id="label-Supported+attributes">Supported attributes</h4>
<dl class="rdoc-list note-list"><dt><code>MESSAGES</code></dt>
<dd>
<p>The number of messages in the mailbox.</p>
</dd><dt><code>UIDNEXT</code></dt>
<dd>
<p>The next unique identifier value of the mailbox.</p>
</dd><dt><code>UIDVALIDITY</code></dt>
<dd>
<p>The unique identifier validity value of the mailbox.</p>
</dd><dt><code>UNSEEN</code></dt>
<dd>
<p>The number of messages without the <code>\Seen</code> flag.</p>
</dd><dt><a href="#DELETED-constant" title="Net::IMAP::DELETED (constant)">DELETED</a></dt>
<dd>
<p>The number of messages with the <code>\Deleted</code> flag.</p>
</dd><dt><code>SIZE</code></dt>
<dd>
<p>The approximate size of the mailbox—must be greater than or equal to the sum of all messages’ <code>RFC822.SIZE</code> fetch item values.</p>
</dd><dt><code>HIGHESTMODSEQ</code></dt>
<dd>
<p>The highest mod-sequence value of all messages in the mailbox.  See <code>CONDSTORE</code> <a href="https://www.rfc-editor.org/rfc/rfc7162.html" target="_parent" title="[RFC7162]">[RFC7162]</a>.</p>
</dd><dt><code>MAILBOXID</code></dt>
<dd>
<p>A server-allocated unique <em>string</em> identifier for the mailbox.  See <code>OBJECTID</code> <a href="https://www.rfc-editor.org/rfc/rfc8474.html" target="_parent" title="[RFC8474]">[RFC8474]</a>.</p>
</dd><dt><a href="#RECENT-constant" title="Net::IMAP::RECENT (constant)">RECENT</a></dt>
<dd>
<p>The number of messages with the <code>\Recent</code> flag. <em>NOTE:</em> <a href="#RECENT-constant" title="Net::IMAP::RECENT (constant)">RECENT</a> was removed from IMAP4rev2.</p>
</dd></dl>

<p>Unsupported attributes may be requested.  The attribute value will be either an Integer or an <a href="IMAP/ExtensionData.html" title="Net::IMAP::ExtensionData (class)"><code>IMAP::ExtensionData</code></a> object.</p>

<h4 id="label-For+example-3A">For example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_status'>status</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MESSAGES</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RECENT</span><span class='tstring_end'>&quot;</span></span>])
<span class='comment'>#=&gt; {&quot;RECENT&quot;=&gt;0, &quot;MESSAGES&quot;=&gt;44}</span></code></pre>

<h4 id="label-Capabilities">Capabilities</h4>

<p><code>SIZE</code> requires the server’s capabilities to include either <code>IMAP4rev2</code> or <code>STATUS=SIZE</code> <a href="https://www.rfc-editor.org/rfc/rfc8483.html" target="_parent" title="[RFC8483]">[RFC8483]</a>.</p>

<p><a href="#DELETED-constant" title="Net::IMAP::DELETED (constant)">DELETED</a> requires the server’s capabilities to include <code>IMAP4rev2</code>.</p>

<p><code>HIGHESTMODSEQ</code> requires the server’s capabilities to include <code>CONDSTORE</code> <a href="https://www.rfc-editor.org/rfc/rfc7162.html" target="_parent" title="[RFC7162]">[RFC7162]</a>.</p>

<p><code>MAILBOXID</code> requires the server’s capabilities to include <code>OBJECTID</code> <a href="https://www.rfc-editor.org/rfc/rfc8474.html" target="_parent" title="[RFC8474]">[RFC8474]</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1980-L1985'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1980' data-end='1985'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1980</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span>(<span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STATUS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STATUS</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span><span class='op'>&amp;.</span><span class='id identifier rubyid_attr'>attr</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="store-instance_method">
  <h3 class='signature '>
    #<strong>store</strong>(set, attr, value, unchangedsince: nil)  &#x21d2; <code>array</code> <code>of</code> <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)">FetchData</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.6" target="_parent" title="STORE command [IMAP4rev1 §6.4.6]">STORE command [IMAP4rev1 §6.4.6]</a> to alter data associated with messages in the mailbox, in particular their flags.</p>

<p><code>set</code> is a number, an array of numbers, or a Range object.  Each number is a message sequence number.</p>

<p><code>attr</code> is the name of a data item to store.  The semantics of <code>value</code> varies based on <code>attr</code>:</p>
<ul><li>
<p>When <code>attr</code> is <code>&quot;FLAGS&quot;</code>, the flags in <code>value</code> replace the message’s flag list.</p>
</li><li>
<p>When <code>attr</code> is <code>&quot;+FLAGS&quot;</code>, the flags in <code>value</code> are added to the flags for the message.</p>
</li><li>
<p>When <code>attr</code> is <code>&quot;-FLAGS&quot;</code>, the flags in <code>value</code> are removed from the message.</p>
</li></ul>

<p><code>unchangedsince</code> is an optional integer mod-sequence.  It prohibits any changes to messages with <code>mod-sequence</code> greater than the specified <code>unchangedsince</code> value.  A SequenceSet of any messages that fail this check will be returned in a <code>MODIFIED</code> <a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)"><code>IMAP::ResponseCode</code></a>.</p>

<p>The return value is an array of <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)"><code>IMAP::FetchData</code></a>.</p>

<p>Related: <a href="#uid_store-instance_method" title="Net::IMAP#uid_store (method)">#uid_store</a></p>

<h4 id="label-For+example-3A">For example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_store'>store</span>(<span class='int'>6</span><span class='op'>..</span><span class='int'>8</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+FLAGS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='const'>Deleted</span>])
<span class='comment'>#=&gt; [#&lt;Net::IMAP::FetchData seqno=6, attr={&quot;FLAGS&quot;=&gt;[:Seen, :Deleted]}&gt;,
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=7, attr={&quot;FLAGS&quot;=&gt;[:Seen, :Deleted]}&gt;,
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=8, attr={&quot;FLAGS&quot;=&gt;[:Seen, :Deleted]}&gt;]</span></code></pre>

<h4 id="label-Capabilities">Capabilities</h4>

<p>Extensions may define new data items to be used with <code>#store</code>.</p>

<p>The server’s capabilities must include <code>CONDSTORE</code> <a href="https://www.rfc-editor.org/rfc/rfc7162" target="_parent" title="[RFC7162]">[RFC7162]</a> in order to use the <code>unchangedsince</code> argument.  Using <code>unchangedsince</code> implicitly enables the <code>CONDSTORE</code> extension.</p>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, the <code>STORE</code> command is prohibited.  Use <a href="#uid_store-instance_method" title="Net::IMAP#uid_store (method)">#uid_store</a> instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2729-L2731'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2729' data-end='2731'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2729</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_store'>store</span>(<span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span> <span class='label'>unchangedsince:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_store_internal'><a href="#store_internal-instance_method" title="Net::IMAP#store_internal (method)">store_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STORE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span> <span class='label'>unchangedsince:</span> <span class='id identifier rubyid_unchangedsince'>unchangedsince</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="store_internal-instance_method">
  <h3 class='signature priv'>
    #<strong>store_internal</strong>(cmd, set, attr, flags, unchangedsince: nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3682-L3688'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3682' data-end='3688'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3682</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_store_internal'>store_internal</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span> <span class='label'>unchangedsince:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_attr'>attr</span> <span class='op'>=</span> <span class='const'><a href="IMAP/RawData.html" title="Net::IMAP::RawData (class)">RawData</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Net::IMAP.new (method)">new</a></span>(<span class='id identifier rubyid_attr'>attr</span>) <span class='kw'>if</span> <span class='id identifier rubyid_attr'>attr</span>.<span class='id identifier rubyid_instance_of?'>instance_of?</span>(<span class='const'>String</span>)
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> [<span class='const'><a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)">SequenceSet</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/SequenceSet.html#new-class_method" title="Net::IMAP::SequenceSet.new (method)">new</a></span>(<span class='id identifier rubyid_set'>set</span>)]
  <span class='id identifier rubyid_args'>args</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UNCHANGEDSINCE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Integer</span>(<span class='id identifier rubyid_unchangedsince'>unchangedsince</span>)] <span class='kw'>if</span> <span class='id identifier rubyid_unchangedsince'>unchangedsince</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_attr'>attr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_flags'>flags</span>
  <span class='id identifier rubyid_send_command_returning_fetch_results'><a href="#send_command_returning_fetch_results-instance_method" title="Net::IMAP#send_command_returning_fetch_results (method)">send_command_returning_fetch_results</a></span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="subscribe-instance_method">
  <h3 class='signature '>
    #<strong>subscribe</strong>(mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.6" target="_parent" title="SUBSCRIBE command [IMAP4rev1 §6.3.6]">SUBSCRIBE command [IMAP4rev1 §6.3.6]</a> to add the specified <code>mailbox</code> name to the server’s set of “active” or “subscribed” mailboxes as returned by <a href="#lsub-instance_method" title="Net::IMAP#lsub (method)">#lsub</a>.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if <code>mailbox</code> cannot be subscribed to; for instance, because it does not exist.</p>

<p>Related: <a href="#unsubscribe-instance_method" title="Net::IMAP#unsubscribe (method)">#unsubscribe</a>, <a href="#lsub-instance_method" title="Net::IMAP#lsub (method)">#lsub</a>, <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1655-L1657'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1655' data-end='1657'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1655</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_subscribe'>subscribe</span>(<span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SUBSCRIBE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tcp_socket-instance_method">
  <h3 class='signature priv'>
    #<strong>tcp_socket</strong>(host, port)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3354-L3361'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3354' data-end='3361'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3354</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tcp_socket'>tcp_socket</span>(<span class='id identifier rubyid_host'><a href="#host-instance_method" title="Net::IMAP#host (method)">host</a></span><span class='comma'>,</span> <span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span>)
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>Socket</span>.<span class='id identifier rubyid_tcp'>tcp</span>(<span class='id identifier rubyid_host'><a href="#host-instance_method" title="Net::IMAP#host (method)">host</a></span><span class='comma'>,</span> <span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_connect_timeout'>connect_timeout</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_open_timeout'><a href="#open_timeout-instance_method" title="Net::IMAP#open_timeout (method)">open_timeout</a></span>)
  <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_setsockopt'>setsockopt</span>(<span class='symbeg'>:</span><span class='const'>SOL_SOCKET</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>SO_KEEPALIVE</span><span class='comma'>,</span> <span class='kw'>true</span>)
  <span class='id identifier rubyid_s'>s</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ETIMEDOUT</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Net.html" title="Net (module)">Net</a></span><span class='op'>::</span><span class='const'>OpenTimeout</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Timeout to open TCP connection to </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'><a href="#host-instance_method" title="Net::IMAP#host (method)">host</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'><a href="#port-instance_method" title="Net::IMAP#port (method)">port</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> (exceeds </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_open_timeout'><a href="#open_timeout-instance_method" title="Net::IMAP#open_timeout (method)">open_timeout</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> seconds)</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread-instance_method">
  <h3 class='signature '>
    #<strong>thread</strong>(algorithm, search_keys, charset)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="THREAD command [RFC5256 §3]">THREAD command [RFC5256 §3]</a> to search a mailbox and return message sequence numbers in threaded format, as a <a href="IMAP/ThreadMember.html" title="Net::IMAP::ThreadMember (class)"><code>IMAP::ThreadMember</code></a> tree.  <code>search_keys</code> are interpreted the same as for <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>.</p>

<p>The supported algorithms are:</p>
<dl class="rdoc-list note-list"><dt>ORDEREDSUBJECT</dt>
<dd>
<p>split into single-level threads according to subject, ordered by date.</p>
</dd><dt>REFERENCES</dt>
<dd>
<p>split into threads by parent/child relationships determined by which message is a reply to which.</p>
</dd></dl>

<p>Unlike <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <code>charset</code> is a required argument.  US-ASCII and UTF-8 are sample values.</p>

<p>Related: <a href="#uid_thread-instance_method" title="Net::IMAP#uid_thread (method)">#uid_thread</a>, <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>, <a href="#sort-instance_method" title="Net::IMAP#sort (method)">#sort</a>, <a href="#uid_sort-instance_method" title="Net::IMAP#uid_sort (method)">#uid_sort</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>THREAD</code> [<a href="https://www.rfc-editor.org/rfc/rfc5256">RFC5256</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2902-L2904'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2902' data-end='2904'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2902</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_thread'>thread</span>(<span class='id identifier rubyid_algorithm'>algorithm</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_thread_internal'><a href="#thread_internal-instance_method" title="Net::IMAP#thread_internal (method)">thread_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>THREAD</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_algorithm'>algorithm</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="thread_internal-instance_method">
  <h3 class='signature priv'>
    #<strong>thread_internal</strong>(cmd, algorithm, search_keys, charset)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L3713-L3719'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3713' data-end='3719'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 3713</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_thread_internal'>thread_internal</span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_algorithm'>algorithm</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
  <span class='id identifier rubyid_search_keys'>search_keys</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_searching_criteria'><a href="#normalize_searching_criteria-instance_method" title="Net::IMAP#normalize_searching_criteria (method)">normalize_searching_criteria</a></span>(<span class='id identifier rubyid_search_keys'>search_keys</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_algorithm'>algorithm</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_search_keys'>search_keys</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>THREAD</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_last'>last</span> <span class='op'>||</span> []
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_copy-instance_method">
  <h3 class='signature '>
    #<strong>uid_copy</strong>(set, mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID COPY command [IMAP4rev1 §6.4.8]">UID COPY command [IMAP4rev1 §6.4.8]</a> to copy the specified message(s) to the end of the specified destination <code>mailbox</code>.</p>

<p>Similar to <a href="#copy-instance_method" title="Net::IMAP#copy (method)">#copy</a>, but <code>set</code> contains unique identifiers.</p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> in enabled, <code>#uid_copy</code> must be used instead of <a href="#copy-instance_method" title="Net::IMAP#copy (method)">#copy</a>.</p>

<p>Otherwise, <code>#uid_copy</code> is updated by extensions in the same way as <a href="#copy-instance_method" title="Net::IMAP#copy (method)">#copy</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2789-L2791'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2789' data-end='2791'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2789</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_copy'>uid_copy</span>(<span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_copy_internal'><a href="#copy_internal-instance_method" title="Net::IMAP#copy_internal (method)">copy_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID COPY</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_expunge-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>uid_expunge</strong>  &#x21d2; <code>array</code> <code>of</code> <code>message</code> <code>sequence</code> <code>numbers</code> </span>
      <span class='overload'>#<strong>uid_expunge</strong>  &#x21d2; <a href="IMAP/VanishedData.html" title="Net::IMAP::VanishedData (class)">VanishedData</a> <code>of</code> <code>UIDs</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc4315#section-2.1" target="_parent" title="UID EXPUNGE command [RFC4315 §2.1]">UID EXPUNGE command [RFC4315 §2.1]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.9" target="_parent" title="[IMAP4rev2 §6.4.9]">[IMAP4rev2 §6.4.9]</a> to permanently remove all messages that have both the <code>\Deleted</code> flag set and a UID that is included in <code>uid_set</code>.</p>

<p>Returns the same result type as <a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">#expunge</a>.</p>

<p>By using <code>#uid_expunge</code> instead of <a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">#expunge</a> when resynchronizing with the server, the client can ensure that it does not inadvertantly remove any messages that have been marked as <code>\Deleted</code> by other clients between the time that the client was last connected and the time the client resynchronizes.</p>

<p>Related: <a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">#expunge</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include either <code>IMAP4rev2</code> or <code>UIDPLUS</code> [<a href="https://www.rfc-editor.org/rfc/rfc4315.html">RFC4315</a>].</p>

<p>Otherwise, <code>#uid_expunge</code> is updated by extensions in the same way as <a href="#expunge-instance_method" title="Net::IMAP#expunge (method)">#expunge</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2122-L2124'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2122' data-end='2124'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2122</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_expunge'>uid_expunge</span>(<span class='id identifier rubyid_uid_set'>uid_set</span>)
  <span class='id identifier rubyid_expunge_internal'><a href="#expunge_internal-instance_method" title="Net::IMAP#expunge_internal (method)">expunge_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID EXPUNGE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><a href="IMAP/SequenceSet.html" title="Net::IMAP::SequenceSet (class)">SequenceSet</a></span>.<span class='id identifier rubyid_new'><a href="IMAP/SequenceSet.html#new-class_method" title="Net::IMAP::SequenceSet.new (method)">new</a></span>(<span class='id identifier rubyid_uid_set'>uid_set</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_fetch-instance_method">
  <h3 class='signature '>
    #<strong>uid_fetch</strong>(set, attr, changedsince: nil, partial: nil)  &#x21d2; <code>array</code> <code>of</code> <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)">FetchData</a> (<code>or</code> <a href="IMAP/UIDFetchData.html" title="Net::IMAP::UIDFetchData (class)">UIDFetchData</a>)   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID FETCH command [IMAP4rev1 §6.4.8]">UID FETCH command [IMAP4rev1 §6.4.8]</a> to retrieve data associated with a message in the mailbox.</p>

<p><code>set</code> is the message UIDs to fetch, and may be any valid input to <a href="SequenceSet.html#label-Creating+sequence+sets" title="&lt;a href=&quot;...&quot;&gt;SequenceSet&lt;/a&gt;"><a href="...">SequenceSet</a></a>. (For message sequence numbers, use <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a> instead.)</p>

<p><code>attr</code> behaves the same as with <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>.</p>

<blockquote>
<p><strong>Note:</strong> Servers <em>MUST</em> implicitly include the <code>UID</code> message data item as part of any <code>FETCH</code> response caused by a <code>UID</code> command, regardless of whether a <code>UID</code> was specified as a message data item to the <code>FETCH</code>.</p>
</blockquote>

<p><code>changedsince</code> (optional) behaves the same as with <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>.</p>

<p><code>partial</code> is an optional range to limit the number of results returned. It’s useful when <code>set</code> contains an unknown number of messages. <code>1..500</code> returns the first 500 messages in <code>set</code> (in mailbox order), <code>501..1000</code> the second 500, and so on.  <code>partial</code> may also be negative: <code>-500..-1</code> selects the last 500 messages in <code>set</code>. <em>Requires the <code>PARTIAL</code> capabability.</em> <a href="https://rfc-editor.org/rfc/rfc9394" target="_parent" title="[RFC9394]">[RFC9394]</a></p>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Without partial, the size of the results may be unknown beforehand:
</span><span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_uid_fetch'>uid_fetch</span>(<span class='id identifier rubyid_next_uid_to_fetch'>next_uid_to_fetch</span><span class='op'>..</span><span class='comma'>,</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>UID</span><span class='words_sep'> </span><span class='tstring_content'>FLAGS</span><span class='tstring_end'>)</span></span>)
<span class='comment'># ... maybe wait for a long time ... and allocate a lot of memory ...
</span><span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_size'>size</span> <span class='comment'># =&gt; 0..2**32-1
</span><span class='id identifier rubyid_process'>process</span> <span class='id identifier rubyid_results'>results</span> <span class='comment'># may also take a long time and use a lot of memory...
</span>
<span class='comment'># Using partial, the results may be paginated:
</span><span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_uid_fetch'>uid_fetch</span>(<span class='id identifier rubyid_next_uid_to_fetch'>next_uid_to_fetch</span><span class='op'>..</span><span class='comma'>,</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>UID</span><span class='words_sep'> </span><span class='tstring_content'>FLAGS</span><span class='tstring_end'>)</span></span><span class='comma'>,</span>
                           <span class='label'>partial:</span> <span class='int'>1</span><span class='op'>..</span><span class='int'>500</span>)
  <span class='comment'># fetch should return quickly and allocate little memory
</span>  <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_size'>size</span> <span class='comment'># =&gt; 0..500
</span>  <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_next_uid_to_fetch'>next_uid_to_fetch</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span>.<span class='id identifier rubyid_last'>last</span>.<span class='id identifier rubyid_uid'>uid</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='id identifier rubyid_process'>process</span> <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></code></pre>

<p>Related: <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>, <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)"><code>IMAP::FetchData</code></a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>PARTIAL</code> <a href="https://rfc-editor.org/rfc/rfc9394" target="_parent" title="[RFC9394]">[RFC9394]</a> in order to use the <code>partial</code> argument.</p>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, <code>#uid_fetch</code> must be used instead of <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>, and <a href="IMAP/UIDFetchData.html" title="Net::IMAP::UIDFetchData (class)"><code>IMAP::UIDFetchData</code></a> will be returned instead of <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)"><code>IMAP::FetchData</code></a>.</p>

<p>Otherwise, <code>#uid_fetch</code> is updated by extensions in the same way as <a href="#fetch-instance_method" title="Net::IMAP#fetch (method)">#fetch</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2679-L2681'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2679' data-end='2681'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2679</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_fetch'>uid_fetch</span>(<span class='op'>...</span>)
  <span class='id identifier rubyid_fetch_internal'><a href="#fetch_internal-instance_method" title="Net::IMAP#fetch_internal (method)">fetch_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID FETCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>...</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_move-instance_method">
  <h3 class='signature '>
    #<strong>uid_move</strong>(set, mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc6851#section-3.2" target="_parent" title="UID MOVE command [RFC6851 §3.2]">UID MOVE command [RFC6851 §3.2]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.9" target="_parent" title="[IMAP4rev2 §6.4.9]">[IMAP4rev2 §6.4.9]</a> to move the specified message(s) to the end of the specified destination <code>mailbox</code>.</p>

<p>Similar to <a href="#move-instance_method" title="Net::IMAP#move (method)">#move</a>, but <code>set</code> contains unique identifiers.</p>

<p>Related: <a href="#move-instance_method" title="Net::IMAP#move (method)">#move</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include either <code>IMAP4rev2</code> or <code>MOVE</code> [<a href="https://www.rfc-editor.org/rfc/rfc6851">RFC6851</a>].</p>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, <code>#uid_move</code> must be used instead of <a href="#move-instance_method" title="Net::IMAP#move (method)">#move</a>.</p>

<p>Otherwise, <code>#uid_move</code> is updated by extensions in the same way as <a href="#move-instance_method" title="Net::IMAP#move (method)">#move</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2836-L2838'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2836' data-end='2838'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2836</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_move'>uid_move</span>(<span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_copy_internal'><a href="#copy_internal-instance_method" title="Net::IMAP#copy_internal (method)">copy_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID MOVE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_search-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>uid_search</strong>(criteria, charset = nil)  &#x21d2; <code>result</code> </span>
      <span class='overload'>#<strong>uid_search</strong>(criteria, charset: nil, return: nil)  &#x21d2; <code>result</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID SEARCH command [IMAP4rev1 §6.4.8]">UID SEARCH command [IMAP4rev1 §6.4.8]</a> to search the mailbox for messages that match the given searching criteria, and returns unique identifiers (<code>UID</code>s).</p>

<p>Returns a <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a> object.  <a href="IMAP/SearchResult.html" title="Net::IMAP::SearchResult (class)"><code>IMAP::SearchResult</code></a> inherits from Array (for backward compatibility) but adds <a href="IMAP/SearchResult.html#modseq-instance_method" title="Net::IMAP::SearchResult#modseq (method)">SearchResult#modseq</a> when the <code>CONDSTORE</code> capability has been enabled.</p>

<p>See <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a> for documentation of parameters.</p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, <code>#uid_search</code> must be used instead of <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, and the <code>&lt;message set&gt;</code> search criterion is prohibited.  Use <a href="#ALL-constant" title="Net::IMAP::ALL (constant)">ALL</a> or <code>UID sequence-set</code> instead.</p>

<p>Otherwise, <code>#uid_search</code> is updated by extensions in the same way as <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2563-L2565'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2563' data-end='2565'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2563</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_search'>uid_search</span>(<span class='op'>...</span>)
  <span class='id identifier rubyid_search_internal'><a href="#search_internal-instance_method" title="Net::IMAP#search_internal (method)">search_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID SEARCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>...</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_sort-instance_method">
  <h3 class='signature '>
    #<strong>uid_sort</strong>(sort_keys, search_keys, charset)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="UID SORT command [RFC5256 §3]">UID SORT command [RFC5256 §3]</a> to search a mailbox for messages that match <code>search_keys</code> and return an array of unique identifiers, sorted by <code>sort_keys</code>.  <code>search_keys</code> are interpreted the same as for <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>.</p>

<p>Related: <a href="#sort-instance_method" title="Net::IMAP#sort (method)">#sort</a>, <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>, <a href="#thread-instance_method" title="Net::IMAP#thread (method)">#thread</a>, <a href="#uid_thread-instance_method" title="Net::IMAP#uid_thread (method)">#uid_thread</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>SORT</code> [<a href="https://www.rfc-editor.org/rfc/rfc5256">RFC5256</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2877-L2879'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2877' data-end='2879'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2877</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_sort'>uid_sort</span>(<span class='id identifier rubyid_sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_sort_internal'><a href="#sort_internal-instance_method" title="Net::IMAP#sort_internal (method)">sort_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID SORT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_store-instance_method">
  <h3 class='signature '>
    #<strong>uid_store</strong>(set, attr, value, unchangedsince: nil)  &#x21d2; <code>array</code> <code>of</code> <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)">FetchData</a> (<code>or</code> <a href="IMAP/UIDFetchData.html" title="Net::IMAP::UIDFetchData (class)">UIDFetchData</a>)   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.4.8" target="_parent" title="UID STORE command [IMAP4rev1 §6.4.8]">UID STORE command [IMAP4rev1 §6.4.8]</a> to alter data associated with messages in the mailbox, in particular their flags.</p>

<p>Similar to <a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a>, but <code>set</code> contains unique identifiers instead of message sequence numbers.</p>

<p>Related: <a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>When <a href="https://www.rfc-editor.org/rfc/rfc9586.html">UIDONLY</a> is enabled, <code>#uid_store</code> must be used instead of <a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a>, and <a href="IMAP/UIDFetchData.html" title="Net::IMAP::UIDFetchData (class)"><code>IMAP::UIDFetchData</code></a> will be returned instead of <a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)"><code>IMAP::FetchData</code></a>.</p>

<p>Otherwise, <code>#uid_store</code> is updated by extensions in the same way as <a href="#store-instance_method" title="Net::IMAP#store (method)">#store</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2752-L2754'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2752' data-end='2754'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2752</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_store'>uid_store</span>(<span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span> <span class='label'>unchangedsince:</span> <span class='kw'>nil</span>)
  <span class='id identifier rubyid_store_internal'><a href="#store_internal-instance_method" title="Net::IMAP#store_internal (method)">store_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID STORE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span><span class='comma'>,</span> <span class='label'>unchangedsince:</span> <span class='id identifier rubyid_unchangedsince'>unchangedsince</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uid_thread-instance_method">
  <h3 class='signature '>
    #<strong>uid_thread</strong>(algorithm, search_keys, charset)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a <a href="https://www.rfc-editor.org/rfc/rfc5256#section-3" target="_parent" title="UID THREAD command [RFC5256 §3]">UID THREAD command [RFC5256 §3]</a> Similar to <a href="#thread-instance_method" title="Net::IMAP#thread (method)">#thread</a>, but returns unique identifiers instead of message sequence numbers.</p>

<p>Related: <a href="#thread-instance_method" title="Net::IMAP#thread (method)">#thread</a>, <a href="#search-instance_method" title="Net::IMAP#search (method)">#search</a>, <a href="#uid_search-instance_method" title="Net::IMAP#uid_search (method)">#uid_search</a>, <a href="#sort-instance_method" title="Net::IMAP#sort (method)">#sort</a>, <a href="#uid_sort-instance_method" title="Net::IMAP#uid_sort (method)">#uid_sort</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>THREAD</code> [<a href="https://www.rfc-editor.org/rfc/rfc5256">RFC5256</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2916-L2918'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2916' data-end='2918'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2916</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_uid_thread'>uid_thread</span>(<span class='id identifier rubyid_algorithm'>algorithm</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_thread_internal'><a href="#thread_internal-instance_method" title="Net::IMAP#thread_internal (method)">thread_internal</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID THREAD</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_algorithm'>algorithm</span><span class='comma'>,</span> <span class='id identifier rubyid_search_keys'>search_keys</span><span class='comma'>,</span> <span class='id identifier rubyid_charset'>charset</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unselect-instance_method">
  <h3 class='signature '>
    #<strong>unselect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3691#section-3" target="_parent" title="UNSELECT command [RFC3691 §2]">UNSELECT command [RFC3691 §2]</a> <a href="https://www.rfc-editor.org/rfc/rfc9051#section-6.4.2" target="_parent" title="[IMAP4rev2 §6.4.2]">[IMAP4rev2 §6.4.2]</a> to free the session resources for a mailbox and return to the “<em>authenticated</em>” state.  This is the same as <a href="#close-instance_method" title="Net::IMAP#close (method)">#close</a>, except that <code>\Deleted</code> messages are not removed from the mailbox.</p>

<p>Related: <a href="#close-instance_method" title="Net::IMAP#close (method)">#close</a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include either <code>IMAP4rev2</code> or <code>UNSELECT</code> [<a href="https://www.rfc-editor.org/rfc/rfc3691">RFC3691</a>].</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L2061-L2064'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2061' data-end='2064'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 2061</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unselect'>unselect</span>
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UNSELECT</span><span class='tstring_end'>&quot;</span></span>)
    .<span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='id identifier rubyid_state_authenticated!'><a href="#state_authenticated!-instance_method" title="Net::IMAP#state_authenticated! (method)">state_authenticated!</a></span> <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unsubscribe-instance_method">
  <h3 class='signature '>
    #<strong>unsubscribe</strong>(mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends an <a href="https://www.rfc-editor.org/rfc/rfc3501#section-6.3.7" target="_parent" title="UNSUBSCRIBE command [IMAP4rev1 §6.3.7]">UNSUBSCRIBE command [IMAP4rev1 §6.3.7]</a> to remove the specified <code>mailbox</code> name from the server’s set of “active” or “subscribed” mailboxes.</p>

<p>A <a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)"><code>IMAP::NoResponseError</code></a> is raised if <code>mailbox</code> cannot be unsubscribed from; for instance, because the client is not currently subscribed to it.</p>

<p>Related: <a href="#subscribe-instance_method" title="Net::IMAP#subscribe (method)">#subscribe</a>, <a href="#lsub-instance_method" title="Net::IMAP#lsub (method)">#lsub</a>, <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1668-L1670'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1668' data-end='1670'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1668</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unsubscribe'>unsubscribe</span>(<span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UNSUBSCRIBE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="validate_data-instance_method">
  <h3 class='signature priv'>
    #<strong>validate_data</strong>(data)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap/command_data.rb#L13-L32'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13' data-end='32'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap/command_data.rb', line 13</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_data'>validate_data</span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span>
  <span class='kw'>when</span> <span class='kw'>nil</span>
  <span class='kw'>when</span> <span class='const'>String</span>
  <span class='kw'>when</span> <span class='const'>Integer</span>
    <span class='const'><a href="IMAP/NumValidator.html" title="Net::IMAP::NumValidator (module)">NumValidator</a></span>.<span class='id identifier rubyid_ensure_number'><a href="IMAP/NumValidator.html#ensure_number-class_method" title="Net::IMAP::NumValidator.ensure_number (method)">ensure_number</a></span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>[<span class='int'>0</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CHANGEDSINCE</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'><a href="IMAP/NumValidator.html" title="Net::IMAP::NumValidator (module)">NumValidator</a></span>.<span class='id identifier rubyid_ensure_mod_sequence_value'><a href="IMAP/NumValidator.html#ensure_mod_sequence_value-class_method" title="Net::IMAP::NumValidator.ensure_mod_sequence_value (method)">ensure_mod_sequence_value</a></span>(<span class='id identifier rubyid_data'>data</span>[<span class='int'>1</span>])
    <span class='kw'>else</span>
      <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_validate_data'>validate_data</span>(<span class='id identifier rubyid_i'>i</span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='const'>Time</span><span class='comma'>,</span> <span class='const'>Date</span><span class='comma'>,</span> <span class='const'>DateTime</span>
  <span class='kw'>when</span> <span class='const'>Symbol</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_validate'>validate</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="xlist-instance_method">
  <h3 class='signature '>
    #<strong>xlist</strong>(refname, mailbox)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sends a XLIST command, and returns a subset of names from the complete set of all names available to the client. <code>refname</code> provides a context (for instance, a base directory in a directory-based mailbox hierarchy).  <code>mailbox</code> specifies a mailbox or (via wildcards) mailboxes under that context. Two wildcards may be used in <code>mailbox</code>: ‘*’, which matches all characters <strong>including</strong> the hierarchy delimiter (for instance, ‘/’ on a UNIX-hosted directory-based mailbox hierarchy); and ‘%’, which matches all characters <strong>except</strong> the hierarchy delimiter.</p>

<p>If <code>refname</code> is empty, <code>mailbox</code> is used directly to determine which mailboxes to match.  If <code>mailbox</code> is empty, the root name of <code>refname</code> and the hierarchy delimiter are returned.</p>

<p>The XLIST command is like the LIST command except that the flags returned refer to the function of the folder/mailbox, e.g. <code>:Sent</code></p>

<p>The return value is an array of <a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)"><code>IMAP::MailboxList</code></a> objects. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/bar</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_create'><a href="#create-instance_method" title="Net::IMAP#create (method)">create</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/baz</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_imap'>imap</span>.<span class='id identifier rubyid_xlist'>xlist</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/%</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; [#&lt;Net::IMAP::MailboxList attr=[:Noselect], delim=&quot;/&quot;, name=&quot;foo/&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors, :Marked], delim=&quot;/&quot;, name=&quot;foo/bar&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors], delim=&quot;/&quot;, name=&quot;foo/baz&quot;&gt;]</span></code></pre>

<p>Related: <a href="#list-instance_method" title="Net::IMAP#list (method)">#list</a>, <a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)"><code>IMAP::MailboxList</code></a></p>

<h4 id="label-Capabilities">Capabilities</h4>

<p>The server’s capabilities must include <code>XLIST</code>, a deprecated Gmail extension (replaced by <code>SPECIAL-USE</code>).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/net-imap/blob/v0.5.8/lib/net/imap.rb#L1803-L1808'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1803' data-end='1808'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/net/imap.rb', line 1803</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_xlist'>xlist</span>(<span class='id identifier rubyid_refname'>refname</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_send_command'><a href="#send_command-instance_method" title="Net::IMAP#send_command (method)">send_command</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>XLIST</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_refname'>refname</span><span class='comma'>,</span> <span class='id identifier rubyid_mailbox'>mailbox</span>)
    <span class='id identifier rubyid_clear_responses'><a href="#clear_responses-instance_method" title="Net::IMAP#clear_responses (method)">clear_responses</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>XLIST</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>