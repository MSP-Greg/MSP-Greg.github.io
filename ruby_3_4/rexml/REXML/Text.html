<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: REXML::Text &mdash; rexml  Ruby-3.4.7 p58</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "REXML::Text",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.4.7</a> &raquo; 
      <a href='../'>rexml</a> &raquo; 
      <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../REXML.html" title="REXML (module)">REXML</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Text&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: REXML::Text</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="CData.html" title="REXML::CData (class)">CData</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="Child.html" title="REXML::Child (class)"><code>Child</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Comparable,
          <a href="Child.html" title="REXML::Child (class)"><code>Child</code></a>,
          <a href="Node.html" title="REXML::Node (module)"><code>Node</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Child.html" title="REXML::Child (class)">REXML::Child</a></span>
        <ul class='fullTree'>
          <li>Object</li>
          <li class='next'><a href="Child.html" title="REXML::Child (class)">REXML::Child</a></li>
          <li class='next'>REXML::Text</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L11'>lib/rexml/text.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Represents text nodes in an XML document</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='EREFERENCE-constant' class='summary_signature'>EREFERENCE =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L364-L364'># File 'lib/rexml/text.rb', line 364</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;(?!</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Entity.html" title="REXML::Entity (class)">Entity</a></span><span class='op'>::</span><span class='const'><a href="XMLTokens.html#NAME-constant" title="REXML::XMLTokens::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>;)</span><span class='regexp_end'>/</span></span></pre>
  </li>
  <li>
    <span id='NEEDS_A_SECOND_CHECK-constant' class='summary_signature'>NEEDS_A_SECOND_CHECK =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L23-L23'># File 'lib/rexml/text.rb', line 23</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(&lt;|&amp;((</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Entity.html" title="REXML::Entity (class)">Entity</a></span><span class='op'>::</span><span class='const'><a href="XMLTokens.html#NAME-constant" title="REXML::XMLTokens::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>);|(#0*((?:\d)|(?:x[a-fA-F0-9])));)?)</span><span class='regexp_end'>/um</span></span></pre>
  </li>
  <li>
    <span id='NUMERICENTITY-constant' class='summary_signature'>NUMERICENTITY =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L24-L24'># File 'lib/rexml/text.rb', line 24</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;#0*((?:\d)|(?:x[a-fA-F0-9]));</span><span class='regexp_end'>/</span></span></pre>
  </li>
  <li>
    <span id='REFERENCE-constant' class='summary_signature'>REFERENCE =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L209-L209'># File 'lib/rexml/text.rb', line 209</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Entity.html" title="REXML::Entity (class)">Entity</a></span><span class='op'>::</span><span class='const'><a href="XMLTokens.html#REFERENCE-constant" title="REXML::XMLTokens::REFERENCE (constant)">REFERENCE</a></span><span class='embexpr_end'>}</span><span class='regexp_end'>/</span></span></pre>
  </li>
  <li>
    <span id='SETUTITSBUS-constant' class='summary_signature'>SETUTITSBUS =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L18-L18'># File 'lib/rexml/text.rb', line 18</a>    <pre class='code ruby'>[ <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;lt;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;gt;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;quot;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;apos;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;amp;</span><span class='regexp_end'>/u</span></span> ]</pre>
  </li>
  <li>
    <span id='SLAICEPS-constant' class='summary_signature'>SLAICEPS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Characters which are substituted in written strings</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L17-L17'># File 'lib/rexml/text.rb', line 17</a>    <pre class='code ruby'>[ <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span> ]</pre>
  </li>
  <li>
    <span id='SPECIALS-constant' class='summary_signature'>SPECIALS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The order in which the substitutions occur</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L14-L14'># File 'lib/rexml/text.rb', line 14</a>    <pre class='code ruby'>[ <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;(?!#?[\w-]+;)</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&gt;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&quot;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&#39;</span><span class='regexp_end'>/u</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r</span><span class='regexp_end'>/u</span></span> ]</pre>
  </li>
  <li>
    <span id='SUBSTITUTES-constant' class='summary_signature'>SUBSTITUTES =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L15-L15'># File 'lib/rexml/text.rb', line 15</a>    <pre class='code ruby'>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;lt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;apos;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;#13;</span><span class='tstring_end'>&#39;</span></span>]</pre>
  </li>
  <li>
    <span id='VALID_CHAR-constant' class='summary_signature'>VALID_CHAR =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L25-L30'># File 'lib/rexml/text.rb', line 25</a>    <pre class='code ruby'>[
  <span class='int'>0x9</span><span class='comma'>,</span> <span class='int'>0xA</span><span class='comma'>,</span> <span class='int'>0xD</span><span class='comma'>,</span>
  (<span class='int'>0x20</span><span class='op'>..</span><span class='int'>0xD7FF</span>)<span class='comma'>,</span>
  (<span class='int'>0xE000</span><span class='op'>..</span><span class='int'>0xFFFD</span>)<span class='comma'>,</span>
  (<span class='int'>0x10000</span><span class='op'>..</span><span class='int'>0x10FFFF</span>)
]</pre>
  </li>
  <li>
    <span id='VALID_XML_CHARS-constant' class='summary_signature'>VALID_XML_CHARS =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L32-L41'># File 'lib/rexml/text.rb', line 32</a>    <pre class='code ruby'><span class='const'>Regexp</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>^[</span><span class='tstring_end'>&#39;</span></span><span class='op'>+</span>
  <span class='const'><a href="#VALID_CHAR-constant" title="REXML::Text::VALID_CHAR (constant)">VALID_CHAR</a></span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_item'>item</span>
    <span class='kw'>when</span> <span class='const'>Integer</span>
      [<span class='id identifier rubyid_item'>item</span>].<span class='id identifier rubyid_pack'>pack</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>utf-8</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>when</span> <span class='const'>Range</span>
      [<span class='id identifier rubyid_item'>item</span>.<span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_ord'>ord</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span>.<span class='id identifier rubyid_last'>last</span>].<span class='id identifier rubyid_pack'>pack</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UUU</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>utf-8</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>end</span>
  }.<span class='id identifier rubyid_join'>join</span> <span class='op'>+</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>]*$</span><span class='tstring_end'>&#39;</span></span>)</pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#check-class_method" title=".check (class method)">.<strong>check</strong>(string, pattern, doctype)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>check for illegal characters.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(arg, respect_whitespace = false, parent = nil, raw = nil, entity_filter = nil, illegal = NEEDS_A_SECOND_CHECK)  &#x21d2; Text </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructor <code>arg</code> if a String, the content is set to the String.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#expand-class_method" title=".expand (class method)">.<strong>expand</strong>(ref, doctype, filter)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize-class_method" title=".normalize (class method)">.<strong>normalize</strong>(input, doctype = nil, entity_filter = nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Escapes all possible entities.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#read_with_substitution-class_method" title=".read_with_substitution (class method)">.<strong>read_with_substitution</strong>(input, illegal = nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads text, substituting entities.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#unnormalize-class_method" title=".unnormalize (class method)">.<strong>unnormalize</strong>(string, doctype = nil, filter = nil, illegal = nil, entity_expansion_text_limit: nil)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Unescapes all possible entities.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Child.html" title="REXML::Child (class)"><code>Child</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Child.html#new-class_method" title="REXML::Child.new (method)">.new</a></td>
      <td><div class='inline'><p>Constructor.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature wo'>
      <a href="#parent=-instance_method" title="#parent= (instance method)">#<strong>parent=</strong>(parent)  </a>
    </span>
    <span class='note title writeonly'>writeonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#raw-instance_method" title="#raw (instance method)">#<strong>raw</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>If <a href="#raw-instance_method" title="REXML::Text#raw (method)">#raw</a> is true, then <a href="../REXML.html" title="REXML (module)"><code>::REXML</code></a> leaves the value alone.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#value-instance_method" title="#value (instance method)">#<strong>value</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the string value of this text.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#value=-instance_method" title="#value= (instance method)">#<strong>value=</strong>(val)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the contents of this text node.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Child.html" title="REXML::Child (class)"><code>Child</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Child.html#next_sibling-instance_method" title="REXML::Child#next_sibling (method)">#next_sibling</a></td>
      <td><div class='inline'><p>Alias for <a href="Node.html#next_sibling_node-instance_method" title="REXML::Node#next_sibling_node (method)">Node#next_sibling_node</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Child.html#next_sibling=-instance_method" title="REXML::Child#next_sibling= (method)">#next_sibling=</a></td>
      <td><div class='inline'><p>Sets the next sibling of this child.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Child.html#parent-instance_method" title="REXML::Child#parent (method)">#parent</a></td>
      <td><div class='inline'><p>The Parent of this object.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Child.html#parent=-instance_method" title="REXML::Child#parent= (method)">#parent=</a></td>
      <td><div class='inline'><p>Sets the parent of this child to the supplied argument.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Child.html#previous_sibling-instance_method" title="REXML::Child#previous_sibling (method)">#previous_sibling</a></td>
      <td><div class='inline'><p>Alias for <a href="Node.html#previous_sibling_node-instance_method" title="REXML::Node#previous_sibling_node (method)">Node#previous_sibling_node</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Child.html#previous_sibling=-instance_method" title="REXML::Child#previous_sibling= (method)">#previous_sibling=</a></td>
      <td><div class='inline'><p>Sets the previous sibling of this child.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Node.html" title="REXML::Node (module)"><code>Node</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro' href="Node.html#parent%3F-instance_method" title="REXML::Node#parent? (method)">#parent?</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(to_append)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Appends text to this text node.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#<=>-instance_method" title="#&lt;=&gt; (instance method)">#<strong>&lt;=&gt;</strong>(other)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><code>other</code> a String or a <code>Text</code> <code>returns</code> the result of (to_s &lt;=&gt; arg.to_s).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clone-instance_method" title="#clone (instance method)">#<strong>clone</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#doctype-instance_method" title="#doctype (instance method)">#<strong>doctype</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#indent_text-instance_method" title="#indent_text (instance method)">#<strong>indent_text</strong>(string, level = 1, style = &quot;\t&quot;, indentfirstline = true)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#node_type-instance_method" title="#node_type (instance method)">#<strong>node_type</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the string value of this text node.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wrap-instance_method" title="#wrap (instance method)">#<strong>wrap</strong>(string, width, addnewline = false)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(writer, indent = -1,, transitive = false, ie_hack = false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>DEPRECATED See <a href="Formatters.html" title="REXML::Formatters (module)"><code>Formatters</code></a></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_with_substitution-instance_method" title="#write_with_substitution (instance method)">#<strong>write_with_substitution</strong>(out, input)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes out text, substituting special characters beforehand.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#xpath-instance_method" title="#xpath (instance method)">#<strong>xpath</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>FIXME This probably won’t work properly.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#clear_cache-instance_method" title="#clear_cache (instance method)">#<strong>clear_cache</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited'><a href="Child.html" title="REXML::Child (class)"><code>Child</code></a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Child.html#bytes-instance_method" title="REXML::Child#bytes (method)">#bytes</a></td>
      <td><div class='inline'><p>This doesn’t yet handle encodings.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Child.html#document-instance_method" title="REXML::Child#document (method)">#document</a></td>
      <td><div class='inline'><dl class="rdoc-list note-list"><dt>Returns</dt><dd><p>the document this child belongs to, or nil if this child belongs to no document.</p></dd></dl></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Child.html#remove-instance_method" title="REXML::Child#remove (method)">#remove</a></td>
      <td><div class='inline'><p>Removes this child from the parent.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Child.html#replace_with-instance_method" title="REXML::Child#replace_with (method)">#replace_with</a></td>
      <td><div class='inline'><p>Replaces this object with another object.</p></div></td>
    </tr>
  </tbody>
</table></div>

<h3 class='inherited'><a href="Node.html" title="REXML::Node (module)"><code>Node</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Node.html#each_recursive-instance_method" title="REXML::Node#each_recursive (method)">#each_recursive</a></td>
      <td><div class='inline'><p>Visit all subnodes of <code>self</code> recursively.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Node.html#find_first_recursive-instance_method" title="REXML::Node#find_first_recursive (method)">#find_first_recursive</a></td>
      <td><div class='inline'><p>Find (and return) first subnode (recursively) for which the block evaluates to true.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Node.html#indent-instance_method" title="REXML::Node#indent (method)">#indent</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Node.html#index_in_parent-instance_method" title="REXML::Node#index_in_parent (method)">#index_in_parent</a></td>
      <td><div class='inline'><p>Returns the position that <code>self</code> holds in its parent’s array, indexed from 1.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Node.html#next_sibling_node-instance_method" title="REXML::Node#next_sibling_node (method)">#next_sibling_node</a>,
        <a class='i_m ' href="Node.html#previous_sibling_node-instance_method" title="REXML::Node#previous_sibling_node (method)">#previous_sibling_node</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Node.html#to_s-instance_method" title="REXML::Node#to_s (method)">#to_s</a></td>
      <td><div class='inline'><dl class="rdoc-list note-list"><dt>indent</dt><dd></dd></dl></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(arg, respect_whitespace = false, parent = nil, raw = nil, entity_filter = nil, illegal = NEEDS_A_SECOND_CHECK)  &#x21d2; <code>Text</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructor <code>arg</code> if a String, the content is set to the String.  If a <code>Text</code>, the object is shallowly cloned.</p>

<p><code>respect_whitespace</code> (boolean, false) if true, whitespace is respected</p>

<p><code>parent</code> (nil) if this is a <a href="Parent.html" title="REXML::Parent (class)"><code>Parent</code></a> object, the parent will be set to this.</p>

<p><a href="#raw-instance_method" title="REXML::Text#raw (method)">#raw</a> (nil) This argument can be given three values. If true, then the value of used to construct this object is expected to contain no unescaped XML markup, and <a href="../REXML.html" title="REXML (module)"><code>::REXML</code></a> will not change the text. If this value is false, the string may contain any characters, and <a href="../REXML.html" title="REXML (module)"><code>::REXML</code></a> will escape any and all defined entities whose values are contained in the text.  If this value is nil (the default), then the raw value of the parent will be used as the raw value for this node.  If there is no raw value for the parent, and no value is supplied, the default is false. Use this field if you have entities defined for some text, and you don’t want <a href="../REXML.html" title="REXML (module)"><code>::REXML</code></a> to escape that text in output.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;&amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span> ) <span class='comment'>#-&gt; &quot;&amp;lt;&amp;amp;&quot;
</span><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;lt;&amp;amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span> ) <span class='comment'>#-&gt; &quot;&amp;amp;lt;&amp;amp;amp;&quot;
</span><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;&amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span> )  <span class='comment'>#-&gt; Parse exception
</span><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;lt;&amp;amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span> )  <span class='comment'>#-&gt; &quot;&amp;lt;&amp;amp;&quot;
</span><span class='comment'># Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;
</span><span class='comment'># and that the entity    &quot;r&quot; is defined to be &quot;russell&quot;
</span><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sean russell</span><span class='tstring_end'>&quot;</span></span> )          <span class='comment'>#-&gt; &quot;&amp;s; &amp;r;&quot;
</span><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sean russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span> ) <span class='comment'>#-&gt; &quot;sean russell&quot;</span></code></pre>

<p><code>entity_filter</code> (nil) This can be an array of entities to match in the supplied text.  This argument is only useful if <a href="#raw-instance_method" title="REXML::Text#raw (method)">#raw</a> is set to false.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sean russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>s</span><span class='tstring_end'>&quot;</span></span>] ) <span class='comment'>#-&gt; &quot;&amp;s; russell&quot;
</span><span class='const'>Text</span>.<span class='id identifier rubyid_new'>new</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sean russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>s</span><span class='tstring_end'>&quot;</span></span>] ) <span class='comment'>#-&gt; &quot;sean russell&quot;</span></code></pre>

<p>In the last example, the <code>entity_filter</code> argument is ignored.</p>

<p><code>illegal</code> INTERNAL USE ONLY</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L79-L108'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='79' data-end='108'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 79</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_arg'>arg</span><span class='comma'>,</span> <span class='id identifier rubyid_respect_whitespace'>respect_whitespace</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_raw'><a href="#raw-instance_method" title="REXML::Text#raw (method)">raw</a></span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_entity_filter'>entity_filter</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_illegal'>illegal</span><span class='op'>=</span><span class='const'><a href="#NEEDS_A_SECOND_CHECK-constant" title="REXML::Text::NEEDS_A_SECOND_CHECK (constant)">NEEDS_A_SECOND_CHECK</a></span> )

  <span class='ivar'>@raw</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@entity_filter</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_parent'>parent</span>
    <span class='kw'>super</span>( <span class='id identifier rubyid_parent'>parent</span> )
    <span class='ivar'>@raw</span> <span class='op'>=</span> <span class='id identifier rubyid_parent'>parent</span>.<span class='id identifier rubyid_raw'><a href="#raw-instance_method" title="REXML::Text#raw (method)">raw</a></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span> <span class='const'>String</span>
    <span class='ivar'>@string</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span> <span class='const'>Text</span>
    <span class='ivar'>@string</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span>(<span class='symbeg'>:</span><span class='ivar'>@string</span>).<span class='id identifier rubyid_dup'>dup</span>
    <span class='ivar'>@raw</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_raw'><a href="#raw-instance_method" title="REXML::Text#raw (method)">raw</a></span>
    <span class='ivar'>@entity_filter</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span>(<span class='symbeg'>:</span><span class='ivar'>@entity_filter</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal argument of type </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_arg'>arg</span>.<span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'> for Text constructor (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_arg'>arg</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@string</span>.<span class='id identifier rubyid_squeeze!'>squeeze!</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> \n\t</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>unless</span> <span class='id identifier rubyid_respect_whitespace'>respect_whitespace</span>
  <span class='ivar'>@string</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)
  <span class='ivar'>@raw</span> <span class='op'>=</span> <span class='id identifier rubyid_raw'><a href="#raw-instance_method" title="REXML::Text#raw (method)">raw</a></span> <span class='kw'>unless</span> <span class='id identifier rubyid_raw'><a href="#raw-instance_method" title="REXML::Text#raw (method)">raw</a></span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='ivar'>@entity_filter</span> <span class='op'>=</span> <span class='id identifier rubyid_entity_filter'>entity_filter</span> <span class='kw'>if</span> <span class='id identifier rubyid_entity_filter'>entity_filter</span>
  <span class='id identifier rubyid_clear_cache'><a href="#clear_cache-instance_method" title="REXML::Text#clear_cache (method)">clear_cache</a></span>

  <span class='const'>Text</span>.<span class='id identifier rubyid_check'><a href="#check-class_method" title="REXML::Text.check (method)">check</a></span>(<span class='ivar'>@string</span><span class='comma'>,</span> <span class='id identifier rubyid_illegal'>illegal</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span>) <span class='kw'>if</span> <span class='ivar'>@raw</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="check-class_method">
  <h3 class='signature  first'>
    .<strong>check</strong>(string, pattern, doctype)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>check for illegal characters</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L116-L168'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='116' data-end='168'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 116</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='const'>Text</span>.<span class='id identifier rubyid_check'>check</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span>

  <span class='comment'># illegal anywhere
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='const'><a href="#VALID_XML_CHARS-constant" title="REXML::Text::VALID_XML_CHARS (constant)">VALID_XML_CHARS</a></span>)
    <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_chars'>chars</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
      <span class='kw'>case</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_ord'>ord</span>
      <span class='kw'>when</span> <span class='op'>*</span><span class='const'><a href="#VALID_CHAR-constant" title="REXML::Text::VALID_CHAR (constant)">VALID_CHAR</a></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> (<span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;|&amp;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_pos'>pos</span>))
    <span class='kw'>if</span> <span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_index'>index</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_index'>index</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> (<span class='id identifier rubyid_end_index'>end_index</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_index'>index</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^\s];</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span>))
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_index'>index</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>[(<span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span>)<span class='op'>..</span><span class='id identifier rubyid_end_index'>end_index</span>]
    <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span>)
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_index'>index</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span>[<span class='int'>0</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_character_reference'>character_reference</span> <span class='op'>=</span> <span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span>[<span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>]

      <span class='kw'>unless</span> (<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(\d|x[0-9a-fA-F])\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_character_reference'>character_reference</span>))
        <span class='kw'>if</span> <span class='id identifier rubyid_character_reference'>character_reference</span>[<span class='int'>0</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_character_reference'>character_reference</span>[<span class='op'>-</span><span class='int'>1</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_index'>index</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='kw'>case</span> (<span class='id identifier rubyid_character_reference'>character_reference</span>[<span class='int'>0</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x</span><span class='tstring_end'>&quot;</span></span> <span class='op'>?</span> <span class='id identifier rubyid_character_reference'>character_reference</span>[<span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>].<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>16</span>) <span class='op'>:</span> <span class='id identifier rubyid_character_reference'>character_reference</span>[<span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>].<span class='id identifier rubyid_to_i'>to_i</span>)
      <span class='kw'>when</span> <span class='op'>*</span><span class='const'><a href="#VALID_CHAR-constant" title="REXML::Text::VALID_CHAR (constant)">VALID_CHAR</a></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='op'>!</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Entity.html" title="REXML::Entity (class)">Entity</a></span><span class='op'>::</span><span class='const'><a href="XMLTokens.html#NAME-constant" title="REXML::XMLTokens::NAME (constant)">NAME</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\z</span><span class='regexp_end'>/um</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span>))
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Illegal character \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_index'>index</span>]<span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; in raw string </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="REXML::Text#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_end_index'>end_index</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_string'>string</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expand-class_method">
  <h3 class='signature priv'>
    .<strong>expand</strong>(ref, doctype, filter)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L404-L421'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='404' data-end='421'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 404</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='const'>Text</span>.<span class='id identifier rubyid_expand'>expand</span>(<span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filter'>filter</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_ref'>ref</span>[<span class='int'>1</span>] <span class='op'>==</span> <span class='CHAR'>?#</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_ref'>ref</span>[<span class='int'>2</span>] <span class='op'>==</span> <span class='CHAR'>?x</span>
      [<span class='id identifier rubyid_ref'>ref</span>[<span class='int'>3</span><span class='op'>...</span><span class='op'>-</span><span class='int'>1</span>].<span class='id identifier rubyid_to_i'>to_i</span>(<span class='int'>16</span>)].<span class='id identifier rubyid_pack'>pack</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>else</span>
      [<span class='id identifier rubyid_ref'>ref</span>[<span class='int'>2</span><span class='op'>...</span><span class='op'>-</span><span class='int'>1</span>].<span class='id identifier rubyid_to_i'>to_i</span>].<span class='id identifier rubyid_pack'>pack</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&#39;</span></span>)
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_ref'>ref</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&#39;</span></span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_filter'>filter</span> <span class='kw'>and</span> <span class='id identifier rubyid_filter'>filter</span>.<span class='id identifier rubyid_include?'>include?</span>( <span class='id identifier rubyid_ref'>ref</span>[<span class='int'>1</span><span class='op'>...</span><span class='op'>-</span><span class='int'>1</span>] )
    <span class='id identifier rubyid_ref'>ref</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span>
    <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span>.<span class='id identifier rubyid_entity'>entity</span>( <span class='id identifier rubyid_ref'>ref</span>[<span class='int'>1</span><span class='op'>...</span><span class='op'>-</span><span class='int'>1</span>] ) <span class='kw'>or</span> <span class='id identifier rubyid_ref'>ref</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_entity_value'>entity_value</span> <span class='op'>=</span> <span class='const'><a href="DocType.html" title="REXML::DocType (class)">DocType</a></span><span class='op'>::</span><span class='const'><a href="DocType.html#DEFAULT_ENTITIES-constant" title="REXML::DocType::DEFAULT_ENTITIES (constant)">DEFAULT_ENTITIES</a></span>[ <span class='id identifier rubyid_ref'>ref</span>[<span class='int'>1</span><span class='op'>...</span><span class='op'>-</span><span class='int'>1</span>] ]
    <span class='id identifier rubyid_entity_value'>entity_value</span> <span class='op'>?</span> <span class='id identifier rubyid_entity_value'>entity_value</span>.<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span> <span class='op'>:</span> <span class='id identifier rubyid_ref'>ref</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize-class_method">
  <h3 class='signature priv'>
    .<strong>normalize</strong>(input, doctype = nil, entity_filter = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Escapes all possible entities</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L366-L387'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='366' data-end='387'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 366</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='const'>Text</span><span class='op'>::</span><span class='id identifier rubyid_normalize'>normalize</span>( <span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_entity_filter'>entity_filter</span><span class='op'>=</span><span class='kw'>nil</span> )
  <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span>.<span class='id identifier rubyid_to_s'><a href="#to_s-instance_method" title="REXML::Text#to_s (method)">to_s</a></span>
  <span class='comment'># Doing it like this rather than in a loop improves the speed
</span>  <span class='comment'>#copy = copy.gsub( EREFERENCE, &#39;&amp;amp;&#39; )
</span>  <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub'>gsub</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&quot;</span></span> ) <span class='kw'>if</span> <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span>
    <span class='comment'># Replace all ampersands that aren&#39;t part of an entity
</span>    <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span>.<span class='id identifier rubyid_entities'>entities</span>.<span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entity'>entity</span><span class='op'>|</span>
      <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub'>gsub</span>( <span class='id identifier rubyid_entity'>entity</span>.<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entity'>entity</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span> ) <span class='kw'>if</span> <span class='id identifier rubyid_entity'>entity</span>.<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span> <span class='kw'>and</span>
          <span class='kw'>not</span>( <span class='id identifier rubyid_entity_filter'>entity_filter</span> <span class='kw'>and</span> <span class='id identifier rubyid_entity_filter'>entity_filter</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_entity'>entity</span>.<span class='id identifier rubyid_name'>name</span>) )
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='comment'># Replace all ampersands that aren&#39;t part of an entity
</span>    <span class='const'><a href="DocType.html" title="REXML::DocType (class)">DocType</a></span><span class='op'>::</span><span class='const'><a href="DocType.html#DEFAULT_ENTITIES-constant" title="REXML::DocType::DEFAULT_ENTITIES (constant)">DEFAULT_ENTITIES</a></span>.<span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entity'>entity</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_entity'>entity</span>.<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span>)
        <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='id identifier rubyid_entity'>entity</span>.<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entity'>entity</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span> )
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_copy'>copy</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_with_substitution-class_method">
  <h3 class='signature priv'>
    .<strong>read_with_substitution</strong>(input, illegal = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads text, substituting entities</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L340-L362'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='340' data-end='362'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 340</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='const'>Text</span><span class='op'>::</span><span class='id identifier rubyid_read_with_substitution'>read_with_substitution</span>( <span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_illegal'>illegal</span><span class='op'>=</span><span class='kw'>nil</span> )
  <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span>.<span class='id identifier rubyid_clone'><a href="#clone-instance_method" title="REXML::Text#clone (method)">clone</a></span>

  <span class='kw'>if</span> <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=~</span> <span class='id identifier rubyid_illegal'>illegal</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="ParseException.html" title="REXML::ParseException (class)">ParseException</a></span>.<span class='id identifier rubyid_new'><a href="ParseException.html#new-class_method" title="REXML::ParseException.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>malformed text: Illegal character </span><span class='embvar'>#</span><span class='backref'>$&amp;</span><span class='tstring_content'> in \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_copy'>copy</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span> )
  <span class='kw'>end</span> <span class='kw'>if</span> <span class='id identifier rubyid_illegal'>illegal</span>

  <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> )
  <span class='kw'>if</span> <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_include?'>include?</span> <span class='CHAR'>?&amp;</span>
    <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SETUTITSBUS-constant" title="REXML::Text::SETUTITSBUS (constant)">SETUTITSBUS</a></span>[<span class='int'>0</span>]<span class='comma'>,</span> <span class='const'><a href="#SLAICEPS-constant" title="REXML::Text::SLAICEPS (constant)">SLAICEPS</a></span>[<span class='int'>0</span>] )
    <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SETUTITSBUS-constant" title="REXML::Text::SETUTITSBUS (constant)">SETUTITSBUS</a></span>[<span class='int'>1</span>]<span class='comma'>,</span> <span class='const'><a href="#SLAICEPS-constant" title="REXML::Text::SLAICEPS (constant)">SLAICEPS</a></span>[<span class='int'>1</span>] )
    <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SETUTITSBUS-constant" title="REXML::Text::SETUTITSBUS (constant)">SETUTITSBUS</a></span>[<span class='int'>2</span>]<span class='comma'>,</span> <span class='const'><a href="#SLAICEPS-constant" title="REXML::Text::SLAICEPS (constant)">SLAICEPS</a></span>[<span class='int'>2</span>] )
    <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SETUTITSBUS-constant" title="REXML::Text::SETUTITSBUS (constant)">SETUTITSBUS</a></span>[<span class='int'>3</span>]<span class='comma'>,</span> <span class='const'><a href="#SLAICEPS-constant" title="REXML::Text::SLAICEPS (constant)">SLAICEPS</a></span>[<span class='int'>3</span>] )
    <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SETUTITSBUS-constant" title="REXML::Text::SETUTITSBUS (constant)">SETUTITSBUS</a></span>[<span class='int'>4</span>]<span class='comma'>,</span> <span class='const'><a href="#SLAICEPS-constant" title="REXML::Text::SLAICEPS (constant)">SLAICEPS</a></span>[<span class='int'>4</span>] )
    <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;#0*((?:\d)|(?:x[a-f0-9]));</span><span class='regexp_end'>/</span></span> ) {
      <span class='id identifier rubyid_m'>m</span><span class='op'>=</span><span class='backref'>$1</span>
      <span class='comment'>#m=&#39;0&#39; if m==&#39;&#39;
</span>      <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_m'>m</span>[<span class='int'>0</span>] <span class='op'>==</span> <span class='CHAR'>?x</span>
      [<span class='const'>Integer</span>(<span class='id identifier rubyid_m'>m</span>)].<span class='id identifier rubyid_pack'>pack</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&#39;</span></span>)
    }
  <span class='kw'>end</span>
  <span class='id identifier rubyid_copy'>copy</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unnormalize-class_method">
  <h3 class='signature priv'>
    .<strong>unnormalize</strong>(string, doctype = nil, filter = nil, illegal = nil, entity_expansion_text_limit: nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Unescapes all possible entities</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L390-L402'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='390' data-end='402'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 390</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='const'>Text</span><span class='op'>::</span><span class='id identifier rubyid_unnormalize'>unnormalize</span>( <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_filter'>filter</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_illegal'>illegal</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>entity_expansion_text_limit:</span> <span class='kw'>nil</span> )
  <span class='id identifier rubyid_entity_expansion_text_limit'>entity_expansion_text_limit</span> <span class='op'>||=</span> <span class='const'><a href="Security.html" title="REXML::Security (module)">Security</a></span>.<span class='id identifier rubyid_entity_expansion_text_limit'><a href="Security.html#entity_expansion_text_limit-class_method" title="REXML::Security.entity_expansion_text_limit (method)">entity_expansion_text_limit</a></span>
  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_gsub'>gsub</span>( <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> ).<span class='id identifier rubyid_gsub'>gsub</span>( <span class='const'><a href="#REFERENCE-constant" title="REXML::Text::REFERENCE (constant)">REFERENCE</a></span> ) {
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>Text</span>.<span class='id identifier rubyid_expand'><a href="#expand-class_method" title="REXML::Text.expand (method)">expand</a></span>(<span class='backref'>$&amp;</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span><span class='comma'>,</span> <span class='id identifier rubyid_filter'>filter</span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_sum'>sum</span> <span class='op'>+</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_entity_expansion_text_limit'>entity_expansion_text_limit</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>entity expansion has grown too large</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_sum'>sum</span> <span class='op'>+=</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_s'>s</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="empty?-instance_method">
  <h3 class='signature ro first'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L174-L176'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='174' data-end='176'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 174</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='ivar'>@string</span>.<span class='id identifier rubyid_size'>size</span><span class='op'>==</span><span class='int'>0</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parent=-instance_method">
  <h3 class='signature wo'>
    #<strong>parent=</strong>(parent)   <span class="extras">(<span class='writeonly'>writeonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L110-L113'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='110' data-end='113'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 110</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parent='>parent=</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='kw'>super</span>(<span class='id identifier rubyid_parent'>parent</span>)
  <span class='const'>Text</span>.<span class='id identifier rubyid_check'><a href="#check-class_method" title="REXML::Text.check (method)">check</a></span>(<span class='ivar'>@string</span><span class='comma'>,</span> <span class='const'><a href="#NEEDS_A_SECOND_CHECK-constant" title="REXML::Text::NEEDS_A_SECOND_CHECK (constant)">NEEDS_A_SECOND_CHECK</a></span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span>) <span class='kw'>if</span> <span class='ivar'>@raw</span> <span class='kw'>and</span> <span class='ivar'>@parent</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raw-instance_method">
  <h3 class='signature rw'>
    #<strong>raw</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If <code>raw</code> is true, then <a href="../REXML.html" title="REXML (module)"><code>::REXML</code></a> leaves the value alone</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L21-L21'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='21' data-end='21'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 21</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_raw'>raw</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="value-instance_method">
  <h3 class='signature rw'>
    #<strong>value</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the string value of this text.  This is the text without entities, as it might be used programmatically, or printed to the console.  This ignores the ‘raw’ attribute setting, and any entity_filter.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;, and that the
</span><span class='comment'># entity &quot;r&quot; is defined to be &quot;russell&quot;
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Text</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt; &amp; sean russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span>] )
<span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_value'>value</span>   <span class='comment'>#-&gt; &quot;&lt; &amp; sean russell&quot;
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Text</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt; &amp; &amp;s; russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span> )
<span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_value'>value</span>   <span class='comment'>#-&gt; &quot;&lt; &amp; sean russell&quot;
</span><span class='id identifier rubyid_u'>u</span> <span class='op'>=</span> <span class='const'>Text</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sean russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span> )
<span class='id identifier rubyid_u'>u</span>.<span class='id identifier rubyid_value'>value</span>   <span class='comment'>#-&gt; &quot;sean russell&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L245-L248'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='245' data-end='248'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 245</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_value'>value</span>
  <span class='ivar'>@unnormalized</span> <span class='op'>||=</span> <span class='const'>Text</span><span class='op'>::</span><span class='id identifier rubyid_unnormalize'><a href="#unnormalize-class_method" title="REXML::Text.unnormalize (method)">unnormalize</a></span>(<span class='ivar'>@string</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span><span class='comma'>,</span>
                                      <span class='label'>entity_expansion_text_limit:</span> <span class='id identifier rubyid_document'>document</span><span class='op'>&amp;.</span><span class='id identifier rubyid_entity_expansion_text_limit'>entity_expansion_text_limit</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="value=-instance_method">
  <h3 class='signature rw'>
    #<strong>value=</strong>(val)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the contents of this text node.  This expects the text to be unnormalized.  It returns self.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='const'><a href="Element.html" title="REXML::Element (class)">Element</a></span>.<span class='id identifier rubyid_new'><a href="Element.html#new-class_method" title="REXML::Element.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> )
<span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_add_text'>add_text</span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span> )   <span class='comment'># &lt;a&gt;foo&lt;/a&gt;
</span><span class='id identifier rubyid_e'>e</span>[<span class='int'>0</span>].<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span>    <span class='comment'># &lt;a&gt;bar&lt;/a&gt;
</span><span class='id identifier rubyid_e'>e</span>[<span class='int'>0</span>].<span class='id identifier rubyid_value'><a href="#value-instance_method" title="REXML::Text#value (method)">value</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a&gt;</span><span class='tstring_end'>&quot;</span></span>    <span class='comment'># &lt;a&gt;&amp;lt;a&amp;gt;&lt;/a&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L257-L261'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='257' data-end='261'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 257</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_value='>value=</span>( <span class='id identifier rubyid_val'>val</span> )
  <span class='ivar'>@string</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>.<span class='id identifier rubyid_gsub'>gsub</span>( <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> )
  <span class='id identifier rubyid_clear_cache'><a href="#clear_cache-instance_method" title="REXML::Text#clear_cache (method)">clear_cache</a></span>
  <span class='ivar'>@raw</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(to_append)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Appends text to this text node.  The text is appended in the <a href="#raw-instance_method" title="REXML::Text#raw (method)">#raw</a> mode of this text node.</p>

<p><code>returns</code> the text itself to enable method chain like ‘text &lt;&lt; “XXX” &lt;&lt; “YYY”’.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L189-L193'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='189' data-end='193'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 189</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>&lt;&lt;</span>( <span class='id identifier rubyid_to_append'>to_append</span> )
  <span class='ivar'>@string</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_to_append'>to_append</span>.<span class='id identifier rubyid_gsub'>gsub</span>( <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> )
  <span class='id identifier rubyid_clear_cache'><a href="#clear_cache-instance_method" title="REXML::Text#clear_cache (method)">clear_cache</a></span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="<=>-instance_method">
  <h3 class='signature '>
    #<strong>&lt;=&gt;</strong>(other)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>other</code> a String or a <code>Text</code> <code>returns</code> the result of (to_s &lt;=&gt; arg.to_s)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L198-L200'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='198' data-end='200'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 198</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>&lt;=&gt;</span>( <span class='id identifier rubyid_other'>other</span> )
  <span class='id identifier rubyid_to_s'><a href="#to_s-instance_method" title="REXML::Text#to_s (method)">to_s</a></span>() <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span>.<span class='id identifier rubyid_to_s'><a href="#to_s-instance_method" title="REXML::Text#to_s (method)">to_s</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_cache-instance_method">
  <h3 class='signature priv'>
    #<strong>clear_cache</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L334-L337'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='334' data-end='337'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 334</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_cache'>clear_cache</span>
  <span class='ivar'>@normalized</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@unnormalized</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clone-instance_method">
  <h3 class='signature '>
    #<strong>clone</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L179-L181'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='179' data-end='181'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 179</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clone'>clone</span>
  <span class='kw'>return</span> <span class='const'>Text</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>(<span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="doctype-instance_method">
  <h3 class='signature '>
    #<strong>doctype</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L202-L207'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='202' data-end='207'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 202</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_doctype'>doctype</span>
  <span class='kw'>if</span> <span class='ivar'>@parent</span>
    <span class='id identifier rubyid_doc'>doc</span> <span class='op'>=</span> <span class='ivar'>@parent</span>.<span class='id identifier rubyid_document'>document</span>
    <span class='id identifier rubyid_doc'>doc</span>.<span class='id identifier rubyid_doctype'>doctype</span> <span class='kw'>if</span> <span class='id identifier rubyid_doc'>doc</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="indent_text-instance_method">
  <h3 class='signature '>
    #<strong>indent_text</strong>(string, level = 1, style = &quot;\t&quot;, indentfirstline = true)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L274-L284'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='274' data-end='284'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 274</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_indent_text'>indent_text</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_level'>level</span><span class='op'>=</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_style'>style</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_indentfirstline'>indentfirstline</span><span class='op'>=</span><span class='kw'>true</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_string'>string</span> <span class='kw'>if</span> <span class='id identifier rubyid_level'>level</span> <span class='op'>&lt;</span> <span class='int'>0</span>
  <span class='id identifier rubyid_new_string'>new_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_each_line'>each_line</span> { <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
    <span class='id identifier rubyid_indent_string'>indent_string</span> <span class='op'>=</span> <span class='id identifier rubyid_style'>style</span> <span class='op'>*</span> <span class='id identifier rubyid_level'>level</span>
    <span class='id identifier rubyid_new_line'>new_line</span> <span class='op'>=</span> (<span class='id identifier rubyid_indent_string'>indent_string</span> <span class='op'>+</span> <span class='id identifier rubyid_line'>line</span>).<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\s]+$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
    <span class='id identifier rubyid_new_string'>new_string</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_new_line'>new_line</span>
  }
  <span class='id identifier rubyid_new_string'>new_string</span>.<span class='id identifier rubyid_strip!'>strip!</span> <span class='kw'>unless</span> <span class='id identifier rubyid_indentfirstline'>indentfirstline</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_new_string'>new_string</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L228-L230'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='228' data-end='230'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 228</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='ivar'>@string</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="node_type-instance_method">
  <h3 class='signature '>
    #<strong>node_type</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L170-L172'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='170' data-end='172'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 170</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_node_type'>node_type</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_text'>text</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_s-instance_method">
  <h3 class='signature '>
    #<strong>to_s</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the string value of this text node.  This string is always escaped, meaning that it is a valid XML text node string, and all entities that can be escaped, have been inserted.  This method respects the entity filter set in the constructor.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;, and that the
</span><span class='comment'># entity &quot;r&quot; is defined to be &quot;russell&quot;
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Text</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt; &amp; sean russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span>] )
<span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_to_s'>to_s</span>   <span class='comment'>#-&gt; &quot;&amp;lt; &amp;amp; &amp;s; russell&quot;
</span><span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Text</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt; &amp; &amp;s; russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span> )
<span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_to_s'>to_s</span>   <span class='comment'>#-&gt; &quot;&amp;lt; &amp;amp; &amp;s; russell&quot;
</span><span class='id identifier rubyid_u'>u</span> <span class='op'>=</span> <span class='const'>Text</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="REXML::Text.new (method)">new</a></span>( <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sean russell</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span> )
<span class='id identifier rubyid_u'>u</span>.<span class='id identifier rubyid_to_s'>to_s</span>   <span class='comment'>#-&gt; &quot;sean russell&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L223-L226'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='223' data-end='226'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 223</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>return</span> <span class='ivar'>@string</span> <span class='kw'>if</span> <span class='ivar'>@raw</span>
  <span class='ivar'>@normalized</span> <span class='op'>||=</span> <span class='const'>Text</span><span class='op'>::</span><span class='id identifier rubyid_normalize'><a href="#normalize-class_method" title="REXML::Text.normalize (method)">normalize</a></span>( <span class='ivar'>@string</span><span class='comma'>,</span> <span class='id identifier rubyid_doctype'><a href="#doctype-instance_method" title="REXML::Text#doctype (method)">doctype</a></span><span class='comma'>,</span> <span class='ivar'>@entity_filter</span> )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wrap-instance_method">
  <h3 class='signature '>
    #<strong>wrap</strong>(string, width, addnewline = false)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L263-L272'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='263' data-end='272'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 263</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_wrap'>wrap</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_width'>width</span><span class='comma'>,</span> <span class='id identifier rubyid_addnewline'>addnewline</span><span class='op'>=</span><span class='kw'>false</span>)
  <span class='comment'># Recursively wrap string at width.
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_string'>string</span> <span class='kw'>if</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_width'>width</span>
  <span class='id identifier rubyid_place'>place</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_rindex'>rindex</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_width'>width</span>) <span class='comment'># Position in string with last &#39; &#39; before cutoff
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_addnewline'>addnewline</span> <span class='kw'>then</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_string'>string</span>[<span class='int'>0</span><span class='comma'>,</span><span class='id identifier rubyid_place'>place</span>] <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_wrap'>wrap</span>(<span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_place'>place</span><span class='op'>+</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>]<span class='comma'>,</span> <span class='id identifier rubyid_width'>width</span>)
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_string'>string</span>[<span class='int'>0</span><span class='comma'>,</span><span class='id identifier rubyid_place'>place</span>] <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_wrap'>wrap</span>(<span class='id identifier rubyid_string'>string</span>[<span class='id identifier rubyid_place'>place</span><span class='op'>+</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>]<span class='comma'>,</span> <span class='id identifier rubyid_width'>width</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write-instance_method">
  <h3 class='signature '>
    #<strong>write</strong>(writer, indent = -1,, transitive = false, ie_hack = false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<h4 id="label-DEPRECATED">DEPRECATED</h4>

<p>See <a href="Formatters.html" title="REXML::Formatters (module)"><code>Formatters</code></a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L289-L297'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='289' data-end='297'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 289</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write'>write</span>( <span class='id identifier rubyid_writer'>writer</span><span class='comma'>,</span> <span class='id identifier rubyid_indent'>indent</span><span class='op'>=</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_transitive'>transitive</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_ie_hack'>ie_hack</span><span class='op'>=</span><span class='kw'>false</span> )
  <span class='const'>Kernel</span>.<span class='id identifier rubyid_warn'>warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.write is deprecated.  See REXML::Formatters</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>uplevel:</span> <span class='int'>1</span>)
  <span class='id identifier rubyid_formatter'>formatter</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_indent'>indent</span> <span class='op'>&gt;</span> <span class='op'>-</span><span class='int'>1</span>
      <span class='const'><a href="../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="Formatters.html" title="REXML::Formatters (module)">Formatters</a></span><span class='op'>::</span><span class='const'><a href="Formatters/Pretty.html" title="REXML::Formatters::Pretty (class)">Pretty</a></span>.<span class='id identifier rubyid_new'><a href="Formatters/Pretty.html#new-class_method" title="REXML::Formatters::Pretty.new (method)">new</a></span>( <span class='id identifier rubyid_indent'>indent</span> )
    <span class='kw'>else</span>
      <span class='const'><a href="../REXML.html" title="REXML (module)">REXML</a></span><span class='op'>::</span><span class='const'><a href="Formatters.html" title="REXML::Formatters (module)">Formatters</a></span><span class='op'>::</span><span class='const'><a href="Formatters/Default.html" title="REXML::Formatters::Default (class)">Default</a></span>.<span class='id identifier rubyid_new'><a href="Formatters/Default.html#new-class_method" title="REXML::Formatters::Default.new (method)">new</a></span>
    <span class='kw'>end</span>
  <span class='id identifier rubyid_formatter'>formatter</span>.<span class='id identifier rubyid_write'>write</span>( <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_writer'>writer</span> )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_with_substitution-instance_method">
  <h3 class='signature '>
    #<strong>write_with_substitution</strong>(out, input)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes out text, substituting special characters beforehand. <code>out</code> A String, IO, or any other object supporting &lt;&lt;( String ) <code>input</code> the text to substitute and the write out</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_z'>z</span><span class='op'>=</span><span class='id identifier rubyid_utf8'>utf8</span>.<span class='id identifier rubyid_unpack'>unpack</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_ascOut'>ascOut</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_z'>z</span>.<span class='id identifier rubyid_each'>each</span>{<span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_r'>r</span> <span class='op'>&lt;</span>  <span class='int'>0x100</span>
    <span class='id identifier rubyid_ascOut'>ascOut</span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_chr'>chr</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_ascOut'>ascOut</span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='id identifier rubyid_sprintf'>sprintf</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#x%x;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_r'>r</span>))
  <span class='kw'>end</span>
}
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_ascOut'>ascOut</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L321-L331'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='321' data-end='331'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 321</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_with_substitution'>write_with_substitution</span> <span class='id identifier rubyid_out'>out</span><span class='comma'>,</span> <span class='id identifier rubyid_input'>input</span>
  <span class='id identifier rubyid_copy'>copy</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span>.<span class='id identifier rubyid_clone'><a href="#clone-instance_method" title="REXML::Text#clone (method)">clone</a></span>
  <span class='comment'># Doing it like this rather than in a loop improves the speed
</span>  <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SPECIALS-constant" title="REXML::Text::SPECIALS (constant)">SPECIALS</a></span>[<span class='int'>0</span>]<span class='comma'>,</span> <span class='const'><a href="#SUBSTITUTES-constant" title="REXML::Text::SUBSTITUTES (constant)">SUBSTITUTES</a></span>[<span class='int'>0</span>] )
  <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SPECIALS-constant" title="REXML::Text::SPECIALS (constant)">SPECIALS</a></span>[<span class='int'>1</span>]<span class='comma'>,</span> <span class='const'><a href="#SUBSTITUTES-constant" title="REXML::Text::SUBSTITUTES (constant)">SUBSTITUTES</a></span>[<span class='int'>1</span>] )
  <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SPECIALS-constant" title="REXML::Text::SPECIALS (constant)">SPECIALS</a></span>[<span class='int'>2</span>]<span class='comma'>,</span> <span class='const'><a href="#SUBSTITUTES-constant" title="REXML::Text::SUBSTITUTES (constant)">SUBSTITUTES</a></span>[<span class='int'>2</span>] )
  <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SPECIALS-constant" title="REXML::Text::SPECIALS (constant)">SPECIALS</a></span>[<span class='int'>3</span>]<span class='comma'>,</span> <span class='const'><a href="#SUBSTITUTES-constant" title="REXML::Text::SUBSTITUTES (constant)">SUBSTITUTES</a></span>[<span class='int'>3</span>] )
  <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SPECIALS-constant" title="REXML::Text::SPECIALS (constant)">SPECIALS</a></span>[<span class='int'>4</span>]<span class='comma'>,</span> <span class='const'><a href="#SUBSTITUTES-constant" title="REXML::Text::SUBSTITUTES (constant)">SUBSTITUTES</a></span>[<span class='int'>4</span>] )
  <span class='id identifier rubyid_copy'>copy</span>.<span class='id identifier rubyid_gsub!'>gsub!</span>( <span class='const'><a href="#SPECIALS-constant" title="REXML::Text::SPECIALS (constant)">SPECIALS</a></span>[<span class='int'>5</span>]<span class='comma'>,</span> <span class='const'><a href="#SUBSTITUTES-constant" title="REXML::Text::SUBSTITUTES (constant)">SUBSTITUTES</a></span>[<span class='int'>5</span>] )
  <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_copy'>copy</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="xpath-instance_method">
  <h3 class='signature '>
    #<strong>xpath</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>FIXME This probably won’t work properly</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.4.0/lib/rexml/text.rb#L301-L305'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='301' data-end='305'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/text.rb', line 301</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_xpath'>xpath</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='ivar'>@parent</span>.<span class='id identifier rubyid_xpath'>xpath</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/text()</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id identifier rubyid_path'>path</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>